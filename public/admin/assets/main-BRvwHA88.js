const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/JsonSchemaForm-7GbBqc7p.js","assets/TextareaWidget-CTjszNqZ.js","assets/index-BcZrMAOw.js"])))=>i.map(i=>d[i]);
var kK=Object.defineProperty;var Ck=e=>{throw TypeError(e)};var MK=(e,t,n)=>t in e?kK(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var K=(e,t,n)=>MK(e,typeof t!="symbol"?t+"":t,n),K2=(e,t,n)=>t.has(e)||Ck("Cannot "+n);var Y=(e,t,n)=>(K2(e,t,"read from private field"),n?n.call(e):t.get(e)),Fe=(e,t,n)=>t.has(e)?Ck("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Be=(e,t,n,r)=>(K2(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),ot=(e,t,n)=>(K2(e,t,"access private method"),n);var Ok=(e,t,n,r)=>({set _(s){Be(e,t,s,n)},get _(){return Y(e,t,r)}});function IK(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}var l8e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function eo(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Q2={exports:{}},Np={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jk;function PK(){if(jk)return Np;jk=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,s,i){var o=null;if(i!==void 0&&(o=""+i),s.key!==void 0&&(o=""+s.key),"key"in s){i={};for(var a in s)a!=="key"&&(i[a]=s[a])}else i=s;return s=i.ref,{$$typeof:e,type:r,key:o,ref:s!==void 0?s:null,props:i}}return Np.Fragment=t,Np.jsx=n,Np.jsxs=n,Np}var Ak;function DK(){return Ak||(Ak=1,Q2.exports=PK()),Q2.exports}var m=DK(),Z2={exports:{}},yt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tk;function LK(){if(Tk)return yt;Tk=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),h=Symbol.iterator;function p(F){return F===null||typeof F!="object"?null:(F=h&&F[h]||F["@@iterator"],typeof F=="function"?F:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,x={};function E(F,q,X){this.props=F,this.context=q,this.refs=x,this.updater=X||y}E.prototype.isReactComponent={},E.prototype.setState=function(F,q){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,q,"setState")},E.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function N(){}N.prototype=E.prototype;function _(F,q,X){this.props=F,this.context=q,this.refs=x,this.updater=X||y}var C=_.prototype=new N;C.constructor=_,v(C,E.prototype),C.isPureReactComponent=!0;var j=Array.isArray,A={H:null,A:null,T:null,S:null,V:null},$=Object.prototype.hasOwnProperty;function k(F,q,X,Q,se,ae){return X=ae.ref,{$$typeof:e,type:F,key:q,ref:X!==void 0?X:null,props:ae}}function R(F,q){return k(F.type,q,void 0,void 0,void 0,F.props)}function B(F){return typeof F=="object"&&F!==null&&F.$$typeof===e}function z(F){var q={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(X){return q[X]})}var D=/\/+/g;function L(F,q){return typeof F=="object"&&F!==null&&F.key!=null?z(""+F.key):q.toString(36)}function H(){}function M(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(H,H):(F.status="pending",F.then(function(q){F.status==="pending"&&(F.status="fulfilled",F.value=q)},function(q){F.status==="pending"&&(F.status="rejected",F.reason=q)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function V(F,q,X,Q,se){var ae=typeof F;(ae==="undefined"||ae==="boolean")&&(F=null);var de=!1;if(F===null)de=!0;else switch(ae){case"bigint":case"string":case"number":de=!0;break;case"object":switch(F.$$typeof){case e:case t:de=!0;break;case f:return de=F._init,V(de(F._payload),q,X,Q,se)}}if(de)return se=se(F),de=Q===""?"."+L(F,0):Q,j(se)?(X="",de!=null&&(X=de.replace(D,"$&/")+"/"),V(se,q,X,"",function(ve){return ve})):se!=null&&(B(se)&&(se=R(se,X+(se.key==null||F&&F.key===se.key?"":(""+se.key).replace(D,"$&/")+"/")+de)),q.push(se)),1;de=0;var ce=Q===""?".":Q+":";if(j(F))for(var fe=0;fe<F.length;fe++)Q=F[fe],ae=ce+L(Q,fe),de+=V(Q,q,X,ae,se);else if(fe=p(F),typeof fe=="function")for(F=fe.call(F),fe=0;!(Q=F.next()).done;)Q=Q.value,ae=ce+L(Q,fe++),de+=V(Q,q,X,ae,se);else if(ae==="object"){if(typeof F.then=="function")return V(M(F),q,X,Q,se);throw q=String(F),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return de}function T(F,q,X){if(F==null)return F;var Q=[],se=0;return V(F,Q,"","",function(ae){return q.call(X,ae,se++)}),Q}function I(F){if(F._status===-1){var q=F._result;q=q(),q.then(function(X){(F._status===0||F._status===-1)&&(F._status=1,F._result=X)},function(X){(F._status===0||F._status===-1)&&(F._status=2,F._result=X)}),F._status===-1&&(F._status=0,F._result=q)}if(F._status===1)return F._result.default;throw F._result}var P=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)};function W(){}return yt.Children={map:T,forEach:function(F,q,X){T(F,function(){q.apply(this,arguments)},X)},count:function(F){var q=0;return T(F,function(){q++}),q},toArray:function(F){return T(F,function(q){return q})||[]},only:function(F){if(!B(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},yt.Component=E,yt.Fragment=n,yt.Profiler=s,yt.PureComponent=_,yt.StrictMode=r,yt.Suspense=c,yt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,yt.__COMPILER_RUNTIME={__proto__:null,c:function(F){return A.H.useMemoCache(F)}},yt.cache=function(F){return function(){return F.apply(null,arguments)}},yt.cloneElement=function(F,q,X){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var Q=v({},F.props),se=F.key,ae=void 0;if(q!=null)for(de in q.ref!==void 0&&(ae=void 0),q.key!==void 0&&(se=""+q.key),q)!$.call(q,de)||de==="key"||de==="__self"||de==="__source"||de==="ref"&&q.ref===void 0||(Q[de]=q[de]);var de=arguments.length-2;if(de===1)Q.children=X;else if(1<de){for(var ce=Array(de),fe=0;fe<de;fe++)ce[fe]=arguments[fe+2];Q.children=ce}return k(F.type,se,void 0,void 0,ae,Q)},yt.createContext=function(F){return F={$$typeof:o,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:i,_context:F},F},yt.createElement=function(F,q,X){var Q,se={},ae=null;if(q!=null)for(Q in q.key!==void 0&&(ae=""+q.key),q)$.call(q,Q)&&Q!=="key"&&Q!=="__self"&&Q!=="__source"&&(se[Q]=q[Q]);var de=arguments.length-2;if(de===1)se.children=X;else if(1<de){for(var ce=Array(de),fe=0;fe<de;fe++)ce[fe]=arguments[fe+2];se.children=ce}if(F&&F.defaultProps)for(Q in de=F.defaultProps,de)se[Q]===void 0&&(se[Q]=de[Q]);return k(F,ae,void 0,void 0,null,se)},yt.createRef=function(){return{current:null}},yt.forwardRef=function(F){return{$$typeof:a,render:F}},yt.isValidElement=B,yt.lazy=function(F){return{$$typeof:f,_payload:{_status:-1,_result:F},_init:I}},yt.memo=function(F,q){return{$$typeof:u,type:F,compare:q===void 0?null:q}},yt.startTransition=function(F){var q=A.T,X={};A.T=X;try{var Q=F(),se=A.S;se!==null&&se(X,Q),typeof Q=="object"&&Q!==null&&typeof Q.then=="function"&&Q.then(W,P)}catch(ae){P(ae)}finally{A.T=q}},yt.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},yt.use=function(F){return A.H.use(F)},yt.useActionState=function(F,q,X){return A.H.useActionState(F,q,X)},yt.useCallback=function(F,q){return A.H.useCallback(F,q)},yt.useContext=function(F){return A.H.useContext(F)},yt.useDebugValue=function(){},yt.useDeferredValue=function(F,q){return A.H.useDeferredValue(F,q)},yt.useEffect=function(F,q,X){var Q=A.H;if(typeof X=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Q.useEffect(F,q)},yt.useId=function(){return A.H.useId()},yt.useImperativeHandle=function(F,q,X){return A.H.useImperativeHandle(F,q,X)},yt.useInsertionEffect=function(F,q){return A.H.useInsertionEffect(F,q)},yt.useLayoutEffect=function(F,q){return A.H.useLayoutEffect(F,q)},yt.useMemo=function(F,q){return A.H.useMemo(F,q)},yt.useOptimistic=function(F,q){return A.H.useOptimistic(F,q)},yt.useReducer=function(F,q,X){return A.H.useReducer(F,q,X)},yt.useRef=function(F){return A.H.useRef(F)},yt.useState=function(F){return A.H.useState(F)},yt.useSyncExternalStore=function(F,q,X){return A.H.useSyncExternalStore(F,q,X)},yt.useTransition=function(){return A.H.useTransition()},yt.version="19.1.0",yt}var $k;function Xh(){return $k||($k=1,Z2.exports=LK()),Z2.exports}var w=Xh();const je=eo(w),z8=IK({__proto__:null,default:je},[w]);var eN={exports:{}},_p={},tN={exports:{}},nN={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rk;function FK(){return Rk||(Rk=1,function(e){function t(T,I){var P=T.length;T.push(I);e:for(;0<P;){var W=P-1>>>1,F=T[W];if(0<s(F,I))T[W]=I,T[P]=F,P=W;else break e}}function n(T){return T.length===0?null:T[0]}function r(T){if(T.length===0)return null;var I=T[0],P=T.pop();if(P!==I){T[0]=P;e:for(var W=0,F=T.length,q=F>>>1;W<q;){var X=2*(W+1)-1,Q=T[X],se=X+1,ae=T[se];if(0>s(Q,P))se<F&&0>s(ae,Q)?(T[W]=ae,T[se]=P,W=se):(T[W]=Q,T[X]=P,W=X);else if(se<F&&0>s(ae,P))T[W]=ae,T[se]=P,W=se;else break e}}return I}function s(T,I){var P=T.sortIndex-I.sortIndex;return P!==0?P:T.id-I.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var c=[],u=[],f=1,h=null,p=3,y=!1,v=!1,x=!1,E=!1,N=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function j(T){for(var I=n(u);I!==null;){if(I.callback===null)r(u);else if(I.startTime<=T)r(u),I.sortIndex=I.expirationTime,t(c,I);else break;I=n(u)}}function A(T){if(x=!1,j(T),!v)if(n(c)!==null)v=!0,$||($=!0,L());else{var I=n(u);I!==null&&V(A,I.startTime-T)}}var $=!1,k=-1,R=5,B=-1;function z(){return E?!0:!(e.unstable_now()-B<R)}function D(){if(E=!1,$){var T=e.unstable_now();B=T;var I=!0;try{e:{v=!1,x&&(x=!1,_(k),k=-1),y=!0;var P=p;try{t:{for(j(T),h=n(c);h!==null&&!(h.expirationTime>T&&z());){var W=h.callback;if(typeof W=="function"){h.callback=null,p=h.priorityLevel;var F=W(h.expirationTime<=T);if(T=e.unstable_now(),typeof F=="function"){h.callback=F,j(T),I=!0;break t}h===n(c)&&r(c),j(T)}else r(c);h=n(c)}if(h!==null)I=!0;else{var q=n(u);q!==null&&V(A,q.startTime-T),I=!1}}break e}finally{h=null,p=P,y=!1}I=void 0}}finally{I?L():$=!1}}}var L;if(typeof C=="function")L=function(){C(D)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,M=H.port2;H.port1.onmessage=D,L=function(){M.postMessage(null)}}else L=function(){N(D,0)};function V(T,I){k=N(function(){T(e.unstable_now())},I)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(T){T.callback=null},e.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<T?Math.floor(1e3/T):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_next=function(T){switch(p){case 1:case 2:case 3:var I=3;break;default:I=p}var P=p;p=I;try{return T()}finally{p=P}},e.unstable_requestPaint=function(){E=!0},e.unstable_runWithPriority=function(T,I){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var P=p;p=T;try{return I()}finally{p=P}},e.unstable_scheduleCallback=function(T,I,P){var W=e.unstable_now();switch(typeof P=="object"&&P!==null?(P=P.delay,P=typeof P=="number"&&0<P?W+P:W):P=W,T){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=P+F,T={id:f++,callback:I,priorityLevel:T,startTime:P,expirationTime:F,sortIndex:-1},P>W?(T.sortIndex=P,t(u,T),n(c)===null&&T===n(u)&&(x?(_(k),k=-1):x=!0,V(A,P-W))):(T.sortIndex=F,t(c,T),v||y||(v=!0,$||($=!0,L()))),T},e.unstable_shouldYield=z,e.unstable_wrapCallback=function(T){var I=p;return function(){var P=p;p=I;try{return T.apply(this,arguments)}finally{p=P}}}}(nN)),nN}var kk;function BK(){return kk||(kk=1,tN.exports=FK()),tN.exports}var rN={exports:{}},xr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mk;function zK(){if(Mk)return xr;Mk=1;var e=Xh();function t(c){var u="https://react.dev/errors/"+c;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)u+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+c+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function i(c,u,f){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:h==null?null:""+h,children:c,containerInfo:u,implementation:f}}var o=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function a(c,u){if(c==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return xr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,xr.createPortal=function(c,u){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(t(299));return i(c,u,null,f)},xr.flushSync=function(c){var u=o.T,f=r.p;try{if(o.T=null,r.p=2,c)return c()}finally{o.T=u,r.p=f,r.d.f()}},xr.preconnect=function(c,u){typeof c=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,r.d.C(c,u))},xr.prefetchDNS=function(c){typeof c=="string"&&r.d.D(c)},xr.preinit=function(c,u){if(typeof c=="string"&&u&&typeof u.as=="string"){var f=u.as,h=a(f,u.crossOrigin),p=typeof u.integrity=="string"?u.integrity:void 0,y=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;f==="style"?r.d.S(c,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:h,integrity:p,fetchPriority:y}):f==="script"&&r.d.X(c,{crossOrigin:h,integrity:p,fetchPriority:y,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},xr.preinitModule=function(c,u){if(typeof c=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var f=a(u.as,u.crossOrigin);r.d.M(c,{crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&r.d.M(c)},xr.preload=function(c,u){if(typeof c=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var f=u.as,h=a(f,u.crossOrigin);r.d.L(c,f,{crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},xr.preloadModule=function(c,u){if(typeof c=="string")if(u){var f=a(u.as,u.crossOrigin);r.d.m(c,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else r.d.m(c)},xr.requestFormReset=function(c){r.d.r(c)},xr.unstable_batchedUpdates=function(c,u){return c(u)},xr.useFormState=function(c,u,f){return o.H.useFormState(c,u,f)},xr.useFormStatus=function(){return o.H.useHostTransitionStatus()},xr.version="19.1.0",xr}var Ik;function V8(){if(Ik)return rN.exports;Ik=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),rN.exports=zK(),rN.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pk;function VK(){if(Pk)return _p;Pk=1;var e=BK(),t=Xh(),n=V8();function r(l){var d="https://react.dev/errors/"+l;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)d+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+l+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function i(l){var d=l,g=l;if(l.alternate)for(;d.return;)d=d.return;else{l=d;do d=l,(d.flags&4098)!==0&&(g=d.return),l=d.return;while(l)}return d.tag===3?g:null}function o(l){if(l.tag===13){var d=l.memoizedState;if(d===null&&(l=l.alternate,l!==null&&(d=l.memoizedState)),d!==null)return d.dehydrated}return null}function a(l){if(i(l)!==l)throw Error(r(188))}function c(l){var d=l.alternate;if(!d){if(d=i(l),d===null)throw Error(r(188));return d!==l?null:l}for(var g=l,b=d;;){var S=g.return;if(S===null)break;var O=S.alternate;if(O===null){if(b=S.return,b!==null){g=b;continue}break}if(S.child===O.child){for(O=S.child;O;){if(O===g)return a(S),l;if(O===b)return a(S),d;O=O.sibling}throw Error(r(188))}if(g.return!==b.return)g=S,b=O;else{for(var U=!1,J=S.child;J;){if(J===g){U=!0,g=S,b=O;break}if(J===b){U=!0,b=S,g=O;break}J=J.sibling}if(!U){for(J=O.child;J;){if(J===g){U=!0,g=O,b=S;break}if(J===b){U=!0,b=O,g=S;break}J=J.sibling}if(!U)throw Error(r(189))}}if(g.alternate!==b)throw Error(r(190))}if(g.tag!==3)throw Error(r(188));return g.stateNode.current===g?l:d}function u(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l;for(l=l.child;l!==null;){if(d=u(l),d!==null)return d;l=l.sibling}return null}var f=Object.assign,h=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),_=Symbol.for("react.consumer"),C=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),z=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function L(l){return l===null||typeof l!="object"?null:(l=D&&l[D]||l["@@iterator"],typeof l=="function"?l:null)}var H=Symbol.for("react.client.reference");function M(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===H?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case v:return"Fragment";case E:return"Profiler";case x:return"StrictMode";case A:return"Suspense";case $:return"SuspenseList";case B:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case y:return"Portal";case C:return(l.displayName||"Context")+".Provider";case _:return(l._context.displayName||"Context")+".Consumer";case j:var d=l.render;return l=l.displayName,l||(l=d.displayName||d.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case k:return d=l.displayName||null,d!==null?d:M(l.type)||"Memo";case R:d=l._payload,l=l._init;try{return M(l(d))}catch{}}return null}var V=Array.isArray,T=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P={pending:!1,data:null,method:null,action:null},W=[],F=-1;function q(l){return{current:l}}function X(l){0>F||(l.current=W[F],W[F]=null,F--)}function Q(l,d){F++,W[F]=l.current,l.current=d}var se=q(null),ae=q(null),de=q(null),ce=q(null);function fe(l,d){switch(Q(de,d),Q(ae,l),Q(se,null),d.nodeType){case 9:case 11:l=(l=d.documentElement)&&(l=l.namespaceURI)?ek(l):0;break;default:if(l=d.tagName,d=d.namespaceURI)d=ek(d),l=tk(d,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}X(se),Q(se,l)}function ve(){X(se),X(ae),X(de)}function Ae(l){l.memoizedState!==null&&Q(ce,l);var d=se.current,g=tk(d,l.type);d!==g&&(Q(ae,l),Q(se,g))}function Ce(l){ae.current===l&&(X(se),X(ae)),ce.current===l&&(X(ce),vp._currentValue=P)}var Ee=Object.prototype.hasOwnProperty,Re=e.unstable_scheduleCallback,ke=e.unstable_cancelCallback,He=e.unstable_shouldYield,et=e.unstable_requestPaint,Oe=e.unstable_now,Me=e.unstable_getCurrentPriorityLevel,Ie=e.unstable_ImmediatePriority,G=e.unstable_UserBlockingPriority,re=e.unstable_NormalPriority,te=e.unstable_LowPriority,he=e.unstable_IdlePriority,ie=e.log,ne=e.unstable_setDisableYieldValue,le=null,xe=null;function Ne(l){if(typeof ie=="function"&&ne(l),xe&&typeof xe.setStrictMode=="function")try{xe.setStrictMode(le,l)}catch{}}var Ge=Math.clz32?Math.clz32:oo,Vt=Math.log,St=Math.LN2;function oo(l){return l>>>=0,l===0?32:31-(Vt(l)/St|0)|0}var Ut=256,hn=4194304;function ur(l){var d=l&42;if(d!==0)return d;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function wi(l,d,g){var b=l.pendingLanes;if(b===0)return 0;var S=0,O=l.suspendedLanes,U=l.pingedLanes;l=l.warmLanes;var J=b&134217727;return J!==0?(b=J&~O,b!==0?S=ur(b):(U&=J,U!==0?S=ur(U):g||(g=J&~l,g!==0&&(S=ur(g))))):(J=b&~O,J!==0?S=ur(J):U!==0?S=ur(U):g||(g=b&~l,g!==0&&(S=ur(g)))),S===0?0:d!==0&&d!==S&&(d&O)===0&&(O=S&-S,g=d&-d,O>=g||O===32&&(g&4194048)!==0)?d:S}function Bs(l,d){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&d)===0}function ao(l,d){switch(l){case 1:case 2:case 4:case 8:case 64:return d+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qc(){var l=Ut;return Ut<<=1,(Ut&4194048)===0&&(Ut=256),l}function Ad(){var l=hn;return hn<<=1,(hn&62914560)===0&&(hn=4194304),l}function al(l){for(var d=[],g=0;31>g;g++)d.push(l);return d}function Vo(l,d){l.pendingLanes|=d,d!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function zs(l,d,g,b,S,O){var U=l.pendingLanes;l.pendingLanes=g,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=g,l.entangledLanes&=g,l.errorRecoveryDisabledLanes&=g,l.shellSuspendCounter=0;var J=l.entanglements,ee=l.expirationTimes,ge=l.hiddenUpdates;for(g=U&~g;0<g;){var we=31-Ge(g),_e=1<<we;J[we]=0,ee[we]=-1;var ye=ge[we];if(ye!==null)for(ge[we]=null,we=0;we<ye.length;we++){var be=ye[we];be!==null&&(be.lane&=-536870913)}g&=~_e}b!==0&&Hc(l,b,0),O!==0&&S===0&&l.tag!==0&&(l.suspendedLanes|=O&~(U&~d))}function Hc(l,d,g){l.pendingLanes|=d,l.suspendedLanes&=~d;var b=31-Ge(d);l.entangledLanes|=d,l.entanglements[b]=l.entanglements[b]|1073741824|g&4194090}function Cm(l,d){var g=l.entangledLanes|=d;for(l=l.entanglements;g;){var b=31-Ge(g),S=1<<b;S&d|l[b]&d&&(l[b]|=d),g&=~S}}function Wc(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function Gc(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function mn(){var l=I.p;return l!==0?l:(l=window.event,l===void 0?32:xk(l.type))}function Si(l,d){var g=I.p;try{return I.p=l,d()}finally{I.p=g}}var er=Math.random().toString(36).slice(2),an="__reactFiber$"+er,Ln="__reactProps$"+er,Ei="__reactContainer$"+er,ll="__reactEvents$"+er,Td="__reactListeners$"+er,Om="__reactHandles$"+er,$d="__reactResources$"+er,Uo="__reactMarker$"+er;function Yc(l){delete l[an],delete l[Ln],delete l[ll],delete l[Td],delete l[Om]}function mt(l){var d=l[an];if(d)return d;for(var g=l.parentNode;g;){if(d=g[Ei]||g[an]){if(g=d.alternate,d.child!==null||g!==null&&g.child!==null)for(l=ik(l);l!==null;){if(g=l[an])return g;l=ik(l)}return d}l=g,g=l.parentNode}return null}function Tn(l){if(l=l[an]||l[Ei]){var d=l.tag;if(d===5||d===6||d===13||d===26||d===27||d===3)return l}return null}function br(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l.stateNode;throw Error(r(33))}function qo(l){var d=l[$d];return d||(d=l[$d]={hoistableStyles:new Map,hoistableScripts:new Map}),d}function Fn(l){l[Uo]=!0}var w0=new Set,S0={};function Ho(l,d){cl(l,d),cl(l+"Capture",d)}function cl(l,d){for(S0[l]=d,l=0;l<d.length;l++)w0.add(d[l])}var E0=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),N0={},_0={};function WS(l){return Ee.call(_0,l)?!0:Ee.call(N0,l)?!1:E0.test(l)?_0[l]=!0:(N0[l]=!0,!1)}function Rd(l,d,g){if(WS(d))if(g===null)l.removeAttribute(d);else{switch(typeof g){case"undefined":case"function":case"symbol":l.removeAttribute(d);return;case"boolean":var b=d.toLowerCase().slice(0,5);if(b!=="data-"&&b!=="aria-"){l.removeAttribute(d);return}}l.setAttribute(d,""+g)}}function kd(l,d,g){if(g===null)l.removeAttribute(d);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(d);return}l.setAttribute(d,""+g)}}function Ni(l,d,g,b){if(b===null)l.removeAttribute(g);else{switch(typeof b){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(g);return}l.setAttributeNS(d,g,""+b)}}var jm,Am;function ul(l){if(jm===void 0)try{throw Error()}catch(g){var d=g.stack.trim().match(/\n( *(at )?)/);jm=d&&d[1]||"",Am=-1<g.stack.indexOf(`
    at`)?" (<anonymous>)":-1<g.stack.indexOf("@")?"@unknown:0:0":""}return`
`+jm+l+Am}var Tm=!1;function $m(l,d){if(!l||Tm)return"";Tm=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var b={DetermineComponentFrameRoot:function(){try{if(d){var _e=function(){throw Error()};if(Object.defineProperty(_e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_e,[])}catch(be){var ye=be}Reflect.construct(l,[],_e)}else{try{_e.call()}catch(be){ye=be}l.call(_e.prototype)}}else{try{throw Error()}catch(be){ye=be}(_e=l())&&typeof _e.catch=="function"&&_e.catch(function(){})}}catch(be){if(be&&ye&&typeof be.stack=="string")return[be.stack,ye.stack]}return[null,null]}};b.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var S=Object.getOwnPropertyDescriptor(b.DetermineComponentFrameRoot,"name");S&&S.configurable&&Object.defineProperty(b.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var O=b.DetermineComponentFrameRoot(),U=O[0],J=O[1];if(U&&J){var ee=U.split(`
`),ge=J.split(`
`);for(S=b=0;b<ee.length&&!ee[b].includes("DetermineComponentFrameRoot");)b++;for(;S<ge.length&&!ge[S].includes("DetermineComponentFrameRoot");)S++;if(b===ee.length||S===ge.length)for(b=ee.length-1,S=ge.length-1;1<=b&&0<=S&&ee[b]!==ge[S];)S--;for(;1<=b&&0<=S;b--,S--)if(ee[b]!==ge[S]){if(b!==1||S!==1)do if(b--,S--,0>S||ee[b]!==ge[S]){var we=`
`+ee[b].replace(" at new "," at ");return l.displayName&&we.includes("<anonymous>")&&(we=we.replace("<anonymous>",l.displayName)),we}while(1<=b&&0<=S);break}}}finally{Tm=!1,Error.prepareStackTrace=g}return(g=l?l.displayName||l.name:"")?ul(g):""}function GS(l){switch(l.tag){case 26:case 27:case 5:return ul(l.type);case 16:return ul("Lazy");case 13:return ul("Suspense");case 19:return ul("SuspenseList");case 0:case 15:return $m(l.type,!1);case 11:return $m(l.type.render,!1);case 1:return $m(l.type,!0);case 31:return ul("Activity");default:return""}}function C0(l){try{var d="";do d+=GS(l),l=l.return;while(l);return d}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}function Yr(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function O0(l){var d=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function Md(l){var d=O0(l)?"checked":"value",g=Object.getOwnPropertyDescriptor(l.constructor.prototype,d),b=""+l[d];if(!l.hasOwnProperty(d)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var S=g.get,O=g.set;return Object.defineProperty(l,d,{configurable:!0,get:function(){return S.call(this)},set:function(U){b=""+U,O.call(this,U)}}),Object.defineProperty(l,d,{enumerable:g.enumerable}),{getValue:function(){return b},setValue:function(U){b=""+U},stopTracking:function(){l._valueTracker=null,delete l[d]}}}}function Id(l){l._valueTracker||(l._valueTracker=Md(l))}function j0(l){if(!l)return!1;var d=l._valueTracker;if(!d)return!0;var g=d.getValue(),b="";return l&&(b=O0(l)?l.checked?"true":"false":l.value),l=b,l!==g?(d.setValue(l),!0):!1}function dl(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var YS=/[\n"\\]/g;function Jr(l){return l.replace(YS,function(d){return"\\"+d.charCodeAt(0).toString(16)+" "})}function Pd(l,d,g,b,S,O,U,J){l.name="",U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?l.type=U:l.removeAttribute("type"),d!=null?U==="number"?(d===0&&l.value===""||l.value!=d)&&(l.value=""+Yr(d)):l.value!==""+Yr(d)&&(l.value=""+Yr(d)):U!=="submit"&&U!=="reset"||l.removeAttribute("value"),d!=null?JS(l,U,Yr(d)):g!=null?JS(l,U,Yr(g)):b!=null&&l.removeAttribute("value"),S==null&&O!=null&&(l.defaultChecked=!!O),S!=null&&(l.checked=S&&typeof S!="function"&&typeof S!="symbol"),J!=null&&typeof J!="function"&&typeof J!="symbol"&&typeof J!="boolean"?l.name=""+Yr(J):l.removeAttribute("name")}function K3(l,d,g,b,S,O,U,J){if(O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(l.type=O),d!=null||g!=null){if(!(O!=="submit"&&O!=="reset"||d!=null))return;g=g!=null?""+Yr(g):"",d=d!=null?""+Yr(d):g,J||d===l.value||(l.value=d),l.defaultValue=d}b=b??S,b=typeof b!="function"&&typeof b!="symbol"&&!!b,l.checked=J?l.checked:!!b,l.defaultChecked=!!b,U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"&&(l.name=U)}function JS(l,d,g){d==="number"&&dl(l.ownerDocument)===l||l.defaultValue===""+g||(l.defaultValue=""+g)}function Dd(l,d,g,b){if(l=l.options,d){d={};for(var S=0;S<g.length;S++)d["$"+g[S]]=!0;for(g=0;g<l.length;g++)S=d.hasOwnProperty("$"+l[g].value),l[g].selected!==S&&(l[g].selected=S),S&&b&&(l[g].defaultSelected=!0)}else{for(g=""+Yr(g),d=null,S=0;S<l.length;S++){if(l[S].value===g){l[S].selected=!0,b&&(l[S].defaultSelected=!0);return}d!==null||l[S].disabled||(d=l[S])}d!==null&&(d.selected=!0)}}function Q3(l,d,g){if(d!=null&&(d=""+Yr(d),d!==l.value&&(l.value=d),g==null)){l.defaultValue!==d&&(l.defaultValue=d);return}l.defaultValue=g!=null?""+Yr(g):""}function Z3(l,d,g,b){if(d==null){if(b!=null){if(g!=null)throw Error(r(92));if(V(b)){if(1<b.length)throw Error(r(93));b=b[0]}g=b}g==null&&(g=""),d=g}g=Yr(d),l.defaultValue=g,b=l.textContent,b===g&&b!==""&&b!==null&&(l.value=b)}function Ld(l,d){if(d){var g=l.firstChild;if(g&&g===l.lastChild&&g.nodeType===3){g.nodeValue=d;return}}l.textContent=d}var TJ=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function e4(l,d,g){var b=d.indexOf("--")===0;g==null||typeof g=="boolean"||g===""?b?l.setProperty(d,""):d==="float"?l.cssFloat="":l[d]="":b?l.setProperty(d,g):typeof g!="number"||g===0||TJ.has(d)?d==="float"?l.cssFloat=g:l[d]=(""+g).trim():l[d]=g+"px"}function t4(l,d,g){if(d!=null&&typeof d!="object")throw Error(r(62));if(l=l.style,g!=null){for(var b in g)!g.hasOwnProperty(b)||d!=null&&d.hasOwnProperty(b)||(b.indexOf("--")===0?l.setProperty(b,""):b==="float"?l.cssFloat="":l[b]="");for(var S in d)b=d[S],d.hasOwnProperty(S)&&g[S]!==b&&e4(l,S,b)}else for(var O in d)d.hasOwnProperty(O)&&e4(l,O,d[O])}function XS(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $J=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),RJ=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function A0(l){return RJ.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}var KS=null;function QS(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Fd=null,Bd=null;function n4(l){var d=Tn(l);if(d&&(l=d.stateNode)){var g=l[Ln]||null;e:switch(l=d.stateNode,d.type){case"input":if(Pd(l,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name),d=g.name,g.type==="radio"&&d!=null){for(g=l;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll('input[name="'+Jr(""+d)+'"][type="radio"]'),d=0;d<g.length;d++){var b=g[d];if(b!==l&&b.form===l.form){var S=b[Ln]||null;if(!S)throw Error(r(90));Pd(b,S.value,S.defaultValue,S.defaultValue,S.checked,S.defaultChecked,S.type,S.name)}}for(d=0;d<g.length;d++)b=g[d],b.form===l.form&&j0(b)}break e;case"textarea":Q3(l,g.value,g.defaultValue);break e;case"select":d=g.value,d!=null&&Dd(l,!!g.multiple,d,!1)}}}var ZS=!1;function r4(l,d,g){if(ZS)return l(d,g);ZS=!0;try{var b=l(d);return b}finally{if(ZS=!1,(Fd!==null||Bd!==null)&&(mb(),Fd&&(d=Fd,l=Bd,Bd=Fd=null,n4(d),l)))for(d=0;d<l.length;d++)n4(l[d])}}function Rm(l,d){var g=l.stateNode;if(g===null)return null;var b=g[Ln]||null;if(b===null)return null;g=b[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(b=!b.disabled)||(l=l.type,b=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!b;break e;default:l=!1}if(l)return null;if(g&&typeof g!="function")throw Error(r(231,d,typeof g));return g}var Wo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),eE=!1;if(Wo)try{var km={};Object.defineProperty(km,"passive",{get:function(){eE=!0}}),window.addEventListener("test",km,km),window.removeEventListener("test",km,km)}catch{eE=!1}var fl=null,tE=null,T0=null;function s4(){if(T0)return T0;var l,d=tE,g=d.length,b,S="value"in fl?fl.value:fl.textContent,O=S.length;for(l=0;l<g&&d[l]===S[l];l++);var U=g-l;for(b=1;b<=U&&d[g-b]===S[O-b];b++);return T0=S.slice(l,1<b?1-b:void 0)}function $0(l){var d=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&d===13&&(l=13)):l=d,l===10&&(l=13),32<=l||l===13?l:0}function R0(){return!0}function i4(){return!1}function Xr(l){function d(g,b,S,O,U){this._reactName=g,this._targetInst=S,this.type=b,this.nativeEvent=O,this.target=U,this.currentTarget=null;for(var J in l)l.hasOwnProperty(J)&&(g=l[J],this[J]=g?g(O):O[J]);return this.isDefaultPrevented=(O.defaultPrevented!=null?O.defaultPrevented:O.returnValue===!1)?R0:i4,this.isPropagationStopped=i4,this}return f(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=R0)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=R0)},persist:function(){},isPersistent:R0}),d}var Jc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},k0=Xr(Jc),Mm=f({},Jc,{view:0,detail:0}),kJ=Xr(Mm),nE,rE,Im,M0=f({},Mm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:iE,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Im&&(Im&&l.type==="mousemove"?(nE=l.screenX-Im.screenX,rE=l.screenY-Im.screenY):rE=nE=0,Im=l),nE)},movementY:function(l){return"movementY"in l?l.movementY:rE}}),o4=Xr(M0),MJ=f({},M0,{dataTransfer:0}),IJ=Xr(MJ),PJ=f({},Mm,{relatedTarget:0}),sE=Xr(PJ),DJ=f({},Jc,{animationName:0,elapsedTime:0,pseudoElement:0}),LJ=Xr(DJ),FJ=f({},Jc,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),BJ=Xr(FJ),zJ=f({},Jc,{data:0}),a4=Xr(zJ),VJ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},UJ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qJ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function HJ(l){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(l):(l=qJ[l])?!!d[l]:!1}function iE(){return HJ}var WJ=f({},Mm,{key:function(l){if(l.key){var d=VJ[l.key]||l.key;if(d!=="Unidentified")return d}return l.type==="keypress"?(l=$0(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?UJ[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:iE,charCode:function(l){return l.type==="keypress"?$0(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?$0(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),GJ=Xr(WJ),YJ=f({},M0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),l4=Xr(YJ),JJ=f({},Mm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:iE}),XJ=Xr(JJ),KJ=f({},Jc,{propertyName:0,elapsedTime:0,pseudoElement:0}),QJ=Xr(KJ),ZJ=f({},M0,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),eX=Xr(ZJ),tX=f({},Jc,{newState:0,oldState:0}),nX=Xr(tX),rX=[9,13,27,32],oE=Wo&&"CompositionEvent"in window,Pm=null;Wo&&"documentMode"in document&&(Pm=document.documentMode);var sX=Wo&&"TextEvent"in window&&!Pm,c4=Wo&&(!oE||Pm&&8<Pm&&11>=Pm),u4=" ",d4=!1;function f4(l,d){switch(l){case"keyup":return rX.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function h4(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var zd=!1;function iX(l,d){switch(l){case"compositionend":return h4(d);case"keypress":return d.which!==32?null:(d4=!0,u4);case"textInput":return l=d.data,l===u4&&d4?null:l;default:return null}}function oX(l,d){if(zd)return l==="compositionend"||!oE&&f4(l,d)?(l=s4(),T0=tE=fl=null,zd=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return c4&&d.locale!=="ko"?null:d.data;default:return null}}var aX={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function m4(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d==="input"?!!aX[l.type]:d==="textarea"}function p4(l,d,g,b){Fd?Bd?Bd.push(b):Bd=[b]:Fd=b,d=xb(d,"onChange"),0<d.length&&(g=new k0("onChange","change",null,g,b),l.push({event:g,listeners:d}))}var Dm=null,Lm=null;function lX(l){JR(l,0)}function I0(l){var d=br(l);if(j0(d))return l}function g4(l,d){if(l==="change")return d}var y4=!1;if(Wo){var aE;if(Wo){var lE="oninput"in document;if(!lE){var b4=document.createElement("div");b4.setAttribute("oninput","return;"),lE=typeof b4.oninput=="function"}aE=lE}else aE=!1;y4=aE&&(!document.documentMode||9<document.documentMode)}function v4(){Dm&&(Dm.detachEvent("onpropertychange",x4),Lm=Dm=null)}function x4(l){if(l.propertyName==="value"&&I0(Lm)){var d=[];p4(d,Lm,l,QS(l)),r4(lX,d)}}function cX(l,d,g){l==="focusin"?(v4(),Dm=d,Lm=g,Dm.attachEvent("onpropertychange",x4)):l==="focusout"&&v4()}function uX(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return I0(Lm)}function dX(l,d){if(l==="click")return I0(d)}function fX(l,d){if(l==="input"||l==="change")return I0(d)}function hX(l,d){return l===d&&(l!==0||1/l===1/d)||l!==l&&d!==d}var ms=typeof Object.is=="function"?Object.is:hX;function Fm(l,d){if(ms(l,d))return!0;if(typeof l!="object"||l===null||typeof d!="object"||d===null)return!1;var g=Object.keys(l),b=Object.keys(d);if(g.length!==b.length)return!1;for(b=0;b<g.length;b++){var S=g[b];if(!Ee.call(d,S)||!ms(l[S],d[S]))return!1}return!0}function w4(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function S4(l,d){var g=w4(l);l=0;for(var b;g;){if(g.nodeType===3){if(b=l+g.textContent.length,l<=d&&b>=d)return{node:g,offset:d-l};l=b}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=w4(g)}}function E4(l,d){return l&&d?l===d?!0:l&&l.nodeType===3?!1:d&&d.nodeType===3?E4(l,d.parentNode):"contains"in l?l.contains(d):l.compareDocumentPosition?!!(l.compareDocumentPosition(d)&16):!1:!1}function N4(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var d=dl(l.document);d instanceof l.HTMLIFrameElement;){try{var g=typeof d.contentWindow.location.href=="string"}catch{g=!1}if(g)l=d.contentWindow;else break;d=dl(l.document)}return d}function cE(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d&&(d==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||d==="textarea"||l.contentEditable==="true")}var mX=Wo&&"documentMode"in document&&11>=document.documentMode,Vd=null,uE=null,Bm=null,dE=!1;function _4(l,d,g){var b=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;dE||Vd==null||Vd!==dl(b)||(b=Vd,"selectionStart"in b&&cE(b)?b={start:b.selectionStart,end:b.selectionEnd}:(b=(b.ownerDocument&&b.ownerDocument.defaultView||window).getSelection(),b={anchorNode:b.anchorNode,anchorOffset:b.anchorOffset,focusNode:b.focusNode,focusOffset:b.focusOffset}),Bm&&Fm(Bm,b)||(Bm=b,b=xb(uE,"onSelect"),0<b.length&&(d=new k0("onSelect","select",null,d,g),l.push({event:d,listeners:b}),d.target=Vd)))}function Xc(l,d){var g={};return g[l.toLowerCase()]=d.toLowerCase(),g["Webkit"+l]="webkit"+d,g["Moz"+l]="moz"+d,g}var Ud={animationend:Xc("Animation","AnimationEnd"),animationiteration:Xc("Animation","AnimationIteration"),animationstart:Xc("Animation","AnimationStart"),transitionrun:Xc("Transition","TransitionRun"),transitionstart:Xc("Transition","TransitionStart"),transitioncancel:Xc("Transition","TransitionCancel"),transitionend:Xc("Transition","TransitionEnd")},fE={},C4={};Wo&&(C4=document.createElement("div").style,"AnimationEvent"in window||(delete Ud.animationend.animation,delete Ud.animationiteration.animation,delete Ud.animationstart.animation),"TransitionEvent"in window||delete Ud.transitionend.transition);function Kc(l){if(fE[l])return fE[l];if(!Ud[l])return l;var d=Ud[l],g;for(g in d)if(d.hasOwnProperty(g)&&g in C4)return fE[l]=d[g];return l}var O4=Kc("animationend"),j4=Kc("animationiteration"),A4=Kc("animationstart"),pX=Kc("transitionrun"),gX=Kc("transitionstart"),yX=Kc("transitioncancel"),T4=Kc("transitionend"),$4=new Map,hE="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");hE.push("scrollEnd");function _i(l,d){$4.set(l,d),Ho(d,[l])}var R4=new WeakMap;function Vs(l,d){if(typeof l=="object"&&l!==null){var g=R4.get(l);return g!==void 0?g:(d={value:l,source:d,stack:C0(d)},R4.set(l,d),d)}return{value:l,source:d,stack:C0(d)}}var Us=[],qd=0,mE=0;function P0(){for(var l=qd,d=mE=qd=0;d<l;){var g=Us[d];Us[d++]=null;var b=Us[d];Us[d++]=null;var S=Us[d];Us[d++]=null;var O=Us[d];if(Us[d++]=null,b!==null&&S!==null){var U=b.pending;U===null?S.next=S:(S.next=U.next,U.next=S),b.pending=S}O!==0&&k4(g,S,O)}}function D0(l,d,g,b){Us[qd++]=l,Us[qd++]=d,Us[qd++]=g,Us[qd++]=b,mE|=b,l.lanes|=b,l=l.alternate,l!==null&&(l.lanes|=b)}function pE(l,d,g,b){return D0(l,d,g,b),L0(l)}function Hd(l,d){return D0(l,null,null,d),L0(l)}function k4(l,d,g){l.lanes|=g;var b=l.alternate;b!==null&&(b.lanes|=g);for(var S=!1,O=l.return;O!==null;)O.childLanes|=g,b=O.alternate,b!==null&&(b.childLanes|=g),O.tag===22&&(l=O.stateNode,l===null||l._visibility&1||(S=!0)),l=O,O=O.return;return l.tag===3?(O=l.stateNode,S&&d!==null&&(S=31-Ge(g),l=O.hiddenUpdates,b=l[S],b===null?l[S]=[d]:b.push(d),d.lane=g|536870912),O):null}function L0(l){if(50<dp)throw dp=0,w2=null,Error(r(185));for(var d=l.return;d!==null;)l=d,d=l.return;return l.tag===3?l.stateNode:null}var Wd={};function bX(l,d,g,b){this.tag=l,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ps(l,d,g,b){return new bX(l,d,g,b)}function gE(l){return l=l.prototype,!(!l||!l.isReactComponent)}function Go(l,d){var g=l.alternate;return g===null?(g=ps(l.tag,d,l.key,l.mode),g.elementType=l.elementType,g.type=l.type,g.stateNode=l.stateNode,g.alternate=l,l.alternate=g):(g.pendingProps=d,g.type=l.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=l.flags&65011712,g.childLanes=l.childLanes,g.lanes=l.lanes,g.child=l.child,g.memoizedProps=l.memoizedProps,g.memoizedState=l.memoizedState,g.updateQueue=l.updateQueue,d=l.dependencies,g.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},g.sibling=l.sibling,g.index=l.index,g.ref=l.ref,g.refCleanup=l.refCleanup,g}function M4(l,d){l.flags&=65011714;var g=l.alternate;return g===null?(l.childLanes=0,l.lanes=d,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=g.childLanes,l.lanes=g.lanes,l.child=g.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=g.memoizedProps,l.memoizedState=g.memoizedState,l.updateQueue=g.updateQueue,l.type=g.type,d=g.dependencies,l.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),l}function F0(l,d,g,b,S,O){var U=0;if(b=l,typeof l=="function")gE(l)&&(U=1);else if(typeof l=="string")U=xK(l,g,se.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case B:return l=ps(31,g,d,S),l.elementType=B,l.lanes=O,l;case v:return Qc(g.children,S,O,d);case x:U=8,S|=24;break;case E:return l=ps(12,g,d,S|2),l.elementType=E,l.lanes=O,l;case A:return l=ps(13,g,d,S),l.elementType=A,l.lanes=O,l;case $:return l=ps(19,g,d,S),l.elementType=$,l.lanes=O,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case N:case C:U=10;break e;case _:U=9;break e;case j:U=11;break e;case k:U=14;break e;case R:U=16,b=null;break e}U=29,g=Error(r(130,l===null?"null":typeof l,"")),b=null}return d=ps(U,g,d,S),d.elementType=l,d.type=b,d.lanes=O,d}function Qc(l,d,g,b){return l=ps(7,l,b,d),l.lanes=g,l}function yE(l,d,g){return l=ps(6,l,null,d),l.lanes=g,l}function bE(l,d,g){return d=ps(4,l.children!==null?l.children:[],l.key,d),d.lanes=g,d.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},d}var Gd=[],Yd=0,B0=null,z0=0,qs=[],Hs=0,Zc=null,Yo=1,Jo="";function eu(l,d){Gd[Yd++]=z0,Gd[Yd++]=B0,B0=l,z0=d}function I4(l,d,g){qs[Hs++]=Yo,qs[Hs++]=Jo,qs[Hs++]=Zc,Zc=l;var b=Yo;l=Jo;var S=32-Ge(b)-1;b&=~(1<<S),g+=1;var O=32-Ge(d)+S;if(30<O){var U=S-S%5;O=(b&(1<<U)-1).toString(32),b>>=U,S-=U,Yo=1<<32-Ge(d)+S|g<<S|b,Jo=O+l}else Yo=1<<O|g<<S|b,Jo=l}function vE(l){l.return!==null&&(eu(l,1),I4(l,1,0))}function xE(l){for(;l===B0;)B0=Gd[--Yd],Gd[Yd]=null,z0=Gd[--Yd],Gd[Yd]=null;for(;l===Zc;)Zc=qs[--Hs],qs[Hs]=null,Jo=qs[--Hs],qs[Hs]=null,Yo=qs[--Hs],qs[Hs]=null}var Ar=null,Nn=null,Ft=!1,tu=null,lo=!1,wE=Error(r(519));function nu(l){var d=Error(r(418,""));throw Um(Vs(d,l)),wE}function P4(l){var d=l.stateNode,g=l.type,b=l.memoizedProps;switch(d[an]=l,d[Ln]=b,g){case"dialog":Ot("cancel",d),Ot("close",d);break;case"iframe":case"object":case"embed":Ot("load",d);break;case"video":case"audio":for(g=0;g<hp.length;g++)Ot(hp[g],d);break;case"source":Ot("error",d);break;case"img":case"image":case"link":Ot("error",d),Ot("load",d);break;case"details":Ot("toggle",d);break;case"input":Ot("invalid",d),K3(d,b.value,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name,!0),Id(d);break;case"select":Ot("invalid",d);break;case"textarea":Ot("invalid",d),Z3(d,b.value,b.defaultValue,b.children),Id(d)}g=b.children,typeof g!="string"&&typeof g!="number"&&typeof g!="bigint"||d.textContent===""+g||b.suppressHydrationWarning===!0||ZR(d.textContent,g)?(b.popover!=null&&(Ot("beforetoggle",d),Ot("toggle",d)),b.onScroll!=null&&Ot("scroll",d),b.onScrollEnd!=null&&Ot("scrollend",d),b.onClick!=null&&(d.onclick=wb),d=!0):d=!1,d||nu(l)}function D4(l){for(Ar=l.return;Ar;)switch(Ar.tag){case 5:case 13:lo=!1;return;case 27:case 3:lo=!0;return;default:Ar=Ar.return}}function zm(l){if(l!==Ar)return!1;if(!Ft)return D4(l),Ft=!0,!1;var d=l.tag,g;if((g=d!==3&&d!==27)&&((g=d===5)&&(g=l.type,g=!(g!=="form"&&g!=="button")||D2(l.type,l.memoizedProps)),g=!g),g&&Nn&&nu(l),D4(l),d===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));e:{for(l=l.nextSibling,d=0;l;){if(l.nodeType===8)if(g=l.data,g==="/$"){if(d===0){Nn=Oi(l.nextSibling);break e}d--}else g!=="$"&&g!=="$!"&&g!=="$?"||d++;l=l.nextSibling}Nn=null}}else d===27?(d=Nn,jl(l.type)?(l=z2,z2=null,Nn=l):Nn=d):Nn=Ar?Oi(l.stateNode.nextSibling):null;return!0}function Vm(){Nn=Ar=null,Ft=!1}function L4(){var l=tu;return l!==null&&(Zr===null?Zr=l:Zr.push.apply(Zr,l),tu=null),l}function Um(l){tu===null?tu=[l]:tu.push(l)}var SE=q(null),ru=null,Xo=null;function hl(l,d,g){Q(SE,d._currentValue),d._currentValue=g}function Ko(l){l._currentValue=SE.current,X(SE)}function EE(l,d,g){for(;l!==null;){var b=l.alternate;if((l.childLanes&d)!==d?(l.childLanes|=d,b!==null&&(b.childLanes|=d)):b!==null&&(b.childLanes&d)!==d&&(b.childLanes|=d),l===g)break;l=l.return}}function NE(l,d,g,b){var S=l.child;for(S!==null&&(S.return=l);S!==null;){var O=S.dependencies;if(O!==null){var U=S.child;O=O.firstContext;e:for(;O!==null;){var J=O;O=S;for(var ee=0;ee<d.length;ee++)if(J.context===d[ee]){O.lanes|=g,J=O.alternate,J!==null&&(J.lanes|=g),EE(O.return,g,l),b||(U=null);break e}O=J.next}}else if(S.tag===18){if(U=S.return,U===null)throw Error(r(341));U.lanes|=g,O=U.alternate,O!==null&&(O.lanes|=g),EE(U,g,l),U=null}else U=S.child;if(U!==null)U.return=S;else for(U=S;U!==null;){if(U===l){U=null;break}if(S=U.sibling,S!==null){S.return=U.return,U=S;break}U=U.return}S=U}}function qm(l,d,g,b){l=null;for(var S=d,O=!1;S!==null;){if(!O){if((S.flags&524288)!==0)O=!0;else if((S.flags&262144)!==0)break}if(S.tag===10){var U=S.alternate;if(U===null)throw Error(r(387));if(U=U.memoizedProps,U!==null){var J=S.type;ms(S.pendingProps.value,U.value)||(l!==null?l.push(J):l=[J])}}else if(S===ce.current){if(U=S.alternate,U===null)throw Error(r(387));U.memoizedState.memoizedState!==S.memoizedState.memoizedState&&(l!==null?l.push(vp):l=[vp])}S=S.return}l!==null&&NE(d,l,g,b),d.flags|=262144}function V0(l){for(l=l.firstContext;l!==null;){if(!ms(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function su(l){ru=l,Xo=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function vr(l){return F4(ru,l)}function U0(l,d){return ru===null&&su(l),F4(l,d)}function F4(l,d){var g=d._currentValue;if(d={context:d,memoizedValue:g,next:null},Xo===null){if(l===null)throw Error(r(308));Xo=d,l.dependencies={lanes:0,firstContext:d},l.flags|=524288}else Xo=Xo.next=d;return g}var vX=typeof AbortController<"u"?AbortController:function(){var l=[],d=this.signal={aborted:!1,addEventListener:function(g,b){l.push(b)}};this.abort=function(){d.aborted=!0,l.forEach(function(g){return g()})}},xX=e.unstable_scheduleCallback,wX=e.unstable_NormalPriority,Wn={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function _E(){return{controller:new vX,data:new Map,refCount:0}}function Hm(l){l.refCount--,l.refCount===0&&xX(wX,function(){l.controller.abort()})}var Wm=null,CE=0,Jd=0,Xd=null;function SX(l,d){if(Wm===null){var g=Wm=[];CE=0,Jd=j2(),Xd={status:"pending",value:void 0,then:function(b){g.push(b)}}}return CE++,d.then(B4,B4),d}function B4(){if(--CE===0&&Wm!==null){Xd!==null&&(Xd.status="fulfilled");var l=Wm;Wm=null,Jd=0,Xd=null;for(var d=0;d<l.length;d++)(0,l[d])()}}function EX(l,d){var g=[],b={status:"pending",value:null,reason:null,then:function(S){g.push(S)}};return l.then(function(){b.status="fulfilled",b.value=d;for(var S=0;S<g.length;S++)(0,g[S])(d)},function(S){for(b.status="rejected",b.reason=S,S=0;S<g.length;S++)(0,g[S])(void 0)}),b}var z4=T.S;T.S=function(l,d){typeof d=="object"&&d!==null&&typeof d.then=="function"&&SX(l,d),z4!==null&&z4(l,d)};var iu=q(null);function OE(){var l=iu.current;return l!==null?l:rn.pooledCache}function q0(l,d){d===null?Q(iu,iu.current):Q(iu,d.pool)}function V4(){var l=OE();return l===null?null:{parent:Wn._currentValue,pool:l}}var Gm=Error(r(460)),U4=Error(r(474)),H0=Error(r(542)),jE={then:function(){}};function q4(l){return l=l.status,l==="fulfilled"||l==="rejected"}function W0(){}function H4(l,d,g){switch(g=l[g],g===void 0?l.push(d):g!==d&&(d.then(W0,W0),d=g),d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,G4(l),l;default:if(typeof d.status=="string")d.then(W0,W0);else{if(l=rn,l!==null&&100<l.shellSuspendCounter)throw Error(r(482));l=d,l.status="pending",l.then(function(b){if(d.status==="pending"){var S=d;S.status="fulfilled",S.value=b}},function(b){if(d.status==="pending"){var S=d;S.status="rejected",S.reason=b}})}switch(d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,G4(l),l}throw Ym=d,Gm}}var Ym=null;function W4(){if(Ym===null)throw Error(r(459));var l=Ym;return Ym=null,l}function G4(l){if(l===Gm||l===H0)throw Error(r(483))}var ml=!1;function AE(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function TE(l,d){l=l.updateQueue,d.updateQueue===l&&(d.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function pl(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function gl(l,d,g){var b=l.updateQueue;if(b===null)return null;if(b=b.shared,(Wt&2)!==0){var S=b.pending;return S===null?d.next=d:(d.next=S.next,S.next=d),b.pending=d,d=L0(l),k4(l,null,g),d}return D0(l,b,d,g),L0(l)}function Jm(l,d,g){if(d=d.updateQueue,d!==null&&(d=d.shared,(g&4194048)!==0)){var b=d.lanes;b&=l.pendingLanes,g|=b,d.lanes=g,Cm(l,g)}}function $E(l,d){var g=l.updateQueue,b=l.alternate;if(b!==null&&(b=b.updateQueue,g===b)){var S=null,O=null;if(g=g.firstBaseUpdate,g!==null){do{var U={lane:g.lane,tag:g.tag,payload:g.payload,callback:null,next:null};O===null?S=O=U:O=O.next=U,g=g.next}while(g!==null);O===null?S=O=d:O=O.next=d}else S=O=d;g={baseState:b.baseState,firstBaseUpdate:S,lastBaseUpdate:O,shared:b.shared,callbacks:b.callbacks},l.updateQueue=g;return}l=g.lastBaseUpdate,l===null?g.firstBaseUpdate=d:l.next=d,g.lastBaseUpdate=d}var RE=!1;function Xm(){if(RE){var l=Xd;if(l!==null)throw l}}function Km(l,d,g,b){RE=!1;var S=l.updateQueue;ml=!1;var O=S.firstBaseUpdate,U=S.lastBaseUpdate,J=S.shared.pending;if(J!==null){S.shared.pending=null;var ee=J,ge=ee.next;ee.next=null,U===null?O=ge:U.next=ge,U=ee;var we=l.alternate;we!==null&&(we=we.updateQueue,J=we.lastBaseUpdate,J!==U&&(J===null?we.firstBaseUpdate=ge:J.next=ge,we.lastBaseUpdate=ee))}if(O!==null){var _e=S.baseState;U=0,we=ge=ee=null,J=O;do{var ye=J.lane&-536870913,be=ye!==J.lane;if(be?(At&ye)===ye:(b&ye)===ye){ye!==0&&ye===Jd&&(RE=!0),we!==null&&(we=we.next={lane:0,tag:J.tag,payload:J.payload,callback:null,next:null});e:{var ft=l,lt=J;ye=d;var Xt=g;switch(lt.tag){case 1:if(ft=lt.payload,typeof ft=="function"){_e=ft.call(Xt,_e,ye);break e}_e=ft;break e;case 3:ft.flags=ft.flags&-65537|128;case 0:if(ft=lt.payload,ye=typeof ft=="function"?ft.call(Xt,_e,ye):ft,ye==null)break e;_e=f({},_e,ye);break e;case 2:ml=!0}}ye=J.callback,ye!==null&&(l.flags|=64,be&&(l.flags|=8192),be=S.callbacks,be===null?S.callbacks=[ye]:be.push(ye))}else be={lane:ye,tag:J.tag,payload:J.payload,callback:J.callback,next:null},we===null?(ge=we=be,ee=_e):we=we.next=be,U|=ye;if(J=J.next,J===null){if(J=S.shared.pending,J===null)break;be=J,J=be.next,be.next=null,S.lastBaseUpdate=be,S.shared.pending=null}}while(!0);we===null&&(ee=_e),S.baseState=ee,S.firstBaseUpdate=ge,S.lastBaseUpdate=we,O===null&&(S.shared.lanes=0),Nl|=U,l.lanes=U,l.memoizedState=_e}}function Y4(l,d){if(typeof l!="function")throw Error(r(191,l));l.call(d)}function J4(l,d){var g=l.callbacks;if(g!==null)for(l.callbacks=null,l=0;l<g.length;l++)Y4(g[l],d)}var Kd=q(null),G0=q(0);function X4(l,d){l=sa,Q(G0,l),Q(Kd,d),sa=l|d.baseLanes}function kE(){Q(G0,sa),Q(Kd,Kd.current)}function ME(){sa=G0.current,X(Kd),X(G0)}var yl=0,Et=null,Yt=null,Bn=null,Y0=!1,Qd=!1,ou=!1,J0=0,Qm=0,Zd=null,NX=0;function $n(){throw Error(r(321))}function IE(l,d){if(d===null)return!1;for(var g=0;g<d.length&&g<l.length;g++)if(!ms(l[g],d[g]))return!1;return!0}function PE(l,d,g,b,S,O){return yl=O,Et=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,T.H=l===null||l.memoizedState===null?k5:M5,ou=!1,O=g(b,S),ou=!1,Qd&&(O=Q4(d,g,b,S)),K4(l),O}function K4(l){T.H=tb;var d=Yt!==null&&Yt.next!==null;if(yl=0,Bn=Yt=Et=null,Y0=!1,Qm=0,Zd=null,d)throw Error(r(300));l===null||tr||(l=l.dependencies,l!==null&&V0(l)&&(tr=!0))}function Q4(l,d,g,b){Et=l;var S=0;do{if(Qd&&(Zd=null),Qm=0,Qd=!1,25<=S)throw Error(r(301));if(S+=1,Bn=Yt=null,l.updateQueue!=null){var O=l.updateQueue;O.lastEffect=null,O.events=null,O.stores=null,O.memoCache!=null&&(O.memoCache.index=0)}T.H=$X,O=d(g,b)}while(Qd);return O}function _X(){var l=T.H,d=l.useState()[0];return d=typeof d.then=="function"?Zm(d):d,l=l.useState()[0],(Yt!==null?Yt.memoizedState:null)!==l&&(Et.flags|=1024),d}function DE(){var l=J0!==0;return J0=0,l}function LE(l,d,g){d.updateQueue=l.updateQueue,d.flags&=-2053,l.lanes&=~g}function FE(l){if(Y0){for(l=l.memoizedState;l!==null;){var d=l.queue;d!==null&&(d.pending=null),l=l.next}Y0=!1}yl=0,Bn=Yt=Et=null,Qd=!1,Qm=J0=0,Zd=null}function Kr(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bn===null?Et.memoizedState=Bn=l:Bn=Bn.next=l,Bn}function zn(){if(Yt===null){var l=Et.alternate;l=l!==null?l.memoizedState:null}else l=Yt.next;var d=Bn===null?Et.memoizedState:Bn.next;if(d!==null)Bn=d,Yt=l;else{if(l===null)throw Et.alternate===null?Error(r(467)):Error(r(310));Yt=l,l={memoizedState:Yt.memoizedState,baseState:Yt.baseState,baseQueue:Yt.baseQueue,queue:Yt.queue,next:null},Bn===null?Et.memoizedState=Bn=l:Bn=Bn.next=l}return Bn}function BE(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Zm(l){var d=Qm;return Qm+=1,Zd===null&&(Zd=[]),l=H4(Zd,l,d),d=Et,(Bn===null?d.memoizedState:Bn.next)===null&&(d=d.alternate,T.H=d===null||d.memoizedState===null?k5:M5),l}function X0(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return Zm(l);if(l.$$typeof===C)return vr(l)}throw Error(r(438,String(l)))}function zE(l){var d=null,g=Et.updateQueue;if(g!==null&&(d=g.memoCache),d==null){var b=Et.alternate;b!==null&&(b=b.updateQueue,b!==null&&(b=b.memoCache,b!=null&&(d={data:b.data.map(function(S){return S.slice()}),index:0})))}if(d==null&&(d={data:[],index:0}),g===null&&(g=BE(),Et.updateQueue=g),g.memoCache=d,g=d.data[d.index],g===void 0)for(g=d.data[d.index]=Array(l),b=0;b<l;b++)g[b]=z;return d.index++,g}function Qo(l,d){return typeof d=="function"?d(l):d}function K0(l){var d=zn();return VE(d,Yt,l)}function VE(l,d,g){var b=l.queue;if(b===null)throw Error(r(311));b.lastRenderedReducer=g;var S=l.baseQueue,O=b.pending;if(O!==null){if(S!==null){var U=S.next;S.next=O.next,O.next=U}d.baseQueue=S=O,b.pending=null}if(O=l.baseState,S===null)l.memoizedState=O;else{d=S.next;var J=U=null,ee=null,ge=d,we=!1;do{var _e=ge.lane&-536870913;if(_e!==ge.lane?(At&_e)===_e:(yl&_e)===_e){var ye=ge.revertLane;if(ye===0)ee!==null&&(ee=ee.next={lane:0,revertLane:0,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null}),_e===Jd&&(we=!0);else if((yl&ye)===ye){ge=ge.next,ye===Jd&&(we=!0);continue}else _e={lane:0,revertLane:ge.revertLane,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null},ee===null?(J=ee=_e,U=O):ee=ee.next=_e,Et.lanes|=ye,Nl|=ye;_e=ge.action,ou&&g(O,_e),O=ge.hasEagerState?ge.eagerState:g(O,_e)}else ye={lane:_e,revertLane:ge.revertLane,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null},ee===null?(J=ee=ye,U=O):ee=ee.next=ye,Et.lanes|=_e,Nl|=_e;ge=ge.next}while(ge!==null&&ge!==d);if(ee===null?U=O:ee.next=J,!ms(O,l.memoizedState)&&(tr=!0,we&&(g=Xd,g!==null)))throw g;l.memoizedState=O,l.baseState=U,l.baseQueue=ee,b.lastRenderedState=O}return S===null&&(b.lanes=0),[l.memoizedState,b.dispatch]}function UE(l){var d=zn(),g=d.queue;if(g===null)throw Error(r(311));g.lastRenderedReducer=l;var b=g.dispatch,S=g.pending,O=d.memoizedState;if(S!==null){g.pending=null;var U=S=S.next;do O=l(O,U.action),U=U.next;while(U!==S);ms(O,d.memoizedState)||(tr=!0),d.memoizedState=O,d.baseQueue===null&&(d.baseState=O),g.lastRenderedState=O}return[O,b]}function Z4(l,d,g){var b=Et,S=zn(),O=Ft;if(O){if(g===void 0)throw Error(r(407));g=g()}else g=d();var U=!ms((Yt||S).memoizedState,g);U&&(S.memoizedState=g,tr=!0),S=S.queue;var J=n5.bind(null,b,S,l);if(ep(2048,8,J,[l]),S.getSnapshot!==d||U||Bn!==null&&Bn.memoizedState.tag&1){if(b.flags|=2048,ef(9,Q0(),t5.bind(null,b,S,g,d),null),rn===null)throw Error(r(349));O||(yl&124)!==0||e5(b,d,g)}return g}function e5(l,d,g){l.flags|=16384,l={getSnapshot:d,value:g},d=Et.updateQueue,d===null?(d=BE(),Et.updateQueue=d,d.stores=[l]):(g=d.stores,g===null?d.stores=[l]:g.push(l))}function t5(l,d,g,b){d.value=g,d.getSnapshot=b,r5(d)&&s5(l)}function n5(l,d,g){return g(function(){r5(d)&&s5(l)})}function r5(l){var d=l.getSnapshot;l=l.value;try{var g=d();return!ms(l,g)}catch{return!0}}function s5(l){var d=Hd(l,2);d!==null&&xs(d,l,2)}function qE(l){var d=Kr();if(typeof l=="function"){var g=l;if(l=g(),ou){Ne(!0);try{g()}finally{Ne(!1)}}}return d.memoizedState=d.baseState=l,d.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qo,lastRenderedState:l},d}function i5(l,d,g,b){return l.baseState=g,VE(l,Yt,typeof b=="function"?b:Qo)}function CX(l,d,g,b,S){if(eb(l))throw Error(r(485));if(l=d.action,l!==null){var O={payload:S,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(U){O.listeners.push(U)}};T.T!==null?g(!0):O.isTransition=!1,b(O),g=d.pending,g===null?(O.next=d.pending=O,o5(d,O)):(O.next=g.next,d.pending=g.next=O)}}function o5(l,d){var g=d.action,b=d.payload,S=l.state;if(d.isTransition){var O=T.T,U={};T.T=U;try{var J=g(S,b),ee=T.S;ee!==null&&ee(U,J),a5(l,d,J)}catch(ge){HE(l,d,ge)}finally{T.T=O}}else try{O=g(S,b),a5(l,d,O)}catch(ge){HE(l,d,ge)}}function a5(l,d,g){g!==null&&typeof g=="object"&&typeof g.then=="function"?g.then(function(b){l5(l,d,b)},function(b){return HE(l,d,b)}):l5(l,d,g)}function l5(l,d,g){d.status="fulfilled",d.value=g,c5(d),l.state=g,d=l.pending,d!==null&&(g=d.next,g===d?l.pending=null:(g=g.next,d.next=g,o5(l,g)))}function HE(l,d,g){var b=l.pending;if(l.pending=null,b!==null){b=b.next;do d.status="rejected",d.reason=g,c5(d),d=d.next;while(d!==b)}l.action=null}function c5(l){l=l.listeners;for(var d=0;d<l.length;d++)(0,l[d])()}function u5(l,d){return d}function d5(l,d){if(Ft){var g=rn.formState;if(g!==null){e:{var b=Et;if(Ft){if(Nn){t:{for(var S=Nn,O=lo;S.nodeType!==8;){if(!O){S=null;break t}if(S=Oi(S.nextSibling),S===null){S=null;break t}}O=S.data,S=O==="F!"||O==="F"?S:null}if(S){Nn=Oi(S.nextSibling),b=S.data==="F!";break e}}nu(b)}b=!1}b&&(d=g[0])}}return g=Kr(),g.memoizedState=g.baseState=d,b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:u5,lastRenderedState:d},g.queue=b,g=T5.bind(null,Et,b),b.dispatch=g,b=qE(!1),O=XE.bind(null,Et,!1,b.queue),b=Kr(),S={state:d,dispatch:null,action:l,pending:null},b.queue=S,g=CX.bind(null,Et,S,O,g),S.dispatch=g,b.memoizedState=l,[d,g,!1]}function f5(l){var d=zn();return h5(d,Yt,l)}function h5(l,d,g){if(d=VE(l,d,u5)[0],l=K0(Qo)[0],typeof d=="object"&&d!==null&&typeof d.then=="function")try{var b=Zm(d)}catch(U){throw U===Gm?H0:U}else b=d;d=zn();var S=d.queue,O=S.dispatch;return g!==d.memoizedState&&(Et.flags|=2048,ef(9,Q0(),OX.bind(null,S,g),null)),[b,O,l]}function OX(l,d){l.action=d}function m5(l){var d=zn(),g=Yt;if(g!==null)return h5(d,g,l);zn(),d=d.memoizedState,g=zn();var b=g.queue.dispatch;return g.memoizedState=l,[d,b,!1]}function ef(l,d,g,b){return l={tag:l,create:g,deps:b,inst:d,next:null},d=Et.updateQueue,d===null&&(d=BE(),Et.updateQueue=d),g=d.lastEffect,g===null?d.lastEffect=l.next=l:(b=g.next,g.next=l,l.next=b,d.lastEffect=l),l}function Q0(){return{destroy:void 0,resource:void 0}}function p5(){return zn().memoizedState}function Z0(l,d,g,b){var S=Kr();b=b===void 0?null:b,Et.flags|=l,S.memoizedState=ef(1|d,Q0(),g,b)}function ep(l,d,g,b){var S=zn();b=b===void 0?null:b;var O=S.memoizedState.inst;Yt!==null&&b!==null&&IE(b,Yt.memoizedState.deps)?S.memoizedState=ef(d,O,g,b):(Et.flags|=l,S.memoizedState=ef(1|d,O,g,b))}function g5(l,d){Z0(8390656,8,l,d)}function y5(l,d){ep(2048,8,l,d)}function b5(l,d){return ep(4,2,l,d)}function v5(l,d){return ep(4,4,l,d)}function x5(l,d){if(typeof d=="function"){l=l();var g=d(l);return function(){typeof g=="function"?g():d(null)}}if(d!=null)return l=l(),d.current=l,function(){d.current=null}}function w5(l,d,g){g=g!=null?g.concat([l]):null,ep(4,4,x5.bind(null,d,l),g)}function WE(){}function S5(l,d){var g=zn();d=d===void 0?null:d;var b=g.memoizedState;return d!==null&&IE(d,b[1])?b[0]:(g.memoizedState=[l,d],l)}function E5(l,d){var g=zn();d=d===void 0?null:d;var b=g.memoizedState;if(d!==null&&IE(d,b[1]))return b[0];if(b=l(),ou){Ne(!0);try{l()}finally{Ne(!1)}}return g.memoizedState=[b,d],b}function GE(l,d,g){return g===void 0||(yl&1073741824)!==0?l.memoizedState=d:(l.memoizedState=g,l=CR(),Et.lanes|=l,Nl|=l,g)}function N5(l,d,g,b){return ms(g,d)?g:Kd.current!==null?(l=GE(l,g,b),ms(l,d)||(tr=!0),l):(yl&42)===0?(tr=!0,l.memoizedState=g):(l=CR(),Et.lanes|=l,Nl|=l,d)}function _5(l,d,g,b,S){var O=I.p;I.p=O!==0&&8>O?O:8;var U=T.T,J={};T.T=J,XE(l,!1,d,g);try{var ee=S(),ge=T.S;if(ge!==null&&ge(J,ee),ee!==null&&typeof ee=="object"&&typeof ee.then=="function"){var we=EX(ee,b);tp(l,d,we,vs(l))}else tp(l,d,b,vs(l))}catch(_e){tp(l,d,{then:function(){},status:"rejected",reason:_e},vs())}finally{I.p=O,T.T=U}}function jX(){}function YE(l,d,g,b){if(l.tag!==5)throw Error(r(476));var S=C5(l).queue;_5(l,S,d,P,g===null?jX:function(){return O5(l),g(b)})}function C5(l){var d=l.memoizedState;if(d!==null)return d;d={memoizedState:P,baseState:P,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qo,lastRenderedState:P},next:null};var g={};return d.next={memoizedState:g,baseState:g,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qo,lastRenderedState:g},next:null},l.memoizedState=d,l=l.alternate,l!==null&&(l.memoizedState=d),d}function O5(l){var d=C5(l).next.queue;tp(l,d,{},vs())}function JE(){return vr(vp)}function j5(){return zn().memoizedState}function A5(){return zn().memoizedState}function AX(l){for(var d=l.return;d!==null;){switch(d.tag){case 24:case 3:var g=vs();l=pl(g);var b=gl(d,l,g);b!==null&&(xs(b,d,g),Jm(b,d,g)),d={cache:_E()},l.payload=d;return}d=d.return}}function TX(l,d,g){var b=vs();g={lane:b,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null},eb(l)?$5(d,g):(g=pE(l,d,g,b),g!==null&&(xs(g,l,b),R5(g,d,b)))}function T5(l,d,g){var b=vs();tp(l,d,g,b)}function tp(l,d,g,b){var S={lane:b,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null};if(eb(l))$5(d,S);else{var O=l.alternate;if(l.lanes===0&&(O===null||O.lanes===0)&&(O=d.lastRenderedReducer,O!==null))try{var U=d.lastRenderedState,J=O(U,g);if(S.hasEagerState=!0,S.eagerState=J,ms(J,U))return D0(l,d,S,0),rn===null&&P0(),!1}catch{}finally{}if(g=pE(l,d,S,b),g!==null)return xs(g,l,b),R5(g,d,b),!0}return!1}function XE(l,d,g,b){if(b={lane:2,revertLane:j2(),action:b,hasEagerState:!1,eagerState:null,next:null},eb(l)){if(d)throw Error(r(479))}else d=pE(l,g,b,2),d!==null&&xs(d,l,2)}function eb(l){var d=l.alternate;return l===Et||d!==null&&d===Et}function $5(l,d){Qd=Y0=!0;var g=l.pending;g===null?d.next=d:(d.next=g.next,g.next=d),l.pending=d}function R5(l,d,g){if((g&4194048)!==0){var b=d.lanes;b&=l.pendingLanes,g|=b,d.lanes=g,Cm(l,g)}}var tb={readContext:vr,use:X0,useCallback:$n,useContext:$n,useEffect:$n,useImperativeHandle:$n,useLayoutEffect:$n,useInsertionEffect:$n,useMemo:$n,useReducer:$n,useRef:$n,useState:$n,useDebugValue:$n,useDeferredValue:$n,useTransition:$n,useSyncExternalStore:$n,useId:$n,useHostTransitionStatus:$n,useFormState:$n,useActionState:$n,useOptimistic:$n,useMemoCache:$n,useCacheRefresh:$n},k5={readContext:vr,use:X0,useCallback:function(l,d){return Kr().memoizedState=[l,d===void 0?null:d],l},useContext:vr,useEffect:g5,useImperativeHandle:function(l,d,g){g=g!=null?g.concat([l]):null,Z0(4194308,4,x5.bind(null,d,l),g)},useLayoutEffect:function(l,d){return Z0(4194308,4,l,d)},useInsertionEffect:function(l,d){Z0(4,2,l,d)},useMemo:function(l,d){var g=Kr();d=d===void 0?null:d;var b=l();if(ou){Ne(!0);try{l()}finally{Ne(!1)}}return g.memoizedState=[b,d],b},useReducer:function(l,d,g){var b=Kr();if(g!==void 0){var S=g(d);if(ou){Ne(!0);try{g(d)}finally{Ne(!1)}}}else S=d;return b.memoizedState=b.baseState=S,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:S},b.queue=l,l=l.dispatch=TX.bind(null,Et,l),[b.memoizedState,l]},useRef:function(l){var d=Kr();return l={current:l},d.memoizedState=l},useState:function(l){l=qE(l);var d=l.queue,g=T5.bind(null,Et,d);return d.dispatch=g,[l.memoizedState,g]},useDebugValue:WE,useDeferredValue:function(l,d){var g=Kr();return GE(g,l,d)},useTransition:function(){var l=qE(!1);return l=_5.bind(null,Et,l.queue,!0,!1),Kr().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,d,g){var b=Et,S=Kr();if(Ft){if(g===void 0)throw Error(r(407));g=g()}else{if(g=d(),rn===null)throw Error(r(349));(At&124)!==0||e5(b,d,g)}S.memoizedState=g;var O={value:g,getSnapshot:d};return S.queue=O,g5(n5.bind(null,b,O,l),[l]),b.flags|=2048,ef(9,Q0(),t5.bind(null,b,O,g,d),null),g},useId:function(){var l=Kr(),d=rn.identifierPrefix;if(Ft){var g=Jo,b=Yo;g=(b&~(1<<32-Ge(b)-1)).toString(32)+g,d=""+d+"R"+g,g=J0++,0<g&&(d+="H"+g.toString(32)),d+=""}else g=NX++,d=""+d+"r"+g.toString(32)+"";return l.memoizedState=d},useHostTransitionStatus:JE,useFormState:d5,useActionState:d5,useOptimistic:function(l){var d=Kr();d.memoizedState=d.baseState=l;var g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return d.queue=g,d=XE.bind(null,Et,!0,g),g.dispatch=d,[l,d]},useMemoCache:zE,useCacheRefresh:function(){return Kr().memoizedState=AX.bind(null,Et)}},M5={readContext:vr,use:X0,useCallback:S5,useContext:vr,useEffect:y5,useImperativeHandle:w5,useInsertionEffect:b5,useLayoutEffect:v5,useMemo:E5,useReducer:K0,useRef:p5,useState:function(){return K0(Qo)},useDebugValue:WE,useDeferredValue:function(l,d){var g=zn();return N5(g,Yt.memoizedState,l,d)},useTransition:function(){var l=K0(Qo)[0],d=zn().memoizedState;return[typeof l=="boolean"?l:Zm(l),d]},useSyncExternalStore:Z4,useId:j5,useHostTransitionStatus:JE,useFormState:f5,useActionState:f5,useOptimistic:function(l,d){var g=zn();return i5(g,Yt,l,d)},useMemoCache:zE,useCacheRefresh:A5},$X={readContext:vr,use:X0,useCallback:S5,useContext:vr,useEffect:y5,useImperativeHandle:w5,useInsertionEffect:b5,useLayoutEffect:v5,useMemo:E5,useReducer:UE,useRef:p5,useState:function(){return UE(Qo)},useDebugValue:WE,useDeferredValue:function(l,d){var g=zn();return Yt===null?GE(g,l,d):N5(g,Yt.memoizedState,l,d)},useTransition:function(){var l=UE(Qo)[0],d=zn().memoizedState;return[typeof l=="boolean"?l:Zm(l),d]},useSyncExternalStore:Z4,useId:j5,useHostTransitionStatus:JE,useFormState:m5,useActionState:m5,useOptimistic:function(l,d){var g=zn();return Yt!==null?i5(g,Yt,l,d):(g.baseState=l,[l,g.queue.dispatch])},useMemoCache:zE,useCacheRefresh:A5},tf=null,np=0;function nb(l){var d=np;return np+=1,tf===null&&(tf=[]),H4(tf,l,d)}function rp(l,d){d=d.props.ref,l.ref=d!==void 0?d:null}function rb(l,d){throw d.$$typeof===h?Error(r(525)):(l=Object.prototype.toString.call(d),Error(r(31,l==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":l)))}function I5(l){var d=l._init;return d(l._payload)}function P5(l){function d(ue,oe){if(l){var me=ue.deletions;me===null?(ue.deletions=[oe],ue.flags|=16):me.push(oe)}}function g(ue,oe){if(!l)return null;for(;oe!==null;)d(ue,oe),oe=oe.sibling;return null}function b(ue){for(var oe=new Map;ue!==null;)ue.key!==null?oe.set(ue.key,ue):oe.set(ue.index,ue),ue=ue.sibling;return oe}function S(ue,oe){return ue=Go(ue,oe),ue.index=0,ue.sibling=null,ue}function O(ue,oe,me){return ue.index=me,l?(me=ue.alternate,me!==null?(me=me.index,me<oe?(ue.flags|=67108866,oe):me):(ue.flags|=67108866,oe)):(ue.flags|=1048576,oe)}function U(ue){return l&&ue.alternate===null&&(ue.flags|=67108866),ue}function J(ue,oe,me,Se){return oe===null||oe.tag!==6?(oe=yE(me,ue.mode,Se),oe.return=ue,oe):(oe=S(oe,me),oe.return=ue,oe)}function ee(ue,oe,me,Se){var Je=me.type;return Je===v?we(ue,oe,me.props.children,Se,me.key):oe!==null&&(oe.elementType===Je||typeof Je=="object"&&Je!==null&&Je.$$typeof===R&&I5(Je)===oe.type)?(oe=S(oe,me.props),rp(oe,me),oe.return=ue,oe):(oe=F0(me.type,me.key,me.props,null,ue.mode,Se),rp(oe,me),oe.return=ue,oe)}function ge(ue,oe,me,Se){return oe===null||oe.tag!==4||oe.stateNode.containerInfo!==me.containerInfo||oe.stateNode.implementation!==me.implementation?(oe=bE(me,ue.mode,Se),oe.return=ue,oe):(oe=S(oe,me.children||[]),oe.return=ue,oe)}function we(ue,oe,me,Se,Je){return oe===null||oe.tag!==7?(oe=Qc(me,ue.mode,Se,Je),oe.return=ue,oe):(oe=S(oe,me),oe.return=ue,oe)}function _e(ue,oe,me){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return oe=yE(""+oe,ue.mode,me),oe.return=ue,oe;if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case p:return me=F0(oe.type,oe.key,oe.props,null,ue.mode,me),rp(me,oe),me.return=ue,me;case y:return oe=bE(oe,ue.mode,me),oe.return=ue,oe;case R:var Se=oe._init;return oe=Se(oe._payload),_e(ue,oe,me)}if(V(oe)||L(oe))return oe=Qc(oe,ue.mode,me,null),oe.return=ue,oe;if(typeof oe.then=="function")return _e(ue,nb(oe),me);if(oe.$$typeof===C)return _e(ue,U0(ue,oe),me);rb(ue,oe)}return null}function ye(ue,oe,me,Se){var Je=oe!==null?oe.key:null;if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return Je!==null?null:J(ue,oe,""+me,Se);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case p:return me.key===Je?ee(ue,oe,me,Se):null;case y:return me.key===Je?ge(ue,oe,me,Se):null;case R:return Je=me._init,me=Je(me._payload),ye(ue,oe,me,Se)}if(V(me)||L(me))return Je!==null?null:we(ue,oe,me,Se,null);if(typeof me.then=="function")return ye(ue,oe,nb(me),Se);if(me.$$typeof===C)return ye(ue,oe,U0(ue,me),Se);rb(ue,me)}return null}function be(ue,oe,me,Se,Je){if(typeof Se=="string"&&Se!==""||typeof Se=="number"||typeof Se=="bigint")return ue=ue.get(me)||null,J(oe,ue,""+Se,Je);if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case p:return ue=ue.get(Se.key===null?me:Se.key)||null,ee(oe,ue,Se,Je);case y:return ue=ue.get(Se.key===null?me:Se.key)||null,ge(oe,ue,Se,Je);case R:var _t=Se._init;return Se=_t(Se._payload),be(ue,oe,me,Se,Je)}if(V(Se)||L(Se))return ue=ue.get(me)||null,we(oe,ue,Se,Je,null);if(typeof Se.then=="function")return be(ue,oe,me,nb(Se),Je);if(Se.$$typeof===C)return be(ue,oe,me,U0(oe,Se),Je);rb(oe,Se)}return null}function ft(ue,oe,me,Se){for(var Je=null,_t=null,nt=oe,ct=oe=0,rr=null;nt!==null&&ct<me.length;ct++){nt.index>ct?(rr=nt,nt=null):rr=nt.sibling;var Pt=ye(ue,nt,me[ct],Se);if(Pt===null){nt===null&&(nt=rr);break}l&&nt&&Pt.alternate===null&&d(ue,nt),oe=O(Pt,oe,ct),_t===null?Je=Pt:_t.sibling=Pt,_t=Pt,nt=rr}if(ct===me.length)return g(ue,nt),Ft&&eu(ue,ct),Je;if(nt===null){for(;ct<me.length;ct++)nt=_e(ue,me[ct],Se),nt!==null&&(oe=O(nt,oe,ct),_t===null?Je=nt:_t.sibling=nt,_t=nt);return Ft&&eu(ue,ct),Je}for(nt=b(nt);ct<me.length;ct++)rr=be(nt,ue,ct,me[ct],Se),rr!==null&&(l&&rr.alternate!==null&&nt.delete(rr.key===null?ct:rr.key),oe=O(rr,oe,ct),_t===null?Je=rr:_t.sibling=rr,_t=rr);return l&&nt.forEach(function(kl){return d(ue,kl)}),Ft&&eu(ue,ct),Je}function lt(ue,oe,me,Se){if(me==null)throw Error(r(151));for(var Je=null,_t=null,nt=oe,ct=oe=0,rr=null,Pt=me.next();nt!==null&&!Pt.done;ct++,Pt=me.next()){nt.index>ct?(rr=nt,nt=null):rr=nt.sibling;var kl=ye(ue,nt,Pt.value,Se);if(kl===null){nt===null&&(nt=rr);break}l&&nt&&kl.alternate===null&&d(ue,nt),oe=O(kl,oe,ct),_t===null?Je=kl:_t.sibling=kl,_t=kl,nt=rr}if(Pt.done)return g(ue,nt),Ft&&eu(ue,ct),Je;if(nt===null){for(;!Pt.done;ct++,Pt=me.next())Pt=_e(ue,Pt.value,Se),Pt!==null&&(oe=O(Pt,oe,ct),_t===null?Je=Pt:_t.sibling=Pt,_t=Pt);return Ft&&eu(ue,ct),Je}for(nt=b(nt);!Pt.done;ct++,Pt=me.next())Pt=be(nt,ue,ct,Pt.value,Se),Pt!==null&&(l&&Pt.alternate!==null&&nt.delete(Pt.key===null?ct:Pt.key),oe=O(Pt,oe,ct),_t===null?Je=Pt:_t.sibling=Pt,_t=Pt);return l&&nt.forEach(function(RK){return d(ue,RK)}),Ft&&eu(ue,ct),Je}function Xt(ue,oe,me,Se){if(typeof me=="object"&&me!==null&&me.type===v&&me.key===null&&(me=me.props.children),typeof me=="object"&&me!==null){switch(me.$$typeof){case p:e:{for(var Je=me.key;oe!==null;){if(oe.key===Je){if(Je=me.type,Je===v){if(oe.tag===7){g(ue,oe.sibling),Se=S(oe,me.props.children),Se.return=ue,ue=Se;break e}}else if(oe.elementType===Je||typeof Je=="object"&&Je!==null&&Je.$$typeof===R&&I5(Je)===oe.type){g(ue,oe.sibling),Se=S(oe,me.props),rp(Se,me),Se.return=ue,ue=Se;break e}g(ue,oe);break}else d(ue,oe);oe=oe.sibling}me.type===v?(Se=Qc(me.props.children,ue.mode,Se,me.key),Se.return=ue,ue=Se):(Se=F0(me.type,me.key,me.props,null,ue.mode,Se),rp(Se,me),Se.return=ue,ue=Se)}return U(ue);case y:e:{for(Je=me.key;oe!==null;){if(oe.key===Je)if(oe.tag===4&&oe.stateNode.containerInfo===me.containerInfo&&oe.stateNode.implementation===me.implementation){g(ue,oe.sibling),Se=S(oe,me.children||[]),Se.return=ue,ue=Se;break e}else{g(ue,oe);break}else d(ue,oe);oe=oe.sibling}Se=bE(me,ue.mode,Se),Se.return=ue,ue=Se}return U(ue);case R:return Je=me._init,me=Je(me._payload),Xt(ue,oe,me,Se)}if(V(me))return ft(ue,oe,me,Se);if(L(me)){if(Je=L(me),typeof Je!="function")throw Error(r(150));return me=Je.call(me),lt(ue,oe,me,Se)}if(typeof me.then=="function")return Xt(ue,oe,nb(me),Se);if(me.$$typeof===C)return Xt(ue,oe,U0(ue,me),Se);rb(ue,me)}return typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint"?(me=""+me,oe!==null&&oe.tag===6?(g(ue,oe.sibling),Se=S(oe,me),Se.return=ue,ue=Se):(g(ue,oe),Se=yE(me,ue.mode,Se),Se.return=ue,ue=Se),U(ue)):g(ue,oe)}return function(ue,oe,me,Se){try{np=0;var Je=Xt(ue,oe,me,Se);return tf=null,Je}catch(nt){if(nt===Gm||nt===H0)throw nt;var _t=ps(29,nt,null,ue.mode);return _t.lanes=Se,_t.return=ue,_t}finally{}}}var nf=P5(!0),D5=P5(!1),Ws=q(null),co=null;function bl(l){var d=l.alternate;Q(Gn,Gn.current&1),Q(Ws,l),co===null&&(d===null||Kd.current!==null||d.memoizedState!==null)&&(co=l)}function L5(l){if(l.tag===22){if(Q(Gn,Gn.current),Q(Ws,l),co===null){var d=l.alternate;d!==null&&d.memoizedState!==null&&(co=l)}}else vl()}function vl(){Q(Gn,Gn.current),Q(Ws,Ws.current)}function Zo(l){X(Ws),co===l&&(co=null),X(Gn)}var Gn=q(0);function sb(l){for(var d=l;d!==null;){if(d.tag===13){var g=d.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||B2(g)))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}function KE(l,d,g,b){d=l.memoizedState,g=g(b,d),g=g==null?d:f({},d,g),l.memoizedState=g,l.lanes===0&&(l.updateQueue.baseState=g)}var QE={enqueueSetState:function(l,d,g){l=l._reactInternals;var b=vs(),S=pl(b);S.payload=d,g!=null&&(S.callback=g),d=gl(l,S,b),d!==null&&(xs(d,l,b),Jm(d,l,b))},enqueueReplaceState:function(l,d,g){l=l._reactInternals;var b=vs(),S=pl(b);S.tag=1,S.payload=d,g!=null&&(S.callback=g),d=gl(l,S,b),d!==null&&(xs(d,l,b),Jm(d,l,b))},enqueueForceUpdate:function(l,d){l=l._reactInternals;var g=vs(),b=pl(g);b.tag=2,d!=null&&(b.callback=d),d=gl(l,b,g),d!==null&&(xs(d,l,g),Jm(d,l,g))}};function F5(l,d,g,b,S,O,U){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(b,O,U):d.prototype&&d.prototype.isPureReactComponent?!Fm(g,b)||!Fm(S,O):!0}function B5(l,d,g,b){l=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(g,b),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(g,b),d.state!==l&&QE.enqueueReplaceState(d,d.state,null)}function au(l,d){var g=d;if("ref"in d){g={};for(var b in d)b!=="ref"&&(g[b]=d[b])}if(l=l.defaultProps){g===d&&(g=f({},g));for(var S in l)g[S]===void 0&&(g[S]=l[S])}return g}var ib=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var d=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(d))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)};function z5(l){ib(l)}function V5(l){console.error(l)}function U5(l){ib(l)}function ob(l,d){try{var g=l.onUncaughtError;g(d.value,{componentStack:d.stack})}catch(b){setTimeout(function(){throw b})}}function q5(l,d,g){try{var b=l.onCaughtError;b(g.value,{componentStack:g.stack,errorBoundary:d.tag===1?d.stateNode:null})}catch(S){setTimeout(function(){throw S})}}function ZE(l,d,g){return g=pl(g),g.tag=3,g.payload={element:null},g.callback=function(){ob(l,d)},g}function H5(l){return l=pl(l),l.tag=3,l}function W5(l,d,g,b){var S=g.type.getDerivedStateFromError;if(typeof S=="function"){var O=b.value;l.payload=function(){return S(O)},l.callback=function(){q5(d,g,b)}}var U=g.stateNode;U!==null&&typeof U.componentDidCatch=="function"&&(l.callback=function(){q5(d,g,b),typeof S!="function"&&(_l===null?_l=new Set([this]):_l.add(this));var J=b.stack;this.componentDidCatch(b.value,{componentStack:J!==null?J:""})})}function RX(l,d,g,b,S){if(g.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){if(d=g.alternate,d!==null&&qm(d,g,S,!0),g=Ws.current,g!==null){switch(g.tag){case 13:return co===null?E2():g.alternate===null&&_n===0&&(_n=3),g.flags&=-257,g.flags|=65536,g.lanes=S,b===jE?g.flags|=16384:(d=g.updateQueue,d===null?g.updateQueue=new Set([b]):d.add(b),_2(l,b,S)),!1;case 22:return g.flags|=65536,b===jE?g.flags|=16384:(d=g.updateQueue,d===null?(d={transitions:null,markerInstances:null,retryQueue:new Set([b])},g.updateQueue=d):(g=d.retryQueue,g===null?d.retryQueue=new Set([b]):g.add(b)),_2(l,b,S)),!1}throw Error(r(435,g.tag))}return _2(l,b,S),E2(),!1}if(Ft)return d=Ws.current,d!==null?((d.flags&65536)===0&&(d.flags|=256),d.flags|=65536,d.lanes=S,b!==wE&&(l=Error(r(422),{cause:b}),Um(Vs(l,g)))):(b!==wE&&(d=Error(r(423),{cause:b}),Um(Vs(d,g))),l=l.current.alternate,l.flags|=65536,S&=-S,l.lanes|=S,b=Vs(b,g),S=ZE(l.stateNode,b,S),$E(l,S),_n!==4&&(_n=2)),!1;var O=Error(r(520),{cause:b});if(O=Vs(O,g),up===null?up=[O]:up.push(O),_n!==4&&(_n=2),d===null)return!0;b=Vs(b,g),g=d;do{switch(g.tag){case 3:return g.flags|=65536,l=S&-S,g.lanes|=l,l=ZE(g.stateNode,b,l),$E(g,l),!1;case 1:if(d=g.type,O=g.stateNode,(g.flags&128)===0&&(typeof d.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(_l===null||!_l.has(O))))return g.flags|=65536,S&=-S,g.lanes|=S,S=H5(S),W5(S,l,g,b),$E(g,S),!1}g=g.return}while(g!==null);return!1}var G5=Error(r(461)),tr=!1;function dr(l,d,g,b){d.child=l===null?D5(d,null,g,b):nf(d,l.child,g,b)}function Y5(l,d,g,b,S){g=g.render;var O=d.ref;if("ref"in b){var U={};for(var J in b)J!=="ref"&&(U[J]=b[J])}else U=b;return su(d),b=PE(l,d,g,U,O,S),J=DE(),l!==null&&!tr?(LE(l,d,S),ea(l,d,S)):(Ft&&J&&vE(d),d.flags|=1,dr(l,d,b,S),d.child)}function J5(l,d,g,b,S){if(l===null){var O=g.type;return typeof O=="function"&&!gE(O)&&O.defaultProps===void 0&&g.compare===null?(d.tag=15,d.type=O,X5(l,d,O,b,S)):(l=F0(g.type,null,b,d,d.mode,S),l.ref=d.ref,l.return=d,d.child=l)}if(O=l.child,!a2(l,S)){var U=O.memoizedProps;if(g=g.compare,g=g!==null?g:Fm,g(U,b)&&l.ref===d.ref)return ea(l,d,S)}return d.flags|=1,l=Go(O,b),l.ref=d.ref,l.return=d,d.child=l}function X5(l,d,g,b,S){if(l!==null){var O=l.memoizedProps;if(Fm(O,b)&&l.ref===d.ref)if(tr=!1,d.pendingProps=b=O,a2(l,S))(l.flags&131072)!==0&&(tr=!0);else return d.lanes=l.lanes,ea(l,d,S)}return e2(l,d,g,b,S)}function K5(l,d,g){var b=d.pendingProps,S=b.children,O=l!==null?l.memoizedState:null;if(b.mode==="hidden"){if((d.flags&128)!==0){if(b=O!==null?O.baseLanes|g:g,l!==null){for(S=d.child=l.child,O=0;S!==null;)O=O|S.lanes|S.childLanes,S=S.sibling;d.childLanes=O&~b}else d.childLanes=0,d.child=null;return Q5(l,d,b,g)}if((g&536870912)!==0)d.memoizedState={baseLanes:0,cachePool:null},l!==null&&q0(d,O!==null?O.cachePool:null),O!==null?X4(d,O):kE(),L5(d);else return d.lanes=d.childLanes=536870912,Q5(l,d,O!==null?O.baseLanes|g:g,g)}else O!==null?(q0(d,O.cachePool),X4(d,O),vl(),d.memoizedState=null):(l!==null&&q0(d,null),kE(),vl());return dr(l,d,S,g),d.child}function Q5(l,d,g,b){var S=OE();return S=S===null?null:{parent:Wn._currentValue,pool:S},d.memoizedState={baseLanes:g,cachePool:S},l!==null&&q0(d,null),kE(),L5(d),l!==null&&qm(l,d,b,!0),null}function ab(l,d){var g=d.ref;if(g===null)l!==null&&l.ref!==null&&(d.flags|=4194816);else{if(typeof g!="function"&&typeof g!="object")throw Error(r(284));(l===null||l.ref!==g)&&(d.flags|=4194816)}}function e2(l,d,g,b,S){return su(d),g=PE(l,d,g,b,void 0,S),b=DE(),l!==null&&!tr?(LE(l,d,S),ea(l,d,S)):(Ft&&b&&vE(d),d.flags|=1,dr(l,d,g,S),d.child)}function Z5(l,d,g,b,S,O){return su(d),d.updateQueue=null,g=Q4(d,b,g,S),K4(l),b=DE(),l!==null&&!tr?(LE(l,d,O),ea(l,d,O)):(Ft&&b&&vE(d),d.flags|=1,dr(l,d,g,O),d.child)}function eR(l,d,g,b,S){if(su(d),d.stateNode===null){var O=Wd,U=g.contextType;typeof U=="object"&&U!==null&&(O=vr(U)),O=new g(b,O),d.memoizedState=O.state!==null&&O.state!==void 0?O.state:null,O.updater=QE,d.stateNode=O,O._reactInternals=d,O=d.stateNode,O.props=b,O.state=d.memoizedState,O.refs={},AE(d),U=g.contextType,O.context=typeof U=="object"&&U!==null?vr(U):Wd,O.state=d.memoizedState,U=g.getDerivedStateFromProps,typeof U=="function"&&(KE(d,g,U,b),O.state=d.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof O.getSnapshotBeforeUpdate=="function"||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(U=O.state,typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount(),U!==O.state&&QE.enqueueReplaceState(O,O.state,null),Km(d,b,O,S),Xm(),O.state=d.memoizedState),typeof O.componentDidMount=="function"&&(d.flags|=4194308),b=!0}else if(l===null){O=d.stateNode;var J=d.memoizedProps,ee=au(g,J);O.props=ee;var ge=O.context,we=g.contextType;U=Wd,typeof we=="object"&&we!==null&&(U=vr(we));var _e=g.getDerivedStateFromProps;we=typeof _e=="function"||typeof O.getSnapshotBeforeUpdate=="function",J=d.pendingProps!==J,we||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(J||ge!==U)&&B5(d,O,b,U),ml=!1;var ye=d.memoizedState;O.state=ye,Km(d,b,O,S),Xm(),ge=d.memoizedState,J||ye!==ge||ml?(typeof _e=="function"&&(KE(d,g,_e,b),ge=d.memoizedState),(ee=ml||F5(d,g,ee,b,ye,ge,U))?(we||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(d.flags|=4194308)):(typeof O.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=b,d.memoizedState=ge),O.props=b,O.state=ge,O.context=U,b=ee):(typeof O.componentDidMount=="function"&&(d.flags|=4194308),b=!1)}else{O=d.stateNode,TE(l,d),U=d.memoizedProps,we=au(g,U),O.props=we,_e=d.pendingProps,ye=O.context,ge=g.contextType,ee=Wd,typeof ge=="object"&&ge!==null&&(ee=vr(ge)),J=g.getDerivedStateFromProps,(ge=typeof J=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(U!==_e||ye!==ee)&&B5(d,O,b,ee),ml=!1,ye=d.memoizedState,O.state=ye,Km(d,b,O,S),Xm();var be=d.memoizedState;U!==_e||ye!==be||ml||l!==null&&l.dependencies!==null&&V0(l.dependencies)?(typeof J=="function"&&(KE(d,g,J,b),be=d.memoizedState),(we=ml||F5(d,g,we,b,ye,be,ee)||l!==null&&l.dependencies!==null&&V0(l.dependencies))?(ge||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(b,be,ee),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(b,be,ee)),typeof O.componentDidUpdate=="function"&&(d.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof O.componentDidUpdate!="function"||U===l.memoizedProps&&ye===l.memoizedState||(d.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||U===l.memoizedProps&&ye===l.memoizedState||(d.flags|=1024),d.memoizedProps=b,d.memoizedState=be),O.props=b,O.state=be,O.context=ee,b=we):(typeof O.componentDidUpdate!="function"||U===l.memoizedProps&&ye===l.memoizedState||(d.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||U===l.memoizedProps&&ye===l.memoizedState||(d.flags|=1024),b=!1)}return O=b,ab(l,d),b=(d.flags&128)!==0,O||b?(O=d.stateNode,g=b&&typeof g.getDerivedStateFromError!="function"?null:O.render(),d.flags|=1,l!==null&&b?(d.child=nf(d,l.child,null,S),d.child=nf(d,null,g,S)):dr(l,d,g,S),d.memoizedState=O.state,l=d.child):l=ea(l,d,S),l}function tR(l,d,g,b){return Vm(),d.flags|=256,dr(l,d,g,b),d.child}var t2={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function n2(l){return{baseLanes:l,cachePool:V4()}}function r2(l,d,g){return l=l!==null?l.childLanes&~g:0,d&&(l|=Gs),l}function nR(l,d,g){var b=d.pendingProps,S=!1,O=(d.flags&128)!==0,U;if((U=O)||(U=l!==null&&l.memoizedState===null?!1:(Gn.current&2)!==0),U&&(S=!0,d.flags&=-129),U=(d.flags&32)!==0,d.flags&=-33,l===null){if(Ft){if(S?bl(d):vl(),Ft){var J=Nn,ee;if(ee=J){e:{for(ee=J,J=lo;ee.nodeType!==8;){if(!J){J=null;break e}if(ee=Oi(ee.nextSibling),ee===null){J=null;break e}}J=ee}J!==null?(d.memoizedState={dehydrated:J,treeContext:Zc!==null?{id:Yo,overflow:Jo}:null,retryLane:536870912,hydrationErrors:null},ee=ps(18,null,null,0),ee.stateNode=J,ee.return=d,d.child=ee,Ar=d,Nn=null,ee=!0):ee=!1}ee||nu(d)}if(J=d.memoizedState,J!==null&&(J=J.dehydrated,J!==null))return B2(J)?d.lanes=32:d.lanes=536870912,null;Zo(d)}return J=b.children,b=b.fallback,S?(vl(),S=d.mode,J=lb({mode:"hidden",children:J},S),b=Qc(b,S,g,null),J.return=d,b.return=d,J.sibling=b,d.child=J,S=d.child,S.memoizedState=n2(g),S.childLanes=r2(l,U,g),d.memoizedState=t2,b):(bl(d),s2(d,J))}if(ee=l.memoizedState,ee!==null&&(J=ee.dehydrated,J!==null)){if(O)d.flags&256?(bl(d),d.flags&=-257,d=i2(l,d,g)):d.memoizedState!==null?(vl(),d.child=l.child,d.flags|=128,d=null):(vl(),S=b.fallback,J=d.mode,b=lb({mode:"visible",children:b.children},J),S=Qc(S,J,g,null),S.flags|=2,b.return=d,S.return=d,b.sibling=S,d.child=b,nf(d,l.child,null,g),b=d.child,b.memoizedState=n2(g),b.childLanes=r2(l,U,g),d.memoizedState=t2,d=S);else if(bl(d),B2(J)){if(U=J.nextSibling&&J.nextSibling.dataset,U)var ge=U.dgst;U=ge,b=Error(r(419)),b.stack="",b.digest=U,Um({value:b,source:null,stack:null}),d=i2(l,d,g)}else if(tr||qm(l,d,g,!1),U=(g&l.childLanes)!==0,tr||U){if(U=rn,U!==null&&(b=g&-g,b=(b&42)!==0?1:Wc(b),b=(b&(U.suspendedLanes|g))!==0?0:b,b!==0&&b!==ee.retryLane))throw ee.retryLane=b,Hd(l,b),xs(U,l,b),G5;J.data==="$?"||E2(),d=i2(l,d,g)}else J.data==="$?"?(d.flags|=192,d.child=l.child,d=null):(l=ee.treeContext,Nn=Oi(J.nextSibling),Ar=d,Ft=!0,tu=null,lo=!1,l!==null&&(qs[Hs++]=Yo,qs[Hs++]=Jo,qs[Hs++]=Zc,Yo=l.id,Jo=l.overflow,Zc=d),d=s2(d,b.children),d.flags|=4096);return d}return S?(vl(),S=b.fallback,J=d.mode,ee=l.child,ge=ee.sibling,b=Go(ee,{mode:"hidden",children:b.children}),b.subtreeFlags=ee.subtreeFlags&65011712,ge!==null?S=Go(ge,S):(S=Qc(S,J,g,null),S.flags|=2),S.return=d,b.return=d,b.sibling=S,d.child=b,b=S,S=d.child,J=l.child.memoizedState,J===null?J=n2(g):(ee=J.cachePool,ee!==null?(ge=Wn._currentValue,ee=ee.parent!==ge?{parent:ge,pool:ge}:ee):ee=V4(),J={baseLanes:J.baseLanes|g,cachePool:ee}),S.memoizedState=J,S.childLanes=r2(l,U,g),d.memoizedState=t2,b):(bl(d),g=l.child,l=g.sibling,g=Go(g,{mode:"visible",children:b.children}),g.return=d,g.sibling=null,l!==null&&(U=d.deletions,U===null?(d.deletions=[l],d.flags|=16):U.push(l)),d.child=g,d.memoizedState=null,g)}function s2(l,d){return d=lb({mode:"visible",children:d},l.mode),d.return=l,l.child=d}function lb(l,d){return l=ps(22,l,null,d),l.lanes=0,l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},l}function i2(l,d,g){return nf(d,l.child,null,g),l=s2(d,d.pendingProps.children),l.flags|=2,d.memoizedState=null,l}function rR(l,d,g){l.lanes|=d;var b=l.alternate;b!==null&&(b.lanes|=d),EE(l.return,d,g)}function o2(l,d,g,b,S){var O=l.memoizedState;O===null?l.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:b,tail:g,tailMode:S}:(O.isBackwards=d,O.rendering=null,O.renderingStartTime=0,O.last=b,O.tail=g,O.tailMode=S)}function sR(l,d,g){var b=d.pendingProps,S=b.revealOrder,O=b.tail;if(dr(l,d,b.children,g),b=Gn.current,(b&2)!==0)b=b&1|2,d.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=d.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&rR(l,g,d);else if(l.tag===19)rR(l,g,d);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===d)break e;for(;l.sibling===null;){if(l.return===null||l.return===d)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}b&=1}switch(Q(Gn,b),S){case"forwards":for(g=d.child,S=null;g!==null;)l=g.alternate,l!==null&&sb(l)===null&&(S=g),g=g.sibling;g=S,g===null?(S=d.child,d.child=null):(S=g.sibling,g.sibling=null),o2(d,!1,S,g,O);break;case"backwards":for(g=null,S=d.child,d.child=null;S!==null;){if(l=S.alternate,l!==null&&sb(l)===null){d.child=S;break}l=S.sibling,S.sibling=g,g=S,S=l}o2(d,!0,g,null,O);break;case"together":o2(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function ea(l,d,g){if(l!==null&&(d.dependencies=l.dependencies),Nl|=d.lanes,(g&d.childLanes)===0)if(l!==null){if(qm(l,d,g,!1),(g&d.childLanes)===0)return null}else return null;if(l!==null&&d.child!==l.child)throw Error(r(153));if(d.child!==null){for(l=d.child,g=Go(l,l.pendingProps),d.child=g,g.return=d;l.sibling!==null;)l=l.sibling,g=g.sibling=Go(l,l.pendingProps),g.return=d;g.sibling=null}return d.child}function a2(l,d){return(l.lanes&d)!==0?!0:(l=l.dependencies,!!(l!==null&&V0(l)))}function kX(l,d,g){switch(d.tag){case 3:fe(d,d.stateNode.containerInfo),hl(d,Wn,l.memoizedState.cache),Vm();break;case 27:case 5:Ae(d);break;case 4:fe(d,d.stateNode.containerInfo);break;case 10:hl(d,d.type,d.memoizedProps.value);break;case 13:var b=d.memoizedState;if(b!==null)return b.dehydrated!==null?(bl(d),d.flags|=128,null):(g&d.child.childLanes)!==0?nR(l,d,g):(bl(d),l=ea(l,d,g),l!==null?l.sibling:null);bl(d);break;case 19:var S=(l.flags&128)!==0;if(b=(g&d.childLanes)!==0,b||(qm(l,d,g,!1),b=(g&d.childLanes)!==0),S){if(b)return sR(l,d,g);d.flags|=128}if(S=d.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),Q(Gn,Gn.current),b)break;return null;case 22:case 23:return d.lanes=0,K5(l,d,g);case 24:hl(d,Wn,l.memoizedState.cache)}return ea(l,d,g)}function iR(l,d,g){if(l!==null)if(l.memoizedProps!==d.pendingProps)tr=!0;else{if(!a2(l,g)&&(d.flags&128)===0)return tr=!1,kX(l,d,g);tr=(l.flags&131072)!==0}else tr=!1,Ft&&(d.flags&1048576)!==0&&I4(d,z0,d.index);switch(d.lanes=0,d.tag){case 16:e:{l=d.pendingProps;var b=d.elementType,S=b._init;if(b=S(b._payload),d.type=b,typeof b=="function")gE(b)?(l=au(b,l),d.tag=1,d=eR(null,d,b,l,g)):(d.tag=0,d=e2(null,d,b,l,g));else{if(b!=null){if(S=b.$$typeof,S===j){d.tag=11,d=Y5(null,d,b,l,g);break e}else if(S===k){d.tag=14,d=J5(null,d,b,l,g);break e}}throw d=M(b)||b,Error(r(306,d,""))}}return d;case 0:return e2(l,d,d.type,d.pendingProps,g);case 1:return b=d.type,S=au(b,d.pendingProps),eR(l,d,b,S,g);case 3:e:{if(fe(d,d.stateNode.containerInfo),l===null)throw Error(r(387));b=d.pendingProps;var O=d.memoizedState;S=O.element,TE(l,d),Km(d,b,null,g);var U=d.memoizedState;if(b=U.cache,hl(d,Wn,b),b!==O.cache&&NE(d,[Wn],g,!0),Xm(),b=U.element,O.isDehydrated)if(O={element:b,isDehydrated:!1,cache:U.cache},d.updateQueue.baseState=O,d.memoizedState=O,d.flags&256){d=tR(l,d,b,g);break e}else if(b!==S){S=Vs(Error(r(424)),d),Um(S),d=tR(l,d,b,g);break e}else{switch(l=d.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(Nn=Oi(l.firstChild),Ar=d,Ft=!0,tu=null,lo=!0,g=D5(d,null,b,g),d.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling}else{if(Vm(),b===S){d=ea(l,d,g);break e}dr(l,d,b,g)}d=d.child}return d;case 26:return ab(l,d),l===null?(g=ck(d.type,null,d.pendingProps,null))?d.memoizedState=g:Ft||(g=d.type,l=d.pendingProps,b=Sb(de.current).createElement(g),b[an]=d,b[Ln]=l,hr(b,g,l),Fn(b),d.stateNode=b):d.memoizedState=ck(d.type,l.memoizedProps,d.pendingProps,l.memoizedState),null;case 27:return Ae(d),l===null&&Ft&&(b=d.stateNode=ok(d.type,d.pendingProps,de.current),Ar=d,lo=!0,S=Nn,jl(d.type)?(z2=S,Nn=Oi(b.firstChild)):Nn=S),dr(l,d,d.pendingProps.children,g),ab(l,d),l===null&&(d.flags|=4194304),d.child;case 5:return l===null&&Ft&&((S=b=Nn)&&(b=aK(b,d.type,d.pendingProps,lo),b!==null?(d.stateNode=b,Ar=d,Nn=Oi(b.firstChild),lo=!1,S=!0):S=!1),S||nu(d)),Ae(d),S=d.type,O=d.pendingProps,U=l!==null?l.memoizedProps:null,b=O.children,D2(S,O)?b=null:U!==null&&D2(S,U)&&(d.flags|=32),d.memoizedState!==null&&(S=PE(l,d,_X,null,null,g),vp._currentValue=S),ab(l,d),dr(l,d,b,g),d.child;case 6:return l===null&&Ft&&((l=g=Nn)&&(g=lK(g,d.pendingProps,lo),g!==null?(d.stateNode=g,Ar=d,Nn=null,l=!0):l=!1),l||nu(d)),null;case 13:return nR(l,d,g);case 4:return fe(d,d.stateNode.containerInfo),b=d.pendingProps,l===null?d.child=nf(d,null,b,g):dr(l,d,b,g),d.child;case 11:return Y5(l,d,d.type,d.pendingProps,g);case 7:return dr(l,d,d.pendingProps,g),d.child;case 8:return dr(l,d,d.pendingProps.children,g),d.child;case 12:return dr(l,d,d.pendingProps.children,g),d.child;case 10:return b=d.pendingProps,hl(d,d.type,b.value),dr(l,d,b.children,g),d.child;case 9:return S=d.type._context,b=d.pendingProps.children,su(d),S=vr(S),b=b(S),d.flags|=1,dr(l,d,b,g),d.child;case 14:return J5(l,d,d.type,d.pendingProps,g);case 15:return X5(l,d,d.type,d.pendingProps,g);case 19:return sR(l,d,g);case 31:return b=d.pendingProps,g=d.mode,b={mode:b.mode,children:b.children},l===null?(g=lb(b,g),g.ref=d.ref,d.child=g,g.return=d,d=g):(g=Go(l.child,b),g.ref=d.ref,d.child=g,g.return=d,d=g),d;case 22:return K5(l,d,g);case 24:return su(d),b=vr(Wn),l===null?(S=OE(),S===null&&(S=rn,O=_E(),S.pooledCache=O,O.refCount++,O!==null&&(S.pooledCacheLanes|=g),S=O),d.memoizedState={parent:b,cache:S},AE(d),hl(d,Wn,S)):((l.lanes&g)!==0&&(TE(l,d),Km(d,null,null,g),Xm()),S=l.memoizedState,O=d.memoizedState,S.parent!==b?(S={parent:b,cache:b},d.memoizedState=S,d.lanes===0&&(d.memoizedState=d.updateQueue.baseState=S),hl(d,Wn,b)):(b=O.cache,hl(d,Wn,b),b!==S.cache&&NE(d,[Wn],g,!0))),dr(l,d,d.pendingProps.children,g),d.child;case 29:throw d.pendingProps}throw Error(r(156,d.tag))}function ta(l){l.flags|=4}function oR(l,d){if(d.type!=="stylesheet"||(d.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!mk(d)){if(d=Ws.current,d!==null&&((At&4194048)===At?co!==null:(At&62914560)!==At&&(At&536870912)===0||d!==co))throw Ym=jE,U4;l.flags|=8192}}function cb(l,d){d!==null&&(l.flags|=4),l.flags&16384&&(d=l.tag!==22?Ad():536870912,l.lanes|=d,af|=d)}function sp(l,d){if(!Ft)switch(l.tailMode){case"hidden":d=l.tail;for(var g=null;d!==null;)d.alternate!==null&&(g=d),d=d.sibling;g===null?l.tail=null:g.sibling=null;break;case"collapsed":g=l.tail;for(var b=null;g!==null;)g.alternate!==null&&(b=g),g=g.sibling;b===null?d||l.tail===null?l.tail=null:l.tail.sibling=null:b.sibling=null}}function vn(l){var d=l.alternate!==null&&l.alternate.child===l.child,g=0,b=0;if(d)for(var S=l.child;S!==null;)g|=S.lanes|S.childLanes,b|=S.subtreeFlags&65011712,b|=S.flags&65011712,S.return=l,S=S.sibling;else for(S=l.child;S!==null;)g|=S.lanes|S.childLanes,b|=S.subtreeFlags,b|=S.flags,S.return=l,S=S.sibling;return l.subtreeFlags|=b,l.childLanes=g,d}function MX(l,d,g){var b=d.pendingProps;switch(xE(d),d.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vn(d),null;case 1:return vn(d),null;case 3:return g=d.stateNode,b=null,l!==null&&(b=l.memoizedState.cache),d.memoizedState.cache!==b&&(d.flags|=2048),Ko(Wn),ve(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(l===null||l.child===null)&&(zm(d)?ta(d):l===null||l.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,L4())),vn(d),null;case 26:return g=d.memoizedState,l===null?(ta(d),g!==null?(vn(d),oR(d,g)):(vn(d),d.flags&=-16777217)):g?g!==l.memoizedState?(ta(d),vn(d),oR(d,g)):(vn(d),d.flags&=-16777217):(l.memoizedProps!==b&&ta(d),vn(d),d.flags&=-16777217),null;case 27:Ce(d),g=de.current;var S=d.type;if(l!==null&&d.stateNode!=null)l.memoizedProps!==b&&ta(d);else{if(!b){if(d.stateNode===null)throw Error(r(166));return vn(d),null}l=se.current,zm(d)?P4(d):(l=ok(S,b,g),d.stateNode=l,ta(d))}return vn(d),null;case 5:if(Ce(d),g=d.type,l!==null&&d.stateNode!=null)l.memoizedProps!==b&&ta(d);else{if(!b){if(d.stateNode===null)throw Error(r(166));return vn(d),null}if(l=se.current,zm(d))P4(d);else{switch(S=Sb(de.current),l){case 1:l=S.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:l=S.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":l=S.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":l=S.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":l=S.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild);break;case"select":l=typeof b.is=="string"?S.createElement("select",{is:b.is}):S.createElement("select"),b.multiple?l.multiple=!0:b.size&&(l.size=b.size);break;default:l=typeof b.is=="string"?S.createElement(g,{is:b.is}):S.createElement(g)}}l[an]=d,l[Ln]=b;e:for(S=d.child;S!==null;){if(S.tag===5||S.tag===6)l.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===d)break e;for(;S.sibling===null;){if(S.return===null||S.return===d)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}d.stateNode=l;e:switch(hr(l,g,b),g){case"button":case"input":case"select":case"textarea":l=!!b.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&ta(d)}}return vn(d),d.flags&=-16777217,null;case 6:if(l&&d.stateNode!=null)l.memoizedProps!==b&&ta(d);else{if(typeof b!="string"&&d.stateNode===null)throw Error(r(166));if(l=de.current,zm(d)){if(l=d.stateNode,g=d.memoizedProps,b=null,S=Ar,S!==null)switch(S.tag){case 27:case 5:b=S.memoizedProps}l[an]=d,l=!!(l.nodeValue===g||b!==null&&b.suppressHydrationWarning===!0||ZR(l.nodeValue,g)),l||nu(d)}else l=Sb(l).createTextNode(b),l[an]=d,d.stateNode=l}return vn(d),null;case 13:if(b=d.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(S=zm(d),b!==null&&b.dehydrated!==null){if(l===null){if(!S)throw Error(r(318));if(S=d.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(r(317));S[an]=d}else Vm(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;vn(d),S=!1}else S=L4(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=S),S=!0;if(!S)return d.flags&256?(Zo(d),d):(Zo(d),null)}if(Zo(d),(d.flags&128)!==0)return d.lanes=g,d;if(g=b!==null,l=l!==null&&l.memoizedState!==null,g){b=d.child,S=null,b.alternate!==null&&b.alternate.memoizedState!==null&&b.alternate.memoizedState.cachePool!==null&&(S=b.alternate.memoizedState.cachePool.pool);var O=null;b.memoizedState!==null&&b.memoizedState.cachePool!==null&&(O=b.memoizedState.cachePool.pool),O!==S&&(b.flags|=2048)}return g!==l&&g&&(d.child.flags|=8192),cb(d,d.updateQueue),vn(d),null;case 4:return ve(),l===null&&R2(d.stateNode.containerInfo),vn(d),null;case 10:return Ko(d.type),vn(d),null;case 19:if(X(Gn),S=d.memoizedState,S===null)return vn(d),null;if(b=(d.flags&128)!==0,O=S.rendering,O===null)if(b)sp(S,!1);else{if(_n!==0||l!==null&&(l.flags&128)!==0)for(l=d.child;l!==null;){if(O=sb(l),O!==null){for(d.flags|=128,sp(S,!1),l=O.updateQueue,d.updateQueue=l,cb(d,l),d.subtreeFlags=0,l=g,g=d.child;g!==null;)M4(g,l),g=g.sibling;return Q(Gn,Gn.current&1|2),d.child}l=l.sibling}S.tail!==null&&Oe()>fb&&(d.flags|=128,b=!0,sp(S,!1),d.lanes=4194304)}else{if(!b)if(l=sb(O),l!==null){if(d.flags|=128,b=!0,l=l.updateQueue,d.updateQueue=l,cb(d,l),sp(S,!0),S.tail===null&&S.tailMode==="hidden"&&!O.alternate&&!Ft)return vn(d),null}else 2*Oe()-S.renderingStartTime>fb&&g!==536870912&&(d.flags|=128,b=!0,sp(S,!1),d.lanes=4194304);S.isBackwards?(O.sibling=d.child,d.child=O):(l=S.last,l!==null?l.sibling=O:d.child=O,S.last=O)}return S.tail!==null?(d=S.tail,S.rendering=d,S.tail=d.sibling,S.renderingStartTime=Oe(),d.sibling=null,l=Gn.current,Q(Gn,b?l&1|2:l&1),d):(vn(d),null);case 22:case 23:return Zo(d),ME(),b=d.memoizedState!==null,l!==null?l.memoizedState!==null!==b&&(d.flags|=8192):b&&(d.flags|=8192),b?(g&536870912)!==0&&(d.flags&128)===0&&(vn(d),d.subtreeFlags&6&&(d.flags|=8192)):vn(d),g=d.updateQueue,g!==null&&cb(d,g.retryQueue),g=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),b=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(b=d.memoizedState.cachePool.pool),b!==g&&(d.flags|=2048),l!==null&&X(iu),null;case 24:return g=null,l!==null&&(g=l.memoizedState.cache),d.memoizedState.cache!==g&&(d.flags|=2048),Ko(Wn),vn(d),null;case 25:return null;case 30:return null}throw Error(r(156,d.tag))}function IX(l,d){switch(xE(d),d.tag){case 1:return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 3:return Ko(Wn),ve(),l=d.flags,(l&65536)!==0&&(l&128)===0?(d.flags=l&-65537|128,d):null;case 26:case 27:case 5:return Ce(d),null;case 13:if(Zo(d),l=d.memoizedState,l!==null&&l.dehydrated!==null){if(d.alternate===null)throw Error(r(340));Vm()}return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 19:return X(Gn),null;case 4:return ve(),null;case 10:return Ko(d.type),null;case 22:case 23:return Zo(d),ME(),l!==null&&X(iu),l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 24:return Ko(Wn),null;case 25:return null;default:return null}}function aR(l,d){switch(xE(d),d.tag){case 3:Ko(Wn),ve();break;case 26:case 27:case 5:Ce(d);break;case 4:ve();break;case 13:Zo(d);break;case 19:X(Gn);break;case 10:Ko(d.type);break;case 22:case 23:Zo(d),ME(),l!==null&&X(iu);break;case 24:Ko(Wn)}}function ip(l,d){try{var g=d.updateQueue,b=g!==null?g.lastEffect:null;if(b!==null){var S=b.next;g=S;do{if((g.tag&l)===l){b=void 0;var O=g.create,U=g.inst;b=O(),U.destroy=b}g=g.next}while(g!==S)}}catch(J){Zt(d,d.return,J)}}function xl(l,d,g){try{var b=d.updateQueue,S=b!==null?b.lastEffect:null;if(S!==null){var O=S.next;b=O;do{if((b.tag&l)===l){var U=b.inst,J=U.destroy;if(J!==void 0){U.destroy=void 0,S=d;var ee=g,ge=J;try{ge()}catch(we){Zt(S,ee,we)}}}b=b.next}while(b!==O)}}catch(we){Zt(d,d.return,we)}}function lR(l){var d=l.updateQueue;if(d!==null){var g=l.stateNode;try{J4(d,g)}catch(b){Zt(l,l.return,b)}}}function cR(l,d,g){g.props=au(l.type,l.memoizedProps),g.state=l.memoizedState;try{g.componentWillUnmount()}catch(b){Zt(l,d,b)}}function op(l,d){try{var g=l.ref;if(g!==null){switch(l.tag){case 26:case 27:case 5:var b=l.stateNode;break;case 30:b=l.stateNode;break;default:b=l.stateNode}typeof g=="function"?l.refCleanup=g(b):g.current=b}}catch(S){Zt(l,d,S)}}function uo(l,d){var g=l.ref,b=l.refCleanup;if(g!==null)if(typeof b=="function")try{b()}catch(S){Zt(l,d,S)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof g=="function")try{g(null)}catch(S){Zt(l,d,S)}else g.current=null}function uR(l){var d=l.type,g=l.memoizedProps,b=l.stateNode;try{e:switch(d){case"button":case"input":case"select":case"textarea":g.autoFocus&&b.focus();break e;case"img":g.src?b.src=g.src:g.srcSet&&(b.srcset=g.srcSet)}}catch(S){Zt(l,l.return,S)}}function l2(l,d,g){try{var b=l.stateNode;nK(b,l.type,g,d),b[Ln]=d}catch(S){Zt(l,l.return,S)}}function dR(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&jl(l.type)||l.tag===4}function c2(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||dR(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&jl(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function u2(l,d,g){var b=l.tag;if(b===5||b===6)l=l.stateNode,d?(g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g).insertBefore(l,d):(d=g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g,d.appendChild(l),g=g._reactRootContainer,g!=null||d.onclick!==null||(d.onclick=wb));else if(b!==4&&(b===27&&jl(l.type)&&(g=l.stateNode,d=null),l=l.child,l!==null))for(u2(l,d,g),l=l.sibling;l!==null;)u2(l,d,g),l=l.sibling}function ub(l,d,g){var b=l.tag;if(b===5||b===6)l=l.stateNode,d?g.insertBefore(l,d):g.appendChild(l);else if(b!==4&&(b===27&&jl(l.type)&&(g=l.stateNode),l=l.child,l!==null))for(ub(l,d,g),l=l.sibling;l!==null;)ub(l,d,g),l=l.sibling}function fR(l){var d=l.stateNode,g=l.memoizedProps;try{for(var b=l.type,S=d.attributes;S.length;)d.removeAttributeNode(S[0]);hr(d,b,g),d[an]=l,d[Ln]=g}catch(O){Zt(l,l.return,O)}}var na=!1,Rn=!1,d2=!1,hR=typeof WeakSet=="function"?WeakSet:Set,nr=null;function PX(l,d){if(l=l.containerInfo,I2=jb,l=N4(l),cE(l)){if("selectionStart"in l)var g={start:l.selectionStart,end:l.selectionEnd};else e:{g=(g=l.ownerDocument)&&g.defaultView||window;var b=g.getSelection&&g.getSelection();if(b&&b.rangeCount!==0){g=b.anchorNode;var S=b.anchorOffset,O=b.focusNode;b=b.focusOffset;try{g.nodeType,O.nodeType}catch{g=null;break e}var U=0,J=-1,ee=-1,ge=0,we=0,_e=l,ye=null;t:for(;;){for(var be;_e!==g||S!==0&&_e.nodeType!==3||(J=U+S),_e!==O||b!==0&&_e.nodeType!==3||(ee=U+b),_e.nodeType===3&&(U+=_e.nodeValue.length),(be=_e.firstChild)!==null;)ye=_e,_e=be;for(;;){if(_e===l)break t;if(ye===g&&++ge===S&&(J=U),ye===O&&++we===b&&(ee=U),(be=_e.nextSibling)!==null)break;_e=ye,ye=_e.parentNode}_e=be}g=J===-1||ee===-1?null:{start:J,end:ee}}else g=null}g=g||{start:0,end:0}}else g=null;for(P2={focusedElem:l,selectionRange:g},jb=!1,nr=d;nr!==null;)if(d=nr,l=d.child,(d.subtreeFlags&1024)!==0&&l!==null)l.return=d,nr=l;else for(;nr!==null;){switch(d=nr,O=d.alternate,l=d.flags,d.tag){case 0:break;case 11:case 15:break;case 1:if((l&1024)!==0&&O!==null){l=void 0,g=d,S=O.memoizedProps,O=O.memoizedState,b=g.stateNode;try{var ft=au(g.type,S,g.elementType===g.type);l=b.getSnapshotBeforeUpdate(ft,O),b.__reactInternalSnapshotBeforeUpdate=l}catch(lt){Zt(g,g.return,lt)}}break;case 3:if((l&1024)!==0){if(l=d.stateNode.containerInfo,g=l.nodeType,g===9)F2(l);else if(g===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":F2(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(r(163))}if(l=d.sibling,l!==null){l.return=d.return,nr=l;break}nr=d.return}}function mR(l,d,g){var b=g.flags;switch(g.tag){case 0:case 11:case 15:wl(l,g),b&4&&ip(5,g);break;case 1:if(wl(l,g),b&4)if(l=g.stateNode,d===null)try{l.componentDidMount()}catch(U){Zt(g,g.return,U)}else{var S=au(g.type,d.memoizedProps);d=d.memoizedState;try{l.componentDidUpdate(S,d,l.__reactInternalSnapshotBeforeUpdate)}catch(U){Zt(g,g.return,U)}}b&64&&lR(g),b&512&&op(g,g.return);break;case 3:if(wl(l,g),b&64&&(l=g.updateQueue,l!==null)){if(d=null,g.child!==null)switch(g.child.tag){case 27:case 5:d=g.child.stateNode;break;case 1:d=g.child.stateNode}try{J4(l,d)}catch(U){Zt(g,g.return,U)}}break;case 27:d===null&&b&4&&fR(g);case 26:case 5:wl(l,g),d===null&&b&4&&uR(g),b&512&&op(g,g.return);break;case 12:wl(l,g);break;case 13:wl(l,g),b&4&&yR(l,g),b&64&&(l=g.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(g=HX.bind(null,g),cK(l,g))));break;case 22:if(b=g.memoizedState!==null||na,!b){d=d!==null&&d.memoizedState!==null||Rn,S=na;var O=Rn;na=b,(Rn=d)&&!O?Sl(l,g,(g.subtreeFlags&8772)!==0):wl(l,g),na=S,Rn=O}break;case 30:break;default:wl(l,g)}}function pR(l){var d=l.alternate;d!==null&&(l.alternate=null,pR(d)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(d=l.stateNode,d!==null&&Yc(d)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var pn=null,Qr=!1;function ra(l,d,g){for(g=g.child;g!==null;)gR(l,d,g),g=g.sibling}function gR(l,d,g){if(xe&&typeof xe.onCommitFiberUnmount=="function")try{xe.onCommitFiberUnmount(le,g)}catch{}switch(g.tag){case 26:Rn||uo(g,d),ra(l,d,g),g.memoizedState?g.memoizedState.count--:g.stateNode&&(g=g.stateNode,g.parentNode.removeChild(g));break;case 27:Rn||uo(g,d);var b=pn,S=Qr;jl(g.type)&&(pn=g.stateNode,Qr=!1),ra(l,d,g),pp(g.stateNode),pn=b,Qr=S;break;case 5:Rn||uo(g,d);case 6:if(b=pn,S=Qr,pn=null,ra(l,d,g),pn=b,Qr=S,pn!==null)if(Qr)try{(pn.nodeType===9?pn.body:pn.nodeName==="HTML"?pn.ownerDocument.body:pn).removeChild(g.stateNode)}catch(O){Zt(g,d,O)}else try{pn.removeChild(g.stateNode)}catch(O){Zt(g,d,O)}break;case 18:pn!==null&&(Qr?(l=pn,sk(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,g.stateNode),Ep(l)):sk(pn,g.stateNode));break;case 4:b=pn,S=Qr,pn=g.stateNode.containerInfo,Qr=!0,ra(l,d,g),pn=b,Qr=S;break;case 0:case 11:case 14:case 15:Rn||xl(2,g,d),Rn||xl(4,g,d),ra(l,d,g);break;case 1:Rn||(uo(g,d),b=g.stateNode,typeof b.componentWillUnmount=="function"&&cR(g,d,b)),ra(l,d,g);break;case 21:ra(l,d,g);break;case 22:Rn=(b=Rn)||g.memoizedState!==null,ra(l,d,g),Rn=b;break;default:ra(l,d,g)}}function yR(l,d){if(d.memoizedState===null&&(l=d.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{Ep(l)}catch(g){Zt(d,d.return,g)}}function DX(l){switch(l.tag){case 13:case 19:var d=l.stateNode;return d===null&&(d=l.stateNode=new hR),d;case 22:return l=l.stateNode,d=l._retryCache,d===null&&(d=l._retryCache=new hR),d;default:throw Error(r(435,l.tag))}}function f2(l,d){var g=DX(l);d.forEach(function(b){var S=WX.bind(null,l,b);g.has(b)||(g.add(b),b.then(S,S))})}function gs(l,d){var g=d.deletions;if(g!==null)for(var b=0;b<g.length;b++){var S=g[b],O=l,U=d,J=U;e:for(;J!==null;){switch(J.tag){case 27:if(jl(J.type)){pn=J.stateNode,Qr=!1;break e}break;case 5:pn=J.stateNode,Qr=!1;break e;case 3:case 4:pn=J.stateNode.containerInfo,Qr=!0;break e}J=J.return}if(pn===null)throw Error(r(160));gR(O,U,S),pn=null,Qr=!1,O=S.alternate,O!==null&&(O.return=null),S.return=null}if(d.subtreeFlags&13878)for(d=d.child;d!==null;)bR(d,l),d=d.sibling}var Ci=null;function bR(l,d){var g=l.alternate,b=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:gs(d,l),ys(l),b&4&&(xl(3,l,l.return),ip(3,l),xl(5,l,l.return));break;case 1:gs(d,l),ys(l),b&512&&(Rn||g===null||uo(g,g.return)),b&64&&na&&(l=l.updateQueue,l!==null&&(b=l.callbacks,b!==null&&(g=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=g===null?b:g.concat(b))));break;case 26:var S=Ci;if(gs(d,l),ys(l),b&512&&(Rn||g===null||uo(g,g.return)),b&4){var O=g!==null?g.memoizedState:null;if(b=l.memoizedState,g===null)if(b===null)if(l.stateNode===null){e:{b=l.type,g=l.memoizedProps,S=S.ownerDocument||S;t:switch(b){case"title":O=S.getElementsByTagName("title")[0],(!O||O[Uo]||O[an]||O.namespaceURI==="http://www.w3.org/2000/svg"||O.hasAttribute("itemprop"))&&(O=S.createElement(b),S.head.insertBefore(O,S.querySelector("head > title"))),hr(O,b,g),O[an]=l,Fn(O),b=O;break e;case"link":var U=fk("link","href",S).get(b+(g.href||""));if(U){for(var J=0;J<U.length;J++)if(O=U[J],O.getAttribute("href")===(g.href==null||g.href===""?null:g.href)&&O.getAttribute("rel")===(g.rel==null?null:g.rel)&&O.getAttribute("title")===(g.title==null?null:g.title)&&O.getAttribute("crossorigin")===(g.crossOrigin==null?null:g.crossOrigin)){U.splice(J,1);break t}}O=S.createElement(b),hr(O,b,g),S.head.appendChild(O);break;case"meta":if(U=fk("meta","content",S).get(b+(g.content||""))){for(J=0;J<U.length;J++)if(O=U[J],O.getAttribute("content")===(g.content==null?null:""+g.content)&&O.getAttribute("name")===(g.name==null?null:g.name)&&O.getAttribute("property")===(g.property==null?null:g.property)&&O.getAttribute("http-equiv")===(g.httpEquiv==null?null:g.httpEquiv)&&O.getAttribute("charset")===(g.charSet==null?null:g.charSet)){U.splice(J,1);break t}}O=S.createElement(b),hr(O,b,g),S.head.appendChild(O);break;default:throw Error(r(468,b))}O[an]=l,Fn(O),b=O}l.stateNode=b}else hk(S,l.type,l.stateNode);else l.stateNode=dk(S,b,l.memoizedProps);else O!==b?(O===null?g.stateNode!==null&&(g=g.stateNode,g.parentNode.removeChild(g)):O.count--,b===null?hk(S,l.type,l.stateNode):dk(S,b,l.memoizedProps)):b===null&&l.stateNode!==null&&l2(l,l.memoizedProps,g.memoizedProps)}break;case 27:gs(d,l),ys(l),b&512&&(Rn||g===null||uo(g,g.return)),g!==null&&b&4&&l2(l,l.memoizedProps,g.memoizedProps);break;case 5:if(gs(d,l),ys(l),b&512&&(Rn||g===null||uo(g,g.return)),l.flags&32){S=l.stateNode;try{Ld(S,"")}catch(be){Zt(l,l.return,be)}}b&4&&l.stateNode!=null&&(S=l.memoizedProps,l2(l,S,g!==null?g.memoizedProps:S)),b&1024&&(d2=!0);break;case 6:if(gs(d,l),ys(l),b&4){if(l.stateNode===null)throw Error(r(162));b=l.memoizedProps,g=l.stateNode;try{g.nodeValue=b}catch(be){Zt(l,l.return,be)}}break;case 3:if(_b=null,S=Ci,Ci=Eb(d.containerInfo),gs(d,l),Ci=S,ys(l),b&4&&g!==null&&g.memoizedState.isDehydrated)try{Ep(d.containerInfo)}catch(be){Zt(l,l.return,be)}d2&&(d2=!1,vR(l));break;case 4:b=Ci,Ci=Eb(l.stateNode.containerInfo),gs(d,l),ys(l),Ci=b;break;case 12:gs(d,l),ys(l);break;case 13:gs(d,l),ys(l),l.child.flags&8192&&l.memoizedState!==null!=(g!==null&&g.memoizedState!==null)&&(b2=Oe()),b&4&&(b=l.updateQueue,b!==null&&(l.updateQueue=null,f2(l,b)));break;case 22:S=l.memoizedState!==null;var ee=g!==null&&g.memoizedState!==null,ge=na,we=Rn;if(na=ge||S,Rn=we||ee,gs(d,l),Rn=we,na=ge,ys(l),b&8192)e:for(d=l.stateNode,d._visibility=S?d._visibility&-2:d._visibility|1,S&&(g===null||ee||na||Rn||lu(l)),g=null,d=l;;){if(d.tag===5||d.tag===26){if(g===null){ee=g=d;try{if(O=ee.stateNode,S)U=O.style,typeof U.setProperty=="function"?U.setProperty("display","none","important"):U.display="none";else{J=ee.stateNode;var _e=ee.memoizedProps.style,ye=_e!=null&&_e.hasOwnProperty("display")?_e.display:null;J.style.display=ye==null||typeof ye=="boolean"?"":(""+ye).trim()}}catch(be){Zt(ee,ee.return,be)}}}else if(d.tag===6){if(g===null){ee=d;try{ee.stateNode.nodeValue=S?"":ee.memoizedProps}catch(be){Zt(ee,ee.return,be)}}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===l)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break e;for(;d.sibling===null;){if(d.return===null||d.return===l)break e;g===d&&(g=null),d=d.return}g===d&&(g=null),d.sibling.return=d.return,d=d.sibling}b&4&&(b=l.updateQueue,b!==null&&(g=b.retryQueue,g!==null&&(b.retryQueue=null,f2(l,g))));break;case 19:gs(d,l),ys(l),b&4&&(b=l.updateQueue,b!==null&&(l.updateQueue=null,f2(l,b)));break;case 30:break;case 21:break;default:gs(d,l),ys(l)}}function ys(l){var d=l.flags;if(d&2){try{for(var g,b=l.return;b!==null;){if(dR(b)){g=b;break}b=b.return}if(g==null)throw Error(r(160));switch(g.tag){case 27:var S=g.stateNode,O=c2(l);ub(l,O,S);break;case 5:var U=g.stateNode;g.flags&32&&(Ld(U,""),g.flags&=-33);var J=c2(l);ub(l,J,U);break;case 3:case 4:var ee=g.stateNode.containerInfo,ge=c2(l);u2(l,ge,ee);break;default:throw Error(r(161))}}catch(we){Zt(l,l.return,we)}l.flags&=-3}d&4096&&(l.flags&=-4097)}function vR(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var d=l;vR(d),d.tag===5&&d.flags&1024&&d.stateNode.reset(),l=l.sibling}}function wl(l,d){if(d.subtreeFlags&8772)for(d=d.child;d!==null;)mR(l,d.alternate,d),d=d.sibling}function lu(l){for(l=l.child;l!==null;){var d=l;switch(d.tag){case 0:case 11:case 14:case 15:xl(4,d,d.return),lu(d);break;case 1:uo(d,d.return);var g=d.stateNode;typeof g.componentWillUnmount=="function"&&cR(d,d.return,g),lu(d);break;case 27:pp(d.stateNode);case 26:case 5:uo(d,d.return),lu(d);break;case 22:d.memoizedState===null&&lu(d);break;case 30:lu(d);break;default:lu(d)}l=l.sibling}}function Sl(l,d,g){for(g=g&&(d.subtreeFlags&8772)!==0,d=d.child;d!==null;){var b=d.alternate,S=l,O=d,U=O.flags;switch(O.tag){case 0:case 11:case 15:Sl(S,O,g),ip(4,O);break;case 1:if(Sl(S,O,g),b=O,S=b.stateNode,typeof S.componentDidMount=="function")try{S.componentDidMount()}catch(ge){Zt(b,b.return,ge)}if(b=O,S=b.updateQueue,S!==null){var J=b.stateNode;try{var ee=S.shared.hiddenCallbacks;if(ee!==null)for(S.shared.hiddenCallbacks=null,S=0;S<ee.length;S++)Y4(ee[S],J)}catch(ge){Zt(b,b.return,ge)}}g&&U&64&&lR(O),op(O,O.return);break;case 27:fR(O);case 26:case 5:Sl(S,O,g),g&&b===null&&U&4&&uR(O),op(O,O.return);break;case 12:Sl(S,O,g);break;case 13:Sl(S,O,g),g&&U&4&&yR(S,O);break;case 22:O.memoizedState===null&&Sl(S,O,g),op(O,O.return);break;case 30:break;default:Sl(S,O,g)}d=d.sibling}}function h2(l,d){var g=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),l=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(l=d.memoizedState.cachePool.pool),l!==g&&(l!=null&&l.refCount++,g!=null&&Hm(g))}function m2(l,d){l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&Hm(l))}function fo(l,d,g,b){if(d.subtreeFlags&10256)for(d=d.child;d!==null;)xR(l,d,g,b),d=d.sibling}function xR(l,d,g,b){var S=d.flags;switch(d.tag){case 0:case 11:case 15:fo(l,d,g,b),S&2048&&ip(9,d);break;case 1:fo(l,d,g,b);break;case 3:fo(l,d,g,b),S&2048&&(l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&Hm(l)));break;case 12:if(S&2048){fo(l,d,g,b),l=d.stateNode;try{var O=d.memoizedProps,U=O.id,J=O.onPostCommit;typeof J=="function"&&J(U,d.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(ee){Zt(d,d.return,ee)}}else fo(l,d,g,b);break;case 13:fo(l,d,g,b);break;case 23:break;case 22:O=d.stateNode,U=d.alternate,d.memoizedState!==null?O._visibility&2?fo(l,d,g,b):ap(l,d):O._visibility&2?fo(l,d,g,b):(O._visibility|=2,rf(l,d,g,b,(d.subtreeFlags&10256)!==0)),S&2048&&h2(U,d);break;case 24:fo(l,d,g,b),S&2048&&m2(d.alternate,d);break;default:fo(l,d,g,b)}}function rf(l,d,g,b,S){for(S=S&&(d.subtreeFlags&10256)!==0,d=d.child;d!==null;){var O=l,U=d,J=g,ee=b,ge=U.flags;switch(U.tag){case 0:case 11:case 15:rf(O,U,J,ee,S),ip(8,U);break;case 23:break;case 22:var we=U.stateNode;U.memoizedState!==null?we._visibility&2?rf(O,U,J,ee,S):ap(O,U):(we._visibility|=2,rf(O,U,J,ee,S)),S&&ge&2048&&h2(U.alternate,U);break;case 24:rf(O,U,J,ee,S),S&&ge&2048&&m2(U.alternate,U);break;default:rf(O,U,J,ee,S)}d=d.sibling}}function ap(l,d){if(d.subtreeFlags&10256)for(d=d.child;d!==null;){var g=l,b=d,S=b.flags;switch(b.tag){case 22:ap(g,b),S&2048&&h2(b.alternate,b);break;case 24:ap(g,b),S&2048&&m2(b.alternate,b);break;default:ap(g,b)}d=d.sibling}}var lp=8192;function sf(l){if(l.subtreeFlags&lp)for(l=l.child;l!==null;)wR(l),l=l.sibling}function wR(l){switch(l.tag){case 26:sf(l),l.flags&lp&&l.memoizedState!==null&&SK(Ci,l.memoizedState,l.memoizedProps);break;case 5:sf(l);break;case 3:case 4:var d=Ci;Ci=Eb(l.stateNode.containerInfo),sf(l),Ci=d;break;case 22:l.memoizedState===null&&(d=l.alternate,d!==null&&d.memoizedState!==null?(d=lp,lp=16777216,sf(l),lp=d):sf(l));break;default:sf(l)}}function SR(l){var d=l.alternate;if(d!==null&&(l=d.child,l!==null)){d.child=null;do d=l.sibling,l.sibling=null,l=d;while(l!==null)}}function cp(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var g=0;g<d.length;g++){var b=d[g];nr=b,NR(b,l)}SR(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)ER(l),l=l.sibling}function ER(l){switch(l.tag){case 0:case 11:case 15:cp(l),l.flags&2048&&xl(9,l,l.return);break;case 3:cp(l);break;case 12:cp(l);break;case 22:var d=l.stateNode;l.memoizedState!==null&&d._visibility&2&&(l.return===null||l.return.tag!==13)?(d._visibility&=-3,db(l)):cp(l);break;default:cp(l)}}function db(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var g=0;g<d.length;g++){var b=d[g];nr=b,NR(b,l)}SR(l)}for(l=l.child;l!==null;){switch(d=l,d.tag){case 0:case 11:case 15:xl(8,d,d.return),db(d);break;case 22:g=d.stateNode,g._visibility&2&&(g._visibility&=-3,db(d));break;default:db(d)}l=l.sibling}}function NR(l,d){for(;nr!==null;){var g=nr;switch(g.tag){case 0:case 11:case 15:xl(8,g,d);break;case 23:case 22:if(g.memoizedState!==null&&g.memoizedState.cachePool!==null){var b=g.memoizedState.cachePool.pool;b!=null&&b.refCount++}break;case 24:Hm(g.memoizedState.cache)}if(b=g.child,b!==null)b.return=g,nr=b;else e:for(g=l;nr!==null;){b=nr;var S=b.sibling,O=b.return;if(pR(b),b===g){nr=null;break e}if(S!==null){S.return=O,nr=S;break e}nr=O}}}var LX={getCacheForType:function(l){var d=vr(Wn),g=d.data.get(l);return g===void 0&&(g=l(),d.data.set(l,g)),g}},FX=typeof WeakMap=="function"?WeakMap:Map,Wt=0,rn=null,Ct=null,At=0,Gt=0,bs=null,El=!1,of=!1,p2=!1,sa=0,_n=0,Nl=0,cu=0,g2=0,Gs=0,af=0,up=null,Zr=null,y2=!1,b2=0,fb=1/0,hb=null,_l=null,fr=0,Cl=null,lf=null,cf=0,v2=0,x2=null,_R=null,dp=0,w2=null;function vs(){if((Wt&2)!==0&&At!==0)return At&-At;if(T.T!==null){var l=Jd;return l!==0?l:j2()}return mn()}function CR(){Gs===0&&(Gs=(At&536870912)===0||Ft?qc():536870912);var l=Ws.current;return l!==null&&(l.flags|=32),Gs}function xs(l,d,g){(l===rn&&(Gt===2||Gt===9)||l.cancelPendingCommit!==null)&&(uf(l,0),Ol(l,At,Gs,!1)),Vo(l,g),((Wt&2)===0||l!==rn)&&(l===rn&&((Wt&2)===0&&(cu|=g),_n===4&&Ol(l,At,Gs,!1)),ho(l))}function OR(l,d,g){if((Wt&6)!==0)throw Error(r(327));var b=!g&&(d&124)===0&&(d&l.expiredLanes)===0||Bs(l,d),S=b?VX(l,d):N2(l,d,!0),O=b;do{if(S===0){of&&!b&&Ol(l,d,0,!1);break}else{if(g=l.current.alternate,O&&!BX(g)){S=N2(l,d,!1),O=!1;continue}if(S===2){if(O=d,l.errorRecoveryDisabledLanes&O)var U=0;else U=l.pendingLanes&-536870913,U=U!==0?U:U&536870912?536870912:0;if(U!==0){d=U;e:{var J=l;S=up;var ee=J.current.memoizedState.isDehydrated;if(ee&&(uf(J,U).flags|=256),U=N2(J,U,!1),U!==2){if(p2&&!ee){J.errorRecoveryDisabledLanes|=O,cu|=O,S=4;break e}O=Zr,Zr=S,O!==null&&(Zr===null?Zr=O:Zr.push.apply(Zr,O))}S=U}if(O=!1,S!==2)continue}}if(S===1){uf(l,0),Ol(l,d,0,!0);break}e:{switch(b=l,O=S,O){case 0:case 1:throw Error(r(345));case 4:if((d&4194048)!==d)break;case 6:Ol(b,d,Gs,!El);break e;case 2:Zr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((d&62914560)===d&&(S=b2+300-Oe(),10<S)){if(Ol(b,d,Gs,!El),wi(b,0,!0)!==0)break e;b.timeoutHandle=nk(jR.bind(null,b,g,Zr,hb,y2,d,Gs,cu,af,El,O,2,-0,0),S);break e}jR(b,g,Zr,hb,y2,d,Gs,cu,af,El,O,0,-0,0)}}break}while(!0);ho(l)}function jR(l,d,g,b,S,O,U,J,ee,ge,we,_e,ye,be){if(l.timeoutHandle=-1,_e=d.subtreeFlags,(_e&8192||(_e&16785408)===16785408)&&(bp={stylesheets:null,count:0,unsuspend:wK},wR(d),_e=EK(),_e!==null)){l.cancelPendingCommit=_e(IR.bind(null,l,d,O,g,b,S,U,J,ee,we,1,ye,be)),Ol(l,O,U,!ge);return}IR(l,d,O,g,b,S,U,J,ee)}function BX(l){for(var d=l;;){var g=d.tag;if((g===0||g===11||g===15)&&d.flags&16384&&(g=d.updateQueue,g!==null&&(g=g.stores,g!==null)))for(var b=0;b<g.length;b++){var S=g[b],O=S.getSnapshot;S=S.value;try{if(!ms(O(),S))return!1}catch{return!1}}if(g=d.child,d.subtreeFlags&16384&&g!==null)g.return=d,d=g;else{if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function Ol(l,d,g,b){d&=~g2,d&=~cu,l.suspendedLanes|=d,l.pingedLanes&=~d,b&&(l.warmLanes|=d),b=l.expirationTimes;for(var S=d;0<S;){var O=31-Ge(S),U=1<<O;b[O]=-1,S&=~U}g!==0&&Hc(l,g,d)}function mb(){return(Wt&6)===0?(fp(0),!1):!0}function S2(){if(Ct!==null){if(Gt===0)var l=Ct.return;else l=Ct,Xo=ru=null,FE(l),tf=null,np=0,l=Ct;for(;l!==null;)aR(l.alternate,l),l=l.return;Ct=null}}function uf(l,d){var g=l.timeoutHandle;g!==-1&&(l.timeoutHandle=-1,sK(g)),g=l.cancelPendingCommit,g!==null&&(l.cancelPendingCommit=null,g()),S2(),rn=l,Ct=g=Go(l.current,null),At=d,Gt=0,bs=null,El=!1,of=Bs(l,d),p2=!1,af=Gs=g2=cu=Nl=_n=0,Zr=up=null,y2=!1,(d&8)!==0&&(d|=d&32);var b=l.entangledLanes;if(b!==0)for(l=l.entanglements,b&=d;0<b;){var S=31-Ge(b),O=1<<S;d|=l[S],b&=~O}return sa=d,P0(),g}function AR(l,d){Et=null,T.H=tb,d===Gm||d===H0?(d=W4(),Gt=3):d===U4?(d=W4(),Gt=4):Gt=d===G5?8:d!==null&&typeof d=="object"&&typeof d.then=="function"?6:1,bs=d,Ct===null&&(_n=1,ob(l,Vs(d,l.current)))}function TR(){var l=T.H;return T.H=tb,l===null?tb:l}function $R(){var l=T.A;return T.A=LX,l}function E2(){_n=4,El||(At&4194048)!==At&&Ws.current!==null||(of=!0),(Nl&134217727)===0&&(cu&134217727)===0||rn===null||Ol(rn,At,Gs,!1)}function N2(l,d,g){var b=Wt;Wt|=2;var S=TR(),O=$R();(rn!==l||At!==d)&&(hb=null,uf(l,d)),d=!1;var U=_n;e:do try{if(Gt!==0&&Ct!==null){var J=Ct,ee=bs;switch(Gt){case 8:S2(),U=6;break e;case 3:case 2:case 9:case 6:Ws.current===null&&(d=!0);var ge=Gt;if(Gt=0,bs=null,df(l,J,ee,ge),g&&of){U=0;break e}break;default:ge=Gt,Gt=0,bs=null,df(l,J,ee,ge)}}zX(),U=_n;break}catch(we){AR(l,we)}while(!0);return d&&l.shellSuspendCounter++,Xo=ru=null,Wt=b,T.H=S,T.A=O,Ct===null&&(rn=null,At=0,P0()),U}function zX(){for(;Ct!==null;)RR(Ct)}function VX(l,d){var g=Wt;Wt|=2;var b=TR(),S=$R();rn!==l||At!==d?(hb=null,fb=Oe()+500,uf(l,d)):of=Bs(l,d);e:do try{if(Gt!==0&&Ct!==null){d=Ct;var O=bs;t:switch(Gt){case 1:Gt=0,bs=null,df(l,d,O,1);break;case 2:case 9:if(q4(O)){Gt=0,bs=null,kR(d);break}d=function(){Gt!==2&&Gt!==9||rn!==l||(Gt=7),ho(l)},O.then(d,d);break e;case 3:Gt=7;break e;case 4:Gt=5;break e;case 7:q4(O)?(Gt=0,bs=null,kR(d)):(Gt=0,bs=null,df(l,d,O,7));break;case 5:var U=null;switch(Ct.tag){case 26:U=Ct.memoizedState;case 5:case 27:var J=Ct;if(!U||mk(U)){Gt=0,bs=null;var ee=J.sibling;if(ee!==null)Ct=ee;else{var ge=J.return;ge!==null?(Ct=ge,pb(ge)):Ct=null}break t}}Gt=0,bs=null,df(l,d,O,5);break;case 6:Gt=0,bs=null,df(l,d,O,6);break;case 8:S2(),_n=6;break e;default:throw Error(r(462))}}UX();break}catch(we){AR(l,we)}while(!0);return Xo=ru=null,T.H=b,T.A=S,Wt=g,Ct!==null?0:(rn=null,At=0,P0(),_n)}function UX(){for(;Ct!==null&&!He();)RR(Ct)}function RR(l){var d=iR(l.alternate,l,sa);l.memoizedProps=l.pendingProps,d===null?pb(l):Ct=d}function kR(l){var d=l,g=d.alternate;switch(d.tag){case 15:case 0:d=Z5(g,d,d.pendingProps,d.type,void 0,At);break;case 11:d=Z5(g,d,d.pendingProps,d.type.render,d.ref,At);break;case 5:FE(d);default:aR(g,d),d=Ct=M4(d,sa),d=iR(g,d,sa)}l.memoizedProps=l.pendingProps,d===null?pb(l):Ct=d}function df(l,d,g,b){Xo=ru=null,FE(d),tf=null,np=0;var S=d.return;try{if(RX(l,S,d,g,At)){_n=1,ob(l,Vs(g,l.current)),Ct=null;return}}catch(O){if(S!==null)throw Ct=S,O;_n=1,ob(l,Vs(g,l.current)),Ct=null;return}d.flags&32768?(Ft||b===1?l=!0:of||(At&536870912)!==0?l=!1:(El=l=!0,(b===2||b===9||b===3||b===6)&&(b=Ws.current,b!==null&&b.tag===13&&(b.flags|=16384))),MR(d,l)):pb(d)}function pb(l){var d=l;do{if((d.flags&32768)!==0){MR(d,El);return}l=d.return;var g=MX(d.alternate,d,sa);if(g!==null){Ct=g;return}if(d=d.sibling,d!==null){Ct=d;return}Ct=d=l}while(d!==null);_n===0&&(_n=5)}function MR(l,d){do{var g=IX(l.alternate,l);if(g!==null){g.flags&=32767,Ct=g;return}if(g=l.return,g!==null&&(g.flags|=32768,g.subtreeFlags=0,g.deletions=null),!d&&(l=l.sibling,l!==null)){Ct=l;return}Ct=l=g}while(l!==null);_n=6,Ct=null}function IR(l,d,g,b,S,O,U,J,ee){l.cancelPendingCommit=null;do gb();while(fr!==0);if((Wt&6)!==0)throw Error(r(327));if(d!==null){if(d===l.current)throw Error(r(177));if(O=d.lanes|d.childLanes,O|=mE,zs(l,g,O,U,J,ee),l===rn&&(Ct=rn=null,At=0),lf=d,Cl=l,cf=g,v2=O,x2=S,_R=b,(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,GX(re,function(){return BR(),null})):(l.callbackNode=null,l.callbackPriority=0),b=(d.flags&13878)!==0,(d.subtreeFlags&13878)!==0||b){b=T.T,T.T=null,S=I.p,I.p=2,U=Wt,Wt|=4;try{PX(l,d,g)}finally{Wt=U,I.p=S,T.T=b}}fr=1,PR(),DR(),LR()}}function PR(){if(fr===1){fr=0;var l=Cl,d=lf,g=(d.flags&13878)!==0;if((d.subtreeFlags&13878)!==0||g){g=T.T,T.T=null;var b=I.p;I.p=2;var S=Wt;Wt|=4;try{bR(d,l);var O=P2,U=N4(l.containerInfo),J=O.focusedElem,ee=O.selectionRange;if(U!==J&&J&&J.ownerDocument&&E4(J.ownerDocument.documentElement,J)){if(ee!==null&&cE(J)){var ge=ee.start,we=ee.end;if(we===void 0&&(we=ge),"selectionStart"in J)J.selectionStart=ge,J.selectionEnd=Math.min(we,J.value.length);else{var _e=J.ownerDocument||document,ye=_e&&_e.defaultView||window;if(ye.getSelection){var be=ye.getSelection(),ft=J.textContent.length,lt=Math.min(ee.start,ft),Xt=ee.end===void 0?lt:Math.min(ee.end,ft);!be.extend&&lt>Xt&&(U=Xt,Xt=lt,lt=U);var ue=S4(J,lt),oe=S4(J,Xt);if(ue&&oe&&(be.rangeCount!==1||be.anchorNode!==ue.node||be.anchorOffset!==ue.offset||be.focusNode!==oe.node||be.focusOffset!==oe.offset)){var me=_e.createRange();me.setStart(ue.node,ue.offset),be.removeAllRanges(),lt>Xt?(be.addRange(me),be.extend(oe.node,oe.offset)):(me.setEnd(oe.node,oe.offset),be.addRange(me))}}}}for(_e=[],be=J;be=be.parentNode;)be.nodeType===1&&_e.push({element:be,left:be.scrollLeft,top:be.scrollTop});for(typeof J.focus=="function"&&J.focus(),J=0;J<_e.length;J++){var Se=_e[J];Se.element.scrollLeft=Se.left,Se.element.scrollTop=Se.top}}jb=!!I2,P2=I2=null}finally{Wt=S,I.p=b,T.T=g}}l.current=d,fr=2}}function DR(){if(fr===2){fr=0;var l=Cl,d=lf,g=(d.flags&8772)!==0;if((d.subtreeFlags&8772)!==0||g){g=T.T,T.T=null;var b=I.p;I.p=2;var S=Wt;Wt|=4;try{mR(l,d.alternate,d)}finally{Wt=S,I.p=b,T.T=g}}fr=3}}function LR(){if(fr===4||fr===3){fr=0,et();var l=Cl,d=lf,g=cf,b=_R;(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?fr=5:(fr=0,lf=Cl=null,FR(l,l.pendingLanes));var S=l.pendingLanes;if(S===0&&(_l=null),Gc(g),d=d.stateNode,xe&&typeof xe.onCommitFiberRoot=="function")try{xe.onCommitFiberRoot(le,d,void 0,(d.current.flags&128)===128)}catch{}if(b!==null){d=T.T,S=I.p,I.p=2,T.T=null;try{for(var O=l.onRecoverableError,U=0;U<b.length;U++){var J=b[U];O(J.value,{componentStack:J.stack})}}finally{T.T=d,I.p=S}}(cf&3)!==0&&gb(),ho(l),S=l.pendingLanes,(g&4194090)!==0&&(S&42)!==0?l===w2?dp++:(dp=0,w2=l):dp=0,fp(0)}}function FR(l,d){(l.pooledCacheLanes&=d)===0&&(d=l.pooledCache,d!=null&&(l.pooledCache=null,Hm(d)))}function gb(l){return PR(),DR(),LR(),BR()}function BR(){if(fr!==5)return!1;var l=Cl,d=v2;v2=0;var g=Gc(cf),b=T.T,S=I.p;try{I.p=32>g?32:g,T.T=null,g=x2,x2=null;var O=Cl,U=cf;if(fr=0,lf=Cl=null,cf=0,(Wt&6)!==0)throw Error(r(331));var J=Wt;if(Wt|=4,ER(O.current),xR(O,O.current,U,g),Wt=J,fp(0,!1),xe&&typeof xe.onPostCommitFiberRoot=="function")try{xe.onPostCommitFiberRoot(le,O)}catch{}return!0}finally{I.p=S,T.T=b,FR(l,d)}}function zR(l,d,g){d=Vs(g,d),d=ZE(l.stateNode,d,2),l=gl(l,d,2),l!==null&&(Vo(l,2),ho(l))}function Zt(l,d,g){if(l.tag===3)zR(l,l,g);else for(;d!==null;){if(d.tag===3){zR(d,l,g);break}else if(d.tag===1){var b=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(_l===null||!_l.has(b))){l=Vs(g,l),g=H5(2),b=gl(d,g,2),b!==null&&(W5(g,b,d,l),Vo(b,2),ho(b));break}}d=d.return}}function _2(l,d,g){var b=l.pingCache;if(b===null){b=l.pingCache=new FX;var S=new Set;b.set(d,S)}else S=b.get(d),S===void 0&&(S=new Set,b.set(d,S));S.has(g)||(p2=!0,S.add(g),l=qX.bind(null,l,d,g),d.then(l,l))}function qX(l,d,g){var b=l.pingCache;b!==null&&b.delete(d),l.pingedLanes|=l.suspendedLanes&g,l.warmLanes&=~g,rn===l&&(At&g)===g&&(_n===4||_n===3&&(At&62914560)===At&&300>Oe()-b2?(Wt&2)===0&&uf(l,0):g2|=g,af===At&&(af=0)),ho(l)}function VR(l,d){d===0&&(d=Ad()),l=Hd(l,d),l!==null&&(Vo(l,d),ho(l))}function HX(l){var d=l.memoizedState,g=0;d!==null&&(g=d.retryLane),VR(l,g)}function WX(l,d){var g=0;switch(l.tag){case 13:var b=l.stateNode,S=l.memoizedState;S!==null&&(g=S.retryLane);break;case 19:b=l.stateNode;break;case 22:b=l.stateNode._retryCache;break;default:throw Error(r(314))}b!==null&&b.delete(d),VR(l,g)}function GX(l,d){return Re(l,d)}var yb=null,ff=null,C2=!1,bb=!1,O2=!1,uu=0;function ho(l){l!==ff&&l.next===null&&(ff===null?yb=ff=l:ff=ff.next=l),bb=!0,C2||(C2=!0,JX())}function fp(l,d){if(!O2&&bb){O2=!0;do for(var g=!1,b=yb;b!==null;){if(l!==0){var S=b.pendingLanes;if(S===0)var O=0;else{var U=b.suspendedLanes,J=b.pingedLanes;O=(1<<31-Ge(42|l)+1)-1,O&=S&~(U&~J),O=O&201326741?O&201326741|1:O?O|2:0}O!==0&&(g=!0,WR(b,O))}else O=At,O=wi(b,b===rn?O:0,b.cancelPendingCommit!==null||b.timeoutHandle!==-1),(O&3)===0||Bs(b,O)||(g=!0,WR(b,O));b=b.next}while(g);O2=!1}}function YX(){UR()}function UR(){bb=C2=!1;var l=0;uu!==0&&(rK()&&(l=uu),uu=0);for(var d=Oe(),g=null,b=yb;b!==null;){var S=b.next,O=qR(b,d);O===0?(b.next=null,g===null?yb=S:g.next=S,S===null&&(ff=g)):(g=b,(l!==0||(O&3)!==0)&&(bb=!0)),b=S}fp(l)}function qR(l,d){for(var g=l.suspendedLanes,b=l.pingedLanes,S=l.expirationTimes,O=l.pendingLanes&-62914561;0<O;){var U=31-Ge(O),J=1<<U,ee=S[U];ee===-1?((J&g)===0||(J&b)!==0)&&(S[U]=ao(J,d)):ee<=d&&(l.expiredLanes|=J),O&=~J}if(d=rn,g=At,g=wi(l,l===d?g:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),b=l.callbackNode,g===0||l===d&&(Gt===2||Gt===9)||l.cancelPendingCommit!==null)return b!==null&&b!==null&&ke(b),l.callbackNode=null,l.callbackPriority=0;if((g&3)===0||Bs(l,g)){if(d=g&-g,d===l.callbackPriority)return d;switch(b!==null&&ke(b),Gc(g)){case 2:case 8:g=G;break;case 32:g=re;break;case 268435456:g=he;break;default:g=re}return b=HR.bind(null,l),g=Re(g,b),l.callbackPriority=d,l.callbackNode=g,d}return b!==null&&b!==null&&ke(b),l.callbackPriority=2,l.callbackNode=null,2}function HR(l,d){if(fr!==0&&fr!==5)return l.callbackNode=null,l.callbackPriority=0,null;var g=l.callbackNode;if(gb()&&l.callbackNode!==g)return null;var b=At;return b=wi(l,l===rn?b:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),b===0?null:(OR(l,b,d),qR(l,Oe()),l.callbackNode!=null&&l.callbackNode===g?HR.bind(null,l):null)}function WR(l,d){if(gb())return null;OR(l,d,!0)}function JX(){iK(function(){(Wt&6)!==0?Re(Ie,YX):UR()})}function j2(){return uu===0&&(uu=qc()),uu}function GR(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:A0(""+l)}function YR(l,d){var g=d.ownerDocument.createElement("input");return g.name=d.name,g.value=d.value,l.id&&g.setAttribute("form",l.id),d.parentNode.insertBefore(g,d),l=new FormData(l),g.parentNode.removeChild(g),l}function XX(l,d,g,b,S){if(d==="submit"&&g&&g.stateNode===S){var O=GR((S[Ln]||null).action),U=b.submitter;U&&(d=(d=U[Ln]||null)?GR(d.formAction):U.getAttribute("formAction"),d!==null&&(O=d,U=null));var J=new k0("action","action",null,b,S);l.push({event:J,listeners:[{instance:null,listener:function(){if(b.defaultPrevented){if(uu!==0){var ee=U?YR(S,U):new FormData(S);YE(g,{pending:!0,data:ee,method:S.method,action:O},null,ee)}}else typeof O=="function"&&(J.preventDefault(),ee=U?YR(S,U):new FormData(S),YE(g,{pending:!0,data:ee,method:S.method,action:O},O,ee))},currentTarget:S}]})}}for(var A2=0;A2<hE.length;A2++){var T2=hE[A2],KX=T2.toLowerCase(),QX=T2[0].toUpperCase()+T2.slice(1);_i(KX,"on"+QX)}_i(O4,"onAnimationEnd"),_i(j4,"onAnimationIteration"),_i(A4,"onAnimationStart"),_i("dblclick","onDoubleClick"),_i("focusin","onFocus"),_i("focusout","onBlur"),_i(pX,"onTransitionRun"),_i(gX,"onTransitionStart"),_i(yX,"onTransitionCancel"),_i(T4,"onTransitionEnd"),cl("onMouseEnter",["mouseout","mouseover"]),cl("onMouseLeave",["mouseout","mouseover"]),cl("onPointerEnter",["pointerout","pointerover"]),cl("onPointerLeave",["pointerout","pointerover"]),Ho("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ho("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ho("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ho("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ho("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ho("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ZX=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(hp));function JR(l,d){d=(d&4)!==0;for(var g=0;g<l.length;g++){var b=l[g],S=b.event;b=b.listeners;e:{var O=void 0;if(d)for(var U=b.length-1;0<=U;U--){var J=b[U],ee=J.instance,ge=J.currentTarget;if(J=J.listener,ee!==O&&S.isPropagationStopped())break e;O=J,S.currentTarget=ge;try{O(S)}catch(we){ib(we)}S.currentTarget=null,O=ee}else for(U=0;U<b.length;U++){if(J=b[U],ee=J.instance,ge=J.currentTarget,J=J.listener,ee!==O&&S.isPropagationStopped())break e;O=J,S.currentTarget=ge;try{O(S)}catch(we){ib(we)}S.currentTarget=null,O=ee}}}}function Ot(l,d){var g=d[ll];g===void 0&&(g=d[ll]=new Set);var b=l+"__bubble";g.has(b)||(XR(d,l,2,!1),g.add(b))}function $2(l,d,g){var b=0;d&&(b|=4),XR(g,l,b,d)}var vb="_reactListening"+Math.random().toString(36).slice(2);function R2(l){if(!l[vb]){l[vb]=!0,w0.forEach(function(g){g!=="selectionchange"&&(ZX.has(g)||$2(g,!1,l),$2(g,!0,l))});var d=l.nodeType===9?l:l.ownerDocument;d===null||d[vb]||(d[vb]=!0,$2("selectionchange",!1,d))}}function XR(l,d,g,b){switch(xk(d)){case 2:var S=CK;break;case 8:S=OK;break;default:S=W2}g=S.bind(null,d,g,l),S=void 0,!eE||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(S=!0),b?S!==void 0?l.addEventListener(d,g,{capture:!0,passive:S}):l.addEventListener(d,g,!0):S!==void 0?l.addEventListener(d,g,{passive:S}):l.addEventListener(d,g,!1)}function k2(l,d,g,b,S){var O=b;if((d&1)===0&&(d&2)===0&&b!==null)e:for(;;){if(b===null)return;var U=b.tag;if(U===3||U===4){var J=b.stateNode.containerInfo;if(J===S)break;if(U===4)for(U=b.return;U!==null;){var ee=U.tag;if((ee===3||ee===4)&&U.stateNode.containerInfo===S)return;U=U.return}for(;J!==null;){if(U=mt(J),U===null)return;if(ee=U.tag,ee===5||ee===6||ee===26||ee===27){b=O=U;continue e}J=J.parentNode}}b=b.return}r4(function(){var ge=O,we=QS(g),_e=[];e:{var ye=$4.get(l);if(ye!==void 0){var be=k0,ft=l;switch(l){case"keypress":if($0(g)===0)break e;case"keydown":case"keyup":be=GJ;break;case"focusin":ft="focus",be=sE;break;case"focusout":ft="blur",be=sE;break;case"beforeblur":case"afterblur":be=sE;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":be=o4;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":be=IJ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":be=XJ;break;case O4:case j4:case A4:be=LJ;break;case T4:be=QJ;break;case"scroll":case"scrollend":be=kJ;break;case"wheel":be=eX;break;case"copy":case"cut":case"paste":be=BJ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":be=l4;break;case"toggle":case"beforetoggle":be=nX}var lt=(d&4)!==0,Xt=!lt&&(l==="scroll"||l==="scrollend"),ue=lt?ye!==null?ye+"Capture":null:ye;lt=[];for(var oe=ge,me;oe!==null;){var Se=oe;if(me=Se.stateNode,Se=Se.tag,Se!==5&&Se!==26&&Se!==27||me===null||ue===null||(Se=Rm(oe,ue),Se!=null&&lt.push(mp(oe,Se,me))),Xt)break;oe=oe.return}0<lt.length&&(ye=new be(ye,ft,null,g,we),_e.push({event:ye,listeners:lt}))}}if((d&7)===0){e:{if(ye=l==="mouseover"||l==="pointerover",be=l==="mouseout"||l==="pointerout",ye&&g!==KS&&(ft=g.relatedTarget||g.fromElement)&&(mt(ft)||ft[Ei]))break e;if((be||ye)&&(ye=we.window===we?we:(ye=we.ownerDocument)?ye.defaultView||ye.parentWindow:window,be?(ft=g.relatedTarget||g.toElement,be=ge,ft=ft?mt(ft):null,ft!==null&&(Xt=i(ft),lt=ft.tag,ft!==Xt||lt!==5&&lt!==27&&lt!==6)&&(ft=null)):(be=null,ft=ge),be!==ft)){if(lt=o4,Se="onMouseLeave",ue="onMouseEnter",oe="mouse",(l==="pointerout"||l==="pointerover")&&(lt=l4,Se="onPointerLeave",ue="onPointerEnter",oe="pointer"),Xt=be==null?ye:br(be),me=ft==null?ye:br(ft),ye=new lt(Se,oe+"leave",be,g,we),ye.target=Xt,ye.relatedTarget=me,Se=null,mt(we)===ge&&(lt=new lt(ue,oe+"enter",ft,g,we),lt.target=me,lt.relatedTarget=Xt,Se=lt),Xt=Se,be&&ft)t:{for(lt=be,ue=ft,oe=0,me=lt;me;me=hf(me))oe++;for(me=0,Se=ue;Se;Se=hf(Se))me++;for(;0<oe-me;)lt=hf(lt),oe--;for(;0<me-oe;)ue=hf(ue),me--;for(;oe--;){if(lt===ue||ue!==null&&lt===ue.alternate)break t;lt=hf(lt),ue=hf(ue)}lt=null}else lt=null;be!==null&&KR(_e,ye,be,lt,!1),ft!==null&&Xt!==null&&KR(_e,Xt,ft,lt,!0)}}e:{if(ye=ge?br(ge):window,be=ye.nodeName&&ye.nodeName.toLowerCase(),be==="select"||be==="input"&&ye.type==="file")var Je=g4;else if(m4(ye))if(y4)Je=fX;else{Je=uX;var _t=cX}else be=ye.nodeName,!be||be.toLowerCase()!=="input"||ye.type!=="checkbox"&&ye.type!=="radio"?ge&&XS(ge.elementType)&&(Je=g4):Je=dX;if(Je&&(Je=Je(l,ge))){p4(_e,Je,g,we);break e}_t&&_t(l,ye,ge),l==="focusout"&&ge&&ye.type==="number"&&ge.memoizedProps.value!=null&&JS(ye,"number",ye.value)}switch(_t=ge?br(ge):window,l){case"focusin":(m4(_t)||_t.contentEditable==="true")&&(Vd=_t,uE=ge,Bm=null);break;case"focusout":Bm=uE=Vd=null;break;case"mousedown":dE=!0;break;case"contextmenu":case"mouseup":case"dragend":dE=!1,_4(_e,g,we);break;case"selectionchange":if(mX)break;case"keydown":case"keyup":_4(_e,g,we)}var nt;if(oE)e:{switch(l){case"compositionstart":var ct="onCompositionStart";break e;case"compositionend":ct="onCompositionEnd";break e;case"compositionupdate":ct="onCompositionUpdate";break e}ct=void 0}else zd?f4(l,g)&&(ct="onCompositionEnd"):l==="keydown"&&g.keyCode===229&&(ct="onCompositionStart");ct&&(c4&&g.locale!=="ko"&&(zd||ct!=="onCompositionStart"?ct==="onCompositionEnd"&&zd&&(nt=s4()):(fl=we,tE="value"in fl?fl.value:fl.textContent,zd=!0)),_t=xb(ge,ct),0<_t.length&&(ct=new a4(ct,l,null,g,we),_e.push({event:ct,listeners:_t}),nt?ct.data=nt:(nt=h4(g),nt!==null&&(ct.data=nt)))),(nt=sX?iX(l,g):oX(l,g))&&(ct=xb(ge,"onBeforeInput"),0<ct.length&&(_t=new a4("onBeforeInput","beforeinput",null,g,we),_e.push({event:_t,listeners:ct}),_t.data=nt)),XX(_e,l,ge,g,we)}JR(_e,d)})}function mp(l,d,g){return{instance:l,listener:d,currentTarget:g}}function xb(l,d){for(var g=d+"Capture",b=[];l!==null;){var S=l,O=S.stateNode;if(S=S.tag,S!==5&&S!==26&&S!==27||O===null||(S=Rm(l,g),S!=null&&b.unshift(mp(l,S,O)),S=Rm(l,d),S!=null&&b.push(mp(l,S,O))),l.tag===3)return b;l=l.return}return[]}function hf(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function KR(l,d,g,b,S){for(var O=d._reactName,U=[];g!==null&&g!==b;){var J=g,ee=J.alternate,ge=J.stateNode;if(J=J.tag,ee!==null&&ee===b)break;J!==5&&J!==26&&J!==27||ge===null||(ee=ge,S?(ge=Rm(g,O),ge!=null&&U.unshift(mp(g,ge,ee))):S||(ge=Rm(g,O),ge!=null&&U.push(mp(g,ge,ee)))),g=g.return}U.length!==0&&l.push({event:d,listeners:U})}var eK=/\r\n?/g,tK=/\u0000|\uFFFD/g;function QR(l){return(typeof l=="string"?l:""+l).replace(eK,`
`).replace(tK,"")}function ZR(l,d){return d=QR(d),QR(l)===d}function wb(){}function Jt(l,d,g,b,S,O){switch(g){case"children":typeof b=="string"?d==="body"||d==="textarea"&&b===""||Ld(l,b):(typeof b=="number"||typeof b=="bigint")&&d!=="body"&&Ld(l,""+b);break;case"className":kd(l,"class",b);break;case"tabIndex":kd(l,"tabindex",b);break;case"dir":case"role":case"viewBox":case"width":case"height":kd(l,g,b);break;case"style":t4(l,b,O);break;case"data":if(d!=="object"){kd(l,"data",b);break}case"src":case"href":if(b===""&&(d!=="a"||g!=="href")){l.removeAttribute(g);break}if(b==null||typeof b=="function"||typeof b=="symbol"||typeof b=="boolean"){l.removeAttribute(g);break}b=A0(""+b),l.setAttribute(g,b);break;case"action":case"formAction":if(typeof b=="function"){l.setAttribute(g,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof O=="function"&&(g==="formAction"?(d!=="input"&&Jt(l,d,"name",S.name,S,null),Jt(l,d,"formEncType",S.formEncType,S,null),Jt(l,d,"formMethod",S.formMethod,S,null),Jt(l,d,"formTarget",S.formTarget,S,null)):(Jt(l,d,"encType",S.encType,S,null),Jt(l,d,"method",S.method,S,null),Jt(l,d,"target",S.target,S,null)));if(b==null||typeof b=="symbol"||typeof b=="boolean"){l.removeAttribute(g);break}b=A0(""+b),l.setAttribute(g,b);break;case"onClick":b!=null&&(l.onclick=wb);break;case"onScroll":b!=null&&Ot("scroll",l);break;case"onScrollEnd":b!=null&&Ot("scrollend",l);break;case"dangerouslySetInnerHTML":if(b!=null){if(typeof b!="object"||!("__html"in b))throw Error(r(61));if(g=b.__html,g!=null){if(S.children!=null)throw Error(r(60));l.innerHTML=g}}break;case"multiple":l.multiple=b&&typeof b!="function"&&typeof b!="symbol";break;case"muted":l.muted=b&&typeof b!="function"&&typeof b!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(b==null||typeof b=="function"||typeof b=="boolean"||typeof b=="symbol"){l.removeAttribute("xlink:href");break}g=A0(""+b),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",g);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":b!=null&&typeof b!="function"&&typeof b!="symbol"?l.setAttribute(g,""+b):l.removeAttribute(g);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":b&&typeof b!="function"&&typeof b!="symbol"?l.setAttribute(g,""):l.removeAttribute(g);break;case"capture":case"download":b===!0?l.setAttribute(g,""):b!==!1&&b!=null&&typeof b!="function"&&typeof b!="symbol"?l.setAttribute(g,b):l.removeAttribute(g);break;case"cols":case"rows":case"size":case"span":b!=null&&typeof b!="function"&&typeof b!="symbol"&&!isNaN(b)&&1<=b?l.setAttribute(g,b):l.removeAttribute(g);break;case"rowSpan":case"start":b==null||typeof b=="function"||typeof b=="symbol"||isNaN(b)?l.removeAttribute(g):l.setAttribute(g,b);break;case"popover":Ot("beforetoggle",l),Ot("toggle",l),Rd(l,"popover",b);break;case"xlinkActuate":Ni(l,"http://www.w3.org/1999/xlink","xlink:actuate",b);break;case"xlinkArcrole":Ni(l,"http://www.w3.org/1999/xlink","xlink:arcrole",b);break;case"xlinkRole":Ni(l,"http://www.w3.org/1999/xlink","xlink:role",b);break;case"xlinkShow":Ni(l,"http://www.w3.org/1999/xlink","xlink:show",b);break;case"xlinkTitle":Ni(l,"http://www.w3.org/1999/xlink","xlink:title",b);break;case"xlinkType":Ni(l,"http://www.w3.org/1999/xlink","xlink:type",b);break;case"xmlBase":Ni(l,"http://www.w3.org/XML/1998/namespace","xml:base",b);break;case"xmlLang":Ni(l,"http://www.w3.org/XML/1998/namespace","xml:lang",b);break;case"xmlSpace":Ni(l,"http://www.w3.org/XML/1998/namespace","xml:space",b);break;case"is":Rd(l,"is",b);break;case"innerText":case"textContent":break;default:(!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(g=$J.get(g)||g,Rd(l,g,b))}}function M2(l,d,g,b,S,O){switch(g){case"style":t4(l,b,O);break;case"dangerouslySetInnerHTML":if(b!=null){if(typeof b!="object"||!("__html"in b))throw Error(r(61));if(g=b.__html,g!=null){if(S.children!=null)throw Error(r(60));l.innerHTML=g}}break;case"children":typeof b=="string"?Ld(l,b):(typeof b=="number"||typeof b=="bigint")&&Ld(l,""+b);break;case"onScroll":b!=null&&Ot("scroll",l);break;case"onScrollEnd":b!=null&&Ot("scrollend",l);break;case"onClick":b!=null&&(l.onclick=wb);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!S0.hasOwnProperty(g))e:{if(g[0]==="o"&&g[1]==="n"&&(S=g.endsWith("Capture"),d=g.slice(2,S?g.length-7:void 0),O=l[Ln]||null,O=O!=null?O[g]:null,typeof O=="function"&&l.removeEventListener(d,O,S),typeof b=="function")){typeof O!="function"&&O!==null&&(g in l?l[g]=null:l.hasAttribute(g)&&l.removeAttribute(g)),l.addEventListener(d,b,S);break e}g in l?l[g]=b:b===!0?l.setAttribute(g,""):Rd(l,g,b)}}}function hr(l,d,g){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ot("error",l),Ot("load",l);var b=!1,S=!1,O;for(O in g)if(g.hasOwnProperty(O)){var U=g[O];if(U!=null)switch(O){case"src":b=!0;break;case"srcSet":S=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,d));default:Jt(l,d,O,U,g,null)}}S&&Jt(l,d,"srcSet",g.srcSet,g,null),b&&Jt(l,d,"src",g.src,g,null);return;case"input":Ot("invalid",l);var J=O=U=S=null,ee=null,ge=null;for(b in g)if(g.hasOwnProperty(b)){var we=g[b];if(we!=null)switch(b){case"name":S=we;break;case"type":U=we;break;case"checked":ee=we;break;case"defaultChecked":ge=we;break;case"value":O=we;break;case"defaultValue":J=we;break;case"children":case"dangerouslySetInnerHTML":if(we!=null)throw Error(r(137,d));break;default:Jt(l,d,b,we,g,null)}}K3(l,O,J,ee,ge,U,S,!1),Id(l);return;case"select":Ot("invalid",l),b=U=O=null;for(S in g)if(g.hasOwnProperty(S)&&(J=g[S],J!=null))switch(S){case"value":O=J;break;case"defaultValue":U=J;break;case"multiple":b=J;default:Jt(l,d,S,J,g,null)}d=O,g=U,l.multiple=!!b,d!=null?Dd(l,!!b,d,!1):g!=null&&Dd(l,!!b,g,!0);return;case"textarea":Ot("invalid",l),O=S=b=null;for(U in g)if(g.hasOwnProperty(U)&&(J=g[U],J!=null))switch(U){case"value":b=J;break;case"defaultValue":S=J;break;case"children":O=J;break;case"dangerouslySetInnerHTML":if(J!=null)throw Error(r(91));break;default:Jt(l,d,U,J,g,null)}Z3(l,b,S,O),Id(l);return;case"option":for(ee in g)if(g.hasOwnProperty(ee)&&(b=g[ee],b!=null))switch(ee){case"selected":l.selected=b&&typeof b!="function"&&typeof b!="symbol";break;default:Jt(l,d,ee,b,g,null)}return;case"dialog":Ot("beforetoggle",l),Ot("toggle",l),Ot("cancel",l),Ot("close",l);break;case"iframe":case"object":Ot("load",l);break;case"video":case"audio":for(b=0;b<hp.length;b++)Ot(hp[b],l);break;case"image":Ot("error",l),Ot("load",l);break;case"details":Ot("toggle",l);break;case"embed":case"source":case"link":Ot("error",l),Ot("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ge in g)if(g.hasOwnProperty(ge)&&(b=g[ge],b!=null))switch(ge){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,d));default:Jt(l,d,ge,b,g,null)}return;default:if(XS(d)){for(we in g)g.hasOwnProperty(we)&&(b=g[we],b!==void 0&&M2(l,d,we,b,g,void 0));return}}for(J in g)g.hasOwnProperty(J)&&(b=g[J],b!=null&&Jt(l,d,J,b,g,null))}function nK(l,d,g,b){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var S=null,O=null,U=null,J=null,ee=null,ge=null,we=null;for(be in g){var _e=g[be];if(g.hasOwnProperty(be)&&_e!=null)switch(be){case"checked":break;case"value":break;case"defaultValue":ee=_e;default:b.hasOwnProperty(be)||Jt(l,d,be,null,b,_e)}}for(var ye in b){var be=b[ye];if(_e=g[ye],b.hasOwnProperty(ye)&&(be!=null||_e!=null))switch(ye){case"type":O=be;break;case"name":S=be;break;case"checked":ge=be;break;case"defaultChecked":we=be;break;case"value":U=be;break;case"defaultValue":J=be;break;case"children":case"dangerouslySetInnerHTML":if(be!=null)throw Error(r(137,d));break;default:be!==_e&&Jt(l,d,ye,be,b,_e)}}Pd(l,U,J,ee,ge,we,O,S);return;case"select":be=U=J=ye=null;for(O in g)if(ee=g[O],g.hasOwnProperty(O)&&ee!=null)switch(O){case"value":break;case"multiple":be=ee;default:b.hasOwnProperty(O)||Jt(l,d,O,null,b,ee)}for(S in b)if(O=b[S],ee=g[S],b.hasOwnProperty(S)&&(O!=null||ee!=null))switch(S){case"value":ye=O;break;case"defaultValue":J=O;break;case"multiple":U=O;default:O!==ee&&Jt(l,d,S,O,b,ee)}d=J,g=U,b=be,ye!=null?Dd(l,!!g,ye,!1):!!b!=!!g&&(d!=null?Dd(l,!!g,d,!0):Dd(l,!!g,g?[]:"",!1));return;case"textarea":be=ye=null;for(J in g)if(S=g[J],g.hasOwnProperty(J)&&S!=null&&!b.hasOwnProperty(J))switch(J){case"value":break;case"children":break;default:Jt(l,d,J,null,b,S)}for(U in b)if(S=b[U],O=g[U],b.hasOwnProperty(U)&&(S!=null||O!=null))switch(U){case"value":ye=S;break;case"defaultValue":be=S;break;case"children":break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(r(91));break;default:S!==O&&Jt(l,d,U,S,b,O)}Q3(l,ye,be);return;case"option":for(var ft in g)if(ye=g[ft],g.hasOwnProperty(ft)&&ye!=null&&!b.hasOwnProperty(ft))switch(ft){case"selected":l.selected=!1;break;default:Jt(l,d,ft,null,b,ye)}for(ee in b)if(ye=b[ee],be=g[ee],b.hasOwnProperty(ee)&&ye!==be&&(ye!=null||be!=null))switch(ee){case"selected":l.selected=ye&&typeof ye!="function"&&typeof ye!="symbol";break;default:Jt(l,d,ee,ye,b,be)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var lt in g)ye=g[lt],g.hasOwnProperty(lt)&&ye!=null&&!b.hasOwnProperty(lt)&&Jt(l,d,lt,null,b,ye);for(ge in b)if(ye=b[ge],be=g[ge],b.hasOwnProperty(ge)&&ye!==be&&(ye!=null||be!=null))switch(ge){case"children":case"dangerouslySetInnerHTML":if(ye!=null)throw Error(r(137,d));break;default:Jt(l,d,ge,ye,b,be)}return;default:if(XS(d)){for(var Xt in g)ye=g[Xt],g.hasOwnProperty(Xt)&&ye!==void 0&&!b.hasOwnProperty(Xt)&&M2(l,d,Xt,void 0,b,ye);for(we in b)ye=b[we],be=g[we],!b.hasOwnProperty(we)||ye===be||ye===void 0&&be===void 0||M2(l,d,we,ye,b,be);return}}for(var ue in g)ye=g[ue],g.hasOwnProperty(ue)&&ye!=null&&!b.hasOwnProperty(ue)&&Jt(l,d,ue,null,b,ye);for(_e in b)ye=b[_e],be=g[_e],!b.hasOwnProperty(_e)||ye===be||ye==null&&be==null||Jt(l,d,_e,ye,b,be)}var I2=null,P2=null;function Sb(l){return l.nodeType===9?l:l.ownerDocument}function ek(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function tk(l,d){if(l===0)switch(d){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&d==="foreignObject"?0:l}function D2(l,d){return l==="textarea"||l==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.children=="bigint"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var L2=null;function rK(){var l=window.event;return l&&l.type==="popstate"?l===L2?!1:(L2=l,!0):(L2=null,!1)}var nk=typeof setTimeout=="function"?setTimeout:void 0,sK=typeof clearTimeout=="function"?clearTimeout:void 0,rk=typeof Promise=="function"?Promise:void 0,iK=typeof queueMicrotask=="function"?queueMicrotask:typeof rk<"u"?function(l){return rk.resolve(null).then(l).catch(oK)}:nk;function oK(l){setTimeout(function(){throw l})}function jl(l){return l==="head"}function sk(l,d){var g=d,b=0,S=0;do{var O=g.nextSibling;if(l.removeChild(g),O&&O.nodeType===8)if(g=O.data,g==="/$"){if(0<b&&8>b){g=b;var U=l.ownerDocument;if(g&1&&pp(U.documentElement),g&2&&pp(U.body),g&4)for(g=U.head,pp(g),U=g.firstChild;U;){var J=U.nextSibling,ee=U.nodeName;U[Uo]||ee==="SCRIPT"||ee==="STYLE"||ee==="LINK"&&U.rel.toLowerCase()==="stylesheet"||g.removeChild(U),U=J}}if(S===0){l.removeChild(O),Ep(d);return}S--}else g==="$"||g==="$?"||g==="$!"?S++:b=g.charCodeAt(0)-48;else b=0;g=O}while(g);Ep(d)}function F2(l){var d=l.firstChild;for(d&&d.nodeType===10&&(d=d.nextSibling);d;){var g=d;switch(d=d.nextSibling,g.nodeName){case"HTML":case"HEAD":case"BODY":F2(g),Yc(g);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(g.rel.toLowerCase()==="stylesheet")continue}l.removeChild(g)}}function aK(l,d,g,b){for(;l.nodeType===1;){var S=g;if(l.nodeName.toLowerCase()!==d.toLowerCase()){if(!b&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(b){if(!l[Uo])switch(d){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(O=l.getAttribute("rel"),O==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(O!==S.rel||l.getAttribute("href")!==(S.href==null||S.href===""?null:S.href)||l.getAttribute("crossorigin")!==(S.crossOrigin==null?null:S.crossOrigin)||l.getAttribute("title")!==(S.title==null?null:S.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(O=l.getAttribute("src"),(O!==(S.src==null?null:S.src)||l.getAttribute("type")!==(S.type==null?null:S.type)||l.getAttribute("crossorigin")!==(S.crossOrigin==null?null:S.crossOrigin))&&O&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(d==="input"&&l.type==="hidden"){var O=S.name==null?null:""+S.name;if(S.type==="hidden"&&l.getAttribute("name")===O)return l}else return l;if(l=Oi(l.nextSibling),l===null)break}return null}function lK(l,d,g){if(d==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!g||(l=Oi(l.nextSibling),l===null))return null;return l}function B2(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState==="complete"}function cK(l,d){var g=l.ownerDocument;if(l.data!=="$?"||g.readyState==="complete")d();else{var b=function(){d(),g.removeEventListener("DOMContentLoaded",b)};g.addEventListener("DOMContentLoaded",b),l._reactRetry=b}}function Oi(l){for(;l!=null;l=l.nextSibling){var d=l.nodeType;if(d===1||d===3)break;if(d===8){if(d=l.data,d==="$"||d==="$!"||d==="$?"||d==="F!"||d==="F")break;if(d==="/$")return null}}return l}var z2=null;function ik(l){l=l.previousSibling;for(var d=0;l;){if(l.nodeType===8){var g=l.data;if(g==="$"||g==="$!"||g==="$?"){if(d===0)return l;d--}else g==="/$"&&d++}l=l.previousSibling}return null}function ok(l,d,g){switch(d=Sb(g),l){case"html":if(l=d.documentElement,!l)throw Error(r(452));return l;case"head":if(l=d.head,!l)throw Error(r(453));return l;case"body":if(l=d.body,!l)throw Error(r(454));return l;default:throw Error(r(451))}}function pp(l){for(var d=l.attributes;d.length;)l.removeAttributeNode(d[0]);Yc(l)}var Ys=new Map,ak=new Set;function Eb(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var ia=I.d;I.d={f:uK,r:dK,D:fK,C:hK,L:mK,m:pK,X:yK,S:gK,M:bK};function uK(){var l=ia.f(),d=mb();return l||d}function dK(l){var d=Tn(l);d!==null&&d.tag===5&&d.type==="form"?O5(d):ia.r(l)}var mf=typeof document>"u"?null:document;function lk(l,d,g){var b=mf;if(b&&typeof d=="string"&&d){var S=Jr(d);S='link[rel="'+l+'"][href="'+S+'"]',typeof g=="string"&&(S+='[crossorigin="'+g+'"]'),ak.has(S)||(ak.add(S),l={rel:l,crossOrigin:g,href:d},b.querySelector(S)===null&&(d=b.createElement("link"),hr(d,"link",l),Fn(d),b.head.appendChild(d)))}}function fK(l){ia.D(l),lk("dns-prefetch",l,null)}function hK(l,d){ia.C(l,d),lk("preconnect",l,d)}function mK(l,d,g){ia.L(l,d,g);var b=mf;if(b&&l&&d){var S='link[rel="preload"][as="'+Jr(d)+'"]';d==="image"&&g&&g.imageSrcSet?(S+='[imagesrcset="'+Jr(g.imageSrcSet)+'"]',typeof g.imageSizes=="string"&&(S+='[imagesizes="'+Jr(g.imageSizes)+'"]')):S+='[href="'+Jr(l)+'"]';var O=S;switch(d){case"style":O=pf(l);break;case"script":O=gf(l)}Ys.has(O)||(l=f({rel:"preload",href:d==="image"&&g&&g.imageSrcSet?void 0:l,as:d},g),Ys.set(O,l),b.querySelector(S)!==null||d==="style"&&b.querySelector(gp(O))||d==="script"&&b.querySelector(yp(O))||(d=b.createElement("link"),hr(d,"link",l),Fn(d),b.head.appendChild(d)))}}function pK(l,d){ia.m(l,d);var g=mf;if(g&&l){var b=d&&typeof d.as=="string"?d.as:"script",S='link[rel="modulepreload"][as="'+Jr(b)+'"][href="'+Jr(l)+'"]',O=S;switch(b){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":O=gf(l)}if(!Ys.has(O)&&(l=f({rel:"modulepreload",href:l},d),Ys.set(O,l),g.querySelector(S)===null)){switch(b){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(g.querySelector(yp(O)))return}b=g.createElement("link"),hr(b,"link",l),Fn(b),g.head.appendChild(b)}}}function gK(l,d,g){ia.S(l,d,g);var b=mf;if(b&&l){var S=qo(b).hoistableStyles,O=pf(l);d=d||"default";var U=S.get(O);if(!U){var J={loading:0,preload:null};if(U=b.querySelector(gp(O)))J.loading=5;else{l=f({rel:"stylesheet",href:l,"data-precedence":d},g),(g=Ys.get(O))&&V2(l,g);var ee=U=b.createElement("link");Fn(ee),hr(ee,"link",l),ee._p=new Promise(function(ge,we){ee.onload=ge,ee.onerror=we}),ee.addEventListener("load",function(){J.loading|=1}),ee.addEventListener("error",function(){J.loading|=2}),J.loading|=4,Nb(U,d,b)}U={type:"stylesheet",instance:U,count:1,state:J},S.set(O,U)}}}function yK(l,d){ia.X(l,d);var g=mf;if(g&&l){var b=qo(g).hoistableScripts,S=gf(l),O=b.get(S);O||(O=g.querySelector(yp(S)),O||(l=f({src:l,async:!0},d),(d=Ys.get(S))&&U2(l,d),O=g.createElement("script"),Fn(O),hr(O,"link",l),g.head.appendChild(O)),O={type:"script",instance:O,count:1,state:null},b.set(S,O))}}function bK(l,d){ia.M(l,d);var g=mf;if(g&&l){var b=qo(g).hoistableScripts,S=gf(l),O=b.get(S);O||(O=g.querySelector(yp(S)),O||(l=f({src:l,async:!0,type:"module"},d),(d=Ys.get(S))&&U2(l,d),O=g.createElement("script"),Fn(O),hr(O,"link",l),g.head.appendChild(O)),O={type:"script",instance:O,count:1,state:null},b.set(S,O))}}function ck(l,d,g,b){var S=(S=de.current)?Eb(S):null;if(!S)throw Error(r(446));switch(l){case"meta":case"title":return null;case"style":return typeof g.precedence=="string"&&typeof g.href=="string"?(d=pf(g.href),g=qo(S).hoistableStyles,b=g.get(d),b||(b={type:"style",instance:null,count:0,state:null},g.set(d,b)),b):{type:"void",instance:null,count:0,state:null};case"link":if(g.rel==="stylesheet"&&typeof g.href=="string"&&typeof g.precedence=="string"){l=pf(g.href);var O=qo(S).hoistableStyles,U=O.get(l);if(U||(S=S.ownerDocument||S,U={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},O.set(l,U),(O=S.querySelector(gp(l)))&&!O._p&&(U.instance=O,U.state.loading=5),Ys.has(l)||(g={rel:"preload",as:"style",href:g.href,crossOrigin:g.crossOrigin,integrity:g.integrity,media:g.media,hrefLang:g.hrefLang,referrerPolicy:g.referrerPolicy},Ys.set(l,g),O||vK(S,l,g,U.state))),d&&b===null)throw Error(r(528,""));return U}if(d&&b!==null)throw Error(r(529,""));return null;case"script":return d=g.async,g=g.src,typeof g=="string"&&d&&typeof d!="function"&&typeof d!="symbol"?(d=gf(g),g=qo(S).hoistableScripts,b=g.get(d),b||(b={type:"script",instance:null,count:0,state:null},g.set(d,b)),b):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,l))}}function pf(l){return'href="'+Jr(l)+'"'}function gp(l){return'link[rel="stylesheet"]['+l+"]"}function uk(l){return f({},l,{"data-precedence":l.precedence,precedence:null})}function vK(l,d,g,b){l.querySelector('link[rel="preload"][as="style"]['+d+"]")?b.loading=1:(d=l.createElement("link"),b.preload=d,d.addEventListener("load",function(){return b.loading|=1}),d.addEventListener("error",function(){return b.loading|=2}),hr(d,"link",g),Fn(d),l.head.appendChild(d))}function gf(l){return'[src="'+Jr(l)+'"]'}function yp(l){return"script[async]"+l}function dk(l,d,g){if(d.count++,d.instance===null)switch(d.type){case"style":var b=l.querySelector('style[data-href~="'+Jr(g.href)+'"]');if(b)return d.instance=b,Fn(b),b;var S=f({},g,{"data-href":g.href,"data-precedence":g.precedence,href:null,precedence:null});return b=(l.ownerDocument||l).createElement("style"),Fn(b),hr(b,"style",S),Nb(b,g.precedence,l),d.instance=b;case"stylesheet":S=pf(g.href);var O=l.querySelector(gp(S));if(O)return d.state.loading|=4,d.instance=O,Fn(O),O;b=uk(g),(S=Ys.get(S))&&V2(b,S),O=(l.ownerDocument||l).createElement("link"),Fn(O);var U=O;return U._p=new Promise(function(J,ee){U.onload=J,U.onerror=ee}),hr(O,"link",b),d.state.loading|=4,Nb(O,g.precedence,l),d.instance=O;case"script":return O=gf(g.src),(S=l.querySelector(yp(O)))?(d.instance=S,Fn(S),S):(b=g,(S=Ys.get(O))&&(b=f({},g),U2(b,S)),l=l.ownerDocument||l,S=l.createElement("script"),Fn(S),hr(S,"link",b),l.head.appendChild(S),d.instance=S);case"void":return null;default:throw Error(r(443,d.type))}else d.type==="stylesheet"&&(d.state.loading&4)===0&&(b=d.instance,d.state.loading|=4,Nb(b,g.precedence,l));return d.instance}function Nb(l,d,g){for(var b=g.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),S=b.length?b[b.length-1]:null,O=S,U=0;U<b.length;U++){var J=b[U];if(J.dataset.precedence===d)O=J;else if(O!==S)break}O?O.parentNode.insertBefore(l,O.nextSibling):(d=g.nodeType===9?g.head:g,d.insertBefore(l,d.firstChild))}function V2(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.title==null&&(l.title=d.title)}function U2(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.integrity==null&&(l.integrity=d.integrity)}var _b=null;function fk(l,d,g){if(_b===null){var b=new Map,S=_b=new Map;S.set(g,b)}else S=_b,b=S.get(g),b||(b=new Map,S.set(g,b));if(b.has(l))return b;for(b.set(l,null),g=g.getElementsByTagName(l),S=0;S<g.length;S++){var O=g[S];if(!(O[Uo]||O[an]||l==="link"&&O.getAttribute("rel")==="stylesheet")&&O.namespaceURI!=="http://www.w3.org/2000/svg"){var U=O.getAttribute(d)||"";U=l+U;var J=b.get(U);J?J.push(O):b.set(U,[O])}}return b}function hk(l,d,g){l=l.ownerDocument||l,l.head.insertBefore(g,d==="title"?l.querySelector("head > title"):null)}function xK(l,d,g){if(g===1||d.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof d.precedence!="string"||typeof d.href!="string"||d.href==="")break;return!0;case"link":if(typeof d.rel!="string"||typeof d.href!="string"||d.href===""||d.onLoad||d.onError)break;switch(d.rel){case"stylesheet":return l=d.disabled,typeof d.precedence=="string"&&l==null;default:return!0}case"script":if(d.async&&typeof d.async!="function"&&typeof d.async!="symbol"&&!d.onLoad&&!d.onError&&d.src&&typeof d.src=="string")return!0}return!1}function mk(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}var bp=null;function wK(){}function SK(l,d,g){if(bp===null)throw Error(r(475));var b=bp;if(d.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(d.state.loading&4)===0){if(d.instance===null){var S=pf(g.href),O=l.querySelector(gp(S));if(O){l=O._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(b.count++,b=Cb.bind(b),l.then(b,b)),d.state.loading|=4,d.instance=O,Fn(O);return}O=l.ownerDocument||l,g=uk(g),(S=Ys.get(S))&&V2(g,S),O=O.createElement("link"),Fn(O);var U=O;U._p=new Promise(function(J,ee){U.onload=J,U.onerror=ee}),hr(O,"link",g),d.instance=O}b.stylesheets===null&&(b.stylesheets=new Map),b.stylesheets.set(d,l),(l=d.state.preload)&&(d.state.loading&3)===0&&(b.count++,d=Cb.bind(b),l.addEventListener("load",d),l.addEventListener("error",d))}}function EK(){if(bp===null)throw Error(r(475));var l=bp;return l.stylesheets&&l.count===0&&q2(l,l.stylesheets),0<l.count?function(d){var g=setTimeout(function(){if(l.stylesheets&&q2(l,l.stylesheets),l.unsuspend){var b=l.unsuspend;l.unsuspend=null,b()}},6e4);return l.unsuspend=d,function(){l.unsuspend=null,clearTimeout(g)}}:null}function Cb(){if(this.count--,this.count===0){if(this.stylesheets)q2(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var Ob=null;function q2(l,d){l.stylesheets=null,l.unsuspend!==null&&(l.count++,Ob=new Map,d.forEach(NK,l),Ob=null,Cb.call(l))}function NK(l,d){if(!(d.state.loading&4)){var g=Ob.get(l);if(g)var b=g.get(null);else{g=new Map,Ob.set(l,g);for(var S=l.querySelectorAll("link[data-precedence],style[data-precedence]"),O=0;O<S.length;O++){var U=S[O];(U.nodeName==="LINK"||U.getAttribute("media")!=="not all")&&(g.set(U.dataset.precedence,U),b=U)}b&&g.set(null,b)}S=d.instance,U=S.getAttribute("data-precedence"),O=g.get(U)||b,O===b&&g.set(null,S),g.set(U,S),this.count++,b=Cb.bind(this),S.addEventListener("load",b),S.addEventListener("error",b),O?O.parentNode.insertBefore(S,O.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(S,l.firstChild)),d.state.loading|=4}}var vp={$$typeof:C,Provider:null,Consumer:null,_currentValue:P,_currentValue2:P,_threadCount:0};function _K(l,d,g,b,S,O,U,J){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=al(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=al(0),this.hiddenUpdates=al(null),this.identifierPrefix=b,this.onUncaughtError=S,this.onCaughtError=O,this.onRecoverableError=U,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=J,this.incompleteTransitions=new Map}function pk(l,d,g,b,S,O,U,J,ee,ge,we,_e){return l=new _K(l,d,g,U,J,ee,ge,_e),d=1,O===!0&&(d|=24),O=ps(3,null,null,d),l.current=O,O.stateNode=l,d=_E(),d.refCount++,l.pooledCache=d,d.refCount++,O.memoizedState={element:b,isDehydrated:g,cache:d},AE(O),l}function gk(l){return l?(l=Wd,l):Wd}function yk(l,d,g,b,S,O){S=gk(S),b.context===null?b.context=S:b.pendingContext=S,b=pl(d),b.payload={element:g},O=O===void 0?null:O,O!==null&&(b.callback=O),g=gl(l,b,d),g!==null&&(xs(g,l,d),Jm(g,l,d))}function bk(l,d){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var g=l.retryLane;l.retryLane=g!==0&&g<d?g:d}}function H2(l,d){bk(l,d),(l=l.alternate)&&bk(l,d)}function vk(l){if(l.tag===13){var d=Hd(l,67108864);d!==null&&xs(d,l,67108864),H2(l,67108864)}}var jb=!0;function CK(l,d,g,b){var S=T.T;T.T=null;var O=I.p;try{I.p=2,W2(l,d,g,b)}finally{I.p=O,T.T=S}}function OK(l,d,g,b){var S=T.T;T.T=null;var O=I.p;try{I.p=8,W2(l,d,g,b)}finally{I.p=O,T.T=S}}function W2(l,d,g,b){if(jb){var S=G2(b);if(S===null)k2(l,d,b,Ab,g),wk(l,b);else if(AK(S,l,d,g,b))b.stopPropagation();else if(wk(l,b),d&4&&-1<jK.indexOf(l)){for(;S!==null;){var O=Tn(S);if(O!==null)switch(O.tag){case 3:if(O=O.stateNode,O.current.memoizedState.isDehydrated){var U=ur(O.pendingLanes);if(U!==0){var J=O;for(J.pendingLanes|=2,J.entangledLanes|=2;U;){var ee=1<<31-Ge(U);J.entanglements[1]|=ee,U&=~ee}ho(O),(Wt&6)===0&&(fb=Oe()+500,fp(0))}}break;case 13:J=Hd(O,2),J!==null&&xs(J,O,2),mb(),H2(O,2)}if(O=G2(b),O===null&&k2(l,d,b,Ab,g),O===S)break;S=O}S!==null&&b.stopPropagation()}else k2(l,d,b,null,g)}}function G2(l){return l=QS(l),Y2(l)}var Ab=null;function Y2(l){if(Ab=null,l=mt(l),l!==null){var d=i(l);if(d===null)l=null;else{var g=d.tag;if(g===13){if(l=o(d),l!==null)return l;l=null}else if(g===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;l=null}else d!==l&&(l=null)}}return Ab=l,null}function xk(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Me()){case Ie:return 2;case G:return 8;case re:case te:return 32;case he:return 268435456;default:return 32}default:return 32}}var J2=!1,Al=null,Tl=null,$l=null,xp=new Map,wp=new Map,Rl=[],jK="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function wk(l,d){switch(l){case"focusin":case"focusout":Al=null;break;case"dragenter":case"dragleave":Tl=null;break;case"mouseover":case"mouseout":$l=null;break;case"pointerover":case"pointerout":xp.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":wp.delete(d.pointerId)}}function Sp(l,d,g,b,S,O){return l===null||l.nativeEvent!==O?(l={blockedOn:d,domEventName:g,eventSystemFlags:b,nativeEvent:O,targetContainers:[S]},d!==null&&(d=Tn(d),d!==null&&vk(d)),l):(l.eventSystemFlags|=b,d=l.targetContainers,S!==null&&d.indexOf(S)===-1&&d.push(S),l)}function AK(l,d,g,b,S){switch(d){case"focusin":return Al=Sp(Al,l,d,g,b,S),!0;case"dragenter":return Tl=Sp(Tl,l,d,g,b,S),!0;case"mouseover":return $l=Sp($l,l,d,g,b,S),!0;case"pointerover":var O=S.pointerId;return xp.set(O,Sp(xp.get(O)||null,l,d,g,b,S)),!0;case"gotpointercapture":return O=S.pointerId,wp.set(O,Sp(wp.get(O)||null,l,d,g,b,S)),!0}return!1}function Sk(l){var d=mt(l.target);if(d!==null){var g=i(d);if(g!==null){if(d=g.tag,d===13){if(d=o(g),d!==null){l.blockedOn=d,Si(l.priority,function(){if(g.tag===13){var b=vs();b=Wc(b);var S=Hd(g,b);S!==null&&xs(S,g,b),H2(g,b)}});return}}else if(d===3&&g.stateNode.current.memoizedState.isDehydrated){l.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}l.blockedOn=null}function Tb(l){if(l.blockedOn!==null)return!1;for(var d=l.targetContainers;0<d.length;){var g=G2(l.nativeEvent);if(g===null){g=l.nativeEvent;var b=new g.constructor(g.type,g);KS=b,g.target.dispatchEvent(b),KS=null}else return d=Tn(g),d!==null&&vk(d),l.blockedOn=g,!1;d.shift()}return!0}function Ek(l,d,g){Tb(l)&&g.delete(d)}function TK(){J2=!1,Al!==null&&Tb(Al)&&(Al=null),Tl!==null&&Tb(Tl)&&(Tl=null),$l!==null&&Tb($l)&&($l=null),xp.forEach(Ek),wp.forEach(Ek)}function $b(l,d){l.blockedOn===d&&(l.blockedOn=null,J2||(J2=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,TK)))}var Rb=null;function Nk(l){Rb!==l&&(Rb=l,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Rb===l&&(Rb=null);for(var d=0;d<l.length;d+=3){var g=l[d],b=l[d+1],S=l[d+2];if(typeof b!="function"){if(Y2(b||g)===null)continue;break}var O=Tn(g);O!==null&&(l.splice(d,3),d-=3,YE(O,{pending:!0,data:S,method:g.method,action:b},b,S))}}))}function Ep(l){function d(ee){return $b(ee,l)}Al!==null&&$b(Al,l),Tl!==null&&$b(Tl,l),$l!==null&&$b($l,l),xp.forEach(d),wp.forEach(d);for(var g=0;g<Rl.length;g++){var b=Rl[g];b.blockedOn===l&&(b.blockedOn=null)}for(;0<Rl.length&&(g=Rl[0],g.blockedOn===null);)Sk(g),g.blockedOn===null&&Rl.shift();if(g=(l.ownerDocument||l).$$reactFormReplay,g!=null)for(b=0;b<g.length;b+=3){var S=g[b],O=g[b+1],U=S[Ln]||null;if(typeof O=="function")U||Nk(g);else if(U){var J=null;if(O&&O.hasAttribute("formAction")){if(S=O,U=O[Ln]||null)J=U.formAction;else if(Y2(S)!==null)continue}else J=U.action;typeof J=="function"?g[b+1]=J:(g.splice(b,3),b-=3),Nk(g)}}}function X2(l){this._internalRoot=l}kb.prototype.render=X2.prototype.render=function(l){var d=this._internalRoot;if(d===null)throw Error(r(409));var g=d.current,b=vs();yk(g,b,l,d,null,null)},kb.prototype.unmount=X2.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var d=l.containerInfo;yk(l.current,2,null,l,null,null),mb(),d[Ei]=null}};function kb(l){this._internalRoot=l}kb.prototype.unstable_scheduleHydration=function(l){if(l){var d=mn();l={blockedOn:null,target:l,priority:d};for(var g=0;g<Rl.length&&d!==0&&d<Rl[g].priority;g++);Rl.splice(g,0,l),g===0&&Sk(l)}};var _k=t.version;if(_k!=="19.1.0")throw Error(r(527,_k,"19.1.0"));I.findDOMNode=function(l){var d=l._reactInternals;if(d===void 0)throw typeof l.render=="function"?Error(r(188)):(l=Object.keys(l).join(","),Error(r(268,l)));return l=c(d),l=l!==null?u(l):null,l=l===null?null:l.stateNode,l};var $K={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:T,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mb=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mb.isDisabled&&Mb.supportsFiber)try{le=Mb.inject($K),xe=Mb}catch{}}return _p.createRoot=function(l,d){if(!s(l))throw Error(r(299));var g=!1,b="",S=z5,O=V5,U=U5,J=null;return d!=null&&(d.unstable_strictMode===!0&&(g=!0),d.identifierPrefix!==void 0&&(b=d.identifierPrefix),d.onUncaughtError!==void 0&&(S=d.onUncaughtError),d.onCaughtError!==void 0&&(O=d.onCaughtError),d.onRecoverableError!==void 0&&(U=d.onRecoverableError),d.unstable_transitionCallbacks!==void 0&&(J=d.unstable_transitionCallbacks)),d=pk(l,1,!1,null,null,g,b,S,O,U,J,null),l[Ei]=d.current,R2(l),new X2(d)},_p.hydrateRoot=function(l,d,g){if(!s(l))throw Error(r(299));var b=!1,S="",O=z5,U=V5,J=U5,ee=null,ge=null;return g!=null&&(g.unstable_strictMode===!0&&(b=!0),g.identifierPrefix!==void 0&&(S=g.identifierPrefix),g.onUncaughtError!==void 0&&(O=g.onUncaughtError),g.onCaughtError!==void 0&&(U=g.onCaughtError),g.onRecoverableError!==void 0&&(J=g.onRecoverableError),g.unstable_transitionCallbacks!==void 0&&(ee=g.unstable_transitionCallbacks),g.formState!==void 0&&(ge=g.formState)),d=pk(l,1,!0,d,g??null,b,S,O,U,J,ee,ge),d.context=gk(null),g=d.current,b=vs(),b=Wc(b),S=pl(b),S.callback=null,gl(g,S,b),g=b,d.current.lanes=g,Vo(d,g),ho(d),l[Ei]=d.current,R2(l),new kb(d)},_p.version="19.1.0",_p}var Dk;function UK(){if(Dk)return eN.exports;Dk=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),eN.exports=VK(),eN.exports}var qK=UK(),Jl=function(){return Jl=Object.assign||function(t){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Jl.apply(this,arguments)};function HK(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function WK(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,i;r<s;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}var Ov="right-scroll-bar-position",jv="width-before-scroll-bar",GK="with-scroll-bars-hidden",YK="--removed-body-scroll-bar-size";function sN(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function JK(e,t){var n=w.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=t,n.facade}var XK=typeof window<"u"?w.useLayoutEffect:w.useEffect,Lk=new WeakMap;function KK(e,t){var n=JK(null,function(r){return e.forEach(function(s){return sN(s,r)})});return XK(function(){var r=Lk.get(n);if(r){var s=new Set(r),i=new Set(e),o=n.current;s.forEach(function(a){i.has(a)||sN(a,null)}),i.forEach(function(a){s.has(a)||sN(a,o)})}Lk.set(n,e)},[e]),n}var nx=function(){return nx=Object.assign||function(t){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},nx.apply(this,arguments)};function QK(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function ZK(e){return e}function eQ(e,t){t===void 0&&(t=ZK);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(i){var o=t(i,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(a){return i(a)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(i),o=n}var c=function(){var f=o;o=[],f.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(f){o.push(f),u()},filter:function(f){return o=o.filter(f),n}}}};return s}function tQ(e){e===void 0&&(e={});var t=eQ(null);return t.options=nx({async:!0,ssr:!1},e),t}var U8=function(e){var t=e.sideCar,n=QK(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return w.createElement(r,nx({},n))};U8.isSideCarExport=!0;function nQ(e,t){return e.useMedium(t),U8}var q8=tQ(),iN=function(){},Bw=w.forwardRef(function(e,t){var n=w.useRef(null),r=w.useState({onScrollCapture:iN,onWheelCapture:iN,onTouchMoveCapture:iN}),s=r[0],i=r[1],o=e.forwardProps,a=e.children,c=e.className,u=e.removeScrollBar,f=e.enabled,h=e.shards,p=e.sideCar,y=e.noIsolation,v=e.inert,x=e.allowPinchZoom,E=e.as,N=E===void 0?"div":E,_=e.gapMode,C=HK(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),j=p,A=KK([n,t]),$=Jl(Jl({},C),s);return w.createElement(w.Fragment,null,f&&w.createElement(j,{sideCar:q8,removeScrollBar:u,shards:h,noIsolation:y,inert:v,setCallbacks:i,allowPinchZoom:!!x,lockRef:n,gapMode:_}),o?w.cloneElement(w.Children.only(a),Jl(Jl({},$),{ref:A})):w.createElement(N,Jl({},$,{className:c,ref:A}),a))});Bw.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Bw.classNames={fullWidth:jv,zeroRight:Ov};var rQ=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function sQ(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=rQ();return t&&e.setAttribute("nonce",t),e}function iQ(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function oQ(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var aQ=function(){var e=0,t=null;return{add:function(n){e==0&&(t=sQ())&&(iQ(t,n),oQ(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},lQ=function(){var e=aQ();return function(t,n){w.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},H8=function(){var e=lQ(),t=function(n){var r=n.styles,s=n.dynamic;return e(r,s),null};return t},cQ={left:0,top:0,right:0,gap:0},oN=function(e){return parseInt(e||"",10)||0},uQ=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[oN(n),oN(r),oN(s)]},dQ=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return cQ;var t=uQ(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},fQ=H8(),Hf="data-scroll-locked",hQ=function(e,t,n,r){var s=e.left,i=e.top,o=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(GK,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Hf,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Ov,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(jv,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Ov," .").concat(Ov,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(jv," .").concat(jv,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Hf,`] {
    `).concat(YK,": ").concat(a,`px;
  }
`)},Fk=function(){var e=parseInt(document.body.getAttribute(Hf)||"0",10);return isFinite(e)?e:0},mQ=function(){w.useEffect(function(){return document.body.setAttribute(Hf,(Fk()+1).toString()),function(){var e=Fk()-1;e<=0?document.body.removeAttribute(Hf):document.body.setAttribute(Hf,e.toString())}},[])},pQ=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,s=r===void 0?"margin":r;mQ();var i=w.useMemo(function(){return dQ(s)},[s]);return w.createElement(fQ,{styles:hQ(i,!t,s,n?"":"!important")})},dC=!1;if(typeof window<"u")try{var Ib=Object.defineProperty({},"passive",{get:function(){return dC=!0,!0}});window.addEventListener("test",Ib,Ib),window.removeEventListener("test",Ib,Ib)}catch{dC=!1}var yf=dC?{passive:!1}:!1,gQ=function(e){return e.tagName==="TEXTAREA"},W8=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!gQ(e)&&n[t]==="visible")},yQ=function(e){return W8(e,"overflowY")},bQ=function(e){return W8(e,"overflowX")},Bk=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=G8(e,r);if(s){var i=Y8(e,r),o=i[1],a=i[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},vQ=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},xQ=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},G8=function(e,t){return e==="v"?yQ(t):bQ(t)},Y8=function(e,t){return e==="v"?vQ(t):xQ(t)},wQ=function(e,t){return e==="h"&&t==="rtl"?-1:1},SQ=function(e,t,n,r,s){var i=wQ(e,window.getComputedStyle(t).direction),o=i*r,a=n.target,c=t.contains(a),u=!1,f=o>0,h=0,p=0;do{var y=Y8(e,a),v=y[0],x=y[1],E=y[2],N=x-E-i*v;(v||N)&&G8(e,a)&&(h+=N,p+=v),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!c&&a!==document.body||c&&(t.contains(a)||t===a));return(f&&Math.abs(h)<1||!f&&Math.abs(p)<1)&&(u=!0),u},Pb=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},zk=function(e){return[e.deltaX,e.deltaY]},Vk=function(e){return e&&"current"in e?e.current:e},EQ=function(e,t){return e[0]===t[0]&&e[1]===t[1]},NQ=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},_Q=0,bf=[];function CQ(e){var t=w.useRef([]),n=w.useRef([0,0]),r=w.useRef(),s=w.useState(_Q++)[0],i=w.useState(H8)[0],o=w.useRef(e);w.useEffect(function(){o.current=e},[e]),w.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var x=WK([e.lockRef.current],(e.shards||[]).map(Vk),!0).filter(Boolean);return x.forEach(function(E){return E.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),x.forEach(function(E){return E.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var a=w.useCallback(function(x,E){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!o.current.allowPinchZoom;var N=Pb(x),_=n.current,C="deltaX"in x?x.deltaX:_[0]-N[0],j="deltaY"in x?x.deltaY:_[1]-N[1],A,$=x.target,k=Math.abs(C)>Math.abs(j)?"h":"v";if("touches"in x&&k==="h"&&$.type==="range")return!1;var R=Bk(k,$);if(!R)return!0;if(R?A=k:(A=k==="v"?"h":"v",R=Bk(k,$)),!R)return!1;if(!r.current&&"changedTouches"in x&&(C||j)&&(r.current=A),!A)return!0;var B=r.current||A;return SQ(B,E,x,B==="h"?C:j)},[]),c=w.useCallback(function(x){var E=x;if(!(!bf.length||bf[bf.length-1]!==i)){var N="deltaY"in E?zk(E):Pb(E),_=t.current.filter(function(A){return A.name===E.type&&(A.target===E.target||E.target===A.shadowParent)&&EQ(A.delta,N)})[0];if(_&&_.should){E.cancelable&&E.preventDefault();return}if(!_){var C=(o.current.shards||[]).map(Vk).filter(Boolean).filter(function(A){return A.contains(E.target)}),j=C.length>0?a(E,C[0]):!o.current.noIsolation;j&&E.cancelable&&E.preventDefault()}}},[]),u=w.useCallback(function(x,E,N,_){var C={name:x,delta:E,target:N,should:_,shadowParent:OQ(N)};t.current.push(C),setTimeout(function(){t.current=t.current.filter(function(j){return j!==C})},1)},[]),f=w.useCallback(function(x){n.current=Pb(x),r.current=void 0},[]),h=w.useCallback(function(x){u(x.type,zk(x),x.target,a(x,e.lockRef.current))},[]),p=w.useCallback(function(x){u(x.type,Pb(x),x.target,a(x,e.lockRef.current))},[]);w.useEffect(function(){return bf.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:p}),document.addEventListener("wheel",c,yf),document.addEventListener("touchmove",c,yf),document.addEventListener("touchstart",f,yf),function(){bf=bf.filter(function(x){return x!==i}),document.removeEventListener("wheel",c,yf),document.removeEventListener("touchmove",c,yf),document.removeEventListener("touchstart",f,yf)}},[]);var y=e.removeScrollBar,v=e.inert;return w.createElement(w.Fragment,null,v?w.createElement(i,{styles:NQ(s)}):null,y?w.createElement(pQ,{gapMode:e.gapMode}):null)}function OQ(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const jQ=nQ(q8,CQ);var rx=w.forwardRef(function(e,t){return w.createElement(Bw,Jl({},e,{ref:t,sideCar:jQ}))});rx.classNames=Bw.classNames;function Co(e){return Object.keys(e)}function aN(e){return e&&typeof e=="object"&&!Array.isArray(e)}function Vj(e,t){const n={...e},r=t;return aN(e)&&aN(t)&&Object.keys(t).forEach(s=>{aN(r[s])&&s in e?n[s]=Vj(n[s],r[s]):n[s]=r[s]}),n}function AQ(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function TQ(e){var t;return typeof e!="string"||!e.includes("var(--mantine-scale)")?e:(t=e.match(/^calc\((.*?)\)$/))==null?void 0:t[1].split("*")[0].trim()}function $Q(e){const t=TQ(e);return typeof t=="number"?t:typeof t=="string"?t.includes("calc")||t.includes("var")?t:t.includes("px")?Number(t.replace("px","")):t.includes("rem")?Number(t.replace("rem",""))*16:t.includes("em")?Number(t.replace("em",""))*16:Number(t):NaN}function lN(e){return e==="0rem"?"0rem":`calc(${e} * var(--mantine-scale))`}function J8(e,{shouldScale:t=!1}={}){function n(r){if(r===0||r==="0")return`0${e}`;if(typeof r=="number"){const s=`${r/16}${e}`;return t?lN(s):s}if(typeof r=="string"){if(r===""||r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map(i=>n(i)).join(",");if(r.includes(" "))return r.split(" ").map(i=>n(i)).join(" ");if(r.includes(e))return t?lN(r):r;const s=r.replace("px","");if(!Number.isNaN(Number(s))){const i=`${Number(s)/16}${e}`;return t?lN(i):i}}return r}return n}const Te=J8("rem",{shouldScale:!0}),Uk=J8("em");function Uj(e){return Object.keys(e).reduce((t,n)=>(e[n]!==void 0&&(t[n]=e[n]),t),{})}function X8(e){if(typeof e=="number")return!0;if(typeof e=="string"){if(e.startsWith("calc(")||e.startsWith("var(")||e.includes(" ")&&e.trim()!=="")return!0;const t=/^[+-]?[0-9]+(\.[0-9]+)?(px|em|rem|ex|ch|lh|rlh|vw|vh|vmin|vmax|vb|vi|svw|svh|lvw|lvh|dvw|dvh|cm|mm|in|pt|pc|q|cqw|cqh|cqi|cqb|cqmin|cqmax|%)?$/;return e.trim().split(/\s+/).every(r=>t.test(r))}return!1}function Tc(e){return Array.isArray(e)||e===null?!1:typeof e=="object"?e.type!==w.Fragment:!1}function Ya(e){const t=w.createContext(null);return[({children:s,value:i})=>m.jsx(t.Provider,{value:i,children:s}),()=>{const s=w.useContext(t);if(s===null)throw new Error(e);return s}]}function fd(e=null){const t=w.createContext(e);return[({children:s,value:i})=>m.jsx(t.Provider,{value:i,children:s}),()=>w.useContext(t)]}function qk(e,t){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(t);return`${e}-${n}`}}function sx(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}function RQ(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].disabled)return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].disabled)return r}return e}function kQ(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].disabled)return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].disabled)return r}return e}function MQ(e,t,n){return sx(e,n)===sx(t,n)}function K8({parentSelector:e,siblingSelector:t,onKeyDown:n,loop:r=!0,activateOnFocus:s=!1,dir:i="rtl",orientation:o}){return a=>{var v;n==null||n(a);const c=Array.from(((v=sx(a.currentTarget,e))==null?void 0:v.querySelectorAll(t))||[]).filter(x=>MQ(a.currentTarget,x,e)),u=c.findIndex(x=>a.currentTarget===x),f=kQ(u,c,r),h=RQ(u,c,r),p=i==="rtl"?h:f,y=i==="rtl"?f:h;switch(a.key){case"ArrowRight":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),c[p].focus(),s&&c[p].click());break}case"ArrowLeft":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),c[y].focus(),s&&c[y].click());break}case"ArrowUp":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),c[h].focus(),s&&c[h].click());break}case"ArrowDown":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),c[f].focus(),s&&c[f].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!c[0].disabled&&c[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const x=c.length-1;!c[x].disabled&&c[x].focus();break}}}}const IQ={app:100,modal:200,popover:300,overlay:400,max:9999};function to(e){return IQ[e]}const fC=()=>{};function PQ(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||fC:n=>{var r;n.key==="Escape"&&(e(n),(r=t.onTrigger)==null||r.call(t))}}function Mt(e,t="size",n=!0){if(e!==void 0)return X8(e)?n?Te(e):e:`var(--${t}-${e})`}function qj(e){return Mt(e,"mantine-spacing")}function Qn(e){return e===void 0?"var(--mantine-radius-default)":Mt(e,"mantine-radius")}function qr(e){return Mt(e,"mantine-font-size")}function Hj(e){if(e)return Mt(e,"mantine-shadow",!1)}function Eo(e,t){return n=>{e==null||e(n),t==null||t(n)}}function DQ(e,t,n){var r;return n?Array.from(((r=sx(n,t))==null?void 0:r.querySelectorAll(e))||[]).findIndex(s=>s===n):null}function LQ(){const[e,t]=w.useState(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}function Ca(e,t,n){return t===void 0&&n===void 0?e:t!==void 0&&n===void 0?Math.max(e,t):Math.min(t===void 0&&n!==void 0?e:Math.max(e,t),n)}function Wf(e="mantine-"){return`${e}${Math.random().toString(36).slice(2,11)}`}function Su(e){const t=w.useRef(e);return w.useEffect(()=>{t.current=e}),w.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}const FQ=()=>{};function zw(e,t){const n=typeof t=="number"?t:t.delay,r=typeof t=="number"?!1:t.flushOnUnmount,s=Su(e),i=w.useRef(0),o=Object.assign(w.useCallback((...a)=>{window.clearTimeout(i.current);const c=()=>{i.current!==0&&(i.current=0,s(...a))};o.flush=c,i.current=window.setTimeout(c,n)},[s,n]),{flush:FQ});return w.useEffect(()=>()=>{window.clearTimeout(i.current),r&&o.flush()},[o,r]),o}const Hk=["mousedown","touchstart"];function BQ(e,t,n){const r=w.useRef(null);return w.useEffect(()=>{const s=i=>{const{target:o}=i??{};if(Array.isArray(n)){const a=(o==null?void 0:o.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(o)&&o.tagName!=="HTML";n.every(u=>!!u&&!i.composedPath().includes(u))&&!a&&e()}else r.current&&!r.current.contains(o)&&e()};return(t||Hk).forEach(i=>document.addEventListener(i,s)),()=>{(t||Hk).forEach(i=>document.removeEventListener(i,s))}},[r,e,n]),r}function zQ(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch{return e.addListener(t),()=>e.removeListener(t)}}function VQ(e,t){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function UQ(e,t,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,s]=w.useState(n?t:VQ(e)),i=w.useRef(null);return w.useEffect(()=>{if("matchMedia"in window)return i.current=window.matchMedia(e),s(i.current.matches),zQ(i.current,o=>s(o.matches))},[e]),r}const Kh=typeof document<"u"?w.useLayoutEffect:w.useEffect;function Da(e,t){const n=w.useRef(!1);w.useEffect(()=>()=>{n.current=!1},[]),w.useEffect(()=>{if(n.current)return e();n.current=!0},t)}function Q8({opened:e,shouldReturnFocus:t=!0}){const n=w.useRef(null),r=()=>{var s;n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&((s=n.current)==null||s.focus({preventScroll:!0}))};return Da(()=>{let s=-1;const i=o=>{o.key==="Tab"&&window.clearTimeout(s)};return document.addEventListener("keydown",i),e?n.current=document.activeElement:t&&(s=window.setTimeout(r,10)),()=>{window.clearTimeout(s),document.removeEventListener("keydown",i)}},[e,t]),r}const qQ=/input|select|textarea|button|object/,Z8="a, input, select, textarea, button, object, [tabindex]";function HQ(e){return e.style.display==="none"}function WQ(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let n=e;for(;n&&!(n===document.body||n.nodeType===11);){if(HQ(n))return!1;n=n.parentNode}return!0}function e7(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function hC(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN(e7(e));return(qQ.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&WQ(e)}function t7(e){const t=e7(e);return(Number.isNaN(t)||t>=0)&&hC(e)}function GQ(e){return Array.from(e.querySelectorAll(Z8)).filter(t7)}function YQ(e,t){const n=GQ(e);if(!n.length){t.preventDefault();return}const r=n[t.shiftKey?0:n.length-1],s=e.getRootNode();let i=r===s.activeElement||e===s.activeElement;const o=s.activeElement;if(o.tagName==="INPUT"&&o.getAttribute("type")==="radio"&&(i=n.filter(f=>f.getAttribute("type")==="radio"&&f.getAttribute("name")===o.getAttribute("name")).includes(r)),!i)return;t.preventDefault();const c=n[t.shiftKey?n.length-1:0];c&&c.focus()}function JQ(e=!0){const t=w.useRef(null),n=s=>{let i=s.querySelector("[data-autofocus]");if(!i){const o=Array.from(s.querySelectorAll(Z8));i=o.find(t7)||o.find(hC)||null,!i&&hC(s)&&(i=s)}i&&i.focus({preventScroll:!0})},r=w.useCallback(s=>{e&&s!==null&&t.current!==s&&(s?(setTimeout(()=>{s.getRootNode()&&n(s)}),t.current=s):t.current=null)},[e]);return w.useEffect(()=>{if(!e)return;t.current&&setTimeout(()=>n(t.current));const s=i=>{i.key==="Tab"&&t.current&&YQ(t.current,i)};return document.addEventListener("keydown",s),()=>document.removeEventListener("keydown",s)},[e]),r}const XQ=e=>(e+1)%1e6;function KQ(){const[,e]=w.useReducer(XQ,0);return e}const QQ=je.useId||(()=>{});function ZQ(){const e=QQ();return e?`mantine-${e.replace(/:/g,"")}`:""}function hi(e){const t=ZQ(),[n,r]=w.useState(t);return Kh(()=>{r(Wf())},[]),typeof e=="string"?e:typeof window>"u"?t:n}function eZ(e,t,n){w.useEffect(()=>(window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n)),[e,t])}function ix(e,t){if(typeof e=="function")return e(t);typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function tZ(...e){const t=new Map;return n=>{if(e.forEach(r=>{const s=ix(r,n);s&&t.set(r,s)}),t.size>0)return()=>{e.forEach(r=>{const s=t.get(r);s?s():ix(r,null)}),t.clear()}}}function jn(...e){return w.useCallback(tZ(...e),e)}function nZ(e,t,n="ltr"){const r=w.useRef(null),s=w.useRef(!1),i=w.useRef(!1),o=w.useRef(0),[a,c]=w.useState(!1);return w.useEffect(()=>{s.current=!0},[]),w.useEffect(()=>{const u=r.current,f=({x:C,y:j})=>{cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{if(s.current&&u){u.style.userSelect="none";const A=u.getBoundingClientRect();if(A.width&&A.height){const $=Ca((C-A.left)/A.width,0,1);e({x:n==="ltr"?$:1-$,y:Ca((j-A.top)/A.height,0,1)})}}})},h=()=>{document.addEventListener("mousemove",E),document.addEventListener("mouseup",v),document.addEventListener("touchmove",_),document.addEventListener("touchend",v)},p=()=>{document.removeEventListener("mousemove",E),document.removeEventListener("mouseup",v),document.removeEventListener("touchmove",_),document.removeEventListener("touchend",v)},y=()=>{!i.current&&s.current&&(i.current=!0,typeof(t==null?void 0:t.onScrubStart)=="function"&&t.onScrubStart(),c(!0),h())},v=()=>{i.current&&s.current&&(i.current=!1,c(!1),p(),setTimeout(()=>{typeof(t==null?void 0:t.onScrubEnd)=="function"&&t.onScrubEnd()},0))},x=C=>{y(),C.preventDefault(),E(C)},E=C=>f({x:C.clientX,y:C.clientY}),N=C=>{C.cancelable&&C.preventDefault(),y(),_(C)},_=C=>{C.cancelable&&C.preventDefault(),f({x:C.changedTouches[0].clientX,y:C.changedTouches[0].clientY})};return u==null||u.addEventListener("mousedown",x),u==null||u.addEventListener("touchstart",N,{passive:!1}),()=>{u&&(u.removeEventListener("mousedown",x),u.removeEventListener("touchstart",N))}},[n,e]),{ref:r,active:a}}function cs({value:e,defaultValue:t,finalValue:n,onChange:r=()=>{}}){const[s,i]=w.useState(t!==void 0?t:n),o=(a,...c)=>{i(a),r==null||r(a,...c)};return e!==void 0?[e,r,!0]:[s,o,!1]}function Wj(e,t){return UQ("(prefers-reduced-motion: reduce)",e,t)}function rZ(e,t,n={autoInvoke:!1}){const r=w.useRef(null),s=w.useCallback((...o)=>{r.current||(r.current=window.setTimeout(()=>{e(o),r.current=null},t))},[t]),i=w.useCallback(()=>{r.current&&(window.clearTimeout(r.current),r.current=null)},[]);return w.useEffect(()=>(n.autoInvoke&&s(),i),[i,s]),{start:s,clear:i}}function sZ(e){const t=w.useRef(void 0);return w.useEffect(()=>{t.current=e},[e]),t.current}function iZ(e,t,n){const r=w.useRef(null),s=w.useRef(null);return w.useEffect(()=>{const i=typeof n=="function"?n():n;return(i||s.current)&&(r.current=new MutationObserver(e),r.current.observe(i||s.current,t)),()=>{var o;(o=r.current)==null||o.disconnect()}},[e,t]),s}function oZ(){const[e,t]=w.useState(!1);return w.useEffect(()=>t(!0),[]),e}function aZ(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}function lZ(e){function t(r){const s=Object.keys(r).reduce((i,o)=>(i[`${e}:${o}`]=a=>r[o](a.detail),i),{});Kh(()=>(Object.keys(s).forEach(i=>{window.removeEventListener(i,s[i]),window.addEventListener(i,s[i])}),()=>Object.keys(s).forEach(i=>{window.removeEventListener(i,s[i])})),[s])}function n(r){return(...s)=>aZ(`${e}:${String(r)}`,s[0])}return[t,n]}var cZ={};function n7(){return typeof process<"u"&&cZ?"production":"development"}function Wk(e,t){return t.length===0?e:t.reduce((n,r)=>Math.abs(r-e)<Math.abs(n-e)?r:n)}function Vw(e){var n;const t=je.version;return typeof je.version!="string"||t.startsWith("18.")?e==null?void 0:e.ref:(n=e==null?void 0:e.props)==null?void 0:n.ref}function r7(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=r7(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function yn(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=r7(e))&&(r&&(r+=" "),r+=t);return r}const uZ={};function dZ(e){const t={};return e.forEach(n=>{Object.entries(n).forEach(([r,s])=>{t[r]?t[r]=yn(t[r],s):t[r]=s})}),t}function Uw({theme:e,classNames:t,props:n,stylesCtx:r}){const i=(Array.isArray(t)?t:[t]).map(o=>typeof o=="function"?o(e,n,r):o||uZ);return dZ(i)}function ox({theme:e,styles:t,props:n,stylesCtx:r}){return(Array.isArray(t)?t:[t]).reduce((i,o)=>typeof o=="function"?{...i,...o(e,n,r)}:{...i,...o},{})}const s7=w.createContext(null);function $c(){const e=w.useContext(s7);if(!e)throw new Error("[@mantine/core] MantineProvider was not found in tree");return e}function fZ(){return $c().cssVariablesResolver}function hZ(){return $c().classNamesPrefix}function Gj(){return $c().getStyleNonce}function mZ(){return $c().withStaticClasses}function pZ(){return $c().headless}function gZ(){var e;return(e=$c().stylesTransform)==null?void 0:e.sx}function yZ(){var e;return(e=$c().stylesTransform)==null?void 0:e.styles}function i7(){return $c().env||"default"}function bZ(e){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(e)}function vZ(e){let t=e.replace("#","");if(t.length===3){const o=t.split("");t=[o[0],o[0],o[1],o[1],o[2],o[2]].join("")}if(t.length===8){const o=parseInt(t.slice(6,8),16)/255;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:o}}const n=parseInt(t,16),r=n>>16&255,s=n>>8&255,i=n&255;return{r,g:s,b:i,a:1}}function xZ(e){const[t,n,r,s]=e.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:t,g:n,b:r,a:s||1}}function wZ(e){const t=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=e.match(t);if(!n)return{r:0,g:0,b:0,a:1};const r=parseInt(n[1],10),s=parseInt(n[2],10)/100,i=parseInt(n[3],10)/100,o=n[5]?parseFloat(n[5]):void 0,a=(1-Math.abs(2*i-1))*s,c=r/60,u=a*(1-Math.abs(c%2-1)),f=i-a/2;let h,p,y;return c>=0&&c<1?(h=a,p=u,y=0):c>=1&&c<2?(h=u,p=a,y=0):c>=2&&c<3?(h=0,p=a,y=u):c>=3&&c<4?(h=0,p=u,y=a):c>=4&&c<5?(h=u,p=0,y=a):(h=a,p=0,y=u),{r:Math.round((h+f)*255),g:Math.round((p+f)*255),b:Math.round((y+f)*255),a:o||1}}function Yj(e){return bZ(e)?vZ(e):e.startsWith("rgb")?xZ(e):e.startsWith("hsl")?wZ(e):{r:0,g:0,b:0,a:1}}function Db(e,t){if(e.startsWith("var("))return`color-mix(in srgb, ${e}, black ${t*100}%)`;const{r:n,g:r,b:s,a:i}=Yj(e),o=1-t,a=c=>Math.round(c*o);return`rgba(${a(n)}, ${a(r)}, ${a(s)}, ${i})`}function Cg(e,t){return typeof e.primaryShade=="number"?e.primaryShade:t==="dark"?e.primaryShade.dark:e.primaryShade.light}function cN(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function SZ(e){const t=e.match(/oklch\((.*?)%\s/);return t?parseFloat(t[1]):null}function EZ(e){if(e.startsWith("oklch("))return(SZ(e)||0)/100;const{r:t,g:n,b:r}=Yj(e),s=t/255,i=n/255,o=r/255,a=cN(s),c=cN(i),u=cN(o);return .2126*a+.7152*c+.0722*u}function Cp(e,t=.179){return e.startsWith("var(")?!1:EZ(e)>t}function Rc({color:e,theme:t,colorScheme:n}){if(typeof e!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof e}`);if(e==="bright")return{color:e,value:n==="dark"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:Cp(n==="dark"?t.white:t.black,t.luminanceThreshold),variable:"--mantine-color-bright"};if(e==="dimmed")return{color:e,value:n==="dark"?t.colors.dark[2]:t.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:Cp(n==="dark"?t.colors.dark[2]:t.colors.gray[6],t.luminanceThreshold),variable:"--mantine-color-dimmed"};if(e==="white"||e==="black")return{color:e,value:e==="white"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:Cp(e==="white"?t.white:t.black,t.luminanceThreshold),variable:`--mantine-color-${e}`};const[r,s]=e.split("."),i=s?Number(s):void 0,o=r in t.colors;if(o){const a=i!==void 0?t.colors[r][i]:t.colors[r][Cg(t,n||"light")];return{color:r,value:a,shade:i,isThemeColor:o,isLight:Cp(a,t.luminanceThreshold),variable:s?`--mantine-color-${r}-${i}`:`--mantine-color-${r}-filled`}}return{color:e,value:e,isThemeColor:o,isLight:Cp(e,t.luminanceThreshold),shade:i,variable:void 0}}function Cr(e,t){const n=Rc({color:e||t.primaryColor,theme:t});return n.variable?`var(${n.variable})`:e}function Gk(e,t){const n={from:(e==null?void 0:e.from)||t.defaultGradient.from,to:(e==null?void 0:e.to)||t.defaultGradient.to,deg:(e==null?void 0:e.deg)??t.defaultGradient.deg??0},r=Cr(n.from,t),s=Cr(n.to,t);return`linear-gradient(${n.deg}deg, ${r} 0%, ${s} 100%)`}function go(e,t){if(typeof e!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";if(e.startsWith("var(")){const i=(1-t)*100;return`color-mix(in srgb, ${e}, transparent ${i}%)`}if(e.startsWith("oklch"))return e.includes("/")?e.replace(/\/\s*[\d.]+\s*\)/,`/ ${t})`):e.replace(")",` / ${t})`);const{r:n,g:r,b:s}=Yj(e);return`rgba(${n}, ${r}, ${s}, ${t})`}const vf=go,NZ=({color:e,theme:t,variant:n,gradient:r,autoContrast:s})=>{const i=Rc({color:e,theme:t}),o=typeof s=="boolean"?s:t.autoContrast;if(n==="filled"){const a=o&&i.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return i.isThemeColor?i.shade===void 0?{background:`var(--mantine-color-${e}-filled)`,hover:`var(--mantine-color-${e}-filled-hover)`,color:a,border:`${Te(1)} solid transparent`}:{background:`var(--mantine-color-${i.color}-${i.shade})`,hover:`var(--mantine-color-${i.color}-${i.shade===9?8:i.shade+1})`,color:a,border:`${Te(1)} solid transparent`}:{background:e,hover:Db(e,.1),color:a,border:`${Te(1)} solid transparent`}}if(n==="light"){if(i.isThemeColor){if(i.shade===void 0)return{background:`var(--mantine-color-${e}-light)`,hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Te(1)} solid transparent`};const a=t.colors[i.color][i.shade];return{background:go(a,.1),hover:go(a,.12),color:`var(--mantine-color-${i.color}-${Math.min(i.shade,6)})`,border:`${Te(1)} solid transparent`}}return{background:go(e,.1),hover:go(e,.12),color:e,border:`${Te(1)} solid transparent`}}if(n==="outline")return i.isThemeColor?i.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${e}-outline-hover)`,color:`var(--mantine-color-${e}-outline)`,border:`${Te(1)} solid var(--mantine-color-${e}-outline)`}:{background:"transparent",hover:go(t.colors[i.color][i.shade],.05),color:`var(--mantine-color-${i.color}-${i.shade})`,border:`${Te(1)} solid var(--mantine-color-${i.color}-${i.shade})`}:{background:"transparent",hover:go(e,.05),color:e,border:`${Te(1)} solid ${e}`};if(n==="subtle"){if(i.isThemeColor){if(i.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Te(1)} solid transparent`};const a=t.colors[i.color][i.shade];return{background:"transparent",hover:go(a,.12),color:`var(--mantine-color-${i.color}-${Math.min(i.shade,6)})`,border:`${Te(1)} solid transparent`}}return{background:"transparent",hover:go(e,.12),color:e,border:`${Te(1)} solid transparent`}}return n==="transparent"?i.isThemeColor?i.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${e}-light-color)`,border:`${Te(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${i.color}-${Math.min(i.shade,6)})`,border:`${Te(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:e,border:`${Te(1)} solid transparent`}:n==="white"?i.isThemeColor?i.shade===void 0?{background:"var(--mantine-color-white)",hover:Db(t.white,.01),color:`var(--mantine-color-${e}-filled)`,border:`${Te(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:Db(t.white,.01),color:`var(--mantine-color-${i.color}-${i.shade})`,border:`${Te(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:Db(t.white,.01),color:e,border:`${Te(1)} solid transparent`}:n==="gradient"?{background:Gk(r,t),hover:Gk(r,t),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${Te(1)} solid var(--mantine-color-default-border)`}:{}},_Z={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},Yk="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",Jj={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:_Z,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:NZ,autoContrast:!1,luminanceThreshold:.3,fontFamily:Yk,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:Yk,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:Te(34),lineHeight:"1.3"},h2:{fontSize:Te(26),lineHeight:"1.35"},h3:{fontSize:Te(22),lineHeight:"1.4"},h4:{fontSize:Te(18),lineHeight:"1.45"},h5:{fontSize:Te(16),lineHeight:"1.5"},h6:{fontSize:Te(14),lineHeight:"1.5"}}},fontSizes:{xs:Te(12),sm:Te(14),md:Te(16),lg:Te(18),xl:Te(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:Te(2),sm:Te(4),md:Te(8),lg:Te(16),xl:Te(32)},spacing:{xs:Te(10),sm:Te(12),md:Te(16),lg:Te(20),xl:Te(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${Te(1)} ${Te(3)} rgba(0, 0, 0, 0.05), 0 ${Te(1)} ${Te(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${Te(1)} ${Te(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Te(10)} ${Te(15)} ${Te(-5)}, rgba(0, 0, 0, 0.04) 0 ${Te(7)} ${Te(7)} ${Te(-5)}`,md:`0 ${Te(1)} ${Te(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Te(20)} ${Te(25)} ${Te(-5)}, rgba(0, 0, 0, 0.04) 0 ${Te(10)} ${Te(10)} ${Te(-5)}`,lg:`0 ${Te(1)} ${Te(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Te(28)} ${Te(23)} ${Te(-7)}, rgba(0, 0, 0, 0.04) 0 ${Te(12)} ${Te(12)} ${Te(-7)}`,xl:`0 ${Te(1)} ${Te(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Te(36)} ${Te(28)} ${Te(-7)}, rgba(0, 0, 0, 0.04) 0 ${Te(17)} ${Te(17)} ${Te(-7)}`},other:{},components:{}};function Jk(e){return e==="auto"||e==="dark"||e==="light"}function CZ({key:e="mantine-color-scheme-value"}={}){let t;return{get:n=>{if(typeof window>"u")return n;try{const r=window.localStorage.getItem(e);return Jk(r)?r:n}catch{return n}},set:n=>{try{window.localStorage.setItem(e,n)}catch(r){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",r)}},subscribe:n=>{t=r=>{r.storageArea===window.localStorage&&r.key===e&&Jk(r.newValue)&&n(r.newValue)},window.addEventListener("storage",t)},unsubscribe:()=>{window.removeEventListener("storage",t)},clear:()=>{window.localStorage.removeItem(e)}}}const OZ="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more  https://mantine.dev/theming/colors/#primary-color",Xk="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function uN(e){return e<0||e>9?!1:parseInt(e.toString(),10)===e}function Kk(e){if(!(e.primaryColor in e.colors))throw new Error(OZ);if(typeof e.primaryShade=="object"&&(!uN(e.primaryShade.dark)||!uN(e.primaryShade.light)))throw new Error(Xk);if(typeof e.primaryShade=="number"&&!uN(e.primaryShade))throw new Error(Xk)}function jZ(e,t){var r;if(!t)return Kk(e),e;const n=Vj(e,t);return t.fontFamily&&!((r=t.headings)!=null&&r.fontFamily)&&(n.headings.fontFamily=t.fontFamily),Kk(n),n}const Xj=w.createContext(null),AZ=()=>w.useContext(Xj)||Jj;function Ds(){const e=w.useContext(Xj);if(!e)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return e}function o7({theme:e,children:t,inherit:n=!0}){const r=AZ(),s=w.useMemo(()=>jZ(n?r:Jj,e),[e,r,n]);return m.jsx(Xj.Provider,{value:s,children:t})}o7.displayName="@mantine/core/MantineThemeProvider";function TZ(){const e=Ds(),t=Gj(),n=Co(e.breakpoints).reduce((r,s)=>{const i=e.breakpoints[s].includes("px"),o=$Q(e.breakpoints[s]),a=i?`${o-.1}px`:Uk(o-.1),c=i?`${o}px`:Uk(o);return`${r}@media (max-width: ${a}) {.mantine-visible-from-${s} {display: none !important;}}@media (min-width: ${c}) {.mantine-hidden-from-${s} {display: none !important;}}`},"");return m.jsx("style",{"data-mantine-styles":"classes",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:n}})}function dN(e){return Object.entries(e).map(([t,n])=>`${t}: ${n};`).join("")}function Op(e,t){return(Array.isArray(e)?e:[e]).reduce((r,s)=>`${s}{${r}}`,t)}function $Z(e,t){const n=dN(e.variables),r=n?Op(t,n):"",s=dN(e.dark),i=dN(e.light),o=s?Op(t===":host"?`${t}([data-mantine-color-scheme="dark"])`:`${t}[data-mantine-color-scheme="dark"]`,s):"",a=i?Op(t===":host"?`${t}([data-mantine-color-scheme="light"])`:`${t}[data-mantine-color-scheme="light"]`,i):"";return`${r}${o}${a}`}function Ay({color:e,theme:t,autoContrast:n}){return(typeof n=="boolean"?n:t.autoContrast)&&Rc({color:e||t.primaryColor,theme:t}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function Qk(e,t){return Ay({color:e.colors[e.primaryColor][Cg(e,t)],theme:e,autoContrast:null})}function Lb({theme:e,color:t,colorScheme:n,name:r=t,withColorValues:s=!0}){if(!e.colors[t])return{};if(n==="light"){const a=Cg(e,"light"),c={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${a===9?8:a+1})`,[`--mantine-color-${r}-light`]:vf(e.colors[t][a],.1),[`--mantine-color-${r}-light-hover`]:vf(e.colors[t][a],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline-hover`]:vf(e.colors[t][a],.05)};return s?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...c}:c}const i=Cg(e,"dark"),o={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${i})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${i===9?8:i+1})`,[`--mantine-color-${r}-light`]:vf(e.colors[t][Math.max(0,i-2)],.15),[`--mantine-color-${r}-light-hover`]:vf(e.colors[t][Math.max(0,i-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(i-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(i-4,0)})`,[`--mantine-color-${r}-outline-hover`]:vf(e.colors[t][Math.max(i-4,0)],.05)};return s?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...o}:o}function RZ(e){return!!e&&typeof e=="object"&&"mantine-virtual-color"in e}function xf(e,t,n){Co(t).forEach(r=>Object.assign(e,{[`--mantine-${n}-${r}`]:t[r]}))}const a7=e=>{const t=Cg(e,"light"),n=e.defaultRadius in e.radius?e.radius[e.defaultRadius]:Te(e.defaultRadius),r={variables:{"--mantine-scale":e.scale.toString(),"--mantine-cursor-type":e.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":e.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":e.fontSmoothing?"grayscale":"unset","--mantine-color-white":e.white,"--mantine-color-black":e.black,"--mantine-line-height":e.lineHeights.md,"--mantine-font-family":e.fontFamily,"--mantine-font-family-monospace":e.fontFamilyMonospace,"--mantine-font-family-headings":e.headings.fontFamily,"--mantine-heading-font-weight":e.headings.fontWeight,"--mantine-heading-text-wrap":e.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${e.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${e.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${e.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${e.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${e.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":Qk(e,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":e.black,"--mantine-color-body":e.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-${t})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":Qk(e,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};xf(r.variables,e.breakpoints,"breakpoint"),xf(r.variables,e.spacing,"spacing"),xf(r.variables,e.fontSizes,"font-size"),xf(r.variables,e.lineHeights,"line-height"),xf(r.variables,e.shadows,"shadow"),xf(r.variables,e.radius,"radius"),e.colors[e.primaryColor].forEach((i,o)=>{r.variables[`--mantine-primary-color-${o}`]=`var(--mantine-color-${e.primaryColor}-${o})`}),Co(e.colors).forEach(i=>{const o=e.colors[i];if(RZ(o)){Object.assign(r.light,Lb({theme:e,name:o.name,color:o.light,colorScheme:"light",withColorValues:!0})),Object.assign(r.dark,Lb({theme:e,name:o.name,color:o.dark,colorScheme:"dark",withColorValues:!0}));return}o.forEach((a,c)=>{r.variables[`--mantine-color-${i}-${c}`]=a}),Object.assign(r.light,Lb({theme:e,color:i,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,Lb({theme:e,color:i,colorScheme:"dark",withColorValues:!1}))});const s=e.headings.sizes;return Co(s).forEach(i=>{r.variables[`--mantine-${i}-font-size`]=s[i].fontSize,r.variables[`--mantine-${i}-line-height`]=s[i].lineHeight,r.variables[`--mantine-${i}-font-weight`]=s[i].fontWeight||e.headings.fontWeight}),r};function kZ({theme:e,generator:t}){const n=a7(e),r=t==null?void 0:t(e);return r?Vj(n,r):n}const fN=a7(Jj);function MZ(e){const t={variables:{},light:{},dark:{}};return Co(e.variables).forEach(n=>{fN.variables[n]!==e.variables[n]&&(t.variables[n]=e.variables[n])}),Co(e.light).forEach(n=>{fN.light[n]!==e.light[n]&&(t.light[n]=e.light[n])}),Co(e.dark).forEach(n=>{fN.dark[n]!==e.dark[n]&&(t.dark[n]=e.dark[n])}),t}function IZ(e){return`
  ${e}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${e}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function l7({cssVariablesSelector:e,deduplicateCssVariables:t}){const n=Ds(),r=Gj(),s=fZ(),i=kZ({theme:n,generator:s}),o=e===":root"&&t,a=o?MZ(i):i,c=$Z(a,e);return c?m.jsx("style",{"data-mantine-styles":!0,nonce:r==null?void 0:r(),dangerouslySetInnerHTML:{__html:`${c}${o?"":IZ(e)}`}}):null}l7.displayName="@mantine/CssVariables";function PZ(){const e=console.error;console.error=(...t)=>{t.length>1&&typeof t[0]=="string"&&t[0].toLowerCase().includes("extra attributes from the server")&&typeof t[1]=="string"&&t[1].toLowerCase().includes("data-mantine-color-scheme")||e(...t)}}function wf(e,t){var s,i;const n=typeof window<"u"&&"matchMedia"in window&&((s=window.matchMedia("(prefers-color-scheme: dark)"))==null?void 0:s.matches),r=e!=="auto"?e:n?"dark":"light";(i=t())==null||i.setAttribute("data-mantine-color-scheme",r)}function DZ({manager:e,defaultColorScheme:t,getRootElement:n,forceColorScheme:r}){const s=w.useRef(null),[i,o]=w.useState(()=>e.get(t)),a=r||i,c=w.useCallback(f=>{r||(wf(f,n),o(f),e.set(f))},[e.set,a,r]),u=w.useCallback(()=>{o(t),wf(t,n),e.clear()},[e.clear,t]);return w.useEffect(()=>(e.subscribe(c),e.unsubscribe),[e.subscribe,e.unsubscribe]),Kh(()=>{wf(e.get(t),n)},[]),w.useEffect(()=>{var h;if(r)return wf(r,n),()=>{};r===void 0&&wf(i,n),typeof window<"u"&&"matchMedia"in window&&(s.current=window.matchMedia("(prefers-color-scheme: dark)"));const f=p=>{i==="auto"&&wf(p.matches?"dark":"light",n)};return(h=s.current)==null||h.addEventListener("change",f),()=>{var p;return(p=s.current)==null?void 0:p.removeEventListener("change",f)}},[i,r]),{colorScheme:a,setColorScheme:c,clearColorScheme:u}}function LZ({respectReducedMotion:e,getRootElement:t}){Kh(()=>{var n;e&&((n=t())==null||n.setAttribute("data-respect-reduced-motion","true"))},[e])}PZ();function c7({theme:e,children:t,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:s=!0,deduplicateCssVariables:i=!0,withCssVariables:o=!0,cssVariablesSelector:a=":root",classNamesPrefix:c="mantine",colorSchemeManager:u=CZ(),defaultColorScheme:f="light",getRootElement:h=()=>document.documentElement,cssVariablesResolver:p,forceColorScheme:y,stylesTransform:v,env:x}){const{colorScheme:E,setColorScheme:N,clearColorScheme:_}=DZ({defaultColorScheme:f,forceColorScheme:y,manager:u,getRootElement:h});return LZ({respectReducedMotion:(e==null?void 0:e.respectReducedMotion)||!1,getRootElement:h}),m.jsx(s7.Provider,{value:{colorScheme:E,setColorScheme:N,clearColorScheme:_,getRootElement:h,classNamesPrefix:c,getStyleNonce:n,cssVariablesResolver:p,cssVariablesSelector:a,withStaticClasses:r,stylesTransform:v,env:x},children:m.jsxs(o7,{theme:e,children:[o&&m.jsx(l7,{cssVariablesSelector:a,deduplicateCssVariables:i}),s&&m.jsx(TZ,{}),t]})})}c7.displayName="@mantine/core/MantineProvider";function Qh({classNames:e,styles:t,props:n,stylesCtx:r}){const s=Ds();return{resolvedClassNames:Uw({theme:s,classNames:e,props:n,stylesCtx:r||void 0}),resolvedStyles:ox({theme:s,styles:t,props:n,stylesCtx:r||void 0})}}const FZ={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function BZ({theme:e,options:t,unstyled:n}){return yn((t==null?void 0:t.focusable)&&!n&&(e.focusClassName||FZ[e.focusRing]),(t==null?void 0:t.active)&&!n&&e.activeClassName)}function zZ({selector:e,stylesCtx:t,options:n,props:r,theme:s}){return Uw({theme:s,classNames:n==null?void 0:n.classNames,props:(n==null?void 0:n.props)||r,stylesCtx:t})[e]}function Zk({selector:e,stylesCtx:t,theme:n,classNames:r,props:s}){return Uw({theme:n,classNames:r,props:s,stylesCtx:t})[e]}function VZ({rootSelector:e,selector:t,className:n}){return e===t?n:void 0}function UZ({selector:e,classes:t,unstyled:n}){return n?void 0:t[e]}function qZ({themeName:e,classNamesPrefix:t,selector:n,withStaticClass:r}){return r===!1?[]:e.map(s=>`${t}-${s}-${n}`)}function HZ({themeName:e,theme:t,selector:n,props:r,stylesCtx:s}){return e.map(i=>{var o,a;return(a=Uw({theme:t,classNames:(o=t.components[i])==null?void 0:o.classNames,props:r,stylesCtx:s}))==null?void 0:a[n]})}function WZ({options:e,classes:t,selector:n,unstyled:r}){return e!=null&&e.variant&&!r?t[`${n}--${e.variant}`]:void 0}function GZ({theme:e,options:t,themeName:n,selector:r,classNamesPrefix:s,classNames:i,classes:o,unstyled:a,className:c,rootSelector:u,props:f,stylesCtx:h,withStaticClasses:p,headless:y,transformedStyles:v}){return yn(BZ({theme:e,options:t,unstyled:a||y}),HZ({theme:e,themeName:n,selector:r,props:f,stylesCtx:h}),WZ({options:t,classes:o,selector:r,unstyled:a}),Zk({selector:r,stylesCtx:h,theme:e,classNames:i,props:f}),Zk({selector:r,stylesCtx:h,theme:e,classNames:v,props:f}),zZ({selector:r,stylesCtx:h,options:t,props:f,theme:e}),VZ({rootSelector:u,selector:r,className:c}),UZ({selector:r,classes:o,unstyled:a||y}),p&&!y&&qZ({themeName:n,classNamesPrefix:s,selector:r,withStaticClass:t==null?void 0:t.withStaticClass}),t==null?void 0:t.className)}function YZ({theme:e,themeName:t,props:n,stylesCtx:r,selector:s}){return t.map(i=>{var o;return ox({theme:e,styles:(o=e.components[i])==null?void 0:o.styles,props:n,stylesCtx:r})[s]}).reduce((i,o)=>({...i,...o}),{})}function mC({style:e,theme:t}){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...mC({style:r,theme:t})}),{}):typeof e=="function"?e(t):e??{}}function JZ(e){return e.reduce((t,n)=>(n&&Object.keys(n).forEach(r=>{t[r]={...t[r],...Uj(n[r])}}),t),{})}function XZ({vars:e,varsResolver:t,theme:n,props:r,stylesCtx:s,selector:i,themeName:o,headless:a}){var c;return(c=JZ([a?{}:t==null?void 0:t(n,r,s),...o.map(u=>{var f,h,p;return(p=(h=(f=n.components)==null?void 0:f[u])==null?void 0:h.vars)==null?void 0:p.call(h,n,r,s)}),e==null?void 0:e(n,r,s)]))==null?void 0:c[i]}function KZ({theme:e,themeName:t,selector:n,options:r,props:s,stylesCtx:i,rootSelector:o,styles:a,style:c,vars:u,varsResolver:f,headless:h,withStylesTransform:p}){return{...!p&&YZ({theme:e,themeName:t,props:s,stylesCtx:i,selector:n}),...!p&&ox({theme:e,styles:a,props:s,stylesCtx:i})[n],...!p&&ox({theme:e,styles:r==null?void 0:r.styles,props:(r==null?void 0:r.props)||s,stylesCtx:i})[n],...XZ({theme:e,props:s,stylesCtx:i,vars:u,varsResolver:f,selector:n,themeName:t,headless:h}),...o===n?mC({style:c,theme:e}):null,...mC({style:r==null?void 0:r.style,theme:e})}}function QZ({props:e,stylesCtx:t,themeName:n}){var o;const r=Ds(),s=(o=yZ())==null?void 0:o();return{getTransformedStyles:a=>s?[...a.map(u=>s(u,{props:e,theme:r,ctx:t})),...n.map(u=>{var f;return s((f=r.components[u])==null?void 0:f.styles,{props:e,theme:r,ctx:t})})].filter(Boolean):[],withStylesTransform:!!s}}function wt({name:e,classes:t,props:n,stylesCtx:r,className:s,style:i,rootSelector:o="root",unstyled:a,classNames:c,styles:u,vars:f,varsResolver:h}){const p=Ds(),y=hZ(),v=mZ(),x=pZ(),E=(Array.isArray(e)?e:[e]).filter(C=>C),{withStylesTransform:N,getTransformedStyles:_}=QZ({props:n,stylesCtx:r,themeName:E});return(C,j)=>({className:GZ({theme:p,options:j,themeName:E,selector:C,classNamesPrefix:y,classNames:c,classes:t,unstyled:a,className:s,rootSelector:o,props:n,stylesCtx:r,withStaticClasses:v,headless:x,transformedStyles:_([j==null?void 0:j.styles,u])}),style:KZ({theme:p,themeName:E,selector:C,options:j,props:n,stylesCtx:r,rootSelector:o,styles:u,style:i,vars:f,varsResolver:h,headless:x,withStylesTransform:N})})}function Kj(e,t){return typeof e=="boolean"?e:t.autoContrast}function Pe(e,t,n){var o;const r=Ds(),s=(o=r.components[e])==null?void 0:o.defaultProps,i=typeof s=="function"?s(r):s;return{...t,...i,...Uj(n)}}function hN(e){return Co(e).reduce((t,n)=>e[n]!==void 0?`${t}${AQ(n)}:${e[n]};`:t,"").trim()}function ZZ({selector:e,styles:t,media:n,container:r}){const s=t?hN(t):"",i=Array.isArray(n)?n.map(a=>`@media${a.query}{${e}{${hN(a.styles)}}}`):[],o=Array.isArray(r)?r.map(a=>`@container ${a.query}{${e}{${hN(a.styles)}}}`):[];return`${s?`${e}{${s}}`:""}${i.join("")}${o.join("")}`.trim()}function eee(e){const t=Gj();return m.jsx("style",{"data-mantine-styles":"inline",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:ZZ(e)}})}function Zh(e){const{m:t,mx:n,my:r,mt:s,mb:i,ml:o,mr:a,me:c,ms:u,p:f,px:h,py:p,pt:y,pb:v,pl:x,pr:E,pe:N,ps:_,bd:C,bg:j,c:A,opacity:$,ff:k,fz:R,fw:B,lts:z,ta:D,lh:L,fs:H,tt:M,td:V,w:T,miw:I,maw:P,h:W,mih:F,mah:q,bgsz:X,bgp:Q,bgr:se,bga:ae,pos:de,top:ce,left:fe,bottom:ve,right:Ae,inset:Ce,display:Ee,flex:Re,hiddenFrom:ke,visibleFrom:He,lightHidden:et,darkHidden:Oe,sx:Me,...Ie}=e;return{styleProps:Uj({m:t,mx:n,my:r,mt:s,mb:i,ml:o,mr:a,me:c,ms:u,p:f,px:h,py:p,pt:y,pb:v,pl:x,pr:E,pe:N,ps:_,bd:C,bg:j,c:A,opacity:$,ff:k,fz:R,fw:B,lts:z,ta:D,lh:L,fs:H,tt:M,td:V,w:T,miw:I,maw:P,h:W,mih:F,mah:q,bgsz:X,bgp:Q,bgr:se,bga:ae,pos:de,top:ce,left:fe,bottom:ve,right:Ae,inset:Ce,display:Ee,flex:Re,hiddenFrom:ke,visibleFrom:He,lightHidden:et,darkHidden:Oe,sx:Me}),rest:Ie}}const tee={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"size",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function Qj(e,t){const n=Rc({color:e,theme:t});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function nee(e,t){const n=Rc({color:e,theme:t});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:Qj(e,t)}function ree(e,t){if(typeof e=="number")return Te(e);if(typeof e=="string"){const[n,r,...s]=e.split(" ").filter(o=>o.trim()!=="");let i=`${Te(n)}`;return r&&(i+=` ${r}`),s.length>0&&(i+=` ${Qj(s.join(" "),t)}`),i.trim()}return e}const eM={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function see(e){return typeof e=="string"&&e in eM?eM[e]:e}const iee=["h1","h2","h3","h4","h5","h6"];function oee(e,t){return typeof e=="string"&&e in t.fontSizes?`var(--mantine-font-size-${e})`:typeof e=="string"&&iee.includes(e)?`var(--mantine-${e}-font-size)`:typeof e=="number"||typeof e=="string"?Te(e):e}function aee(e){return e}const lee=["h1","h2","h3","h4","h5","h6"];function cee(e,t){return typeof e=="string"&&e in t.lineHeights?`var(--mantine-line-height-${e})`:typeof e=="string"&&lee.includes(e)?`var(--mantine-${e}-line-height)`:e}function uee(e){return typeof e=="number"?Te(e):e}function dee(e,t){if(typeof e=="number")return Te(e);if(typeof e=="string"){const n=e.replace("-","");if(!(n in t.spacing))return Te(e);const r=`--mantine-spacing-${n}`;return e.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return e}const mN={color:Qj,textColor:nee,fontSize:oee,spacing:dee,identity:aee,size:uee,lineHeight:cee,fontFamily:see,border:ree};function tM(e){return e.replace("(min-width: ","").replace("em)","")}function fee({media:e,...t}){const r=Object.keys(e).sort((s,i)=>Number(tM(s))-Number(tM(i))).map(s=>({query:s,styles:e[s]}));return{...t,media:r}}function hee(e){if(typeof e!="object"||e===null)return!1;const t=Object.keys(e);return!(t.length===1&&t[0]==="base")}function mee(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function pee(e){return typeof e=="object"&&e!==null?Co(e).filter(t=>t!=="base"):[]}function gee(e,t){return typeof e=="object"&&e!==null&&t in e?e[t]:e}function yee({styleProps:e,data:t,theme:n}){return fee(Co(e).reduce((r,s)=>{if(s==="hiddenFrom"||s==="visibleFrom"||s==="sx")return r;const i=t[s],o=Array.isArray(i.property)?i.property:[i.property],a=mee(e[s]);if(!hee(e[s]))return o.forEach(u=>{r.inlineStyles[u]=mN[i.type](a,n)}),r;r.hasResponsiveStyles=!0;const c=pee(e[s]);return o.forEach(u=>{a&&(r.styles[u]=mN[i.type](a,n)),c.forEach(f=>{const h=`(min-width: ${n.breakpoints[f]})`;r.media[h]={...r.media[h],[u]:mN[i.type](gee(e[s],f),n)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function bee(){return`__m__-${w.useId().replace(/:/g,"")}`}function u7(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...u7(r,t)}),{}):typeof e=="function"?e(t):e??{}}function d7(e){return e.startsWith("data-")?e:`data-${e}`}function vee(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return r===void 0||r===""||r===!1||r===null||(t[d7(n)]=e[n]),t},{})}function f7(e){return e?typeof e=="string"?{[d7(e)]:!0}:Array.isArray(e)?[...e].reduce((t,n)=>({...t,...f7(n)}),{}):vee(e):null}function pC(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...pC(r,t)}),{}):typeof e=="function"?e(t):e??{}}function xee({theme:e,style:t,vars:n,styleProps:r}){const s=pC(t,e),i=pC(n,e);return{...s,...i,...r}}const h7=w.forwardRef(({component:e,style:t,__vars:n,className:r,variant:s,mod:i,size:o,hiddenFrom:a,visibleFrom:c,lightHidden:u,darkHidden:f,renderRoot:h,__size:p,...y},v)=>{var R;const x=Ds(),E=e||"div",{styleProps:N,rest:_}=Zh(y),C=gZ(),j=(R=C==null?void 0:C())==null?void 0:R(N.sx),A=bee(),$=yee({styleProps:N,theme:x,data:tee}),k={ref:v,style:xee({theme:x,style:t,vars:n,styleProps:$.inlineStyles}),className:yn(r,j,{[A]:$.hasResponsiveStyles,"mantine-light-hidden":u,"mantine-dark-hidden":f,[`mantine-hidden-from-${a}`]:a,[`mantine-visible-from-${c}`]:c}),"data-variant":s,"data-size":X8(o)?void 0:o||void 0,size:p,...f7(i),..._};return m.jsxs(m.Fragment,{children:[$.hasResponsiveStyles&&m.jsx(eee,{selector:`.${A}`,styles:$.styles,media:$.media}),typeof h=="function"?h(k):m.jsx(E,{...k})]})});h7.displayName="@mantine/core/Box";const Ve=h7;function m7(e){return e}function Ye(e){const t=w.forwardRef(e);return t.extend=m7,t.withProps=n=>{const r=w.forwardRef((s,i)=>m.jsx(t,{...n,...s,ref:i}));return r.extend=t.extend,r.displayName=`WithProps(${t.displayName})`,r},t}function kc(e){const t=w.forwardRef(e);return t.withProps=n=>{const r=w.forwardRef((s,i)=>m.jsx(t,{...n,...s,ref:i}));return r.extend=t.extend,r.displayName=`WithProps(${t.displayName})`,r},t.extend=m7,t}const wee=w.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function Mc(){return w.useContext(wee)}var Ty=V8();const Df=eo(Ty),[See,mi]=Ya("ScrollArea.Root component was not found in tree");function wh(e,t){const n=Su(t);Kh(()=>{let r=0;if(e){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(e),()=>{window.cancelAnimationFrame(r),s.unobserve(e)}}},[e,n])}const Eee=w.forwardRef((e,t)=>{const{style:n,...r}=e,s=mi(),[i,o]=w.useState(0),[a,c]=w.useState(0),u=!!(i&&a);return wh(s.scrollbarX,()=>{var h;const f=((h=s.scrollbarX)==null?void 0:h.offsetHeight)||0;s.onCornerHeightChange(f),c(f)}),wh(s.scrollbarY,()=>{var h;const f=((h=s.scrollbarY)==null?void 0:h.offsetWidth)||0;s.onCornerWidthChange(f),o(f)}),u?m.jsx("div",{...r,ref:t,style:{...n,width:i,height:a}}):null}),Nee=w.forwardRef((e,t)=>{const n=mi(),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?m.jsx(Eee,{...e,ref:t}):null}),_ee={scrollHideDelay:1e3,type:"hover"},p7=w.forwardRef((e,t)=>{const n=Pe("ScrollAreaRoot",_ee,e),{type:r,scrollHideDelay:s,scrollbars:i,...o}=n,[a,c]=w.useState(null),[u,f]=w.useState(null),[h,p]=w.useState(null),[y,v]=w.useState(null),[x,E]=w.useState(null),[N,_]=w.useState(0),[C,j]=w.useState(0),[A,$]=w.useState(!1),[k,R]=w.useState(!1),B=jn(t,z=>c(z));return m.jsx(See,{value:{type:r,scrollHideDelay:s,scrollArea:a,viewport:u,onViewportChange:f,content:h,onContentChange:p,scrollbarX:y,onScrollbarXChange:v,scrollbarXEnabled:A,onScrollbarXEnabledChange:$,scrollbarY:x,onScrollbarYChange:E,scrollbarYEnabled:k,onScrollbarYEnabledChange:R,onCornerWidthChange:_,onCornerHeightChange:j},children:m.jsx(Ve,{...o,ref:B,__vars:{"--sa-corner-width":i!=="xy"?"0px":`${N}px`,"--sa-corner-height":i!=="xy"?"0px":`${C}px`}})})});p7.displayName="@mantine/core/ScrollAreaRoot";function g7(e,t){const n=e/t;return Number.isNaN(n)?0:n}function qw(e){const t=g7(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function y7(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function Cee(e,[t,n]){return Math.min(n,Math.max(t,e))}function nM(e,t,n="ltr"){const r=qw(t),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-s,o=t.content-t.viewport,a=i-r,c=n==="ltr"?[0,o]:[o*-1,0],u=Cee(e,c);return y7([0,o],[0,a])(u)}function Oee(e,t,n,r="ltr"){const s=qw(n),i=s/2,o=t||i,a=s-o,c=n.scrollbar.paddingStart+o,u=n.scrollbar.size-n.scrollbar.paddingEnd-a,f=n.content-n.viewport,h=r==="ltr"?[0,f]:[f*-1,0];return y7([c,u],h)(e)}function b7(e,t){return e>0&&e<t}function cc(e){return e?parseInt(e,10):0}function Wu(e,t,{checkForDefaultPrevented:n=!0}={}){return r=>{e==null||e(r),(n===!1||!r.defaultPrevented)&&(t==null||t(r))}}const[jee,v7]=Ya("ScrollAreaScrollbar was not found in tree"),x7=w.forwardRef((e,t)=>{const{sizes:n,hasThumb:r,onThumbChange:s,onThumbPointerUp:i,onThumbPointerDown:o,onThumbPositionChange:a,onDragScroll:c,onWheelScroll:u,onResize:f,...h}=e,p=mi(),[y,v]=w.useState(null),x=jn(t,R=>v(R)),E=w.useRef(null),N=w.useRef(""),{viewport:_}=p,C=n.content-n.viewport,j=Su(u),A=Su(a),$=zw(f,10),k=R=>{if(E.current){const B=R.clientX-E.current.left,z=R.clientY-E.current.top;c({x:B,y:z})}};return w.useEffect(()=>{const R=B=>{const z=B.target;(y==null?void 0:y.contains(z))&&j(B,C)};return document.addEventListener("wheel",R,{passive:!1}),()=>document.removeEventListener("wheel",R,{passive:!1})},[_,y,C,j]),w.useEffect(A,[n,A]),wh(y,$),wh(p.content,$),m.jsx(jee,{value:{scrollbar:y,hasThumb:r,onThumbChange:Su(s),onThumbPointerUp:Su(i),onThumbPositionChange:A,onThumbPointerDown:Su(o)},children:m.jsx("div",{...h,ref:x,"data-mantine-scrollbar":!0,style:{position:"absolute",...h.style},onPointerDown:Wu(e.onPointerDown,R=>{R.preventDefault(),R.button===0&&(R.target.setPointerCapture(R.pointerId),E.current=y.getBoundingClientRect(),N.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",k(R))}),onPointerMove:Wu(e.onPointerMove,k),onPointerUp:Wu(e.onPointerUp,R=>{const B=R.target;B.hasPointerCapture(R.pointerId)&&(R.preventDefault(),B.releasePointerCapture(R.pointerId))}),onLostPointerCapture:()=>{document.body.style.webkitUserSelect=N.current,E.current=null}})})}),w7=w.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:s,...i}=e,o=mi(),[a,c]=w.useState(),u=w.useRef(null),f=jn(t,u,o.onScrollbarXChange);return w.useEffect(()=>{u.current&&c(getComputedStyle(u.current))},[u]),m.jsx(x7,{"data-orientation":"horizontal",...i,ref:f,sizes:n,style:{...s,"--sa-thumb-width":`${qw(n)}px`},onThumbPointerDown:h=>e.onThumbPointerDown(h.x),onDragScroll:h=>e.onDragScroll(h.x),onWheelScroll:(h,p)=>{if(o.viewport){const y=o.viewport.scrollLeft+h.deltaX;e.onWheelScroll(y),b7(y,p)&&h.preventDefault()}},onResize:()=>{u.current&&o.viewport&&a&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:cc(a.paddingLeft),paddingEnd:cc(a.paddingRight)}})}})});w7.displayName="@mantine/core/ScrollAreaScrollbarX";const S7=w.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:s,...i}=e,o=mi(),[a,c]=w.useState(),u=w.useRef(null),f=jn(t,u,o.onScrollbarYChange);return w.useEffect(()=>{u.current&&c(window.getComputedStyle(u.current))},[]),m.jsx(x7,{...i,"data-orientation":"vertical",ref:f,sizes:n,style:{"--sa-thumb-height":`${qw(n)}px`,...s},onThumbPointerDown:h=>e.onThumbPointerDown(h.y),onDragScroll:h=>e.onDragScroll(h.y),onWheelScroll:(h,p)=>{if(o.viewport){const y=o.viewport.scrollTop+h.deltaY;e.onWheelScroll(y),b7(y,p)&&h.preventDefault()}},onResize:()=>{u.current&&o.viewport&&a&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:cc(a.paddingTop),paddingEnd:cc(a.paddingBottom)}})}})});S7.displayName="@mantine/core/ScrollAreaScrollbarY";const Hw=w.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,{dir:s}=Mc(),i=mi(),o=w.useRef(null),a=w.useRef(0),[c,u]=w.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),f=g7(c.viewport,c.content),h={...r,sizes:c,onSizesChange:u,hasThumb:f>0&&f<1,onThumbChange:y=>{o.current=y},onThumbPointerUp:()=>{a.current=0},onThumbPointerDown:y=>{a.current=y}},p=(y,v)=>Oee(y,a.current,c,v);return n==="horizontal"?m.jsx(w7,{...h,ref:t,onThumbPositionChange:()=>{if(i.viewport&&o.current){const y=i.viewport.scrollLeft,v=nM(y,c,s);o.current.style.transform=`translate3d(${v}px, 0, 0)`}},onWheelScroll:y=>{i.viewport&&(i.viewport.scrollLeft=y)},onDragScroll:y=>{i.viewport&&(i.viewport.scrollLeft=p(y,s))}}):n==="vertical"?m.jsx(S7,{...h,ref:t,onThumbPositionChange:()=>{if(i.viewport&&o.current){const y=i.viewport.scrollTop,v=nM(y,c);c.scrollbar.size===0?o.current.style.setProperty("--thumb-opacity","0"):o.current.style.setProperty("--thumb-opacity","1"),o.current.style.transform=`translate3d(0, ${v}px, 0)`}},onWheelScroll:y=>{i.viewport&&(i.viewport.scrollTop=y)},onDragScroll:y=>{i.viewport&&(i.viewport.scrollTop=p(y))}}):null});Hw.displayName="@mantine/core/ScrollAreaScrollbarVisible";const Zj=w.forwardRef((e,t)=>{const n=mi(),{forceMount:r,...s}=e,[i,o]=w.useState(!1),a=e.orientation==="horizontal",c=zw(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,f=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?u:f)}},10);return wh(n.viewport,c),wh(n.content,c),r||i?m.jsx(Hw,{"data-state":i?"visible":"hidden",...s,ref:t}):null});Zj.displayName="@mantine/core/ScrollAreaScrollbarAuto";const E7=w.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=mi(),[i,o]=w.useState(!1);return w.useEffect(()=>{const{scrollArea:a}=s;let c=0;if(a){const u=()=>{window.clearTimeout(c),o(!0)},f=()=>{c=window.setTimeout(()=>o(!1),s.scrollHideDelay)};return a.addEventListener("pointerenter",u),a.addEventListener("pointerleave",f),()=>{window.clearTimeout(c),a.removeEventListener("pointerenter",u),a.removeEventListener("pointerleave",f)}}},[s.scrollArea,s.scrollHideDelay]),n||i?m.jsx(Zj,{"data-state":i?"visible":"hidden",...r,ref:t}):null});E7.displayName="@mantine/core/ScrollAreaScrollbarHover";const Aee=w.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=mi(),i=e.orientation==="horizontal",[o,a]=w.useState("hidden"),c=zw(()=>a("idle"),100);return w.useEffect(()=>{if(o==="idle"){const u=window.setTimeout(()=>a("hidden"),s.scrollHideDelay);return()=>window.clearTimeout(u)}},[o,s.scrollHideDelay]),w.useEffect(()=>{const{viewport:u}=s,f=i?"scrollLeft":"scrollTop";if(u){let h=u[f];const p=()=>{const y=u[f];h!==y&&(a("scrolling"),c()),h=y};return u.addEventListener("scroll",p),()=>u.removeEventListener("scroll",p)}},[s.viewport,i,c]),n||o!=="hidden"?m.jsx(Hw,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:Wu(e.onPointerEnter,()=>a("interacting")),onPointerLeave:Wu(e.onPointerLeave,()=>a("idle"))}):null}),gC=w.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=mi(),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=s,a=e.orientation==="horizontal";return w.useEffect(()=>(a?i(!0):o(!0),()=>{a?i(!1):o(!1)}),[a,i,o]),s.type==="hover"?m.jsx(E7,{...r,ref:t,forceMount:n}):s.type==="scroll"?m.jsx(Aee,{...r,ref:t,forceMount:n}):s.type==="auto"?m.jsx(Zj,{...r,ref:t,forceMount:n}):s.type==="always"?m.jsx(Hw,{...r,ref:t}):null});gC.displayName="@mantine/core/ScrollAreaScrollbar";function Tee(e,t=()=>{}){let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function s(){const i={left:e.scrollLeft,top:e.scrollTop},o=n.left!==i.left,a=n.top!==i.top;(o||a)&&t(),n=i,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)}const N7=w.forwardRef((e,t)=>{const{style:n,...r}=e,s=mi(),i=v7(),{onThumbPositionChange:o}=i,a=jn(t,f=>i.onThumbChange(f)),c=w.useRef(void 0),u=zw(()=>{c.current&&(c.current(),c.current=void 0)},100);return w.useEffect(()=>{const{viewport:f}=s;if(f){const h=()=>{if(u(),!c.current){const p=Tee(f,o);c.current=p,o()}};return o(),f.addEventListener("scroll",h),()=>f.removeEventListener("scroll",h)}},[s.viewport,u,o]),m.jsx("div",{"data-state":i.hasThumb?"visible":"hidden",...r,ref:a,style:{width:"var(--sa-thumb-width)",height:"var(--sa-thumb-height)",...n},onPointerDownCapture:Wu(e.onPointerDownCapture,f=>{const p=f.target.getBoundingClientRect(),y=f.clientX-p.left,v=f.clientY-p.top;i.onThumbPointerDown({x:y,y:v})}),onPointerUp:Wu(e.onPointerUp,i.onThumbPointerUp)})});N7.displayName="@mantine/core/ScrollAreaThumb";const yC=w.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=v7();return n||s.hasThumb?m.jsx(N7,{ref:t,...r}):null});yC.displayName="@mantine/core/ScrollAreaThumb";const _7=w.forwardRef(({children:e,style:t,...n},r)=>{const s=mi(),i=jn(r,s.onViewportChange);return m.jsx(Ve,{...n,ref:i,style:{overflowX:s.scrollbarXEnabled?"scroll":"hidden",overflowY:s.scrollbarYEnabled?"scroll":"hidden",...t},children:m.jsx("div",{style:{minWidth:"100%",display:"table"},ref:s.onContentChange,children:e})})});_7.displayName="@mantine/core/ScrollAreaViewport";var eA={root:"m_d57069b5",viewport:"m_c0783ff9",viewportInner:"m_f8f631dd",scrollbar:"m_c44ba933",thumb:"m_d8b5e363",corner:"m_21657268"};const C7={scrollHideDelay:1e3,type:"hover",scrollbars:"xy"},$ee=(e,{scrollbarSize:t,overscrollBehavior:n})=>({root:{"--scrollarea-scrollbar-size":Te(t),"--scrollarea-over-scroll-behavior":n}}),$y=Ye((e,t)=>{const n=Pe("ScrollArea",C7,e),{classNames:r,className:s,style:i,styles:o,unstyled:a,scrollbarSize:c,vars:u,type:f,scrollHideDelay:h,viewportProps:p,viewportRef:y,onScrollPositionChange:v,children:x,offsetScrollbars:E,scrollbars:N,onBottomReached:_,onTopReached:C,overscrollBehavior:j,...A}=n,[$,k]=w.useState(!1),R=wt({name:"ScrollArea",props:n,classes:eA,className:s,style:i,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:$ee});return m.jsxs(p7,{type:f==="never"?"always":f,scrollHideDelay:h,ref:t,scrollbars:N,...R("root"),...A,children:[m.jsx(_7,{...p,...R("viewport",{style:p==null?void 0:p.style}),ref:y,"data-offset-scrollbars":E===!0?"xy":E||void 0,"data-scrollbars":N||void 0,onScroll:B=>{var H;(H=p==null?void 0:p.onScroll)==null||H.call(p,B),v==null||v({x:B.currentTarget.scrollLeft,y:B.currentTarget.scrollTop});const{scrollTop:z,scrollHeight:D,clientHeight:L}=B.currentTarget;z-(D-L)>=0&&(_==null||_()),z===0&&(C==null||C())},children:x}),(N==="xy"||N==="x")&&m.jsx(gC,{...R("scrollbar"),orientation:"horizontal","data-hidden":f==="never"||void 0,forceMount:!0,onMouseEnter:()=>k(!0),onMouseLeave:()=>k(!1),children:m.jsx(yC,{...R("thumb")})}),(N==="xy"||N==="y")&&m.jsx(gC,{...R("scrollbar"),orientation:"vertical","data-hidden":f==="never"||void 0,forceMount:!0,onMouseEnter:()=>k(!0),onMouseLeave:()=>k(!1),children:m.jsx(yC,{...R("thumb")})}),m.jsx(Nee,{...R("corner"),"data-hovered":$||void 0,"data-hidden":f==="never"||void 0})]})});$y.displayName="@mantine/core/ScrollArea";const tA=Ye((e,t)=>{const{children:n,classNames:r,styles:s,scrollbarSize:i,scrollHideDelay:o,type:a,dir:c,offsetScrollbars:u,viewportRef:f,onScrollPositionChange:h,unstyled:p,variant:y,viewportProps:v,scrollbars:x,style:E,vars:N,onBottomReached:_,onTopReached:C,...j}=Pe("ScrollAreaAutosize",C7,e);return m.jsx(Ve,{...j,ref:t,style:[{display:"flex",overflow:"auto"},E],children:m.jsx(Ve,{style:{display:"flex",flexDirection:"column",flex:1},children:m.jsx($y,{classNames:r,styles:s,scrollHideDelay:o,scrollbarSize:i,type:a,dir:c,offsetScrollbars:u,viewportRef:f,onScrollPositionChange:h,unstyled:p,variant:y,viewportProps:v,vars:N,scrollbars:x,onBottomReached:_,onTopReached:C,children:n})})})});$y.classes=eA;tA.displayName="@mantine/core/ScrollAreaAutosize";tA.classes=eA;$y.Autosize=tA;var O7={root:"m_87cf2631"};const Ree={__staticSelector:"UnstyledButton"},La=kc((e,t)=>{const n=Pe("UnstyledButton",Ree,e),{className:r,component:s="button",__staticSelector:i,unstyled:o,classNames:a,styles:c,style:u,...f}=n,h=wt({name:i,props:n,classes:O7,className:r,style:u,classNames:a,styles:c,unstyled:o});return m.jsx(Ve,{...h("root",{focusable:!0}),component:s,ref:t,type:s==="button"?"button":void 0,...f})});La.classes=O7;La.displayName="@mantine/core/UnstyledButton";var j7={root:"m_515a97f8"};const kee={},nA=Ye((e,t)=>{const n=Pe("VisuallyHidden",kee,e),{classNames:r,className:s,style:i,styles:o,unstyled:a,vars:c,...u}=n,f=wt({name:"VisuallyHidden",classes:j7,props:n,className:s,style:i,classNames:r,styles:o,unstyled:a});return m.jsx(Ve,{component:"span",ref:t,...f("root"),...u})});nA.classes=j7;nA.displayName="@mantine/core/VisuallyHidden";var A7={root:"m_1b7284a3"};const Mee={},Iee=(e,{radius:t,shadow:n})=>({root:{"--paper-radius":t===void 0?void 0:Qn(t),"--paper-shadow":Hj(n)}}),rA=kc((e,t)=>{const n=Pe("Paper",Mee,e),{classNames:r,className:s,style:i,styles:o,unstyled:a,withBorder:c,vars:u,radius:f,shadow:h,variant:p,mod:y,...v}=n,x=wt({name:"Paper",props:n,classes:A7,className:s,style:i,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Iee});return m.jsx(Ve,{ref:t,mod:[{"data-with-border":c},y],...x("root"),variant:p,...v})});rA.classes=A7;rA.displayName="@mantine/core/Paper";function Ww(){return typeof window<"u"}function em(e){return T7(e)?(e.nodeName||"").toLowerCase():"#document"}function os(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Po(e){var t;return(t=(T7(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function T7(e){return Ww()?e instanceof Node||e instanceof os(e).Node:!1}function fn(e){return Ww()?e instanceof Element||e instanceof os(e).Element:!1}function ks(e){return Ww()?e instanceof HTMLElement||e instanceof os(e).HTMLElement:!1}function bC(e){return!Ww()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof os(e).ShadowRoot}function Ry(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=li(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(s)}function Pee(e){return["table","td","th"].includes(em(e))}function Gw(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function sA(e){const t=Yw(),n=fn(e)?li(e):e;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function Dee(e){let t=Fa(e);for(;ks(t)&&!wc(t);){if(sA(t))return t;if(Gw(t))return null;t=Fa(t)}return null}function Yw(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function wc(e){return["html","body","#document"].includes(em(e))}function li(e){return os(e).getComputedStyle(e)}function Jw(e){return fn(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Fa(e){if(em(e)==="html")return e;const t=e.assignedSlot||e.parentNode||bC(e)&&e.host||Po(e);return bC(t)?t.host:t}function $7(e){const t=Fa(e);return wc(t)?e.ownerDocument?e.ownerDocument.body:e.body:ks(t)&&Ry(t)?t:$7(t)}function Aa(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=$7(e),i=s===((r=e.ownerDocument)==null?void 0:r.body),o=os(s);if(i){const a=vC(o);return t.concat(o,o.visualViewport||[],Ry(s)?s:[],a&&n?Aa(a):[])}return t.concat(s,Aa(s,[],n))}function vC(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function rM(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function Og(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&bC(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function R7(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function k7(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function Lee(e){return zee()?!1:!sM()&&e.width===0&&e.height===0||sM()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function Fee(){return/apple/i.test(navigator.vendor)}function sM(){const e=/android/i;return e.test(R7())||e.test(k7())}function Bee(){return R7().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function zee(){return k7().includes("jsdom/")}function xC(e,t){const n=["mouse","pen"];return n.push("",void 0),n.includes(e)}function Vee(e){return"nativeEvent"in e}function Uee(e){return e.matches("html,body")}function _u(e){return(e==null?void 0:e.ownerDocument)||document}function pN(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function Af(e){return"composedPath"in e?e.composedPath()[0]:e.target}const qee="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function Hee(e){return ks(e)&&e.matches(qee)}const Yi=Math.min,_r=Math.max,ax=Math.round,Fb=Math.floor,Oo=e=>({x:e,y:e}),Wee={left:"right",right:"left",bottom:"top",top:"bottom"},Gee={start:"end",end:"start"};function wC(e,t,n){return _r(e,Yi(t,n))}function Ba(e,t){return typeof e=="function"?e(t):e}function Ji(e){return e.split("-")[0]}function tm(e){return e.split("-")[1]}function iA(e){return e==="x"?"y":"x"}function oA(e){return e==="y"?"height":"width"}function za(e){return["top","bottom"].includes(Ji(e))?"y":"x"}function aA(e){return iA(za(e))}function Yee(e,t,n){n===void 0&&(n=!1);const r=tm(e),s=aA(e),i=oA(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=lx(o)),[o,lx(o)]}function Jee(e){const t=lx(e);return[SC(e),t,SC(t)]}function SC(e){return e.replace(/start|end/g,t=>Gee[t])}function Xee(e,t,n){const r=["left","right"],s=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?s:r:t?r:s;case"left":case"right":return t?i:o;default:return[]}}function Kee(e,t,n,r){const s=tm(e);let i=Xee(Ji(e),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),t&&(i=i.concat(i.map(SC)))),i}function lx(e){return e.replace(/left|right|bottom|top/g,t=>Wee[t])}function Qee(e){return{top:0,right:0,bottom:0,left:0,...e}}function lA(e){return typeof e!="number"?Qee(e):{top:e,right:e,bottom:e,left:e}}function Sh(e){const{x:t,y:n,width:r,height:s}=e;return{width:r,height:s,top:n,left:t,right:t+r,bottom:n+s,x:t,y:n}}function iM(e,t,n){let{reference:r,floating:s}=e;const i=za(t),o=aA(t),a=oA(o),c=Ji(t),u=i==="y",f=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,p=r[a]/2-s[a]/2;let y;switch(c){case"top":y={x:f,y:r.y-s.height};break;case"bottom":y={x:f,y:r.y+r.height};break;case"right":y={x:r.x+r.width,y:h};break;case"left":y={x:r.x-s.width,y:h};break;default:y={x:r.x,y:r.y}}switch(tm(t)){case"start":y[o]-=p*(n&&u?-1:1);break;case"end":y[o]+=p*(n&&u?-1:1);break}return y}const Zee=async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let u=await o.getElementRects({reference:e,floating:t,strategy:s}),{x:f,y:h}=iM(u,r,c),p=r,y={},v=0;for(let x=0;x<a.length;x++){const{name:E,fn:N}=a[x],{x:_,y:C,data:j,reset:A}=await N({x:f,y:h,initialPlacement:r,placement:p,strategy:s,middlewareData:y,rects:u,platform:o,elements:{reference:e,floating:t}});f=_??f,h=C??h,y={...y,[E]:{...y[E],...j}},A&&v<=50&&(v++,typeof A=="object"&&(A.placement&&(p=A.placement),A.rects&&(u=A.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:s}):A.rects),{x:f,y:h}=iM(u,p,c)),x=-1)}return{x:f,y:h,placement:p,strategy:s,middlewareData:y}};async function cA(e,t){var n;t===void 0&&(t={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:f="viewport",elementContext:h="floating",altBoundary:p=!1,padding:y=0}=Ba(t,e),v=lA(y),E=a[p?h==="floating"?"reference":"floating":h],N=Sh(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(E)))==null||n?E:E.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:u,rootBoundary:f,strategy:c})),_=h==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,C=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),j=await(i.isElement==null?void 0:i.isElement(C))?await(i.getScale==null?void 0:i.getScale(C))||{x:1,y:1}:{x:1,y:1},A=Sh(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:_,offsetParent:C,strategy:c}):_);return{top:(N.top-A.top+v.top)/j.y,bottom:(A.bottom-N.bottom+v.bottom)/j.y,left:(N.left-A.left+v.left)/j.x,right:(A.right-N.right+v.right)/j.x}}const ete=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:c}=t,{element:u,padding:f=0}=Ba(e,t)||{};if(u==null)return{};const h=lA(f),p={x:n,y:r},y=aA(s),v=oA(y),x=await o.getDimensions(u),E=y==="y",N=E?"top":"left",_=E?"bottom":"right",C=E?"clientHeight":"clientWidth",j=i.reference[v]+i.reference[y]-p[y]-i.floating[v],A=p[y]-i.reference[y],$=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let k=$?$[C]:0;(!k||!await(o.isElement==null?void 0:o.isElement($)))&&(k=a.floating[C]||i.floating[v]);const R=j/2-A/2,B=k/2-x[v]/2-1,z=Yi(h[N],B),D=Yi(h[_],B),L=z,H=k-x[v]-D,M=k/2-x[v]/2+R,V=wC(L,M,H),T=!c.arrow&&tm(s)!=null&&M!==V&&i.reference[v]/2-(M<L?z:D)-x[v]/2<0,I=T?M<L?M-L:M-H:0;return{[y]:p[y]+I,data:{[y]:V,centerOffset:M-V-I,...T&&{alignmentOffset:I}},reset:T}}}),tte=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:c,elements:u}=t,{mainAxis:f=!0,crossAxis:h=!0,fallbackPlacements:p,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:x=!0,...E}=Ba(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const N=Ji(s),_=za(a),C=Ji(a)===a,j=await(c.isRTL==null?void 0:c.isRTL(u.floating)),A=p||(C||!x?[lx(a)]:Jee(a)),$=v!=="none";!p&&$&&A.push(...Kee(a,x,v,j));const k=[a,...A],R=await cA(t,E),B=[];let z=((r=i.flip)==null?void 0:r.overflows)||[];if(f&&B.push(R[N]),h){const M=Yee(s,o,j);B.push(R[M[0]],R[M[1]])}if(z=[...z,{placement:s,overflows:B}],!B.every(M=>M<=0)){var D,L;const M=(((D=i.flip)==null?void 0:D.index)||0)+1,V=k[M];if(V)return{data:{index:M,overflows:z},reset:{placement:V}};let T=(L=z.filter(I=>I.overflows[0]<=0).sort((I,P)=>I.overflows[1]-P.overflows[1])[0])==null?void 0:L.placement;if(!T)switch(y){case"bestFit":{var H;const I=(H=z.filter(P=>{if($){const W=za(P.placement);return W===_||W==="y"}return!0}).map(P=>[P.placement,P.overflows.filter(W=>W>0).reduce((W,F)=>W+F,0)]).sort((P,W)=>P[1]-W[1])[0])==null?void 0:H[0];I&&(T=I);break}case"initialPlacement":T=a;break}if(s!==T)return{reset:{placement:T}}}return{}}}};function M7(e){const t=Yi(...e.map(i=>i.left)),n=Yi(...e.map(i=>i.top)),r=_r(...e.map(i=>i.right)),s=_r(...e.map(i=>i.bottom));return{x:t,y:n,width:r-t,height:s-n}}function nte(e){const t=e.slice().sort((s,i)=>s.y-i.y),n=[];let r=null;for(let s=0;s<t.length;s++){const i=t[s];!r||i.y-r.y>r.height/2?n.push([i]):n[n.length-1].push(i),r=i}return n.map(s=>Sh(M7(s)))}const rte=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:s,platform:i,strategy:o}=t,{padding:a=2,x:c,y:u}=Ba(e,t),f=Array.from(await(i.getClientRects==null?void 0:i.getClientRects(r.reference))||[]),h=nte(f),p=Sh(M7(f)),y=lA(a);function v(){if(h.length===2&&h[0].left>h[1].right&&c!=null&&u!=null)return h.find(E=>c>E.left-y.left&&c<E.right+y.right&&u>E.top-y.top&&u<E.bottom+y.bottom)||p;if(h.length>=2){if(za(n)==="y"){const z=h[0],D=h[h.length-1],L=Ji(n)==="top",H=z.top,M=D.bottom,V=L?z.left:D.left,T=L?z.right:D.right,I=T-V,P=M-H;return{top:H,bottom:M,left:V,right:T,width:I,height:P,x:V,y:H}}const E=Ji(n)==="left",N=_r(...h.map(z=>z.right)),_=Yi(...h.map(z=>z.left)),C=h.filter(z=>E?z.left===_:z.right===N),j=C[0].top,A=C[C.length-1].bottom,$=_,k=N,R=k-$,B=A-j;return{top:j,bottom:A,left:$,right:k,width:R,height:B,x:$,y:j}}return p}const x=await i.getElementRects({reference:{getBoundingClientRect:v},floating:r.floating,strategy:o});return s.reference.x!==x.reference.x||s.reference.y!==x.reference.y||s.reference.width!==x.reference.width||s.reference.height!==x.reference.height?{reset:{rects:x}}:{}}}};async function ste(e,t){const{placement:n,platform:r,elements:s}=e,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Ji(n),a=tm(n),c=za(n)==="y",u=["left","top"].includes(o)?-1:1,f=i&&c?-1:1,h=Ba(t,e);let{mainAxis:p,crossAxis:y,alignmentAxis:v}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof v=="number"&&(y=a==="end"?v*-1:v),c?{x:y*f,y:p*u}:{x:p*u,y:y*f}}const ite=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:i,placement:o,middlewareData:a}=t,c=await ste(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:o}}}}},ote=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:s}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:E=>{let{x:N,y:_}=E;return{x:N,y:_}}},...c}=Ba(e,t),u={x:n,y:r},f=await cA(t,c),h=za(Ji(s)),p=iA(h);let y=u[p],v=u[h];if(i){const E=p==="y"?"top":"left",N=p==="y"?"bottom":"right",_=y+f[E],C=y-f[N];y=wC(_,y,C)}if(o){const E=h==="y"?"top":"left",N=h==="y"?"bottom":"right",_=v+f[E],C=v-f[N];v=wC(_,v,C)}const x=a.fn({...t,[p]:y,[h]:v});return{...x,data:{x:x.x-n,y:x.y-r,enabled:{[p]:i,[h]:o}}}}}},ate=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=t,{offset:a=0,mainAxis:c=!0,crossAxis:u=!0}=Ba(e,t),f={x:n,y:r},h=za(s),p=iA(h);let y=f[p],v=f[h];const x=Ba(a,t),E=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(c){const C=p==="y"?"height":"width",j=i.reference[p]-i.floating[C]+E.mainAxis,A=i.reference[p]+i.reference[C]-E.mainAxis;y<j?y=j:y>A&&(y=A)}if(u){var N,_;const C=p==="y"?"width":"height",j=["top","left"].includes(Ji(s)),A=i.reference[h]-i.floating[C]+(j&&((N=o.offset)==null?void 0:N[h])||0)+(j?0:E.crossAxis),$=i.reference[h]+i.reference[C]+(j?0:((_=o.offset)==null?void 0:_[h])||0)-(j?E.crossAxis:0);v<A?v=A:v>$&&(v=$)}return{[p]:y,[h]:v}}}},lte=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:s,rects:i,platform:o,elements:a}=t,{apply:c=()=>{},...u}=Ba(e,t),f=await cA(t,u),h=Ji(s),p=tm(s),y=za(s)==="y",{width:v,height:x}=i.floating;let E,N;h==="top"||h==="bottom"?(E=h,N=p===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(N=h,E=p==="end"?"top":"bottom");const _=x-f.top-f.bottom,C=v-f.left-f.right,j=Yi(x-f[E],_),A=Yi(v-f[N],C),$=!t.middlewareData.shift;let k=j,R=A;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(R=C),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(k=_),$&&!p){const z=_r(f.left,0),D=_r(f.right,0),L=_r(f.top,0),H=_r(f.bottom,0);y?R=v-2*(z!==0||D!==0?z+D:_r(f.left,f.right)):k=x-2*(L!==0||H!==0?L+H:_r(f.top,f.bottom))}await c({...t,availableWidth:R,availableHeight:k});const B=await o.getDimensions(a.floating);return v!==B.width||x!==B.height?{reset:{rects:!0}}:{}}}};function I7(e){const t=li(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=ks(e),i=s?e.offsetWidth:n,o=s?e.offsetHeight:r,a=ax(n)!==i||ax(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function uA(e){return fn(e)?e:e.contextElement}function Gf(e){const t=uA(e);if(!ks(t))return Oo(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:i}=I7(t);let o=(i?ax(n.width):n.width)/r,a=(i?ax(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const cte=Oo(0);function P7(e){const t=os(e);return!Yw()||!t.visualViewport?cte:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function ute(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==os(e)?!1:t}function Ju(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),i=uA(e);let o=Oo(1);t&&(r?fn(r)&&(o=Gf(r)):o=Gf(e));const a=ute(i,n,r)?P7(i):Oo(0);let c=(s.left+a.x)/o.x,u=(s.top+a.y)/o.y,f=s.width/o.x,h=s.height/o.y;if(i){const p=os(i),y=r&&fn(r)?os(r):r;let v=p,x=vC(v);for(;x&&r&&y!==v;){const E=Gf(x),N=x.getBoundingClientRect(),_=li(x),C=N.left+(x.clientLeft+parseFloat(_.paddingLeft))*E.x,j=N.top+(x.clientTop+parseFloat(_.paddingTop))*E.y;c*=E.x,u*=E.y,f*=E.x,h*=E.y,c+=C,u+=j,v=os(x),x=vC(v)}}return Sh({width:f,height:h,x:c,y:u})}function dA(e,t){const n=Jw(e).scrollLeft;return t?t.left+n:Ju(Po(e)).left+n}function D7(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),s=r.left+t.scrollLeft-(n?0:dA(e,r)),i=r.top+t.scrollTop;return{x:s,y:i}}function dte(e){let{elements:t,rect:n,offsetParent:r,strategy:s}=e;const i=s==="fixed",o=Po(r),a=t?Gw(t.floating):!1;if(r===o||a&&i)return n;let c={scrollLeft:0,scrollTop:0},u=Oo(1);const f=Oo(0),h=ks(r);if((h||!h&&!i)&&((em(r)!=="body"||Ry(o))&&(c=Jw(r)),ks(r))){const y=Ju(r);u=Gf(r),f.x=y.x+r.clientLeft,f.y=y.y+r.clientTop}const p=o&&!h&&!i?D7(o,c,!0):Oo(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+f.x+p.x,y:n.y*u.y-c.scrollTop*u.y+f.y+p.y}}function fte(e){return Array.from(e.getClientRects())}function hte(e){const t=Po(e),n=Jw(e),r=e.ownerDocument.body,s=_r(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=_r(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+dA(e);const a=-n.scrollTop;return li(r).direction==="rtl"&&(o+=_r(t.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}function mte(e,t){const n=os(e),r=Po(e),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,c=0;if(s){i=s.width,o=s.height;const u=Yw();(!u||u&&t==="fixed")&&(a=s.offsetLeft,c=s.offsetTop)}return{width:i,height:o,x:a,y:c}}function pte(e,t){const n=Ju(e,!0,t==="fixed"),r=n.top+e.clientTop,s=n.left+e.clientLeft,i=ks(e)?Gf(e):Oo(1),o=e.clientWidth*i.x,a=e.clientHeight*i.y,c=s*i.x,u=r*i.y;return{width:o,height:a,x:c,y:u}}function oM(e,t,n){let r;if(t==="viewport")r=mte(e,n);else if(t==="document")r=hte(Po(e));else if(fn(t))r=pte(t,n);else{const s=P7(e);r={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return Sh(r)}function L7(e,t){const n=Fa(e);return n===t||!fn(n)||wc(n)?!1:li(n).position==="fixed"||L7(n,t)}function gte(e,t){const n=t.get(e);if(n)return n;let r=Aa(e,[],!1).filter(a=>fn(a)&&em(a)!=="body"),s=null;const i=li(e).position==="fixed";let o=i?Fa(e):e;for(;fn(o)&&!wc(o);){const a=li(o),c=sA(o);!c&&a.position==="fixed"&&(s=null),(i?!c&&!s:!c&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||Ry(o)&&!c&&L7(e,o))?r=r.filter(f=>f!==o):s=a,o=Fa(o)}return t.set(e,r),r}function yte(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const o=[...n==="clippingAncestors"?Gw(t)?[]:gte(t,this._c):[].concat(n),r],a=o[0],c=o.reduce((u,f)=>{const h=oM(t,f,s);return u.top=_r(h.top,u.top),u.right=Yi(h.right,u.right),u.bottom=Yi(h.bottom,u.bottom),u.left=_r(h.left,u.left),u},oM(t,a,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function bte(e){const{width:t,height:n}=I7(e);return{width:t,height:n}}function vte(e,t,n){const r=ks(t),s=Po(t),i=n==="fixed",o=Ju(e,!0,i,t);let a={scrollLeft:0,scrollTop:0};const c=Oo(0);if(r||!r&&!i)if((em(t)!=="body"||Ry(s))&&(a=Jw(t)),r){const p=Ju(t,!0,i,t);c.x=p.x+t.clientLeft,c.y=p.y+t.clientTop}else s&&(c.x=dA(s));const u=s&&!r&&!i?D7(s,a):Oo(0),f=o.left+a.scrollLeft-c.x-u.x,h=o.top+a.scrollTop-c.y-u.y;return{x:f,y:h,width:o.width,height:o.height}}function gN(e){return li(e).position==="static"}function aM(e,t){if(!ks(e)||li(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Po(e)===n&&(n=n.ownerDocument.body),n}function F7(e,t){const n=os(e);if(Gw(e))return n;if(!ks(e)){let s=Fa(e);for(;s&&!wc(s);){if(fn(s)&&!gN(s))return s;s=Fa(s)}return n}let r=aM(e,t);for(;r&&Pee(r)&&gN(r);)r=aM(r,t);return r&&wc(r)&&gN(r)&&!sA(r)?n:r||Dee(e)||n}const xte=async function(e){const t=this.getOffsetParent||F7,n=this.getDimensions,r=await n(e.floating);return{reference:vte(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function wte(e){return li(e).direction==="rtl"}const Ste={convertOffsetParentRelativeRectToViewportRelativeRect:dte,getDocumentElement:Po,getClippingRect:yte,getOffsetParent:F7,getElementRects:xte,getClientRects:fte,getDimensions:bte,getScale:Gf,isElement:fn,isRTL:wte};function B7(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Ete(e,t){let n=null,r;const s=Po(e);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,c){a===void 0&&(a=!1),c===void 0&&(c=1),i();const u=e.getBoundingClientRect(),{left:f,top:h,width:p,height:y}=u;if(a||t(),!p||!y)return;const v=Fb(h),x=Fb(s.clientWidth-(f+p)),E=Fb(s.clientHeight-(h+y)),N=Fb(f),C={rootMargin:-v+"px "+-x+"px "+-E+"px "+-N+"px",threshold:_r(0,Yi(1,c))||1};let j=!0;function A($){const k=$[0].intersectionRatio;if(k!==c){if(!j)return o();k?o(!1,k):r=setTimeout(()=>{o(!1,1e-7)},1e3)}k===1&&!B7(u,e.getBoundingClientRect())&&o(),j=!1}try{n=new IntersectionObserver(A,{...C,root:s.ownerDocument})}catch{n=new IntersectionObserver(A,C)}n.observe(e)}return o(!0),i}function Nte(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=uA(e),f=s||i?[...u?Aa(u):[],...Aa(t)]:[];f.forEach(N=>{s&&N.addEventListener("scroll",n,{passive:!0}),i&&N.addEventListener("resize",n)});const h=u&&a?Ete(u,n):null;let p=-1,y=null;o&&(y=new ResizeObserver(N=>{let[_]=N;_&&_.target===u&&y&&(y.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var C;(C=y)==null||C.observe(t)})),n()}),u&&!c&&y.observe(u),y.observe(t));let v,x=c?Ju(e):null;c&&E();function E(){const N=Ju(e);x&&!B7(x,N)&&n(),x=N,v=requestAnimationFrame(E)}return n(),()=>{var N;f.forEach(_=>{s&&_.removeEventListener("scroll",n),i&&_.removeEventListener("resize",n)}),h==null||h(),(N=y)==null||N.disconnect(),y=null,c&&cancelAnimationFrame(v)}}const _te=ite,Cte=ote,Ote=tte,jte=lte,lM=ete,Ate=rte,Tte=ate,$te=(e,t,n)=>{const r=new Map,s={platform:Ste,...n},i={...s.platform,_c:r};return Zee(e,t,{...s,platform:i})};var Av=typeof document<"u"?w.useLayoutEffect:w.useEffect;function cx(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!cx(e[r],t[r]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&e.$$typeof)&&!cx(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function z7(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function cM(e,t){const n=z7(e);return Math.round(t*n)/n}function yN(e){const t=w.useRef(e);return Av(()=>{t.current=e}),t}function Rte(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:c,open:u}=e,[f,h]=w.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[p,y]=w.useState(r);cx(p,r)||y(r);const[v,x]=w.useState(null),[E,N]=w.useState(null),_=w.useCallback(P=>{P!==$.current&&($.current=P,x(P))},[]),C=w.useCallback(P=>{P!==k.current&&(k.current=P,N(P))},[]),j=i||v,A=o||E,$=w.useRef(null),k=w.useRef(null),R=w.useRef(f),B=c!=null,z=yN(c),D=yN(s),L=yN(u),H=w.useCallback(()=>{if(!$.current||!k.current)return;const P={placement:t,strategy:n,middleware:p};D.current&&(P.platform=D.current),$te($.current,k.current,P).then(W=>{const F={...W,isPositioned:L.current!==!1};M.current&&!cx(R.current,F)&&(R.current=F,Ty.flushSync(()=>{h(F)}))})},[p,t,n,D,L]);Av(()=>{u===!1&&R.current.isPositioned&&(R.current.isPositioned=!1,h(P=>({...P,isPositioned:!1})))},[u]);const M=w.useRef(!1);Av(()=>(M.current=!0,()=>{M.current=!1}),[]),Av(()=>{if(j&&($.current=j),A&&(k.current=A),j&&A){if(z.current)return z.current(j,A,H);H()}},[j,A,H,z,B]);const V=w.useMemo(()=>({reference:$,floating:k,setReference:_,setFloating:C}),[_,C]),T=w.useMemo(()=>({reference:j,floating:A}),[j,A]),I=w.useMemo(()=>{const P={position:n,left:0,top:0};if(!T.floating)return P;const W=cM(T.floating,f.x),F=cM(T.floating,f.y);return a?{...P,transform:"translate("+W+"px, "+F+"px)",...z7(T.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:W,top:F}},[n,a,T.floating,f.x,f.y]);return w.useMemo(()=>({...f,update:H,refs:V,elements:T,floatingStyles:I}),[f,H,V,T,I])}const kte=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:s}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?lM({element:r.current,padding:s}).fn(n):{}:r?lM({element:r,padding:s}).fn(n):{}}}},V7=(e,t)=>({..._te(e),options:[e,t]}),fA=(e,t)=>({...Cte(e),options:[e,t]}),uM=(e,t)=>({...Tte(e),options:[e,t]}),ux=(e,t)=>({...Ote(e),options:[e,t]}),Mte=(e,t)=>({...jte(e),options:[e,t]}),ng=(e,t)=>({...Ate(e),options:[e,t]}),U7=(e,t)=>({...kte(e),options:[e,t]}),q7={...z8},Ite=q7.useInsertionEffect,Pte=Ite||(e=>e());function xa(e){const t=w.useRef(()=>{});return Pte(()=>{t.current=e}),w.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t.current==null?void 0:t.current(...r)},[])}var jo=typeof document<"u"?w.useLayoutEffect:w.useEffect;let dM=!1,Dte=0;const fM=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Dte++;function Lte(){const[e,t]=w.useState(()=>dM?fM():void 0);return jo(()=>{e==null&&t(fM())},[]),w.useEffect(()=>{dM=!0},[]),e}const Fte=q7.useId,H7=Fte||Lte;function Bte(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(s=>s(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(s=>s!==n))||[])}}}const zte=w.createContext(null),Vte=w.createContext(null),hA=()=>{var e;return((e=w.useContext(zte))==null?void 0:e.id)||null},mA=()=>w.useContext(Vte);function pA(e){return"data-floating-ui-"+e}function bN(e){const t=w.useRef(e);return jo(()=>{t.current=e}),t}const hM=pA("safe-polygon");function Tv(e,t,n){return n&&!xC(n)?0:typeof e=="number"?e:e==null?void 0:e[t]}function Ute(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:s,events:i,elements:o}=e,{enabled:a=!0,delay:c=0,handleClose:u=null,mouseOnly:f=!1,restMs:h=0,move:p=!0}=t,y=mA(),v=hA(),x=bN(u),E=bN(c),N=bN(n),_=w.useRef(),C=w.useRef(-1),j=w.useRef(),A=w.useRef(-1),$=w.useRef(!0),k=w.useRef(!1),R=w.useRef(()=>{}),B=w.useRef(!1),z=w.useCallback(()=>{var I;const P=(I=s.current.openEvent)==null?void 0:I.type;return(P==null?void 0:P.includes("mouse"))&&P!=="mousedown"},[s]);w.useEffect(()=>{if(!a)return;function I(P){let{open:W}=P;W||(clearTimeout(C.current),clearTimeout(A.current),$.current=!0,B.current=!1)}return i.on("openchange",I),()=>{i.off("openchange",I)}},[a,i]),w.useEffect(()=>{if(!a||!x.current||!n)return;function I(W){z()&&r(!1,W,"hover")}const P=_u(o.floating).documentElement;return P.addEventListener("mouseleave",I),()=>{P.removeEventListener("mouseleave",I)}},[o.floating,n,r,a,x,z]);const D=w.useCallback(function(I,P,W){P===void 0&&(P=!0),W===void 0&&(W="hover");const F=Tv(E.current,"close",_.current);F&&!j.current?(clearTimeout(C.current),C.current=window.setTimeout(()=>r(!1,I,W),F)):P&&(clearTimeout(C.current),r(!1,I,W))},[E,r]),L=xa(()=>{R.current(),j.current=void 0}),H=xa(()=>{if(k.current){const I=_u(o.floating).body;I.style.pointerEvents="",I.removeAttribute(hM),k.current=!1}}),M=xa(()=>s.current.openEvent?["click","mousedown"].includes(s.current.openEvent.type):!1);w.useEffect(()=>{if(!a)return;function I(q){if(clearTimeout(C.current),$.current=!1,f&&!xC(_.current)||h>0&&!Tv(E.current,"open"))return;const X=Tv(E.current,"open",_.current);X?C.current=window.setTimeout(()=>{N.current||r(!0,q,"hover")},X):n||r(!0,q,"hover")}function P(q){if(M())return;R.current();const X=_u(o.floating);if(clearTimeout(A.current),B.current=!1,x.current&&s.current.floatingContext){n||clearTimeout(C.current),j.current=x.current({...s.current.floatingContext,tree:y,x:q.clientX,y:q.clientY,onClose(){H(),L(),M()||D(q,!0,"safe-polygon")}});const se=j.current;X.addEventListener("mousemove",se),R.current=()=>{X.removeEventListener("mousemove",se)};return}(_.current==="touch"?!Og(o.floating,q.relatedTarget):!0)&&D(q)}function W(q){M()||s.current.floatingContext&&(x.current==null||x.current({...s.current.floatingContext,tree:y,x:q.clientX,y:q.clientY,onClose(){H(),L(),M()||D(q)}})(q))}if(fn(o.domReference)){var F;const q=o.domReference;return n&&q.addEventListener("mouseleave",W),(F=o.floating)==null||F.addEventListener("mouseleave",W),p&&q.addEventListener("mousemove",I,{once:!0}),q.addEventListener("mouseenter",I),q.addEventListener("mouseleave",P),()=>{var X;n&&q.removeEventListener("mouseleave",W),(X=o.floating)==null||X.removeEventListener("mouseleave",W),p&&q.removeEventListener("mousemove",I),q.removeEventListener("mouseenter",I),q.removeEventListener("mouseleave",P)}}},[o,a,e,f,h,p,D,L,H,r,n,N,y,E,x,s,M]),jo(()=>{var I;if(a&&n&&(I=x.current)!=null&&I.__options.blockPointerEvents&&z()){k.current=!0;const W=o.floating;if(fn(o.domReference)&&W){var P;const F=_u(o.floating).body;F.setAttribute(hM,"");const q=o.domReference,X=y==null||(P=y.nodesRef.current.find(Q=>Q.id===v))==null||(P=P.context)==null?void 0:P.elements.floating;return X&&(X.style.pointerEvents=""),F.style.pointerEvents="none",q.style.pointerEvents="auto",W.style.pointerEvents="auto",()=>{F.style.pointerEvents="",q.style.pointerEvents="",W.style.pointerEvents=""}}}},[a,n,v,o,y,x,z]),jo(()=>{n||(_.current=void 0,B.current=!1,L(),H())},[n,L,H]),w.useEffect(()=>()=>{L(),clearTimeout(C.current),clearTimeout(A.current),H()},[a,o.domReference,L,H]);const V=w.useMemo(()=>{function I(P){_.current=P.pointerType}return{onPointerDown:I,onPointerEnter:I,onMouseMove(P){const{nativeEvent:W}=P;function F(){!$.current&&!N.current&&r(!0,W,"hover")}f&&!xC(_.current)||n||h===0||B.current&&P.movementX**2+P.movementY**2<2||(clearTimeout(A.current),_.current==="touch"?F():(B.current=!0,A.current=window.setTimeout(F,h)))}}},[f,r,n,N,h]),T=w.useMemo(()=>({onMouseEnter(){clearTimeout(C.current)},onMouseLeave(I){M()||D(I.nativeEvent,!1)}}),[D,M]);return w.useMemo(()=>a?{reference:V,floating:T}:{},[a,V,T])}const EC=()=>{},W7=w.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:EC,setState:EC,isInstantPhase:!1}),qte=()=>w.useContext(W7);function Hte(e){const{children:t,delay:n,timeoutMs:r=0}=e,[s,i]=w.useReducer((c,u)=>({...c,...u}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),o=w.useRef(null),a=w.useCallback(c=>{i({currentId:c})},[]);return jo(()=>{s.currentId?o.current===null?o.current=s.currentId:s.isInstantPhase||i({isInstantPhase:!0}):(s.isInstantPhase&&i({isInstantPhase:!1}),o.current=null)},[s.currentId,s.isInstantPhase]),w.createElement(W7.Provider,{value:w.useMemo(()=>({...s,setState:i,setCurrentId:a}),[s,a])},t)}function Wte(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,floatingId:s}=e,{id:i,enabled:o=!0}=t,a=i??s,c=qte(),{currentId:u,setCurrentId:f,initialDelay:h,setState:p,timeoutMs:y}=c;return jo(()=>{o&&u&&(p({delay:{open:1,close:Tv(h,"close")}}),u!==a&&r(!1))},[o,a,r,p,u,h]),jo(()=>{function v(){r(!1),p({delay:h,currentId:null})}if(o&&u&&!n&&u===a){if(y){const x=window.setTimeout(v,y);return()=>{clearTimeout(x)}}v()}},[o,n,p,u,a,r,h,y]),jo(()=>{o&&(f===EC||!n||f(a))},[o,n,f,a]),c}function vN(e,t){let n=e.filter(s=>{var i;return s.parentId===t&&((i=s.context)==null?void 0:i.open)}),r=n;for(;r.length;)r=e.filter(s=>{var i;return(i=r)==null?void 0:i.some(o=>{var a;return s.parentId===o.id&&((a=s.context)==null?void 0:a.open)})}),n=n.concat(r);return n}const Gte="data-floating-ui-focusable",Yte={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},Jte={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},mM=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function Xte(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:s,dataRef:i}=e,{enabled:o=!0,escapeKey:a=!0,outsidePress:c=!0,outsidePressEvent:u="pointerdown",referencePress:f=!1,referencePressEvent:h="pointerdown",ancestorScroll:p=!1,bubbles:y,capture:v}=t,x=mA(),E=xa(typeof c=="function"?c:()=>!1),N=typeof c=="function"?E:c,_=w.useRef(!1),C=w.useRef(!1),{escapeKey:j,outsidePress:A}=mM(y),{escapeKey:$,outsidePress:k}=mM(v),R=w.useRef(!1),B=xa(V=>{var T;if(!n||!o||!a||V.key!=="Escape"||R.current)return;const I=(T=i.current.floatingContext)==null?void 0:T.nodeId,P=x?vN(x.nodesRef.current,I):[];if(!j&&(V.stopPropagation(),P.length>0)){let W=!0;if(P.forEach(F=>{var q;if((q=F.context)!=null&&q.open&&!F.context.dataRef.current.__escapeKeyBubbles){W=!1;return}}),!W)return}r(!1,Vee(V)?V.nativeEvent:V,"escape-key")}),z=xa(V=>{var T;const I=()=>{var P;B(V),(P=Af(V))==null||P.removeEventListener("keydown",I)};(T=Af(V))==null||T.addEventListener("keydown",I)}),D=xa(V=>{var T;const I=_.current;_.current=!1;const P=C.current;if(C.current=!1,u==="click"&&P||I||typeof N=="function"&&!N(V))return;const W=Af(V),F="["+pA("inert")+"]",q=_u(s.floating).querySelectorAll(F);let X=fn(W)?W:null;for(;X&&!wc(X);){const de=Fa(X);if(wc(de)||!fn(de))break;X=de}if(q.length&&fn(W)&&!Uee(W)&&!Og(W,s.floating)&&Array.from(q).every(de=>!Og(X,de)))return;if(ks(W)&&M){const de=W.clientWidth>0&&W.scrollWidth>W.clientWidth,ce=W.clientHeight>0&&W.scrollHeight>W.clientHeight;let fe=ce&&V.offsetX>W.clientWidth;if(ce&&li(W).direction==="rtl"&&(fe=V.offsetX<=W.offsetWidth-W.clientWidth),fe||de&&V.offsetY>W.clientHeight)return}const Q=(T=i.current.floatingContext)==null?void 0:T.nodeId,se=x&&vN(x.nodesRef.current,Q).some(de=>{var ce;return pN(V,(ce=de.context)==null?void 0:ce.elements.floating)});if(pN(V,s.floating)||pN(V,s.domReference)||se)return;const ae=x?vN(x.nodesRef.current,Q):[];if(ae.length>0){let de=!0;if(ae.forEach(ce=>{var fe;if((fe=ce.context)!=null&&fe.open&&!ce.context.dataRef.current.__outsidePressBubbles){de=!1;return}}),!de)return}r(!1,V,"outside-press")}),L=xa(V=>{var T;const I=()=>{var P;D(V),(P=Af(V))==null||P.removeEventListener(u,I)};(T=Af(V))==null||T.addEventListener(u,I)});w.useEffect(()=>{if(!n||!o)return;i.current.__escapeKeyBubbles=j,i.current.__outsidePressBubbles=A;let V=-1;function T(q){r(!1,q,"ancestor-scroll")}function I(){window.clearTimeout(V),R.current=!0}function P(){V=window.setTimeout(()=>{R.current=!1},Yw()?5:0)}const W=_u(s.floating);a&&(W.addEventListener("keydown",$?z:B,$),W.addEventListener("compositionstart",I),W.addEventListener("compositionend",P)),N&&W.addEventListener(u,k?L:D,k);let F=[];return p&&(fn(s.domReference)&&(F=Aa(s.domReference)),fn(s.floating)&&(F=F.concat(Aa(s.floating))),!fn(s.reference)&&s.reference&&s.reference.contextElement&&(F=F.concat(Aa(s.reference.contextElement)))),F=F.filter(q=>{var X;return q!==((X=W.defaultView)==null?void 0:X.visualViewport)}),F.forEach(q=>{q.addEventListener("scroll",T,{passive:!0})}),()=>{a&&(W.removeEventListener("keydown",$?z:B,$),W.removeEventListener("compositionstart",I),W.removeEventListener("compositionend",P)),N&&W.removeEventListener(u,k?L:D,k),F.forEach(q=>{q.removeEventListener("scroll",T)}),window.clearTimeout(V)}},[i,s,a,N,u,n,r,p,o,j,A,B,$,z,D,k,L]),w.useEffect(()=>{_.current=!1},[N,u]);const H=w.useMemo(()=>({onKeyDown:B,[Yte[h]]:V=>{f&&r(!1,V.nativeEvent,"reference-press")}}),[B,r,f,h]),M=w.useMemo(()=>({onKeyDown:B,onMouseDown(){C.current=!0},onMouseUp(){C.current=!0},[Jte[u]]:()=>{_.current=!0}}),[B,u]);return w.useMemo(()=>o?{reference:H,floating:M}:{},[o,H,M])}function Kte(e){const{open:t=!1,onOpenChange:n,elements:r}=e,s=H7(),i=w.useRef({}),[o]=w.useState(()=>Bte()),a=hA()!=null,[c,u]=w.useState(r.reference),f=xa((y,v,x)=>{i.current.openEvent=y?v:void 0,o.emit("openchange",{open:y,event:v,reason:x,nested:a}),n==null||n(y,v,x)}),h=w.useMemo(()=>({setPositionReference:u}),[]),p=w.useMemo(()=>({reference:c||r.reference||null,floating:r.floating||null,domReference:r.reference}),[c,r.reference,r.floating]);return w.useMemo(()=>({dataRef:i,open:t,onOpenChange:f,elements:p,events:o,floatingId:s,refs:h}),[t,f,p,o,s,h])}function gA(e){e===void 0&&(e={});const{nodeId:t}=e,n=Kte({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,s=r.elements,[i,o]=w.useState(null),[a,c]=w.useState(null),f=(s==null?void 0:s.domReference)||i,h=w.useRef(null),p=mA();jo(()=>{f&&(h.current=f)},[f]);const y=Rte({...e,elements:{...s,...a&&{reference:a}}}),v=w.useCallback(C=>{const j=fn(C)?{getBoundingClientRect:()=>C.getBoundingClientRect(),contextElement:C}:C;c(j),y.refs.setReference(j)},[y.refs]),x=w.useCallback(C=>{(fn(C)||C===null)&&(h.current=C,o(C)),(fn(y.refs.reference.current)||y.refs.reference.current===null||C!==null&&!fn(C))&&y.refs.setReference(C)},[y.refs]),E=w.useMemo(()=>({...y.refs,setReference:x,setPositionReference:v,domReference:h}),[y.refs,x,v]),N=w.useMemo(()=>({...y.elements,domReference:f}),[y.elements,f]),_=w.useMemo(()=>({...y,...r,refs:E,elements:N,nodeId:t}),[y,E,N,t,r]);return jo(()=>{r.dataRef.current.floatingContext=_;const C=p==null?void 0:p.nodesRef.current.find(j=>j.id===t);C&&(C.context=_)}),w.useMemo(()=>({...y,context:_,refs:E,elements:N}),[y,E,N,_])}function Qte(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,events:s,dataRef:i,elements:o}=e,{enabled:a=!0,visibleOnly:c=!0}=t,u=w.useRef(!1),f=w.useRef(),h=w.useRef(!0);w.useEffect(()=>{if(!a)return;const y=os(o.domReference);function v(){!n&&ks(o.domReference)&&o.domReference===rM(_u(o.domReference))&&(u.current=!0)}function x(){h.current=!0}return y.addEventListener("blur",v),y.addEventListener("keydown",x,!0),()=>{y.removeEventListener("blur",v),y.removeEventListener("keydown",x,!0)}},[o.domReference,n,a]),w.useEffect(()=>{if(!a)return;function y(v){let{reason:x}=v;(x==="reference-press"||x==="escape-key")&&(u.current=!0)}return s.on("openchange",y),()=>{s.off("openchange",y)}},[s,a]),w.useEffect(()=>()=>{clearTimeout(f.current)},[]);const p=w.useMemo(()=>({onPointerDown(y){Lee(y.nativeEvent)||(h.current=!1)},onMouseLeave(){u.current=!1},onFocus(y){if(u.current)return;const v=Af(y.nativeEvent);if(c&&fn(v))try{if(Fee()&&Bee())throw Error();if(!v.matches(":focus-visible"))return}catch{if(!h.current&&!Hee(v))return}r(!0,y.nativeEvent,"focus")},onBlur(y){u.current=!1;const v=y.relatedTarget,x=y.nativeEvent,E=fn(v)&&v.hasAttribute(pA("focus-guard"))&&v.getAttribute("data-type")==="outside";f.current=window.setTimeout(()=>{var N;const _=rM(o.domReference?o.domReference.ownerDocument:document);!v&&_===o.domReference||Og((N=i.current.floatingContext)==null?void 0:N.refs.floating.current,_)||Og(o.domReference,_)||E||r(!1,x,"focus")})}}),[i,o.domReference,r,c]);return w.useMemo(()=>a?{reference:p}:{},[a,p])}const pM="active",gM="selected";function xN(e,t,n){const r=new Map,s=n==="item";let i=e;if(s&&e){const{[pM]:o,[gM]:a,...c}=e;i=c}return{...n==="floating"&&{tabIndex:-1,[Gte]:""},...i,...t.map(o=>{const a=o?o[n]:null;return typeof a=="function"?e?a(e):null:a}).concat(e).reduce((o,a)=>(a&&Object.entries(a).forEach(c=>{let[u,f]=c;if(!(s&&[pM,gM].includes(u)))if(u.indexOf("on")===0){if(r.has(u)||r.set(u,[]),typeof f=="function"){var h;(h=r.get(u))==null||h.push(f),o[u]=function(){for(var p,y=arguments.length,v=new Array(y),x=0;x<y;x++)v[x]=arguments[x];return(p=r.get(u))==null?void 0:p.map(E=>E(...v)).find(E=>E!==void 0)}}}else o[u]=f}),o),{})}}function Zte(e){e===void 0&&(e=[]);const t=e.map(a=>a==null?void 0:a.reference),n=e.map(a=>a==null?void 0:a.floating),r=e.map(a=>a==null?void 0:a.item),s=w.useCallback(a=>xN(a,e,"reference"),t),i=w.useCallback(a=>xN(a,e,"floating"),n),o=w.useCallback(a=>xN(a,e,"item"),r);return w.useMemo(()=>({getReferenceProps:s,getFloatingProps:i,getItemProps:o}),[s,i,o])}const ene=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function tne(e,t){var n;t===void 0&&(t={});const{open:r,floatingId:s}=e,{enabled:i=!0,role:o="dialog"}=t,a=(n=ene.get(o))!=null?n:o,c=H7(),f=hA()!=null,h=w.useMemo(()=>a==="tooltip"||o==="label"?{["aria-"+(o==="label"?"labelledby":"describedby")]:r?s:void 0}:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?s:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:c},...a==="menu"&&f&&{role:"menuitem"},...o==="select"&&{"aria-autocomplete":"none"},...o==="combobox"&&{"aria-autocomplete":"list"}},[a,s,f,r,c,o]),p=w.useMemo(()=>{const v={id:s,...a&&{role:a}};return a==="tooltip"||o==="label"?v:{...v,...a==="menu"&&{"aria-labelledby":c}}},[a,s,c,o]),y=w.useCallback(v=>{let{active:x,selected:E}=v;const N={role:"option",...x&&{id:s+"-option"}};switch(o){case"select":return{...N,"aria-selected":x&&E};case"combobox":return{...N,...x&&{"aria-selected":!0}}}return{}},[s,o]);return w.useMemo(()=>i?{reference:h,floating:p,item:y}:{},[i,h,p,y])}function G7(e,t){if(e==="rtl"&&(t.includes("right")||t.includes("left"))){const[n,r]=t.split("-"),s=n==="right"?"left":"right";return r===void 0?s:`${s}-${r}`}return t}function yM(e,t,n,r){return e==="center"||r==="center"?{top:t}:e==="end"?{bottom:n}:e==="start"?{top:n}:{}}function bM(e,t,n,r,s){return e==="center"||r==="center"?{left:t}:e==="end"?{[s==="ltr"?"right":"left"]:n}:e==="start"?{[s==="ltr"?"left":"right"]:n}:{}}const nne={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function rne({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:s,arrowX:i,arrowY:o,dir:a}){const[c,u="center"]=e.split("-"),f={width:t,height:t,transform:"rotate(45deg)",position:"absolute",[nne[c]]:r},h=-t/2;return c==="left"?{...f,...yM(u,o,n,s),right:h,borderLeftColor:"transparent",borderBottomColor:"transparent",clipPath:"polygon(100% 0, 0 0, 100% 100%)"}:c==="right"?{...f,...yM(u,o,n,s),left:h,borderRightColor:"transparent",borderTopColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 100%)"}:c==="top"?{...f,...bM(u,i,n,s,a),bottom:h,borderTopColor:"transparent",borderLeftColor:"transparent",clipPath:"polygon(0 100%, 100% 100%, 100% 0)"}:c==="bottom"?{...f,...bM(u,i,n,s,a),top:h,borderBottomColor:"transparent",borderRightColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 0)"}:{}}const yA=w.forwardRef(({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:s,visible:i,arrowX:o,arrowY:a,style:c,...u},f)=>{const{dir:h}=Mc();return i?m.jsx("div",{...u,ref:f,style:{...c,...rne({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:s,dir:h,arrowX:o,arrowY:a})}}):null});yA.displayName="@mantine/core/FloatingArrow";var Y7={root:"m_9814e45f"};const sne={zIndex:to("modal")},ine=(e,{gradient:t,color:n,backgroundOpacity:r,blur:s,radius:i,zIndex:o})=>({root:{"--overlay-bg":t||(n!==void 0||r!==void 0)&&go(n||"#000",r??.6)||void 0,"--overlay-filter":s?`blur(${Te(s)})`:void 0,"--overlay-radius":i===void 0?void 0:Qn(i),"--overlay-z-index":o==null?void 0:o.toString()}}),Xw=kc((e,t)=>{const n=Pe("Overlay",sne,e),{classNames:r,className:s,style:i,styles:o,unstyled:a,vars:c,fixed:u,center:f,children:h,radius:p,zIndex:y,gradient:v,blur:x,color:E,backgroundOpacity:N,mod:_,...C}=n,j=wt({name:"Overlay",props:n,classes:Y7,className:s,style:i,classNames:r,styles:o,unstyled:a,vars:c,varsResolver:ine});return m.jsx(Ve,{ref:t,...j("root"),mod:[{center:f,fixed:u},_],...C,children:h})});Xw.classes=Y7;Xw.displayName="@mantine/core/Overlay";function wN(e){const t=document.createElement("div");return t.setAttribute("data-portal","true"),typeof e.className=="string"&&t.classList.add(...e.className.split(" ").filter(Boolean)),typeof e.style=="object"&&Object.assign(t.style,e.style),typeof e.id=="string"&&t.setAttribute("id",e.id),t}function one({target:e,reuseTargetNode:t,...n}){if(e)return typeof e=="string"?document.querySelector(e)||wN(n):e;if(t){const r=document.querySelector("[data-mantine-shared-portal-node]");if(r)return r;const s=wN(n);return s.setAttribute("data-mantine-shared-portal-node","true"),document.body.appendChild(s),s}return wN(n)}const ane={},J7=Ye((e,t)=>{const{children:n,target:r,reuseTargetNode:s,...i}=Pe("Portal",ane,e),[o,a]=w.useState(!1),c=w.useRef(null);return Kh(()=>(a(!0),c.current=one({target:r,reuseTargetNode:s,...i}),ix(t,c.current),!r&&!s&&c.current&&document.body.appendChild(c.current),()=>{!r&&!s&&c.current&&document.body.removeChild(c.current)}),[r]),!o||!c.current?null:Ty.createPortal(m.jsx(m.Fragment,{children:n}),c.current)});J7.displayName="@mantine/core/Portal";const hd=Ye(({withinPortal:e=!0,children:t,...n},r)=>i7()==="test"||!e?m.jsx(m.Fragment,{children:t}):m.jsx(J7,{ref:r,...n,children:t}));hd.displayName="@mantine/core/OptionalPortal";const jp=e=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${e==="bottom"?10:-10}px)`},transitionProperty:"transform, opacity"}),Bb={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(30px)"},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-30px)"},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(30px)"},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-30px)"},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(-20px) skew(-10deg, -5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(20px) skew(-10deg, -5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(-5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...jp("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...jp("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...jp("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...jp("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...jp("top"),common:{transformOrigin:"top right"}}},vM={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function lne({transition:e,state:t,duration:n,timingFunction:r}){const s={transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof e=="string"?e in Bb?{transitionProperty:Bb[e].transitionProperty,...s,...Bb[e].common,...Bb[e][vM[t]]}:{}:{transitionProperty:e.transitionProperty,...s,...e.common,...e[vM[t]]}}function cne({duration:e,exitDuration:t,timingFunction:n,mounted:r,onEnter:s,onExit:i,onEntered:o,onExited:a,enterDelay:c,exitDelay:u}){const f=Ds(),h=Wj(),p=f.respectReducedMotion?h:!1,[y,v]=w.useState(p?0:e),[x,E]=w.useState(r?"entered":"exited"),N=w.useRef(-1),_=w.useRef(-1),C=w.useRef(-1),j=$=>{const k=$?s:i,R=$?o:a;window.clearTimeout(N.current);const B=p?0:$?e:t;v(B),B===0?(typeof k=="function"&&k(),typeof R=="function"&&R(),E($?"entered":"exited")):C.current=requestAnimationFrame(()=>{Df.flushSync(()=>{E($?"pre-entering":"pre-exiting")}),C.current=requestAnimationFrame(()=>{typeof k=="function"&&k(),E($?"entering":"exiting"),N.current=window.setTimeout(()=>{typeof R=="function"&&R(),E($?"entered":"exited")},B)})})},A=$=>{if(window.clearTimeout(_.current),typeof($?c:u)!="number"){j($);return}_.current=window.setTimeout(()=>{j($)},$?c:u)};return Da(()=>{A(r)},[r]),w.useEffect(()=>()=>{window.clearTimeout(N.current),cancelAnimationFrame(C.current)},[]),{transitionDuration:y,transitionStatus:x,transitionTimingFunction:n||"ease"}}function Ic({keepMounted:e,transition:t="fade",duration:n=250,exitDuration:r=n,mounted:s,children:i,timingFunction:o="ease",onExit:a,onEntered:c,onEnter:u,onExited:f,enterDelay:h,exitDelay:p}){const y=i7(),{transitionDuration:v,transitionStatus:x,transitionTimingFunction:E}=cne({mounted:s,exitDuration:r,duration:n,timingFunction:o,onExit:a,onEntered:c,onEnter:u,onExited:f,enterDelay:h,exitDelay:p});return v===0||y==="test"?s?m.jsx(m.Fragment,{children:i({})}):e?i({display:"none"}):null:x==="exited"?e?i({display:"none"}):null:m.jsx(m.Fragment,{children:i(lne({transition:t,duration:v,state:x,timingFunction:E}))})}Ic.displayName="@mantine/core/Transition";const[une,X7]=Ya("Popover component was not found in the tree");function Kw({children:e,active:t=!0,refProp:n="ref",innerRef:r}){const s=JQ(t),i=jn(s,r);return Tc(e)?w.cloneElement(e,{[n]:i}):e}function K7(e){return m.jsx(nA,{tabIndex:-1,"data-autofocus":!0,...e})}Kw.displayName="@mantine/core/FocusTrap";K7.displayName="@mantine/core/FocusTrapInitialFocus";Kw.InitialFocus=K7;var Q7={dropdown:"m_38a85659",arrow:"m_a31dc6c1",overlay:"m_3d7bc908"};const dne={},bA=Ye((e,t)=>{var E,N,_,C;const n=Pe("PopoverDropdown",dne,e),{className:r,style:s,vars:i,children:o,onKeyDownCapture:a,variant:c,classNames:u,styles:f,...h}=n,p=X7(),y=Q8({opened:p.opened,shouldReturnFocus:p.returnFocus}),v=p.withRoles?{"aria-labelledby":p.getTargetId(),id:p.getDropdownId(),role:"dialog",tabIndex:-1}:{},x=jn(t,p.floating);return p.disabled?null:m.jsx(hd,{...p.portalProps,withinPortal:p.withinPortal,children:m.jsx(Ic,{mounted:p.opened,...p.transitionProps,transition:((E=p.transitionProps)==null?void 0:E.transition)||"fade",duration:((N=p.transitionProps)==null?void 0:N.duration)??150,keepMounted:p.keepMounted,exitDuration:typeof((_=p.transitionProps)==null?void 0:_.exitDuration)=="number"?p.transitionProps.exitDuration:(C=p.transitionProps)==null?void 0:C.duration,children:j=>m.jsx(Kw,{active:p.trapFocus&&p.opened,innerRef:x,children:m.jsxs(Ve,{...v,...h,variant:c,onKeyDownCapture:PQ(()=>{var A,$;(A=p.onClose)==null||A.call(p),($=p.onDismiss)==null||$.call(p)},{active:p.closeOnEscape,onTrigger:y,onKeyDown:a}),"data-position":p.placement,"data-fixed":p.floatingStrategy==="fixed"||void 0,...p.getStyles("dropdown",{className:r,props:n,classNames:u,styles:f,style:[{...j,zIndex:p.zIndex,top:p.y??0,left:p.x??0,width:p.width==="target"?void 0:Te(p.width)},p.resolvedStyles.dropdown,f==null?void 0:f.dropdown,s]}),children:[o,m.jsx(yA,{ref:p.arrowRef,arrowX:p.arrowX,arrowY:p.arrowY,visible:p.withArrow,position:p.placement,arrowSize:p.arrowSize,arrowRadius:p.arrowRadius,arrowOffset:p.arrowOffset,arrowPosition:p.arrowPosition,...p.getStyles("arrow",{props:n,classNames:u,styles:f})})]})})})})});bA.classes=Q7;bA.displayName="@mantine/core/PopoverDropdown";const fne={refProp:"ref",popupType:"dialog"},Z7=Ye((e,t)=>{const{children:n,refProp:r,popupType:s,...i}=Pe("PopoverTarget",fne,e);if(!Tc(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const o=i,a=X7(),c=jn(a.reference,Vw(n),t),u=a.withRoles?{"aria-haspopup":s,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return w.cloneElement(n,{...o,...u,...a.targetProps,className:yn(a.targetProps.className,o.className,n.props.className),[r]:c,...a.controlled?null:{onClick:a.onToggle}})});Z7.displayName="@mantine/core/PopoverTarget";function eL({opened:e,floating:t,position:n,positionDependencies:r}){const[s,i]=w.useState(0);w.useEffect(()=>{if(t.refs.reference.current&&t.refs.floating.current&&e)return Nte(t.refs.reference.current,t.refs.floating.current,t.update)},[t.refs.reference.current,t.refs.floating.current,e,s,n]),Da(()=>{t.update()},r),Da(()=>{i(o=>o+1)},[e])}function hne(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function mne(e,t){const n=hne(e.middlewares),r=[V7(e.offset)];return n.shift&&r.push(fA(typeof n.shift=="boolean"?{limiter:uM(),padding:5}:{limiter:uM(),padding:5,...n.shift})),n.flip&&r.push(typeof n.flip=="boolean"?ux():ux(n.flip)),n.inline&&r.push(typeof n.inline=="boolean"?ng():ng(n.inline)),r.push(U7({element:e.arrowRef,padding:e.arrowOffset})),(n.size||e.width==="target")&&r.push(Mte({...typeof n.size=="boolean"?{}:n.size,apply({rects:s,availableWidth:i,availableHeight:o,...a}){var f;const u=((f=t().refs.floating.current)==null?void 0:f.style)??{};n.size&&(typeof n.size=="object"&&n.size.apply?n.size.apply({rects:s,availableWidth:i,availableHeight:o,...a}):Object.assign(u,{maxWidth:`${i}px`,maxHeight:`${o}px`})),e.width==="target"&&Object.assign(u,{width:`${s.reference.width}px`})}})),r}function pne(e){const[t,n]=cs({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),r=w.useRef(t),s=()=>{t&&n(!1)},i=()=>n(!t),o=gA({strategy:e.strategy,placement:e.position,middleware:mne(e,()=>o)});return eL({opened:t,position:e.position,positionDependencies:e.positionDependencies||[],floating:o}),Da(()=>{var a;(a=e.onPositionChange)==null||a.call(e,o.placement)},[o.placement]),Da(()=>{var a,c;t!==r.current&&(t?(c=e.onOpen)==null||c.call(e):(a=e.onClose)==null||a.call(e)),r.current=t},[t,e.onClose,e.onOpen]),{floating:o,controlled:typeof e.opened=="boolean",opened:t,onClose:s,onToggle:i}}const gne={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,withOverlay:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:to("popover"),__staticSelector:"Popover",width:"max-content"},yne=(e,{radius:t,shadow:n})=>({dropdown:{"--popover-radius":t===void 0?void 0:Qn(t),"--popover-shadow":Hj(n)}});function as(e){var ne,le,xe,Ne,Ge,Vt;const t=Pe("Popover",gne,e),{children:n,position:r,offset:s,onPositionChange:i,positionDependencies:o,opened:a,transitionProps:c,onExitTransitionEnd:u,onEnterTransitionEnd:f,width:h,middlewares:p,withArrow:y,arrowSize:v,arrowOffset:x,arrowRadius:E,arrowPosition:N,unstyled:_,classNames:C,styles:j,closeOnClickOutside:A,withinPortal:$,portalProps:k,closeOnEscape:R,clickOutsideEvents:B,trapFocus:z,onClose:D,onDismiss:L,onOpen:H,onChange:M,zIndex:V,radius:T,shadow:I,id:P,defaultOpened:W,__staticSelector:F,withRoles:q,disabled:X,returnFocus:Q,variant:se,keepMounted:ae,vars:de,floatingStrategy:ce,withOverlay:fe,overlayProps:ve,...Ae}=t,Ce=wt({name:F,props:t,classes:Q7,classNames:C,styles:j,unstyled:_,rootSelector:"dropdown",vars:de,varsResolver:yne}),{resolvedStyles:Ee}=Qh({classNames:C,styles:j,props:t}),Re=w.useRef(null),[ke,He]=w.useState(null),[et,Oe]=w.useState(null),{dir:Me}=Mc(),Ie=hi(P),G=pne({middlewares:p,width:h,position:G7(Me,r),offset:typeof s=="number"?s+(y?v/2:0):s,arrowRef:Re,arrowOffset:x,onPositionChange:i,positionDependencies:o,opened:a,defaultOpened:W,onChange:M,onOpen:H,onClose:D,onDismiss:L,strategy:ce});BQ(()=>{A&&(G.onClose(),L==null||L())},B,[ke,et]);const re=w.useCallback(St=>{He(St),G.floating.refs.setReference(St)},[G.floating.refs.setReference]),te=w.useCallback(St=>{Oe(St),G.floating.refs.setFloating(St)},[G.floating.refs.setFloating]),he=w.useCallback(()=>{var St;(St=c==null?void 0:c.onExited)==null||St.call(c),u==null||u()},[c==null?void 0:c.onExited,u]),ie=w.useCallback(()=>{var St;(St=c==null?void 0:c.onEntered)==null||St.call(c),f==null||f()},[c==null?void 0:c.onEntered,f]);return m.jsxs(une,{value:{returnFocus:Q,disabled:X,controlled:G.controlled,reference:re,floating:te,x:G.floating.x,y:G.floating.y,arrowX:(xe=(le=(ne=G.floating)==null?void 0:ne.middlewareData)==null?void 0:le.arrow)==null?void 0:xe.x,arrowY:(Vt=(Ge=(Ne=G.floating)==null?void 0:Ne.middlewareData)==null?void 0:Ge.arrow)==null?void 0:Vt.y,opened:G.opened,arrowRef:Re,transitionProps:{...c,onExited:he,onEntered:ie},width:h,withArrow:y,arrowSize:v,arrowOffset:x,arrowRadius:E,arrowPosition:N,placement:G.floating.placement,trapFocus:z,withinPortal:$,portalProps:k,zIndex:V,radius:T,shadow:I,closeOnEscape:R,onDismiss:L,onClose:G.onClose,onToggle:G.onToggle,getTargetId:()=>`${Ie}-target`,getDropdownId:()=>`${Ie}-dropdown`,withRoles:q,targetProps:Ae,__staticSelector:F,classNames:C,styles:j,unstyled:_,variant:se,keepMounted:ae,getStyles:Ce,resolvedStyles:Ee,floatingStrategy:ce},children:[n,fe&&m.jsx(Ic,{transition:"fade",mounted:G.opened,duration:(c==null?void 0:c.duration)||250,exitDuration:(c==null?void 0:c.exitDuration)||250,children:St=>m.jsx(hd,{withinPortal:$,children:m.jsx(Xw,{...ve,...Ce("overlay",{className:ve==null?void 0:ve.className,style:[St,ve==null?void 0:ve.style]})})})})]})}as.Target=Z7;as.Dropdown=bA;as.displayName="@mantine/core/Popover";as.extend=e=>e;var zi={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const tL=w.forwardRef(({className:e,...t},n)=>m.jsxs(Ve,{component:"span",className:yn(zi.barsLoader,e),...t,ref:n,children:[m.jsx("span",{className:zi.bar}),m.jsx("span",{className:zi.bar}),m.jsx("span",{className:zi.bar})]}));tL.displayName="@mantine/core/Bars";const nL=w.forwardRef(({className:e,...t},n)=>m.jsxs(Ve,{component:"span",className:yn(zi.dotsLoader,e),...t,ref:n,children:[m.jsx("span",{className:zi.dot}),m.jsx("span",{className:zi.dot}),m.jsx("span",{className:zi.dot})]}));nL.displayName="@mantine/core/Dots";const rL=w.forwardRef(({className:e,...t},n)=>m.jsx(Ve,{component:"span",className:yn(zi.ovalLoader,e),...t,ref:n}));rL.displayName="@mantine/core/Oval";const sL={bars:tL,oval:rL,dots:nL},bne={loaders:sL,type:"oval"},vne=(e,{size:t,color:n})=>({root:{"--loader-size":Mt(t,"loader-size"),"--loader-color":n?Cr(n,e):void 0}}),ky=Ye((e,t)=>{const n=Pe("Loader",bne,e),{size:r,color:s,type:i,vars:o,className:a,style:c,classNames:u,styles:f,unstyled:h,loaders:p,variant:y,children:v,...x}=n,E=wt({name:"Loader",props:n,classes:zi,className:a,style:c,classNames:u,styles:f,unstyled:h,vars:o,varsResolver:vne});return v?m.jsx(Ve,{...E("root"),ref:t,...x,children:v}):m.jsx(Ve,{...E("root"),ref:t,component:p[i],variant:y,size:r,...x})});ky.defaultLoaders=sL;ky.classes=zi;ky.displayName="@mantine/core/Loader";const iL=w.forwardRef(({size:e="var(--cb-icon-size, 70%)",style:t,...n},r)=>m.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...t,width:e,height:e},ref:r,...n,children:m.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));iL.displayName="@mantine/core/CloseIcon";var oL={root:"m_86a44da5","root--subtle":"m_220c80f2"};const xne={variant:"subtle"},wne=(e,{size:t,radius:n,iconSize:r})=>({root:{"--cb-size":Mt(t,"cb-size"),"--cb-radius":n===void 0?void 0:Qn(n),"--cb-icon-size":Te(r)}}),nm=kc((e,t)=>{const n=Pe("CloseButton",xne,e),{iconSize:r,children:s,vars:i,radius:o,className:a,classNames:c,style:u,styles:f,unstyled:h,"data-disabled":p,disabled:y,variant:v,icon:x,mod:E,__staticSelector:N,..._}=n,C=wt({name:N||"CloseButton",props:n,className:a,style:u,classes:oL,classNames:c,styles:f,unstyled:h,vars:i,varsResolver:wne});return m.jsxs(La,{ref:t,..._,unstyled:h,variant:v,disabled:y,mod:[{disabled:y||p},E],...C("root",{variant:v,active:!y&&!p}),children:[x||m.jsx(iL,{}),s]})});nm.classes=oL;nm.displayName="@mantine/core/CloseButton";function Sne(e){return w.Children.toArray(e).filter(Boolean)}var aL={root:"m_4081bf90"};const Ene={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},Nne=(e,{grow:t,preventGrowOverflow:n,gap:r,align:s,justify:i,wrap:o},{childWidth:a})=>({root:{"--group-child-width":t&&n?a:void 0,"--group-gap":qj(r),"--group-align":s,"--group-justify":i,"--group-wrap":o}}),vA=Ye((e,t)=>{const n=Pe("Group",Ene,e),{classNames:r,className:s,style:i,styles:o,unstyled:a,children:c,gap:u,align:f,justify:h,wrap:p,grow:y,preventGrowOverflow:v,vars:x,variant:E,__size:N,mod:_,...C}=n,j=Sne(c),A=j.length,$=qj(u??"md"),R={childWidth:`calc(${100/A}% - (${$} - ${$} / ${A}))`},B=wt({name:"Group",props:n,stylesCtx:R,className:s,style:i,classes:aL,classNames:r,styles:o,unstyled:a,vars:x,varsResolver:Nne});return m.jsx(Ve,{...B("root"),ref:t,variant:E,mod:[{grow:y},_],size:N,...C,children:j})});vA.classes=aL;vA.displayName="@mantine/core/Group";const[_ne,Ja]=Ya("ModalBase component was not found in tree");function Cne({opened:e,transitionDuration:t}){const[n,r]=w.useState(e),s=w.useRef(-1),o=Wj()?0:t;return w.useEffect(()=>(e?(r(!0),window.clearTimeout(s.current)):o===0?r(!1):s.current=window.setTimeout(()=>r(!1),o),()=>window.clearTimeout(s.current)),[e,o]),n}function One({id:e,transitionProps:t,opened:n,trapFocus:r,closeOnEscape:s,onClose:i,returnFocus:o}){const a=hi(e),[c,u]=w.useState(!1),[f,h]=w.useState(!1),p=typeof(t==null?void 0:t.duration)=="number"?t==null?void 0:t.duration:200,y=Cne({opened:n,transitionDuration:p});return eZ("keydown",v=>{var x;v.key==="Escape"&&s&&n&&((x=v.target)==null?void 0:x.getAttribute("data-mantine-stop-propagation"))!=="true"&&i()},{capture:!0}),Q8({opened:n,shouldReturnFocus:r&&o}),{_id:a,titleMounted:c,bodyMounted:f,shouldLockScroll:y,setTitleMounted:u,setBodyMounted:h}}const lL=w.forwardRef(({keepMounted:e,opened:t,onClose:n,id:r,transitionProps:s,onExitTransitionEnd:i,onEnterTransitionEnd:o,trapFocus:a,closeOnEscape:c,returnFocus:u,closeOnClickOutside:f,withinPortal:h,portalProps:p,lockScroll:y,children:v,zIndex:x,shadow:E,padding:N,__vars:_,unstyled:C,removeScrollProps:j,...A},$)=>{const{_id:k,titleMounted:R,bodyMounted:B,shouldLockScroll:z,setTitleMounted:D,setBodyMounted:L}=One({id:r,transitionProps:s,opened:t,trapFocus:a,closeOnEscape:c,onClose:n,returnFocus:u}),{key:H,...M}=j||{};return m.jsx(hd,{...p,withinPortal:h,children:m.jsx(_ne,{value:{opened:t,onClose:n,closeOnClickOutside:f,onExitTransitionEnd:i,onEnterTransitionEnd:o,transitionProps:{...s,keepMounted:e},getTitleId:()=>`${k}-title`,getBodyId:()=>`${k}-body`,titleMounted:R,bodyMounted:B,setTitleMounted:D,setBodyMounted:L,trapFocus:a,closeOnEscape:c,zIndex:x,unstyled:C},children:m.jsx(rx,{enabled:z&&y,...M,children:m.jsx(Ve,{ref:$,...A,__vars:{..._,"--mb-z-index":(x||to("modal")).toString(),"--mb-shadow":Hj(E),"--mb-padding":qj(N)},children:v})},H)})})});lL.displayName="@mantine/core/ModalBase";function jne(){const e=Ja();return w.useEffect(()=>(e.setBodyMounted(!0),()=>e.setBodyMounted(!1)),[]),e.getBodyId()}var Eh={title:"m_615af6c9",header:"m_b5489c3c",inner:"m_60c222c7",content:"m_fd1ab0aa",close:"m_606cb269",body:"m_5df29311"};const cL=w.forwardRef(({className:e,...t},n)=>{const r=jne(),s=Ja();return m.jsx(Ve,{ref:n,...t,id:r,className:yn({[Eh.body]:!s.unstyled},e)})});cL.displayName="@mantine/core/ModalBaseBody";const uL=w.forwardRef(({className:e,onClick:t,...n},r)=>{const s=Ja();return m.jsx(nm,{ref:r,...n,onClick:i=>{s.onClose(),t==null||t(i)},className:yn({[Eh.close]:!s.unstyled},e),unstyled:s.unstyled})});uL.displayName="@mantine/core/ModalBaseCloseButton";const dL=w.forwardRef(({transitionProps:e,className:t,innerProps:n,onKeyDown:r,style:s,...i},o)=>{const a=Ja();return m.jsx(Ic,{mounted:a.opened,transition:"pop",...a.transitionProps,onExited:()=>{var c,u,f;(c=a.onExitTransitionEnd)==null||c.call(a),(f=(u=a.transitionProps)==null?void 0:u.onExited)==null||f.call(u)},onEntered:()=>{var c,u,f;(c=a.onEnterTransitionEnd)==null||c.call(a),(f=(u=a.transitionProps)==null?void 0:u.onEntered)==null||f.call(u)},...e,children:c=>m.jsx("div",{...n,className:yn({[Eh.inner]:!a.unstyled},n.className),children:m.jsx(Kw,{active:a.opened&&a.trapFocus,innerRef:o,children:m.jsx(rA,{...i,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":a.bodyMounted?a.getBodyId():void 0,"aria-labelledby":a.titleMounted?a.getTitleId():void 0,style:[s,c],className:yn({[Eh.content]:!a.unstyled},t),unstyled:a.unstyled,children:i.children})})})})});dL.displayName="@mantine/core/ModalBaseContent";const fL=w.forwardRef(({className:e,...t},n)=>{const r=Ja();return m.jsx(Ve,{component:"header",ref:n,className:yn({[Eh.header]:!r.unstyled},e),...t})});fL.displayName="@mantine/core/ModalBaseHeader";const Ane={duration:200,timingFunction:"ease",transition:"fade"};function Tne(e){const t=Ja();return{...Ane,...t.transitionProps,...e}}const hL=w.forwardRef(({onClick:e,transitionProps:t,style:n,visible:r,...s},i)=>{const o=Ja(),a=Tne(t);return m.jsx(Ic,{mounted:r!==void 0?r:o.opened,...a,transition:"fade",children:c=>m.jsx(Xw,{ref:i,fixed:!0,style:[n,c],zIndex:o.zIndex,unstyled:o.unstyled,onClick:u=>{e==null||e(u),o.closeOnClickOutside&&o.onClose()},...s})})});hL.displayName="@mantine/core/ModalBaseOverlay";function $ne(){const e=Ja();return w.useEffect(()=>(e.setTitleMounted(!0),()=>e.setTitleMounted(!1)),[]),e.getTitleId()}const mL=w.forwardRef(({className:e,...t},n)=>{const r=$ne(),s=Ja();return m.jsx(Ve,{component:"h2",ref:n,className:yn({[Eh.title]:!s.unstyled},e),...t,id:r})});mL.displayName="@mantine/core/ModalBaseTitle";function Rne({children:e}){return m.jsx(m.Fragment,{children:e})}const[kne,Mne]=fd({size:"sm"}),Ine={},pL=Ye((e,t)=>{const n=Pe("InputClearButton",Ine,e),{size:r,variant:s,vars:i,classNames:o,styles:a,...c}=n,u=Mne(),{resolvedClassNames:f,resolvedStyles:h}=Qh({classNames:o,styles:a,props:n});return m.jsx(nm,{variant:s||"transparent",ref:t,size:r||(u==null?void 0:u.size)||"sm",classNames:f,styles:h,__staticSelector:"InputClearButton",...c})});pL.displayName="@mantine/core/InputClearButton";const[Pne,rm]=fd({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var pi={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const xM={},Dne=(e,{size:t})=>({description:{"--input-description-size":t===void 0?void 0:`calc(${qr(t)} - ${Te(2)})`}}),Qw=Ye((e,t)=>{const n=Pe("InputDescription",xM,e),{classNames:r,className:s,style:i,styles:o,unstyled:a,vars:c,size:u,__staticSelector:f,__inheritStyles:h=!0,variant:p,...y}=Pe("InputDescription",xM,n),v=rm(),x=wt({name:["InputWrapper",f],props:n,classes:pi,className:s,style:i,classNames:r,styles:o,unstyled:a,rootSelector:"description",vars:c,varsResolver:Dne}),E=h&&(v==null?void 0:v.getStyles)||x;return m.jsx(Ve,{component:"p",ref:t,variant:p,size:u,...E("description",v!=null&&v.getStyles?{className:s,style:i}:void 0),...y})});Qw.classes=pi;Qw.displayName="@mantine/core/InputDescription";const Lne={},Fne=(e,{size:t})=>({error:{"--input-error-size":t===void 0?void 0:`calc(${qr(t)} - ${Te(2)})`}}),Zw=Ye((e,t)=>{const n=Pe("InputError",Lne,e),{classNames:r,className:s,style:i,styles:o,unstyled:a,vars:c,size:u,__staticSelector:f,__inheritStyles:h=!0,variant:p,...y}=n,v=wt({name:["InputWrapper",f],props:n,classes:pi,className:s,style:i,classNames:r,styles:o,unstyled:a,rootSelector:"error",vars:c,varsResolver:Fne}),x=rm(),E=h&&(x==null?void 0:x.getStyles)||v;return m.jsx(Ve,{component:"p",ref:t,variant:p,size:u,...E("error",x!=null&&x.getStyles?{className:s,style:i}:void 0),...y})});Zw.classes=pi;Zw.displayName="@mantine/core/InputError";const wM={labelElement:"label"},Bne=(e,{size:t})=>({label:{"--input-label-size":qr(t),"--input-asterisk-color":void 0}}),e1=Ye((e,t)=>{const n=Pe("InputLabel",wM,e),{classNames:r,className:s,style:i,styles:o,unstyled:a,vars:c,labelElement:u,size:f,required:h,htmlFor:p,onMouseDown:y,children:v,__staticSelector:x,variant:E,mod:N,..._}=Pe("InputLabel",wM,n),C=wt({name:["InputWrapper",x],props:n,classes:pi,className:s,style:i,classNames:r,styles:o,unstyled:a,rootSelector:"label",vars:c,varsResolver:Bne}),j=rm(),A=(j==null?void 0:j.getStyles)||C;return m.jsxs(Ve,{...A("label",j!=null&&j.getStyles?{className:s,style:i}:void 0),component:u,variant:E,size:f,ref:t,htmlFor:u==="label"?p:void 0,mod:[{required:h},N],onMouseDown:$=>{y==null||y($),!$.defaultPrevented&&$.detail>1&&$.preventDefault()},..._,children:[v,h&&m.jsx("span",{...A("required"),"aria-hidden":!0,children:" *"})]})});e1.classes=pi;e1.displayName="@mantine/core/InputLabel";const SM={},xA=Ye((e,t)=>{const n=Pe("InputPlaceholder",SM,e),{classNames:r,className:s,style:i,styles:o,unstyled:a,vars:c,__staticSelector:u,variant:f,error:h,mod:p,...y}=Pe("InputPlaceholder",SM,n),v=wt({name:["InputPlaceholder",u],props:n,classes:pi,className:s,style:i,classNames:r,styles:o,unstyled:a,rootSelector:"placeholder"});return m.jsx(Ve,{...v("placeholder"),mod:[{error:!!h},p],component:"span",variant:f,ref:t,...y})});xA.classes=pi;xA.displayName="@mantine/core/InputPlaceholder";function zne(e,{hasDescription:t,hasError:n}){const r=e.findIndex(c=>c==="input"),s=e.slice(0,r),i=e.slice(r+1),o=t&&s.includes("description")||n&&s.includes("error");return{offsetBottom:t&&i.includes("description")||n&&i.includes("error"),offsetTop:o}}const Vne={labelElement:"label",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},Une=(e,{size:t})=>({label:{"--input-label-size":qr(t),"--input-asterisk-color":void 0},error:{"--input-error-size":t===void 0?void 0:`calc(${qr(t)} - ${Te(2)})`},description:{"--input-description-size":t===void 0?void 0:`calc(${qr(t)} - ${Te(2)})`}}),wA=Ye((e,t)=>{const n=Pe("InputWrapper",Vne,e),{classNames:r,className:s,style:i,styles:o,unstyled:a,vars:c,size:u,variant:f,__staticSelector:h,inputContainer:p,inputWrapperOrder:y,label:v,error:x,description:E,labelProps:N,descriptionProps:_,errorProps:C,labelElement:j,children:A,withAsterisk:$,id:k,required:R,__stylesApiProps:B,mod:z,...D}=n,L=wt({name:["InputWrapper",h],props:B||n,classes:pi,className:s,style:i,classNames:r,styles:o,unstyled:a,vars:c,varsResolver:Une}),H={size:u,variant:f,__staticSelector:h},M=hi(k),V=typeof $=="boolean"?$:R,T=(C==null?void 0:C.id)||`${M}-error`,I=(_==null?void 0:_.id)||`${M}-description`,P=M,W=!!x&&typeof x!="boolean",F=!!E,q=`${W?T:""} ${F?I:""}`,X=q.trim().length>0?q.trim():void 0,Q=(N==null?void 0:N.id)||`${M}-label`,se=v&&m.jsx(e1,{labelElement:j,id:Q,htmlFor:P,required:V,...H,...N,children:v},"label"),ae=F&&m.jsx(Qw,{..._,...H,size:(_==null?void 0:_.size)||H.size,id:(_==null?void 0:_.id)||I,children:E},"description"),de=m.jsx(w.Fragment,{children:p(A)},"input"),ce=W&&w.createElement(Zw,{...C,...H,size:(C==null?void 0:C.size)||H.size,key:"error",id:(C==null?void 0:C.id)||T},x),fe=y.map(ve=>{switch(ve){case"label":return se;case"input":return de;case"description":return ae;case"error":return ce;default:return null}});return m.jsx(Pne,{value:{getStyles:L,describedBy:X,inputId:P,labelId:Q,...zne(y,{hasDescription:F,hasError:W})},children:m.jsx(Ve,{ref:t,variant:f,size:u,mod:[{error:!!x},z],...L("root"),...D,children:fe})})});wA.classes=pi;wA.displayName="@mantine/core/InputWrapper";const qne={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},Hne=(e,t,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":Mt(t.size,"input-height"),"--input-fz":qr(t.size),"--input-radius":t.radius===void 0?void 0:Qn(t.radius),"--input-left-section-width":t.leftSectionWidth!==void 0?Te(t.leftSectionWidth):void 0,"--input-right-section-width":t.rightSectionWidth!==void 0?Te(t.rightSectionWidth):void 0,"--input-padding-y":t.multiline?Mt(t.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":t.leftSectionPointerEvents,"--input-right-section-pointer-events":t.rightSectionPointerEvents}}),It=kc((e,t)=>{const n=Pe("Input",qne,e),{classNames:r,className:s,style:i,styles:o,unstyled:a,required:c,__staticSelector:u,__stylesApiProps:f,size:h,wrapperProps:p,error:y,disabled:v,leftSection:x,leftSectionProps:E,leftSectionWidth:N,rightSection:_,rightSectionProps:C,rightSectionWidth:j,rightSectionPointerEvents:A,leftSectionPointerEvents:$,variant:k,vars:R,pointer:B,multiline:z,radius:D,id:L,withAria:H,withErrorStyles:M,mod:V,inputSize:T,__clearSection:I,__clearable:P,__defaultRightSection:W,...F}=n,{styleProps:q,rest:X}=Zh(F),Q=rm(),se={offsetBottom:Q==null?void 0:Q.offsetBottom,offsetTop:Q==null?void 0:Q.offsetTop},ae=wt({name:["Input",u],props:f||n,classes:pi,className:s,style:i,classNames:r,styles:o,unstyled:a,stylesCtx:se,rootSelector:"wrapper",vars:R,varsResolver:Hne}),de=H?{required:c,disabled:v,"aria-invalid":!!y,"aria-describedby":Q==null?void 0:Q.describedBy,id:(Q==null?void 0:Q.inputId)||L}:{},ce=_||P&&I||W;return m.jsx(kne,{value:{size:h||"sm"},children:m.jsxs(Ve,{...ae("wrapper"),...q,...p,mod:[{error:!!y&&M,pointer:B,disabled:v,multiline:z,"data-with-right-section":!!ce,"data-with-left-section":!!x},V],variant:k,size:h,children:[x&&m.jsx("div",{...E,"data-position":"left",...ae("section",{className:E==null?void 0:E.className,style:E==null?void 0:E.style}),children:x}),m.jsx(Ve,{component:"input",...X,...de,ref:t,required:c,mod:{disabled:v,error:!!y&&M},variant:k,__size:T,...ae("input")}),ce&&m.jsx("div",{...C,"data-position":"right",...ae("section",{className:C==null?void 0:C.className,style:C==null?void 0:C.style}),children:ce})]})})});It.classes=pi;It.Wrapper=wA;It.Label=e1;It.Error=Zw;It.Description=Qw;It.Placeholder=xA;It.ClearButton=pL;It.displayName="@mantine/core/Input";function Wne(e,t,n){const r=Pe(e,t,n),{label:s,description:i,error:o,required:a,classNames:c,styles:u,className:f,unstyled:h,__staticSelector:p,__stylesApiProps:y,errorProps:v,labelProps:x,descriptionProps:E,wrapperProps:N,id:_,size:C,style:j,inputContainer:A,inputWrapperOrder:$,withAsterisk:k,variant:R,vars:B,mod:z,...D}=r,{styleProps:L,rest:H}=Zh(D),M={label:s,description:i,error:o,required:a,classNames:c,className:f,__staticSelector:p,__stylesApiProps:y||r,errorProps:v,labelProps:x,descriptionProps:E,unstyled:h,styles:u,size:C,style:j,inputContainer:A,inputWrapperOrder:$,withAsterisk:k,variant:R,id:_,mod:z,...N};return{...H,classNames:c,styles:u,unstyled:h,wrapperProps:{...M,...L},inputProps:{required:a,classNames:c,styles:u,unstyled:h,size:C,__staticSelector:p,__stylesApiProps:y||r,error:o,variant:R,id:_}}}const Gne={__staticSelector:"InputBase",withAria:!0},gi=kc((e,t)=>{const{inputProps:n,wrapperProps:r,...s}=Wne("InputBase",Gne,e);return m.jsx(It.Wrapper,{...r,children:m.jsx(It,{...n,...s,ref:t})})});gi.classes={...It.classes,...It.Wrapper.classes};gi.displayName="@mantine/core/InputBase";function Yne(e,t){if(!t||!e)return!1;let n=t.parentNode;for(;n!=null;){if(n===e)return!0;n=n.parentNode}return!1}function Jne({target:e,parent:t,ref:n,displayAfterTransitionEnd:r}){const s=w.useRef(-1),[i,o]=w.useState(!1),[a,c]=w.useState(typeof r=="boolean"?r:!1),u=()=>{if(!e||!t||!n.current)return;const y=e.getBoundingClientRect(),v=t.getBoundingClientRect(),x=window.getComputedStyle(e),E=window.getComputedStyle(t),N=cc(x.borderTopWidth)+cc(E.borderTopWidth),_=cc(x.borderLeftWidth)+cc(E.borderLeftWidth),C={top:y.top-v.top-N,left:y.left-v.left-_,width:y.width,height:y.height};n.current.style.transform=`translateY(${C.top}px) translateX(${C.left}px)`,n.current.style.width=`${C.width}px`,n.current.style.height=`${C.height}px`},f=()=>{window.clearTimeout(s.current),n.current&&(n.current.style.transitionDuration="0ms"),u(),s.current=window.setTimeout(()=>{n.current&&(n.current.style.transitionDuration="")},30)},h=w.useRef(null),p=w.useRef(null);return w.useEffect(()=>{if(u(),e)return h.current=new ResizeObserver(f),h.current.observe(e),t&&(p.current=new ResizeObserver(f),p.current.observe(t)),()=>{var y,v;(y=h.current)==null||y.disconnect(),(v=p.current)==null||v.disconnect()}},[t,e]),w.useEffect(()=>{if(t){const y=v=>{Yne(v.target,t)&&(f(),c(!1))};return t.addEventListener("transitionend",y),()=>{t.removeEventListener("transitionend",y)}}},[t]),rZ(()=>{n7()!=="test"&&o(!0)},20,{autoInvoke:!0}),iZ(y=>{y.forEach(v=>{v.type==="attributes"&&v.attributeName==="dir"&&f()})},{attributes:!0,attributeFilter:["dir"]},()=>document.documentElement),{initialized:i,hidden:a}}var gL={root:"m_96b553a6"};const Xne={},Kne=(e,{transitionDuration:t})=>({root:{"--transition-duration":typeof t=="number"?`${t}ms`:t}}),SA=Ye((e,t)=>{const n=Pe("FloatingIndicator",Xne,e),{classNames:r,className:s,style:i,styles:o,unstyled:a,vars:c,target:u,parent:f,transitionDuration:h,mod:p,displayAfterTransitionEnd:y,...v}=n,x=wt({name:"FloatingIndicator",classes:gL,props:n,className:s,style:i,classNames:r,styles:o,unstyled:a,vars:c,varsResolver:Kne}),E=w.useRef(null),{initialized:N,hidden:_}=Jne({target:u,parent:f,ref:E,displayAfterTransitionEnd:y}),C=jn(t,E);return!u||!f?null:m.jsx(Ve,{ref:C,mod:[{initialized:N,hidden:_},p],...x("root"),...v})});SA.displayName="@mantine/core/FloatingIndicator";SA.classes=gL;function yL(e){return typeof e=="string"?{value:e,label:e}:"value"in e&&!("label"in e)?{value:e.value,label:e.value,disabled:e.disabled}:typeof e=="number"?{value:e.toString(),label:e.toString()}:"group"in e?{group:e.group,items:e.items.map(t=>yL(t))}:e}function bL(e){return e?e.map(t=>yL(t)):[]}function EA(e){return e.reduce((t,n)=>"group"in n?{...t,...EA(n.items)}:(t[n.value]=n,t),{})}var us={dropdown:"m_88b62a41",search:"m_985517d8",options:"m_b2821a6e",option:"m_92253aa5",empty:"m_2530cd1d",header:"m_858f94bd",footer:"m_82b967cb",group:"m_254f3e4f",groupLabel:"m_2bb2e9e5",chevron:"m_2943220b",optionsDropdownOption:"m_390b5f4",optionsDropdownCheckIcon:"m_8ee53fc2"};const Qne={error:null},Zne=(e,{size:t,color:n})=>({chevron:{"--combobox-chevron-size":Mt(t,"combobox-chevron-size"),"--combobox-chevron-color":n?Cr(n,e):void 0}}),NA=Ye((e,t)=>{const n=Pe("ComboboxChevron",Qne,e),{size:r,error:s,style:i,className:o,classNames:a,styles:c,unstyled:u,vars:f,mod:h,...p}=n,y=wt({name:"ComboboxChevron",classes:us,props:n,style:i,className:o,classNames:a,styles:c,unstyled:u,vars:f,varsResolver:Zne,rootSelector:"chevron"});return m.jsx(Ve,{component:"svg",...p,...y("chevron"),size:r,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",mod:["combobox-chevron",{error:s},h],ref:t,children:m.jsx("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})});NA.classes=us;NA.displayName="@mantine/core/ComboboxChevron";const[ere,yi]=Ya("Combobox component was not found in tree"),vL=w.forwardRef(({size:e,onMouseDown:t,onClick:n,onClear:r,...s},i)=>m.jsx(It.ClearButton,{ref:i,tabIndex:-1,"aria-hidden":!0,...s,onMouseDown:o=>{o.preventDefault(),t==null||t(o)},onClick:o=>{r(),n==null||n(o)}}));vL.displayName="@mantine/core/ComboboxClearButton";const tre={},_A=Ye((e,t)=>{const{classNames:n,styles:r,className:s,style:i,hidden:o,...a}=Pe("ComboboxDropdown",tre,e),c=yi();return m.jsx(as.Dropdown,{...a,ref:t,role:"presentation","data-hidden":o||void 0,...c.getStyles("dropdown",{className:s,style:i,classNames:n,styles:r})})});_A.classes=us;_A.displayName="@mantine/core/ComboboxDropdown";const nre={refProp:"ref"},xL=Ye((e,t)=>{const{children:n,refProp:r}=Pe("ComboboxDropdownTarget",nre,e);if(yi(),!Tc(n))throw new Error("Combobox.DropdownTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return m.jsx(as.Target,{ref:t,refProp:r,children:n})});xL.displayName="@mantine/core/ComboboxDropdownTarget";const rre={},CA=Ye((e,t)=>{const{classNames:n,className:r,style:s,styles:i,vars:o,...a}=Pe("ComboboxEmpty",rre,e),c=yi();return m.jsx(Ve,{ref:t,...c.getStyles("empty",{className:r,classNames:n,styles:i,style:s}),...a})});CA.classes=us;CA.displayName="@mantine/core/ComboboxEmpty";function OA({onKeyDown:e,withKeyboardNavigation:t,withAriaAttributes:n,withExpandedAttribute:r,targetType:s,autoComplete:i}){const o=yi(),[a,c]=w.useState(null),u=h=>{if(e==null||e(h),!o.readOnly&&t){if(h.nativeEvent.isComposing)return;if(h.nativeEvent.code==="ArrowDown"&&(h.preventDefault(),o.store.dropdownOpened?c(o.store.selectNextOption()):(o.store.openDropdown("keyboard"),c(o.store.selectActiveOption()),o.store.updateSelectedOptionIndex("selected",{scrollIntoView:!0}))),h.nativeEvent.code==="ArrowUp"&&(h.preventDefault(),o.store.dropdownOpened?c(o.store.selectPreviousOption()):(o.store.openDropdown("keyboard"),c(o.store.selectActiveOption()),o.store.updateSelectedOptionIndex("selected",{scrollIntoView:!0}))),h.nativeEvent.code==="Enter"||h.nativeEvent.code==="NumpadEnter"){if(h.nativeEvent.keyCode===229)return;const p=o.store.getSelectedOptionIndex();o.store.dropdownOpened&&p!==-1?(h.preventDefault(),o.store.clickSelectedOption()):s==="button"&&(h.preventDefault(),o.store.openDropdown("keyboard"))}h.key==="Escape"&&o.store.closeDropdown("keyboard"),h.nativeEvent.code==="Space"&&s==="button"&&(h.preventDefault(),o.store.toggleDropdown("keyboard"))}};return{...n?{"aria-haspopup":"listbox","aria-expanded":r&&!!(o.store.listId&&o.store.dropdownOpened)||void 0,"aria-controls":o.store.dropdownOpened?o.store.listId:void 0,"aria-activedescendant":o.store.dropdownOpened&&a||void 0,autoComplete:i,"data-expanded":o.store.dropdownOpened||void 0,"data-mantine-stop-propagation":o.store.dropdownOpened||void 0}:{},onKeyDown:u}}const sre={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},wL=Ye((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:s,withAriaAttributes:i,withExpandedAttribute:o,targetType:a,autoComplete:c,...u}=Pe("ComboboxEventsTarget",sre,e);if(!Tc(n))throw new Error("Combobox.EventsTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const f=yi(),h=OA({targetType:a,withAriaAttributes:i,withKeyboardNavigation:s,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:c});return w.cloneElement(n,{...h,...u,[r]:jn(t,f.store.targetRef,Vw(n))})});wL.displayName="@mantine/core/ComboboxEventsTarget";const ire={},jA=Ye((e,t)=>{const{classNames:n,className:r,style:s,styles:i,vars:o,...a}=Pe("ComboboxFooter",ire,e),c=yi();return m.jsx(Ve,{ref:t,...c.getStyles("footer",{className:r,classNames:n,style:s,styles:i}),...a,onMouseDown:u=>{u.preventDefault()}})});jA.classes=us;jA.displayName="@mantine/core/ComboboxFooter";const ore={},AA=Ye((e,t)=>{const{classNames:n,className:r,style:s,styles:i,vars:o,children:a,label:c,...u}=Pe("ComboboxGroup",ore,e),f=yi();return m.jsxs(Ve,{ref:t,...f.getStyles("group",{className:r,classNames:n,style:s,styles:i}),...u,children:[c&&m.jsx("div",{...f.getStyles("groupLabel",{classNames:n,styles:i}),children:c}),a]})});AA.classes=us;AA.displayName="@mantine/core/ComboboxGroup";const are={},TA=Ye((e,t)=>{const{classNames:n,className:r,style:s,styles:i,vars:o,...a}=Pe("ComboboxHeader",are,e),c=yi();return m.jsx(Ve,{ref:t,...c.getStyles("header",{className:r,classNames:n,style:s,styles:i}),...a,onMouseDown:u=>{u.preventDefault()}})});TA.classes=us;TA.displayName="@mantine/core/ComboboxHeader";function SL({value:e,valuesDivider:t=",",...n}){return m.jsx("input",{type:"hidden",value:Array.isArray(e)?e.join(t):e||"",...n})}SL.displayName="@mantine/core/ComboboxHiddenInput";const lre={},$A=Ye((e,t)=>{const n=Pe("ComboboxOption",lre,e),{classNames:r,className:s,style:i,styles:o,vars:a,onClick:c,id:u,active:f,onMouseDown:h,onMouseOver:p,disabled:y,selected:v,mod:x,...E}=n,N=yi(),_=w.useId(),C=u||_;return m.jsx(Ve,{...N.getStyles("option",{className:s,classNames:r,styles:o,style:i}),...E,ref:t,id:C,mod:["combobox-option",{"combobox-active":f,"combobox-disabled":y,"combobox-selected":v},x],role:"option",onClick:j=>{var A;y?j.preventDefault():((A=N.onOptionSubmit)==null||A.call(N,n.value,n),c==null||c(j))},onMouseDown:j=>{j.preventDefault(),h==null||h(j)},onMouseOver:j=>{N.resetSelectionOnOptionHover&&N.store.resetSelectedOption(),p==null||p(j)}})});$A.classes=us;$A.displayName="@mantine/core/ComboboxOption";const cre={},RA=Ye((e,t)=>{const n=Pe("ComboboxOptions",cre,e),{classNames:r,className:s,style:i,styles:o,id:a,onMouseDown:c,labelledBy:u,...f}=n,h=yi(),p=hi(a);return w.useEffect(()=>{h.store.setListId(p)},[p]),m.jsx(Ve,{ref:t,...h.getStyles("options",{className:s,style:i,classNames:r,styles:o}),...f,id:p,role:"listbox","aria-labelledby":u,onMouseDown:y=>{y.preventDefault(),c==null||c(y)}})});RA.classes=us;RA.displayName="@mantine/core/ComboboxOptions";const ure={withAriaAttributes:!0,withKeyboardNavigation:!0},kA=Ye((e,t)=>{const n=Pe("ComboboxSearch",ure,e),{classNames:r,styles:s,unstyled:i,vars:o,withAriaAttributes:a,onKeyDown:c,withKeyboardNavigation:u,size:f,...h}=n,p=yi(),y=p.getStyles("search"),v=OA({targetType:"input",withAriaAttributes:a,withKeyboardNavigation:u,withExpandedAttribute:!1,onKeyDown:c,autoComplete:"off"});return m.jsx(It,{ref:jn(t,p.store.searchRef),classNames:[{input:y.className},r],styles:[{input:y.style},s],size:f||p.size,...v,...h,__staticSelector:"Combobox"})});kA.classes=us;kA.displayName="@mantine/core/ComboboxSearch";const dre={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},EL=Ye((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:s,withAriaAttributes:i,withExpandedAttribute:o,targetType:a,autoComplete:c,...u}=Pe("ComboboxTarget",dre,e);if(!Tc(n))throw new Error("Combobox.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const f=yi(),h=OA({targetType:a,withAriaAttributes:i,withKeyboardNavigation:s,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:c}),p=w.cloneElement(n,{...h,...u});return m.jsx(as.Target,{ref:jn(t,f.store.targetRef),children:p})});EL.displayName="@mantine/core/ComboboxTarget";function fre(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function hre(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function mre(e){for(let t=0;t<e.length;t+=1)if(!e[t].hasAttribute("data-combobox-disabled"))return t;return-1}function MA({defaultOpened:e,opened:t,onOpenedChange:n,onDropdownClose:r,onDropdownOpen:s,loop:i=!0,scrollBehavior:o="instant"}={}){const[a,c]=cs({value:t,defaultValue:e,finalValue:!1,onChange:n}),u=w.useRef(null),f=w.useRef(-1),h=w.useRef(null),p=w.useRef(null),y=w.useRef(-1),v=w.useRef(-1),x=w.useRef(-1),E=w.useCallback((T="unknown")=>{a||(c(!0),s==null||s(T))},[c,s,a]),N=w.useCallback((T="unknown")=>{a&&(c(!1),r==null||r(T))},[c,r,a]),_=w.useCallback((T="unknown")=>{a?N(T):E(T)},[N,E,a]),C=w.useCallback(()=>{const T=document.querySelector(`#${u.current} [data-combobox-selected]`);T==null||T.removeAttribute("data-combobox-selected"),T==null||T.removeAttribute("aria-selected")},[]),j=w.useCallback(T=>{const I=document.getElementById(u.current),P=I==null?void 0:I.querySelectorAll("[data-combobox-option]");if(!P)return null;const W=T>=P.length?0:T<0?P.length-1:T;return f.current=W,P!=null&&P[W]&&!P[W].hasAttribute("data-combobox-disabled")?(C(),P[W].setAttribute("data-combobox-selected","true"),P[W].setAttribute("aria-selected","true"),P[W].scrollIntoView({block:"nearest",behavior:o}),P[W].id):null},[o,C]),A=w.useCallback(()=>{const T=document.querySelector(`#${u.current} [data-combobox-active]`);if(T){const I=document.querySelectorAll(`#${u.current} [data-combobox-option]`),P=Array.from(I).findIndex(W=>W===T);return j(P)}return j(0)},[j]),$=w.useCallback(()=>j(hre(f.current,document.querySelectorAll(`#${u.current} [data-combobox-option]`),i)),[j,i]),k=w.useCallback(()=>j(fre(f.current,document.querySelectorAll(`#${u.current} [data-combobox-option]`),i)),[j,i]),R=w.useCallback(()=>j(mre(document.querySelectorAll(`#${u.current} [data-combobox-option]`))),[j]),B=w.useCallback((T="selected",I)=>{x.current=window.setTimeout(()=>{var F;const P=document.querySelectorAll(`#${u.current} [data-combobox-option]`),W=Array.from(P).findIndex(q=>q.hasAttribute(`data-combobox-${T}`));f.current=W,I!=null&&I.scrollIntoView&&((F=P[W])==null||F.scrollIntoView({block:"nearest",behavior:o}))},0)},[]),z=w.useCallback(()=>{f.current=-1,C()},[C]),D=w.useCallback(()=>{const T=document.querySelectorAll(`#${u.current} [data-combobox-option]`),I=T==null?void 0:T[f.current];I==null||I.click()},[]),L=w.useCallback(T=>{u.current=T},[]),H=w.useCallback(()=>{y.current=window.setTimeout(()=>h.current.focus(),0)},[]),M=w.useCallback(()=>{v.current=window.setTimeout(()=>p.current.focus(),0)},[]),V=w.useCallback(()=>f.current,[]);return w.useEffect(()=>()=>{window.clearTimeout(y.current),window.clearTimeout(v.current),window.clearTimeout(x.current)},[]),{dropdownOpened:a,openDropdown:E,closeDropdown:N,toggleDropdown:_,selectedOptionIndex:f.current,getSelectedOptionIndex:V,selectOption:j,selectFirstOption:R,selectActiveOption:A,selectNextOption:$,selectPreviousOption:k,resetSelectedOption:z,updateSelectedOptionIndex:B,listId:u.current,setListId:L,clickSelectedOption:D,searchRef:h,focusSearchInput:H,targetRef:p,focusTarget:M}}const pre={keepMounted:!0,withinPortal:!0,resetSelectionOnOptionHover:!1,width:"target",transitionProps:{transition:"fade",duration:0}},gre=(e,{size:t,dropdownPadding:n})=>({options:{"--combobox-option-fz":qr(t),"--combobox-option-padding":Mt(t,"combobox-option-padding")},dropdown:{"--combobox-padding":n===void 0?void 0:Te(n),"--combobox-option-fz":qr(t),"--combobox-option-padding":Mt(t,"combobox-option-padding")}});function $t(e){const t=Pe("Combobox",pre,e),{classNames:n,styles:r,unstyled:s,children:i,store:o,vars:a,onOptionSubmit:c,onClose:u,size:f,dropdownPadding:h,resetSelectionOnOptionHover:p,__staticSelector:y,readOnly:v,...x}=t,E=MA(),N=o||E,_=wt({name:y||"Combobox",classes:us,props:t,classNames:n,styles:r,unstyled:s,vars:a,varsResolver:gre}),C=()=>{u==null||u(),N.closeDropdown()};return m.jsx(ere,{value:{getStyles:_,store:N,onOptionSubmit:c,size:f,resetSelectionOnOptionHover:p,readOnly:v},children:m.jsx(as,{opened:N.dropdownOpened,...x,onChange:j=>!j&&C(),withRoles:!1,unstyled:s,children:i})})}const yre=e=>e;$t.extend=yre;$t.classes=us;$t.displayName="@mantine/core/Combobox";$t.Target=EL;$t.Dropdown=_A;$t.Options=RA;$t.Option=$A;$t.Search=kA;$t.Empty=CA;$t.Chevron=NA;$t.Footer=jA;$t.Header=TA;$t.EventsTarget=wL;$t.DropdownTarget=xL;$t.Group=AA;$t.ClearButton=vL;$t.HiddenInput=SL;var NL={root:"m_5f75b09e",body:"m_5f6e695e",labelWrapper:"m_d3ea56bb",label:"m_8ee546b8",description:"m_328f68c0",error:"m_8e8a99cc"};const bre=NL,IA=w.forwardRef(({__staticSelector:e,__stylesApiProps:t,className:n,classNames:r,styles:s,unstyled:i,children:o,label:a,description:c,id:u,disabled:f,error:h,size:p,labelPosition:y="left",bodyElement:v="div",labelElement:x="label",variant:E,style:N,vars:_,mod:C,...j},A)=>{const $=wt({name:e,props:t,className:n,style:N,classes:NL,classNames:r,styles:s,unstyled:i});return m.jsx(Ve,{...$("root"),ref:A,__vars:{"--label-fz":qr(p),"--label-lh":Mt(p,"label-lh")},mod:[{"label-position":y},C],variant:E,size:p,...j,children:m.jsxs(Ve,{component:v,htmlFor:v==="label"?u:void 0,...$("body"),children:[o,m.jsxs("div",{...$("labelWrapper"),"data-disabled":f||void 0,children:[a&&m.jsx(Ve,{component:x,htmlFor:x==="label"?u:void 0,...$("label"),"data-disabled":f||void 0,children:a}),c&&m.jsx(It.Description,{size:p,__inheritStyles:!1,...$("description"),children:c}),h&&typeof h!="boolean"&&m.jsx(It.Error,{size:p,__inheritStyles:!1,...$("error"),children:h})]})]})})});IA.displayName="@mantine/core/InlineInput";function _L({children:e,role:t}){const n=rm();return n?m.jsx("div",{role:t,"aria-labelledby":n.labelId,"aria-describedby":n.describedBy,children:e}):m.jsx(m.Fragment,{children:e})}function vre({size:e,style:t,...n}){const r=e!==void 0?{width:Te(e),height:Te(e),...t}:t;return m.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:m.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function Nh(e){return"group"in e}function CL({options:e,search:t,limit:n}){const r=t.trim().toLowerCase(),s=[];for(let i=0;i<e.length;i+=1){const o=e[i];if(s.length===n)return s;Nh(o)&&s.push({group:o.group,items:CL({options:o.items,search:t,limit:n-s.length})}),Nh(o)||o.label.toLowerCase().includes(r)&&s.push(o)}return s}function xre(e){if(e.length===0)return!0;for(const t of e)if(!("group"in t)||t.items.length>0)return!1;return!0}function OL(e,t=new Set){if(Array.isArray(e))for(const n of e)if(Nh(n))OL(n.items,t);else{if(typeof n.value>"u")throw new Error("[@mantine/core] Each option must have value property");if(typeof n.value!="string")throw new Error(`[@mantine/core] Option value must be a string, other data formats are not supported, got ${typeof n.value}`);if(t.has(n.value))throw new Error(`[@mantine/core] Duplicate options are not supported. Option with value "${n.value}" was provided more than once`);t.add(n.value)}}function wre(e,t){return Array.isArray(e)?e.includes(t):e===t}function jL({data:e,withCheckIcon:t,value:n,checkIconPosition:r,unstyled:s,renderOption:i}){if(!Nh(e)){const a=wre(n,e.value),c=t&&a&&m.jsx(vre,{className:us.optionsDropdownCheckIcon}),u=m.jsxs(m.Fragment,{children:[r==="left"&&c,m.jsx("span",{children:e.label}),r==="right"&&c]});return m.jsx($t.Option,{value:e.value,disabled:e.disabled,className:yn({[us.optionsDropdownOption]:!s}),"data-reverse":r==="right"||void 0,"data-checked":a||void 0,"aria-selected":a,active:a,children:typeof i=="function"?i({option:e,checked:a}):u})}const o=e.items.map(a=>m.jsx(jL,{data:a,value:n,unstyled:s,withCheckIcon:t,checkIconPosition:r,renderOption:i},a.value));return m.jsx($t.Group,{label:e.group,children:o})}function AL({data:e,hidden:t,hiddenWhenEmpty:n,filter:r,search:s,limit:i,maxDropdownHeight:o,withScrollArea:a=!0,filterOptions:c=!0,withCheckIcon:u=!1,value:f,checkIconPosition:h,nothingFoundMessage:p,unstyled:y,labelId:v,renderOption:x,scrollAreaProps:E,"aria-label":N}){OL(e);const C=typeof s=="string"?(r||CL)({options:e,search:c?s:"",limit:i??1/0}):e,j=xre(C),A=C.map($=>m.jsx(jL,{data:$,withCheckIcon:u,value:f,checkIconPosition:h,unstyled:y,renderOption:x},Nh($)?$.group:$.value));return m.jsx($t.Dropdown,{hidden:t||n&&j,"data-composed":!0,children:m.jsxs($t.Options,{labelledBy:v,"aria-label":N,children:[a?m.jsx($y.Autosize,{mah:o??220,type:"scroll",scrollbarSize:"var(--combobox-padding)",offsetScrollbars:"y",...E,children:A}):A,j&&p&&m.jsx($t.Empty,{children:p})]})})}var sm={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844",groupSection:"m_70be2a01"};const EM={orientation:"horizontal"},Sre=(e,{borderWidth:t})=>({group:{"--button-border-width":Te(t)}}),PA=Ye((e,t)=>{const n=Pe("ButtonGroup",EM,e),{className:r,style:s,classNames:i,styles:o,unstyled:a,orientation:c,vars:u,borderWidth:f,variant:h,mod:p,...y}=Pe("ButtonGroup",EM,e),v=wt({name:"ButtonGroup",props:n,classes:sm,className:r,style:s,classNames:i,styles:o,unstyled:a,vars:u,varsResolver:Sre,rootSelector:"group"});return m.jsx(Ve,{...v("group"),ref:t,variant:h,mod:[{"data-orientation":c},p],role:"group",...y})});PA.classes=sm;PA.displayName="@mantine/core/ButtonGroup";const NM={},Ere=(e,{radius:t,color:n,gradient:r,variant:s,autoContrast:i,size:o})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:s||"filled",autoContrast:i});return{groupSection:{"--section-height":Mt(o,"section-height"),"--section-padding-x":Mt(o,"section-padding-x"),"--section-fz":o!=null&&o.includes("compact")?qr(o.replace("compact-","")):qr(o),"--section-radius":t===void 0?void 0:Qn(t),"--section-bg":n||s?a.background:void 0,"--section-color":a.color,"--section-bd":n||s?a.border:void 0}}},DA=Ye((e,t)=>{const n=Pe("ButtonGroupSection",NM,e),{className:r,style:s,classNames:i,styles:o,unstyled:a,vars:c,variant:u,gradient:f,radius:h,autoContrast:p,...y}=Pe("ButtonGroupSection",NM,e),v=wt({name:"ButtonGroupSection",props:n,classes:sm,className:r,style:s,classNames:i,styles:o,unstyled:a,vars:c,varsResolver:Ere,rootSelector:"groupSection"});return m.jsx(Ve,{...v("groupSection"),ref:t,variant:u,...y})});DA.classes=sm;DA.displayName="@mantine/core/ButtonGroupSection";const Nre={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${Te(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},_re={},Cre=(e,{radius:t,color:n,gradient:r,variant:s,size:i,justify:o,autoContrast:a})=>{const c=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:s||"filled",autoContrast:a});return{root:{"--button-justify":o,"--button-height":Mt(i,"button-height"),"--button-padding-x":Mt(i,"button-padding-x"),"--button-fz":i!=null&&i.includes("compact")?qr(i.replace("compact-","")):qr(i),"--button-radius":t===void 0?void 0:Qn(t),"--button-bg":n||s?c.background:void 0,"--button-hover":n||s?c.hover:void 0,"--button-color":c.color,"--button-bd":n||s?c.border:void 0,"--button-hover-color":n||s?c.hoverColor:void 0}}},Xu=kc((e,t)=>{const n=Pe("Button",_re,e),{style:r,vars:s,className:i,color:o,disabled:a,children:c,leftSection:u,rightSection:f,fullWidth:h,variant:p,radius:y,loading:v,loaderProps:x,gradient:E,classNames:N,styles:_,unstyled:C,"data-disabled":j,autoContrast:A,mod:$,...k}=n,R=wt({name:"Button",props:n,classes:sm,className:i,style:r,classNames:N,styles:_,unstyled:C,vars:s,varsResolver:Cre}),B=!!u,z=!!f;return m.jsxs(La,{ref:t,...R("root",{active:!a&&!v&&!j}),unstyled:C,variant:p,disabled:a||v,mod:[{disabled:a||j,loading:v,block:h,"with-left-section":B,"with-right-section":z},$],...k,children:[m.jsx(Ic,{mounted:!!v,transition:Nre,duration:150,children:D=>m.jsx(Ve,{component:"span",...R("loader",{style:D}),"aria-hidden":!0,children:m.jsx(ky,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...x})})}),m.jsxs("span",{...R("inner"),children:[u&&m.jsx(Ve,{component:"span",...R("section"),mod:{position:"left"},children:u}),m.jsx(Ve,{component:"span",mod:{loading:v},...R("label"),children:c}),f&&m.jsx(Ve,{component:"span",...R("section"),mod:{position:"right"},children:f})]})]})});Xu.classes=sm;Xu.displayName="@mantine/core/Button";Xu.Group=PA;Xu.GroupSection=DA;function Ore({open:e,close:t,openDelay:n,closeDelay:r}){const s=w.useRef(-1),i=w.useRef(-1),o=()=>{window.clearTimeout(s.current),window.clearTimeout(i.current)},a=()=>{o(),n===0||n===void 0?e():s.current=window.setTimeout(e,n)},c=()=>{o(),r===0||r===void 0?t():i.current=window.setTimeout(t,r)};return w.useEffect(()=>o,[]),{openDropdown:a,closeDropdown:c}}function _h(){return _h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_h.apply(null,arguments)}function LA(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var jre=w.useLayoutEffect,Are=function(t){var n=je.useRef(t);return jre(function(){n.current=t}),n},_M=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},Tre=function(t,n){var r=je.useRef();return je.useCallback(function(s){t.current=s,r.current&&_M(r.current,null),r.current=n,n&&_M(n,s)},[n])},CM={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},$re=function(t){Object.keys(CM).forEach(function(n){t.style.setProperty(n,CM[n],"important")})},OM=$re,Tr=null,jM=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function Rre(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),Tr||(Tr=document.createElement("textarea"),Tr.setAttribute("tabindex","-1"),Tr.setAttribute("aria-hidden","true"),OM(Tr)),Tr.parentNode===null&&document.body.appendChild(Tr);var s=e.paddingSize,i=e.borderSize,o=e.sizingStyle,a=o.boxSizing;Object.keys(o).forEach(function(p){var y=p;Tr.style[y]=o[y]}),OM(Tr),Tr.value=t;var c=jM(Tr,e);Tr.value=t,c=jM(Tr,e),Tr.value="x";var u=Tr.scrollHeight-s,f=u*n;a==="border-box"&&(f=f+s+i),c=Math.max(f,c);var h=u*r;return a==="border-box"&&(h=h+s+i),c=Math.min(h,c),[c,u]}var AM=function(){},kre=function(t,n){return t.reduce(function(r,s){return r[s]=n[s],r},{})},Mre=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],Ire=!!document.documentElement.currentStyle,Pre=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=kre(Mre,n),s=r.boxSizing;if(s==="")return null;Ire&&s==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var i=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),o=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:i,borderSize:o}},Dre=Pre;function TL(e,t,n){var r=Are(n);w.useLayoutEffect(function(){var s=function(o){return r.current(o)};if(e)return e.addEventListener(t,s),function(){return e.removeEventListener(t,s)}},[])}var Lre=function(t){TL(window,"resize",t)},Fre=function(t){TL(document.fonts,"loadingdone",t)},Bre=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],zre=function(t,n){var r=t.cacheMeasurements,s=t.maxRows,i=t.minRows,o=t.onChange,a=o===void 0?AM:o,c=t.onHeightChange,u=c===void 0?AM:c,f=LA(t,Bre),h=f.value!==void 0,p=w.useRef(null),y=Tre(p,n),v=w.useRef(0),x=w.useRef(),E=function(){var C=p.current,j=r&&x.current?x.current:Dre(C);if(j){x.current=j;var A=Rre(j,C.value||C.placeholder||"x",i,s),$=A[0],k=A[1];v.current!==$&&(v.current=$,C.style.setProperty("height",$+"px","important"),u($,{rowHeight:k}))}},N=function(C){h||E(),a(C)};return w.useLayoutEffect(E),Lre(E),Fre(E),w.createElement("textarea",_h({},f,{onChange:N,ref:y}))},Vre=w.forwardRef(zre);const Ure={},My=Ye((e,t)=>{const{autosize:n,maxRows:r,minRows:s,__staticSelector:i,resize:o,...a}=Pe("Textarea",Ure,e),c=n&&n7()!=="test",u=c?{maxRows:r,minRows:s}:{};return m.jsx(gi,{component:c?Vre:"textarea",ref:t,...a,__staticSelector:i||"Textarea",multiline:!0,"data-no-overflow":n&&r===void 0||void 0,__vars:{"--input-resize":o},...u})});My.classes=gi.classes;My.displayName="@mantine/core/Textarea";const[qre,Iy]=Ya("Menu component was not found in the tree");var im={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const Hre={},FA=Ye((e,t)=>{const{classNames:n,className:r,style:s,styles:i,vars:o,...a}=Pe("MenuDivider",Hre,e),c=Iy();return m.jsx(Ve,{ref:t,...c.getStyles("divider",{className:r,style:s,styles:i,classNames:n}),...a})});FA.classes=im;FA.displayName="@mantine/core/MenuDivider";const Wre={},BA=Ye((e,t)=>{const{classNames:n,className:r,style:s,styles:i,vars:o,onMouseEnter:a,onMouseLeave:c,onKeyDown:u,children:f,...h}=Pe("MenuDropdown",Wre,e),p=w.useRef(null),y=Iy(),v=Eo(u,N=>{var _,C;(N.key==="ArrowUp"||N.key==="ArrowDown")&&(N.preventDefault(),(C=(_=p.current)==null?void 0:_.querySelectorAll("[data-menu-item]:not(:disabled)")[0])==null||C.focus())}),x=Eo(a,()=>(y.trigger==="hover"||y.trigger==="click-hover")&&y.openDropdown()),E=Eo(c,()=>(y.trigger==="hover"||y.trigger==="click-hover")&&y.closeDropdown());return m.jsxs(as.Dropdown,{...h,onMouseEnter:x,onMouseLeave:E,role:"menu","aria-orientation":"vertical",ref:jn(t,p),...y.getStyles("dropdown",{className:r,style:s,styles:i,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:v,children:[y.withInitialFocusPlaceholder&&m.jsx("div",{tabIndex:-1,"data-autofocus":!0,"data-mantine-stop-propagation":!0,style:{outline:0}}),f]})});BA.classes=im;BA.displayName="@mantine/core/MenuDropdown";const Gre={},zA=kc((e,t)=>{const{classNames:n,className:r,style:s,styles:i,vars:o,color:a,closeMenuOnClick:c,leftSection:u,rightSection:f,children:h,disabled:p,"data-disabled":y,...v}=Pe("MenuItem",Gre,e),x=Iy(),E=Ds(),{dir:N}=Mc(),_=w.useRef(null),C=x.getItemIndex(_.current),j=v,A=Eo(j.onMouseLeave,()=>x.setHovered(-1)),$=Eo(j.onMouseEnter,()=>x.setHovered(x.getItemIndex(_.current))),k=Eo(j.onClick,()=>{y||(typeof c=="boolean"?c&&x.closeDropdownImmediately():x.closeOnItemClick&&x.closeDropdownImmediately())}),R=Eo(j.onFocus,()=>x.setHovered(x.getItemIndex(_.current))),B=a?E.variantColorResolver({color:a,theme:E,variant:"light"}):void 0,z=a?Rc({color:a,theme:E}):null;return m.jsxs(La,{...v,unstyled:x.unstyled,tabIndex:x.menuItemTabIndex,onFocus:R,...x.getStyles("item",{className:r,style:s,styles:i,classNames:n}),ref:jn(_,t),role:"menuitem",disabled:p,"data-menu-item":!0,"data-disabled":p||y||void 0,"data-hovered":x.hovered===C?!0:void 0,"data-mantine-stop-propagation":!0,onMouseEnter:$,onMouseLeave:A,onClick:k,onKeyDown:K8({siblingSelector:"[data-menu-item]:not([data-disabled])",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:x.loop,dir:N,orientation:"vertical",onKeyDown:j.onKeyDown}),__vars:{"--menu-item-color":z!=null&&z.isThemeColor&&(z==null?void 0:z.shade)===void 0?`var(--mantine-color-${z.color}-6)`:B==null?void 0:B.color,"--menu-item-hover":B==null?void 0:B.hover},children:[u&&m.jsx("div",{...x.getStyles("itemSection",{styles:i,classNames:n}),"data-position":"left",children:u}),h&&m.jsx("div",{...x.getStyles("itemLabel",{styles:i,classNames:n}),children:h}),f&&m.jsx("div",{...x.getStyles("itemSection",{styles:i,classNames:n}),"data-position":"right",children:f})]})});zA.classes=im;zA.displayName="@mantine/core/MenuItem";const Yre={},VA=Ye((e,t)=>{const{classNames:n,className:r,style:s,styles:i,vars:o,...a}=Pe("MenuLabel",Yre,e),c=Iy();return m.jsx(Ve,{ref:t,...c.getStyles("label",{className:r,style:s,styles:i,classNames:n}),...a})});VA.classes=im;VA.displayName="@mantine/core/MenuLabel";const Jre={refProp:"ref"},$L=w.forwardRef((e,t)=>{const{children:n,refProp:r,...s}=Pe("MenuTarget",Jre,e);if(!Tc(n))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const i=Iy(),o=n.props,a=Eo(o.onClick,()=>{i.trigger==="click"?i.toggleDropdown():i.trigger==="click-hover"&&(i.setOpenedViaClick(!0),i.opened||i.openDropdown())}),c=Eo(o.onMouseEnter,()=>(i.trigger==="hover"||i.trigger==="click-hover")&&i.openDropdown()),u=Eo(o.onMouseLeave,()=>{(i.trigger==="hover"||i.trigger==="click-hover"&&!i.openedViaClick)&&i.closeDropdown()});return m.jsx(as.Target,{refProp:r,popupType:"menu",ref:t,...s,children:w.cloneElement(n,{onClick:a,onMouseEnter:c,onMouseLeave:u,"data-expanded":i.opened?!0:void 0})})});$L.displayName="@mantine/core/MenuTarget";const Xre={trapFocus:!0,closeOnItemClick:!0,withInitialFocusPlaceholder:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function Os(e){const t=Pe("Menu",Xre,e),{children:n,onOpen:r,onClose:s,opened:i,defaultOpened:o,trapFocus:a,onChange:c,closeOnItemClick:u,loop:f,closeOnEscape:h,trigger:p,openDelay:y,closeDelay:v,classNames:x,styles:E,unstyled:N,variant:_,vars:C,menuItemTabIndex:j,keepMounted:A,withInitialFocusPlaceholder:$,...k}=t,R=wt({name:"Menu",classes:im,props:t,classNames:x,styles:E,unstyled:N}),[B,{setHovered:z,resetHovered:D}]=LQ(),[L,H]=cs({value:i,defaultValue:o,finalValue:!1,onChange:c}),[M,V]=w.useState(!1),T=()=>{H(!1),V(!1),L&&(s==null||s())},I=()=>{H(!0),!L&&(r==null||r())},P=()=>{L?T():I()},{openDropdown:W,closeDropdown:F}=Ore({open:I,close:T,closeDelay:v,openDelay:y}),q=se=>DQ("[data-menu-item]","[data-menu-dropdown]",se),{resolvedClassNames:X,resolvedStyles:Q}=Qh({classNames:x,styles:E,props:t});return Da(()=>{D()},[L]),m.jsx(qre,{value:{getStyles:R,opened:L,toggleDropdown:P,getItemIndex:q,hovered:B,setHovered:z,openedViaClick:M,setOpenedViaClick:V,closeOnItemClick:u,closeDropdown:p==="click"?T:F,openDropdown:p==="click"?I:W,closeDropdownImmediately:T,loop:f,trigger:p,unstyled:N,menuItemTabIndex:j,withInitialFocusPlaceholder:$},children:m.jsx(as,{...k,opened:L,onChange:P,defaultOpened:o,trapFocus:A?!1:a,closeOnEscape:h,__staticSelector:"Menu",classNames:X,styles:Q,unstyled:N,variant:_,keepMounted:A,children:n})})}Os.extend=e=>e;Os.classes=im;Os.displayName="@mantine/core/Menu";Os.Item=zA;Os.Label=VA;Os.Dropdown=BA;Os.Target=$L;Os.Divider=FA;const[Kre,om]=Ya("Modal component was not found in tree");var Xa={root:"m_9df02822",content:"m_54c44539",inner:"m_1f958f16",header:"m_d0e2b9cd"};const Qre={},t1=Ye((e,t)=>{const n=Pe("ModalBody",Qre,e),{classNames:r,className:s,style:i,styles:o,vars:a,...c}=n,u=om();return m.jsx(cL,{ref:t,...u.getStyles("body",{classNames:r,style:i,styles:o,className:s}),...c})});t1.classes=Xa;t1.displayName="@mantine/core/ModalBody";const Zre={},n1=Ye((e,t)=>{const n=Pe("ModalCloseButton",Zre,e),{classNames:r,className:s,style:i,styles:o,vars:a,...c}=n,u=om();return m.jsx(uL,{ref:t,...u.getStyles("close",{classNames:r,style:i,styles:o,className:s}),...c})});n1.classes=Xa;n1.displayName="@mantine/core/ModalCloseButton";const ese={},r1=Ye((e,t)=>{const n=Pe("ModalContent",ese,e),{classNames:r,className:s,style:i,styles:o,vars:a,children:c,__hidden:u,...f}=n,h=om(),p=h.scrollAreaComponent||Rne;return m.jsx(dL,{...h.getStyles("content",{className:s,style:i,styles:o,classNames:r}),innerProps:h.getStyles("inner",{className:s,style:i,styles:o,classNames:r}),"data-full-screen":h.fullScreen||void 0,"data-modal-content":!0,"data-hidden":u||void 0,ref:t,...f,children:m.jsx(p,{style:{maxHeight:h.fullScreen?"100dvh":`calc(100dvh - (${Te(h.yOffset)} * 2))`},children:c})})});r1.classes=Xa;r1.displayName="@mantine/core/ModalContent";const tse={},s1=Ye((e,t)=>{const n=Pe("ModalHeader",tse,e),{classNames:r,className:s,style:i,styles:o,vars:a,...c}=n,u=om();return m.jsx(fL,{ref:t,...u.getStyles("header",{classNames:r,style:i,styles:o,className:s}),...c})});s1.classes=Xa;s1.displayName="@mantine/core/ModalHeader";const nse={},i1=Ye((e,t)=>{const n=Pe("ModalOverlay",nse,e),{classNames:r,className:s,style:i,styles:o,vars:a,...c}=n,u=om();return m.jsx(hL,{ref:t,...u.getStyles("overlay",{classNames:r,style:i,styles:o,className:s}),...c})});i1.classes=Xa;i1.displayName="@mantine/core/ModalOverlay";const rse={__staticSelector:"Modal",closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:to("modal"),transitionProps:{duration:200,transition:"fade-down"},yOffset:"5dvh"},sse=(e,{radius:t,size:n,yOffset:r,xOffset:s})=>({root:{"--modal-radius":t===void 0?void 0:Qn(t),"--modal-size":Mt(n,"modal-size"),"--modal-y-offset":Te(r),"--modal-x-offset":Te(s)}}),o1=Ye((e,t)=>{const n=Pe("ModalRoot",rse,e),{classNames:r,className:s,style:i,styles:o,unstyled:a,vars:c,yOffset:u,scrollAreaComponent:f,radius:h,fullScreen:p,centered:y,xOffset:v,__staticSelector:x,...E}=n,N=wt({name:x,classes:Xa,props:n,className:s,style:i,classNames:r,styles:o,unstyled:a,vars:c,varsResolver:sse});return m.jsx(Kre,{value:{yOffset:u,scrollAreaComponent:f,getStyles:N,fullScreen:p},children:m.jsx(lL,{ref:t,...N("root"),"data-full-screen":p||void 0,"data-centered":y||void 0,unstyled:a,...E})})});o1.classes=Xa;o1.displayName="@mantine/core/ModalRoot";const[ise,ose]=fd();function RL({children:e}){const[t,n]=w.useState([]),[r,s]=w.useState(to("modal"));return m.jsx(ise,{value:{stack:t,addModal:(i,o)=>{n(a=>[...new Set([...a,i])]),s(a=>typeof o=="number"&&typeof a=="number"?Math.max(a,o):a)},removeModal:i=>n(o=>o.filter(a=>a!==i)),getZIndex:i=>`calc(${r} + ${t.indexOf(i)} + 1)`,currentId:t[t.length-1],maxZIndex:r},children:e})}RL.displayName="@mantine/core/ModalStack";const ase={},a1=Ye((e,t)=>{const n=Pe("ModalTitle",ase,e),{classNames:r,className:s,style:i,styles:o,vars:a,...c}=n,u=om();return m.jsx(mL,{ref:t,...u.getStyles("title",{classNames:r,style:i,styles:o,className:s}),...c})});a1.classes=Xa;a1.displayName="@mantine/core/ModalTitle";const lse={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:to("modal"),transitionProps:{duration:200,transition:"fade-down"},withOverlay:!0,withCloseButton:!0},Ls=Ye((e,t)=>{const{title:n,withOverlay:r,overlayProps:s,withCloseButton:i,closeButtonProps:o,children:a,radius:c,opened:u,stackId:f,zIndex:h,...p}=Pe("Modal",lse,e),y=ose(),v=!!n||i,x=y&&f?{closeOnEscape:y.currentId===f,trapFocus:y.currentId===f,zIndex:y.getZIndex(f)}:{},E=r===!1?!1:f&&y?y.currentId===f:u;return w.useEffect(()=>{y&&f&&(u?y.addModal(f,h||to("modal")):y.removeModal(f))},[u,f,h]),m.jsxs(o1,{ref:t,radius:c,opened:u,zIndex:y&&f?y.getZIndex(f):h,...p,...x,children:[r&&m.jsx(i1,{visible:E,transitionProps:y&&f?{duration:0}:void 0,...s}),m.jsxs(r1,{radius:c,__hidden:y&&f&&u?f!==y.currentId:!1,children:[v&&m.jsxs(s1,{children:[n&&m.jsx(a1,{children:n}),i&&m.jsx(n1,{...o})]}),m.jsx(t1,{children:a})]})]})});Ls.classes=Xa;Ls.displayName="@mantine/core/Modal";Ls.Root=o1;Ls.Overlay=i1;Ls.Content=r1;Ls.Body=t1;Ls.Header=s1;Ls.Title=a1;Ls.CloseButton=n1;Ls.Stack=RL;const[cse,UA]=fd(),[use,dse]=fd();var l1={root:"m_7cda1cd6","root--default":"m_44da308b","root--contrast":"m_e3a01f8",label:"m_1e0e6180",remove:"m_ae386778",group:"m_1dcfd90b"};const fse={},hse=(e,{gap:t},{size:n})=>({group:{"--pg-gap":t!==void 0?Mt(t):Mt(n,"pg-gap")}}),qA=Ye((e,t)=>{const n=Pe("PillGroup",fse,e),{classNames:r,className:s,style:i,styles:o,unstyled:a,vars:c,size:u,disabled:f,...h}=n,p=UA(),y=(p==null?void 0:p.size)||u||void 0,v=wt({name:"PillGroup",classes:l1,props:n,className:s,style:i,classNames:r,styles:o,unstyled:a,vars:c,varsResolver:hse,stylesCtx:{size:y},rootSelector:"group"});return m.jsx(use,{value:{size:y,disabled:f},children:m.jsx(Ve,{ref:t,size:y,...v("group"),...h})})});qA.classes=l1;qA.displayName="@mantine/core/PillGroup";const mse={variant:"default"},pse=(e,{radius:t},{size:n})=>({root:{"--pill-fz":Mt(n,"pill-fz"),"--pill-height":Mt(n,"pill-height"),"--pill-radius":t===void 0?void 0:Qn(t)}}),jg=Ye((e,t)=>{const n=Pe("Pill",mse,e),{classNames:r,className:s,style:i,styles:o,unstyled:a,vars:c,variant:u,children:f,withRemoveButton:h,onRemove:p,removeButtonProps:y,radius:v,size:x,disabled:E,mod:N,..._}=n,C=dse(),j=UA(),A=x||(C==null?void 0:C.size)||void 0,$=(j==null?void 0:j.variant)==="filled"?"contrast":u||"default",k=wt({name:"Pill",classes:l1,props:n,className:s,style:i,classNames:r,styles:o,unstyled:a,vars:c,varsResolver:pse,stylesCtx:{size:A}});return m.jsxs(Ve,{component:"span",ref:t,variant:$,size:A,...k("root",{variant:$}),mod:[{"with-remove":h&&!E,disabled:E||(C==null?void 0:C.disabled)},N],..._,children:[m.jsx("span",{...k("label"),children:f}),h&&m.jsx(nm,{variant:"transparent",radius:v,tabIndex:-1,"aria-hidden":!0,unstyled:a,...y,...k("remove",{className:y==null?void 0:y.className,style:y==null?void 0:y.style}),onMouseDown:R=>{var B;R.preventDefault(),R.stopPropagation(),(B=y==null?void 0:y.onMouseDown)==null||B.call(y,R)},onClick:R=>{var B;R.stopPropagation(),p==null||p(),(B=y==null?void 0:y.onClick)==null||B.call(y,R)}})]})});jg.classes=l1;jg.displayName="@mantine/core/Pill";jg.Group=qA;var kL={field:"m_45c4369d"};const gse={type:"visible"},HA=Ye((e,t)=>{const n=Pe("PillsInputField",gse,e),{classNames:r,className:s,style:i,styles:o,unstyled:a,vars:c,type:u,disabled:f,id:h,pointer:p,mod:y,...v}=n,x=UA(),E=rm(),N=wt({name:"PillsInputField",classes:kL,props:n,className:s,style:i,classNames:r,styles:o,unstyled:a,rootSelector:"field"}),_=f||(x==null?void 0:x.disabled);return m.jsx(Ve,{component:"input",ref:jn(t,x==null?void 0:x.fieldRef),"data-type":u,disabled:_,mod:[{disabled:_,pointer:p},y],...N("field"),...v,id:(E==null?void 0:E.inputId)||h,"aria-invalid":x==null?void 0:x.hasError,"aria-describedby":E==null?void 0:E.describedBy,type:"text",onMouseDown:C=>!p&&C.stopPropagation()})});HA.classes=kL;HA.displayName="@mantine/core/PillsInputField";const yse={},dx=Ye((e,t)=>{const n=Pe("PillsInput",yse,e),{children:r,onMouseDown:s,onClick:i,size:o,disabled:a,__staticSelector:c,error:u,variant:f,...h}=n,p=w.useRef(null);return m.jsx(cse,{value:{fieldRef:p,size:o,disabled:a,hasError:!!u,variant:f},children:m.jsx(gi,{size:o,error:u,variant:f,component:"div",ref:t,onMouseDown:y=>{var v;y.preventDefault(),s==null||s(y),(v=p.current)==null||v.focus()},onClick:y=>{var x;y.preventDefault();const v=y.currentTarget.closest("fieldset");v!=null&&v.disabled||((x=p.current)==null||x.focus(),i==null||i(y))},...h,multiline:!0,disabled:a,__staticSelector:c||"PillsInput",withAria:!1,children:r})})});dx.displayName="@mantine/core/PillsInput";dx.Field=HA;var ML={root:"m_a513464",icon:"m_a4ceffb",loader:"m_b0920b15",body:"m_a49ed24",title:"m_3feedf16",description:"m_3d733a3a",closeButton:"m_919a4d88"};const bse={withCloseButton:!0},vse=(e,{radius:t,color:n})=>({root:{"--notification-radius":t===void 0?void 0:Qn(t),"--notification-color":n?Cr(n,e):void 0}}),WA=Ye((e,t)=>{const n=Pe("Notification",bse,e),{className:r,color:s,radius:i,loading:o,withCloseButton:a,withBorder:c,title:u,icon:f,children:h,onClose:p,closeButtonProps:y,classNames:v,style:x,styles:E,unstyled:N,variant:_,vars:C,mod:j,...A}=n,$=wt({name:"Notification",classes:ML,props:n,className:r,style:x,classNames:v,styles:E,unstyled:N,vars:C,varsResolver:vse});return m.jsxs(Ve,{...$("root"),mod:[{"data-with-icon":!!f||o,"data-with-border":c},j],ref:t,variant:_,...A,role:"alert",children:[f&&!o&&m.jsx("div",{...$("icon"),children:f}),o&&m.jsx(ky,{size:28,color:s,...$("loader")}),m.jsxs("div",{...$("body"),children:[u&&m.jsx("div",{...$("title"),children:u}),m.jsx(Ve,{...$("description"),mod:{"data-with-title":!!u},children:h})]}),a&&m.jsx(nm,{iconSize:16,color:"gray",...y,unstyled:N,onClick:p,...$("closeButton")})]})});WA.classes=ML;WA.displayName="@mantine/core/Notification";function IL(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}var Ag;(function(e){e.event="event",e.props="prop"})(Ag||(Ag={}));function Xl(){}function xse(e){var t,n=void 0;return function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];return t&&r.length===t.length&&r.every(function(i,o){return i===t[o]})||(t=r,n=e.apply(void 0,r)),n}}function Tg(e){return!!(e||"").match(/\d/)}function Yf(e){return e==null}function wse(e){return typeof e=="number"&&isNaN(e)}function PL(e){return Yf(e)||wse(e)||typeof e=="number"&&!isFinite(e)}function DL(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function Sse(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function Ese(e,t,n){var r=Sse(n),s=e.search(/[1-9]/);return s=s===-1?e.length:s,e.substring(0,s)+e.substring(s,e.length).replace(r,"$1"+t)}function Nse(e){var t=w.useRef(e);t.current=e;var n=w.useRef(function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];return t.current.apply(t,r)});return n.current}function GA(e,t){t===void 0&&(t=!0);var n=e[0]==="-",r=n&&t;e=e.replace("-","");var s=e.split("."),i=s[0],o=s[1]||"";return{beforeDecimal:i,afterDecimal:o,hasNegation:n,addNegation:r}}function _se(e){if(!e)return e;var t=e[0]==="-";t&&(e=e.substring(1,e.length));var n=e.split("."),r=n[0].replace(/^0+/,"")||"0",s=n[1]||"";return(t?"-":"")+r+(s?"."+s:"")}function LL(e,t,n){for(var r="",s=n?"0":"",i=0;i<=t-1;i++)r+=e[i]||s;return r}function TM(e,t){return Array(t+1).join(e)}function FL(e){var t=e+"",n=t[0]==="-"?"-":"";n&&(t=t.substring(1));var r=t.split(/[eE]/g),s=r[0],i=r[1];if(i=Number(i),!i)return n+s;s=s.replace(".","");var o=1+i,a=s.length;return o<0?s="0."+TM("0",Math.abs(o))+s:o>=a?s=s+TM("0",o-a):s=(s.substring(0,o)||"0")+"."+s.substring(o),n+s}function $M(e,t,n){if(["","-"].indexOf(e)!==-1)return e;var r=(e.indexOf(".")!==-1||n)&&t,s=GA(e),i=s.beforeDecimal,o=s.afterDecimal,a=s.hasNegation,c=parseFloat("0."+(o||"0")),u=o.length<=t?"0."+o:c.toFixed(t),f=u.split("."),h=i;i&&Number(f[0])&&(h=i.split("").reverse().reduce(function(x,E,N){return x.length>N?(Number(x[0])+Number(E)).toString()+x.substring(1,x.length):E+x},f[0]));var p=LL(f[1]||"",t,n),y=a?"-":"",v=r?".":"";return""+y+h+v+p}function Eu(e,t){if(e.value=e.value,e!==null){if(e.createTextRange){var n=e.createTextRange();return n.move("character",t),n.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}}var BL=xse(function(e,t){for(var n=0,r=0,s=e.length,i=t.length;e[n]===t[n]&&n<s;)n++;for(;e[s-1-r]===t[i-1-r]&&i-r>n&&s-r>n;)r++;return{from:{start:n,end:s-r},to:{start:n,end:i-r}}}),Cse=function(e,t){var n=Math.min(e.selectionStart,t);return{from:{start:n,end:e.selectionEnd},to:{start:n,end:t}}};function Ose(e,t,n){return Math.min(Math.max(e,t),n)}function SN(e){return Math.max(e.selectionStart,e.selectionEnd)}function jse(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function Ase(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function Tse(e){var t=e.currentValue,n=e.formattedValue,r=e.currentValueIndex,s=e.formattedValueIndex;return t[r]===n[s]}function $se(e,t,n,r,s,i,o){o===void 0&&(o=Tse);var a=s.findIndex(function(j){return j}),c=e.slice(0,a);!t&&!n.startsWith(c)&&(t=c,n=c+n,r=r+c.length);for(var u=n.length,f=e.length,h={},p=new Array(u),y=0;y<u;y++){p[y]=-1;for(var v=0,x=f;v<x;v++){var E=o({currentValue:n,lastValue:t,formattedValue:e,currentValueIndex:y,formattedValueIndex:v});if(E&&h[v]!==!0){p[y]=v,h[v]=!0;break}}}for(var N=r;N<u&&(p[N]===-1||!i(n[N]));)N++;var _=N===u||p[N]===-1?f:p[N];for(N=r-1;N>0&&p[N]===-1;)N--;var C=N===-1||p[N]===-1?0:p[N]+1;return C>_?_:r-C<_-r?C:_}function RM(e,t,n,r){var s=e.length;if(t=Ose(t,0,s),r==="left"){for(;t>=0&&!n[t];)t--;t===-1&&(t=n.indexOf(!0))}else{for(;t<=s&&!n[t];)t++;t>s&&(t=n.lastIndexOf(!0))}return t===-1&&(t=s),t}function Rse(e){for(var t=Array.from({length:e.length+1}).map(function(){return!0}),n=0,r=t.length;n<r;n++)t[n]=!!(Tg(e[n])||Tg(e[n-1]));return t}function zL(e,t,n,r,s,i){i===void 0&&(i=Xl);var o=Nse(function(v,x){var E,N;return PL(v)?(N="",E=""):typeof v=="number"||x?(N=typeof v=="number"?FL(v):v,E=r(N)):(N=s(v,void 0),E=r(N)),{formattedValue:E,numAsString:N}}),a=w.useState(function(){return o(Yf(e)?t:e,n)}),c=a[0],u=a[1],f=function(v,x){v.formattedValue!==c.formattedValue&&u({formattedValue:v.formattedValue,numAsString:v.value}),i(v,x)},h=e,p=n;Yf(e)&&(h=c.numAsString,p=!0);var y=o(h,p);return w.useMemo(function(){u(y)},[y.formattedValue]),[c,f]}function kse(e){return e.replace(/[^0-9]/g,"")}function Mse(e){return e}function Ise(e){var t=e.type;t===void 0&&(t="text");var n=e.displayType;n===void 0&&(n="input");var r=e.customInput,s=e.renderText,i=e.getInputRef,o=e.format;o===void 0&&(o=Mse);var a=e.removeFormatting;a===void 0&&(a=kse);var c=e.defaultValue,u=e.valueIsNumericString,f=e.onValueChange,h=e.isAllowed,p=e.onChange;p===void 0&&(p=Xl);var y=e.onKeyDown;y===void 0&&(y=Xl);var v=e.onMouseUp;v===void 0&&(v=Xl);var x=e.onFocus;x===void 0&&(x=Xl);var E=e.onBlur;E===void 0&&(E=Xl);var N=e.value,_=e.getCaretBoundary;_===void 0&&(_=Rse);var C=e.isValidInputCharacter;C===void 0&&(C=Tg);var j=e.isCharacterSame,A=IL(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),$=zL(N,c,!!u,o,a,f),k=$[0],R=k.formattedValue,B=k.numAsString,z=$[1],D=w.useRef(),L=w.useRef({formattedValue:R,numAsString:B}),H=function(Oe,Me){L.current={formattedValue:Oe.formattedValue,numAsString:Oe.value},z(Oe,Me)},M=w.useState(!1),V=M[0],T=M[1],I=w.useRef(null),P=w.useRef({setCaretTimeout:null,focusTimeout:null});w.useEffect(function(){return T(!0),function(){clearTimeout(P.current.setCaretTimeout),clearTimeout(P.current.focusTimeout)}},[]);var W=o,F=function(Oe,Me){var Ie=parseFloat(Me);return{formattedValue:Oe,value:Me,floatValue:isNaN(Ie)?void 0:Ie}},q=function(Oe,Me,Ie){Oe.selectionStart===0&&Oe.selectionEnd===Oe.value.length||(Eu(Oe,Me),P.current.setCaretTimeout=setTimeout(function(){Oe.value===Ie&&Oe.selectionStart!==Me&&Eu(Oe,Me)},0))},X=function(Oe,Me,Ie){return RM(Oe,Me,_(Oe),Ie)},Q=function(Oe,Me,Ie){var G=_(Me),re=$se(Me,R,Oe,Ie,G,C,j);return re=RM(Me,re,G),re},se=function(Oe){var Me=Oe.formattedValue;Me===void 0&&(Me="");var Ie=Oe.input,G=Oe.source,re=Oe.event,te=Oe.numAsString,he;if(Ie){var ie=Oe.inputValue||Ie.value,ne=SN(Ie);Ie.value=Me,he=Q(ie,Me,ne),he!==void 0&&q(Ie,he,Me)}Me!==R&&H(F(Me,te),{event:re,source:G})};w.useEffect(function(){var Oe=L.current,Me=Oe.formattedValue,Ie=Oe.numAsString;(R!==Me||B!==Ie)&&H(F(R,B),{event:void 0,source:Ag.props})},[R,B]);var ae=I.current?SN(I.current):void 0,de=typeof window<"u"?w.useLayoutEffect:w.useEffect;de(function(){var Oe=I.current;if(R!==L.current.formattedValue&&Oe){var Me=Q(L.current.formattedValue,R,ae);Oe.value=R,q(Oe,Me,R)}},[R]);var ce=function(Oe,Me,Ie){var G=Me.target,re=D.current?Cse(D.current,G.selectionEnd):BL(R,Oe),te=Object.assign(Object.assign({},re),{lastValue:R}),he=a(Oe,te),ie=W(he);if(he=a(ie,void 0),h&&!h(F(ie,he))){var ne=Me.target,le=SN(ne),xe=Q(Oe,R,le);return ne.value=R,q(ne,xe,R),!1}return se({formattedValue:ie,numAsString:he,inputValue:Oe,event:Me,source:Ie,input:Me.target}),!0},fe=function(Oe,Me){Me===void 0&&(Me=0);var Ie=Oe.selectionStart,G=Oe.selectionEnd;D.current={selectionStart:Ie,selectionEnd:G+Me}},ve=function(Oe){var Me=Oe.target,Ie=Me.value,G=ce(Ie,Oe,Ag.event);G&&p(Oe),D.current=void 0},Ae=function(Oe){var Me=Oe.target,Ie=Oe.key,G=Me.selectionStart,re=Me.selectionEnd,te=Me.value;te===void 0&&(te="");var he;Ie==="ArrowLeft"||Ie==="Backspace"?he=Math.max(G-1,0):Ie==="ArrowRight"?he=Math.min(G+1,te.length):Ie==="Delete"&&(he=G);var ie=0;Ie==="Delete"&&G===re&&(ie=1);var ne=Ie==="ArrowLeft"||Ie==="ArrowRight";if(he===void 0||G!==re&&!ne){y(Oe),fe(Me,ie);return}var le=he;if(ne){var xe=Ie==="ArrowLeft"?"left":"right";le=X(te,he,xe),le!==he&&Oe.preventDefault()}else Ie==="Delete"&&!C(te[he])?le=X(te,he,"right"):Ie==="Backspace"&&!C(te[he])&&(le=X(te,he,"left"));le!==he&&q(Me,le,te),y(Oe),fe(Me,ie)},Ce=function(Oe){var Me=Oe.target,Ie=function(){var G=Me.selectionStart,re=Me.selectionEnd,te=Me.value;if(te===void 0&&(te=""),G===re){var he=X(te,G);he!==G&&q(Me,he,te)}};Ie(),requestAnimationFrame(function(){Ie()}),v(Oe),fe(Me)},Ee=function(Oe){Oe.persist&&Oe.persist();var Me=Oe.target,Ie=Oe.currentTarget;I.current=Me,P.current.focusTimeout=setTimeout(function(){var G=Me.selectionStart,re=Me.selectionEnd,te=Me.value;te===void 0&&(te="");var he=X(te,G);he!==G&&!(G===0&&re===te.length)&&q(Me,he,te),x(Object.assign(Object.assign({},Oe),{currentTarget:Ie}))},0)},Re=function(Oe){I.current=null,clearTimeout(P.current.focusTimeout),clearTimeout(P.current.setCaretTimeout),E(Oe)},ke=V&&jse()?"numeric":void 0,He=Object.assign({inputMode:ke},A,{type:t,value:R,onChange:ve,onKeyDown:Ae,onMouseUp:Ce,onFocus:Ee,onBlur:Re});if(n==="text")return s?je.createElement(je.Fragment,null,s(R,A)||null):je.createElement("span",Object.assign({},A,{ref:i}),R);if(r){var et=r;return je.createElement(et,Object.assign({},He,{ref:i}))}return je.createElement("input",Object.assign({},He,{ref:i}))}function kM(e,t){var n=t.decimalScale,r=t.fixedDecimalScale,s=t.prefix;s===void 0&&(s="");var i=t.suffix;i===void 0&&(i="");var o=t.allowNegative,a=t.thousandsGroupStyle;if(a===void 0&&(a="thousand"),e===""||e==="-")return e;var c=c1(t),u=c.thousandSeparator,f=c.decimalSeparator,h=n!==0&&e.indexOf(".")!==-1||n&&r,p=GA(e,o),y=p.beforeDecimal,v=p.afterDecimal,x=p.addNegation;return n!==void 0&&(v=LL(v,n,!!r)),u&&(y=Ese(y,u,a)),s&&(y=s+y),i&&(v=v+i),x&&(y="-"+y),e=y+(h&&f||"")+v,e}function c1(e){var t=e.decimalSeparator;t===void 0&&(t=".");var n=e.thousandSeparator,r=e.allowedDecimalSeparators;return n===!0&&(n=","),r||(r=[t,"."]),{decimalSeparator:t,thousandSeparator:n,allowedDecimalSeparators:r}}function Pse(e,t){e===void 0&&(e="");var n=new RegExp("(-)"),r=new RegExp("(-)(.)*(-)"),s=n.test(e),i=r.test(e);return e=e.replace(/-/g,""),s&&!i&&t&&(e="-"+e),e}function Dse(e,t){return new RegExp("(^-)|[0-9]|"+DL(e),"g")}function Lse(e,t,n){return e===""?!0:!(t!=null&&t.match(/\d/))&&!(n!=null&&n.match(/\d/))&&typeof e=="string"&&!isNaN(Number(e))}function Fse(e,t,n){var r;t===void 0&&(t=Ase(e));var s=n.allowNegative,i=n.prefix;i===void 0&&(i="");var o=n.suffix;o===void 0&&(o="");var a=n.decimalScale,c=t.from,u=t.to,f=u.start,h=u.end,p=c1(n),y=p.allowedDecimalSeparators,v=p.decimalSeparator,x=e[h]===v;if(Tg(e)&&(e===i||e===o)&&t.lastValue==="")return e;if(h-f===1&&y.indexOf(e[f])!==-1){var E=a===0?"":v;e=e.substring(0,f)+E+e.substring(f+1,e.length)}var N=function(I,P,W){var F=!1,q=!1;i.startsWith("-")?F=!1:I.startsWith("--")?(F=!1,q=!0):o.startsWith("-")&&I.length===o.length?F=!1:I[0]==="-"&&(F=!0);var X=F?1:0;return q&&(X=2),X&&(I=I.substring(X),P-=X,W-=X),{value:I,start:P,end:W,hasNegation:F}},_=N(e,f,h),C=_.hasNegation;r=_,e=r.value,f=r.start,h=r.end;var j=N(t.lastValue,c.start,c.end),A=j.start,$=j.end,k=j.value,R=e.substring(f,h);e.length&&k.length&&(A>k.length-o.length||$<i.length)&&!(R&&o.startsWith(R))&&(e=k);var B=0;e.startsWith(i)?B+=i.length:f<i.length&&(B=f),e=e.substring(B),h-=B;var z=e.length,D=e.length-o.length;e.endsWith(o)?z=D:(h>D||h>e.length-o.length)&&(z=h),e=e.substring(0,z),e=Pse(C?"-"+e:e,s),e=(e.match(Dse(v))||[]).join("");var L=e.indexOf(v);e=e.replace(new RegExp(DL(v),"g"),function(I,P){return P===L?".":""});var H=GA(e,s),M=H.beforeDecimal,V=H.afterDecimal,T=H.addNegation;return u.end-u.start<c.end-c.start&&M===""&&x&&!parseFloat(V)&&(e=T?"-":""),e}function Bse(e,t){var n=t.prefix;n===void 0&&(n="");var r=t.suffix;r===void 0&&(r="");var s=Array.from({length:e.length+1}).map(function(){return!0}),i=e[0]==="-";s.fill(!1,0,n.length+(i?1:0));var o=e.length;return s.fill(!1,o-r.length+1,o+1),s}function zse(e){var t=c1(e),n=t.thousandSeparator,r=t.decimalSeparator,s=e.prefix;s===void 0&&(s="");var i=e.allowNegative;if(i===void 0&&(i=!0),n===r)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+n+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+r+` (default value for decimalSeparator is .)
     `);return s.startsWith("-")&&i&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+s+`
      allowNegative: `+i+`
    `),i=!1),Object.assign(Object.assign({},e),{allowNegative:i})}function Vse(e){e=zse(e),e.decimalSeparator,e.allowedDecimalSeparators,e.thousandsGroupStyle;var t=e.suffix,n=e.allowNegative,r=e.allowLeadingZeros,s=e.onKeyDown;s===void 0&&(s=Xl);var i=e.onBlur;i===void 0&&(i=Xl);var o=e.thousandSeparator,a=e.decimalScale,c=e.fixedDecimalScale,u=e.prefix;u===void 0&&(u="");var f=e.defaultValue,h=e.value,p=e.valueIsNumericString,y=e.onValueChange,v=IL(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),x=c1(e),E=x.decimalSeparator,N=x.allowedDecimalSeparators,_=function(T){return kM(T,e)},C=function(T,I){return Fse(T,I,e)},j=Yf(h)?f:h,A=p??Lse(j,u,t);Yf(h)?Yf(f)||(A=A||typeof f=="number"):A=A||typeof h=="number";var $=function(T){return PL(T)?T:(typeof T=="number"&&(T=FL(T)),A&&typeof a=="number"?$M(T,a,!!c):T)},k=zL($(h),$(f),!!A,_,C,y),R=k[0],B=R.numAsString,z=R.formattedValue,D=k[1],L=function(T){var I=T.target,P=T.key,W=I.selectionStart,F=I.selectionEnd,q=I.value;if(q===void 0&&(q=""),(P==="Backspace"||P==="Delete")&&F<u.length){T.preventDefault();return}if(W!==F){s(T);return}P==="Backspace"&&q[0]==="-"&&W===u.length+1&&n&&Eu(I,1),a&&c&&(P==="Backspace"&&q[W-1]===E?(Eu(I,W-1),T.preventDefault()):P==="Delete"&&q[W]===E&&T.preventDefault()),N!=null&&N.includes(P)&&q[W]===E&&Eu(I,W+1);var X=o===!0?",":o;P==="Backspace"&&q[W-1]===X&&Eu(I,W-1),P==="Delete"&&q[W]===X&&Eu(I,W+1),s(T)},H=function(T){var I=B;if(I.match(/\d/g)||(I=""),r||(I=_se(I)),c&&a&&(I=$M(I,a,c)),I!==B){var P=kM(I,e);D({formattedValue:P,value:I,floatValue:parseFloat(I)},{event:T,source:Ag.event})}i(T)},M=function(T){return T===E?!0:Tg(T)},V=function(T){var I=T.currentValue,P=T.lastValue,W=T.formattedValue,F=T.currentValueIndex,q=T.formattedValueIndex,X=I[F],Q=W[q],se=BL(P,I),ae=se.to,de=function(ce){return C(ce).indexOf(".")+u.length};return h===0&&c&&a&&I[ae.start]===E&&de(I)<F&&de(W)>q?!1:F>=ae.start&&F<ae.end&&N&&N.includes(X)&&Q===E?!0:X===Q};return Object.assign(Object.assign({},v),{value:z,valueIsNumericString:!1,isValidInputCharacter:M,isCharacterSame:V,onValueChange:D,format:_,removeFormatting:C,getCaretBoundary:function(T){return Bse(T,e)},onKeyDown:L,onBlur:H})}function Use(e){var t=Vse(e);return je.createElement(Ise,Object.assign({},t))}function MM({direction:e,style:t,...n}){return m.jsx("svg",{style:{width:"var(--ni-chevron-size)",height:"var(--ni-chevron-size)",transform:e==="up"?"rotate(180deg)":void 0,...t},viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:m.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var NC={root:"m_e2f5cd4e",controls:"m_95e17d22",control:"m_80b4b171"};const qse=/^(0\.0*|-0(\.0*)?)$/,Hse=/^-?0\d+(\.\d+)?\.?$/;function _C(e){return typeof e=="string"&&e!==""&&!Number.isNaN(Number(e))}function EN(e){return typeof e=="number"?e<Number.MAX_SAFE_INTEGER:e===""||_C(e)&&Number(e)<Number.MAX_SAFE_INTEGER}function Wse(e){return e.toString().replace(".","").length}function Gse(e,t){return(typeof e=="number"?e<Number.MAX_SAFE_INTEGER:!Number.isNaN(Number(e)))&&!Number.isNaN(e)&&Wse(t)<14&&t!==""}function IM(e,t,n){if(e===void 0)return!0;const r=t===void 0||e>=t,s=n===void 0||e<=n;return r&&s}const Yse={step:1,clampBehavior:"blur",allowDecimal:!0,allowNegative:!0,withKeyboardEvents:!0,allowLeadingZeros:!0,trimLeadingZeroesOnBlur:!0,startValue:0},Jse=(e,{size:t})=>({controls:{"--ni-chevron-size":Mt(t,"ni-chevron-size")}}),u1=Ye((e,t)=>{const n=Pe("NumberInput",Yse,e),{className:r,classNames:s,styles:i,unstyled:o,vars:a,onChange:c,onValueChange:u,value:f,defaultValue:h,max:p,min:y,step:v,hideControls:x,rightSection:E,isAllowed:N,clampBehavior:_,onBlur:C,allowDecimal:j,decimalScale:A,onKeyDown:$,onKeyDownCapture:k,handlersRef:R,startValue:B,disabled:z,rightSectionPointerEvents:D,allowNegative:L,readOnly:H,size:M,rightSectionWidth:V,stepHoldInterval:T,stepHoldDelay:I,allowLeadingZeros:P,withKeyboardEvents:W,trimLeadingZeroesOnBlur:F,...q}=n,X=wt({name:"NumberInput",classes:NC,props:n,classNames:s,styles:i,unstyled:o,vars:a,varsResolver:Jse}),{resolvedClassNames:Q,resolvedStyles:se}=Qh({classNames:s,styles:i,props:n}),[ae,de]=cs({value:f,defaultValue:h,finalValue:"",onChange:c}),ce=I!==void 0&&T!==void 0,fe=w.useRef(null),ve=w.useRef(null),Ae=w.useRef(0),Ce=(ie,ne)=>{ne.source==="event"&&de(Gse(ie.floatValue,ie.value)&&!qse.test(ie.value)&&!(P&&Hse.test(ie.value))?ie.floatValue:ie.value),u==null||u(ie,ne)},Ee=ie=>{const ne=String(ie).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return ne?Math.max(0,(ne[1]?ne[1].length:0)-(ne[2]?+ne[2]:0)):0},Re=ie=>{fe.current&&typeof ie<"u"&&fe.current.setSelectionRange(ie,ie)},ke=w.useRef(fC);ke.current=()=>{if(!EN(ae))return;let ie;const ne=Ee(ae),le=Ee(v),xe=Math.max(ne,le),Ne=10**xe;if(!_C(ae)&&(typeof ae!="number"||Number.isNaN(ae)))ie=Ca(B,y,p);else if(p!==void 0){const Vt=(Math.round(Number(ae)*Ne)+Math.round(v*Ne))/Ne;ie=Vt<=p?Vt:p}else ie=(Math.round(Number(ae)*Ne)+Math.round(v*Ne))/Ne;const Ge=ie.toFixed(xe);de(parseFloat(Ge)),u==null||u({floatValue:parseFloat(Ge),formattedValue:Ge,value:Ge},{source:"increment"}),setTimeout(()=>{var Vt;return Re((Vt=fe.current)==null?void 0:Vt.value.length)},0)};const He=w.useRef(fC);He.current=()=>{if(!EN(ae))return;let ie;const ne=y!==void 0?y:L?Number.MIN_SAFE_INTEGER:0,le=Ee(ae),xe=Ee(v),Ne=Math.max(le,xe),Ge=10**Ne;if(!_C(ae)&&typeof ae!="number"||Number.isNaN(ae))ie=Ca(B,ne,p);else{const St=(Math.round(Number(ae)*Ge)-Math.round(v*Ge))/Ge;ie=ne!==void 0&&St<ne?ne:St}const Vt=ie.toFixed(Ne);de(parseFloat(Vt)),u==null||u({floatValue:parseFloat(Vt),formattedValue:Vt,value:Vt},{source:"decrement"}),setTimeout(()=>{var St;return Re((St=fe.current)==null?void 0:St.value.length)},0)};const et=ie=>{$==null||$(ie),!(H||!W)&&(ie.key==="ArrowUp"&&(ie.preventDefault(),ke.current()),ie.key==="ArrowDown"&&(ie.preventDefault(),He.current()))},Oe=ie=>{if(k==null||k(ie),ie.key==="Backspace"){const ne=fe.current;ne.selectionStart===0&&ne.selectionStart===ne.selectionEnd&&(ie.preventDefault(),window.setTimeout(()=>Re(0),0))}},Me=ie=>{let ne=ae;if(_==="blur"&&typeof ne=="number"&&(ne=Ca(ne,y,p)),F&&typeof ne=="string"&&Ee(ne)<15){const le=ne.toString().replace(/^0+/,""),xe=parseFloat(le);ne=Number.isNaN(xe)||xe>Number.MAX_SAFE_INTEGER?le:Ca(xe,y,p)}ae!==ne&&de(ne),C==null||C(ie)};ix(R,{increment:ke.current,decrement:He.current});const Ie=ie=>{ie?ke.current():He.current(),Ae.current+=1},G=ie=>{if(Ie(ie),ce){const ne=typeof T=="number"?T:T(Ae.current);ve.current=window.setTimeout(()=>G(ie),ne)}},re=(ie,ne)=>{var le;ie.preventDefault(),(le=fe.current)==null||le.focus(),Ie(ne),ce&&(ve.current=window.setTimeout(()=>G(ne),I))},te=()=>{ve.current&&window.clearTimeout(ve.current),ve.current=null,Ae.current=0},he=m.jsxs("div",{...X("controls"),children:[m.jsx(La,{...X("control"),tabIndex:-1,"aria-hidden":!0,disabled:z||typeof ae=="number"&&p!==void 0&&ae>=p,mod:{direction:"up"},onMouseDown:ie=>ie.preventDefault(),onPointerDown:ie=>{re(ie,!0)},onPointerUp:te,onPointerLeave:te,children:m.jsx(MM,{direction:"up"})}),m.jsx(La,{...X("control"),tabIndex:-1,"aria-hidden":!0,disabled:z||typeof ae=="number"&&y!==void 0&&ae<=y,mod:{direction:"down"},onMouseDown:ie=>ie.preventDefault(),onPointerDown:ie=>{re(ie,!1)},onPointerUp:te,onPointerLeave:te,children:m.jsx(MM,{direction:"down"})})]});return m.jsx(gi,{component:Use,allowNegative:L,className:yn(NC.root,r),size:M,...q,readOnly:H,disabled:z,value:ae,getInputRef:jn(t,fe),onValueChange:Ce,rightSection:x||H||!EN(ae)?E:E||he,classNames:Q,styles:se,unstyled:o,__staticSelector:"NumberInput",decimalScale:j?A:0,onKeyDown:et,onKeyDownCapture:Oe,rightSectionPointerEvents:D??(z?"none":void 0),rightSectionWidth:V??`var(--ni-right-section-width-${M||"sm"})`,allowLeadingZeros:P,onBlur:Me,isAllowed:ie=>_==="strict"?N?N(ie)&&IM(ie.floatValue,y,p):IM(ie.floatValue,y,p):N?N(ie):!0})});u1.classes={...gi.classes,...NC};u1.displayName="@mantine/core/NumberInput";const[Xse,VL]=fd(),[Kse,Qse]=fd();var UL={card:"m_9dc8ae12"};const Zse={withBorder:!0},eie=(e,{radius:t})=>({card:{"--card-radius":Qn(t)}}),YA=Ye((e,t)=>{const n=Pe("RadioCard",Zse,e),{classNames:r,className:s,style:i,styles:o,unstyled:a,vars:c,checked:u,mod:f,withBorder:h,value:p,onClick:y,name:v,onKeyDown:x,...E}=n,N=wt({name:"RadioCard",classes:UL,props:n,className:s,style:i,classNames:r,styles:o,unstyled:a,vars:c,varsResolver:eie,rootSelector:"card"}),{dir:_}=Mc(),C=VL(),j=typeof u=="boolean"?u:(C==null?void 0:C.value)===p||!1,A=v||(C==null?void 0:C.name),$=k=>{if(x==null||x(k),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(k.nativeEvent.code)){k.preventDefault();const R=Array.from(document.querySelectorAll(`[role="radio"][name="${A||"__mantine"}"]`)),B=R.findIndex(L=>L===k.target),z=B+1>=R.length?0:B+1,D=B-1<0?R.length-1:B-1;k.nativeEvent.code==="ArrowDown"&&(R[z].focus(),R[z].click()),k.nativeEvent.code==="ArrowUp"&&(R[D].focus(),R[D].click()),k.nativeEvent.code==="ArrowLeft"&&(R[_==="ltr"?D:z].focus(),R[_==="ltr"?D:z].click()),k.nativeEvent.code==="ArrowRight"&&(R[_==="ltr"?z:D].focus(),R[_==="ltr"?z:D].click())}};return m.jsx(Kse,{value:{checked:j},children:m.jsx(La,{ref:t,mod:[{"with-border":h,checked:j},f],...N("card"),...E,role:"radio","aria-checked":j,name:A,onClick:k=>{y==null||y(k),C==null||C.onChange(p||"")},onKeyDown:$})})});YA.displayName="@mantine/core/RadioCard";YA.classes=UL;const tie={},d1=Ye((e,t)=>{const{value:n,defaultValue:r,onChange:s,size:i,wrapperProps:o,children:a,name:c,readOnly:u,...f}=Pe("RadioGroup",tie,e),h=hi(c),[p,y]=cs({value:n,defaultValue:r,finalValue:"",onChange:s}),v=x=>!u&&y(typeof x=="string"?x:x.currentTarget.value);return m.jsx(Xse,{value:{value:p,onChange:v,size:i,name:h},children:m.jsx(It.Wrapper,{size:i,ref:t,...o,...f,labelElement:"div",__staticSelector:"RadioGroup",children:m.jsx(_L,{role:"radiogroup",children:a})})})});d1.classes=It.Wrapper.classes;d1.displayName="@mantine/core/RadioGroup";function qL({size:e,style:t,...n}){return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 5 5",style:{width:Te(e),height:Te(e),...t},"aria-hidden":!0,...n,children:m.jsx("circle",{cx:"2.5",cy:"2.5",r:"2.5",fill:"currentColor"})})}var HL={indicator:"m_717d7ff6",icon:"m_3e4da632","indicator--outline":"m_2980836c"};const nie={icon:qL},rie=(e,{radius:t,color:n,size:r,iconColor:s,variant:i,autoContrast:o})=>{const a=Rc({color:n||e.primaryColor,theme:e}),c=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--radio-size":Mt(r,"radio-size"),"--radio-radius":t===void 0?void 0:Qn(t),"--radio-color":i==="outline"?c:Cr(n,e),"--radio-icon-size":Mt(r,"radio-icon-size"),"--radio-icon-color":s?Cr(s,e):Kj(o,e)?Ay({color:n,theme:e,autoContrast:o}):void 0}}},JA=Ye((e,t)=>{const n=Pe("RadioIndicator",nie,e),{classNames:r,className:s,style:i,styles:o,unstyled:a,vars:c,icon:u,radius:f,color:h,iconColor:p,autoContrast:y,checked:v,mod:x,variant:E,disabled:N,..._}=n,C=u,j=wt({name:"RadioIndicator",classes:HL,props:n,className:s,style:i,classNames:r,styles:o,unstyled:a,vars:c,varsResolver:rie,rootSelector:"indicator"}),A=Qse(),$=typeof v=="boolean"?v:(A==null?void 0:A.checked)||!1;return m.jsx(Ve,{ref:t,...j("indicator",{variant:E}),variant:E,mod:[{checked:$,disabled:N},x],..._,children:m.jsx(C,{...j("icon")})})});JA.displayName="@mantine/core/RadioIndicator";JA.classes=HL;var WL={root:"m_f3f1af94",inner:"m_89c4f5e4",icon:"m_f3ed6b2b",radio:"m_8a3dbb89","radio--outline":"m_1bfe9d39"};const sie={labelPosition:"right"},iie=(e,{size:t,radius:n,color:r,iconColor:s,variant:i,autoContrast:o})=>{const a=Rc({color:r||e.primaryColor,theme:e}),c=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--radio-size":Mt(t,"radio-size"),"--radio-radius":n===void 0?void 0:Qn(n),"--radio-color":i==="outline"?c:Cr(r,e),"--radio-icon-color":s?Cr(s,e):Kj(o,e)?Ay({color:r,theme:e,autoContrast:o}):void 0,"--radio-icon-size":Mt(t,"radio-icon-size")}}},To=Ye((e,t)=>{const n=Pe("Radio",sie,e),{classNames:r,className:s,style:i,styles:o,unstyled:a,vars:c,id:u,size:f,label:h,labelPosition:p,description:y,error:v,radius:x,color:E,variant:N,disabled:_,wrapperProps:C,icon:j=qL,rootRef:A,iconColor:$,onChange:k,mod:R,...B}=n,z=wt({name:"Radio",classes:WL,props:n,className:s,style:i,classNames:r,styles:o,unstyled:a,vars:c,varsResolver:iie}),D=VL(),L=(D==null?void 0:D.size)??f,H=n.size?f:L,{styleProps:M,rest:V}=Zh(B),T=hi(u),I=D?{checked:D.value===V.value,name:V.name??D.name,onChange:P=>{D.onChange(P),k==null||k(P)}}:{};return m.jsx(IA,{...z("root"),__staticSelector:"Radio",__stylesApiProps:n,id:T,size:H,labelPosition:p,label:h,description:y,error:v,disabled:_,classNames:r,styles:o,unstyled:a,"data-checked":I.checked||void 0,variant:N,ref:A,mod:R,...M,...C,children:m.jsxs(Ve,{...z("inner"),mod:{"label-position":p},children:[m.jsx(Ve,{...z("radio",{focusable:!0,variant:N}),onChange:k,...V,...I,component:"input",mod:{error:!!v},ref:t,id:T,disabled:_,type:"radio"}),m.jsx(j,{...z("icon"),"aria-hidden":!0})]})})});To.classes=WL;To.displayName="@mantine/core/Radio";To.Group=d1;To.Card=YA;To.Indicator=JA;const oie={duration:100,transition:"fade"};function aie(e,t){return{...oie,...t,...e}}function lie({offset:e,position:t,defaultOpened:n}){const[r,s]=w.useState(n),i=w.useRef(null),{x:o,y:a,elements:c,refs:u,update:f,placement:h}=gA({placement:t,middleware:[fA({crossAxis:!0,padding:5,rootBoundary:"document"})]}),p=h.includes("right")?e:t.includes("left")?e*-1:0,y=h.includes("bottom")?e:t.includes("top")?e*-1:0,v=w.useCallback(({clientX:x,clientY:E})=>{u.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x,y:E,left:x+p,top:E+y,right:x,bottom:E}}})},[c.reference]);return w.useEffect(()=>{if(u.floating.current){const x=i.current;x.addEventListener("mousemove",v);const E=Aa(u.floating.current);return E.forEach(N=>{N.addEventListener("scroll",f)}),()=>{x.removeEventListener("mousemove",v),E.forEach(N=>{N.removeEventListener("scroll",f)})}}},[c.reference,u.floating.current,f,v,r]),{handleMouseMove:v,x:o,y:a,opened:r,setOpened:s,boundaryRef:i,floating:u.setFloating}}var f1={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const cie={refProp:"ref",withinPortal:!0,offset:10,defaultOpened:!1,position:"right",zIndex:to("popover")},uie=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:Qn(t),"--tooltip-bg":n?Cr(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),XA=Ye((e,t)=>{const n=Pe("TooltipFloating",cie,e),{children:r,refProp:s,withinPortal:i,style:o,className:a,classNames:c,styles:u,unstyled:f,radius:h,color:p,label:y,offset:v,position:x,multiline:E,zIndex:N,disabled:_,defaultOpened:C,variant:j,vars:A,portalProps:$,...k}=n,R=Ds(),B=wt({name:"TooltipFloating",props:n,classes:f1,className:a,style:o,classNames:c,styles:u,unstyled:f,rootSelector:"tooltip",vars:A,varsResolver:uie}),{handleMouseMove:z,x:D,y:L,opened:H,boundaryRef:M,floating:V,setOpened:T}=lie({offset:v,position:x,defaultOpened:C});if(!Tc(r))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const I=jn(M,Vw(r),t),P=r.props,W=q=>{var X;(X=P.onMouseEnter)==null||X.call(P,q),z(q),T(!0)},F=q=>{var X;(X=P.onMouseLeave)==null||X.call(P,q),T(!1)};return m.jsxs(m.Fragment,{children:[m.jsx(hd,{...$,withinPortal:i,children:m.jsx(Ve,{...k,...B("tooltip",{style:{...u7(o,R),zIndex:N,display:!_&&H?"block":"none",top:(L&&Math.round(L))??"",left:(D&&Math.round(D))??""}}),variant:j,ref:V,mod:{multiline:E},children:y})}),w.cloneElement(r,{...P,[s]:I,onMouseEnter:W,onMouseLeave:F})]})});XA.classes=f1;XA.displayName="@mantine/core/TooltipFloating";const GL=w.createContext(!1),die=GL.Provider,fie=()=>w.useContext(GL),hie={openDelay:0,closeDelay:0};function KA(e){const{openDelay:t,closeDelay:n,children:r}=Pe("TooltipGroup",hie,e);return m.jsx(die,{value:!0,children:m.jsx(Hte,{delay:{open:t,close:n},children:r})})}KA.displayName="@mantine/core/TooltipGroup";KA.extend=e=>e;function mie(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function pie(e){const t=mie(e.middlewares),n=[V7(e.offset)];return t.shift&&n.push(fA(typeof t.shift=="boolean"?{padding:8}:{padding:8,...t.shift})),t.flip&&n.push(typeof t.flip=="boolean"?ux():ux(t.flip)),n.push(U7({element:e.arrowRef,padding:e.arrowOffset})),t.inline?n.push(typeof t.inline=="boolean"?ng():ng(t.inline)):e.inline&&n.push(ng()),n}function gie(e){var $,k,R;const[t,n]=w.useState(e.defaultOpened),s=typeof e.opened=="boolean"?e.opened:t,i=fie(),o=hi(),a=w.useCallback(B=>{n(B),B&&_(o)},[o]),{x:c,y:u,context:f,refs:h,update:p,placement:y,middlewareData:{arrow:{x:v,y:x}={}}}=gA({strategy:e.strategy,placement:e.position,open:s,onOpenChange:a,middleware:pie(e)}),{delay:E,currentId:N,setCurrentId:_}=Wte(f,{id:o}),{getReferenceProps:C,getFloatingProps:j}=Zte([Ute(f,{enabled:($=e.events)==null?void 0:$.hover,delay:i?E:{open:e.openDelay,close:e.closeDelay},mouseOnly:!((k=e.events)!=null&&k.touch)}),Qte(f,{enabled:(R=e.events)==null?void 0:R.focus,visibleOnly:!0}),tne(f,{role:"tooltip"}),Xte(f,{enabled:typeof e.opened>"u"})]);eL({opened:s,position:e.position,positionDependencies:e.positionDependencies,floating:{refs:h,update:p}}),Da(()=>{var B;(B=e.onPositionChange)==null||B.call(e,y)},[y]);const A=s&&N&&N!==o;return{x:c,y:u,arrowX:v,arrowY:x,reference:h.setReference,floating:h.setFloating,getFloatingProps:j,getReferenceProps:C,isGroupPhase:A,opened:s,placement:y}}const PM={position:"top",refProp:"ref",withinPortal:!0,inline:!1,defaultOpened:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:to("popover"),positionDependencies:[],middlewares:{flip:!0,shift:!0,inline:!1}},yie=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:Qn(t),"--tooltip-bg":n?Cr(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),Pc=Ye((e,t)=>{const n=Pe("Tooltip",PM,e),{children:r,position:s,refProp:i,label:o,openDelay:a,closeDelay:c,onPositionChange:u,opened:f,defaultOpened:h,withinPortal:p,radius:y,color:v,classNames:x,styles:E,unstyled:N,style:_,className:C,withArrow:j,arrowSize:A,arrowOffset:$,arrowRadius:k,arrowPosition:R,offset:B,transitionProps:z,multiline:D,events:L,zIndex:H,disabled:M,positionDependencies:V,onClick:T,onMouseEnter:I,onMouseLeave:P,inline:W,variant:F,keepMounted:q,vars:X,portalProps:Q,mod:se,floatingStrategy:ae,middlewares:de,...ce}=Pe("Tooltip",PM,n),{dir:fe}=Mc(),ve=w.useRef(null),Ae=gie({position:G7(fe,s),closeDelay:c,openDelay:a,onPositionChange:u,opened:f,defaultOpened:h,events:L,arrowRef:ve,arrowOffset:$,offset:typeof B=="number"?B+(j?A/2:0):B,positionDependencies:[...V,r],inline:W,strategy:ae,middlewares:de}),Ce=wt({name:"Tooltip",props:n,classes:f1,className:C,style:_,classNames:x,styles:E,unstyled:N,rootSelector:"tooltip",vars:X,varsResolver:yie});if(!Tc(r))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const Ee=jn(Ae.reference,Vw(r),t),Re=aie(z,{duration:100,transition:"fade"}),ke=r.props;return m.jsxs(m.Fragment,{children:[m.jsx(hd,{...Q,withinPortal:p,children:m.jsx(Ic,{...Re,keepMounted:q,mounted:!M&&!!Ae.opened,duration:Ae.isGroupPhase?10:Re.duration,children:He=>m.jsxs(Ve,{...ce,"data-fixed":ae==="fixed"||void 0,variant:F,mod:[{multiline:D},se],...Ae.getFloatingProps({ref:Ae.floating,className:Ce("tooltip").className,style:{...Ce("tooltip").style,...He,zIndex:H,top:Ae.y??0,left:Ae.x??0}}),children:[o,m.jsx(yA,{ref:ve,arrowX:Ae.arrowX,arrowY:Ae.arrowY,visible:j,position:Ae.placement,arrowSize:A,arrowOffset:$,arrowRadius:k,arrowPosition:R,...Ce("arrow")})]})})}),w.cloneElement(r,Ae.getReferenceProps({onClick:T,onMouseEnter:I,onMouseLeave:P,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,[i]:Ee,className:yn(C,ke.className),...ke}))]})});Pc.classes=f1;Pc.displayName="@mantine/core/Tooltip";Pc.Floating=XA;Pc.Group=KA;var YL={root:"m_cf365364",indicator:"m_9e182ccd",label:"m_1738fcb2",input:"m_1714d588",control:"m_69686b9b",innerLabel:"m_78882f40"};const bie={withItemsBorders:!0},vie=(e,{radius:t,color:n,transitionDuration:r,size:s,transitionTimingFunction:i})=>({root:{"--sc-radius":t===void 0?void 0:Qn(t),"--sc-color":n?Cr(n,e):void 0,"--sc-shadow":n?void 0:"var(--mantine-shadow-xs)","--sc-transition-duration":r===void 0?void 0:`${r}ms`,"--sc-transition-timing-function":i,"--sc-padding":Mt(s,"sc-padding"),"--sc-font-size":qr(s)}}),md=Ye((e,t)=>{var de,ce;const n=Pe("SegmentedControl",bie,e),{classNames:r,className:s,style:i,styles:o,unstyled:a,vars:c,data:u,value:f,defaultValue:h,onChange:p,size:y,name:v,disabled:x,readOnly:E,fullWidth:N,orientation:_,radius:C,color:j,transitionDuration:A,transitionTimingFunction:$,variant:k,autoContrast:R,withItemsBorders:B,mod:z,...D}=n,L=wt({name:"SegmentedControl",props:n,classes:YL,className:s,style:i,classNames:r,styles:o,unstyled:a,vars:c,varsResolver:vie}),H=Ds(),M=u.map(fe=>typeof fe=="string"?{label:fe,value:fe}:fe),V=oZ(),[T,I]=w.useState(null),[P,W]=w.useState({}),F=(fe,ve)=>{P[ve]=fe,W(P)},[q,X]=cs({value:f,defaultValue:h,finalValue:Array.isArray(u)?((de=M.find(fe=>!fe.disabled))==null?void 0:de.value)??((ce=u[0])==null?void 0:ce.value)??null:null,onChange:p}),Q=hi(v),se=M.map(fe=>w.createElement(Ve,{...L("control"),mod:{active:q===fe.value,orientation:_},key:fe.value},w.createElement("input",{...L("input"),disabled:x||fe.disabled,type:"radio",name:Q,value:fe.value,id:`${Q}-${fe.value}`,checked:q===fe.value,onChange:()=>!E&&X(fe.value),"data-focus-ring":H.focusRing,key:`${fe.value}-input`}),w.createElement(Ve,{component:"label",...L("label"),mod:{active:q===fe.value&&!(x||fe.disabled),disabled:x||fe.disabled,"read-only":E},htmlFor:`${Q}-${fe.value}`,ref:ve=>F(ve,fe.value),__vars:{"--sc-label-color":j!==void 0?Ay({color:j,theme:H,autoContrast:R}):void 0},key:`${fe.value}-label`},m.jsx("span",{...L("innerLabel"),children:fe.label})))),ae=jn(t,fe=>I(fe));return u.length===0?null:m.jsxs(Ve,{...L("root"),variant:k,size:y,ref:ae,mod:[{"full-width":N,orientation:_,initialized:V,"with-items-borders":B},z],...D,role:"radiogroup","data-disabled":x,children:[typeof q=="string"&&m.jsx(SA,{target:P[q],parent:T,component:"span",transitionDuration:"var(--sc-transition-duration)",...L("indicator")}),se]})});md.classes=YL;md.displayName="@mantine/core/SegmentedControl";const xie={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},h1=Ye((e,t)=>{const n=Pe("Select",xie,e),{classNames:r,styles:s,unstyled:i,vars:o,dropdownOpened:a,defaultDropdownOpened:c,onDropdownClose:u,onDropdownOpen:f,onFocus:h,onBlur:p,onClick:y,onChange:v,data:x,value:E,defaultValue:N,selectFirstOptionOnChange:_,onOptionSubmit:C,comboboxProps:j,readOnly:A,disabled:$,filter:k,limit:R,withScrollArea:B,maxDropdownHeight:z,size:D,searchable:L,rightSection:H,checkIconPosition:M,withCheckIcon:V,nothingFoundMessage:T,name:I,form:P,searchValue:W,defaultSearchValue:F,onSearchChange:q,allowDeselect:X,error:Q,rightSectionPointerEvents:se,id:ae,clearable:de,clearButtonProps:ce,hiddenInputProps:fe,renderOption:ve,onClear:Ae,autoComplete:Ce,scrollAreaProps:Ee,__defaultRightSection:Re,__clearSection:ke,__clearable:He,chevronColor:et,...Oe}=n,Me=w.useMemo(()=>bL(x),[x]),Ie=w.useMemo(()=>EA(Me),[Me]),G=hi(ae),[re,te,he]=cs({value:E,defaultValue:N,finalValue:null,onChange:v}),ie=typeof re=="string"?Ie[re]:void 0,ne=sZ(ie),[le,xe]=cs({value:W,defaultValue:F,finalValue:ie?ie.label:"",onChange:q}),Ne=MA({opened:a,defaultOpened:c,onDropdownOpen:()=>{f==null||f(),Ne.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{u==null||u(),Ne.resetSelectedOption()}}),{resolvedClassNames:Ge,resolvedStyles:Vt}=Qh({props:n,styles:s,classNames:r});w.useEffect(()=>{_&&Ne.selectFirstOption()},[_,re]),w.useEffect(()=>{E===null&&xe(""),typeof E=="string"&&ie&&((ne==null?void 0:ne.value)!==ie.value||(ne==null?void 0:ne.label)!==ie.label)&&xe(ie.label)},[E,ie]);const St=m.jsx($t.ClearButton,{...ce,onClear:()=>{te(null,null),xe(""),Ae==null||Ae()}}),oo=de&&!!re&&!$&&!A;return m.jsxs(m.Fragment,{children:[m.jsxs($t,{store:Ne,__staticSelector:"Select",classNames:Ge,styles:Vt,unstyled:i,readOnly:A,onOptionSubmit:Ut=>{C==null||C(Ut);const hn=X&&Ie[Ut].value===re?null:Ie[Ut],ur=hn?hn.value:null;ur!==re&&te(ur,hn),!he&&xe(typeof ur=="string"&&(hn==null?void 0:hn.label)||""),Ne.closeDropdown()},size:D,...j,children:[m.jsx($t.Target,{targetType:L?"input":"button",autoComplete:Ce,children:m.jsx(gi,{id:G,ref:t,__defaultRightSection:m.jsx($t.Chevron,{size:D,error:Q,unstyled:i,color:et}),__clearSection:St,__clearable:oo,rightSection:H,rightSectionPointerEvents:se||(oo?"all":"none"),...Oe,size:D,__staticSelector:"Select",disabled:$,readOnly:A||!L,value:le,onChange:Ut=>{xe(Ut.currentTarget.value),Ne.openDropdown(),_&&Ne.selectFirstOption()},onFocus:Ut=>{L&&Ne.openDropdown(),h==null||h(Ut)},onBlur:Ut=>{var hn;L&&Ne.closeDropdown(),xe(re!=null&&((hn=Ie[re])==null?void 0:hn.label)||""),p==null||p(Ut)},onClick:Ut=>{L?Ne.openDropdown():Ne.toggleDropdown(),y==null||y(Ut)},classNames:Ge,styles:Vt,unstyled:i,pointer:!L,error:Q})}),m.jsx(AL,{data:Me,hidden:A||$,filter:k,search:le,limit:R,hiddenWhenEmpty:!T,withScrollArea:B,maxDropdownHeight:z,filterOptions:L&&(ie==null?void 0:ie.label)!==le,value:re,checkIconPosition:M,withCheckIcon:V,nothingFoundMessage:T,unstyled:i,labelId:Oe.label?`${G}-label`:void 0,"aria-label":Oe.label?void 0:Oe["aria-label"],renderOption:ve,scrollAreaProps:Ee})]}),m.jsx($t.HiddenInput,{value:re,name:I,form:P,disabled:$,...fe})]})});h1.classes={...gi.classes,...$t.classes};h1.displayName="@mantine/core/Select";const[wie,m1]=Ya("SliderProvider was not found in tree"),JL=w.forwardRef(({size:e,disabled:t,variant:n,color:r,thumbSize:s,radius:i,...o},a)=>{const{getStyles:c}=m1();return m.jsx(Ve,{tabIndex:-1,variant:n,size:e,ref:a,...c("root"),...o})});JL.displayName="@mantine/core/SliderRoot";const XL=w.forwardRef(({max:e,min:t,value:n,position:r,label:s,dragging:i,onMouseDown:o,onKeyDownCapture:a,labelTransitionProps:c,labelAlwaysOn:u,thumbLabel:f,onFocus:h,onBlur:p,showLabelOnHover:y,isHovered:v,children:x=null,disabled:E},N)=>{const{getStyles:_}=m1(),[C,j]=w.useState(!1),A=u||i||C||y&&v;return m.jsxs(Ve,{tabIndex:0,role:"slider","aria-label":f,"aria-valuemax":e,"aria-valuemin":t,"aria-valuenow":n,ref:N,__vars:{"--slider-thumb-offset":`${r}%`},..._("thumb",{focusable:!0}),mod:{dragging:i,disabled:E},onFocus:$=>{j(!0),typeof h=="function"&&h($)},onBlur:$=>{j(!1),typeof p=="function"&&p($)},onTouchStart:o,onMouseDown:o,onKeyDownCapture:a,onClick:$=>$.stopPropagation(),children:[x,m.jsx(Ic,{mounted:s!=null&&!!A,transition:"fade",duration:0,...c,children:$=>m.jsx("div",{..._("label",{style:$}),children:s})})]})});XL.displayName="@mantine/core/SliderThumb";function KL({value:e,min:t,max:n}){const r=(e-t)/(n-t)*100;return Math.min(Math.max(r,0),100)}function Sie({mark:e,offset:t,value:n,inverted:r=!1}){return r?typeof t=="number"&&e.value<=t||e.value>=n:typeof t=="number"?e.value>=t&&e.value<=n:e.value<=n}function QL({marks:e,min:t,max:n,disabled:r,value:s,offset:i,inverted:o}){const{getStyles:a}=m1();if(!e)return null;const c=e.map((u,f)=>w.createElement(Ve,{...a("markWrapper"),__vars:{"--mark-offset":`${KL({value:u.value,min:t,max:n})}%`},key:f},m.jsx(Ve,{...a("mark"),mod:{filled:Sie({mark:u,value:s,offset:i,inverted:o}),disabled:r}}),u.label&&m.jsx("div",{...a("markLabel"),children:u.label})));return m.jsx("div",{children:c})}QL.displayName="@mantine/core/SliderMarks";function ZL({filled:e,children:t,offset:n,disabled:r,marksOffset:s,inverted:i,containerProps:o,...a}){const{getStyles:c}=m1();return m.jsx(Ve,{...c("trackContainer"),mod:{disabled:r},...o,children:m.jsxs(Ve,{...c("track"),mod:{inverted:i,disabled:r},children:[m.jsx(Ve,{mod:{inverted:i,disabled:r},__vars:{"--slider-bar-width":`calc(${e}% + var(--slider-size))`,"--slider-bar-offset":`calc(${n}% - var(--slider-size))`},...c("bar")}),t,m.jsx(QL,{...a,offset:s,disabled:r,inverted:i})]})})}ZL.displayName="@mantine/core/SliderTrack";function Eie({value:e,containerWidth:t,min:n,max:r,step:s,precision:i}){const a=(t?Math.min(Math.max(e,0),t)/t:e)*(r-n),c=(a!==0?Math.round(a/s)*s:0)+n,u=Math.max(c,n);return i!==void 0?Number(u.toFixed(i)):u}function zb(e,t){return parseFloat(e.toFixed(t))}function Nie(e){if(!e)return 0;const t=e.toString().split(".");return t.length>1?t[1].length:0}function NN(e,t){const r=[...t].sort((s,i)=>s.value-i.value).find(s=>s.value>e);return r?r.value:e}function _N(e,t){const r=[...t].sort((s,i)=>i.value-s.value).find(s=>s.value<e);return r?r.value:e}function DM(e){const t=[...e].sort((n,r)=>n.value-r.value);return t.length>0?t[0].value:0}function LM(e){const t=[...e].sort((n,r)=>n.value-r.value);return t.length>0?t[t.length-1].value:100}var eF={root:"m_dd36362e",label:"m_c9357328",thumb:"m_c9a9a60a",trackContainer:"m_a8645c2",track:"m_c9ade57f",bar:"m_38aeed47",markWrapper:"m_b7b0423a",mark:"m_dd33bc19",markLabel:"m_68c77a5b"};const _ie={radius:"xl",min:0,max:100,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},Cie=(e,{size:t,color:n,thumbSize:r,radius:s})=>({root:{"--slider-size":Mt(t,"slider-size"),"--slider-color":n?Cr(n,e):void 0,"--slider-radius":s===void 0?void 0:Qn(s),"--slider-thumb-size":r!==void 0?Te(r):"calc(var(--slider-size) * 2)"}}),QA=Ye((e,t)=>{const n=Pe("Slider",_ie,e),{classNames:r,styles:s,value:i,onChange:o,onChangeEnd:a,size:c,min:u,max:f,step:h,precision:p,defaultValue:y,name:v,marks:x,label:E,labelTransitionProps:N,labelAlwaysOn:_,thumbLabel:C,showLabelOnHover:j,thumbChildren:A,disabled:$,unstyled:k,scale:R,inverted:B,className:z,style:D,vars:L,hiddenInputProps:H,restrictToMarks:M,thumbProps:V,...T}=n,I=wt({name:"Slider",props:n,classes:eF,classNames:r,className:z,styles:s,style:D,vars:L,varsResolver:Cie,unstyled:k}),{dir:P}=Mc(),[W,F]=w.useState(!1),[q,X]=cs({value:typeof i=="number"?Ca(i,u,f):i,defaultValue:typeof y=="number"?Ca(y,u,f):y,finalValue:Ca(0,u,f),onChange:o}),Q=w.useRef(q),se=w.useRef(null),ae=w.useRef(null),de=KL({value:q,min:u,max:f}),ce=R(q),fe=typeof E=="function"?E(ce):E,ve=p??Nie(h),Ae=w.useCallback(({x:ke})=>{if(!$){const He=Eie({value:ke,min:u,max:f,step:h,precision:ve});X(M&&(x!=null&&x.length)?Wk(He,x.map(et=>et.value)):He),Q.current=He}},[$,u,f,h,ve,X,x,M]),{ref:Ce,active:Ee}=nZ(Ae,{onScrubEnd:()=>!$&&(a==null?void 0:a(M&&(x!=null&&x.length)?Wk(Q.current,x.map(ke=>ke.value)):Q.current))},P),Re=ke=>{var He,et,Oe,Me,Ie,G;if(!$)switch(ke.key){case"ArrowUp":{if(ke.preventDefault(),(He=ae.current)==null||He.focus(),M&&x){const te=NN(q,x);X(te),a==null||a(te);break}const re=zb(Math.min(Math.max(q+h,u),f),ve);X(re),a==null||a(re);break}case"ArrowRight":{if(ke.preventDefault(),(et=ae.current)==null||et.focus(),M&&x){const te=P==="rtl"?_N(q,x):NN(q,x);X(te),a==null||a(te);break}const re=zb(Math.min(Math.max(P==="rtl"?q-h:q+h,u),f),ve);X(re),a==null||a(re);break}case"ArrowDown":{if(ke.preventDefault(),(Oe=ae.current)==null||Oe.focus(),M&&x){const te=_N(q,x);X(te),a==null||a(te);break}const re=zb(Math.min(Math.max(q-h,u),f),ve);X(re),a==null||a(re);break}case"ArrowLeft":{if(ke.preventDefault(),(Me=ae.current)==null||Me.focus(),M&&x){const te=P==="rtl"?NN(q,x):_N(q,x);X(te),a==null||a(te);break}const re=zb(Math.min(Math.max(P==="rtl"?q+h:q-h,u),f),ve);X(re),a==null||a(re);break}case"Home":{if(ke.preventDefault(),(Ie=ae.current)==null||Ie.focus(),M&&x){X(DM(x)),a==null||a(DM(x));break}X(u),a==null||a(u);break}case"End":{if(ke.preventDefault(),(G=ae.current)==null||G.focus(),M&&x){X(LM(x)),a==null||a(LM(x));break}X(f),a==null||a(f);break}}};return m.jsx(wie,{value:{getStyles:I},children:m.jsxs(JL,{...T,ref:jn(t,se),onKeyDownCapture:Re,onMouseDownCapture:()=>{var ke;return(ke=se.current)==null?void 0:ke.focus()},size:c,disabled:$,children:[m.jsx(ZL,{inverted:B,offset:0,filled:de,marks:x,min:u,max:f,value:ce,disabled:$,containerProps:{ref:Ce,onMouseEnter:j?()=>F(!0):void 0,onMouseLeave:j?()=>F(!1):void 0},children:m.jsx(XL,{max:f,min:u,value:ce,position:de,dragging:Ee,label:fe,ref:ae,labelTransitionProps:N,labelAlwaysOn:_,thumbLabel:C,showLabelOnHover:j,isHovered:W,disabled:$,...V,children:A})}),m.jsx("input",{type:"hidden",name:v,value:ce,...H})]})})});QA.classes=eF;QA.displayName="@mantine/core/Slider";const tF=w.createContext(null),Oie=tF.Provider,jie=()=>w.useContext(tF),Aie={},ZA=Ye((e,t)=>{const{value:n,defaultValue:r,onChange:s,size:i,wrapperProps:o,children:a,readOnly:c,...u}=Pe("SwitchGroup",Aie,e),[f,h]=cs({value:n,defaultValue:r,finalValue:[],onChange:s}),p=y=>{const v=y.currentTarget.value;!c&&h(f.includes(v)?f.filter(x=>x!==v):[...f,v])};return m.jsx(Oie,{value:{value:f,onChange:p,size:i},children:m.jsx(It.Wrapper,{size:i,ref:t,...o,...u,labelElement:"div",__staticSelector:"SwitchGroup",children:m.jsx(_L,{role:"group",children:a})})})});ZA.classes=It.Wrapper.classes;ZA.displayName="@mantine/core/SwitchGroup";var nF={root:"m_5f93f3bb",input:"m_926b4011",track:"m_9307d992",thumb:"m_93039a1d",trackLabel:"m_8277e082"};const Tie={labelPosition:"right"},$ie=(e,{radius:t,color:n,size:r})=>({root:{"--switch-radius":t===void 0?void 0:Qn(t),"--switch-height":Mt(r,"switch-height"),"--switch-width":Mt(r,"switch-width"),"--switch-thumb-size":Mt(r,"switch-thumb-size"),"--switch-label-font-size":Mt(r,"switch-label-font-size"),"--switch-track-label-padding":Mt(r,"switch-track-label-padding"),"--switch-color":n?Cr(n,e):void 0}}),Ka=Ye((e,t)=>{const n=Pe("Switch",Tie,e),{classNames:r,className:s,style:i,styles:o,unstyled:a,vars:c,color:u,label:f,offLabel:h,onLabel:p,id:y,size:v,radius:x,wrapperProps:E,thumbIcon:N,checked:_,defaultChecked:C,onChange:j,labelPosition:A,description:$,error:k,disabled:R,variant:B,rootRef:z,mod:D,...L}=n,H=jie(),M=v||(H==null?void 0:H.size),V=wt({name:"Switch",props:n,classes:nF,className:s,style:i,classNames:r,styles:o,unstyled:a,vars:c,varsResolver:$ie}),{styleProps:T,rest:I}=Zh(L),P=hi(y),W=H?{checked:H.value.includes(I.value),onChange:H.onChange}:{},[F,q]=cs({value:W.checked??_,defaultValue:C,finalValue:!1});return m.jsxs(IA,{...V("root"),__staticSelector:"Switch",__stylesApiProps:n,id:P,size:M,labelPosition:A,label:f,description:$,error:k,disabled:R,bodyElement:"label",labelElement:"span",classNames:r,styles:o,unstyled:a,"data-checked":W.checked||_||void 0,variant:B,ref:z,mod:D,...T,...E,children:[m.jsx("input",{...I,disabled:R,checked:F,"data-checked":W.checked||_||void 0,onChange:X=>{var Q;H?(Q=W.onChange)==null||Q.call(W,X):j==null||j(X),q(X.currentTarget.checked)},id:P,ref:t,type:"checkbox",role:"switch",...V("input")}),m.jsxs(Ve,{"aria-hidden":"true",mod:{error:k,"label-position":A,"without-labels":!p&&!h},...V("track"),children:[m.jsx(Ve,{component:"span",mod:"reduce-motion",...V("thumb"),children:N}),m.jsx("span",{...V("trackLabel"),children:F?p:h})]})]})});Ka.classes={...nF,...bre};Ka.displayName="@mantine/core/Switch";Ka.Group=ZA;const[Rie,eT]=Ya("Tabs component was not found in the tree");var Py={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const kie={},tT=Ye((e,t)=>{const n=Pe("TabsList",kie,e),{children:r,className:s,grow:i,justify:o,classNames:a,styles:c,style:u,mod:f,...h}=n,p=eT();return m.jsx(Ve,{...h,...p.getStyles("list",{className:s,style:u,classNames:a,styles:c,props:n,variant:p.variant}),ref:t,role:"tablist",variant:p.variant,mod:[{grow:i,orientation:p.orientation,placement:p.orientation==="vertical"&&p.placement,inverted:p.inverted},f],"aria-orientation":p.orientation,__vars:{"--tabs-justify":o},children:r})});tT.classes=Py;tT.displayName="@mantine/core/TabsList";const Mie={},nT=Ye((e,t)=>{const n=Pe("TabsPanel",Mie,e),{children:r,className:s,value:i,classNames:o,styles:a,style:c,mod:u,keepMounted:f,...h}=n,p=eT(),y=p.value===i,v=p.keepMounted||f||y?r:null;return m.jsx(Ve,{...h,...p.getStyles("panel",{className:s,classNames:o,styles:a,style:[c,y?void 0:{display:"none"}],props:n}),ref:t,mod:[{orientation:p.orientation},u],role:"tabpanel",id:p.getPanelId(i),"aria-labelledby":p.getTabId(i),children:v})});nT.classes=Py;nT.displayName="@mantine/core/TabsPanel";const Iie={},rT=Ye((e,t)=>{const n=Pe("TabsTab",Iie,e),{className:r,children:s,rightSection:i,leftSection:o,value:a,onClick:c,onKeyDown:u,disabled:f,color:h,style:p,classNames:y,styles:v,vars:x,mod:E,tabIndex:N,..._}=n,C=Ds(),{dir:j}=Mc(),A=eT(),$=a===A.value,k=B=>{A.onChange(A.allowTabDeactivation&&a===A.value?null:a),c==null||c(B)},R={classNames:y,styles:v,props:n};return m.jsxs(La,{..._,...A.getStyles("tab",{className:r,style:p,variant:A.variant,...R}),disabled:f,unstyled:A.unstyled,variant:A.variant,mod:[{active:$,disabled:f,orientation:A.orientation,inverted:A.inverted,placement:A.orientation==="vertical"&&A.placement},E],ref:t,role:"tab",id:A.getTabId(a),"aria-selected":$,tabIndex:N!==void 0?N:$||A.value===null?0:-1,"aria-controls":A.getPanelId(a),onClick:k,__vars:{"--tabs-color":h?Cr(h,C):void 0},onKeyDown:K8({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:A.activateTabWithKeyboard,loop:A.loop,orientation:A.orientation||"horizontal",dir:j,onKeyDown:u}),children:[o&&m.jsx("span",{...A.getStyles("tabSection",R),"data-position":"left",children:o}),s&&m.jsx("span",{...A.getStyles("tabLabel",R),children:s}),i&&m.jsx("span",{...A.getStyles("tabSection",R),"data-position":"right",children:i})]})});rT.classes=Py;rT.displayName="@mantine/core/TabsTab";const FM="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",Pie={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},Die=(e,{radius:t,color:n,autoContrast:r})=>({root:{"--tabs-radius":Qn(t),"--tabs-color":Cr(n,e),"--tabs-text-color":Kj(r,e)?Ay({color:n,theme:e,autoContrast:r}):void 0}}),wn=Ye((e,t)=>{const n=Pe("Tabs",Pie,e),{defaultValue:r,value:s,onChange:i,orientation:o,children:a,loop:c,id:u,activateTabWithKeyboard:f,allowTabDeactivation:h,variant:p,color:y,radius:v,inverted:x,placement:E,keepMounted:N,classNames:_,styles:C,unstyled:j,className:A,style:$,vars:k,autoContrast:R,mod:B,...z}=n,D=hi(u),[L,H]=cs({value:s,defaultValue:r,finalValue:null,onChange:i}),M=wt({name:"Tabs",props:n,classes:Py,className:A,style:$,classNames:_,styles:C,unstyled:j,vars:k,varsResolver:Die});return m.jsx(Rie,{value:{placement:E,value:L,orientation:o,id:D,loop:c,activateTabWithKeyboard:f,getTabId:qk(`${D}-tab`,FM),getPanelId:qk(`${D}-panel`,FM),onChange:H,allowTabDeactivation:h,variant:p,color:y,radius:v,inverted:x,keepMounted:N,unstyled:j,getStyles:M},children:m.jsx(Ve,{ref:t,id:D,variant:p,mod:[{orientation:o,inverted:o==="horizontal"&&x,placement:o==="vertical"&&E},B],...M("root"),...z,children:a})})});wn.classes=Py;wn.displayName="@mantine/core/Tabs";wn.Tab=rT;wn.Panel=nT;wn.List=tT;function Lie({data:e,value:t}){const n=t.map(s=>s.trim().toLowerCase());return e.reduce((s,i)=>(Nh(i)?s.push({group:i.group,items:i.items.filter(o=>n.indexOf(o.label.toLowerCase().trim())===-1)}):n.indexOf(i.label.toLowerCase().trim())===-1&&s.push(i),s),[])}function Fie(e,t){return e?t.split(new RegExp(`[${e.join("")}]`)).map(n=>n.trim()).filter(n=>n!==""):[t]}function BM({splitChars:e,allowDuplicates:t,maxTags:n,value:r,currentTags:s}){const i=Fie(e,r),o=t?[...s,...i]:[...new Set([...s,...i])];return n?o.slice(0,n):o}const Bie={maxTags:1/0,allowDuplicates:!1,acceptValueOnBlur:!0,splitChars:[","],hiddenInputValuesDivider:","},sT=Ye((e,t)=>{const n=Pe("TagsInput",Bie,e),{classNames:r,className:s,style:i,styles:o,unstyled:a,vars:c,size:u,value:f,defaultValue:h,onChange:p,onKeyDown:y,maxTags:v,allowDuplicates:x,onDuplicate:E,variant:N,data:_,dropdownOpened:C,defaultDropdownOpened:j,onDropdownOpen:A,onDropdownClose:$,selectFirstOptionOnChange:k,onOptionSubmit:R,comboboxProps:B,filter:z,limit:D,withScrollArea:L,maxDropdownHeight:H,searchValue:M,defaultSearchValue:V,onSearchChange:T,readOnly:I,disabled:P,splitChars:W,onFocus:F,onBlur:q,onPaste:X,radius:Q,rightSection:se,rightSectionWidth:ae,rightSectionPointerEvents:de,rightSectionProps:ce,leftSection:fe,leftSectionWidth:ve,leftSectionPointerEvents:Ae,leftSectionProps:Ce,inputContainer:Ee,inputWrapperOrder:Re,withAsterisk:ke,required:He,labelProps:et,descriptionProps:Oe,errorProps:Me,wrapperProps:Ie,description:G,label:re,error:te,withErrorStyles:he,name:ie,form:ne,id:le,clearable:xe,clearButtonProps:Ne,hiddenInputProps:Ge,hiddenInputValuesDivider:Vt,mod:St,renderOption:oo,onRemove:Ut,onClear:hn,scrollAreaProps:ur,acceptValueOnBlur:wi,...Bs}=n,ao=hi(le),qc=bL(_),Ad=EA(qc),al=w.useRef(null),Vo=jn(al,t),zs=MA({opened:C,defaultOpened:j,onDropdownOpen:A,onDropdownClose:()=>{$==null||$(),zs.resetSelectedOption()}}),{styleProps:Hc,rest:{type:Cm,autoComplete:Wc,...Gc}}=Zh(Bs),[mn,Si]=cs({value:f,defaultValue:h,finalValue:[],onChange:p}),[er,an]=cs({value:M,defaultValue:V,finalValue:"",onChange:T}),Ln=wt({name:"TagsInput",classes:{},props:n,classNames:r,styles:o,unstyled:a}),{resolvedClassNames:Ei,resolvedStyles:ll}=Qh({props:n,styles:o,classNames:r}),Td=mt=>{const Tn=mn.some(br=>br.toLowerCase()===mt.toLowerCase());Tn&&(E==null||E(mt)),(!Tn||Tn&&x)&&mn.length<v&&(R==null||R(mt),an(""),mt.length>0&&Si([...mn,mt]))},Om=mt=>{if(y==null||y(mt),mt.isPropagationStopped())return;const Tn=er.trim(),{length:br}=Tn;if(W.includes(mt.key)&&br>0&&(Si(BM({splitChars:W,allowDuplicates:x,maxTags:v,value:er,currentTags:mn})),an(""),mt.preventDefault()),mt.key==="Enter"&&br>0&&!mt.nativeEvent.isComposing){if(mt.preventDefault(),!!document.querySelector(`#${zs.listId} [data-combobox-option][data-combobox-selected]`))return;Td(Tn)}mt.key==="Backspace"&&br===0&&mn.length>0&&!mt.nativeEvent.isComposing&&(Ut==null||Ut(mn[mn.length-1]),Si(mn.slice(0,mn.length-1)))},$d=mt=>{if(X==null||X(mt),mt.preventDefault(),mt.clipboardData){const Tn=mt.clipboardData.getData("text/plain");Si(BM({splitChars:W,allowDuplicates:x,maxTags:v,value:`${er}${Tn}`,currentTags:mn})),an("")}},Uo=mn.map((mt,Tn)=>m.jsx(jg,{withRemoveButton:!I,onRemove:()=>{const br=mn.slice();br.splice(Tn,1),Si(br),Ut==null||Ut(mt)},unstyled:a,disabled:P,...Ln("pill"),children:mt},`${mt}-${Tn}`));w.useEffect(()=>{k&&zs.selectFirstOption()},[k,mn,er]);const Yc=m.jsx($t.ClearButton,{...Ne,onClear:()=>{var mt;Si([]),an(""),(mt=al.current)==null||mt.focus(),zs.openDropdown(),hn==null||hn()}});return m.jsxs(m.Fragment,{children:[m.jsxs($t,{store:zs,classNames:Ei,styles:ll,unstyled:a,size:u,readOnly:I,__staticSelector:"TagsInput",onOptionSubmit:mt=>{R==null||R(mt),an(""),mn.length<v&&Si([...mn,Ad[mt].label]),zs.resetSelectedOption()},...B,children:[m.jsx($t.DropdownTarget,{children:m.jsx(dx,{...Hc,__staticSelector:"TagsInput",classNames:Ei,styles:ll,unstyled:a,size:u,className:s,style:i,variant:N,disabled:P,radius:Q,rightSection:se,__clearSection:Yc,__clearable:xe&&mn.length>0&&!P&&!I,rightSectionWidth:ae,rightSectionPointerEvents:de,rightSectionProps:ce,leftSection:fe,leftSectionWidth:ve,leftSectionPointerEvents:Ae,leftSectionProps:Ce,inputContainer:Ee,inputWrapperOrder:Re,withAsterisk:ke,required:He,labelProps:et,descriptionProps:Oe,errorProps:Me,wrapperProps:Ie,description:G,label:re,error:te,multiline:!0,withErrorStyles:he,__stylesApiProps:{...n,multiline:!0},id:ao,mod:St,children:m.jsxs(jg.Group,{disabled:P,unstyled:a,...Ln("pillsList"),children:[Uo,m.jsx($t.EventsTarget,{autoComplete:Wc,children:m.jsx(dx.Field,{...Gc,ref:Vo,...Ln("inputField"),unstyled:a,onKeyDown:Om,onFocus:mt=>{F==null||F(mt),zs.openDropdown()},onBlur:mt=>{q==null||q(mt),wi&&Td(er),zs.closeDropdown()},onPaste:$d,value:er,onChange:mt=>an(mt.currentTarget.value),required:He&&mn.length===0,disabled:P,readOnly:I,id:ao})})]})})}),m.jsx(AL,{data:Lie({data:qc,value:mn}),hidden:I||P,filter:z,search:er,limit:D,hiddenWhenEmpty:!0,withScrollArea:L,maxDropdownHeight:H,unstyled:a,labelId:re?`${ao}-label`:void 0,"aria-label":re?void 0:Bs["aria-label"],renderOption:oo,scrollAreaProps:ur})]}),m.jsx($t.HiddenInput,{name:ie,form:ne,value:mn,valuesDivider:Vt,disabled:P,...Ge})]})});sT.classes={...gi.classes,...$t.classes};sT.displayName="@mantine/core/TagsInput";const zie={},On=Ye((e,t)=>{const n=Pe("TextInput",zie,e);return m.jsx(gi,{component:"input",ref:t,...n,__staticSelector:"TextInput"})});On.classes=gi.classes;On.displayName="@mantine/core/TextInput";function Vie(e){let t=e,n=!1;const r=new Set;return{getState(){return t},updateState(s){t=typeof s=="function"?s(t):s},setState(s){this.updateState(s),r.forEach(i=>i(t))},initialize(s){n||(t=s,n=!0)},subscribe(s){return r.add(s),()=>r.delete(s)}}}function Uie(e){return w.useSyncExternalStore(e.subscribe,()=>e.getState(),()=>e.getState())}function qie(e,t,n){const r=[],s=[],i={};for(const o of e){const a=o.position||t;i[a]=i[a]||0,i[a]+=1,i[a]<=n?s.push(o):r.push(o)}return{notifications:s,queue:r}}const Hie=()=>Vie({notifications:[],queue:[],defaultPosition:"bottom-right",limit:5}),pd=Hie(),Wie=(e=pd)=>Uie(e);function am(e,t){const n=e.getState(),r=t([...n.notifications,...n.queue]),s=qie(r,n.defaultPosition,n.limit);e.setState({notifications:s.notifications,queue:s.queue,limit:n.limit,defaultPosition:n.defaultPosition})}function Gie(e,t=pd){const n=e.id||Wf();return am(t,r=>e.id&&r.some(s=>s.id===e.id)?r:[...r,{...e,id:n}]),n}function rF(e,t=pd){return am(t,n=>n.filter(r=>{var s;return r.id===e?((s=r.onClose)==null||s.call(r,r),!1):!0})),e}function Yie(e,t=pd){return am(t,n=>n.map(r=>r.id===e.id?{...r,...e}:r)),e.id}function Jie(e=pd){am(e,()=>[])}function Xie(e=pd){am(e,t=>t.slice(0,e.getState().limit))}const si={show:Gie,hide:rF,update:Yie,clean:Jie,cleanQueue:Xie,updateState:am};function CC(e,t){return CC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},CC(e,t)}function sF(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,CC(e,t)}const zM={disabled:!1},fx=je.createContext(null);var Kie=function(t){return t.scrollTop},Jp="unmounted",mu="exited",pu="entering",Tf="entered",OC="exiting",Qa=function(e){sF(t,e);function t(r,s){var i;i=e.call(this,r,s)||this;var o=s,a=o&&!o.isMounting?r.enter:r.appear,c;return i.appearStatus=null,r.in?a?(c=mu,i.appearStatus=pu):c=Tf:r.unmountOnExit||r.mountOnEnter?c=Jp:c=mu,i.state={status:c},i.nextCallback=null,i}t.getDerivedStateFromProps=function(s,i){var o=s.in;return o&&i.status===Jp?{status:mu}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(s){var i=null;if(s!==this.props){var o=this.state.status;this.props.in?o!==pu&&o!==Tf&&(i=pu):(o===pu||o===Tf)&&(i=OC)}this.updateStatus(!1,i)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var s=this.props.timeout,i,o,a;return i=o=a=s,s!=null&&typeof s!="number"&&(i=s.exit,o=s.enter,a=s.appear!==void 0?s.appear:o),{exit:i,enter:o,appear:a}},n.updateStatus=function(s,i){if(s===void 0&&(s=!1),i!==null)if(this.cancelNextCallback(),i===pu){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:Df.findDOMNode(this);o&&Kie(o)}this.performEnter(s)}else this.performExit();else this.props.unmountOnExit&&this.state.status===mu&&this.setState({status:Jp})},n.performEnter=function(s){var i=this,o=this.props.enter,a=this.context?this.context.isMounting:s,c=this.props.nodeRef?[a]:[Df.findDOMNode(this),a],u=c[0],f=c[1],h=this.getTimeouts(),p=a?h.appear:h.enter;if(!s&&!o||zM.disabled){this.safeSetState({status:Tf},function(){i.props.onEntered(u)});return}this.props.onEnter(u,f),this.safeSetState({status:pu},function(){i.props.onEntering(u,f),i.onTransitionEnd(p,function(){i.safeSetState({status:Tf},function(){i.props.onEntered(u,f)})})})},n.performExit=function(){var s=this,i=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:Df.findDOMNode(this);if(!i||zM.disabled){this.safeSetState({status:mu},function(){s.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:OC},function(){s.props.onExiting(a),s.onTransitionEnd(o.exit,function(){s.safeSetState({status:mu},function(){s.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(s,i){i=this.setNextCallback(i),this.setState(s,i)},n.setNextCallback=function(s){var i=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,i.nextCallback=null,s(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(s,i){this.setNextCallback(i);var o=this.props.nodeRef?this.props.nodeRef.current:Df.findDOMNode(this),a=s==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var c=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],u=c[0],f=c[1];this.props.addEndListener(u,f)}s!=null&&setTimeout(this.nextCallback,s)},n.render=function(){var s=this.state.status;if(s===Jp)return null;var i=this.props,o=i.children;i.in,i.mountOnEnter,i.unmountOnExit,i.appear,i.enter,i.exit,i.timeout,i.addEndListener,i.onEnter,i.onEntering,i.onEntered,i.onExit,i.onExiting,i.onExited,i.nodeRef;var a=LA(i,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return je.createElement(fx.Provider,{value:null},typeof o=="function"?o(s,a):je.cloneElement(je.Children.only(o),a))},t}(je.Component);Qa.contextType=fx;Qa.propTypes={};function Sf(){}Qa.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Sf,onEntering:Sf,onEntered:Sf,onExit:Sf,onExiting:Sf,onExited:Sf};Qa.UNMOUNTED=Jp;Qa.EXITED=mu;Qa.ENTERING=pu;Qa.ENTERED=Tf;Qa.EXITING=OC;function Qie(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function iT(e,t){var n=function(i){return t&&w.isValidElement(i)?t(i):i},r=Object.create(null);return e&&w.Children.map(e,function(s){return s}).forEach(function(s){r[s.key]=n(s)}),r}function Zie(e,t){e=e||{},t=t||{};function n(f){return f in t?t[f]:e[f]}var r=Object.create(null),s=[];for(var i in e)i in t?s.length&&(r[i]=s,s=[]):s.push(i);var o,a={};for(var c in t){if(r[c])for(o=0;o<r[c].length;o++){var u=r[c][o];a[r[c][o]]=n(u)}a[c]=n(c)}for(o=0;o<s.length;o++)a[s[o]]=n(s[o]);return a}function Cu(e,t,n){return n[t]!=null?n[t]:e.props[t]}function eoe(e,t){return iT(e.children,function(n){return w.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:Cu(n,"appear",e),enter:Cu(n,"enter",e),exit:Cu(n,"exit",e)})})}function toe(e,t,n){var r=iT(e.children),s=Zie(t,r);return Object.keys(s).forEach(function(i){var o=s[i];if(w.isValidElement(o)){var a=i in t,c=i in r,u=t[i],f=w.isValidElement(u)&&!u.props.in;c&&(!a||f)?s[i]=w.cloneElement(o,{onExited:n.bind(null,o),in:!0,exit:Cu(o,"exit",e),enter:Cu(o,"enter",e)}):!c&&a&&!f?s[i]=w.cloneElement(o,{in:!1}):c&&a&&w.isValidElement(u)&&(s[i]=w.cloneElement(o,{onExited:n.bind(null,o),in:u.props.in,exit:Cu(o,"exit",e),enter:Cu(o,"enter",e)}))}}),s}var noe=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},roe={component:"div",childFactory:function(t){return t}},Hl=function(e){sF(t,e);function t(r,s){var i;i=e.call(this,r,s)||this;var o=i.handleExited.bind(Qie(i));return i.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},i}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(s,i){var o=i.children,a=i.handleExited,c=i.firstRender;return{children:c?eoe(s,a):toe(s,o,a),firstRender:!1}},n.handleExited=function(s,i){var o=iT(this.props.children);s.key in o||(s.props.onExited&&s.props.onExited(i),this.mounted&&this.setState(function(a){var c=_h({},a.children);return delete c[s.key],{children:c}}))},n.render=function(){var s=this.props,i=s.component,o=s.childFactory,a=LA(s,["component","childFactory"]),c=this.state.contextValue,u=noe(this.state.children).map(o);return delete a.appear,delete a.enter,delete a.exit,i===null?je.createElement(fx.Provider,{value:c},u):je.createElement(fx.Provider,{value:c},je.createElement(i,a,u))},t}(je.Component);Hl.propTypes={};Hl.defaultProps=roe;const iF=["bottom-center","bottom-left","bottom-right","top-center","top-left","top-right"];function soe(e,t){return e.reduce((n,r)=>(n[r.position||t].push(r),n),iF.reduce((n,r)=>(n[r]=[],n),{}))}const VM={left:"translateX(-100%)",right:"translateX(100%)","top-center":"translateY(-100%)","bottom-center":"translateY(100%)"},ioe={left:"translateX(0)",right:"translateX(0)","top-center":"translateY(0)","bottom-center":"translateY(0)"};function ooe({state:e,maxHeight:t,position:n,transitionDuration:r}){const[s,i]=n.split("-"),o=i==="center"?`${s}-center`:i,a={opacity:0,maxHeight:t,transform:VM[o],transitionDuration:`${r}ms, ${r}ms, ${r}ms`,transitionTimingFunction:"cubic-bezier(.51,.3,0,1.21), cubic-bezier(.51,.3,0,1.21), linear",transitionProperty:"opacity, transform, max-height"},c={opacity:1,transform:ioe[o]},u={opacity:0,maxHeight:0,transform:VM[o]};return{...a,...{entering:c,entered:c,exiting:u,exited:u}[e]}}function aoe(e,t){return typeof t=="number"?t:t===!1||e===!1?!1:e}const oF=w.forwardRef(({data:e,onHide:t,autoClose:n,...r},s)=>{const{autoClose:i,message:o,...a}=e,c=aoe(n,e.autoClose),u=w.useRef(-1),f=()=>window.clearTimeout(u.current),h=()=>{t(e.id),f()},p=()=>{typeof c=="number"&&(u.current=window.setTimeout(h,c))};return w.useEffect(()=>{var y;(y=e.onOpen)==null||y.call(e,e)},[]),w.useEffect(()=>(p(),f),[c]),m.jsx(WA,{...r,...a,onClose:h,ref:s,onMouseEnter:f,onMouseLeave:p,children:o})});oF.displayName="@mantine/notifications/NotificationContainer";var aF={root:"m_b37d9ac7",notification:"m_5ed0edd0"};const loe=Qa,coe={position:"bottom-right",autoClose:4e3,transitionDuration:250,containerWidth:440,notificationMaxHeight:200,limit:5,zIndex:to("overlay"),store:pd,withinPortal:!0},uoe=(e,{zIndex:t,containerWidth:n})=>({root:{"--notifications-z-index":t==null?void 0:t.toString(),"--notifications-container-width":Te(n)}}),Do=Ye((e,t)=>{const n=Pe("Notifications",coe,e),{classNames:r,className:s,style:i,styles:o,unstyled:a,vars:c,position:u,autoClose:f,transitionDuration:h,containerWidth:p,notificationMaxHeight:y,limit:v,zIndex:x,store:E,portalProps:N,withinPortal:_,...C}=n,j=Ds(),A=Wie(E),$=KQ(),k=Wj(),R=w.useRef({}),B=w.useRef(0),D=(j.respectReducedMotion?k:!1)?1:h,L=wt({name:"Notifications",classes:aF,props:n,className:s,style:i,classNames:r,styles:o,unstyled:a,vars:c,varsResolver:uoe});w.useEffect(()=>{E==null||E.updateState(V=>({...V,limit:v||5,defaultPosition:u}))},[v,u]),Da(()=>{A.notifications.length>B.current&&setTimeout(()=>$(),0),B.current=A.notifications.length},[A.notifications]);const H=soe(A.notifications,u),M=iF.reduce((V,T)=>(V[T]=H[T].map(({style:I,...P})=>m.jsx(loe,{timeout:D,onEnter:()=>R.current[P.id].offsetHeight,nodeRef:{current:R.current[P.id]},children:W=>m.jsx(oF,{ref:F=>{R.current[P.id]=F},data:P,onHide:F=>rF(F,E),autoClose:f,...L("notification",{style:{...ooe({state:W,position:T,transitionDuration:D,maxHeight:y}),...I}})})},P.id)),V),{});return m.jsxs(hd,{withinPortal:_,...N,children:[m.jsx(Ve,{...L("root"),"data-position":"top-center",ref:t,...C,children:m.jsx(Hl,{children:M["top-center"]})}),m.jsx(Ve,{...L("root"),"data-position":"top-left",...C,children:m.jsx(Hl,{children:M["top-left"]})}),m.jsx(Ve,{...L("root",{className:rx.classNames.fullWidth}),"data-position":"top-right",...C,children:m.jsx(Hl,{children:M["top-right"]})}),m.jsx(Ve,{...L("root",{className:rx.classNames.fullWidth}),"data-position":"bottom-right",...C,children:m.jsx(Hl,{children:M["bottom-right"]})}),m.jsx(Ve,{...L("root"),"data-position":"bottom-left",...C,children:m.jsx(Hl,{children:M["bottom-left"]})}),m.jsx(Ve,{...L("root"),"data-position":"bottom-center",...C,children:m.jsx(Hl,{children:M["bottom-center"]})})]})});Do.classes=aF;Do.displayName="@mantine/notifications/Notifications";Do.show=si.show;Do.hide=si.hide;Do.update=si.update;Do.clean=si.clean;Do.cleanQueue=si.cleanQueue;Do.updateState=si.updateState;var $v={exports:{}},doe=$v.exports,UM;function foe(){return UM||(UM=1,function(e,t){(function(n,r){e.exports=r()})(doe,function(){var n=1e3,r=6e4,s=36e5,i="millisecond",o="second",a="minute",c="hour",u="day",f="week",h="month",p="quarter",y="year",v="date",x="Invalid Date",E=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,N=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,_={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(M){var V=["th","st","nd","rd"],T=M%100;return"["+M+(V[(T-20)%10]||V[T]||V[0])+"]"}},C=function(M,V,T){var I=String(M);return!I||I.length>=V?M:""+Array(V+1-I.length).join(T)+M},j={s:C,z:function(M){var V=-M.utcOffset(),T=Math.abs(V),I=Math.floor(T/60),P=T%60;return(V<=0?"+":"-")+C(I,2,"0")+":"+C(P,2,"0")},m:function M(V,T){if(V.date()<T.date())return-M(T,V);var I=12*(T.year()-V.year())+(T.month()-V.month()),P=V.clone().add(I,h),W=T-P<0,F=V.clone().add(I+(W?-1:1),h);return+(-(I+(T-P)/(W?P-F:F-P))||0)},a:function(M){return M<0?Math.ceil(M)||0:Math.floor(M)},p:function(M){return{M:h,y,w:f,d:u,D:v,h:c,m:a,s:o,ms:i,Q:p}[M]||String(M||"").toLowerCase().replace(/s$/,"")},u:function(M){return M===void 0}},A="en",$={};$[A]=_;var k="$isDayjsObject",R=function(M){return M instanceof L||!(!M||!M[k])},B=function M(V,T,I){var P;if(!V)return A;if(typeof V=="string"){var W=V.toLowerCase();$[W]&&(P=W),T&&($[W]=T,P=W);var F=V.split("-");if(!P&&F.length>1)return M(F[0])}else{var q=V.name;$[q]=V,P=q}return!I&&P&&(A=P),P||!I&&A},z=function(M,V){if(R(M))return M.clone();var T=typeof V=="object"?V:{};return T.date=M,T.args=arguments,new L(T)},D=j;D.l=B,D.i=R,D.w=function(M,V){return z(M,{locale:V.$L,utc:V.$u,x:V.$x,$offset:V.$offset})};var L=function(){function M(T){this.$L=B(T.locale,null,!0),this.parse(T),this.$x=this.$x||T.x||{},this[k]=!0}var V=M.prototype;return V.parse=function(T){this.$d=function(I){var P=I.date,W=I.utc;if(P===null)return new Date(NaN);if(D.u(P))return new Date;if(P instanceof Date)return new Date(P);if(typeof P=="string"&&!/Z$/i.test(P)){var F=P.match(E);if(F){var q=F[2]-1||0,X=(F[7]||"0").substring(0,3);return W?new Date(Date.UTC(F[1],q,F[3]||1,F[4]||0,F[5]||0,F[6]||0,X)):new Date(F[1],q,F[3]||1,F[4]||0,F[5]||0,F[6]||0,X)}}return new Date(P)}(T),this.init()},V.init=function(){var T=this.$d;this.$y=T.getFullYear(),this.$M=T.getMonth(),this.$D=T.getDate(),this.$W=T.getDay(),this.$H=T.getHours(),this.$m=T.getMinutes(),this.$s=T.getSeconds(),this.$ms=T.getMilliseconds()},V.$utils=function(){return D},V.isValid=function(){return this.$d.toString()!==x},V.isSame=function(T,I){var P=z(T);return this.startOf(I)<=P&&P<=this.endOf(I)},V.isAfter=function(T,I){return z(T)<this.startOf(I)},V.isBefore=function(T,I){return this.endOf(I)<z(T)},V.$g=function(T,I,P){return D.u(T)?this[I]:this.set(P,T)},V.unix=function(){return Math.floor(this.valueOf()/1e3)},V.valueOf=function(){return this.$d.getTime()},V.startOf=function(T,I){var P=this,W=!!D.u(I)||I,F=D.p(T),q=function(ve,Ae){var Ce=D.w(P.$u?Date.UTC(P.$y,Ae,ve):new Date(P.$y,Ae,ve),P);return W?Ce:Ce.endOf(u)},X=function(ve,Ae){return D.w(P.toDate()[ve].apply(P.toDate("s"),(W?[0,0,0,0]:[23,59,59,999]).slice(Ae)),P)},Q=this.$W,se=this.$M,ae=this.$D,de="set"+(this.$u?"UTC":"");switch(F){case y:return W?q(1,0):q(31,11);case h:return W?q(1,se):q(0,se+1);case f:var ce=this.$locale().weekStart||0,fe=(Q<ce?Q+7:Q)-ce;return q(W?ae-fe:ae+(6-fe),se);case u:case v:return X(de+"Hours",0);case c:return X(de+"Minutes",1);case a:return X(de+"Seconds",2);case o:return X(de+"Milliseconds",3);default:return this.clone()}},V.endOf=function(T){return this.startOf(T,!1)},V.$set=function(T,I){var P,W=D.p(T),F="set"+(this.$u?"UTC":""),q=(P={},P[u]=F+"Date",P[v]=F+"Date",P[h]=F+"Month",P[y]=F+"FullYear",P[c]=F+"Hours",P[a]=F+"Minutes",P[o]=F+"Seconds",P[i]=F+"Milliseconds",P)[W],X=W===u?this.$D+(I-this.$W):I;if(W===h||W===y){var Q=this.clone().set(v,1);Q.$d[q](X),Q.init(),this.$d=Q.set(v,Math.min(this.$D,Q.daysInMonth())).$d}else q&&this.$d[q](X);return this.init(),this},V.set=function(T,I){return this.clone().$set(T,I)},V.get=function(T){return this[D.p(T)]()},V.add=function(T,I){var P,W=this;T=Number(T);var F=D.p(I),q=function(se){var ae=z(W);return D.w(ae.date(ae.date()+Math.round(se*T)),W)};if(F===h)return this.set(h,this.$M+T);if(F===y)return this.set(y,this.$y+T);if(F===u)return q(1);if(F===f)return q(7);var X=(P={},P[a]=r,P[c]=s,P[o]=n,P)[F]||1,Q=this.$d.getTime()+T*X;return D.w(Q,this)},V.subtract=function(T,I){return this.add(-1*T,I)},V.format=function(T){var I=this,P=this.$locale();if(!this.isValid())return P.invalidDate||x;var W=T||"YYYY-MM-DDTHH:mm:ssZ",F=D.z(this),q=this.$H,X=this.$m,Q=this.$M,se=P.weekdays,ae=P.months,de=P.meridiem,ce=function(Ae,Ce,Ee,Re){return Ae&&(Ae[Ce]||Ae(I,W))||Ee[Ce].slice(0,Re)},fe=function(Ae){return D.s(q%12||12,Ae,"0")},ve=de||function(Ae,Ce,Ee){var Re=Ae<12?"AM":"PM";return Ee?Re.toLowerCase():Re};return W.replace(N,function(Ae,Ce){return Ce||function(Ee){switch(Ee){case"YY":return String(I.$y).slice(-2);case"YYYY":return D.s(I.$y,4,"0");case"M":return Q+1;case"MM":return D.s(Q+1,2,"0");case"MMM":return ce(P.monthsShort,Q,ae,3);case"MMMM":return ce(ae,Q);case"D":return I.$D;case"DD":return D.s(I.$D,2,"0");case"d":return String(I.$W);case"dd":return ce(P.weekdaysMin,I.$W,se,2);case"ddd":return ce(P.weekdaysShort,I.$W,se,3);case"dddd":return se[I.$W];case"H":return String(q);case"HH":return D.s(q,2,"0");case"h":return fe(1);case"hh":return fe(2);case"a":return ve(q,X,!0);case"A":return ve(q,X,!1);case"m":return String(X);case"mm":return D.s(X,2,"0");case"s":return String(I.$s);case"ss":return D.s(I.$s,2,"0");case"SSS":return D.s(I.$ms,3,"0");case"Z":return F}return null}(Ae)||F.replace(":","")})},V.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},V.diff=function(T,I,P){var W,F=this,q=D.p(I),X=z(T),Q=(X.utcOffset()-this.utcOffset())*r,se=this-X,ae=function(){return D.m(F,X)};switch(q){case y:W=ae()/12;break;case h:W=ae();break;case p:W=ae()/3;break;case f:W=(se-Q)/6048e5;break;case u:W=(se-Q)/864e5;break;case c:W=se/s;break;case a:W=se/r;break;case o:W=se/n;break;default:W=se}return P?W:D.a(W)},V.daysInMonth=function(){return this.endOf(h).$D},V.$locale=function(){return $[this.$L]},V.locale=function(T,I){if(!T)return this.$L;var P=this.clone(),W=B(T,I,!0);return W&&(P.$L=W),P},V.clone=function(){return D.w(this.$d,this)},V.toDate=function(){return new Date(this.valueOf())},V.toJSON=function(){return this.isValid()?this.toISOString():null},V.toISOString=function(){return this.$d.toISOString()},V.toString=function(){return this.$d.toUTCString()},M}(),H=L.prototype;return z.prototype=H,[["$ms",i],["$s",o],["$m",a],["$H",c],["$W",u],["$M",h],["$y",y],["$D",v]].forEach(function(M){H[M[1]]=function(V){return this.$g(V,M[0],M[1])}}),z.extend=function(M,V){return M.$i||(M(V,L,z),M.$i=!0),z},z.locale=B,z.isDayjs=R,z.unix=function(M){return z(1e3*M)},z.en=$[A],z.Ls=$,z.p={},z})}($v)),$v.exports}var hoe=foe();const hx=eo(hoe);var Rv={exports:{}},moe=Rv.exports,qM;function poe(){return qM||(qM=1,function(e,t){(function(n,r){e.exports=r()})(moe,function(){var n="week",r="year";return function(s,i,o){var a=i.prototype;a.week=function(c){if(c===void 0&&(c=null),c!==null)return this.add(7*(c-this.week()),"day");var u=this.$locale().yearStart||1;if(this.month()===11&&this.date()>25){var f=o(this).startOf(r).add(1,r).date(u),h=o(this).endOf(n);if(f.isBefore(h))return 1}var p=o(this).startOf(r).date(u).startOf(n).subtract(1,"millisecond"),y=this.diff(p,n,!0);return y<0?o(this).startOf("week").week():Math.ceil(y)},a.weeks=function(c){return c===void 0&&(c=null),this.week(c)}}})}(Rv)),Rv.exports}var goe=poe();const yoe=eo(goe);hx.extend(yoe);function lF(e){return hx(e).format("YYYY-MM-DD HH:mm:ss")}var Vb={exports:{}},HM;function boe(){if(HM)return Vb.exports;HM=1;var e=String,t=function(){return{isColorSupported:!1,reset:e,bold:e,dim:e,italic:e,underline:e,inverse:e,hidden:e,strikethrough:e,black:e,red:e,green:e,yellow:e,blue:e,magenta:e,cyan:e,white:e,gray:e,bgBlack:e,bgRed:e,bgGreen:e,bgYellow:e,bgBlue:e,bgMagenta:e,bgCyan:e,bgWhite:e,blackBright:e,redBright:e,greenBright:e,yellowBright:e,blueBright:e,magentaBright:e,cyanBright:e,whiteBright:e,bgBlackBright:e,bgRedBright:e,bgGreenBright:e,bgYellowBright:e,bgBlueBright:e,bgMagentaBright:e,bgCyanBright:e,bgWhiteBright:e}};return Vb.exports=t(),Vb.exports.createColors=t,Vb.exports}var voe=boe();const Xs=eo(voe);var xoe={};const jC=(e,t)=>typeof e=="string"?[1,"1","true"].includes(e):!!(e||t);function Hr(){try{return jC(0)}catch{return!1}}function woe(){try{return"0.18.0"}catch{return"0.0.0"}}const Soe={cli_log_level:{key:"BKND_CLI_LOG_LEVEL",validate:e=>{if(typeof e=="string"&&["log","info","warn","error","debug"].includes(e.toLowerCase()))return e.toLowerCase()}},cli_create_ref:{key:"BKND_CLI_CREATE_REF",validate:e=>typeof e=="string"?e:void 0},cli_telemetry:{key:"BKND_CLI_TELEMETRY",validate:e=>{if(!(typeof e>"u"))return jC(e,!0)}},modules_debug:{key:"BKND_MODULES_DEBUG",validate:jC}},cF=(e,t,n)=>{var r,s;try{const i=(n==null?void 0:n.source)??xoe,o=Soe[e],a=i[o.key],c=o.validate(a);if(typeof c<"u")return(r=n==null?void 0:n.onValid)==null||r.call(n,c),c;(s=n==null?void 0:n.onFallback)==null||s.call(n,a)}catch{}return t};function Eoe(){try{const e=process||{},t=e.argv||[],n=e.env||{};return!(n.NO_COLOR||t.includes("--no-color"))&&(!!n.FORCE_COLOR||t.includes("--color")||e.platform==="win32"||(e.stdout||{}).isTTY&&n.TERM!=="dumb"||!!n.CI)}catch{return!1}}const oT={critical:{prefix:"CRT",color:Xs.red,args_color:Xs.red,original:console.error},error:{prefix:"ERR",color:Xs.red,args_color:Xs.red,original:console.error},warn:{prefix:"WRN",color:Xs.yellow,args_color:Xs.yellow,original:console.warn},info:{prefix:"INF",color:Xs.cyan,original:console.info},log:{prefix:"LOG",color:Xs.dim,args_color:Xs.dim,original:console.log},debug:{prefix:"DBG",color:Xs.yellow,args_color:Xs.dim,original:console.debug}};function Noe(e,t){const n=Eoe(),r=oT[e],s=r.color(`[${r.prefix}]`),i=t.map(o=>"args_color"in r&&n&&typeof o=="string"?r.args_color(o):o);return r.original(s,Xs.gray(lF()),...i)}const uF=cF("cli_log_level","log"),du=globalThis.__consoleConfig??(globalThis.__consoleConfig={level:uF,enabled:!0}),WM=Object.keys(oT),pt=new Proxy(du,{get:(e,t)=>{switch(t){case"original":return console;case"disable":return()=>{du.enabled=!1};case"enable":return()=>{du.enabled=!0};case"setLevel":return s=>{du.level=s};case"resetLevel":return()=>{du.level=uF}}if(!du.enabled)return()=>null;const n=WM.indexOf(du.level),r=WM.indexOf(t);return t in oT&&r<=n?(...s)=>Noe(t,s):()=>null}});function _oe(){return(navigator.userAgent.indexOf("Opera")||navigator.userAgent.indexOf("OPR"))!==-1?"Opera":navigator.userAgent.indexOf("Edg")!==-1?"Edge":navigator.userAgent.indexOf("Chrome")!==-1?"Chrome":navigator.userAgent.indexOf("Safari")!==-1?"Safari":navigator.userAgent.indexOf("Firefox")!==-1?"Firefox":navigator.userAgent.indexOf("MSIE")!==-1||document.documentMode?"IE":"unknown"}function ci(e){return!e||e.length===0?e:e.charAt(0).toUpperCase()+e.slice(1)}function Coe(e,t=" "){return!e||e.length===0?e:e.split(t).map(n=>n.charAt(0).toUpperCase()+n.slice(1)).join(t)}function dF(e,t=!1){const s="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"+(t?"!@#$%^&*()_+{}:\"<>?|[];',./`~":"");let i="";for(let o=0;o<e;o++)i+=s[Math.floor(Math.random()*s.length)];return i}function Ch(e){return!e||e.length===0?e:e.split("_").map(t=>t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()).join(" ")}function AC(e){return e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}function Ooe(e){return/^[a-z]+(_[a-z]+)*$/.test(e)?"snake_case":/^[A-Z][a-zA-Z]*$/.test(e)?"PascalCase":/^[a-z][a-zA-Z]*$/.test(e)?"camelCase":/^[a-z]+(-[a-z]+)*$/.test(e)?"kebab-case":/^[A-Z]+(_[A-Z]+)*$/.test(e)?"SCREAMING_SNAKE_CASE":"unknown"}function joe(e){switch(Ooe(e)){case"snake_case":return Ch(e);case"PascalCase":return CN(AC(e));case"camelCase":return ci(CN(AC(e)));case"kebab-case":return CN(e);case"SCREAMING_SNAKE_CASE":return Ch(e.toLowerCase());case"unknown":return ci(e)}}function Ku(e){return joe(e)}function CN(e){return e.split("-").map(ci).join(" ")}function Dy(e,t=" "){return Coe(Ch(e),t)}function Aoe(e,t){return t instanceof RegExp?t.test(e):typeof t=="string"&&t.startsWith("/")?new RegExp(t).test(e):typeof t=="string"?e.startsWith(t):!1}function Toe(e,t=50,n="..."){return e.length<=t?e:e.substring(0,t)+n}function Qu(e){return Object.prototype.toString.call(e)==="[object Object]"}function Oh(e){return e!==null&&typeof e=="object"}function Ms(e,t){const n=new Set(t),r={};for(const[s,i]of Object.entries(e))n.has(s)||(r[s]=i);return r}function $oe(e,t){const n=new Set(t),r={};for(const[s,i]of Object.entries(e))n.has(s)&&(r[s]=i);return r}function TC(e,t=[]){return e===null||typeof e!="object"?e:Array.isArray(e)?e.map(n=>TC(n,t)):Object.keys(e).reduce((n,r)=>{const s=t.includes(r)?r:AC(r);return n[s]=TC(e[r],t),n},{})}function fF(e,t){const n={};for(const r in e)t.some(i=>r.includes(i))||(typeof e[r]=="object"&&e[r]!==null&&!Array.isArray(e[r])?n[r]=fF(e[r],t):n[r]=e[r]);return n}function tn(e,t){const n={};for(const[r,s]of Object.entries(e)){const i=t(s,r);typeof i<"u"&&(n[r]=i)}return n}const p1=tn;function hF(e,t=""){let n=[];for(const r in e){const s=t?`${t}.${r}`:r;n.push(s),typeof e[r]=="object"&&e[r]!==null&&(n=n.concat(hF(e[r],s)))}return n}function mF(e){let t=1;for(const n in e)if(typeof e[n]=="object"){const r=mF(e[n])+1;t=Math.max(r,t)}return t}function Roe(e,t){function n(r,s){if(Qu(r)){if(s>t)return;const i={};for(const o in r)Object.prototype.hasOwnProperty.call(r,o)&&(i[o]=n(r[o],s+1));return i}return Array.isArray(r)?r.map(i=>n(i,s)):r}return n(e,1)}function $g(e){return e&&Object.entries(e).reduce((t,[n,r])=>{if(r&&Array.isArray(r)&&r.some(s=>typeof s=="object")){const s=r.map($g);s.length>0&&(t[n]=s)}else if(r&&typeof r=="object"&&!Array.isArray(r)){const s=$g(r);Object.keys(s).length>0&&(t[n]=s)}else r!==""&&r!==null&&r!==void 0&&(t[n]=r);return t},{})}function pF(e,...t){for(const n of t)for(const[r,s]of Object.entries(n))s!==void 0&&(!Qu(s)&&!Array.isArray(s)||Array.isArray(s)&&!Array.isArray(e[r])?e[r]=s:Oh(e[r])?pF(e[r],s):e[r]=s);return e}function gF(e,t,n){for(const[r,s]of Object.entries(t)){const i=n(e[r],s,r,e,t);if(i!==void 0){e[r]=i;continue}s!==void 0&&(!Qu(s)&&!Array.isArray(s)||Array.isArray(s)&&!Array.isArray(e[r])?e[r]=s:Oh(e[r])?gF(e[r],s,n):e[r]=s)}return e}function Ta(e,t){const n=s=>{var i;if(s!==Object(s))return"primitive";if(Array.isArray(s))return"array";if(s instanceof Map)return"map";if(s!=null&&[null,Object.prototype].includes(Object.getPrototypeOf(s)))return"plainObject";if(s instanceof Function)return"function";throw new Error(`deeply comparing an instance of type ${(i=e.constructor)==null?void 0:i.name} is not supported.`)},r=n(e);if(r!==n(t))return!1;if(r==="primitive")return e===t||Number.isNaN(e)&&Number.isNaN(t);if(r==="array")return e.length===t.length&&e.every((s,i)=>Ta(s,t[i]));if(r==="map")return e.size===t.size&&[...e].every(([s,i])=>t.has(s)&&Ta(i,t.get(s)));if(r==="plainObject"){const s=new Map(Object.entries(e)),i=new Map(Object.entries(t));return s.size===i.size&&[...s].every(([o,a])=>i.has(o)&&Ta(a,i.get(o)))}else{if(r==="function")return e.toString()===t.toString();throw new Error("Unreachable")}}function Er(e,t,n=void 0){const r=typeof t=="string"?t.split(/[.\[\]\"]+/).filter(s=>s):t;if(r.length===0)return e;try{const[s,...i]=r;return!s||!(s in e)?n:Er(e[s],i,n)}catch{if(typeof n<"u")return n;throw new Error(`Invalid path: ${r.join(".")}`)}}function $C(e,t=0,n=0){const r=t?`
`:"",s=c=>t?" ".repeat(t*c):"",i=s(n+1),o=s(n);if(e===null)return"null";if(e===void 0)return"undefined";const a=typeof e;if(a==="string")return JSON.stringify(e);if(a==="number"||a==="boolean")return String(e);if(Array.isArray(e)){const c=e.map(u=>$C(u,t,n+1)).join(", "+(t?r+i:""));return"["+(t&&e.length?r+i:"")+c+(t&&e.length?r+o:"")+"]"}if(a==="object"){const c=Object.entries(e).map(([f,h])=>(/^[A-Za-z_$][\w$]*$/.test(f)?f:JSON.stringify(f))+": "+$C(h,t,n+1)),u=c.join(", "+(t?r+i:""));return"{"+(t&&c.length?r+i:"")+u+(t&&c.length?r+o:"")+"}"}throw new TypeError(`Unsupported data type: ${a}`)}function yF(e,t){return t.reduce((n,r)=>(r in e&&(n[r]=e[r]),n),{})}function $f(e){if(Object.isFrozen(e))return e;const t=Reflect.ownKeys(e);for(const n of t){const r=e[n];(r&&typeof r=="object"||typeof r=="function")&&$f(r)}return Object.freeze(e)}function koe(e){return Object.keys(e).every(t=>Number.isInteger(Number(t)))?Object.values(e):e}const aT={video:["mp4","webm"],audio:["ogg"],image:["jpeg","png","gif","webp","bmp","tiff","avif","heic","heif"],text:["html","css","mdx","yaml","vcard","csv","vtt"],application:["zip","toml","json","json5","pdf","xml"],font:["woff","woff2","ttf","otf"]},bt={vnd:"vnd.openxmlformats-officedocument",z:"application/x-7z-compressed",t:(e="plain")=>`text/${e}`,a:(e="octet-stream")=>`application/${e}`,i:e=>`image/${e}`,v:e=>`video/${e}`,au:e=>`audio/${e}`},lT=new Map([["7z",bt.z],["7zip",bt.z],["txt",bt.t()],["ai",bt.a("postscript")],["apk",bt.a("vnd.android.package-archive")],["doc",bt.a("msword")],["docx",`${bt.vnd}.wordprocessingml.document`],["eps",bt.a("postscript")],["epub",bt.a("epub+zip")],["ini",bt.t()],["ico",bt.i("vnd.microsoft.icon")],["jar",bt.a("java-archive")],["jsonld",bt.a("ld+json")],["jpg",bt.i("jpeg")],["js",bt.t("javascript")],["log",bt.t()],["m3u",bt.au("x-mpegurl")],["m3u8",bt.a("vnd.apple.mpegurl")],["manifest",bt.t("cache-manifest")],["md",bt.t("markdown")],["mkv",bt.v("x-matroska")],["mp3",bt.au("mpeg")],["mobi",bt.a("x-mobipocket-ebook")],["ppt",bt.a("powerpoint")],["pptx",`${bt.vnd}.presentationml.presentation`],["qt",bt.v("quicktime")],["svg",bt.i("svg+xml")],["tif",bt.i("tiff")],["tsv",bt.t("tab-separated-values")],["tgz",bt.a("x-tar")],["text",bt.t()],["vcd",bt.a("x-cdlink")],["vcs",bt.t("x-vcalendar")],["wav",bt.au("vnd.wav")],["webmanifest",bt.a("manifest+json")],["xls",bt.a("vnd.ms-excel")],["xlsx",`${bt.vnd}.spreadsheetml.sheet`],["yml",bt.t("yaml")]]);function bF(e){try{const t=e.split(".").pop();if(!t)return bt.a();for(const[n,r]of Object.entries(aT))if(r.includes(t))return`${n}/${t}`;return lT.get(t)}catch{return bt.a()}}function Moe(e,t=[]){const n=e.toLowerCase();if(t.includes(n))return!1;if(Object.entries(aT).flatMap(([r,s])=>s.map(i=>`${r}/${i}`)).includes(n))return!0;for(const[r,s]of lT.entries())if(s===n&&!t.includes(r))return!0;return!1}function vF(e){const t=e.toLowerCase();for(const[n,r]of Object.entries(aT))for(const s of r)if(t===`${n}/${s}`)return s;for(const[n,r]of lT.entries())if(r===t)return n;return""}var Ioe={deno:"Deno",bun:"Bun",workerd:"Cloudflare-Workers",node:"Node.js"},xF=()=>{var n,r;const e=globalThis;if(typeof navigator<"u"&&typeof navigator.userAgent=="string"){for(const[s,i]of Object.entries(Ioe))if(Poe(i))return s}return typeof(e==null?void 0:e.EdgeRuntime)=="string"?"edge-light":(e==null?void 0:e.fastly)!==void 0?"fastly":((r=(n=e==null?void 0:e.process)==null?void 0:n.release)==null?void 0:r.name)==="node"?"node":"other"},Poe=e=>navigator.userAgent.startsWith(e);function Doe(){var t,n,r,s;const e=globalThis;return((n=(t=e==null?void 0:e.process)==null?void 0:t.env)==null?void 0:n.NEXT_RUNTIME)==="nodejs"?"nextjs":((s=(r=e==null?void 0:e.process)==null?void 0:r.env)==null?void 0:s.NEXT_RUNTIME)==="edge"?"nextjs-edge":typeof window<"u"&&window.__NEXT_DATA__?"nextjs-client":xF()}const GM={redirects_non_fq:!0};function Loe(e){return Doe().startsWith("nextjs")&&(GM.redirects_non_fq=!1),GM[e]}function YM(e,t){if(!e)throw new Error(t)}function Foe(e){let t="";typeof e=="string"?t=e:e instanceof Headers?t=e.get("Content-Disposition")||"":e instanceof Request&&(t=e.headers.get("Content-Disposition")||"");const n=t.match(/filename\*?=(?:UTF-8'')?("?)([^";]+)\1/);return n?n[2]:void 0}function Boe(e){return typeof e=="object"&&e!==null&&typeof e.getReader=="function"}function g1(e){return typeof e=="object"&&e!==null&&typeof e.arrayBuffer=="function"&&typeof e.type=="string"}function gd(e){return g1(e)&&typeof e.name=="string"&&typeof e.lastModified=="number"}function zoe(e){return typeof e=="object"&&e!==null&&Object.prototype.toString.call(e)==="[object ArrayBuffer]"}function Voe(e){return typeof e=="object"&&e!==null&&ArrayBuffer.isView(e)}const Uoe={"89504E47":"image/png",FFD8FF:"image/jpeg",47494638:"image/gif","49492A00":"image/tiff","4D4D002A":"image/tiff","52494646????57454250":"image/webp","504B0304":"application/zip",25504446:"application/pdf","00000020667479706D70":"video/mp4","000001BA":"video/mpeg","000001B3":"video/mpeg","1A45DFA3":"video/webm","4F676753":"audio/ogg",494433:"audio/mpeg",FFF1:"audio/aac",FFF9:"audio/aac","52494646????41564920":"audio/wav","52494646????57415645":"audio/wave","52494646????415550":"audio/aiff"};async function qoe(e){if(!e)return;let t;if(Boe(e)){const r=e.getReader(),{value:s}=await r.read();if(!s)return;t=new Uint8Array(s)}else if(g1(e)||gd(e))t=new Uint8Array(await e.slice(0,12).arrayBuffer());else if(zoe(e))t=new Uint8Array(e);else if(Voe(e))t=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);else if(typeof e=="string")t=new TextEncoder().encode(e);else return;const n=Array.from(t.slice(0,12)).map(r=>r.toString(16).padStart(2,"0").toUpperCase()).join("");for(const[r,s]of Object.entries(Uoe))if(new RegExp("^"+r.replace(/\?\?/g,"..")).test(n))return s}async function ON(e){const t=e.req.header("Content-Type")??"application/octet-stream";if(t!=null&&t.startsWith("multipart/form-data")||t!=null&&t.startsWith("application/x-www-form-urlencoded"))try{const n=await e.req.formData();if([...n.values()].length>0){const r=[...n.values()][0];return await JM(r)}}catch(n){pt.warn("Error parsing form data",n)}else try{const n=await e.req.blob();if(gd(n))return n;if(g1(n))return await JM(n,{name:Foe(e.req.raw),type:t})}catch(n){pt.warn("Error parsing blob",n)}throw new Error("No file found in request")}async function Hoe(e,t){const n=gd(e),r=n?e.type:t;YM(r&&typeof r=="string"&&r.startsWith("image/"),"type must be image/*");const s=n?await e.arrayBuffer():e;YM(s.byteLength>=128,"Buffer must be at least 128 bytes");const i=new DataView(s);if(r==="image/jpeg"){let o=2;for(;o<i.byteLength;){const a=i.getUint16(o);if(o+=2,a===65472||a===65474)return{width:i.getUint16(o+5),height:i.getUint16(o+3)};o+=i.getUint16(o)}}else{if(r==="image/png")return{width:i.getUint32(16),height:i.getUint32(20)};if(r==="image/gif")return{width:i.getUint16(6),height:i.getUint16(8)};if(r==="image/tiff"){const o=i.getUint16(0)===18761,a=i.getUint32(4,o),c=i.getUint32(a+18,o),u=i.getUint32(a+10,o);return{width:c,height:u}}}throw new Error("Unsupported image format")}async function JM(e,t={}){if(gd(e))return e;if(!g1(e))throw new Error("Not a Blob");const n=Moe(t.type,["application/octet-stream"])?t.type:await qoe(e),r=n?vF(n):"",s=t.name||[dF(16),r].filter(Boolean).join(".");return new File([e],s,{type:n||bF(s),lastModified:Date.now()})}function Woe(e){return e?{...Object.fromEntries(e.entries())}:{}}function Goe(e,t){const n=Woe(e),r={};for(const s of t)n[s]&&(r[s]=n[s]);return r}function Yoe(e,t){const n=new Headers;for(const r of t)e.has(r)&&n.set(r,e.get(r));return n}function y1(e,t){let n="";function r(s){return t!=null&&t.encode?encodeURIComponent(s):s}for(const s in e){let i=e[s];if(i!==void 0)if(Array.isArray(i))for(let o=0;o<i.length;o++)n.length>0&&(n+="&"),n+=`${r(s)}=${r(i[o])}`;else typeof i=="object"&&(i=JSON.stringify(i)),n.length>0&&(n+="&"),n+=`${r(s)}=${r(i)}`}return((t==null?void 0:t.prefix)||"")+n}function Joe(e){function t(o){if(!o)return"";const a=decodeURIComponent(o);if(a==="false")return!1;if(a==="true")return!0;try{return JSON.parse(a)}catch{return+a*0===0?+a:a}}let n,r;const s={},i=e.split("&");for(;n=i.shift();)n=n.split("="),r=n.shift(),s[r]!==void 0?s[r]=[].concat(s[r],t(n.shift())):s[r]=t(n.shift());return s}var gn=(e=>(e[e.CONTINUE=100]="CONTINUE",e[e.PROCESSING=102]="PROCESSING",e[e.EARLY_HINTS=103]="EARLY_HINTS",e[e.OK=200]="OK",e[e.CREATED=201]="CREATED",e[e.ACCEPTED=202]="ACCEPTED",e[e.NON_AUTHORITATIVE_INFORMATION=203]="NON_AUTHORITATIVE_INFORMATION",e[e.PARTIAL_CONTENT=206]="PARTIAL_CONTENT",e[e.MULTI_STATUS=207]="MULTI_STATUS",e[e.ALREADY_REPORTED=208]="ALREADY_REPORTED",e[e.IM_USED=226]="IM_USED",e[e.MULTIPLE_CHOICES=300]="MULTIPLE_CHOICES",e[e.MOVED_PERMANENTLY=301]="MOVED_PERMANENTLY",e[e.FOUND=302]="FOUND",e[e.SEE_OTHER=303]="SEE_OTHER",e[e.USE_PROXY=305]="USE_PROXY",e[e.TEMPORARY_REDIRECT=307]="TEMPORARY_REDIRECT",e[e.PERMANENT_REDIRECT=308]="PERMANENT_REDIRECT",e[e.BAD_REQUEST=400]="BAD_REQUEST",e[e.UNAUTHORIZED=401]="UNAUTHORIZED",e[e.PAYMENT_REQUIRED=402]="PAYMENT_REQUIRED",e[e.FORBIDDEN=403]="FORBIDDEN",e[e.NOT_FOUND=404]="NOT_FOUND",e[e.METHOD_NOT_ALLOWED=405]="METHOD_NOT_ALLOWED",e[e.NOT_ACCEPTABLE=406]="NOT_ACCEPTABLE",e[e.PROXY_AUTHENTICATION_REQUIRED=407]="PROXY_AUTHENTICATION_REQUIRED",e[e.REQUEST_TIMEOUT=408]="REQUEST_TIMEOUT",e[e.CONFLICT=409]="CONFLICT",e[e.GONE=410]="GONE",e[e.LENGTH_REQUIRED=411]="LENGTH_REQUIRED",e[e.PRECONDITION_FAILED=412]="PRECONDITION_FAILED",e[e.PAYLOAD_TOO_LARGE=413]="PAYLOAD_TOO_LARGE",e[e.URI_TOO_LONG=414]="URI_TOO_LONG",e[e.UNSUPPORTED_MEDIA_TYPE=415]="UNSUPPORTED_MEDIA_TYPE",e[e.RANGE_NOT_SATISFIABLE=416]="RANGE_NOT_SATISFIABLE",e[e.EXPECTATION_FAILED=417]="EXPECTATION_FAILED",e[e.IM_A_TEAPOT=418]="IM_A_TEAPOT",e[e.MISDIRECTED_REQUEST=421]="MISDIRECTED_REQUEST",e[e.UNPROCESSABLE_ENTITY=422]="UNPROCESSABLE_ENTITY",e[e.LOCKED=423]="LOCKED",e[e.FAILED_DEPENDENCY=424]="FAILED_DEPENDENCY",e[e.TOO_EARLY=425]="TOO_EARLY",e[e.UPGRADE_REQUIRED=426]="UPGRADE_REQUIRED",e[e.PRECONDITION_REQUIRED=428]="PRECONDITION_REQUIRED",e[e.TOO_MANY_REQUESTS=429]="TOO_MANY_REQUESTS",e[e.REQUEST_HEADER_FIELDS_TOO_LARGE=431]="REQUEST_HEADER_FIELDS_TOO_LARGE",e[e.UNAVAILABLE_FOR_LEGAL_REASONS=451]="UNAVAILABLE_FOR_LEGAL_REASONS",e[e.INTERNAL_SERVER_ERROR=500]="INTERNAL_SERVER_ERROR",e[e.NOT_IMPLEMENTED=501]="NOT_IMPLEMENTED",e[e.BAD_GATEWAY=502]="BAD_GATEWAY",e[e.SERVICE_UNAVAILABLE=503]="SERVICE_UNAVAILABLE",e[e.GATEWAY_TIMEOUT=504]="GATEWAY_TIMEOUT",e[e.HTTP_VERSION_NOT_SUPPORTED=505]="HTTP_VERSION_NOT_SUPPORTED",e[e.VARIANT_ALSO_NEGOTIATES=506]="VARIANT_ALSO_NEGOTIATES",e[e.INSUFFICIENT_STORAGE=507]="INSUFFICIENT_STORAGE",e[e.LOOP_DETECTED=508]="LOOP_DETECTED",e[e.NOT_EXTENDED=510]="NOT_EXTENDED",e[e.NETWORK_AUTHENTICATION_REQUIRED=511]="NETWORK_AUTHENTICATION_REQUIRED",e))(gn||{});const wF=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",Xoe=wF+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",Koe="["+wF+"]["+Xoe+"]*",Qoe=new RegExp("^"+Koe+"$");function SF(e,t){const n=[];let r=t.exec(e);for(;r;){const s=[];s.startIndex=t.lastIndex-r[0].length;const i=r.length;for(let o=0;o<i;o++)s.push(r[o]);n.push(s),r=t.exec(e)}return n}const cT=function(e){const t=Qoe.exec(e);return!(t===null||typeof t>"u")};function Zoe(e){return typeof e<"u"}const eae={allowBooleanAttributes:!1,unpairedTags:[]};function tae(e,t){t=Object.assign({},eae,t);const n=[];let r=!1,s=!1;e[0]==="\uFEFF"&&(e=e.substr(1));for(let i=0;i<e.length;i++)if(e[i]==="<"&&e[i+1]==="?"){if(i+=2,i=KM(e,i),i.err)return i}else if(e[i]==="<"){let o=i;if(i++,e[i]==="!"){i=QM(e,i);continue}else{let a=!1;e[i]==="/"&&(a=!0,i++);let c="";for(;i<e.length&&e[i]!==">"&&e[i]!==" "&&e[i]!=="	"&&e[i]!==`
`&&e[i]!=="\r";i++)c+=e[i];if(c=c.trim(),c[c.length-1]==="/"&&(c=c.substring(0,c.length-1),i--),!cae(c)){let h;return c.trim().length===0?h="Invalid space after '<'.":h="Tag '"+c+"' is an invalid name.",Mn("InvalidTag",h,Mr(e,i))}const u=sae(e,i);if(u===!1)return Mn("InvalidAttr","Attributes for '"+c+"' have open quote.",Mr(e,i));let f=u.value;if(i=u.index,f[f.length-1]==="/"){const h=i-f.length;f=f.substring(0,f.length-1);const p=ZM(f,t);if(p===!0)r=!0;else return Mn(p.err.code,p.err.msg,Mr(e,h+p.err.line))}else if(a)if(u.tagClosed){if(f.trim().length>0)return Mn("InvalidTag","Closing tag '"+c+"' can't have attributes or invalid starting.",Mr(e,o));if(n.length===0)return Mn("InvalidTag","Closing tag '"+c+"' has not been opened.",Mr(e,o));{const h=n.pop();if(c!==h.tagName){let p=Mr(e,h.tagStartPos);return Mn("InvalidTag","Expected closing tag '"+h.tagName+"' (opened in line "+p.line+", col "+p.col+") instead of closing tag '"+c+"'.",Mr(e,o))}n.length==0&&(s=!0)}}else return Mn("InvalidTag","Closing tag '"+c+"' doesn't have proper closing.",Mr(e,i));else{const h=ZM(f,t);if(h!==!0)return Mn(h.err.code,h.err.msg,Mr(e,i-f.length+h.err.line));if(s===!0)return Mn("InvalidXml","Multiple possible root nodes found.",Mr(e,i));t.unpairedTags.indexOf(c)!==-1||n.push({tagName:c,tagStartPos:o}),r=!0}for(i++;i<e.length;i++)if(e[i]==="<")if(e[i+1]==="!"){i++,i=QM(e,i);continue}else if(e[i+1]==="?"){if(i=KM(e,++i),i.err)return i}else break;else if(e[i]==="&"){const h=aae(e,i);if(h==-1)return Mn("InvalidChar","char '&' is not expected.",Mr(e,i));i=h}else if(s===!0&&!XM(e[i]))return Mn("InvalidXml","Extra text at the end",Mr(e,i));e[i]==="<"&&i--}}else{if(XM(e[i]))continue;return Mn("InvalidChar","char '"+e[i]+"' is not expected.",Mr(e,i))}if(r){if(n.length==1)return Mn("InvalidTag","Unclosed tag '"+n[0].tagName+"'.",Mr(e,n[0].tagStartPos));if(n.length>0)return Mn("InvalidXml","Invalid '"+JSON.stringify(n.map(i=>i.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return Mn("InvalidXml","Start tag expected.",1);return!0}function XM(e){return e===" "||e==="	"||e===`
`||e==="\r"}function KM(e,t){const n=t;for(;t<e.length;t++)if(e[t]=="?"||e[t]==" "){const r=e.substr(n,t-n);if(t>5&&r==="xml")return Mn("InvalidXml","XML declaration allowed only at the start of the document.",Mr(e,t));if(e[t]=="?"&&e[t+1]==">"){t++;break}else continue}return t}function QM(e,t){if(e.length>t+5&&e[t+1]==="-"&&e[t+2]==="-"){for(t+=3;t<e.length;t++)if(e[t]==="-"&&e[t+1]==="-"&&e[t+2]===">"){t+=2;break}}else if(e.length>t+8&&e[t+1]==="D"&&e[t+2]==="O"&&e[t+3]==="C"&&e[t+4]==="T"&&e[t+5]==="Y"&&e[t+6]==="P"&&e[t+7]==="E"){let n=1;for(t+=8;t<e.length;t++)if(e[t]==="<")n++;else if(e[t]===">"&&(n--,n===0))break}else if(e.length>t+9&&e[t+1]==="["&&e[t+2]==="C"&&e[t+3]==="D"&&e[t+4]==="A"&&e[t+5]==="T"&&e[t+6]==="A"&&e[t+7]==="["){for(t+=8;t<e.length;t++)if(e[t]==="]"&&e[t+1]==="]"&&e[t+2]===">"){t+=2;break}}return t}const nae='"',rae="'";function sae(e,t){let n="",r="",s=!1;for(;t<e.length;t++){if(e[t]===nae||e[t]===rae)r===""?r=e[t]:r!==e[t]||(r="");else if(e[t]===">"&&r===""){s=!0;break}n+=e[t]}return r!==""?!1:{value:n,index:t,tagClosed:s}}const iae=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function ZM(e,t){const n=SF(e,iae),r={};for(let s=0;s<n.length;s++){if(n[s][1].length===0)return Mn("InvalidAttr","Attribute '"+n[s][2]+"' has no space in starting.",Ap(n[s]));if(n[s][3]!==void 0&&n[s][4]===void 0)return Mn("InvalidAttr","Attribute '"+n[s][2]+"' is without value.",Ap(n[s]));if(n[s][3]===void 0&&!t.allowBooleanAttributes)return Mn("InvalidAttr","boolean attribute '"+n[s][2]+"' is not allowed.",Ap(n[s]));const i=n[s][2];if(!lae(i))return Mn("InvalidAttr","Attribute '"+i+"' is an invalid name.",Ap(n[s]));if(!r.hasOwnProperty(i))r[i]=1;else return Mn("InvalidAttr","Attribute '"+i+"' is repeated.",Ap(n[s]))}return!0}function oae(e,t){let n=/\d/;for(e[t]==="x"&&(t++,n=/[\da-fA-F]/);t<e.length;t++){if(e[t]===";")return t;if(!e[t].match(n))break}return-1}function aae(e,t){if(t++,e[t]===";")return-1;if(e[t]==="#")return t++,oae(e,t);let n=0;for(;t<e.length;t++,n++)if(!(e[t].match(/\w/)&&n<20)){if(e[t]===";")break;return-1}return t}function Mn(e,t,n){return{err:{code:e,msg:t,line:n.line||n,col:n.col}}}function lae(e){return cT(e)}function cae(e){return cT(e)}function Mr(e,t){const n=e.substring(0,t).split(/\r?\n/);return{line:n.length,col:n[n.length-1].length+1}}function Ap(e){return e.startIndex+e[1].length}const uae={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(e,t,n){return e}},dae=function(e){return Object.assign({},uae,e)};class Tp{constructor(t){this.tagname=t,this.child=[],this[":@"]={}}add(t,n){t==="__proto__"&&(t="#__proto__"),this.child.push({[t]:n})}addChild(t){t.tagname==="__proto__"&&(t.tagname="#__proto__"),t[":@"]&&Object.keys(t[":@"]).length>0?this.child.push({[t.tagname]:t.child,":@":t[":@"]}):this.child.push({[t.tagname]:t.child})}}function fae(e,t){const n={};if(e[t+3]==="O"&&e[t+4]==="C"&&e[t+5]==="T"&&e[t+6]==="Y"&&e[t+7]==="P"&&e[t+8]==="E"){t=t+9;let r=1,s=!1,i=!1,o="";for(;t<e.length;t++)if(e[t]==="<"&&!i){if(s&&pae(e,t)){t+=7;let a,c;[a,c,t]=hae(e,t+1),c.indexOf("&")===-1&&(n[vae(a)]={regx:RegExp(`&${a};`,"g"),val:c})}else if(s&&gae(e,t))t+=8;else if(s&&yae(e,t))t+=8;else if(s&&bae(e,t))t+=9;else if(mae)i=!0;else throw new Error("Invalid DOCTYPE");r++,o=""}else if(e[t]===">"){if(i?e[t-1]==="-"&&e[t-2]==="-"&&(i=!1,r--):r--,r===0)break}else e[t]==="["?s=!0:o+=e[t];if(r!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:n,i:t}}function hae(e,t){let n="";for(;t<e.length&&e[t]!=="'"&&e[t]!=='"';t++)n+=e[t];if(n=n.trim(),n.indexOf(" ")!==-1)throw new Error("External entites are not supported");const r=e[t++];let s="";for(;t<e.length&&e[t]!==r;t++)s+=e[t];return[n,s,t]}function mae(e,t){return e[t+1]==="!"&&e[t+2]==="-"&&e[t+3]==="-"}function pae(e,t){return e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="N"&&e[t+4]==="T"&&e[t+5]==="I"&&e[t+6]==="T"&&e[t+7]==="Y"}function gae(e,t){return e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="L"&&e[t+4]==="E"&&e[t+5]==="M"&&e[t+6]==="E"&&e[t+7]==="N"&&e[t+8]==="T"}function yae(e,t){return e[t+1]==="!"&&e[t+2]==="A"&&e[t+3]==="T"&&e[t+4]==="T"&&e[t+5]==="L"&&e[t+6]==="I"&&e[t+7]==="S"&&e[t+8]==="T"}function bae(e,t){return e[t+1]==="!"&&e[t+2]==="N"&&e[t+3]==="O"&&e[t+4]==="T"&&e[t+5]==="A"&&e[t+6]==="T"&&e[t+7]==="I"&&e[t+8]==="O"&&e[t+9]==="N"}function vae(e){if(cT(e))return e;throw new Error(`Invalid entity name ${e}`)}const xae=/^[-+]?0x[a-fA-F0-9]+$/,wae=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,Sae={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function Eae(e,t={}){if(t=Object.assign({},Sae,t),!e||typeof e!="string")return e;let n=e.trim();if(t.skipLike!==void 0&&t.skipLike.test(n))return e;if(e==="0")return 0;if(t.hex&&xae.test(n))return _ae(n,16);if(n.search(/[eE]/)!==-1){const r=n.match(/^([-\+])?(0*)([0-9]*(\.[0-9]*)?[eE][-\+]?[0-9]+)$/);if(r){if(t.leadingZeros)n=(r[1]||"")+r[3];else if(!(r[2]==="0"&&r[3][0]==="."))return e;return t.eNotation?Number(n):e}else return e}else{const r=wae.exec(n);if(r){const s=r[1],i=r[2];let o=Nae(r[3]);if(!t.leadingZeros&&i.length>0&&s&&n[2]!==".")return e;if(!t.leadingZeros&&i.length>0&&!s&&n[1]!==".")return e;if(t.leadingZeros&&i===e)return 0;{const a=Number(n),c=""+a;return c.search(/[eE]/)!==-1?t.eNotation?a:e:n.indexOf(".")!==-1?c==="0"&&o===""||c===o||s&&c==="-"+o?a:e:i?o===c||s+o===c?a:e:n===c||n===s+c?a:e}}else return e}}function Nae(e){return e&&e.indexOf(".")!==-1&&(e=e.replace(/0+$/,""),e==="."?e="0":e[0]==="."?e="0"+e:e[e.length-1]==="."&&(e=e.substr(0,e.length-1))),e}function _ae(e,t){if(parseInt)return parseInt(e,t);if(Number.parseInt)return Number.parseInt(e,t);if(window&&window.parseInt)return window.parseInt(e,t);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")}function Cae(e){return typeof e=="function"?e:Array.isArray(e)?t=>{for(const n of e)if(typeof n=="string"&&t===n||n instanceof RegExp&&n.test(t))return!0}:()=>!1}class Oae{constructor(t){this.options=t,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:""},pound:{regex:/&(pound|#163);/g,val:""},yen:{regex:/&(yen|#165);/g,val:""},euro:{regex:/&(euro|#8364);/g,val:""},copyright:{regex:/&(copy|#169);/g,val:""},reg:{regex:/&(reg|#174);/g,val:""},inr:{regex:/&(inr|#8377);/g,val:""},num_dec:{regex:/&#([0-9]{1,7});/g,val:(n,r)=>String.fromCharCode(Number.parseInt(r,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(n,r)=>String.fromCharCode(Number.parseInt(r,16))}},this.addExternalEntities=jae,this.parseXml=kae,this.parseTextData=Aae,this.resolveNameSpace=Tae,this.buildAttributesMap=Rae,this.isItStopNode=Dae,this.replaceEntitiesValue=Iae,this.readStopNodeData=Fae,this.saveTextToParentTag=Pae,this.addChild=Mae,this.ignoreAttributesFn=Cae(this.options.ignoreAttributes)}}function jae(e){const t=Object.keys(e);for(let n=0;n<t.length;n++){const r=t[n];this.lastEntities[r]={regex:new RegExp("&"+r+";","g"),val:e[r]}}}function Aae(e,t,n,r,s,i,o){if(e!==void 0&&(this.options.trimValues&&!r&&(e=e.trim()),e.length>0)){o||(e=this.replaceEntitiesValue(e));const a=this.options.tagValueProcessor(t,e,n,s,i);return a==null?e:typeof a!=typeof e||a!==e?a:this.options.trimValues?kC(e,this.options.parseTagValue,this.options.numberParseOptions):e.trim()===e?kC(e,this.options.parseTagValue,this.options.numberParseOptions):e}}function Tae(e){if(this.options.removeNSPrefix){const t=e.split(":"),n=e.charAt(0)==="/"?"/":"";if(t[0]==="xmlns")return"";t.length===2&&(e=n+t[1])}return e}const $ae=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function Rae(e,t,n){if(this.options.ignoreAttributes!==!0&&typeof e=="string"){const r=SF(e,$ae),s=r.length,i={};for(let o=0;o<s;o++){const a=this.resolveNameSpace(r[o][1]);if(this.ignoreAttributesFn(a,t))continue;let c=r[o][4],u=this.options.attributeNamePrefix+a;if(a.length)if(this.options.transformAttributeName&&(u=this.options.transformAttributeName(u)),u==="__proto__"&&(u="#__proto__"),c!==void 0){this.options.trimValues&&(c=c.trim()),c=this.replaceEntitiesValue(c);const f=this.options.attributeValueProcessor(a,c,t);f==null?i[u]=c:typeof f!=typeof c||f!==c?i[u]=f:i[u]=kC(c,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(i[u]=!0)}if(!Object.keys(i).length)return;if(this.options.attributesGroupName){const o={};return o[this.options.attributesGroupName]=i,o}return i}}const kae=function(e){e=e.replace(/\r\n?/g,`
`);const t=new Tp("!xml");let n=t,r="",s="";for(let i=0;i<e.length;i++)if(e[i]==="<")if(e[i+1]==="/"){const a=Ou(e,">",i,"Closing Tag is not closed.");let c=e.substring(i+2,a).trim();if(this.options.removeNSPrefix){const h=c.indexOf(":");h!==-1&&(c=c.substr(h+1))}this.options.transformTagName&&(c=this.options.transformTagName(c)),n&&(r=this.saveTextToParentTag(r,n,s));const u=s.substring(s.lastIndexOf(".")+1);if(c&&this.options.unpairedTags.indexOf(c)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${c}>`);let f=0;u&&this.options.unpairedTags.indexOf(u)!==-1?(f=s.lastIndexOf(".",s.lastIndexOf(".")-1),this.tagsNodeStack.pop()):f=s.lastIndexOf("."),s=s.substring(0,f),n=this.tagsNodeStack.pop(),r="",i=a}else if(e[i+1]==="?"){let a=RC(e,i,!1,"?>");if(!a)throw new Error("Pi Tag is not closed.");if(r=this.saveTextToParentTag(r,n,s),!(this.options.ignoreDeclaration&&a.tagName==="?xml"||this.options.ignorePiTags)){const c=new Tp(a.tagName);c.add(this.options.textNodeName,""),a.tagName!==a.tagExp&&a.attrExpPresent&&(c[":@"]=this.buildAttributesMap(a.tagExp,s,a.tagName)),this.addChild(n,c,s)}i=a.closeIndex+1}else if(e.substr(i+1,3)==="!--"){const a=Ou(e,"-->",i+4,"Comment is not closed.");if(this.options.commentPropName){const c=e.substring(i+4,a-2);r=this.saveTextToParentTag(r,n,s),n.add(this.options.commentPropName,[{[this.options.textNodeName]:c}])}i=a}else if(e.substr(i+1,2)==="!D"){const a=fae(e,i);this.docTypeEntities=a.entities,i=a.i}else if(e.substr(i+1,2)==="!["){const a=Ou(e,"]]>",i,"CDATA is not closed.")-2,c=e.substring(i+9,a);r=this.saveTextToParentTag(r,n,s);let u=this.parseTextData(c,n.tagname,s,!0,!1,!0,!0);u==null&&(u=""),this.options.cdataPropName?n.add(this.options.cdataPropName,[{[this.options.textNodeName]:c}]):n.add(this.options.textNodeName,u),i=a+2}else{let a=RC(e,i,this.options.removeNSPrefix),c=a.tagName;const u=a.rawTagName;let f=a.tagExp,h=a.attrExpPresent,p=a.closeIndex;this.options.transformTagName&&(c=this.options.transformTagName(c)),n&&r&&n.tagname!=="!xml"&&(r=this.saveTextToParentTag(r,n,s,!1));const y=n;if(y&&this.options.unpairedTags.indexOf(y.tagname)!==-1&&(n=this.tagsNodeStack.pop(),s=s.substring(0,s.lastIndexOf("."))),c!==t.tagname&&(s+=s?"."+c:c),this.isItStopNode(this.options.stopNodes,s,c)){let v="";if(f.length>0&&f.lastIndexOf("/")===f.length-1)c[c.length-1]==="/"?(c=c.substr(0,c.length-1),s=s.substr(0,s.length-1),f=c):f=f.substr(0,f.length-1),i=a.closeIndex;else if(this.options.unpairedTags.indexOf(c)!==-1)i=a.closeIndex;else{const E=this.readStopNodeData(e,u,p+1);if(!E)throw new Error(`Unexpected end of ${u}`);i=E.i,v=E.tagContent}const x=new Tp(c);c!==f&&h&&(x[":@"]=this.buildAttributesMap(f,s,c)),v&&(v=this.parseTextData(v,c,s,!0,h,!0,!0)),s=s.substr(0,s.lastIndexOf(".")),x.add(this.options.textNodeName,v),this.addChild(n,x,s)}else{if(f.length>0&&f.lastIndexOf("/")===f.length-1){c[c.length-1]==="/"?(c=c.substr(0,c.length-1),s=s.substr(0,s.length-1),f=c):f=f.substr(0,f.length-1),this.options.transformTagName&&(c=this.options.transformTagName(c));const v=new Tp(c);c!==f&&h&&(v[":@"]=this.buildAttributesMap(f,s,c)),this.addChild(n,v,s),s=s.substr(0,s.lastIndexOf("."))}else{const v=new Tp(c);this.tagsNodeStack.push(n),c!==f&&h&&(v[":@"]=this.buildAttributesMap(f,s,c)),this.addChild(n,v,s),n=v}r="",i=p}}else r+=e[i];return t.child};function Mae(e,t,n){const r=this.options.updateTag(t.tagname,n,t[":@"]);r===!1||(typeof r=="string"&&(t.tagname=r),e.addChild(t))}const Iae=function(e){if(this.options.processEntities){for(let t in this.docTypeEntities){const n=this.docTypeEntities[t];e=e.replace(n.regx,n.val)}for(let t in this.lastEntities){const n=this.lastEntities[t];e=e.replace(n.regex,n.val)}if(this.options.htmlEntities)for(let t in this.htmlEntities){const n=this.htmlEntities[t];e=e.replace(n.regex,n.val)}e=e.replace(this.ampEntity.regex,this.ampEntity.val)}return e};function Pae(e,t,n,r){return e&&(r===void 0&&(r=t.child.length===0),e=this.parseTextData(e,t.tagname,n,!1,t[":@"]?Object.keys(t[":@"]).length!==0:!1,r),e!==void 0&&e!==""&&t.add(this.options.textNodeName,e),e=""),e}function Dae(e,t,n){const r="*."+n;for(const s in e){const i=e[s];if(r===i||t===i)return!0}return!1}function Lae(e,t,n=">"){let r,s="";for(let i=t;i<e.length;i++){let o=e[i];if(r)o===r&&(r="");else if(o==='"'||o==="'")r=o;else if(o===n[0])if(n[1]){if(e[i+1]===n[1])return{data:s,index:i}}else return{data:s,index:i};else o==="	"&&(o=" ");s+=o}}function Ou(e,t,n,r){const s=e.indexOf(t,n);if(s===-1)throw new Error(r);return s+t.length-1}function RC(e,t,n,r=">"){const s=Lae(e,t+1,r);if(!s)return;let i=s.data;const o=s.index,a=i.search(/\s/);let c=i,u=!0;a!==-1&&(c=i.substring(0,a),i=i.substring(a+1).trimStart());const f=c;if(n){const h=c.indexOf(":");h!==-1&&(c=c.substr(h+1),u=c!==s.data.substr(h+1))}return{tagName:c,tagExp:i,closeIndex:o,attrExpPresent:u,rawTagName:f}}function Fae(e,t,n){const r=n;let s=1;for(;n<e.length;n++)if(e[n]==="<")if(e[n+1]==="/"){const i=Ou(e,">",n,`${t} is not closed`);if(e.substring(n+2,i).trim()===t&&(s--,s===0))return{tagContent:e.substring(r,n),i};n=i}else if(e[n+1]==="?")n=Ou(e,"?>",n+1,"StopNode is not closed.");else if(e.substr(n+1,3)==="!--")n=Ou(e,"-->",n+3,"StopNode is not closed.");else if(e.substr(n+1,2)==="![")n=Ou(e,"]]>",n,"StopNode is not closed.")-2;else{const i=RC(e,n,">");i&&((i&&i.tagName)===t&&i.tagExp[i.tagExp.length-1]!=="/"&&s++,n=i.closeIndex)}}function kC(e,t,n){if(t&&typeof e=="string"){const r=e.trim();return r==="true"?!0:r==="false"?!1:Eae(e,n)}else return Zoe(e)?e:""}function Bae(e,t){return EF(e,t)}function EF(e,t,n){let r;const s={};for(let i=0;i<e.length;i++){const o=e[i],a=zae(o);let c="";if(n===void 0?c=a:c=n+"."+a,a===t.textNodeName)r===void 0?r=o[a]:r+=""+o[a];else{if(a===void 0)continue;if(o[a]){let u=EF(o[a],t,c);const f=Uae(u,t);o[":@"]?Vae(u,o[":@"],c,t):Object.keys(u).length===1&&u[t.textNodeName]!==void 0&&!t.alwaysCreateTextNode?u=u[t.textNodeName]:Object.keys(u).length===0&&(t.alwaysCreateTextNode?u[t.textNodeName]="":u=""),s[a]!==void 0&&s.hasOwnProperty(a)?(Array.isArray(s[a])||(s[a]=[s[a]]),s[a].push(u)):t.isArray(a,c,f)?s[a]=[u]:s[a]=u}}}return typeof r=="string"?r.length>0&&(s[t.textNodeName]=r):r!==void 0&&(s[t.textNodeName]=r),s}function zae(e){const t=Object.keys(e);for(let n=0;n<t.length;n++){const r=t[n];if(r!==":@")return r}}function Vae(e,t,n,r){if(t){const s=Object.keys(t),i=s.length;for(let o=0;o<i;o++){const a=s[o];r.isArray(a,n+"."+a,!0,!0)?e[a]=[t[a]]:e[a]=t[a]}}}function Uae(e,t){const{textNodeName:n}=t,r=Object.keys(e).length;return!!(r===0||r===1&&(e[n]||typeof e[n]=="boolean"||e[n]===0))}class qae{constructor(t){this.externalEntities={},this.options=dae(t)}parse(t,n){if(typeof t!="string")if(t.toString)t=t.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(n){n===!0&&(n={});const i=tae(t,n);if(i!==!0)throw Error(`${i.err.msg}:${i.err.line}:${i.err.col}`)}const r=new Oae(this.options);r.addExternalEntities(this.externalEntities);const s=r.parseXml(t);return this.options.preserveOrder||s===void 0?s:Bae(s,this.options)}addEntity(t,n){if(n.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(t.indexOf("&")!==-1||t.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(n==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[t]=n}}function Hae(e){return new qae().parse(e)}const Wae=["SHA-1","SHA-256","SHA-384","SHA-512"];async function e6(e,t,n,r){if(!Wae.includes(e))throw new Error(`Invalid hash algorithm: ${e}`);const s=new TextEncoder().encode((n??"")+t+(r??"")),i=await crypto.subtle.digest(e,s);return Array.from(new Uint8Array(i)).map(a=>a.toString(16).padStart(2,"0")).join("")}const NF={sha256:async(e,t,n)=>e6("SHA-256",e,t,n),sha1:async(e,t,n)=>e6("SHA-1",e,t,n)};function Gae(e){const t=new Uint8Array(e);return crypto.getRandomValues(t),Array.from(t,n=>String.fromCharCode(33+n%94)).join("")}const mr=[];for(let e=0;e<256;++e)mr.push((e+256).toString(16).slice(1));function _F(e,t=0){return(mr[e[t+0]]+mr[e[t+1]]+mr[e[t+2]]+mr[e[t+3]]+"-"+mr[e[t+4]]+mr[e[t+5]]+"-"+mr[e[t+6]]+mr[e[t+7]]+"-"+mr[e[t+8]]+mr[e[t+9]]+"-"+mr[e[t+10]]+mr[e[t+11]]+mr[e[t+12]]+mr[e[t+13]]+mr[e[t+14]]+mr[e[t+15]]).toLowerCase()}let jN;const Yae=new Uint8Array(16);function CF(){if(!jN){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");jN=crypto.getRandomValues.bind(crypto)}return jN(Yae)}const Jae=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),t6={randomUUID:Jae};function Xae(e,t,n){var s;if(t6.randomUUID&&!e)return t6.randomUUID();e=e||{};const r=e.random??((s=e.rng)==null?void 0:s.call(e))??CF();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,_F(r)}const AN={};function Kae(e,t,n){let r;{const s=Date.now(),i=CF();Qae(AN,s,i),r=Zae(i,AN.msecs,AN.seq,t,n)}return t??_F(r)}function Qae(e,t,n){return e.msecs??(e.msecs=-1/0),e.seq??(e.seq=0),t>e.msecs?(e.seq=n[6]<<23|n[7]<<16|n[8]<<8|n[9],e.msecs=t):(e.seq=e.seq+1|0,e.seq===0&&e.msecs++),e}function Zae(e,t,n,r,s=0){if(e.length<16)throw new Error("Random bytes length must be >= 16");if(!r)r=new Uint8Array(16),s=0;else if(s<0||s+16>r.length)throw new RangeError(`UUID byte range ${s}:${s+15} is out of buffer bounds`);return t??(t=Date.now()),n??(n=e[6]*127<<24|e[7]<<16|e[8]<<8|e[9]),r[s++]=t/1099511627776&255,r[s++]=t/4294967296&255,r[s++]=t/16777216&255,r[s++]=t/65536&255,r[s++]=t/256&255,r[s++]=t&255,r[s++]=112|n>>>28&15,r[s++]=n>>>20&255,r[s++]=128|n>>>14&63,r[s++]=n>>>6&255,r[s++]=n<<2&255|e[10]&3,r[s++]=e[11],r[s++]=e[12],r[s++]=e[13],r[s++]=e[14],r[s++]=e[15],r}function ele(){return Xae()}function tle(){return Kae()}function OF(e,t,n){const r=Math.min(t,n),s=Math.max(t,n);return Math.max(r,Math.min(e,s))}function n6(e){return e==null?0:typeof e=="number"?e:Number.parseInt(e,10)}const b1={fileSize:(e,t=2)=>{if(e===0)return"0 B";const n=1024,r=t<0?0:t,s=["B","KB","MB","GB","TB"],i=Math.floor(Math.log(e)/Math.log(n));return Number.parseFloat((e/n**i).toFixed(r))+" "+s[i]}};var MC=(e=[],t="")=>"/"+[t,...e.map(n=>String(n).replace(/\./g,"/"))].filter(Boolean).join("/"),jF=e=>e.split("/").slice(1);function nle(e,t,n=void 0){let r=typeof t=="string"?jF(t):MC(t);return v1(e,r,n)}function v1(e,t,n=void 0){let r=typeof t=="string"?t.split(/[.\[\]\"]+/).filter(s=>s):t;if(r.length===0)return e;try{let[s,...i]=r;return!s||!(s in e)?n:v1(e[s],i,n)}catch{if(typeof n<"u")return n;throw new Error(`Invalid path: ${r.join(".")}`)}}var nn=(e={},t,n,r)=>({valid:!1,errors:[...e.errors??[],{keywordLocation:MC([...e.keywordPath??[],t]),instanceLocation:MC(e.instancePath),error:typeof n=="string"?n:`Invalid value for ${t}`,data:r}]}),tt=()=>({valid:!0,errors:[]}),lm=(e,t,n)=>{let r=Array.isArray(t)?t:[t],s=n?Array.isArray(n)?n:[n]:[];return{...e,keywordPath:[...e.keywordPath??[],...r],instancePath:s?[...e.instancePath??[],...s]:e.instancePath}},kv=(e={})=>({...e,errors:[]}),Zu=class extends Error{constructor(t){super(`Expected ${t}`)}},rle=class extends Error{constructor(e,t){super(`${e??"Invalid raw schema"}: ${JSON.stringify(t)}`),this.schema=t}},sle=class extends Error{constructor(t,n){super(`${t}, got: 'type "${typeof n}": ${JSON.stringify(n)}'`),this.value=n}},Lr=Symbol.for("jsonv-ts:schema");function ile(e){return e===null}function Kn(e){return!Array.isArray(e)&&typeof e=="object"&&e!==null}function ole(e){return Object.prototype.toString.call(e)==="[object Object]"}function Lo(e){return typeof e=="string"}function Za(e){return typeof e=="number"}function ale(e){return typeof e=="number"&&Number.isInteger(e)}function uT(e){return typeof e=="boolean"}function $o(e){return Array.isArray(e)}function lle(e){return typeof e!="boolean"}function cle(e){return e!==void 0&&lle(e)&&"type"in e}function ui(e){return e!==void 0&&Kn(e)&&Lr in e}function ule(e){return ui(e)&&typeof e.toJSON()=="boolean"}function dle(e,t,n){if(!e)throw new sle(t,n)}var r6=new WeakMap;function Va(e){if(e==null||typeof e=="boolean"||typeof e=="number")return e;if(Lo(e))return e.normalize("NFC");if($o(e)||Kn(e)){let t=r6.get(e);if(t!==void 0)return t;let n;if($o(e))n=e.map(Va).sort();else{let r=Object.entries(e).sort(([s],[i])=>s.localeCompare(i)).map(([s,i])=>[s,Va(i)]);n=Object.fromEntries(r)}return r6.set(e,n),n}return e}function fle(e,t){return t.reduce((n,r)=>(r in e&&(n[r]=e[r]),n),{})}function AF(e){try{return structuredClone(e)}catch{return e}}var dT=class{constructor(e){K(this,"cache");this.root=e,this.cache=new Map}hasRef(e,t){return t!==void 0&&"$ref"in e&&Lo(e.$ref)}resolve(e){let t=this.cache.get(e);if(!t){if(t=nle(this.root,e),!ui(t))throw new Error(`ref not found: ${e}`);if("$ref"in t&&t.$ref===e)throw new Error(`ref loop: ${e}`);this.cache.set(e,t)}return t}};function hle(e,t,n={}){let r=t;try{r=structuredClone(t)}catch{r=JSON.parse(JSON.stringify(t))}let s={resolver:n.resolver||new dT(e),depth:n.depth||0,dropUnknown:n.dropUnknown||!1};return s.resolver.hasRef(e,r)?s.resolver.resolve(e.$ref).coerce(r,{...s,depth:s.depth+1}):r}var mle=({type:e},t,n={})=>{if(e===void 0||t===void 0)return tt();let r,s={string:Lo,number:Za,integer:ale,object:Kn,array:$o,boolean:uT,null:ile};if(Array.isArray(e)){for(let i of e){if(!(i in s))throw new Zu(`Unknown type: ${i}`);if(s[i](t))return tt()}r=`Expected one of: ${e.join(", ")}`}else{if(!(e in s))throw new Zu(`Unknown type: ${e}`);s[e](t)||(r=`Expected ${e}`)}return r?nn(n,"type",r,t):tt()},ple=({const:e},t,n={})=>{let r=JSON.stringify(Va(e)),s=JSON.stringify(Va(t));return r!==s?nn(n,"const",`Expected const: ${r}`,s):tt()},gle=({enum:e=[]},t,n={})=>{let r=JSON.stringify(e.map(Va)),s=JSON.stringify(Va(t));return r.includes(s)?tt():nn(n,"enum",`Expected enum: ${r}`,t)};function x1(e,t,n={}){return e.map(r=>r.validate(t,kv(n)).valid?r:void 0).filter(Boolean)}var yle=({anyOf:e=[]},t,n={})=>x1(e,t,n).length>0?tt():nn(n,"anyOf","Expected at least one to match",t),ble=({oneOf:e=[]},t,n={})=>x1(e,t).length===1?tt():nn(n,"oneOf","Expected exactly one to match",t),vle=({allOf:e=[]},t,n={})=>x1(e,t,n).length===e.length?tt():nn(n,"allOf","Expected all to match",t),xle=({not:e},t,n={})=>t===void 0?tt():ui(e)&&e.validate(t,n).valid?nn(n,"not","Expected not to match",t):tt(),wle=({if:e,then:t,else:n},r,s={})=>{if(e&&(t||n)){if(e.validate(r,kv(s)).valid)return t?t.validate(r,kv(s)):tt();if(n)return n.validate(r,kv(s))}return tt()},Sle=({pattern:e=""},t,n={})=>{if(!Lo(t))return tt();if(e instanceof RegExp){if(e.test(t))return tt()}else if(new RegExp(e,"u").test(t))return tt();return nn(n,"pattern",`Expected string matching pattern ${e}`,t)},Ele=({minLength:e=0},t,n={})=>Lo(t)?[...Va(t)].length>=e?tt():nn(n,"minLength",`Expected string with minimum length of ${e}`,t):tt(),Nle=({maxLength:e=0},t,n={})=>Lo(t)?[...Va(t)].length<=e?tt():nn(n,"maxLength",`Expected string with maximum length of ${e}`,t):tt(),_le=({multipleOf:e=0},t,n={})=>{if(!Za(t))return tt();if(!(Number.isFinite(t)&&Number.isFinite(e))||e<=0)throw new Zu("number");let r=t/e,s=Number.EPSILON*Math.max(1,Math.abs(r));return Math.abs(r-Math.round(r))<=s?tt():nn(n,"multipleOf",`Expected number being a multiple of ${e}`,t)},Cle=({maximum:e=0},t,n={})=>!Za(t)||t<=e?tt():nn(n,"maximum",`Expected number less than or equal to ${e}`,t),Ole=({exclusiveMaximum:e=0},t,n={})=>!Za(t)||t<e?tt():nn(n,"exclusiveMaximum",`Expected number less than ${e}`,t),jle=({minimum:e=0},t,n={})=>!Za(t)||t>=e?tt():nn(n,"minimum",`Expected number greater than or equal to ${e}`,t),Ale=({exclusiveMinimum:e=0},t,n={})=>!Za(t)||t>e?tt():nn(n,"exclusiveMinimum",`Expected number greater than ${e}`,t),Tle=({properties:e={}},t,n={})=>{if(!Kn(t))return tt();for(let[r,s]of Object.entries(t)){let i=e[r];if(!ui(i))continue;let o=i.validate(s,lm(n,["properties",r],r));if(!o.valid)return o}return tt()},$le=({properties:e={},additionalProperties:t,patternProperties:n},r,s={})=>{if(!Kn(r))return tt();if(!ui(t))throw new Zu("additionalProperties must be a boolean or a managed schema");let i=Object.keys(e),o=Kn(n)?Object.keys(r).filter(c=>Object.keys(n).some(u=>new RegExp(u).test(c))):[],a=Object.keys(r).filter(c=>!i.includes(c)&&!o.includes(c));if(a.length>0){if(ule(t)){if(t.toJSON()===!0)return tt();let c=a.reduce((u,f)=>(u[f]=r[f],u),{});return nn(s,"additionalProperties","Additional properties are not allowed",c)}else if(ui(t))for(let c of a){let u=t.validate(r[c],lm(s,["additionalProperties"],c));if(!u.valid)return u}}return tt()},Rle=({dependentRequired:e},t,n={})=>{if(!Kn(t))return tt();let r=Object.keys(t).filter(s=>typeof t[s]!="function");if(Kn(e)){for(let[s,i]of Object.entries(e))if(r.includes(s)){for(let o of i)if(!r.includes(o))return nn(n,"dependentRequired",`Expected dependent required property ${o}`,t)}}return tt()},kle=({required:e=[]},t,n={})=>{if(!Kn(t))return tt();let r=Object.keys(t).filter(s=>typeof t[s]!="function");return e.every(s=>r.includes(s))?tt():nn(n,"required",`Expected object with required properties ${e.join(", ")}`,t)},Mle=({dependentSchemas:e},t,n={})=>{if(!Kn(t))return tt();let r=Object.keys(t).filter(s=>typeof t[s]!="function");if(Kn(e)){for(let[s,i]of Object.entries(e))if(r.includes(s)){let o=i.validate(t,n);if(!o.valid)return o}}return tt()},Ile=({minProperties:e=0},t,n={})=>Kn(t)?Object.keys(t).length>=e?tt():nn(n,"minProperties",`Expected object with at least ${e} properties`,t):tt(),Ple=({maxProperties:e=0},t,n={})=>!Kn(t)||Object.keys(t).length<=e?tt():nn(n,"maxProperties",`Expected object with at most ${e} properties`,t),Dle=({patternProperties:e={}},t,n={})=>{if(!Kn(t))return tt();if(!Kn(e))throw new Zu("patternProperties must be an object");for(let[r,s]of Object.entries(t))for(let[i,o]of Object.entries(e))if(new RegExp(i,"u").test(r)){let a=o.validate(s,lm(n,["patternProperties"],r));if(!a.valid)return a}return tt()},Lle=({propertyNames:e},t,n={})=>{if(!Kn(t)||e===void 0)return tt();if(!ui(e))throw new Zu("propertyNames must be a managed schema");for(let r of Object.keys(t)){let s=e.validate(r,lm(n,["propertyNames"],r));if(!s.valid)return s}return tt()},Fle=({items:e,prefixItems:t=[]},n,r={})=>{if(!$o(n)||e===void 0)return tt();if(!ui(e))throw new Zu("items must be a managed schema");for(let[s,i]of n.slice(t.length).entries()){let o=e.validate(i,lm(r,["items"],String(s)));if(!o.valid)return o}return tt()},Ble=({minItems:e=0},t,n={})=>!$o(t)||t.length>=e?tt():nn(n,"minItems",`Expected array with at least ${e} items`,t),zle=({maxItems:e=0},t,n={})=>!$o(t)||t.length<=e?tt():nn(n,"maxItems",`Expected array with at most ${e} items`,t),Vle=({uniqueItems:e=!1},t,n={})=>{if(!$o(t)||!e)return tt();let r=t.map(Va);return new Set(r.map(s=>JSON.stringify(s))).size===t.length?tt():nn(n,"uniqueItems","Expected array with unique items",t)},Ule=({contains:e,minContains:t,maxContains:n},r,s={})=>{if(!ui(e))throw new Error("contains must be a managed schema");if(!$o(r))return tt();let i=r.filter(o=>e.validate(o).valid).length;return i<(t??1)?nn(s,t?"minContains":"contains",`Expected array to contain at least ${t??1}, but found ${i}`,r):n!==void 0&&i>n?nn(s,"maxContains",`Expected array to contain at most ${n}, but found ${i}`,r):tt()},qle=({prefixItems:e=[]},t,n={})=>{var r;if(!$o(t))return tt();for(let s=0;s<t.length;s++){let i=(r=e[s])==null?void 0:r.validate(t[s],lm(n,String(s),String(s)));if(i&&(i==null?void 0:i.valid)!==!0)return i}return tt()},s6={email:e=>{if(e.length>318)return!1;if(/^[a-z0-9!#$%&'*+/=?^_`{|}~-]{1,20}(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]{1,21}){0,2}@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,60}[a-z0-9])?){0,3}$/i.test(e))return!0;if(!e.includes("@")||/(^\.|^"|\.@|\.\.)/.test(e))return!1;let[t,n,...r]=e.split("@");return!t||!n||r.length!==0||t.length>64||n.length>253||!/^[a-z0-9.-]+$/i.test(n)||!/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+$/i.test(t)?!1:n.split(".").every(s=>/^[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?$/i.test(s))},hostname:e=>e.length>(e.endsWith(".")?254:253)?!1:/^[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*\.?$/i.test(e),date:e=>{if(e.length!==10)return!1;if(e[5]==="0"&&e[6]==="2"){if(/^\d\d\d\d-02-(?:[012][1-8]|[12]0|[01]9)$/.test(e))return!0;let t=e.match(/^(\d\d\d\d)-02-29$/);if(!t)return!1;let n=Number(t[1]);return n%16===0||n%4===0&&n%25!==0}return e.endsWith("31")?/^\d\d\d\d-(?:0[13578]|1[02])-31$/.test(e):/^\d\d\d\d-(?:0[13-9]|1[012])-(?:[012][1-9]|[123]0)$/.test(e)},time:e=>{if(e.length>27||!/^(?:2[0-3]|[0-1]\d):[0-5]\d:(?:[0-5]\d|60)(?:\.\d+)?(?:z|[+-](?:2[0-3]|[0-1]\d)(?::?[0-5]\d)?)?$/i.test(e))return!1;if(!/:60/.test(e))return!0;let t=e.match(/([0-9.]+|[^0-9.])/g);if(!t)return!1;let n=Number(t[0])*60+Number(t[2]);return t[5]==="+"?n+=24*60-Number(t[6]||0)*60-Number(t[8]||0):t[5]==="-"&&(n+=Number(t[6]||0)*60+Number(t[8]||0)),n%(24*60)===23*60+59},"date-time":e=>{if(e.length>38)return!1;let t=/^\d\d\d\d-(?:0[1-9]|1[0-2])-(?:[0-2]\d|3[01])[t\s](?:2[0-3]|[0-1]\d):[0-5]\d:(?:[0-5]\d|60)(?:\.\d+)?(?:z|[+-](?:2[0-3]|[0-1]\d)(?::?[0-5]\d)?)$/i,n=e[5]==="0"&&e[6]==="2";if(n&&e[8]==="3"||!t.test(e))return!1;if(e[17]==="6"){let r=e.slice(11).match(/([0-9.]+|[^0-9.])/g);if(!r)return!1;let s=Number(r[0])*60+Number(r[2]);if(r[5]==="+"?s+=24*60-Number(r[6]||0)*60-Number(r[8]||0):r[5]==="-"&&(s+=Number(r[6]||0)*60+Number(r[8]||0)),s%(24*60)!==23*60+59)return!1}if(n){if(/^\d\d\d\d-02-(?:[012][1-8]|[12]0|[01]9)/.test(e))return!0;let r=e.match(/^(\d\d\d\d)-02-29/);if(!r)return!1;let s=Number(r[1]??0);return s%16===0||s%4===0&&s%25!==0}return e[8]==="3"&&e[9]==="1"?/^\d\d\d\d-(?:0[13578]|1[02])-31/.test(e):/^\d\d\d\d-(?:0[13-9]|1[012])-(?:[012][1-9]|[123]0)/.test(e)},ipv4:e=>e.length<=15&&/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d\d?)$/.test(e),ipv6:e=>{if(e.length>45||e.length<2)return!1;let t=0,n=0,r=0,s=!1,i=!1,o=0,a=!0;for(let u=0;u<e.length;u++){let f=e.charCodeAt(u);if(u===1&&o===58&&f!==58)return!1;if(f>=48&&f<=57){if(++r>4)return!1}else if(f===46){if(t>6||n>=3||r===0||i)return!1;n++,r=0}else if(f===58){if(n>0||t>=7)return!1;if(o===58){if(s)return!1;s=!0}else u===0&&(a=!1);t++,r=0,i=!1}else if(f>=97&&f<=102||f>=65&&f<=70){if(n>0||++r>4)return!1;i=!0}else return!1;o=f}if(t<2||n>0&&(n!==3||r===0))return!1;if(s&&e.length===2)return!0;if(n>0&&!/(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}$/.test(e))return!1;let c=n>0?6:7;return s?(a||r>0)&&t<c:t===c&&a&&r>0},uri:e=>/^[a-z][a-z0-9+\-.]*:(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|v[0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/?(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i.test(e),"uri-reference":e=>/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|v[0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/?(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?)?(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i.test(e),"uri-template":e=>/^(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2}|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i.test(e),"json-pointer":e=>/^(?:|\/(?:[^~]|~0|~1)*)$/.test(e),"relative-json-pointer":e=>/^(?:0|[1-9][0-9]*)(?:|#|\/(?:[^~]|~0|~1)*)$/.test(e),uuid:e=>/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e),duration:e=>e.length>1&&e.length<80&&(/^P\d+([.,]\d+)?W$/.test(e)||/^P[\dYMDTHS]*(\d[.,]\d+)?[YMDHS]$/.test(e)&&/^P([.,\d]+Y)?([.,\d]+M)?([.,\d]+D)?(T([.,\d]+H)?([.,\d]+M)?([.,\d]+S)?)?$/.test(e)),regex:e=>{if(/[^\\]\\Z/.test(e))return!1;try{return new RegExp(e,"u"),!0}catch{return!1}},binary:()=>!0,password:()=>!0},Hle=({format:e},t,n={})=>!Lo(t)||!e?tt():s6[e]?s6[e](t)?tt():nn(n,"format",`Expected format: ${e}`,t):tt(),TN={type:mle,const:ple,enum:gle,allOf:vle,anyOf:yle,oneOf:ble,not:xle,minLength:Ele,maxLength:Nle,pattern:Sle,format:Hle,minimum:jle,exclusiveMinimum:Ale,maximum:Cle,exclusiveMaximum:Ole,multipleOf:_le,required:kle,dependentRequired:Rle,dependentSchemas:Mle,minProperties:Ile,maxProperties:Ple,propertyNames:Lle,properties:Tle,patternProperties:Dle,additionalProperties:$le,minItems:Ble,maxItems:zle,uniqueItems:Vle,contains:Ule,prefixItems:qle,items:Fle,if:wle};function Wle(e,t,n={}){var i;let r={keywordPath:n.keywordPath||[],instancePath:n.instancePath||[],coerce:n.coerce||!1,errors:n.errors||[],shortCircuit:n.shortCircuit||!1,ignoreUnsupported:n.ignoreUnsupported||!1,resolver:n.resolver||((i=e.getResolver)==null?void 0:i.call(e))||new dT(e),depth:n.depth?n.depth+1:0,skipClone:n.skipClone||!1},s;if(n!=null&&n.coerce&&e.coerce){let o=e.coerce(t,{resolver:r.resolver,depth:r.depth});s=r.skipClone?o:structuredClone(o)}else s=r.skipClone?t:structuredClone(t);if(n.ignoreUnsupported!==!0){let o=["$defs"];for(let a of o)if(e[a])throw new Error(`${a} not implemented`)}if(r.resolver.hasRef(e,s)){let o=r.resolver.resolve(e.$ref).validate(s,{...r,errors:[]});o.valid||r.errors.push(...o.errors)}else{let o={keywordPath:r.keywordPath,instancePath:r.instancePath,coerce:r.coerce,errors:[],shortCircuit:r.shortCircuit,ignoreUnsupported:r.ignoreUnsupported,resolver:r.resolver,depth:r.depth};for(let a in e)if(a==="type"&&e.type!==void 0){if(s!==void 0){let c=TN[a];if(c){o.errors=[];let u=c(e,s,o);if(!u.valid){if(n.shortCircuit)return u;r.errors.push(...u.errors)}}}}else if(a in TN&&e[a]!==void 0){if(s===void 0)continue;let c=TN[a];if(c){o.errors=[];let u=c(e,s,o);if(!u.valid){if(n.shortCircuit)return u;r.errors.push(...u.errors)}}}}return{valid:r.errors.length===0,errors:r.errors}}var O8,Dc=class{constructor(e,t){K(this,"~standard");K(this,O8);K(this,"_resolver");K(this,"type");K(this,"$id");K(this,"$ref");K(this,"$schema");K(this,"title");K(this,"description");K(this,"readOnly");K(this,"writeOnly");K(this,"$comment");K(this,"examples");let{type:n,validate:r,coerce:s,template:i,...o}=e||{};Object.assign(this,{type:n},o),this[Lr]={raw:e,optional:!1,overrides:t},this["~standard"]={version:1,vendor:"jsonv-ts",validate:a=>{let c=this.validate(a);return c.valid?{value:a}:{issues:c.errors.map(u=>({message:u.error,path:jF(u.instanceLocation)}))}}}}template(e,t){var i,o,a;let n=this,r=e;if(n.const!==void 0?r=n.const:r===void 0&&(n.default!==void 0&&(r=n.default),t!=null&&t.withExtendedOptional&&n.enum!==void 0&&(r=n.enum[0])),(t==null?void 0:t.withOptional)!==!0&&r===void 0&&this.isOptional())return r;if((i=this[Lr].raw)!=null&&i.template){let c=this[Lr].raw.template(r,t);c!==void 0&&(r=c)}let s=(a=(o=this[Lr].overrides)==null?void 0:o.template)==null?void 0:a.call(o,r,t);return s!==void 0&&(r=s),r}validate(e,t){var s;let n={keywordPath:(t==null?void 0:t.keywordPath)||[],instancePath:(t==null?void 0:t.instancePath)||[],coerce:(t==null?void 0:t.coerce)||!1,errors:(t==null?void 0:t.errors)||[],shortCircuit:(t==null?void 0:t.shortCircuit)||!1,ignoreUnsupported:(t==null?void 0:t.ignoreUnsupported)||!1,resolver:(t==null?void 0:t.resolver)||this.getResolver(),depth:t!=null&&t.depth?t.depth+1:0,skipClone:(t==null?void 0:t.skipClone)??!0},r=(s=this[Lr].raw)==null?void 0:s.validate;if(r!==void 0){let i=r(e,n);if(!i.valid)return i}return Wle(this,e,n)}coerce(e,t){var i,o,a;let n={...t,resolver:(t==null?void 0:t.resolver)||this.getResolver(),depth:t!=null&&t.depth?t.depth+1:0,dropUnknown:(t==null?void 0:t.dropUnknown)||!1},r=(i=this[Lr].raw)==null?void 0:i.coerce;if(r!==void 0)return r(e,n);let s=((a=(o=this[Lr].overrides)==null?void 0:o.coerce)==null?void 0:a.call(o,e,n))??e;return hle(this,s,n)}optional(){return this[Lr].optional=!0,this}isOptional(){return this[Lr].optional}getResolver(){return this._resolver||(this._resolver=new dT(this)),this._resolver}children(e){return[]}*walk({instancePath:e=[],keywordPath:t=[],data:n,maxDepth:r=Number.POSITIVE_INFINITY,...s}={}){let i=e.length===0&&n?AF(n):n;if(s.includeSelf!==!1&&(yield new Ly(this,{instancePath:e,keywordPath:t,data:i,...s})),!(e.length>=r))for(let o of this.children(s)){let a=[...e,...o.instancePath];yield*o.schema.walk({...s,data:i,maxDepth:r,instancePath:a,keywordPath:[...t,...o.keywordPath]})}}*[(O8=Lr,Symbol.iterator)](e){for(let t of this.walk(e))yield t}toJSON(){let{toJSON:e,"~standard":t,_resolver:n,...r}=this;return JSON.parse(JSON.stringify(r))}},Ly=class{constructor(t,n={}){K(this,"instancePath");K(this,"keywordPath");K(this,"data");K(this,"depth");this.schema=t,this.instancePath=n.instancePath||[],this.keywordPath=n.keywordPath||[],this.depth=this.instancePath.length;try{if(n.data!==void 0){let r=v1(n.data,this.instancePath);t.validate(r).valid&&(this.data=r)}}catch{}}appendInstancePath(t){return this.instancePath=[...this.instancePath,...t],this}appendKeywordPath(t){return this.keywordPath=[...this.keywordPath,...t],this}setData(t){return this.data=t,this}};function w1(e,t,n){return new class extends Dc{constructor(){super(...arguments);K(this,"type",e)}}(t,n)}var Gle=class extends Dc{constructor(e){super(),this.bool=e}toJSON(){return this.bool}validate(e,t){return this.bool?tt():nn(t,"","Always fails",e)}};function IC(e){return new Gle(e)}var Xi=e=>w1(e==null?void 0:e.type,e),ii=(e,t)=>w1(void 0,{...t,const:e}),TF=class extends Dc{constructor(t,n){let r=[];for(let[i,o]of Object.entries(t||{}))dle(ui(o),"properties must be managed schemas",o),o[Lr].optional||r.push(i);let s=(n==null?void 0:n.additionalProperties)===!1?IC(!1):n==null?void 0:n.additionalProperties;r=r.length>0?r:void 0;super({...n,additionalProperties:s,properties:t,required:r},{template:(i,o)=>{let a=structuredClone(Kn(i)?i:{}),c={...a};if(this.properties)for(let[u,f]of Object.entries(this.properties)){let h=v1(a,u);if(f.isOptional()&&(o==null?void 0:o.withOptional)!==!0&&h===void 0&&i===void 0)continue;let p=f.template(h,o);p!==void 0&&(c[u]=p)}if(!(Object.keys(c).length===0&&!(o!=null&&o.withExtendedOptional)))return c},coerce:(i,o)=>{let a=Object.keys(this.properties),c=AF(i),u=a.length>0&&Object.values(this.properties).every(f=>!f[Lr].optional);if(ole(c)&&((o==null?void 0:o.dropUnknown)===!0||u)&&(c=fle(c,a)),typeof c=="string"&&c.match(/^\{/)&&(c=JSON.parse(c)),!(typeof c!="object"||c===null)){if(this.properties)for(let[f,h]of Object.entries(this.properties)){let p=c[f];p!==void 0&&(c[f]=h.coerce(p,o))}return c}}});K(this,"type","object");K(this,"properties");K(this,"required");this.properties=t,this.required=r}strict(){return this.additionalProperties=IC(!1),this[Lr].raw.additionalProperties=!1,this}partial(){for(let[,t]of Object.entries(this.properties))t[Lr].optional=!0;return this.required=void 0,this}children(t){let n=[];for(let[r,s]of Object.entries(this.properties)){let i=new Ly(s,t);i.appendInstancePath([r]),i.appendKeywordPath(["properties",r]),n.push(i)}return n}},ze=(e,t)=>new TF(e,t),We=(e,t)=>ze(e,t).strict(),$F=(e,t)=>ze(e,t).partial(),RF=class extends Dc{constructor(t,n){super({...n,additionalProperties:t},{template:(r,s)=>s!=null&&s.withExtendedOptional&&(r===void 0||!Kn(r))?{}:r});K(this,"type","object");K(this,"additionalProperties");this.additionalProperties=t}children(t){let n=[],r=new Ly(this.additionalProperties,t);return r.appendKeywordPath(["additionalProperties"]),n.push(r),n}},ed=(e,t)=>new RF(e,t),kF=class extends Dc{constructor(t){super(t,{template:(n,r)=>r!=null&&r.withExtendedOptional&&(n===void 0||!Lo(n))?"":n,coerce:n=>Za(n)?String(n):n});K(this,"type","string")}toJSON(){let{pattern:t,"~standard":n,_resolver:r,...s}=this;return JSON.parse(JSON.stringify({...s,pattern:t instanceof RegExp?t.source:t}))}},pe=e=>new kF(e),MF=(e,t,n)=>w1(e,n,{template:(r,s)=>s!=null&&s.withExtendedOptional&&(r===void 0||!Za(r))?(n==null?void 0:n.minimum)??0:r,coerce:r=>{if(Lo(r)){let s=t.parseFn(r);if(!Number.isNaN(s))return s}return r}}),jt=e=>MF("number",{parseFn:Number},e),Yle=e=>MF("integer",{parseFn:Number.parseInt},e),Jle=class extends Dc{constructor(t,n={}){super({...n,items:t},{template:r=>r===void 0||!Array.isArray(r)?[]:r,coerce:(r,s)=>{try{let i=typeof r=="string"?JSON.parse(r):r;if(!Array.isArray(i))return;if(ui(this.items))for(let[o,a]of i.entries())i[o]=this.items.coerce(a,s);return i}catch{}return r}});K(this,"type","array");this.items=t,this.items=t}children(t){let n=[];if(this.items){let r=new Ly(this.items,t);r.appendKeywordPath(["items"]),n.push(r)}return n}},Sn=(e,t)=>new Jle(e,t),gt=e=>w1("boolean",e,{template:(t,n)=>n!=null&&n.withExtendedOptional&&(t===void 0||!uT(t))?!1:t,coerce:t=>{if(Lo(t)&&["true","false","1","0"].includes(t))return t==="true"||t==="1";if(Za(t)){if(t===1)return!0;if(t===0)return!1}return t}}),Ub=Symbol.for("unionType"),j8,A8,IF=class extends(A8=Dc,j8=Ub,A8){constructor(t,n,r){super({...r,[n]:t},{coerce:(s,i)=>{let o=r==null?void 0:r.coerce;if(o!==void 0)return o.bind(this)(s,i);let a=x1(t,s,{ignoreUnsupported:!0,resolver:i==null?void 0:i.resolver,coerce:!0});return a.length>0?a[0].coerce(s,i):s}});K(this,j8);this[Ub]=n}get schemas(){return this[this[Ub]]}children(t){let n=[];for(let[r,s]of this.schemas.entries()){let i=new Ly(s,t);i.appendKeywordPath([this[Ub],r]),n.push(i)}return n}},Qt=(e,t)=>new IF(e,"anyOf",t),Xle=(e,t)=>new IF(e,"oneOf",t);function i6(e,t){return Array.isArray(e)?e.map(t):e!==void 0?[t(e)]:[]}function o6(e,t,n=r=>r){return Object.fromEntries(Object.entries(e).map(([r,s])=>[r,n(t(s),r)]))}function wa(e){if(uT(e))return IC(e);let t=structuredClone(e);if(!Kn(t))throw new rle("non-object schemas not implemented",t);"properties"in t&&t.properties&&(t.properties=o6(t.properties,wa,(i,o)=>"required"in t&&Array.isArray(t.required)&&t.required.includes(o)?i:i.optional()));let n=["patternProperties","dependentSchemas","$defs"];for(let i of n)i in t&&t[i]&&(t[i]=o6(t[i],wa));let r=["additionalProperties","items","prefixItems","propertyNames","contains","not","if","then","else"];for(let i of r)i in t&&typeof t[i]<"u"&&($o(t[i])?t[i]=i6(t[i],wa):t[i]=wa(t[i]));let s=["anyOf","oneOf","allOf"];for(let i of s)if(i in t){let{[i]:o}=t;t[i]=i6(o,wa)}if(cle(t))switch(t.type){case"string":return pe(t);case"number":return jt(t);case"integer":return Yle(t);case"boolean":return gt(t);case"object":{let{properties:i,...o}=t;return ze(i,o)}case"array":{let{items:i,...o}=t;return Sn(i,o)}}return Xi(t)}var Kle=e=>e(new Dc({$ref:"#",coerce:(t,n)=>{var s;let r=(s=n==null?void 0:n.resolver)==null?void 0:s.resolve("#");if(!ui(r))throw new Error("Ref not found: #");return r.coerce(t,n)}})),PF=e=>{const t=e.split("/");return t[0]===""&&t.shift(),t},Qle=e=>{const{groups:t,path:n}=Zle(e),r=PF(n);return ece(r,t)},Zle=e=>{const t=[];return e=e.replace(/\{[^}]+\}/g,(n,r)=>{const s=`@${r}`;return t.push([s,n]),s}),{groups:t,path:e}},ece=(e,t)=>{for(let n=t.length-1;n>=0;n--){const[r]=t[n];for(let s=e.length-1;s>=0;s--)if(e[s].includes(r)){e[s]=e[s].replace(r,t[n][1]);break}}return e},qb={},tce=(e,t)=>{if(e==="*")return"*";const n=e.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/);if(n){const r=`${e}#${t}`;return qb[r]||(n[2]?qb[r]=t&&t[0]!==":"&&t[0]!=="*"?[r,n[1],new RegExp(`^${n[2]}(?=/${t})`)]:[e,n[1],new RegExp(`^${n[2]}$`)]:qb[r]=[e,n[1],!0]),qb[r]}return null},S1=(e,t)=>{try{return t(e)}catch{return e.replace(/(?:%[0-9A-Fa-f]{2})+/g,n=>{try{return t(n)}catch{return n}})}},nce=e=>S1(e,decodeURI),DF=e=>{const t=e.url,n=t.indexOf("/",t.charCodeAt(9)===58?13:8);let r=n;for(;r<t.length;r++){const s=t.charCodeAt(r);if(s===37){const i=t.indexOf("?",r),o=t.slice(n,i===-1?void 0:i);return nce(o.includes("%25")?o.replace(/%25/g,"%2525"):o)}else if(s===63)break}return t.slice(n,r)},rce=e=>{const t=DF(e);return t.length>1&&t.at(-1)==="/"?t.slice(0,-1):t},Rf=(e,t,...n)=>(n.length&&(t=Rf(t,...n)),`${(e==null?void 0:e[0])==="/"?"":"/"}${e}${t==="/"?"":`${(e==null?void 0:e.at(-1))==="/"?"":"/"}${(t==null?void 0:t[0])==="/"?t.slice(1):t}`}`),LF=e=>{if(e.charCodeAt(e.length-1)!==63||!e.includes(":"))return null;const t=e.split("/"),n=[];let r="";return t.forEach(s=>{if(s!==""&&!/\:/.test(s))r+="/"+s;else if(/\:/.test(s))if(/\?/.test(s)){n.length===0&&r===""?n.push("/"):n.push(r);const i=s.replace("?","");r+="/"+i,n.push(r)}else r+="/"+s}),n.filter((s,i,o)=>o.indexOf(s)===i)},$N=e=>/[%+]/.test(e)?(e.indexOf("+")!==-1&&(e=e.replace(/\+/g," ")),e.indexOf("%")!==-1?S1(e,fT):e):e,FF=(e,t,n)=>{let r;if(!n&&t&&!/[%+]/.test(t)){let o=e.indexOf(`?${t}`,8);for(o===-1&&(o=e.indexOf(`&${t}`,8));o!==-1;){const a=e.charCodeAt(o+t.length+1);if(a===61){const c=o+t.length+2,u=e.indexOf("&",c);return $N(e.slice(c,u===-1?void 0:u))}else if(a==38||isNaN(a))return"";o=e.indexOf(`&${t}`,o+1)}if(r=/[%+]/.test(e),!r)return}const s={};r??(r=/[%+]/.test(e));let i=e.indexOf("?",8);for(;i!==-1;){const o=e.indexOf("&",i+1);let a=e.indexOf("=",i);a>o&&o!==-1&&(a=-1);let c=e.slice(i+1,a===-1?o===-1?void 0:o:a);if(r&&(c=$N(c)),i=o,c==="")continue;let u;a===-1?u="":(u=e.slice(a+1,o===-1?void 0:o),r&&(u=$N(u))),n?(s[c]&&Array.isArray(s[c])||(s[c]=[]),s[c].push(u)):s[c]??(s[c]=u)}return t?s[t]:s},sce=FF,ice=(e,t)=>FF(e,t,!0),fT=decodeURIComponent,hT={name:"HMAC",hash:"SHA-256"},BF=async e=>{const t=typeof e=="string"?new TextEncoder().encode(e):e;return await crypto.subtle.importKey("raw",t,hT,!1,["sign","verify"])},oce=async(e,t)=>{const n=await BF(t),r=await crypto.subtle.sign(hT.name,n,new TextEncoder().encode(e));return btoa(String.fromCharCode(...new Uint8Array(r)))},ace=async(e,t,n)=>{try{const r=atob(e),s=new Uint8Array(r.length);for(let i=0,o=r.length;i<o;i++)s[i]=r.charCodeAt(i);return await crypto.subtle.verify(hT,n,s,new TextEncoder().encode(t))}catch{return!1}},lce=/^[\w!#$%&'*.^`|~+-]+$/,cce=/^[ !#-:<-[\]-~]*$/,PC=(e,t)=>{if(t&&e.indexOf(t)===-1)return{};const n=e.trim().split(";"),r={};for(let s of n){s=s.trim();const i=s.indexOf("=");if(i===-1)continue;const o=s.substring(0,i).trim();if(t&&t!==o||!lce.test(o))continue;let a=s.substring(i+1).trim();if(a.startsWith('"')&&a.endsWith('"')&&(a=a.slice(1,-1)),cce.test(a)&&(r[o]=a.indexOf("%")!==-1?S1(a,fT):a,t))break}return r},a6=async(e,t,n)=>{const r={},s=await BF(t);for(const[i,o]of Object.entries(PC(e,n))){const a=o.lastIndexOf(".");if(a<1)continue;const c=o.substring(0,a),u=o.substring(a+1);if(u.length!==44||!u.endsWith("="))continue;const f=await ace(u,c,s);r[i]=f?c:!1}return r},zF=(e,t,n={})=>{let r=`${e}=${t}`;if(e.startsWith("__Secure-")&&!n.secure)throw new Error("__Secure- Cookie must have Secure attributes");if(e.startsWith("__Host-")){if(!n.secure)throw new Error("__Host- Cookie must have Secure attributes");if(n.path!=="/")throw new Error('__Host- Cookie must have Path attributes with "/"');if(n.domain)throw new Error("__Host- Cookie must not have Domain attributes")}if(n&&typeof n.maxAge=="number"&&n.maxAge>=0){if(n.maxAge>3456e4)throw new Error("Cookies Max-Age SHOULD NOT be greater than 400 days (34560000 seconds) in duration.");r+=`; Max-Age=${n.maxAge|0}`}if(n.domain&&n.prefix!=="host"&&(r+=`; Domain=${n.domain}`),n.path&&(r+=`; Path=${n.path}`),n.expires){if(n.expires.getTime()-Date.now()>3456e7)throw new Error("Cookies Expires SHOULD NOT be greater than 400 days (34560000 seconds) in the future.");r+=`; Expires=${n.expires.toUTCString()}`}if(n.httpOnly&&(r+="; HttpOnly"),n.secure&&(r+="; Secure"),n.sameSite&&(r+=`; SameSite=${n.sameSite.charAt(0).toUpperCase()+n.sameSite.slice(1)}`),n.priority&&(r+=`; Priority=${n.priority}`),n.partitioned){if(!n.secure)throw new Error("Partitioned Cookie must have Secure attributes");r+="; Partitioned"}return r},RN=(e,t,n)=>(t=encodeURIComponent(t),zF(e,t,n)),Mv=async(e,t,n,r={})=>{const s=await oce(t,n);return t=`${t}.${s}`,t=encodeURIComponent(t),zF(e,t,r)},VF=(e,t,n)=>{const r=e.req.raw.headers.get("Cookie");if(typeof t=="string"){if(!r)return;let i=t;return n==="secure"?i="__Secure-"+t:n==="host"&&(i="__Host-"+t),PC(r,i)[i]}return r?PC(r):{}},UF=async(e,t,n,r)=>{const s=e.req.raw.headers.get("Cookie");if(typeof n=="string"){if(!s)return;let o=n;return(await a6(s,t,o))[o]}return s?await a6(s,t):{}},qF=(e,t,n,r)=>{let s;(r==null?void 0:r.prefix)==="secure"?s=RN("__Secure-"+t,n,{path:"/",...r,secure:!0}):(r==null?void 0:r.prefix)==="host"?s=RN("__Host-"+t,n,{...r,path:"/",secure:!0,domain:void 0}):s=RN(t,n,{path:"/",...r}),e.header("Set-Cookie",s,{append:!0})},HF=async(e,t,n,r,s)=>{let i;(s==null?void 0:s.prefix)==="secure"?i=await Mv("__Secure-"+t,n,r,{path:"/",...s,secure:!0}):(s==null?void 0:s.prefix)==="host"?i=await Mv("__Host-"+t,n,r,{...s,path:"/",secure:!0,domain:void 0}):i=await Mv(t,n,r,{path:"/",...s}),e.header("set-cookie",i,{append:!0})},uce=(e,t,n)=>{const r=VF(e,t,n==null?void 0:n.prefix);return qF(e,t,"",{...n,maxAge:0}),r},l6=class extends Error{constructor(t=500,n){super(n==null?void 0:n.message,{cause:n==null?void 0:n.cause});K(this,"res");K(this,"status");this.res=n==null?void 0:n.res,this.status=t}getResponse(){return this.res?new Response(this.res.body,{status:this.status,headers:this.res.headers}):new Response(this.message,{status:this.status})}},dce=(e,t)=>new Response(e,{headers:{"Content-Type":t}}).formData(),fce=/^application\/([a-z-\.]+\+)?json(;\s*[a-zA-Z0-9\-]+\=([^;]+))*$/,hce=/^multipart\/form-data(;\s?boundary=[a-zA-Z0-9'"()+_,\-./:=?]+)?$/,mce=/^application\/x-www-form-urlencoded(;\s*[a-zA-Z0-9\-]+\=([^;]+))*$/,pce=(e,t)=>async(n,r)=>{let s={};const i=n.req.header("Content-Type");switch(e){case"json":if(!i||!fce.test(i))break;try{s=await n.req.json()}catch{const a="Malformed JSON in request body";throw new l6(400,{message:a})}break;case"form":{if(!i||!(hce.test(i)||mce.test(i)))break;let a;if(n.req.bodyCache.formData)a=await n.req.bodyCache.formData;else try{const u=await n.req.arrayBuffer();a=await dce(u,i),n.req.bodyCache.formData=a}catch(u){let f="Malformed FormData request.";throw f+=u instanceof Error?` ${u.message}`:` ${String(u)}`,new l6(400,{message:f})}const c={};a.forEach((u,f)=>{f.endsWith("[]")?(c[f]??(c[f]=[])).push(u):Array.isArray(c[f])?c[f].push(u):f in c?c[f]=[c[f],u]:c[f]=u}),s=c;break}case"query":s=Object.fromEntries(Object.entries(n.req.queries()).map(([a,c])=>c.length===1?[a,c[0]]:[a,c]));break;case"param":s=n.req.param();break;case"header":s=n.req.header();break;case"cookie":s=VF(n);break}const o=await t(s,n);if(o instanceof Response)return o;n.req.addValidatedData(e,o),await r()},gce=Symbol.for("jsonv"),WF=(e,t)=>Object.assign(e,{[gce]:t}),qt=(e,t,n,r)=>{let s=pce(e,async(i,o)=>{let a=(n==null?void 0:n.coerce)!==!1?t.coerce(i,{dropUnknown:n==null?void 0:n.dropUnknown}):i,c=t.validate(a);return c.valid?a:o.json({...c,schema:t},400)});return WF(s,{type:"parameters",skip:n==null?void 0:n.skipOpenAPI,value:{target:e,schema:t}})},yce={query:"query",param:"path",header:"header",cookie:"cookie"};function bce(e,t){let n=yce[t];return{parameters:Object.entries(e.properties).map(([r,s])=>{var i;return{name:r,in:n,required:((i=e.required)==null?void 0:i.includes(r))||void 0,description:(s==null?void 0:s.description)||void 0,schema:structuredClone(s.toJSON())}})}}var en=e=>WF(async(t,n)=>{await n()},{type:"route-doc",value:e??{}}),$p={ConnectionClosed:{code:-32e3,message:"Connection closed"},RequestTimeout:{code:-32001,message:"Request timeout"},ParseError:{code:-32700,message:"Parse error"},InvalidRequest:{code:-32600,message:"Invalid request"},MethodNotFound:{code:-32601,message:"Method not found"},InvalidParams:{code:-32602,message:"Invalid params"},InternalError:{code:-32603,message:"Internal error",statusCode:500}},vce=class extends Error{constructor(t,n,r){super(r??$p[t].message);K(this,"jsonrpc","2.0");K(this,"id");this.code=t,this.data=n}static get codes(){return Object.fromEntries(Object.entries($p).map(([t,n])=>[t,t]))}setId(t){return this.id=t,this}get statusCode(){var t;return((t=$p[this.code])==null?void 0:t.statusCode)??400}toJSON(){return{jsonrpc:this.jsonrpc,id:this.id,error:{code:$p[this.code].code,message:this.message,data:this.data}}}toString(){return`MCP Error (${$p[this.code].code} ${this.code}): ${this.message}`}},xce=ze({}),GF=ze({jsonrpc:pe({const:"2.0"}),id:Xle([pe(),jt()]).optional()});ze({...GF.properties,method:pe(),params:Xi().optional()});ze({...GF.properties,result:xce.optional(),error:ze({}).optional()});ze({title:pe(),readOnlyHint:gt(),destructiveHint:gt({default:!0}),idempotentHint:gt(),openWorldHint:gt({default:!0})}).partial().strict();var uc=class{constructor(e,t,n){this.name=e,this.config=t,this.handler=n}async call(e,t,n){var r;if((r=this.config)!=null&&r.inputSchema){let s=this.config.inputSchema.validate(e);if(!s.valid)throw new vce("InvalidParams",{method:this.name,errors:s.errors,given:e,schema:this.config.inputSchema.toJSON()},"Invalid tool parameters")}return await this.handler(e,{context:t,raw:n,text:s=>({type:"text",text:s}),json:s=>({type:"text",text:JSON.stringify(s)})})}toJSON(){var e,t,n,r,s,i,o,a,c;return{name:this.name,title:(e=this.config)==null?void 0:e.title,description:(t=this.config)==null?void 0:t.description,inputSchema:((r=(n=this.config)==null?void 0:n.inputSchema)==null?void 0:r.toJSON())??{type:"object"},outputSchema:(i=(s=this.config)==null?void 0:s.outputSchema)==null?void 0:i.toJSON(),annotations:Object.keys(((o=this.config)==null?void 0:o.annotations)??{}).length>0?(a=this.config)==null?void 0:a.annotations:void 0,_meta:(c=this.config)==null?void 0:c._meta}}};We({name:pe(),version:pe()});var wce={emergency:"error",alert:"error",critical:"error",error:"error",warning:"warn",notice:"log",info:"info",debug:"debug"},Sce=Object.keys(wce),Ece="2025-06-18",Nce=class{constructor(e){K(this,"id",1);K(this,"sessionId");this.config=e}async request(e,t){let n={jsonrpc:"2.0",id:this.id++,method:e,params:t},r=new Headers({"Content-Type":"application/json",Accept:"application/json"});this.config.headers&&Object.entries(this.config.headers).forEach(([i,o])=>{r.set(i,o)}),this.sessionId&&r.set("Mcp-Session-Id",this.sessionId);let s=await(this.config.fetch??fetch)(this.config.url,{method:"POST",headers:r,body:JSON.stringify(n)});this.sessionId||(this.sessionId=s.headers.get("Mcp-Session-Id")??void 0);try{let i=await s.json();if(i.jsonrpc!=="2.0")throw new Error("Invalid JSON-RPC version");return i.result}catch(i){throw console.error(i),i}}async connect(){return this.request("initialize",{protocolVersion:Ece,capabilities:{},clientInfo:{name:this.config.name,version:this.config.version}})}async ping(){return this.request("ping",{})}async setLoggingLevel(e){return this.request("logging/setLevel",{level:e})}async listResources(){return this.request("resources/list",{})}async listResourceTemplates(){return this.request("resources/templates/list",{})}async readResource(e){return this.request("resources/read",e)}async callTool(e){return this.request("tools/call",e)}async listTools(){return this.request("tools/list",{})}},_ce=Symbol("mcp-feature"),ws=(e,t={})=>Object.assign(async(n,r)=>{await r()},{[_ce]:{type:"tool",tool:{name:e,config:t}}});class Cce extends kF{}const Rg=e=>new Cce(e),DC=Symbol("bknd-validation-mark");function Oce(e){const t=structuredClone(e);return YF(t,!1),t}function YF(e,t=!0){try{if(typeof e=="object"&&e!==null&&!Array.isArray(e)){t?e[DC]=!0:delete e[DC];for(const n in e)typeof e[n]=="object"&&e[n]!==null&&YF(e[n],t)}}catch{}}function jce(e){return typeof e!="object"||e===null?!1:e[DC]===!0}const td=pe({pattern:"^[a-zA-Z_][a-zA-Z0-9_]*$",minLength:2,maxLength:150});class E1 extends Error{constructor(t,n,r=[]){super(`Invalid schema given for ${JSON.stringify(n,null,2)}

Error: ${JSON.stringify(r[0],null,2)}

Schema: ${JSON.stringify(t.toJSON(),null,2)}`),this.schema=t,this.value=n,this.errors=r}first(){return this.errors[0]}firstToString(){const t=this.first();return`${t.error} at ${t.instanceLocation}`}}const JF=e=>{const t=e.toJSON();return wa(t)};function Un(e,t,n){if(!(n!=null&&n.forceParse)&&!(n!=null&&n.coerce)&&jce(t))return t;const r=n!=null&&n.clone?JF(e):e;let s=(n==null?void 0:n.coerce)!==!1?r.coerce(t,{dropUnknown:(n==null?void 0:n.coerceDropUnknown)??!1}):t;(n==null?void 0:n.withDefaults)!==!1&&(s=r.template(s,{withOptional:!0,withExtendedOptional:(n==null?void 0:n.withExtendedDefaults)??!1}));const i=e.validate(s,{shortCircuit:!0,ignoreUnsupported:!0});if(!i.valid)if(n!=null&&n.onError)n.onError(i.errors);else throw new E1(r,t,i.errors);return s}let As=class extends Error{constructor(n,r){super(n);K(this,"code",gn.BAD_REQUEST);K(this,"name","Exception");K(this,"_context");r&&(this.code=r)}context(n){return this._context=n,this}toJSON(){return{error:this.message,type:this.name,context:this._context}}};class Lf extends Error{constructor(t,n,r){super(t),this.details=n,this.type=r}static with(t,n,r){throw new Lf(t,n,r)}toJSON(){return{type:this.type??"unknown",message:this.message,details:this.details}}}class lr{constructor(t){this.name=t,this.name=t}toJSON(){return{name:this.name}}}class c6{constructor(t,n){this.permission=t,this.config=n}}class mx{constructor(t,n=[],r=!1,s=!1){this.name=t,this.permissions=n,this.is_default=r,this.implicit_allow=s}static createWithPermissionNames(t,n,r=!1,s=!1){return new mx(t,n.map(i=>new c6(new lr(i))),r,s)}static create(t){var n;return new mx(t.name,((n=t.permissions)==null?void 0:n.map(r=>new c6(new lr(r))))??[],t.is_default,t.implicit_allow)}}var cC;let Wr=(cC=class{constructor(t){K(this,"_returning");K(this,"params");K(this,"returned",!1);this.params=t}validate(t){throw new Ace(this,t)}clone(t){const n=new this.constructor(t);return n.returned=!0,n}},K(cC,"slug","untitled-event"),cC);class N1 extends Error{constructor(t,n){super(`Expected "${t}", got "${n}"`)}}class Ace extends Error{constructor(t,n){super(`Event "${t.constructor.slug}" returned without validation`),this.data=n}}class Tce{constructor(t,n,r="async",s){K(this,"mode","async");K(this,"event");K(this,"handler");K(this,"once",!1);K(this,"id");this.event=t,this.handler=n,this.mode=r,this.id=s}}class Fy{constructor(t,n){K(this,"events",[]);K(this,"listeners",[]);K(this,"enabled",!0);K(this,"asyncs",[]);var r;this.options=n,t&&this.registerEvents(t),(r=n==null?void 0:n.listeners)==null||r.forEach(s=>this.addListener(s))}enable(){return this.enabled=!0,this}disable(){return this.enabled=!1,this}clearEvents(){return this.events=[],this}clearAll(){return this.clearEvents(),this.listeners=[],this}getListeners(){return[...this.listeners]}get Events(){return new Proxy(this,{get:(t,n)=>this.events.find(r=>r.slug===n)})}eventExists(t){var r;let n;return typeof t=="string"?n=t:n=((r=t.constructor)==null?void 0:r.slug)??t.slug,!!this.events.find(s=>n===s.slug)}throwIfEventNotRegistered(t){var n;if(!this.eventExists(t)){const r=((n=t.constructor)==null?void 0:n.slug)??t.slug??t;throw new Error(`Event "${r}" not registered`)}}registerEvent(t,n=!1){if(this.eventExists(t)){if(n)return this;throw new Error(`Event "${t.name}" already registered.`)}return this.events.push(t),this}registerEvents(t){return(typeof t=="object"?Object.values(t):t).forEach(r=>this.registerEvent(r,!0)),this}addListener(t){return this.throwIfEventNotRegistered(t.event),t.id&&this.listeners.find(r=>r.id===t.id)?(pt.debug(`Listener with id "${t.id}" already exists.`),this):(this.listeners.push(t),this)}createEventListener(t,n,r="async"){const s=typeof t=="string"?this.events.find(a=>a.slug===t):t,i=typeof r=="string"?{mode:r}:r,o=new Tce(s,n,i.mode);i.once&&(o.once=!0),i.id&&(o.id=`${s.slug}-${i.id}`),this.addListener(o)}onEvent(t,n,r){this.createEventListener(t,n,r)}on(t,n,r){this.createEventListener(t,n,r)}onAny(t,n){this.events.forEach(r=>this.onEvent(r,t,n))}collectAsyncs(t){this.asyncs.push(...t)}async executeAsyncs(t=n=>Promise.all(n)){if(this.asyncs.length===0)return;const n=[...this.asyncs];this.asyncs=[],await t(n.map(r=>r()))}async emit(t){var o,a,c;const n=t.constructor.slug;if(!this.enabled)return pt.debug("EventManager disabled, not emitting",n),t;if(!this.eventExists(t))throw new Error(`Event "${n}" not registered`);const r=[],s=[];this.listeners=this.listeners.filter(u=>u.event.slug!==n?!0:(u.mode==="sync"?r.push(u):s.push(async()=>await u.handler(t,u.event.slug)),!u.once)),this.collectAsyncs(s);let i=t;for(const u of r)try{const f=await u.handler(i,u.event.slug);if(typeof f<"u"){const h=i.validate(f);if(h&&h.constructor.slug===n){if(!h.returned)throw new Error(`Returned event ${h.constructor.slug} must be marked as returned.`);i=h}}}catch(f){if(f instanceof N1)(a=(o=this.options)==null?void 0:o.onInvalidReturn)==null||a.call(o,i,f),pt.warn(`Invalid return of event listener for "${n}": ${f.message}`);else if((c=this.options)!=null&&c.onError)this.options.onError(i,f);else throw f}return i}}function px(e){return typeof e>"u"||e===void 0}function Ro(e){return typeof e=="string"}function mT(e){return typeof e=="number"}function XF(e){return typeof e=="boolean"}function KF(e){return e===null}function QF(e){return typeof e=="bigint"}function yd(e){return typeof e=="function"}function _1(e){return typeof e=="object"&&e!==null}function Z(e){return Object.freeze(e)}function Hb(e){return Sc(e)?e:[e]}function Sc(e){return Array.isArray(e)}const Ts=Z({is(e){return e.kind==="IdentifierNode"},create(e){return Z({kind:"IdentifierNode",name:e})}}),LC=Z({is(e){return e.kind==="SchemableIdentifierNode"},create(e){return Z({kind:"SchemableIdentifierNode",identifier:Ts.create(e)})},createWithSchema(e,t){return Z({kind:"SchemableIdentifierNode",schema:Ts.create(e),identifier:Ts.create(t)})}}),Lc=Z({is(e){return e.kind==="AliasNode"},create(e,t){return Z({kind:"AliasNode",node:e,alias:t})}}),dc=Z({is(e){return e.kind==="TableNode"},create(e){return Z({kind:"TableNode",table:LC.create(e)})},createWithSchema(e,t){return Z({kind:"TableNode",table:LC.createWithSchema(e,t)})}});function bi(e){return _1(e)&&yd(e.toOperationNode)}function $ce(e){return _1(e)&&"expressionType"in e&&bi(e)}function Rce(e){return _1(e)&&"expression"in e&&Ro(e.alias)&&bi(e)}const oa=Z({is(e){return e.kind==="SelectModifierNode"},create(e,t){return Z({kind:"SelectModifierNode",modifier:e,of:t})},createWithExpression(e){return Z({kind:"SelectModifierNode",rawModifier:e})}}),Ec=Z({is(e){return e.kind==="AndNode"},create(e,t){return Z({kind:"AndNode",left:e,right:t})}}),cm=Z({is(e){return e.kind==="OrNode"},create(e,t){return Z({kind:"OrNode",left:e,right:t})}}),kN=Z({is(e){return e.kind==="OnNode"},create(e){return Z({kind:"OnNode",on:e})},cloneWithOperation(e,t,n){return Z({...e,on:t==="And"?Ec.create(e.on,n):cm.create(e.on,n)})}}),rg=Z({is(e){return e.kind==="JoinNode"},create(e,t){return Z({kind:"JoinNode",joinType:e,table:t,on:void 0})},createWithOn(e,t,n){return Z({kind:"JoinNode",joinType:e,table:t,on:kN.create(n)})},cloneWithOn(e,t){return Z({...e,on:e.on?kN.cloneWithOperation(e.on,"And",t):kN.create(t)})}}),jh=Z({is(e){return e.kind==="BinaryOperationNode"},create(e,t,n){return Z({kind:"BinaryOperationNode",leftOperand:e,operator:t,rightOperand:n})}}),kce=["=","==","!=","<>",">",">=","<","<=","in","not in","is","is not","like","not like","match","ilike","not ilike","@>","<@","^@","&&","?","?&","?|","!<","!>","<=>","!~","~","~*","!~*","@@","@@@","!!","<->","regexp","is distinct from","is not distinct from"],Mce=["+","-","*","/","%","^","&","|","#","<<",">>"],ZF=["->","->>"],Ice=[...kce,...Mce,"&&","||"],Pce=["exists","not exists"],Dce=["not","-",...Pce],Lce=[...Ice,...ZF,...Dce,"between","between symmetric"],nd=Z({is(e){return e.kind==="OperatorNode"},create(e){return Z({kind:"OperatorNode",operator:e})}});function u6(e){return Ro(e)&&ZF.includes(e)}const pT=Z({is(e){return e.kind==="ColumnNode"},create(e){return Z({kind:"ColumnNode",column:Ts.create(e)})}}),eB=Z({is(e){return e.kind==="SelectAllNode"},create(){return Z({kind:"SelectAllNode"})}}),C1=Z({is(e){return e.kind==="ReferenceNode"},create(e,t){return Z({kind:"ReferenceNode",table:t,column:e})},createSelectAll(e){return Z({kind:"ReferenceNode",table:e,column:eB.create()})}});function tB(e){return _1(e)&&bi(e)&&Ro(e.dynamicReference)}const FC=Z({is(e){return e.kind==="OrderByItemNode"},create(e,t){return Z({kind:"OrderByItemNode",orderBy:e,direction:t})}}),Es=Z({is(e){return e.kind==="RawNode"},create(e,t){return Z({kind:"RawNode",sqlFragments:Z(e),parameters:Z(t)})},createWithSql(e){return Es.create([e],[])},createWithChild(e){return Es.create(["",""],[e])},createWithChildren(e){return Es.create(new Array(e.length+1).fill(""),e)}});function Fce(e){return e==="asc"||e==="desc"}function gT(e){if(e.length===2)return[MN(e[0],e[1])];if(e.length===1){const[t]=e;return Array.isArray(t)?t.map(n=>MN(n)):[MN(t)]}throw new Error(`Invalid number of arguments at order by! expected 1-2, received ${e.length}`)}function MN(e,t){const n=Bce(e);if(FC.is(n)){if(t)throw new Error("Cannot specify direction twice!");return n}return FC.create(n,nB(t))}function Bce(e){if(T1(e))return A1(e);if(tB(e))return e.toOperationNode();const[t,n]=e.split(" ");if(n){if(!Fce(n))throw new Error(`Invalid order by direction: ${n}`);return FC.create(Nc(t),nB(n))}return Nc(e)}function nB(e){if(e)return e==="asc"||e==="desc"?Es.createWithSql(e):e.toOperationNode()}const gx=Z({is(e){return e.kind==="JSONReferenceNode"},create(e,t){return Z({kind:"JSONReferenceNode",reference:e,traversal:t})},cloneWithTraversal(e,t){return Z({...e,traversal:t})}}),rB=Z({is(e){return e.kind==="JSONOperatorChainNode"},create(e){return Z({kind:"JSONOperatorChainNode",operator:e,values:Z([])})},cloneWithValue(e,t){return Z({...e,values:Z([...e.values,t])})}}),sg=Z({is(e){return e.kind==="JSONPathNode"},create(e){return Z({kind:"JSONPathNode",inOperator:e,pathLegs:Z([])})},cloneWithLeg(e,t){return Z({...e,pathLegs:Z([...e.pathLegs,t])})}});function zce(e){return Ro(e)?Nc(e):e.toOperationNode()}function kg(e){return Sc(e)?e.map(t=>Zs(t)):[Zs(e)]}function Zs(e){return T1(e)?A1(e):zce(e)}function Vce(e,t){const n=Nc(e);if(u6(t))return gx.create(n,rB.create(nd.create(t)));const r=t.slice(0,-1);if(u6(r))return gx.create(n,sg.create(nd.create(r)));throw new Error(`Invalid JSON operator: ${t}`)}function Nc(e){const t=".";if(!e.includes(t))return C1.create(pT.create(e));const n=e.split(t).map(sB);if(n.length===3)return qce(n);if(n.length===2)return Hce(n);throw new Error(`invalid column reference ${e}`)}function Uce(e){const t=" as ";if(e.includes(t)){const[n,r]=e.split(t).map(sB);return Lc.create(Nc(n),Ts.create(r))}else return Nc(e)}function qce(e){const[t,n,r]=e;return C1.create(pT.create(r),dc.createWithSchema(t,n))}function Hce(e){const[t,n]=e;return C1.create(pT.create(n),dc.create(t))}function sB(e){return e.trim()}const Wce=Z({is(e){return e.kind==="PrimitiveValueListNode"},create(e){return Z({kind:"PrimitiveValueListNode",values:Z([...e])})}}),Gce=Z({is(e){return e.kind==="ValueListNode"},create(e){return Z({kind:"ValueListNode",values:Z(e)})}}),_c=Z({is(e){return e.kind==="ValueNode"},create(e){return Z({kind:"ValueNode",value:e})},createImmediate(e){return Z({kind:"ValueNode",value:e,immediate:!0})}});function Yce(e){return Sc(e)?Jce(e):Vr(e)}function Vr(e){return T1(e)?A1(e):_c.create(e)}function yT(e){return mT(e)||XF(e)||KF(e)}function bT(e){if(!yT(e))throw new Error(`unsafe immediate value ${JSON.stringify(e)}`);return _c.createImmediate(e)}function Jce(e){return e.some(T1)?Gce.create(e.map(t=>Vr(t))):Wce.create(e)}const Mg=Z({is(e){return e.kind==="ParensNode"},create(e){return Z({kind:"ParensNode",node:e})}});function Ki(e){if(e.length===3)return vT(e[0],e[1],e[2]);if(e.length===1)return Vr(e[0]);throw new Error(`invalid arguments: ${JSON.stringify(e)}`)}function vT(e,t,n){return Xce(t)&&iB(n)?jh.create(Zs(e),zC(t),_c.createImmediate(n)):jh.create(Zs(e),zC(t),Yce(n))}function Ig(e,t,n){return jh.create(Zs(e),zC(t),Zs(n))}function d6(e,t){return BC(Object.entries(e).filter(([,n])=>!px(n)).map(([n,r])=>vT(n,iB(r)?"is":"=",r)),t)}function BC(e,t,n=!0){const r=t==="and"?Ec.create:cm.create;if(e.length===0)return jh.create(_c.createImmediate(1),nd.create("="),_c.createImmediate(t==="and"?1:0));let s=f6(e[0]);for(let i=1;i<e.length;++i)s=r(s,f6(e[i]));return e.length>1&&n?Mg.create(s):s}function Xce(e){return e==="is"||e==="is not"}function iB(e){return KF(e)||XF(e)}function zC(e){if(Ro(e)&&Lce.includes(e))return nd.create(e);if(bi(e))return e.toOperationNode();throw new Error(`invalid operator ${JSON.stringify(e)}`)}function f6(e){return bi(e)?e.toOperationNode():e}const Cc=Z({is(e){return e.kind==="OrderByNode"},create(e){return Z({kind:"OrderByNode",items:Z([...e])})},cloneWithItems(e,t){return Z({...e,items:Z([...e.items,...t])})}}),h6=Z({is(e){return e.kind==="PartitionByNode"},create(e){return Z({kind:"PartitionByNode",items:Z(e)})},cloneWithItems(e,t){return Z({...e,items:Z([...e.items,...t])})}}),VC=Z({is(e){return e.kind==="OverNode"},create(){return Z({kind:"OverNode"})},cloneWithOrderByItems(e,t){return Z({...e,orderBy:e.orderBy?Cc.cloneWithItems(e.orderBy,t):Cc.create(t)})},cloneWithPartitionByItems(e,t){return Z({...e,partitionBy:e.partitionBy?h6.cloneWithItems(e.partitionBy,t):h6.create(t)})}}),yx=Z({is(e){return e.kind==="FromNode"},create(e){return Z({kind:"FromNode",froms:Z(e)})},cloneWithFroms(e,t){return Z({...e,froms:Z([...e.froms,...t])})}}),m6=Z({is(e){return e.kind==="GroupByNode"},create(e){return Z({kind:"GroupByNode",items:Z(e)})},cloneWithItems(e,t){return Z({...e,items:Z([...e.items,...t])})}}),p6=Z({is(e){return e.kind==="HavingNode"},create(e){return Z({kind:"HavingNode",having:e})},cloneWithOperation(e,t,n){return Z({...e,having:t==="And"?Ec.create(e.having,n):cm.create(e.having,n)})}}),ln=Z({is(e){return e.kind==="SelectQueryNode"},create(e){return Z({kind:"SelectQueryNode",...e&&{with:e}})},createFrom(e,t){return Z({kind:"SelectQueryNode",from:yx.create(e),...t&&{with:t}})},cloneWithSelections(e,t){return Z({...e,selections:e.selections?Z([...e.selections,...t]):Z(t)})},cloneWithDistinctOn(e,t){return Z({...e,distinctOn:e.distinctOn?Z([...e.distinctOn,...t]):Z(t)})},cloneWithFrontModifier(e,t){return Z({...e,frontModifiers:e.frontModifiers?Z([...e.frontModifiers,t]):Z([t])})},cloneWithOrderByItems(e,t){return Z({...e,orderBy:e.orderBy?Cc.cloneWithItems(e.orderBy,t):Cc.create(t)})},cloneWithGroupByItems(e,t){return Z({...e,groupBy:e.groupBy?m6.cloneWithItems(e.groupBy,t):m6.create(t)})},cloneWithLimit(e,t){return Z({...e,limit:t})},cloneWithOffset(e,t){return Z({...e,offset:t})},cloneWithFetch(e,t){return Z({...e,fetch:t})},cloneWithHaving(e,t){return Z({...e,having:e.having?p6.cloneWithOperation(e.having,"And",t):p6.create(t)})},cloneWithSetOperations(e,t){return Z({...e,setOperations:e.setOperations?Z([...e.setOperations,...t]):Z([...t])})},cloneWithoutSelections(e){return Z({...e,selections:[]})},cloneWithoutLimit(e){return Z({...e,limit:void 0})},cloneWithoutOffset(e){return Z({...e,offset:void 0})},cloneWithoutOrderBy(e){return Z({...e,orderBy:void 0})},cloneWithoutGroupBy(e){return Z({...e,groupBy:void 0})}});function bd(e,t){Object.defineProperties(e.prototype,{then:{enumerable:!1,value:()=>{throw new Error(t)}}})}var $i,xc;let oB=(xc=class{constructor(t){Fe(this,$i);Be(this,$i,Z(t))}on(...t){return new xc({...Y(this,$i),joinNode:rg.cloneWithOn(Y(this,$i).joinNode,Ki(t))})}onRef(t,n,r){return new xc({...Y(this,$i),joinNode:rg.cloneWithOn(Y(this,$i).joinNode,Ig(t,n,r))})}onTrue(){return new xc({...Y(this,$i),joinNode:rg.cloneWithOn(Y(this,$i).joinNode,Es.createWithSql("true"))})}$call(t){return t(this)}toOperationNode(){return Y(this,$i).joinNode}},$i=new WeakMap,xc);bd(oB,"don't await JoinBuilder instances. They are never executed directly and are always just a part of a query.");const Kce=Z({is(e){return e.kind==="PartitionByItemNode"},create(e){return Z({kind:"PartitionByItemNode",partitionBy:e})}});function Qce(e){return kg(e).map(Kce.create)}var Ru;const Ow=class Ow{constructor(t){Fe(this,Ru);Be(this,Ru,Z(t))}orderBy(t,n){return new Ow({overNode:VC.cloneWithOrderByItems(Y(this,Ru).overNode,gT([t,n]))})}partitionBy(t){return new Ow({overNode:VC.cloneWithPartitionByItems(Y(this,Ru).overNode,Qce(t))})}$call(t){return t(this)}toOperationNode(){return Y(this,Ru).overNode}};Ru=new WeakMap;let bx=Ow;bd(bx,"don't await OverBuilder instances. They are never executed directly and are always just a part of a query.");const ig=Z({is(e){return e.kind==="SelectionNode"},create(e){return Z({kind:"SelectionNode",selection:e})},createSelectAll(){return Z({kind:"SelectionNode",selection:eB.create()})},createSelectAllFromTable(e){return Z({kind:"SelectionNode",selection:C1.createSelectAll(e)})}});function aB(e){return yd(e)?aB(e(j1())):Sc(e)?e.map(t=>g6(t)):[g6(e)]}function g6(e){return Ro(e)?ig.create(Uce(e)):tB(e)?ig.create(e.toOperationNode()):ig.create(gB(e))}function lB(e){return e?Array.isArray(e)?e.map(y6):[y6(e)]:[ig.createSelectAll()]}function y6(e){if(Ro(e))return ig.createSelectAllFromTable(Vi(e));throw new Error(`invalid value selectAll expression: ${JSON.stringify(e)}`)}const Zce=Z({is(e){return e.kind==="InsertQueryNode"},create(e,t,n){return Z({kind:"InsertQueryNode",into:e,...t&&{with:t},replace:n})},createWithoutInto(){return Z({kind:"InsertQueryNode"})},cloneWith(e,t){return Z({...e,...t})}}),eue=Z({is(e){return e.kind==="UpdateQueryNode"},create(e,t){return Z({kind:"UpdateQueryNode",table:e,...t&&{with:t}})},createWithoutTable(){return Z({kind:"UpdateQueryNode"})},cloneWithFromItems(e,t){return Z({...e,from:e.from?yx.cloneWithFroms(e.from,t):yx.create(t)})},cloneWithUpdates(e,t){return Z({...e,updates:e.updates?Z([...e.updates,...t]):t})},cloneWithLimit(e,t){return Z({...e,limit:t})}}),b6=Z({is(e){return e.kind==="UsingNode"},create(e){return Z({kind:"UsingNode",tables:Z(e)})},cloneWithTables(e,t){return Z({...e,tables:Z([...e.tables,...t])})}}),tue=Z({is(e){return e.kind==="DeleteQueryNode"},create(e,t){return Z({kind:"DeleteQueryNode",from:yx.create(e),...t&&{with:t}})},cloneWithOrderByItems(e,t){return Z({...e,orderBy:e.orderBy?Cc.cloneWithItems(e.orderBy,t):Cc.create(t)})},cloneWithoutOrderBy(e){return Z({...e,orderBy:void 0})},cloneWithLimit(e,t){return Z({...e,limit:t})},cloneWithoutLimit(e){return Z({...e,limit:void 0})},cloneWithUsing(e,t){return Z({...e,using:e.using!==void 0?b6.cloneWithTables(e.using,t):b6.create(t)})}}),Ff=Z({is(e){return e.kind==="WhereNode"},create(e){return Z({kind:"WhereNode",where:e})},cloneWithOperation(e,t,n){return Z({...e,where:t==="And"?Ec.create(e.where,n):cm.create(e.where,n)})}}),v6=Z({is(e){return e.kind==="ReturningNode"},create(e){return Z({kind:"ReturningNode",selections:Z(e)})},cloneWithSelections(e,t){return Z({...e,selections:e.selections?Z([...e.selections,...t]):Z(t)})}}),nue=Z({is(e){return e.kind==="ExplainNode"},create(e,t){return Z({kind:"ExplainNode",format:e,options:t})}}),O1=Z({is(e){return e.kind==="WhenNode"},create(e){return Z({kind:"WhenNode",condition:e})},cloneWithResult(e,t){return Z({...e,result:t})}}),rue=Z({is(e){return e.kind==="MergeQueryNode"},create(e,t){return Z({kind:"MergeQueryNode",into:e,...t&&{with:t}})},cloneWithUsing(e,t){return Z({...e,using:t})},cloneWithWhen(e,t){return Z({...e,whens:e.whens?Z([...e.whens,t]):Z([t])})},cloneWithThen(e,t){return Z({...e,whens:e.whens?Z([...e.whens.slice(0,-1),O1.cloneWithResult(e.whens[e.whens.length-1],t)]):void 0})}}),x6=Z({is(e){return e.kind==="OutputNode"},create(e){return Z({kind:"OutputNode",selections:Z(e)})},cloneWithSelections(e,t){return Z({...e,selections:e.selections?Z([...e.selections,...t]):Z(t)})}}),sr=Z({is(e){return ln.is(e)||Zce.is(e)||eue.is(e)||tue.is(e)||rue.is(e)},cloneWithEndModifier(e,t){return Z({...e,endModifiers:e.endModifiers?Z([...e.endModifiers,t]):Z([t])})},cloneWithWhere(e,t){return Z({...e,where:e.where?Ff.cloneWithOperation(e.where,"And",t):Ff.create(t)})},cloneWithJoin(e,t){return Z({...e,joins:e.joins?Z([...e.joins,t]):Z([t])})},cloneWithReturning(e,t){return Z({...e,returning:e.returning?v6.cloneWithSelections(e.returning,t):v6.create(t)})},cloneWithoutReturning(e){return Z({...e,returning:void 0})},cloneWithoutWhere(e){return Z({...e,where:void 0})},cloneWithExplain(e,t,n){return Z({...e,explain:nue.create(t,n==null?void 0:n.toOperationNode())})},cloneWithTop(e,t){return Z({...e,top:t})},cloneWithOutput(e,t){return Z({...e,output:e.output?x6.cloneWithSelections(e.output,t):x6.create(t)})}});class sue extends Error{constructor(n){super("no result");K(this,"node");this.node=n}}function iue(e){return Object.prototype.hasOwnProperty.call(e,"prototype")}const oue=Z({is(e){return e.kind==="TopNode"},create(e,t){return Z({kind:"TopNode",expression:e,modifiers:t})}});function aue(e,t){if(!mT(e)&&!QF(e))throw new Error(`Invalid top expression: ${e}`);if(!px(t)&&!lue(t))throw new Error(`Invalid top modifiers: ${t}`);return oue.create(e,t)}function lue(e){return e==="percent"||e==="with ties"||e==="percent with ties"}const cue=Z({is(e){return e.kind==="LimitNode"},create(e){return Z({kind:"LimitNode",limit:e})}}),w6=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"];function uue(e){let t="";for(let n=0;n<e;++n)t+=due();return t}function due(){return w6[~~(Math.random()*w6.length)]}function ua(){return new fue}var nh;class fue{constructor(){Fe(this,nh)}get queryId(){return Y(this,nh)===void 0&&Be(this,nh,uue(8)),Y(this,nh)}}nh=new WeakMap;var jw;class hue{constructor(){K(this,"nodeStack",[]);Fe(this,jw,Z({AliasNode:this.transformAlias.bind(this),ColumnNode:this.transformColumn.bind(this),IdentifierNode:this.transformIdentifier.bind(this),SchemableIdentifierNode:this.transformSchemableIdentifier.bind(this),RawNode:this.transformRaw.bind(this),ReferenceNode:this.transformReference.bind(this),SelectQueryNode:this.transformSelectQuery.bind(this),SelectionNode:this.transformSelection.bind(this),TableNode:this.transformTable.bind(this),FromNode:this.transformFrom.bind(this),SelectAllNode:this.transformSelectAll.bind(this),AndNode:this.transformAnd.bind(this),OrNode:this.transformOr.bind(this),ValueNode:this.transformValue.bind(this),ValueListNode:this.transformValueList.bind(this),PrimitiveValueListNode:this.transformPrimitiveValueList.bind(this),ParensNode:this.transformParens.bind(this),JoinNode:this.transformJoin.bind(this),OperatorNode:this.transformOperator.bind(this),WhereNode:this.transformWhere.bind(this),InsertQueryNode:this.transformInsertQuery.bind(this),DeleteQueryNode:this.transformDeleteQuery.bind(this),ReturningNode:this.transformReturning.bind(this),CreateTableNode:this.transformCreateTable.bind(this),AddColumnNode:this.transformAddColumn.bind(this),ColumnDefinitionNode:this.transformColumnDefinition.bind(this),DropTableNode:this.transformDropTable.bind(this),DataTypeNode:this.transformDataType.bind(this),OrderByNode:this.transformOrderBy.bind(this),OrderByItemNode:this.transformOrderByItem.bind(this),GroupByNode:this.transformGroupBy.bind(this),GroupByItemNode:this.transformGroupByItem.bind(this),UpdateQueryNode:this.transformUpdateQuery.bind(this),ColumnUpdateNode:this.transformColumnUpdate.bind(this),LimitNode:this.transformLimit.bind(this),OffsetNode:this.transformOffset.bind(this),OnConflictNode:this.transformOnConflict.bind(this),OnDuplicateKeyNode:this.transformOnDuplicateKey.bind(this),CreateIndexNode:this.transformCreateIndex.bind(this),DropIndexNode:this.transformDropIndex.bind(this),ListNode:this.transformList.bind(this),PrimaryKeyConstraintNode:this.transformPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.transformUniqueConstraint.bind(this),ReferencesNode:this.transformReferences.bind(this),CheckConstraintNode:this.transformCheckConstraint.bind(this),WithNode:this.transformWith.bind(this),CommonTableExpressionNode:this.transformCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.transformCommonTableExpressionName.bind(this),HavingNode:this.transformHaving.bind(this),CreateSchemaNode:this.transformCreateSchema.bind(this),DropSchemaNode:this.transformDropSchema.bind(this),AlterTableNode:this.transformAlterTable.bind(this),DropColumnNode:this.transformDropColumn.bind(this),RenameColumnNode:this.transformRenameColumn.bind(this),AlterColumnNode:this.transformAlterColumn.bind(this),ModifyColumnNode:this.transformModifyColumn.bind(this),AddConstraintNode:this.transformAddConstraint.bind(this),DropConstraintNode:this.transformDropConstraint.bind(this),ForeignKeyConstraintNode:this.transformForeignKeyConstraint.bind(this),CreateViewNode:this.transformCreateView.bind(this),DropViewNode:this.transformDropView.bind(this),GeneratedNode:this.transformGenerated.bind(this),DefaultValueNode:this.transformDefaultValue.bind(this),OnNode:this.transformOn.bind(this),ValuesNode:this.transformValues.bind(this),SelectModifierNode:this.transformSelectModifier.bind(this),CreateTypeNode:this.transformCreateType.bind(this),DropTypeNode:this.transformDropType.bind(this),ExplainNode:this.transformExplain.bind(this),DefaultInsertValueNode:this.transformDefaultInsertValue.bind(this),AggregateFunctionNode:this.transformAggregateFunction.bind(this),OverNode:this.transformOver.bind(this),PartitionByNode:this.transformPartitionBy.bind(this),PartitionByItemNode:this.transformPartitionByItem.bind(this),SetOperationNode:this.transformSetOperation.bind(this),BinaryOperationNode:this.transformBinaryOperation.bind(this),UnaryOperationNode:this.transformUnaryOperation.bind(this),UsingNode:this.transformUsing.bind(this),FunctionNode:this.transformFunction.bind(this),CaseNode:this.transformCase.bind(this),WhenNode:this.transformWhen.bind(this),JSONReferenceNode:this.transformJSONReference.bind(this),JSONPathNode:this.transformJSONPath.bind(this),JSONPathLegNode:this.transformJSONPathLeg.bind(this),JSONOperatorChainNode:this.transformJSONOperatorChain.bind(this),TupleNode:this.transformTuple.bind(this),MergeQueryNode:this.transformMergeQuery.bind(this),MatchedNode:this.transformMatched.bind(this),AddIndexNode:this.transformAddIndex.bind(this),CastNode:this.transformCast.bind(this),FetchNode:this.transformFetch.bind(this),TopNode:this.transformTop.bind(this),OutputNode:this.transformOutput.bind(this)}))}transformNode(t){if(!t)return t;this.nodeStack.push(t);const n=this.transformNodeImpl(t);return this.nodeStack.pop(),Z(n)}transformNodeImpl(t){return Y(this,jw)[t.kind](t)}transformNodeList(t){return t&&Z(t.map(n=>this.transformNode(n)))}transformSelectQuery(t){return{kind:"SelectQueryNode",from:this.transformNode(t.from),selections:this.transformNodeList(t.selections),distinctOn:this.transformNodeList(t.distinctOn),joins:this.transformNodeList(t.joins),groupBy:this.transformNode(t.groupBy),orderBy:this.transformNode(t.orderBy),where:this.transformNode(t.where),frontModifiers:this.transformNodeList(t.frontModifiers),endModifiers:this.transformNodeList(t.endModifiers),limit:this.transformNode(t.limit),offset:this.transformNode(t.offset),with:this.transformNode(t.with),having:this.transformNode(t.having),explain:this.transformNode(t.explain),setOperations:this.transformNodeList(t.setOperations),fetch:this.transformNode(t.fetch),top:this.transformNode(t.top)}}transformSelection(t){return{kind:"SelectionNode",selection:this.transformNode(t.selection)}}transformColumn(t){return{kind:"ColumnNode",column:this.transformNode(t.column)}}transformAlias(t){return{kind:"AliasNode",node:this.transformNode(t.node),alias:this.transformNode(t.alias)}}transformTable(t){return{kind:"TableNode",table:this.transformNode(t.table)}}transformFrom(t){return{kind:"FromNode",froms:this.transformNodeList(t.froms)}}transformReference(t){return{kind:"ReferenceNode",column:this.transformNode(t.column),table:this.transformNode(t.table)}}transformAnd(t){return{kind:"AndNode",left:this.transformNode(t.left),right:this.transformNode(t.right)}}transformOr(t){return{kind:"OrNode",left:this.transformNode(t.left),right:this.transformNode(t.right)}}transformValueList(t){return{kind:"ValueListNode",values:this.transformNodeList(t.values)}}transformParens(t){return{kind:"ParensNode",node:this.transformNode(t.node)}}transformJoin(t){return{kind:"JoinNode",joinType:t.joinType,table:this.transformNode(t.table),on:this.transformNode(t.on)}}transformRaw(t){return{kind:"RawNode",sqlFragments:Z([...t.sqlFragments]),parameters:this.transformNodeList(t.parameters)}}transformWhere(t){return{kind:"WhereNode",where:this.transformNode(t.where)}}transformInsertQuery(t){return{kind:"InsertQueryNode",into:this.transformNode(t.into),columns:this.transformNodeList(t.columns),values:this.transformNode(t.values),returning:this.transformNode(t.returning),onConflict:this.transformNode(t.onConflict),onDuplicateKey:this.transformNode(t.onDuplicateKey),endModifiers:this.transformNodeList(t.endModifiers),with:this.transformNode(t.with),ignore:t.ignore,replace:t.replace,explain:this.transformNode(t.explain),defaultValues:t.defaultValues,top:this.transformNode(t.top),output:this.transformNode(t.output)}}transformValues(t){return{kind:"ValuesNode",values:this.transformNodeList(t.values)}}transformDeleteQuery(t){return{kind:"DeleteQueryNode",from:this.transformNode(t.from),using:this.transformNode(t.using),joins:this.transformNodeList(t.joins),where:this.transformNode(t.where),returning:this.transformNode(t.returning),endModifiers:this.transformNodeList(t.endModifiers),with:this.transformNode(t.with),orderBy:this.transformNode(t.orderBy),limit:this.transformNode(t.limit),explain:this.transformNode(t.explain),top:this.transformNode(t.top),output:this.transformNode(t.output)}}transformReturning(t){return{kind:"ReturningNode",selections:this.transformNodeList(t.selections)}}transformCreateTable(t){return{kind:"CreateTableNode",table:this.transformNode(t.table),columns:this.transformNodeList(t.columns),constraints:this.transformNodeList(t.constraints),temporary:t.temporary,ifNotExists:t.ifNotExists,onCommit:t.onCommit,frontModifiers:this.transformNodeList(t.frontModifiers),endModifiers:this.transformNodeList(t.endModifiers),selectQuery:this.transformNode(t.selectQuery)}}transformColumnDefinition(t){return{kind:"ColumnDefinitionNode",column:this.transformNode(t.column),dataType:this.transformNode(t.dataType),references:this.transformNode(t.references),primaryKey:t.primaryKey,autoIncrement:t.autoIncrement,unique:t.unique,notNull:t.notNull,unsigned:t.unsigned,defaultTo:this.transformNode(t.defaultTo),check:this.transformNode(t.check),generated:this.transformNode(t.generated),frontModifiers:this.transformNodeList(t.frontModifiers),endModifiers:this.transformNodeList(t.endModifiers),nullsNotDistinct:t.nullsNotDistinct,identity:t.identity,ifNotExists:t.ifNotExists}}transformAddColumn(t){return{kind:"AddColumnNode",column:this.transformNode(t.column)}}transformDropTable(t){return{kind:"DropTableNode",table:this.transformNode(t.table),ifExists:t.ifExists,cascade:t.cascade}}transformOrderBy(t){return{kind:"OrderByNode",items:this.transformNodeList(t.items)}}transformOrderByItem(t){return{kind:"OrderByItemNode",orderBy:this.transformNode(t.orderBy),direction:this.transformNode(t.direction)}}transformGroupBy(t){return{kind:"GroupByNode",items:this.transformNodeList(t.items)}}transformGroupByItem(t){return{kind:"GroupByItemNode",groupBy:this.transformNode(t.groupBy)}}transformUpdateQuery(t){return{kind:"UpdateQueryNode",table:this.transformNode(t.table),from:this.transformNode(t.from),joins:this.transformNodeList(t.joins),where:this.transformNode(t.where),updates:this.transformNodeList(t.updates),returning:this.transformNode(t.returning),endModifiers:this.transformNodeList(t.endModifiers),with:this.transformNode(t.with),explain:this.transformNode(t.explain),limit:this.transformNode(t.limit),top:this.transformNode(t.top),output:this.transformNode(t.output)}}transformColumnUpdate(t){return{kind:"ColumnUpdateNode",column:this.transformNode(t.column),value:this.transformNode(t.value)}}transformLimit(t){return{kind:"LimitNode",limit:this.transformNode(t.limit)}}transformOffset(t){return{kind:"OffsetNode",offset:this.transformNode(t.offset)}}transformOnConflict(t){return{kind:"OnConflictNode",columns:this.transformNodeList(t.columns),constraint:this.transformNode(t.constraint),indexExpression:this.transformNode(t.indexExpression),indexWhere:this.transformNode(t.indexWhere),updates:this.transformNodeList(t.updates),updateWhere:this.transformNode(t.updateWhere),doNothing:t.doNothing}}transformOnDuplicateKey(t){return{kind:"OnDuplicateKeyNode",updates:this.transformNodeList(t.updates)}}transformCreateIndex(t){return{kind:"CreateIndexNode",name:this.transformNode(t.name),table:this.transformNode(t.table),columns:this.transformNodeList(t.columns),unique:t.unique,using:this.transformNode(t.using),ifNotExists:t.ifNotExists,where:this.transformNode(t.where),nullsNotDistinct:t.nullsNotDistinct}}transformList(t){return{kind:"ListNode",items:this.transformNodeList(t.items)}}transformDropIndex(t){return{kind:"DropIndexNode",name:this.transformNode(t.name),table:this.transformNode(t.table),ifExists:t.ifExists,cascade:t.cascade}}transformPrimaryKeyConstraint(t){return{kind:"PrimaryKeyConstraintNode",columns:this.transformNodeList(t.columns),name:this.transformNode(t.name)}}transformUniqueConstraint(t){return{kind:"UniqueConstraintNode",columns:this.transformNodeList(t.columns),name:this.transformNode(t.name),nullsNotDistinct:t.nullsNotDistinct}}transformForeignKeyConstraint(t){return{kind:"ForeignKeyConstraintNode",columns:this.transformNodeList(t.columns),references:this.transformNode(t.references),name:this.transformNode(t.name),onDelete:t.onDelete,onUpdate:t.onUpdate}}transformSetOperation(t){return{kind:"SetOperationNode",operator:t.operator,expression:this.transformNode(t.expression),all:t.all}}transformReferences(t){return{kind:"ReferencesNode",table:this.transformNode(t.table),columns:this.transformNodeList(t.columns),onDelete:t.onDelete,onUpdate:t.onUpdate}}transformCheckConstraint(t){return{kind:"CheckConstraintNode",expression:this.transformNode(t.expression),name:this.transformNode(t.name)}}transformWith(t){return{kind:"WithNode",expressions:this.transformNodeList(t.expressions),recursive:t.recursive}}transformCommonTableExpression(t){return{kind:"CommonTableExpressionNode",name:this.transformNode(t.name),materialized:t.materialized,expression:this.transformNode(t.expression)}}transformCommonTableExpressionName(t){return{kind:"CommonTableExpressionNameNode",table:this.transformNode(t.table),columns:this.transformNodeList(t.columns)}}transformHaving(t){return{kind:"HavingNode",having:this.transformNode(t.having)}}transformCreateSchema(t){return{kind:"CreateSchemaNode",schema:this.transformNode(t.schema),ifNotExists:t.ifNotExists}}transformDropSchema(t){return{kind:"DropSchemaNode",schema:this.transformNode(t.schema),ifExists:t.ifExists,cascade:t.cascade}}transformAlterTable(t){return{kind:"AlterTableNode",table:this.transformNode(t.table),renameTo:this.transformNode(t.renameTo),setSchema:this.transformNode(t.setSchema),columnAlterations:this.transformNodeList(t.columnAlterations),addConstraint:this.transformNode(t.addConstraint),dropConstraint:this.transformNode(t.dropConstraint),addIndex:this.transformNode(t.addIndex),dropIndex:this.transformNode(t.dropIndex)}}transformDropColumn(t){return{kind:"DropColumnNode",column:this.transformNode(t.column)}}transformRenameColumn(t){return{kind:"RenameColumnNode",column:this.transformNode(t.column),renameTo:this.transformNode(t.renameTo)}}transformAlterColumn(t){return{kind:"AlterColumnNode",column:this.transformNode(t.column),dataType:this.transformNode(t.dataType),dataTypeExpression:this.transformNode(t.dataTypeExpression),setDefault:this.transformNode(t.setDefault),dropDefault:t.dropDefault,setNotNull:t.setNotNull,dropNotNull:t.dropNotNull}}transformModifyColumn(t){return{kind:"ModifyColumnNode",column:this.transformNode(t.column)}}transformAddConstraint(t){return{kind:"AddConstraintNode",constraint:this.transformNode(t.constraint)}}transformDropConstraint(t){return{kind:"DropConstraintNode",constraintName:this.transformNode(t.constraintName),ifExists:t.ifExists,modifier:t.modifier}}transformCreateView(t){return{kind:"CreateViewNode",name:this.transformNode(t.name),temporary:t.temporary,orReplace:t.orReplace,ifNotExists:t.ifNotExists,materialized:t.materialized,columns:this.transformNodeList(t.columns),as:this.transformNode(t.as)}}transformDropView(t){return{kind:"DropViewNode",name:this.transformNode(t.name),ifExists:t.ifExists,materialized:t.materialized,cascade:t.cascade}}transformGenerated(t){return{kind:"GeneratedNode",byDefault:t.byDefault,always:t.always,identity:t.identity,stored:t.stored,expression:this.transformNode(t.expression)}}transformDefaultValue(t){return{kind:"DefaultValueNode",defaultValue:this.transformNode(t.defaultValue)}}transformOn(t){return{kind:"OnNode",on:this.transformNode(t.on)}}transformSelectModifier(t){return{kind:"SelectModifierNode",modifier:t.modifier,rawModifier:this.transformNode(t.rawModifier),of:this.transformNodeList(t.of)}}transformCreateType(t){return{kind:"CreateTypeNode",name:this.transformNode(t.name),enum:this.transformNode(t.enum)}}transformDropType(t){return{kind:"DropTypeNode",name:this.transformNode(t.name),ifExists:t.ifExists}}transformExplain(t){return{kind:"ExplainNode",format:t.format,options:this.transformNode(t.options)}}transformSchemableIdentifier(t){return{kind:"SchemableIdentifierNode",schema:this.transformNode(t.schema),identifier:this.transformNode(t.identifier)}}transformAggregateFunction(t){return{kind:"AggregateFunctionNode",aggregated:this.transformNodeList(t.aggregated),distinct:t.distinct,orderBy:this.transformNode(t.orderBy),filter:this.transformNode(t.filter),func:t.func,over:this.transformNode(t.over)}}transformOver(t){return{kind:"OverNode",orderBy:this.transformNode(t.orderBy),partitionBy:this.transformNode(t.partitionBy)}}transformPartitionBy(t){return{kind:"PartitionByNode",items:this.transformNodeList(t.items)}}transformPartitionByItem(t){return{kind:"PartitionByItemNode",partitionBy:this.transformNode(t.partitionBy)}}transformBinaryOperation(t){return{kind:"BinaryOperationNode",leftOperand:this.transformNode(t.leftOperand),operator:this.transformNode(t.operator),rightOperand:this.transformNode(t.rightOperand)}}transformUnaryOperation(t){return{kind:"UnaryOperationNode",operator:this.transformNode(t.operator),operand:this.transformNode(t.operand)}}transformUsing(t){return{kind:"UsingNode",tables:this.transformNodeList(t.tables)}}transformFunction(t){return{kind:"FunctionNode",func:t.func,arguments:this.transformNodeList(t.arguments)}}transformCase(t){return{kind:"CaseNode",value:this.transformNode(t.value),when:this.transformNodeList(t.when),else:this.transformNode(t.else),isStatement:t.isStatement}}transformWhen(t){return{kind:"WhenNode",condition:this.transformNode(t.condition),result:this.transformNode(t.result)}}transformJSONReference(t){return{kind:"JSONReferenceNode",reference:this.transformNode(t.reference),traversal:this.transformNode(t.traversal)}}transformJSONPath(t){return{kind:"JSONPathNode",inOperator:this.transformNode(t.inOperator),pathLegs:this.transformNodeList(t.pathLegs)}}transformJSONPathLeg(t){return{kind:"JSONPathLegNode",type:t.type,value:t.value}}transformJSONOperatorChain(t){return{kind:"JSONOperatorChainNode",operator:this.transformNode(t.operator),values:this.transformNodeList(t.values)}}transformTuple(t){return{kind:"TupleNode",values:this.transformNodeList(t.values)}}transformMergeQuery(t){return{kind:"MergeQueryNode",into:this.transformNode(t.into),using:this.transformNode(t.using),whens:this.transformNodeList(t.whens),with:this.transformNode(t.with),top:this.transformNode(t.top),endModifiers:this.transformNodeList(t.endModifiers),output:this.transformNode(t.output)}}transformMatched(t){return{kind:"MatchedNode",not:t.not,bySource:t.bySource}}transformAddIndex(t){return{kind:"AddIndexNode",name:this.transformNode(t.name),columns:this.transformNodeList(t.columns),unique:t.unique,using:this.transformNode(t.using),ifNotExists:t.ifNotExists}}transformCast(t){return{kind:"CastNode",expression:this.transformNode(t.expression),dataType:this.transformNode(t.dataType)}}transformFetch(t){return{kind:"FetchNode",rowCount:this.transformNode(t.rowCount),modifier:t.modifier}}transformTop(t){return{kind:"TopNode",expression:t.expression,modifiers:t.modifiers}}transformOutput(t){return{kind:"OutputNode",selections:this.transformNodeList(t.selections)}}transformDataType(t){return t}transformSelectAll(t){return t}transformIdentifier(t){return t}transformValue(t){return t}transformPrimitiveValueList(t){return t}transformOperator(t){return t}transformDefaultInsertValue(t){return t}}jw=new WeakMap;const mue=Z({AlterTableNode:!0,CreateIndexNode:!0,CreateSchemaNode:!0,CreateTableNode:!0,CreateTypeNode:!0,CreateViewNode:!0,DeleteQueryNode:!0,DropIndexNode:!0,DropSchemaNode:!0,DropTableNode:!0,DropTypeNode:!0,DropViewNode:!0,InsertQueryNode:!0,RawNode:!0,SelectQueryNode:!0,UpdateQueryNode:!0,MergeQueryNode:!0}),pue={json_agg:!0,to_json:!0};var rh,ku,Mu,Cn,UC,cB,uB,dB,kf,qC,fB;class gue extends hue{constructor(n){super();Fe(this,Cn);Fe(this,rh);Fe(this,ku,new Set);Fe(this,Mu,new Set);Be(this,rh,n)}transformNodeImpl(n){if(!ot(this,Cn,cB).call(this,n))return super.transformNodeImpl(n);const r=ot(this,Cn,dB).call(this,n);for(const o of r)Y(this,Mu).add(o);const s=ot(this,Cn,uB).call(this,n);for(const o of s)Y(this,ku).add(o);const i=super.transformNodeImpl(n);for(const o of s)Y(this,ku).delete(o);for(const o of r)Y(this,Mu).delete(o);return i}transformSchemableIdentifier(n){const r=super.transformSchemableIdentifier(n);return r.schema||!Y(this,ku).has(n.identifier.name)?r:{...r,schema:Ts.create(Y(this,rh))}}transformReferences(n){const r=super.transformReferences(n);return r.table.table.schema?r:{...r,table:dc.createWithSchema(Y(this,rh),r.table.table.identifier.name)}}transformAggregateFunction(n){return{...super.transformAggregateFunction({...n,aggregated:[]}),aggregated:ot(this,Cn,UC).call(this,n,"aggregated")}}transformFunction(n){return{...super.transformFunction({...n,arguments:[]}),arguments:ot(this,Cn,UC).call(this,n,"arguments")}}}rh=new WeakMap,ku=new WeakMap,Mu=new WeakMap,Cn=new WeakSet,UC=function(n,r){return pue[n.func]?n[r].map(s=>!dc.is(s)||s.table.schema?this.transformNode(s):{...s,table:this.transformIdentifier(s.table.identifier)}):this.transformNodeList(n[r])},cB=function(n){return n.kind in mue},uB=function(n){const r=new Set;if("name"in n&&n.name&&LC.is(n.name)&&ot(this,Cn,qC).call(this,n.name,r),"from"in n&&n.from)for(const s of n.from.froms)ot(this,Cn,kf).call(this,s,r);if("into"in n&&n.into&&ot(this,Cn,kf).call(this,n.into,r),"table"in n&&n.table&&ot(this,Cn,kf).call(this,n.table,r),"joins"in n&&n.joins)for(const s of n.joins)ot(this,Cn,kf).call(this,s.table,r);return"using"in n&&n.using&&ot(this,Cn,kf).call(this,n.using,r),r},dB=function(n){const r=new Set;return"with"in n&&n.with&&ot(this,Cn,fB).call(this,n.with,r),r},kf=function(n,r){const s=dc.is(n)?n:Lc.is(n)&&dc.is(n.node)?n.node:null;s&&ot(this,Cn,qC).call(this,s.table,r)},qC=function(n,r){const s=n.identifier.name;!Y(this,ku).has(s)&&!Y(this,Mu).has(s)&&r.add(s)},fB=function(n,r){for(const s of n.expressions){const i=s.name.table.table.identifier.name;Y(this,Mu).has(i)||r.add(i)}};var vy;class yue{constructor(t){Fe(this,vy);Be(this,vy,new gue(t))}transformQuery(t){return Y(this,vy).transformNode(t.node)}async transformResult(t){return t.result}}vy=new WeakMap;var xy,sh,ih;class S6{constructor(){Fe(this,xy);Fe(this,sh);Fe(this,ih);K(this,"resolve",t=>{Y(this,sh)&&Y(this,sh).call(this,t)});K(this,"reject",t=>{Y(this,ih)&&Y(this,ih).call(this,t)});Be(this,xy,new Promise((t,n)=>{Be(this,ih,n),Be(this,sh,t)}))}get promise(){return Y(this,xy)}}xy=new WeakMap,sh=new WeakMap,ih=new WeakMap;const E6=new Set;function bue(e){E6.has(e)||(E6.add(e),console.log(e))}const vue=Z([]);var Iu,wy,HC;class xue{constructor(t=vue){Fe(this,wy);Fe(this,Iu);Be(this,Iu,t)}get plugins(){return Y(this,Iu)}transformQuery(t,n){for(const r of Y(this,Iu)){const s=r.transformQuery({node:t,queryId:n});if(s.kind===t.kind)t=s;else throw new Error(["KyselyPlugin.transformQuery must return a node","of the same kind that was given to it.",`The plugin was given a ${t.kind}`,`but it returned a ${s.kind}`].join(" "))}return t}async executeQuery(t,n){return await this.provideConnection(async r=>{const s=await r.executeQuery(t),i=await ot(this,wy,HC).call(this,s,n);return wue(s,i),i})}async*stream(t,n,r){const s=new S6,i=new S6;this.provideConnection(async a=>(s.resolve(a),await i.promise)).catch(a=>s.reject(a));const o=await s.promise;try{for await(const a of o.streamQuery(t,n))yield await ot(this,wy,HC).call(this,a,r)}finally{i.resolve()}}}Iu=new WeakMap,wy=new WeakSet,HC=async function(t,n){for(const r of Y(this,Iu))t=await r.transformResult({result:t,queryId:n});return t};function wue(e,t){const{numAffectedRows:n}=e;n===void 0&&e.numUpdatedOrDeletedRows===void 0||n!==void 0&&t.numAffectedRows!==void 0||bue("kysely:warning: outdated driver/plugin detected! QueryResult.numUpdatedOrDeletedRows is deprecated and will be removed in a future release.")}class Bf extends xue{get adapter(){throw new Error("this query cannot be compiled to SQL")}compileQuery(){throw new Error("this query cannot be compiled to SQL")}provideConnection(){throw new Error("this query cannot be executed")}withConnectionProvider(){throw new Error("this query cannot have a connection provider")}withPlugin(t){return new Bf([...this.plugins,t])}withPlugins(t){return new Bf([...this.plugins,...t])}withPluginAtFront(t){return new Bf([t,...this.plugins])}withoutPlugins(){return new Bf([])}}const hB=new Bf;function Sue(e,t){return new oB({joinNode:rg.create(e,wx(t))})}function Eue(){return new bx({overNode:VC.create()})}function Ef(e,t){if(t.length===3)return _ue(e,t[0],t[1],t[2]);if(t.length===2)return Nue(e,t[0],t[1]);throw new Error("not implemented")}function Nue(e,t,n){return n(Sue(e,t)).toOperationNode()}function _ue(e,t,n,r){return rg.createWithOn(e,wx(t),Ig(n,"=",r))}const Cue=Z({is(e){return e.kind==="OffsetNode"},create(e){return Z({kind:"OffsetNode",offset:e})}}),Oue=Z({is(e){return e.kind==="GroupByItemNode"},create(e){return Z({kind:"GroupByItemNode",groupBy:e})}});function jue(e){return e=yd(e)?e(j1()):e,kg(e).map(Oue.create)}const Aue=Z({is(e){return e.kind==="SetOperationNode"},create(e,t,n){return Z({kind:"SetOperationNode",operator:e,expression:t,all:n})}});function Nf(e,t,n){return yd(t)&&(t=t(wT())),Sc(t)||(t=[t]),t.map(r=>Aue.create(e,A1(r),n))}var pa;const Aw=class Aw{constructor(t){Fe(this,pa);Be(this,pa,t)}get expressionType(){}as(t){return new xT(this,t)}or(...t){return new WC(cm.create(Y(this,pa),Ki(t)))}and(...t){return new GC(Ec.create(Y(this,pa),Ki(t)))}$castTo(){return new Aw(Y(this,pa))}$notNull(){return new Aw(Y(this,pa))}toOperationNode(){return Y(this,pa)}};pa=new WeakMap;let on=Aw;var oh,ec;class xT{constructor(t,n){Fe(this,oh);Fe(this,ec);Be(this,oh,t),Be(this,ec,n)}get expression(){return Y(this,oh)}get alias(){return Y(this,ec)}toOperationNode(){return Lc.create(Y(this,oh).toOperationNode(),bi(Y(this,ec))?Y(this,ec).toOperationNode():Ts.create(Y(this,ec)))}}oh=new WeakMap,ec=new WeakMap;var Pu;const Tw=class Tw{constructor(t){Fe(this,Pu);Be(this,Pu,t)}get expressionType(){}as(t){return new xT(this,t)}or(...t){return new Tw(cm.create(Y(this,Pu),Ki(t)))}$castTo(){return new Tw(Y(this,Pu))}toOperationNode(){return Mg.create(Y(this,Pu))}};Pu=new WeakMap;let WC=Tw;var Du;const $w=class $w{constructor(t){Fe(this,Du);Be(this,Du,t)}get expressionType(){}as(t){return new xT(this,t)}and(...t){return new $w(Ec.create(Y(this,Du),Ki(t)))}$castTo(){return new $w(Y(this,Du))}toOperationNode(){return Mg.create(Y(this,Du))}};Du=new WeakMap;let GC=$w;const Tue={is(e){return e.kind==="FetchNode"},create(e,t){return{kind:"FetchNode",rowCount:_c.create(e),modifier:t}}};function $ue(e,t){if(!mT(e)&&!QF(e))throw new Error(`Invalid fetch row count: ${e}`);if(!Rue(t))throw new Error(`Invalid fetch modifier: ${t}`);return Tue.create(e,t)}function Rue(e){return e==="only"||e==="with ties"}var $e;const ht=class ht{constructor(t){Fe(this,$e);Be(this,$e,Z(t))}get expressionType(){}get isSelectQueryBuilder(){return!0}where(...t){return new ht({...Y(this,$e),queryNode:sr.cloneWithWhere(Y(this,$e).queryNode,Ki(t))})}whereRef(t,n,r){return new ht({...Y(this,$e),queryNode:sr.cloneWithWhere(Y(this,$e).queryNode,Ig(t,n,r))})}having(...t){return new ht({...Y(this,$e),queryNode:ln.cloneWithHaving(Y(this,$e).queryNode,Ki(t))})}havingRef(t,n,r){return new ht({...Y(this,$e),queryNode:ln.cloneWithHaving(Y(this,$e).queryNode,Ig(t,n,r))})}select(t){return new ht({...Y(this,$e),queryNode:ln.cloneWithSelections(Y(this,$e).queryNode,aB(t))})}distinctOn(t){return new ht({...Y(this,$e),queryNode:ln.cloneWithDistinctOn(Y(this,$e).queryNode,kg(t))})}modifyFront(t){return new ht({...Y(this,$e),queryNode:ln.cloneWithFrontModifier(Y(this,$e).queryNode,oa.createWithExpression(t.toOperationNode()))})}modifyEnd(t){return new ht({...Y(this,$e),queryNode:sr.cloneWithEndModifier(Y(this,$e).queryNode,oa.createWithExpression(t.toOperationNode()))})}distinct(){return new ht({...Y(this,$e),queryNode:ln.cloneWithFrontModifier(Y(this,$e).queryNode,oa.create("Distinct"))})}forUpdate(t){return new ht({...Y(this,$e),queryNode:sr.cloneWithEndModifier(Y(this,$e).queryNode,oa.create("ForUpdate",t?Hb(t).map(Vi):void 0))})}forShare(t){return new ht({...Y(this,$e),queryNode:sr.cloneWithEndModifier(Y(this,$e).queryNode,oa.create("ForShare",t?Hb(t).map(Vi):void 0))})}forKeyShare(t){return new ht({...Y(this,$e),queryNode:sr.cloneWithEndModifier(Y(this,$e).queryNode,oa.create("ForKeyShare",t?Hb(t).map(Vi):void 0))})}forNoKeyUpdate(t){return new ht({...Y(this,$e),queryNode:sr.cloneWithEndModifier(Y(this,$e).queryNode,oa.create("ForNoKeyUpdate",t?Hb(t).map(Vi):void 0))})}skipLocked(){return new ht({...Y(this,$e),queryNode:sr.cloneWithEndModifier(Y(this,$e).queryNode,oa.create("SkipLocked"))})}noWait(){return new ht({...Y(this,$e),queryNode:sr.cloneWithEndModifier(Y(this,$e).queryNode,oa.create("NoWait"))})}selectAll(t){return new ht({...Y(this,$e),queryNode:ln.cloneWithSelections(Y(this,$e).queryNode,lB(t))})}innerJoin(...t){return new ht({...Y(this,$e),queryNode:sr.cloneWithJoin(Y(this,$e).queryNode,Ef("InnerJoin",t))})}leftJoin(...t){return new ht({...Y(this,$e),queryNode:sr.cloneWithJoin(Y(this,$e).queryNode,Ef("LeftJoin",t))})}rightJoin(...t){return new ht({...Y(this,$e),queryNode:sr.cloneWithJoin(Y(this,$e).queryNode,Ef("RightJoin",t))})}fullJoin(...t){return new ht({...Y(this,$e),queryNode:sr.cloneWithJoin(Y(this,$e).queryNode,Ef("FullJoin",t))})}innerJoinLateral(...t){return new ht({...Y(this,$e),queryNode:sr.cloneWithJoin(Y(this,$e).queryNode,Ef("LateralInnerJoin",t))})}leftJoinLateral(...t){return new ht({...Y(this,$e),queryNode:sr.cloneWithJoin(Y(this,$e).queryNode,Ef("LateralLeftJoin",t))})}orderBy(...t){return new ht({...Y(this,$e),queryNode:ln.cloneWithOrderByItems(Y(this,$e).queryNode,gT(t))})}groupBy(t){return new ht({...Y(this,$e),queryNode:ln.cloneWithGroupByItems(Y(this,$e).queryNode,jue(t))})}limit(t){return new ht({...Y(this,$e),queryNode:ln.cloneWithLimit(Y(this,$e).queryNode,cue.create(Vr(t)))})}offset(t){return new ht({...Y(this,$e),queryNode:ln.cloneWithOffset(Y(this,$e).queryNode,Cue.create(Vr(t)))})}fetch(t,n="only"){return new ht({...Y(this,$e),queryNode:ln.cloneWithFetch(Y(this,$e).queryNode,$ue(t,n))})}top(t,n){return new ht({...Y(this,$e),queryNode:sr.cloneWithTop(Y(this,$e).queryNode,aue(t,n))})}union(t){return new ht({...Y(this,$e),queryNode:ln.cloneWithSetOperations(Y(this,$e).queryNode,Nf("union",t,!1))})}unionAll(t){return new ht({...Y(this,$e),queryNode:ln.cloneWithSetOperations(Y(this,$e).queryNode,Nf("union",t,!0))})}intersect(t){return new ht({...Y(this,$e),queryNode:ln.cloneWithSetOperations(Y(this,$e).queryNode,Nf("intersect",t,!1))})}intersectAll(t){return new ht({...Y(this,$e),queryNode:ln.cloneWithSetOperations(Y(this,$e).queryNode,Nf("intersect",t,!0))})}except(t){return new ht({...Y(this,$e),queryNode:ln.cloneWithSetOperations(Y(this,$e).queryNode,Nf("except",t,!1))})}exceptAll(t){return new ht({...Y(this,$e),queryNode:ln.cloneWithSetOperations(Y(this,$e).queryNode,Nf("except",t,!0))})}as(t){return new mB(this,t)}clearSelect(){return new ht({...Y(this,$e),queryNode:ln.cloneWithoutSelections(Y(this,$e).queryNode)})}clearWhere(){return new ht({...Y(this,$e),queryNode:sr.cloneWithoutWhere(Y(this,$e).queryNode)})}clearLimit(){return new ht({...Y(this,$e),queryNode:ln.cloneWithoutLimit(Y(this,$e).queryNode)})}clearOffset(){return new ht({...Y(this,$e),queryNode:ln.cloneWithoutOffset(Y(this,$e).queryNode)})}clearOrderBy(){return new ht({...Y(this,$e),queryNode:ln.cloneWithoutOrderBy(Y(this,$e).queryNode)})}clearGroupBy(){return new ht({...Y(this,$e),queryNode:ln.cloneWithoutGroupBy(Y(this,$e).queryNode)})}$call(t){return t(this)}$if(t,n){return t?n(this):new ht({...Y(this,$e)})}$castTo(){return new ht(Y(this,$e))}$narrowType(){return new ht(Y(this,$e))}$assertType(){return new ht(Y(this,$e))}$asTuple(){return new on(this.toOperationNode())}withPlugin(t){return new ht({...Y(this,$e),executor:Y(this,$e).executor.withPlugin(t)})}toOperationNode(){return Y(this,$e).executor.transformQuery(Y(this,$e).queryNode,Y(this,$e).queryId)}compile(){return Y(this,$e).executor.compileQuery(this.toOperationNode(),Y(this,$e).queryId)}async execute(){const t=this.compile();return(await Y(this,$e).executor.executeQuery(t,Y(this,$e).queryId)).rows}async executeTakeFirst(){const[t]=await this.execute();return t}async executeTakeFirstOrThrow(t=sue){const n=await this.executeTakeFirst();if(n===void 0)throw iue(t)?new t(this.toOperationNode()):t(this.toOperationNode());return n}async*stream(t=100){const n=this.compile(),r=Y(this,$e).executor.stream(n,t,Y(this,$e).queryId);for await(const s of r)yield*s.rows}async explain(t,n){return await new ht({...Y(this,$e),queryNode:sr.cloneWithExplain(Y(this,$e).queryNode,t,n)}).execute()}};$e=new WeakMap;let vx=ht;bd(vx,"don't await SelectQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");function kue(e){return new vx(e)}var ah,lh;class mB{constructor(t,n){Fe(this,ah);Fe(this,lh);Be(this,ah,t),Be(this,lh,n)}get expression(){return Y(this,ah)}get alias(){return Y(this,lh)}get isAliasedSelectQueryBuilder(){return!0}toOperationNode(){return Lc.create(Y(this,ah).toOperationNode(),Ts.create(Y(this,lh)))}}ah=new WeakMap,lh=new WeakMap;bd(mB,"don't await AliasedSelectQueryBuilder instances directly. AliasedSelectQueryBuilder should never be executed directly since it's always a part of another query.");const Kl=Z({is(e){return e.kind==="AggregateFunctionNode"},create(e,t=[]){return Z({kind:"AggregateFunctionNode",func:e,aggregated:t})},cloneWithDistinct(e){return Z({...e,distinct:!0})},cloneWithOrderBy(e,t){return Z({...e,orderBy:e.orderBy?Cc.cloneWithItems(e.orderBy,t):Cc.create(t)})},cloneWithFilter(e,t){return Z({...e,filter:e.filter?Ff.cloneWithOperation(e.filter,"And",t):Ff.create(t)})},cloneWithOrFilter(e,t){return Z({...e,filter:e.filter?Ff.cloneWithOperation(e.filter,"Or",t):Ff.create(t)})},cloneWithOver(e,t){return Z({...e,over:t})}}),N6=Z({is(e){return e.kind==="FunctionNode"},create(e,t){return Z({kind:"FunctionNode",func:e,arguments:t})}});var pr;const ha=class ha{constructor(t){Fe(this,pr);Be(this,pr,Z(t))}get expressionType(){}as(t){return new Mue(this,t)}distinct(){return new ha({...Y(this,pr),aggregateFunctionNode:Kl.cloneWithDistinct(Y(this,pr).aggregateFunctionNode)})}orderBy(t,n){return new ha({...Y(this,pr),aggregateFunctionNode:Kl.cloneWithOrderBy(Y(this,pr).aggregateFunctionNode,gT([t,n]))})}filterWhere(...t){return new ha({...Y(this,pr),aggregateFunctionNode:Kl.cloneWithFilter(Y(this,pr).aggregateFunctionNode,Ki(t))})}filterWhereRef(t,n,r){return new ha({...Y(this,pr),aggregateFunctionNode:Kl.cloneWithFilter(Y(this,pr).aggregateFunctionNode,Ig(t,n,r))})}over(t){const n=Eue();return new ha({...Y(this,pr),aggregateFunctionNode:Kl.cloneWithOver(Y(this,pr).aggregateFunctionNode,(t?t(n):n).toOperationNode())})}$call(t){return t(this)}$castTo(){return new ha(Y(this,pr))}$notNull(){return new ha(Y(this,pr))}toOperationNode(){return Y(this,pr).aggregateFunctionNode}};pr=new WeakMap;let Jf=ha;bd(Jf,"don't await AggregateFunctionBuilder instances. They are never executed directly and are always just a part of a query.");var ch,uh;class Mue{constructor(t,n){Fe(this,ch);Fe(this,uh);Be(this,ch,t),Be(this,uh,n)}get expression(){return Y(this,ch)}get alias(){return Y(this,uh)}toOperationNode(){return Lc.create(Y(this,ch).toOperationNode(),Ts.create(Y(this,uh)))}}ch=new WeakMap,uh=new WeakMap;function Iue(){const e=(n,r)=>new on(N6.create(n,kg(r??[]))),t=(n,r)=>new Jf({aggregateFunctionNode:Kl.create(n,r?kg(r):void 0)});return Object.assign(e,{agg:t,avg(n){return t("avg",[n])},coalesce(...n){return e("coalesce",n)},count(n){return t("count",[n])},countAll(n){return new Jf({aggregateFunctionNode:Kl.create("count",lB(n))})},max(n){return t("max",[n])},min(n){return t("min",[n])},sum(n){return t("sum",[n])},any(n){return e("any",[n])},jsonAgg(n){return new Jf({aggregateFunctionNode:Kl.create("json_agg",[Ro(n)?Vi(n):n.toOperationNode()])})},toJson(n){return new on(N6.create("to_json",[Ro(n)?Vi(n):n.toOperationNode()]))}})}const Pue=Z({is(e){return e.kind==="UnaryOperationNode"},create(e,t){return Z({kind:"UnaryOperationNode",operator:e,operand:t})}});function Due(e,t){return Pue.create(nd.create(e),Zs(t))}const Oa=Z({is(e){return e.kind==="CaseNode"},create(e){return Z({kind:"CaseNode",value:e})},cloneWithWhen(e,t){return Z({...e,when:Z(e.when?[...e.when,t]:[t])})},cloneWithThen(e,t){return Z({...e,when:e.when?Z([...e.when.slice(0,-1),O1.cloneWithResult(e.when[e.when.length-1],t)]):void 0})},cloneWith(e,t){return Z({...e,...t})}});var dh;class Lue{constructor(t){Fe(this,dh);Be(this,dh,Z(t))}when(...t){return new pB({...Y(this,dh),node:Oa.cloneWithWhen(Y(this,dh).node,O1.create(Ki(t)))})}}dh=new WeakMap;var fh;class pB{constructor(t){Fe(this,fh);Be(this,fh,Z(t))}then(t){return new Fue({...Y(this,fh),node:Oa.cloneWithThen(Y(this,fh).node,yT(t)?bT(t):Vr(t))})}}fh=new WeakMap;var yo;class Fue{constructor(t){Fe(this,yo);Be(this,yo,Z(t))}when(...t){return new pB({...Y(this,yo),node:Oa.cloneWithWhen(Y(this,yo).node,O1.create(Ki(t)))})}else(t){return new Bue({...Y(this,yo),node:Oa.cloneWith(Y(this,yo).node,{else:yT(t)?bT(t):Vr(t)})})}end(){return new on(Oa.cloneWith(Y(this,yo).node,{isStatement:!1}))}endCase(){return new on(Oa.cloneWith(Y(this,yo).node,{isStatement:!0}))}}yo=new WeakMap;var hh;class Bue{constructor(t){Fe(this,hh);Be(this,hh,Z(t))}end(){return new on(Oa.cloneWith(Y(this,hh).node,{isStatement:!1}))}endCase(){return new on(Oa.cloneWith(Y(this,hh).node,{isStatement:!0}))}}hh=new WeakMap;const _6=Z({is(e){return e.kind==="JSONPathLegNode"},create(e,t){return Z({kind:"JSONPathLegNode",type:e,value:t})}});var bo,Sy,JC;class YC{constructor(t){Fe(this,Sy);Fe(this,bo);Be(this,bo,t)}at(t){return ot(this,Sy,JC).call(this,"ArrayLocation",t)}key(t){return ot(this,Sy,JC).call(this,"Member",t)}}bo=new WeakMap,Sy=new WeakSet,JC=function(t,n){return gx.is(Y(this,bo))?new xx(gx.cloneWithTraversal(Y(this,bo),sg.is(Y(this,bo).traversal)?sg.cloneWithLeg(Y(this,bo).traversal,_6.create(t,n)):rB.cloneWithValue(Y(this,bo).traversal,_c.createImmediate(n)))):new xx(sg.cloneWithLeg(Y(this,bo),_6.create(t,n)))};var Lu;const Rw=class Rw extends YC{constructor(n){super(n);Fe(this,Lu);Be(this,Lu,n)}get expressionType(){}as(n){return new zue(this,n)}$castTo(){return new Rw(Y(this,Lu))}$notNull(){return new Rw(Y(this,Lu))}toOperationNode(){return Y(this,Lu)}};Lu=new WeakMap;let xx=Rw;var mh,tc;class zue{constructor(t,n){Fe(this,mh);Fe(this,tc);Be(this,mh,t),Be(this,tc,n)}get expression(){return Y(this,mh)}get alias(){return Y(this,tc)}toOperationNode(){return Lc.create(Y(this,mh).toOperationNode(),bi(Y(this,tc))?Y(this,tc).toOperationNode():Ts.create(Y(this,tc)))}}mh=new WeakMap,tc=new WeakMap;const C6=Z({is(e){return e.kind==="TupleNode"},create(e){return Z({kind:"TupleNode",values:Z(e)})}}),Vue=["varchar","char","text","integer","int2","int4","int8","smallint","bigint","boolean","real","double precision","float4","float8","decimal","numeric","binary","bytea","date","datetime","time","timetz","timestamp","timestamptz","serial","bigserial","uuid","json","jsonb","blob","varbinary","int4range","int4multirange","int8range","int8multirange","numrange","nummultirange","tsrange","tsmultirange","tstzrange","tstzmultirange","daterange","datemultirange"],Uue=[/^varchar\(\d+\)$/,/^char\(\d+\)$/,/^decimal\(\d+, \d+\)$/,/^numeric\(\d+, \d+\)$/,/^binary\(\d+\)$/,/^datetime\(\d+\)$/,/^time\(\d+\)$/,/^timetz\(\d+\)$/,/^timestamp\(\d+\)$/,/^timestamptz\(\d+\)$/,/^varbinary\(\d+\)$/],que=Z({is(e){return e.kind==="DataTypeNode"},create(e){return Z({kind:"DataTypeNode",dataType:e})}});function Hue(e){return!!(Vue.includes(e)||Uue.some(t=>t.test(e)))}function Wue(e){if(bi(e))return e.toOperationNode();if(Hue(e))return que.create(e);throw new Error(`invalid column data type ${JSON.stringify(e)}`)}const Gue=Z({is(e){return e.kind==="CastNode"},create(e,t){return Z({kind:"CastNode",expression:e,dataType:t})}});function wT(e=hB){function t(s,i,o){return new on(vT(s,i,o))}function n(s,i){return new on(Due(s,i))}const r=Object.assign(t,{fn:void 0,eb:void 0,selectFrom(s){return kue({queryId:ua(),executor:e,queryNode:ln.createFrom(Yue(s))})},case(s){return new Lue({node:Oa.create(px(s)?void 0:Zs(s))})},ref(s,i){return px(i)?new on(Nc(s)):new YC(Vce(s,i))},jsonPath(){return new YC(sg.create())},table(s){return new on(Vi(s))},val(s){return new on(Vr(s))},refTuple(...s){return new on(C6.create(s.map(Zs)))},tuple(...s){return new on(C6.create(s.map(Vr)))},lit(s){return new on(bT(s))},unary:n,not(s){return n("not",s)},exists(s){return n("exists",s)},neg(s){return n("-",s)},between(s,i,o){return new on(jh.create(Zs(s),nd.create("between"),Ec.create(Vr(i),Vr(o))))},betweenSymmetric(s,i,o){return new on(jh.create(Zs(s),nd.create("between symmetric"),Ec.create(Vr(i),Vr(o))))},and(s){return Sc(s)?new on(BC(s,"and")):new on(d6(s,"and"))},or(s){return Sc(s)?new on(BC(s,"or")):new on(d6(s,"or"))},parens(...s){const i=Ki(s);return Mg.is(i)?new on(i):new on(Mg.create(i))},cast(s,i){return new on(Gue.create(Zs(s),Wue(i)))},withSchema(s){return wT(e.withPluginAtFront(new yue(s)))}});return r.fn=Iue(),r.eb=r,r}function j1(e){return wT()}function A1(e){if(bi(e))return e.toOperationNode();if(yd(e))return e(j1()).toOperationNode();throw new Error(`invalid expression: ${JSON.stringify(e)}`)}function gB(e){if(bi(e))return e.toOperationNode();if(yd(e))return e(j1()).toOperationNode();throw new Error(`invalid aliased expression: ${JSON.stringify(e)}`)}function T1(e){return $ce(e)||Rce(e)||yd(e)}function Yue(e){return Sc(e)?e.map(t=>wx(t)):[wx(e)]}function wx(e){return Ro(e)?Jue(e):gB(e)}function Jue(e){const t=" as ";if(e.includes(t)){const[n,r]=e.split(t).map(yB);return Lc.create(Vi(n),Ts.create(r))}else return Vi(e)}function Vi(e){const t=".";if(e.includes(t)){const[n,r]=e.split(t).map(yB);return dc.createWithSchema(n,r)}else return dc.create(e)}function yB(e){return e.trim()}var Pr,ai,Iv,XC,KC;const Sg=class Sg{constructor(t){Fe(this,ai);Fe(this,Pr);Be(this,Pr,Z(t))}get expressionType(){}get isRawBuilder(){return!0}as(t){return new bB(this,t)}$castTo(){return new Sg({...Y(this,Pr)})}$notNull(){return new Sg(Y(this,Pr))}withPlugin(t){return new Sg({...Y(this,Pr),plugins:Y(this,Pr).plugins!==void 0?Z([...Y(this,Pr).plugins,t]):Z([t])})}toOperationNode(){return ot(this,ai,XC).call(this,ot(this,ai,Iv).call(this))}compile(t){return ot(this,ai,KC).call(this,ot(this,ai,Iv).call(this,t))}async execute(t){const n=ot(this,ai,Iv).call(this,t);return n.executeQuery(ot(this,ai,KC).call(this,n),Y(this,Pr).queryId)}};Pr=new WeakMap,ai=new WeakSet,Iv=function(t){const n=t!==void 0?t.getExecutor():hB;return Y(this,Pr).plugins!==void 0?n.withPlugins(Y(this,Pr).plugins):n},XC=function(t){return t.transformQuery(Y(this,Pr).rawNode,Y(this,Pr).queryId)},KC=function(t){return t.compileQuery(ot(this,ai,XC).call(this,t),Y(this,Pr).queryId)};let Sx=Sg;function Ml(e){return new Sx(e)}bd(Sx,"don't await RawBuilder instances directly. To execute the query you need to call `execute`");var Fu,nc;class bB{constructor(t,n){Fe(this,Fu);Fe(this,nc);Be(this,Fu,t),Be(this,nc,n)}get expression(){return Y(this,Fu)}get alias(){return Y(this,nc)}get rawBuilder(){return Y(this,Fu)}toOperationNode(){return Lc.create(Y(this,Fu).toOperationNode(),bi(Y(this,nc))?Y(this,nc).toOperationNode():Ts.create(Y(this,nc)))}}Fu=new WeakMap,nc=new WeakMap;bd(bB,"don't await AliasedRawBuilder instances directly. AliasedRawBuilder should never be executed directly since it's always a part of another query.");const Pg=Object.assign((e,...t)=>Ml({queryId:ua(),rawNode:Es.create(e,(t==null?void 0:t.map(O6))??[])}),{ref(e){return Ml({queryId:ua(),rawNode:Es.createWithChild(Nc(e))})},val(e){return Ml({queryId:ua(),rawNode:Es.createWithChild(Vr(e))})},value(e){return this.val(e)},table(e){return Ml({queryId:ua(),rawNode:Es.createWithChild(Vi(e))})},id(...e){const t=new Array(e.length+1).fill(".");return t[0]="",t[t.length-1]="",Ml({queryId:ua(),rawNode:Es.create(t,e.map(Ts.create))})},lit(e){return Ml({queryId:ua(),rawNode:Es.createWithChild(_c.createImmediate(e))})},literal(e){return this.lit(e)},raw(e){return Ml({queryId:ua(),rawNode:Es.createWithSql(e)})},join(e,t=Pg`, `){const n=new Array(2*e.length-1),r=t.toOperationNode();for(let s=0;s<e.length;++s)n[2*s]=O6(e[s]),s!==e.length-1&&(n[2*s+1]=r);return Ml({queryId:ua(),rawNode:Es.createWithChildren(n)})}});function O6(e){return bi(e)?e.toOperationNode():Vr(e)}class Xue{constructor(t=[]){K(this,"plugins");this.plugins=new Set(t)}async transformResultRows(t){let n=t;for(const r of this.plugins)n=(await r.transformResult({queryId:"1",result:{rows:n}})).rows;return n}}const j6=["text","integer","real","blob","date","datetime","timestamp","boolean","json"],A6=Symbol.for("bknd:connection");class vB{constructor(t,n={},r=[]){K(this,"initialized",!1);K(this,"pluginRunner");K(this,"supported",{batching:!1,softscans:!0});K(this,"kysely");K(this,"client");this.fn=n,this.plugins=r,this.kysely=t,this[A6]=!0,this.pluginRunner=new Xue(r)}async init(){this.initialized=!0}static isConnection(t){return t?t[A6]===!0:!1}getIntrospector(){return this.kysely.introspection}supports(t){return this.supported[t]??!1}async ping(){return(await Pg`SELECT 1`.execute(this.kysely)).rows.length>0}async transformResultRows(t){return await this.pluginRunner.transformResultRows(t)}async executeQueries(...t){return Promise.all(t.map(async n=>await this.kysely.executeQuery(n)))}async executeQuery(t){return(await this.executeQueries(t))[0]}getCompiled(...t){return t.map(n=>"compile"in n?n.compile():n)}async withTransformedRows(t,n){return await Promise.all(t.map(async r=>{const s=n??"rows",{[s]:i,...o}=r;return{...o,rows:await this.transformResultRows(i)}}))}validateFieldSpecType(t){if(!j6.includes(t))throw new Error(`Invalid field type "${t}". Allowed types are: ${j6.join(", ")}`);return!0}toDriver(t,n){return t}fromDriver(t,n){return t}async close(){}}class Kue extends As{constructor(){super(...arguments);K(this,"name","UnableToConnectException");K(this,"code",gn.INTERNAL_SERVER_ERROR)}}class Ql extends As{constructor(){super(...arguments);K(this,"name","InvalidSearchParamsException");K(this,"code",gn.UNPROCESSABLE_ENTITY)}}class Que extends As{constructor(){super(...arguments);K(this,"name","TransformRetrieveFailedException");K(this,"code",gn.UNPROCESSABLE_ENTITY)}}class ls extends As{constructor(){super(...arguments);K(this,"name","TransformPersistFailedException");K(this,"code",gn.UNPROCESSABLE_ENTITY)}static invalidType(n,r,s){const i=typeof s=="object"?JSON.stringify(s):s,o=`Property "${n}" must be of type "${r}", "${i}" of type "${typeof s}" given.`;return new ls(o)}static required(n){return new ls(`Property "${n}" is required`)}}class Zue extends As{constructor(n,r,s){console.error("InvalidFieldConfigException",{given:r,error:s.first()});super(`Invalid Field config given for field "${n.name}": ${s.firstToString()}`);K(this,"name","InvalidFieldConfigException");K(this,"code",gn.BAD_REQUEST);this.given=r}}class ede extends As{constructor(n){var t=(...z8e)=>(super(...z8e),K(this,"name","EntityNotDefinedException"),K(this,"code",gn.BAD_REQUEST),this);t(n?`Entity "${typeof n!="string"?n.name:n}" not defined`:"Cannot find an entity that is undefined")}}class xB extends Wr{validate(t){const{entity:n}=this.params;if(!n.isValidData(t,"create"))throw pt.warn("MutatorInsertBefore.validate: invalid",{entity:n.name,data:t}),new N1("EntityData","invalid");return this.clone({entity:n,data:t})}}K(xB,"slug","mutator-insert-before");class wB extends Wr{}K(wB,"slug","mutator-insert-after");class SB extends Wr{validate(t){const{entity:n,entityId:r}=this.params;if(!n.isValidData(t,"update"))throw pt.warn("MutatorUpdateBefore.validate: invalid",{entity:n.name,entityId:r,data:t}),new N1("EntityData","invalid");return this.clone({entityId:r,entity:n,data:t})}}K(SB,"slug","mutator-update-before");class EB extends Wr{}K(EB,"slug","mutator-update-after");class NB extends Wr{}K(NB,"slug","mutator-delete-before");class ST extends Wr{}K(ST,"slug","mutator-delete-after");const Ex={MutatorInsertBefore:xB,MutatorInsertAfter:wB,MutatorUpdateBefore:SB,MutatorUpdateAfter:EB,MutatorDeleteBefore:NB,MutatorDeleteAfter:ST};class _B extends Wr{}K(_B,"slug","repository-find-one-before");class CB extends Wr{}K(CB,"slug","repository-find-one-after");class QC extends Wr{}K(QC,"slug","repository-find-many-before"),K(QC,"another","one");class OB extends Wr{}K(OB,"slug","repository-find-many-after");const jB={RepositoryFindOneBefore:_B,RepositoryFindOneAfter:CB,RepositoryFindManyBefore:QC,RepositoryFindManyAfter:OB};class AB{constructor(t){K(this,"_relations",[]);this._relations=t}get all(){return this._relations}exists(t){return this._relations.some(n=>n.source.entity.name===t.source.entity.name&&n.target.entity.name===t.target.entity.name&&n.type===t.type)}relationsOf(t){return this._relations.filter(n=>n.visibleFrom("source")&&n.source.entity.name===t.name||n.visibleFrom("target")&&n.target.entity.name===t.name)}sourceRelationsOf(t){return this._relations.filter(n=>n.source.entity.name===t.name)}targetRelationsOf(t){return this._relations.filter(n=>n.visibleFrom("target")&&n.target.entity.name===t.name)}listableRelationsOf(t){return this.relationsOf(t).filter(n=>n.isListableFor(t))}relationOf(t,n){return this.relationsOf(t).find(r=>r.target.entity.name===t.name&&r.source.reference===n||r.source.entity.name===t.name&&r.target.reference===n)}hasRelations(t){return this.relationsOf(t).length>0}relatedEntitiesOf(t){return this.relationsOf(t).map(n=>n.other(t).entity)}relationReferencesOf(t){return this.relationsOf(t).map(n=>n.other(t).reference)}}const tde=["create","read","update","delete"],nde=["create","read","update","delete","form","table","submit"],T6=!0,$6=!1,no=We({label:pe(),description:pe(),required:gt({default:!1}),fillable:Qt([gt({title:"Boolean"}),Sn(pe({enum:tde}),{title:"Context",uniqueItems:!0})]),hidden:Qt([gt({title:"Boolean"}),Sn(pe({enum:nde}),{title:"Context",uniqueItems:!0})]),virtual:gt(),default_value:Xi()}).partial();let ro=class{constructor(t,n){K(this,"_required");K(this,"_type");K(this,"name");K(this,"type","field");K(this,"config");this.name=t,this._type,this._required;try{this.config=Un(this.getSchema(),n||{})}catch(r){throw r instanceof E1?new Zue(this,n,r):r}}getType(){return this.type}schema(){return Object.freeze({name:this.name,type:"text",nullable:!0,dflt:void 0})}hasDefault(){return this.config.default_value!==void 0}getDefault(){var t;return(t=this.config)==null?void 0:t.default_value}isFillable(t){return Array.isArray(this.config.fillable)?t?this.config.fillable.includes(t):T6:this.config.fillable??T6}isHidden(t){return Array.isArray(this.config.hidden)?t?this.config.hidden.includes(t):$6:this.config.hidden??$6}isRequired(){var t;return((t=this.config)==null?void 0:t.required)??!1}isVirtual(){return this.config.virtual??!1}getLabel(t){return this.config.label?this.config.label:(t==null?void 0:t.fallback)!==!1?Ch(this.name):void 0}getDescription(){return this.config.description}getValue(t,n){return t}getHtmlConfig(){return{element:"input",props:{type:"text"}}}isValid(t,n){return typeof t<"u"?this.isFillable(n):n==="create"?!this.isRequired():!0}transformRetrieve(t){return t}async transformPersist(t,n,r){if(this.nullish(t)){if(this.isRequired()&&!this.hasDefault())throw ls.required(this.name);return this.getDefault()}return t}toSchemaWrapIfRequired(t){return this.isRequired()?t:t.optional()}nullish(t){return t==null}toJsonSchema(){return this.toSchemaWrapIfRequired(Xi())}toType(){return{required:this.isRequired(),comment:this.getDescription(),type:"any"}}toJSON(){return{type:this.type,config:this.config}}};const TB=We({default_value:gt(),...Ms(no.properties,["default_value"])}).partial();class $B extends ro{constructor(){super(...arguments);K(this,"type","boolean")}getSchema(){return TB}getValue(n,r){switch(r){case"table":return n?"Yes":"No";default:return n}}schema(){return Object.freeze({...super.schema(),type:"boolean"})}getHtmlConfig(){return{...super.getHtmlConfig(),element:"boolean"}}transformRetrieve(n){return typeof n>"u"||n===null?this.isRequired()?!1:this.hasDefault()?this.getDefault():null:typeof n=="string"?n==="1":!!n}async transformPersist(n,r,s){const i=await super.transformPersist(n,r,s);if(this.nullish(i))return this.isRequired()?!!this.config.default_value:void 0;if(typeof i=="number")return i!==0;if(typeof i!="boolean")throw ls.invalidType(this.name,"boolean",i);return i}toJsonSchema(){return this.toSchemaWrapIfRequired(gt({default:this.getDefault()}))}toType(){return{...super.toType(),type:"boolean"}}}const RB=We({type:pe({enum:["date","datetime","week"],default:"date"}),timezone:pe(),min_date:pe(),max_date:pe(),...no.properties}).partial();class ZC extends ro{constructor(){super(...arguments);K(this,"type","date")}getSchema(){return RB}schema(){return Object.freeze({...super.schema(),type:this.config.type==="datetime"?"datetime":"date"})}getHtmlConfig(){const n=this.config.type==="datetime"?"datetime-local":this.config.type;return{...super.getHtmlConfig(),element:"date",props:{type:n}}}parseDateFromString(n){if(this.config.type==="week"&&n.includes("-W")){const[r,s]=n.split("-W").map(i=>Number.parseInt(i,10));return hx().year(r).week(s).toDate()}return new Date(n)}getValue(n,r){if(n===null||!n)return;const s=this.parseDateFromString(n);if(r==="submit")try{return s.toISOString()}catch{return}if(this.config.type==="week")try{return`${s.getFullYear()}-W${hx(s).week()}`}catch(i){pt.warn("DateField.getValue:week error",n,String(i));return}try{const o=new Date().getTimezoneOffset(),a=new Date(s.getTime()-o*6e4);return this.formatDate(a)}catch(i){pt.warn("DateField.getValue error",this.config.type,n,String(i));return}}formatDate(n){switch(this.config.type){case"datetime":return n.toISOString().split(".")[0].replace("T"," ");default:return n.toISOString().split("T")[0]}}transformRetrieve(n){const r=super.transformRetrieve(n);if(r===null)return null;try{return new Date(r)}catch{return null}}async transformPersist(n,r,s){const i=await super.transformPersist(n,r,s);if(this.nullish(i))return i;switch(this.config.type){case"date":case"week":return new Date(i).toISOString().split("T")[0];default:return new Date(i).toISOString()}}toJsonSchema(){return this.toSchemaWrapIfRequired(pe({default:this.getDefault()}))}toType(){return{...super.toType(),type:"Date | string"}}}const kB=We({default_value:pe(),options:Qt([ze({type:ii("strings"),values:Sn(pe())}),ze({type:ii("objects"),values:Sn(ze({label:pe(),value:pe()}))})]),...Ms(no.properties,["default_value"])}).partial();class MB extends ro{constructor(n,r){super(n,r);K(this,"type","enum");if(this.config.default_value&&!this.isValidValue(this.config.default_value))throw new Error(`Default value "${this.config.default_value}" is not a valid option`)}getSchema(){return kB}getOptions(){var r,s;const n=((r=this.config)==null?void 0:r.options)??{type:"strings",values:[]};return n.type==="strings"?(s=n.values)==null?void 0:s.map(i=>({label:i,value:i})):n==null?void 0:n.values}isValidValue(n){return this.getOptions().map(s=>s.value).includes(n)}getValue(n,r){var s;if(!this.isValidValue(n))return this.hasDefault()?this.getDefault():null;switch(r){case"table":return((s=this.getOptions().find(i=>i.value===n))==null?void 0:s.label)??n}return n}transformRetrieve(n){const r=super.transformRetrieve(n);return r===null&&this.hasDefault()?this.getDefault():this.isValidValue(r)?r:this.hasDefault()?this.getDefault():null}async transformPersist(n,r,s){const i=await super.transformPersist(n,r,s);if(this.nullish(i))return i;if(!this.isValidValue(i))throw new ls(`Field "${this.name}" must be one of the following values: ${this.getOptions().map(o=>o.value).join(", ")}`);return i}toJsonSchema(){var s,i;const r=((i=(((s=this.config)==null?void 0:s.options)??{values:[]}).values)==null?void 0:i.map(o=>typeof o=="string"?o:o.value))??[];return this.toSchemaWrapIfRequired(pe({enum:r,default:this.getDefault()}))}toType(){const n=this.getOptions().map(({value:r})=>typeof r=="string"?`"${r}"`:r);return{...super.toType(),type:n.length>0?n.join(" | "):"string"}}}const IB=We({default_value:Xi(),...Ms(no.properties,["default_value"])}).partial();class PB extends ro{constructor(){super(...arguments);K(this,"type","json")}getSchema(){return IB}transformRetrieve(n){const r=super.transformRetrieve(n);return r===null&&this.hasDefault()?this.getDefault():this.isSerialized(r)?JSON.parse(r):r}isSerializable(n){try{const r=JSON.stringify(n);if(r===JSON.stringify(JSON.parse(r)))return!0}catch{}return!1}isSerialized(n){try{if(typeof n=="string")return n===JSON.stringify(JSON.parse(n))}catch{}return!1}getValue(n,r){switch(r){case"form":return n===null?"":JSON.stringify(n,null,2);case"table":return n===null?null:JSON.stringify(n);case"submit":return typeof n=="string"&&n.length===0?null:JSON.parse(n)}return n}async transformPersist(n,r,s){const i=await super.transformPersist(n,r,s);if(this.nullish(i))return i;if(!this.isSerializable(i))throw new ls(`Field "${this.name}" must be serializable to JSON.`);return this.isSerialized(i)?i:JSON.stringify(i)}toType(){return{...super.toType(),type:"any"}}}function og(e,t){const n=typeof e;if(n!==typeof t)return!1;if(Array.isArray(e)){if(!Array.isArray(t))return!1;const r=e.length;if(r!==t.length)return!1;for(let s=0;s<r;s++)if(!og(e[s],t[s]))return!1;return!0}if(n==="object"){if(!e||!t)return e===t;const r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(const o of r)if(!og(e[o],t[o]))return!1;return!0}return e===t}function Ti(e){return encodeURI(rde(e))}function rde(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}const sde={prefixItems:!0,items:!0,allOf:!0,anyOf:!0,oneOf:!0},ide={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependentSchemas:!0},ode={id:!0,$id:!0,$ref:!0,$schema:!0,$anchor:!0,$vocabulary:!0,$comment:!0,default:!0,enum:!0,const:!0,required:!0,type:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};let ade=typeof self<"u"&&self.location&&self.location.origin!=="null"?new URL(self.location.origin+self.location.pathname+location.search):new URL("https://github.com/cfworker");function ju(e,t=Object.create(null),n=ade,r=""){if(e&&typeof e=="object"&&!Array.isArray(e)){const i=e.$id||e.id;if(i){const o=new URL(i,n.href);o.hash.length>1?t[o.href]=e:(o.hash="",r===""?n=o:ju(e,t,n))}}else if(e!==!0&&e!==!1)return t;const s=n.href+(r?"#"+r:"");if(t[s]!==void 0)throw new Error(`Duplicate schema URI "${s}".`);if(t[s]=e,e===!0||e===!1)return t;if(e.__absolute_uri__===void 0&&Object.defineProperty(e,"__absolute_uri__",{enumerable:!1,value:s}),e.$ref&&e.__absolute_ref__===void 0){const i=new URL(e.$ref,n.href);i.hash=i.hash,Object.defineProperty(e,"__absolute_ref__",{enumerable:!1,value:i.href})}if(e.$recursiveRef&&e.__absolute_recursive_ref__===void 0){const i=new URL(e.$recursiveRef,n.href);i.hash=i.hash,Object.defineProperty(e,"__absolute_recursive_ref__",{enumerable:!1,value:i.href})}if(e.$anchor){const i=new URL("#"+e.$anchor,n.href);t[i.href]=e}for(let i in e){if(ode[i])continue;const o=`${r}/${Ti(i)}`,a=e[i];if(Array.isArray(a)){if(sde[i]){const c=a.length;for(let u=0;u<c;u++)ju(a[u],t,n,`${o}/${u}`)}}else if(ide[i])for(let c in a)ju(a[c],t,n,`${o}/${Ti(c)}`);else ju(a,t,n,o)}return t}const lde=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,cde=[0,31,28,31,30,31,30,31,31,30,31,30,31],ude=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,dde=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,fde=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,hde=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,mde=/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u{00a1}-\u{ffff}0-9]+-?)*[a-z\u{00a1}-\u{ffff}0-9]+)(?:\.(?:[a-z\u{00a1}-\u{ffff}0-9]+-?)*[a-z\u{00a1}-\u{ffff}0-9]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,pde=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,gde=/^(?:\/(?:[^~/]|~0|~1)*)*$/,yde=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,bde=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,vde=e=>{if(e[0]==='"')return!1;const[t,n,...r]=e.split("@");return!t||!n||r.length!==0||t.length>64||n.length>253||t[0]==="."||t.endsWith(".")||t.includes("..")||!/^[a-z0-9.-]+$/i.test(n)||!/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+$/i.test(t)?!1:n.split(".").every(s=>/^[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?$/i.test(s))},xde=/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,wde=/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,Sde=e=>e.length>1&&e.length<80&&(/^P\d+([.,]\d+)?W$/.test(e)||/^P[\dYMDTHS]*(\d[.,]\d+)?[YMDHS]$/.test(e)&&/^P([.,\d]+Y)?([.,\d]+M)?([.,\d]+D)?(T([.,\d]+H)?([.,\d]+M)?([.,\d]+S)?)?$/.test(e));function mo(e){return e.test.bind(e)}const R6={date:DB,time:LB.bind(void 0,!1),"date-time":_de,duration:Sde,uri:jde,"uri-reference":mo(fde),"uri-template":mo(hde),url:mo(mde),email:vde,hostname:mo(dde),ipv4:mo(xde),ipv6:mo(wde),regex:Tde,uuid:mo(pde),"json-pointer":mo(gde),"json-pointer-uri-fragment":mo(yde),"relative-json-pointer":mo(bde)};function Ede(e){return e%4===0&&(e%100!==0||e%400===0)}function DB(e){const t=e.match(lde);if(!t)return!1;const n=+t[1],r=+t[2],s=+t[3];return r>=1&&r<=12&&s>=1&&s<=(r==2&&Ede(n)?29:cde[r])}function LB(e,t){const n=t.match(ude);if(!n)return!1;const r=+n[1],s=+n[2],i=+n[3],o=!!n[5];return(r<=23&&s<=59&&i<=59||r==23&&s==59&&i==60)&&(!e||o)}const Nde=/t|\s/i;function _de(e){const t=e.split(Nde);return t.length==2&&DB(t[0])&&LB(!0,t[1])}const Cde=/\/|:/,Ode=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function jde(e){return Cde.test(e)&&Ode.test(e)}const Ade=/[^\\]\\Z/;function Tde(e){if(Ade.test(e))return!1;try{return new RegExp(e,"u"),!0}catch{return!1}}function $de(e){let t=0,n=e.length,r=0,s;for(;r<n;)t++,s=e.charCodeAt(r++),s>=55296&&s<=56319&&r<n&&(s=e.charCodeAt(r),(s&64512)==56320&&r++);return t}function xn(e,t,n="2019-09",r=ju(t),s=!0,i=null,o="#",a="#",c=Object.create(null)){if(t===!0)return{valid:!0,errors:[]};if(t===!1)return{valid:!1,errors:[{instanceLocation:o,keyword:"false",keywordLocation:o,error:"False boolean schema."}]};const u=typeof e;let f;switch(u){case"boolean":case"number":case"string":f=u;break;case"object":e===null?f="null":Array.isArray(e)?f="array":f="object";break;default:throw new Error(`Instances of "${u}" type are not supported.`)}const{$ref:h,$recursiveRef:p,$recursiveAnchor:y,type:v,const:x,enum:E,required:N,not:_,anyOf:C,allOf:j,oneOf:A,if:$,then:k,else:R,format:B,properties:z,patternProperties:D,additionalProperties:L,unevaluatedProperties:H,minProperties:M,maxProperties:V,propertyNames:T,dependentRequired:I,dependentSchemas:P,dependencies:W,prefixItems:F,items:q,additionalItems:X,unevaluatedItems:Q,contains:se,minContains:ae,maxContains:de,minItems:ce,maxItems:fe,uniqueItems:ve,minimum:Ae,maximum:Ce,exclusiveMinimum:Ee,exclusiveMaximum:Re,multipleOf:ke,minLength:He,maxLength:et,pattern:Oe,__absolute_ref__:Me,__absolute_recursive_ref__:Ie}=t,G=[];if(y===!0&&i===null&&(i=t),p==="#"){const te=i===null?r[Ie]:i,he=`${a}/$recursiveRef`,ie=xn(e,i===null?t:i,n,r,s,te,o,he,c);ie.valid||G.push({instanceLocation:o,keyword:"$recursiveRef",keywordLocation:he,error:"A subschema had errors."},...ie.errors)}if(h!==void 0){const he=r[Me||h];if(he===void 0){let le=`Unresolved $ref "${h}".`;throw Me&&Me!==h&&(le+=`  Absolute URI "${Me}".`),le+=`
Known schemas:
- ${Object.keys(r).join(`
- `)}`,new Error(le)}const ie=`${a}/$ref`,ne=xn(e,he,n,r,s,i,o,ie,c);if(ne.valid||G.push({instanceLocation:o,keyword:"$ref",keywordLocation:ie,error:"A subschema had errors."},...ne.errors),n==="4"||n==="7")return{valid:G.length===0,errors:G}}if(Array.isArray(v)){let te=v.length,he=!1;for(let ie=0;ie<te;ie++)if(f===v[ie]||v[ie]==="integer"&&f==="number"&&e%1===0&&e===e){he=!0;break}he||G.push({instanceLocation:o,keyword:"type",keywordLocation:`${a}/type`,error:`Instance type "${f}" is invalid. Expected "${v.join('", "')}".`})}else v==="integer"?(f!=="number"||e%1||e!==e)&&G.push({instanceLocation:o,keyword:"type",keywordLocation:`${a}/type`,error:`Instance type "${f}" is invalid. Expected "${v}".`}):v!==void 0&&f!==v&&G.push({instanceLocation:o,keyword:"type",keywordLocation:`${a}/type`,error:`Instance type "${f}" is invalid. Expected "${v}".`});if(x!==void 0&&(f==="object"||f==="array"?og(e,x)||G.push({instanceLocation:o,keyword:"const",keywordLocation:`${a}/const`,error:`Instance does not match ${JSON.stringify(x)}.`}):e!==x&&G.push({instanceLocation:o,keyword:"const",keywordLocation:`${a}/const`,error:`Instance does not match ${JSON.stringify(x)}.`})),E!==void 0&&(f==="object"||f==="array"?E.some(te=>og(e,te))||G.push({instanceLocation:o,keyword:"enum",keywordLocation:`${a}/enum`,error:`Instance does not match any of ${JSON.stringify(E)}.`}):E.some(te=>e===te)||G.push({instanceLocation:o,keyword:"enum",keywordLocation:`${a}/enum`,error:`Instance does not match any of ${JSON.stringify(E)}.`})),_!==void 0){const te=`${a}/not`;xn(e,_,n,r,s,i,o,te).valid&&G.push({instanceLocation:o,keyword:"not",keywordLocation:te,error:'Instance matched "not" schema.'})}let re=[];if(C!==void 0){const te=`${a}/anyOf`,he=G.length;let ie=!1;for(let ne=0;ne<C.length;ne++){const le=C[ne],xe=Object.create(c),Ne=xn(e,le,n,r,s,y===!0?i:null,o,`${te}/${ne}`,xe);G.push(...Ne.errors),ie=ie||Ne.valid,Ne.valid&&re.push(xe)}ie?G.length=he:G.splice(he,0,{instanceLocation:o,keyword:"anyOf",keywordLocation:te,error:"Instance does not match any subschemas."})}if(j!==void 0){const te=`${a}/allOf`,he=G.length;let ie=!0;for(let ne=0;ne<j.length;ne++){const le=j[ne],xe=Object.create(c),Ne=xn(e,le,n,r,s,y===!0?i:null,o,`${te}/${ne}`,xe);G.push(...Ne.errors),ie=ie&&Ne.valid,Ne.valid&&re.push(xe)}ie?G.length=he:G.splice(he,0,{instanceLocation:o,keyword:"allOf",keywordLocation:te,error:"Instance does not match every subschema."})}if(A!==void 0){const te=`${a}/oneOf`,he=G.length,ie=A.filter((ne,le)=>{const xe=Object.create(c),Ne=xn(e,ne,n,r,s,y===!0?i:null,o,`${te}/${le}`,xe);return G.push(...Ne.errors),Ne.valid&&re.push(xe),Ne.valid}).length;ie===1?G.length=he:G.splice(he,0,{instanceLocation:o,keyword:"oneOf",keywordLocation:te,error:`Instance does not match exactly one subschema (${ie} matches).`})}if((f==="object"||f==="array")&&Object.assign(c,...re),$!==void 0){const te=`${a}/if`;if(xn(e,$,n,r,s,i,o,te,c).valid){if(k!==void 0){const ie=xn(e,k,n,r,s,i,o,`${a}/then`,c);ie.valid||G.push({instanceLocation:o,keyword:"if",keywordLocation:te,error:'Instance does not match "then" schema.'},...ie.errors)}}else if(R!==void 0){const ie=xn(e,R,n,r,s,i,o,`${a}/else`,c);ie.valid||G.push({instanceLocation:o,keyword:"if",keywordLocation:te,error:'Instance does not match "else" schema.'},...ie.errors)}}if(f==="object"){if(N!==void 0)for(const ne of N)ne in e||G.push({instanceLocation:o,keyword:"required",keywordLocation:`${a}/required`,error:`Instance does not have required property "${ne}".`});const te=Object.keys(e);if(M!==void 0&&te.length<M&&G.push({instanceLocation:o,keyword:"minProperties",keywordLocation:`${a}/minProperties`,error:`Instance does not have at least ${M} properties.`}),V!==void 0&&te.length>V&&G.push({instanceLocation:o,keyword:"maxProperties",keywordLocation:`${a}/maxProperties`,error:`Instance does not have at least ${V} properties.`}),T!==void 0){const ne=`${a}/propertyNames`;for(const le in e){const xe=`${o}/${Ti(le)}`,Ne=xn(le,T,n,r,s,i,xe,ne);Ne.valid||G.push({instanceLocation:o,keyword:"propertyNames",keywordLocation:ne,error:`Property name "${le}" does not match schema.`},...Ne.errors)}}if(I!==void 0){const ne=`${a}/dependantRequired`;for(const le in I)if(le in e){const xe=I[le];for(const Ne of xe)Ne in e||G.push({instanceLocation:o,keyword:"dependentRequired",keywordLocation:ne,error:`Instance has "${le}" but does not have "${Ne}".`})}}if(P!==void 0)for(const ne in P){const le=`${a}/dependentSchemas`;if(ne in e){const xe=xn(e,P[ne],n,r,s,i,o,`${le}/${Ti(ne)}`,c);xe.valid||G.push({instanceLocation:o,keyword:"dependentSchemas",keywordLocation:le,error:`Instance has "${ne}" but does not match dependant schema.`},...xe.errors)}}if(W!==void 0){const ne=`${a}/dependencies`;for(const le in W)if(le in e){const xe=W[le];if(Array.isArray(xe))for(const Ne of xe)Ne in e||G.push({instanceLocation:o,keyword:"dependencies",keywordLocation:ne,error:`Instance has "${le}" but does not have "${Ne}".`});else{const Ne=xn(e,xe,n,r,s,i,o,`${ne}/${Ti(le)}`);Ne.valid||G.push({instanceLocation:o,keyword:"dependencies",keywordLocation:ne,error:`Instance has "${le}" but does not match dependant schema.`},...Ne.errors)}}}const he=Object.create(null);let ie=!1;if(z!==void 0){const ne=`${a}/properties`;for(const le in z){if(!(le in e))continue;const xe=`${o}/${Ti(le)}`,Ne=xn(e[le],z[le],n,r,s,i,xe,`${ne}/${Ti(le)}`);if(Ne.valid)c[le]=he[le]=!0;else if(ie=s,G.push({instanceLocation:o,keyword:"properties",keywordLocation:ne,error:`Property "${le}" does not match schema.`},...Ne.errors),ie)break}}if(!ie&&D!==void 0){const ne=`${a}/patternProperties`;for(const le in D){const xe=new RegExp(le,"u"),Ne=D[le];for(const Ge in e){if(!xe.test(Ge))continue;const Vt=`${o}/${Ti(Ge)}`,St=xn(e[Ge],Ne,n,r,s,i,Vt,`${ne}/${Ti(le)}`);St.valid?c[Ge]=he[Ge]=!0:(ie=s,G.push({instanceLocation:o,keyword:"patternProperties",keywordLocation:ne,error:`Property "${Ge}" matches pattern "${le}" but does not match associated schema.`},...St.errors))}}}if(!ie&&L!==void 0){const ne=`${a}/additionalProperties`;for(const le in e){if(he[le])continue;const xe=`${o}/${Ti(le)}`,Ne=xn(e[le],L,n,r,s,i,xe,ne);Ne.valid?c[le]=!0:(ie=s,G.push({instanceLocation:o,keyword:"additionalProperties",keywordLocation:ne,error:`Property "${le}" does not match additional properties schema.`},...Ne.errors))}}else if(!ie&&H!==void 0){const ne=`${a}/unevaluatedProperties`;for(const le in e)if(!c[le]){const xe=`${o}/${Ti(le)}`,Ne=xn(e[le],H,n,r,s,i,xe,ne);Ne.valid?c[le]=!0:G.push({instanceLocation:o,keyword:"unevaluatedProperties",keywordLocation:ne,error:`Property "${le}" does not match unevaluated properties schema.`},...Ne.errors)}}}else if(f==="array"){fe!==void 0&&e.length>fe&&G.push({instanceLocation:o,keyword:"maxItems",keywordLocation:`${a}/maxItems`,error:`Array has too many items (${e.length} > ${fe}).`}),ce!==void 0&&e.length<ce&&G.push({instanceLocation:o,keyword:"minItems",keywordLocation:`${a}/minItems`,error:`Array has too few items (${e.length} < ${ce}).`});const te=e.length;let he=0,ie=!1;if(F!==void 0){const ne=`${a}/prefixItems`,le=Math.min(F.length,te);for(;he<le;he++){const xe=xn(e[he],F[he],n,r,s,i,`${o}/${he}`,`${ne}/${he}`);if(c[he]=!0,!xe.valid&&(ie=s,G.push({instanceLocation:o,keyword:"prefixItems",keywordLocation:ne,error:"Items did not match schema."},...xe.errors),ie))break}}if(q!==void 0){const ne=`${a}/items`;if(Array.isArray(q)){const le=Math.min(q.length,te);for(;he<le;he++){const xe=xn(e[he],q[he],n,r,s,i,`${o}/${he}`,`${ne}/${he}`);if(c[he]=!0,!xe.valid&&(ie=s,G.push({instanceLocation:o,keyword:"items",keywordLocation:ne,error:"Items did not match schema."},...xe.errors),ie))break}}else for(;he<te;he++){const le=xn(e[he],q,n,r,s,i,`${o}/${he}`,ne);if(c[he]=!0,!le.valid&&(ie=s,G.push({instanceLocation:o,keyword:"items",keywordLocation:ne,error:"Items did not match schema."},...le.errors),ie))break}if(!ie&&X!==void 0){const le=`${a}/additionalItems`;for(;he<te;he++){const xe=xn(e[he],X,n,r,s,i,`${o}/${he}`,le);c[he]=!0,xe.valid||(ie=s,G.push({instanceLocation:o,keyword:"additionalItems",keywordLocation:le,error:"Items did not match additional items schema."},...xe.errors))}}}if(se!==void 0)if(te===0&&ae===void 0)G.push({instanceLocation:o,keyword:"contains",keywordLocation:`${a}/contains`,error:"Array is empty. It must contain at least one item matching the schema."});else if(ae!==void 0&&te<ae)G.push({instanceLocation:o,keyword:"minContains",keywordLocation:`${a}/minContains`,error:`Array has less items (${te}) than minContains (${ae}).`});else{const ne=`${a}/contains`,le=G.length;let xe=0;for(let Ne=0;Ne<te;Ne++){const Ge=xn(e[Ne],se,n,r,s,i,`${o}/${Ne}`,ne);Ge.valid?(c[Ne]=!0,xe++):G.push(...Ge.errors)}xe>=(ae||0)&&(G.length=le),ae===void 0&&de===void 0&&xe===0?G.splice(le,0,{instanceLocation:o,keyword:"contains",keywordLocation:ne,error:"Array does not contain item matching schema."}):ae!==void 0&&xe<ae?G.push({instanceLocation:o,keyword:"minContains",keywordLocation:`${a}/minContains`,error:`Array must contain at least ${ae} items matching schema. Only ${xe} items were found.`}):de!==void 0&&xe>de&&G.push({instanceLocation:o,keyword:"maxContains",keywordLocation:`${a}/maxContains`,error:`Array may contain at most ${de} items matching schema. ${xe} items were found.`})}if(!ie&&Q!==void 0){const ne=`${a}/unevaluatedItems`;for(he;he<te;he++){if(c[he])continue;const le=xn(e[he],Q,n,r,s,i,`${o}/${he}`,ne);c[he]=!0,le.valid||G.push({instanceLocation:o,keyword:"unevaluatedItems",keywordLocation:ne,error:"Items did not match unevaluated items schema."},...le.errors)}}if(ve)for(let ne=0;ne<te;ne++){const le=e[ne],xe=typeof le=="object"&&le!==null;for(let Ne=0;Ne<te;Ne++){if(ne===Ne)continue;const Ge=e[Ne];(le===Ge||xe&&(typeof Ge=="object"&&Ge!==null)&&og(le,Ge))&&(G.push({instanceLocation:o,keyword:"uniqueItems",keywordLocation:`${a}/uniqueItems`,error:`Duplicate items at indexes ${ne} and ${Ne}.`}),ne=Number.MAX_SAFE_INTEGER,Ne=Number.MAX_SAFE_INTEGER)}}}else if(f==="number"){if(n==="4"?(Ae!==void 0&&(Ee===!0&&e<=Ae||e<Ae)&&G.push({instanceLocation:o,keyword:"minimum",keywordLocation:`${a}/minimum`,error:`${e} is less than ${Ee?"or equal to ":""} ${Ae}.`}),Ce!==void 0&&(Re===!0&&e>=Ce||e>Ce)&&G.push({instanceLocation:o,keyword:"maximum",keywordLocation:`${a}/maximum`,error:`${e} is greater than ${Re?"or equal to ":""} ${Ce}.`})):(Ae!==void 0&&e<Ae&&G.push({instanceLocation:o,keyword:"minimum",keywordLocation:`${a}/minimum`,error:`${e} is less than ${Ae}.`}),Ce!==void 0&&e>Ce&&G.push({instanceLocation:o,keyword:"maximum",keywordLocation:`${a}/maximum`,error:`${e} is greater than ${Ce}.`}),Ee!==void 0&&e<=Ee&&G.push({instanceLocation:o,keyword:"exclusiveMinimum",keywordLocation:`${a}/exclusiveMinimum`,error:`${e} is less than ${Ee}.`}),Re!==void 0&&e>=Re&&G.push({instanceLocation:o,keyword:"exclusiveMaximum",keywordLocation:`${a}/exclusiveMaximum`,error:`${e} is greater than or equal to ${Re}.`})),ke!==void 0){const te=e%ke;Math.abs(0-te)>=11920929e-14&&Math.abs(ke-te)>=11920929e-14&&G.push({instanceLocation:o,keyword:"multipleOf",keywordLocation:`${a}/multipleOf`,error:`${e} is not a multiple of ${ke}.`})}}else if(f==="string"){const te=He===void 0&&et===void 0?0:$de(e);He!==void 0&&te<He&&G.push({instanceLocation:o,keyword:"minLength",keywordLocation:`${a}/minLength`,error:`String is too short (${te} < ${He}).`}),et!==void 0&&te>et&&G.push({instanceLocation:o,keyword:"maxLength",keywordLocation:`${a}/maxLength`,error:`String is too long (${te} > ${et}).`}),Oe!==void 0&&!new RegExp(Oe,"u").test(e)&&G.push({instanceLocation:o,keyword:"pattern",keywordLocation:`${a}/pattern`,error:"String does not match pattern."}),B!==void 0&&R6[B]&&!R6[B](e)&&G.push({instanceLocation:o,keyword:"format",keywordLocation:`${a}/format`,error:`String does not match format "${B}".`})}return{valid:G.length===0,errors:G}}class Rde{constructor(t,n="2019-09",r=!0){K(this,"schema");K(this,"draft");K(this,"shortCircuit");K(this,"lookup");this.schema=t,this.draft=n,this.shortCircuit=r,this.lookup=ju(t)}validate(t){return xn(t,this.schema,this.draft,this.lookup,this.shortCircuit)}addSchema(t,n){n&&(t={...t,$id:n}),ju(t,this.lookup)}}const FB=We({schema:Xi({type:"object"}),ui_schema:Xi({type:"object"}),default_from_schema:gt(),...no.properties}).partial();class BB extends ro{constructor(n,r){super(n,r);K(this,"type","jsonschema");K(this,"validator");this.validator=new Rde({...this.getJsonSchema()})}getSchema(){return FB}getJsonSchema(){var n;return(n=this.config)==null?void 0:n.schema}getJsonUiSchema(){return this.config.ui_schema??{}}isValid(n,r="update"){return super.isValid(n,r)?!this.isRequired()&&(!n||typeof n!="object")?!0:this.validator.validate(n).valid:!1}getValue(n,r){switch(r){case"form":return n===null?"":n;case"table":return n===null?null:JSON.stringify(n)}return n}transformRetrieve(n){const r=super.transformRetrieve(n);if(r===null){if(this.config.default_from_schema)try{return wa(this.getJsonSchema()).template()}catch{return null}else if(this.hasDefault())return this.getDefault()}return r}async transformPersist(n,r,s){const i=await super.transformPersist(n,r,s);if(this.nullish(i))return i;if(!this.isValid(i))throw new ls(this.name,i);return!i||typeof i!="object"?this.getDefault():JSON.stringify(i)}toJsonSchema(){const n=this.getJsonSchema()??{type:"object"};return this.toSchemaWrapIfRequired(wa({default:this.getDefault(),...n}))}toType(){return{...super.toType(),import:[{package:"json-schema-to-ts",name:"FromSchema"}],type:`FromSchema<${$C(this.getJsonSchema(),2,1)}>`}}}const zB=We({default_value:jt(),minimum:jt(),maximum:jt(),exclusiveMinimum:jt(),exclusiveMaximum:jt(),multipleOf:jt(),...Ms(no.properties,["default_value"])}).partial();class VB extends ro{constructor(){super(...arguments);K(this,"type","number")}getSchema(){return zB}getHtmlConfig(){return{element:"input",props:{type:"number",pattern:"d*",inputMode:"numeric"}}}schema(){return Object.freeze({...super.schema(),type:"integer"})}getValue(n,r){if(typeof n>"u"||n===null)return null;switch(r){case"submit":return Number.parseInt(n)}return n}async transformPersist(n,r,s){const i=await super.transformPersist(n,r,s);if(!this.nullish(i)&&typeof i!="number")throw ls.invalidType(this.name,"number",i);if(this.config.maximum&&i>this.config.maximum)throw new ls(`Field "${this.name}" cannot be greater than ${this.config.maximum}`);if(this.config.minimum&&i<this.config.minimum)throw new ls(`Field "${this.name}" cannot be less than ${this.config.minimum}`);return i}toJsonSchema(){var n,r,s,i,o;return this.toSchemaWrapIfRequired(jt({default:this.getDefault(),minimum:(n=this.config)==null?void 0:n.minimum,maximum:(r=this.config)==null?void 0:r.maximum,exclusiveMinimum:(s=this.config)==null?void 0:s.exclusiveMinimum,exclusiveMaximum:(i=this.config)==null?void 0:i.exclusiveMaximum,multipleOf:(o=this.config)==null?void 0:o.multipleOf}))}toType(){return{...super.toType(),type:"number"}}}const UB={data:{default_primary_field:"id"}},ET=["integer","uuid"],qB=We({format:pe({enum:ET,default:"integer"}),required:gt({default:!1}),...Ms(no.properties,["required"])}).partial();class Dg extends ro{constructor(n=UB.data.default_primary_field,r){super(n,{...r,fillable:!1,required:!1});K(this,"type","primary")}isRequired(){return!1}getSchema(){return qB}get format(){return this.config.format??"integer"}get fieldType(){return this.format==="integer"?"integer":"text"}schema(){return Object.freeze({type:this.fieldType,name:this.name,primary:!0,nullable:!1})}getNewValue(){if(this.format==="uuid")return tle()}async transformPersist(n){throw new Error("PrimaryField: This function should not be called")}toJsonSchema(){return this.toSchemaWrapIfRequired(this.format==="integer"?jt({writeOnly:void 0}):pe({writeOnly:void 0}))}toType(){const n=this.format==="integer"?"number":"string";return{...super.toType(),required:!0,import:[{package:"kysely",name:"Generated"}],type:`Generated<${n}>`}}}const HB=We({default_value:pe(),minLength:jt(),maxLength:jt(),pattern:pe(),html_config:$F({element:pe(),props:ed(Qt([pe({title:"String"}),jt({title:"Number"})]))}),...Ms(no.properties,["default_value"])}).partial();class Nx extends ro{constructor(){super(...arguments);K(this,"type","text")}getSchema(){return HB}getHtmlConfig(){return this.config.html_config?this.config.html_config:super.getHtmlConfig()}transformRetrieve(n){const r=super.transformRetrieve(n);return this.config.maxLength?r.substring(0,this.config.maxLength):this.isRequired()?r?r.toString():"":r}async transformPersist(n,r,s){let i=await super.transformPersist(n,r,s);if(this.nullish(i))return i;if(i!==null&&typeof i!="string"&&(i=String(i)),this.config.maxLength&&(i==null?void 0:i.length)>this.config.maxLength)throw new ls(`Field "${this.name}" must be at most ${this.config.maxLength} character(s)`);if(this.config.minLength&&(i==null?void 0:i.length)<this.config.minLength)throw new ls(`Field "${this.name}" must be at least ${this.config.minLength} character(s)`);if(this.config.pattern&&i&&!new RegExp(this.config.pattern).test(i))throw new ls(`Field "${this.name}" must match the pattern ${this.config.pattern}`);return i}toJsonSchema(){var n,r,s;return this.toSchemaWrapIfRequired(pe({default:this.getDefault(),minLength:(n=this.config)==null?void 0:n.minLength,maxLength:(r=this.config)==null?void 0:r.maxLength,pattern:(s=this.config)==null?void 0:s.pattern}))}toType(){return{...super.toType(),type:"string"}}}class WB{constructor(t,n,r=!1,s){if(this.entity=t,this.fields=n,this.unique=r,this.name=s,n.length===0)throw new Error("Indices must contain at least one field");if(n.some(i=>!(i instanceof ro)))throw new Error("All fields must be instances of Field");s||(this.name=[r?"idx_unique":"idx",t.name,...n.map(i=>i.name)].join("_"))}toJSON(){return{entity:this.entity.name,fields:this.fields.map(t=>t.name),unique:this.unique}}}var GB=typeof global=="object"&&global&&global.Object===Object&&global,kde=typeof self=="object"&&self&&self.Object===Object&&self,so=GB||kde||Function("return this")(),di=so.Symbol,YB=Object.prototype,Mde=YB.hasOwnProperty,Ide=YB.toString,Rp=di?di.toStringTag:void 0;function Pde(e){var t=Mde.call(e,Rp),n=e[Rp];try{e[Rp]=void 0;var r=!0}catch{}var s=Ide.call(e);return r&&(t?e[Rp]=n:delete e[Rp]),s}var Dde=Object.prototype,Lde=Dde.toString;function Fde(e){return Lde.call(e)}var Bde="[object Null]",zde="[object Undefined]",k6=di?di.toStringTag:void 0;function vd(e){return e==null?e===void 0?zde:Bde:k6&&k6 in Object(e)?Pde(e):Fde(e)}function ko(e){return e!=null&&typeof e=="object"}var Vde="[object Symbol]";function $1(e){return typeof e=="symbol"||ko(e)&&vd(e)==Vde}function JB(e,t){for(var n=-1,r=e==null?0:e.length,s=Array(r);++n<r;)s[n]=t(e[n],n,e);return s}var ds=Array.isArray,M6=di?di.prototype:void 0,I6=M6?M6.toString:void 0;function XB(e){if(typeof e=="string")return e;if(ds(e))return JB(e,XB)+"";if($1(e))return I6?I6.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var Ude=/\s/;function qde(e){for(var t=e.length;t--&&Ude.test(e.charAt(t)););return t}var Hde=/^\s+/;function Wde(e){return e&&e.slice(0,qde(e)+1).replace(Hde,"")}function Or(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var P6=NaN,Gde=/^[-+]0x[0-9a-f]+$/i,Yde=/^0b[01]+$/i,Jde=/^0o[0-7]+$/i,Xde=parseInt;function D6(e){if(typeof e=="number")return e;if($1(e))return P6;if(Or(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Or(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Wde(e);var n=Yde.test(e);return n||Jde.test(e)?Xde(e.slice(2),n?2:8):Gde.test(e)?P6:+e}function NT(e){return e}var Kde="[object AsyncFunction]",Qde="[object Function]",Zde="[object GeneratorFunction]",efe="[object Proxy]";function R1(e){if(!Or(e))return!1;var t=vd(e);return t==Qde||t==Zde||t==Kde||t==efe}var IN=so["__core-js_shared__"],L6=function(){var e=/[^.]+$/.exec(IN&&IN.keys&&IN.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function tfe(e){return!!L6&&L6 in e}var nfe=Function.prototype,rfe=nfe.toString;function xd(e){if(e!=null){try{return rfe.call(e)}catch{}try{return e+""}catch{}}return""}var sfe=/[\\^$.*+?()[\]{}|]/g,ife=/^\[object .+?Constructor\]$/,ofe=Function.prototype,afe=Object.prototype,lfe=ofe.toString,cfe=afe.hasOwnProperty,ufe=RegExp("^"+lfe.call(cfe).replace(sfe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function dfe(e){if(!Or(e)||tfe(e))return!1;var t=R1(e)?ufe:ife;return t.test(xd(e))}function ffe(e,t){return e==null?void 0:e[t]}function wd(e,t){var n=ffe(e,t);return dfe(n)?n:void 0}var eO=wd(so,"WeakMap"),F6=Object.create,KB=function(){function e(){}return function(t){if(!Or(t))return{};if(F6)return F6(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function hfe(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function QB(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}var mfe=800,pfe=16,gfe=Date.now;function yfe(e){var t=0,n=0;return function(){var r=gfe(),s=pfe-(r-n);if(n=r,s>0){if(++t>=mfe)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function bfe(e){return function(){return e}}var _x=function(){try{var e=wd(Object,"defineProperty");return e({},"",{}),e}catch{}}(),vfe=_x?function(e,t){return _x(e,"toString",{configurable:!0,enumerable:!1,value:bfe(t),writable:!0})}:NT,ZB=yfe(vfe);function ez(e,t){for(var n=-1,r=e==null?0:e.length;++n<r&&t(e[n],n,e)!==!1;);return e}var xfe=9007199254740991,wfe=/^(?:0|[1-9]\d*)$/;function k1(e,t){var n=typeof e;return t=t??xfe,!!t&&(n=="number"||n!="symbol"&&wfe.test(e))&&e>-1&&e%1==0&&e<t}function _T(e,t,n){t=="__proto__"&&_x?_x(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function By(e,t){return e===t||e!==e&&t!==t}var Sfe=Object.prototype,Efe=Sfe.hasOwnProperty;function CT(e,t,n){var r=e[t];(!(Efe.call(e,t)&&By(r,n))||n===void 0&&!(t in e))&&_T(e,t,n)}function um(e,t,n,r){var s=!n;n||(n={});for(var i=-1,o=t.length;++i<o;){var a=t[i],c=void 0;c===void 0&&(c=e[a]),s?_T(n,a,c):CT(n,a,c)}return n}var B6=Math.max;function tz(e,t,n){return t=B6(t===void 0?e.length-1:t,0),function(){for(var r=arguments,s=-1,i=B6(r.length-t,0),o=Array(i);++s<i;)o[s]=r[t+s];s=-1;for(var a=Array(t+1);++s<t;)a[s]=r[s];return a[t]=n(o),hfe(e,this,a)}}function Nfe(e,t){return ZB(tz(e,t,NT),e+"")}var _fe=9007199254740991;function OT(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=_fe}function M1(e){return e!=null&&OT(e.length)&&!R1(e)}function Cfe(e,t,n){if(!Or(n))return!1;var r=typeof t;return(r=="number"?M1(n)&&k1(t,n.length):r=="string"&&t in n)?By(n[t],e):!1}function Ofe(e){return Nfe(function(t,n){var r=-1,s=n.length,i=s>1?n[s-1]:void 0,o=s>2?n[2]:void 0;for(i=e.length>3&&typeof i=="function"?(s--,i):void 0,o&&Cfe(n[0],n[1],o)&&(i=s<3?void 0:i,s=1),t=Object(t);++r<s;){var a=n[r];a&&e(t,a,r,i)}return t})}var jfe=Object.prototype;function jT(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||jfe;return e===n}function Afe(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var Tfe="[object Arguments]";function z6(e){return ko(e)&&vd(e)==Tfe}var nz=Object.prototype,$fe=nz.hasOwnProperty,Rfe=nz.propertyIsEnumerable,Lg=z6(function(){return arguments}())?z6:function(e){return ko(e)&&$fe.call(e,"callee")&&!Rfe.call(e,"callee")};function kfe(){return!1}var rz=typeof exports=="object"&&exports&&!exports.nodeType&&exports,V6=rz&&typeof module=="object"&&module&&!module.nodeType&&module,Mfe=V6&&V6.exports===rz,U6=Mfe?so.Buffer:void 0,Ife=U6?U6.isBuffer:void 0,Ah=Ife||kfe,Pfe="[object Arguments]",Dfe="[object Array]",Lfe="[object Boolean]",Ffe="[object Date]",Bfe="[object Error]",zfe="[object Function]",Vfe="[object Map]",Ufe="[object Number]",qfe="[object Object]",Hfe="[object RegExp]",Wfe="[object Set]",Gfe="[object String]",Yfe="[object WeakMap]",Jfe="[object ArrayBuffer]",Xfe="[object DataView]",Kfe="[object Float32Array]",Qfe="[object Float64Array]",Zfe="[object Int8Array]",ehe="[object Int16Array]",the="[object Int32Array]",nhe="[object Uint8Array]",rhe="[object Uint8ClampedArray]",she="[object Uint16Array]",ihe="[object Uint32Array]",un={};un[Kfe]=un[Qfe]=un[Zfe]=un[ehe]=un[the]=un[nhe]=un[rhe]=un[she]=un[ihe]=!0;un[Pfe]=un[Dfe]=un[Jfe]=un[Lfe]=un[Xfe]=un[Ffe]=un[Bfe]=un[zfe]=un[Vfe]=un[Ufe]=un[qfe]=un[Hfe]=un[Wfe]=un[Gfe]=un[Yfe]=!1;function ohe(e){return ko(e)&&OT(e.length)&&!!un[vd(e)]}function AT(e){return function(t){return e(t)}}var sz=typeof exports=="object"&&exports&&!exports.nodeType&&exports,ag=sz&&typeof module=="object"&&module&&!module.nodeType&&module,ahe=ag&&ag.exports===sz,PN=ahe&&GB.process,Th=function(){try{var e=ag&&ag.require&&ag.require("util").types;return e||PN&&PN.binding&&PN.binding("util")}catch{}}(),q6=Th&&Th.isTypedArray,I1=q6?AT(q6):ohe,lhe=Object.prototype,che=lhe.hasOwnProperty;function iz(e,t){var n=ds(e),r=!n&&Lg(e),s=!n&&!r&&Ah(e),i=!n&&!r&&!s&&I1(e),o=n||r||s||i,a=o?Afe(e.length,String):[],c=a.length;for(var u in e)(t||che.call(e,u))&&!(o&&(u=="length"||s&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||k1(u,c)))&&a.push(u);return a}function oz(e,t){return function(n){return e(t(n))}}var uhe=oz(Object.keys,Object),dhe=Object.prototype,fhe=dhe.hasOwnProperty;function hhe(e){if(!jT(e))return uhe(e);var t=[];for(var n in Object(e))fhe.call(e,n)&&n!="constructor"&&t.push(n);return t}function zy(e){return M1(e)?iz(e):hhe(e)}function mhe(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var phe=Object.prototype,ghe=phe.hasOwnProperty;function yhe(e){if(!Or(e))return mhe(e);var t=jT(e),n=[];for(var r in e)r=="constructor"&&(t||!ghe.call(e,r))||n.push(r);return n}function Vy(e){return M1(e)?iz(e,!0):yhe(e)}var bhe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,vhe=/^\w*$/;function TT(e,t){if(ds(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||$1(e)?!0:vhe.test(e)||!bhe.test(e)||t!=null&&e in Object(t)}var Fg=wd(Object,"create");function xhe(){this.__data__=Fg?Fg(null):{},this.size=0}function whe(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var She="__lodash_hash_undefined__",Ehe=Object.prototype,Nhe=Ehe.hasOwnProperty;function _he(e){var t=this.__data__;if(Fg){var n=t[e];return n===She?void 0:n}return Nhe.call(t,e)?t[e]:void 0}var Che=Object.prototype,Ohe=Che.hasOwnProperty;function jhe(e){var t=this.__data__;return Fg?t[e]!==void 0:Ohe.call(t,e)}var Ahe="__lodash_hash_undefined__";function The(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Fg&&t===void 0?Ahe:t,this}function rd(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}rd.prototype.clear=xhe;rd.prototype.delete=whe;rd.prototype.get=_he;rd.prototype.has=jhe;rd.prototype.set=The;function $he(){this.__data__=[],this.size=0}function P1(e,t){for(var n=e.length;n--;)if(By(e[n][0],t))return n;return-1}var Rhe=Array.prototype,khe=Rhe.splice;function Mhe(e){var t=this.__data__,n=P1(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():khe.call(t,n,1),--this.size,!0}function Ihe(e){var t=this.__data__,n=P1(t,e);return n<0?void 0:t[n][1]}function Phe(e){return P1(this.__data__,e)>-1}function Dhe(e,t){var n=this.__data__,r=P1(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}function el(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}el.prototype.clear=$he;el.prototype.delete=Mhe;el.prototype.get=Ihe;el.prototype.has=Phe;el.prototype.set=Dhe;var Bg=wd(so,"Map");function Lhe(){this.size=0,this.__data__={hash:new rd,map:new(Bg||el),string:new rd}}function Fhe(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function D1(e,t){var n=e.__data__;return Fhe(t)?n[typeof t=="string"?"string":"hash"]:n.map}function Bhe(e){var t=D1(this,e).delete(e);return this.size-=t?1:0,t}function zhe(e){return D1(this,e).get(e)}function Vhe(e){return D1(this,e).has(e)}function Uhe(e,t){var n=D1(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}function tl(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}tl.prototype.clear=Lhe;tl.prototype.delete=Bhe;tl.prototype.get=zhe;tl.prototype.has=Vhe;tl.prototype.set=Uhe;var qhe="Expected a function";function $T(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(qhe);var n=function(){var r=arguments,s=t?t.apply(this,r):r[0],i=n.cache;if(i.has(s))return i.get(s);var o=e.apply(this,r);return n.cache=i.set(s,o)||i,o};return n.cache=new($T.Cache||tl),n}$T.Cache=tl;var Hhe=500;function Whe(e){var t=$T(e,function(r){return n.size===Hhe&&n.clear(),r}),n=t.cache;return t}var Ghe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Yhe=/\\(\\)?/g,Jhe=Whe(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Ghe,function(n,r,s,i){t.push(s?i.replace(Yhe,"$1"):r||n)}),t});function Xhe(e){return e==null?"":XB(e)}function dm(e,t){return ds(e)?e:TT(e,t)?[e]:Jhe(Xhe(e))}function fm(e){if(typeof e=="string"||$1(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function L1(e,t){t=dm(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[fm(t[n++])];return n&&n==r?e:void 0}function zg(e,t,n){var r=e==null?void 0:L1(e,t);return r===void 0?n:r}function RT(e,t){for(var n=-1,r=t.length,s=e.length;++n<r;)e[s+n]=t[n];return e}var H6=di?di.isConcatSpreadable:void 0;function Khe(e){return ds(e)||Lg(e)||!!(H6&&e&&e[H6])}function az(e,t,n,r,s){var i=-1,o=e.length;for(n||(n=Khe),s||(s=[]);++i<o;){var a=e[i];t>0&&n(a)?t>1?az(a,t-1,n,r,s):RT(s,a):r||(s[s.length]=a)}return s}function Qhe(e){var t=e==null?0:e.length;return t?az(e,1):[]}function lz(e){return ZB(tz(e,void 0,Qhe),e+"")}var F1=oz(Object.getPrototypeOf,Object),Zhe="[object Object]",eme=Function.prototype,tme=Object.prototype,cz=eme.toString,nme=tme.hasOwnProperty,rme=cz.call(Object);function uz(e){if(!ko(e)||vd(e)!=Zhe)return!1;var t=F1(e);if(t===null)return!0;var n=nme.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&cz.call(n)==rme}function sme(e,t,n){var r=-1,s=e.length;t<0&&(t=-t>s?0:s+t),n=n>s?s:n,n<0&&(n+=s),s=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(s);++r<s;)i[r]=e[r+t];return i}function ime(){this.__data__=new el,this.size=0}function ome(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function ame(e){return this.__data__.get(e)}function lme(e){return this.__data__.has(e)}var cme=200;function ume(e,t){var n=this.__data__;if(n instanceof el){var r=n.__data__;if(!Bg||r.length<cme-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new tl(r)}return n.set(e,t),this.size=n.size,this}function Wi(e){var t=this.__data__=new el(e);this.size=t.size}Wi.prototype.clear=ime;Wi.prototype.delete=ome;Wi.prototype.get=ame;Wi.prototype.has=lme;Wi.prototype.set=ume;function dme(e,t){return e&&um(t,zy(t),e)}function fme(e,t){return e&&um(t,Vy(t),e)}var dz=typeof exports=="object"&&exports&&!exports.nodeType&&exports,W6=dz&&typeof module=="object"&&module&&!module.nodeType&&module,hme=W6&&W6.exports===dz,G6=hme?so.Buffer:void 0,Y6=G6?G6.allocUnsafe:void 0;function fz(e,t){if(t)return e.slice();var n=e.length,r=Y6?Y6(n):new e.constructor(n);return e.copy(r),r}function mme(e,t){for(var n=-1,r=e==null?0:e.length,s=0,i=[];++n<r;){var o=e[n];t(o,n,e)&&(i[s++]=o)}return i}function hz(){return[]}var pme=Object.prototype,gme=pme.propertyIsEnumerable,J6=Object.getOwnPropertySymbols,kT=J6?function(e){return e==null?[]:(e=Object(e),mme(J6(e),function(t){return gme.call(e,t)}))}:hz;function yme(e,t){return um(e,kT(e),t)}var bme=Object.getOwnPropertySymbols,mz=bme?function(e){for(var t=[];e;)RT(t,kT(e)),e=F1(e);return t}:hz;function vme(e,t){return um(e,mz(e),t)}function pz(e,t,n){var r=t(e);return ds(e)?r:RT(r,n(e))}function tO(e){return pz(e,zy,kT)}function gz(e){return pz(e,Vy,mz)}var nO=wd(so,"DataView"),rO=wd(so,"Promise"),sO=wd(so,"Set"),X6="[object Map]",xme="[object Object]",K6="[object Promise]",Q6="[object Set]",Z6="[object WeakMap]",eI="[object DataView]",wme=xd(nO),Sme=xd(Bg),Eme=xd(rO),Nme=xd(sO),_me=xd(eO),Di=vd;(nO&&Di(new nO(new ArrayBuffer(1)))!=eI||Bg&&Di(new Bg)!=X6||rO&&Di(rO.resolve())!=K6||sO&&Di(new sO)!=Q6||eO&&Di(new eO)!=Z6)&&(Di=function(e){var t=vd(e),n=t==xme?e.constructor:void 0,r=n?xd(n):"";if(r)switch(r){case wme:return eI;case Sme:return X6;case Eme:return K6;case Nme:return Q6;case _me:return Z6}return t});var Cme=Object.prototype,Ome=Cme.hasOwnProperty;function jme(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&Ome.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var Cx=so.Uint8Array;function MT(e){var t=new e.constructor(e.byteLength);return new Cx(t).set(new Cx(e)),t}function Ame(e,t){var n=t?MT(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}var Tme=/\w*$/;function $me(e){var t=new e.constructor(e.source,Tme.exec(e));return t.lastIndex=e.lastIndex,t}var tI=di?di.prototype:void 0,nI=tI?tI.valueOf:void 0;function Rme(e){return nI?Object(nI.call(e)):{}}function yz(e,t){var n=t?MT(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var kme="[object Boolean]",Mme="[object Date]",Ime="[object Map]",Pme="[object Number]",Dme="[object RegExp]",Lme="[object Set]",Fme="[object String]",Bme="[object Symbol]",zme="[object ArrayBuffer]",Vme="[object DataView]",Ume="[object Float32Array]",qme="[object Float64Array]",Hme="[object Int8Array]",Wme="[object Int16Array]",Gme="[object Int32Array]",Yme="[object Uint8Array]",Jme="[object Uint8ClampedArray]",Xme="[object Uint16Array]",Kme="[object Uint32Array]";function Qme(e,t,n){var r=e.constructor;switch(t){case zme:return MT(e);case kme:case Mme:return new r(+e);case Vme:return Ame(e,n);case Ume:case qme:case Hme:case Wme:case Gme:case Yme:case Jme:case Xme:case Kme:return yz(e,n);case Ime:return new r;case Pme:case Fme:return new r(e);case Dme:return $me(e);case Lme:return new r;case Bme:return Rme(e)}}function bz(e){return typeof e.constructor=="function"&&!jT(e)?KB(F1(e)):{}}var Zme="[object Map]";function epe(e){return ko(e)&&Di(e)==Zme}var rI=Th&&Th.isMap,tpe=rI?AT(rI):epe,npe="[object Set]";function rpe(e){return ko(e)&&Di(e)==npe}var sI=Th&&Th.isSet,spe=sI?AT(sI):rpe,ipe=1,ope=2,ape=4,vz="[object Arguments]",lpe="[object Array]",cpe="[object Boolean]",upe="[object Date]",dpe="[object Error]",xz="[object Function]",fpe="[object GeneratorFunction]",hpe="[object Map]",mpe="[object Number]",wz="[object Object]",ppe="[object RegExp]",gpe="[object Set]",ype="[object String]",bpe="[object Symbol]",vpe="[object WeakMap]",xpe="[object ArrayBuffer]",wpe="[object DataView]",Spe="[object Float32Array]",Epe="[object Float64Array]",Npe="[object Int8Array]",_pe="[object Int16Array]",Cpe="[object Int32Array]",Ope="[object Uint8Array]",jpe="[object Uint8ClampedArray]",Ape="[object Uint16Array]",Tpe="[object Uint32Array]",sn={};sn[vz]=sn[lpe]=sn[xpe]=sn[wpe]=sn[cpe]=sn[upe]=sn[Spe]=sn[Epe]=sn[Npe]=sn[_pe]=sn[Cpe]=sn[hpe]=sn[mpe]=sn[wz]=sn[ppe]=sn[gpe]=sn[ype]=sn[bpe]=sn[Ope]=sn[jpe]=sn[Ape]=sn[Tpe]=!0;sn[dpe]=sn[xz]=sn[vpe]=!1;function lg(e,t,n,r,s,i){var o,a=t&ipe,c=t&ope,u=t&ape;if(n&&(o=s?n(e,r,s,i):n(e)),o!==void 0)return o;if(!Or(e))return e;var f=ds(e);if(f){if(o=jme(e),!a)return QB(e,o)}else{var h=Di(e),p=h==xz||h==fpe;if(Ah(e))return fz(e,a);if(h==wz||h==vz||p&&!s){if(o=c||p?{}:bz(e),!a)return c?vme(e,fme(o,e)):yme(e,dme(o,e))}else{if(!sn[h])return s?e:{};o=Qme(e,h,a)}}i||(i=new Wi);var y=i.get(e);if(y)return y;i.set(e,o),spe(e)?e.forEach(function(E){o.add(lg(E,t,n,E,e,i))}):tpe(e)&&e.forEach(function(E,N){o.set(N,lg(E,t,n,N,e,i))});var v=u?c?gz:tO:c?Vy:zy,x=f?void 0:v(e);return ez(x||e,function(E,N){x&&(N=E,E=e[N]),CT(o,N,lg(E,t,n,N,e,i))}),o}var $pe=1,Rpe=4;function B1(e){return lg(e,$pe|Rpe)}var kpe="__lodash_hash_undefined__";function Mpe(e){return this.__data__.set(e,kpe),this}function Ipe(e){return this.__data__.has(e)}function Ox(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new tl;++t<n;)this.add(e[t])}Ox.prototype.add=Ox.prototype.push=Mpe;Ox.prototype.has=Ipe;function Ppe(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function Dpe(e,t){return e.has(t)}var Lpe=1,Fpe=2;function Sz(e,t,n,r,s,i){var o=n&Lpe,a=e.length,c=t.length;if(a!=c&&!(o&&c>a))return!1;var u=i.get(e),f=i.get(t);if(u&&f)return u==t&&f==e;var h=-1,p=!0,y=n&Fpe?new Ox:void 0;for(i.set(e,t),i.set(t,e);++h<a;){var v=e[h],x=t[h];if(r)var E=o?r(x,v,h,t,e,i):r(v,x,h,e,t,i);if(E!==void 0){if(E)continue;p=!1;break}if(y){if(!Ppe(t,function(N,_){if(!Dpe(y,_)&&(v===N||s(v,N,n,r,i)))return y.push(_)})){p=!1;break}}else if(!(v===x||s(v,x,n,r,i))){p=!1;break}}return i.delete(e),i.delete(t),p}function Bpe(e){var t=-1,n=Array(e.size);return e.forEach(function(r,s){n[++t]=[s,r]}),n}function zpe(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var Vpe=1,Upe=2,qpe="[object Boolean]",Hpe="[object Date]",Wpe="[object Error]",Gpe="[object Map]",Ype="[object Number]",Jpe="[object RegExp]",Xpe="[object Set]",Kpe="[object String]",Qpe="[object Symbol]",Zpe="[object ArrayBuffer]",ege="[object DataView]",iI=di?di.prototype:void 0,DN=iI?iI.valueOf:void 0;function tge(e,t,n,r,s,i,o){switch(n){case ege:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Zpe:return!(e.byteLength!=t.byteLength||!i(new Cx(e),new Cx(t)));case qpe:case Hpe:case Ype:return By(+e,+t);case Wpe:return e.name==t.name&&e.message==t.message;case Jpe:case Kpe:return e==t+"";case Gpe:var a=Bpe;case Xpe:var c=r&Vpe;if(a||(a=zpe),e.size!=t.size&&!c)return!1;var u=o.get(e);if(u)return u==t;r|=Upe,o.set(e,t);var f=Sz(a(e),a(t),r,s,i,o);return o.delete(e),f;case Qpe:if(DN)return DN.call(e)==DN.call(t)}return!1}var nge=1,rge=Object.prototype,sge=rge.hasOwnProperty;function ige(e,t,n,r,s,i){var o=n&nge,a=tO(e),c=a.length,u=tO(t),f=u.length;if(c!=f&&!o)return!1;for(var h=c;h--;){var p=a[h];if(!(o?p in t:sge.call(t,p)))return!1}var y=i.get(e),v=i.get(t);if(y&&v)return y==t&&v==e;var x=!0;i.set(e,t),i.set(t,e);for(var E=o;++h<c;){p=a[h];var N=e[p],_=t[p];if(r)var C=o?r(_,N,p,t,e,i):r(N,_,p,e,t,i);if(!(C===void 0?N===_||s(N,_,n,r,i):C)){x=!1;break}E||(E=p=="constructor")}if(x&&!E){var j=e.constructor,A=t.constructor;j!=A&&"constructor"in e&&"constructor"in t&&!(typeof j=="function"&&j instanceof j&&typeof A=="function"&&A instanceof A)&&(x=!1)}return i.delete(e),i.delete(t),x}var oge=1,oI="[object Arguments]",aI="[object Array]",Wb="[object Object]",age=Object.prototype,lI=age.hasOwnProperty;function lge(e,t,n,r,s,i){var o=ds(e),a=ds(t),c=o?aI:Di(e),u=a?aI:Di(t);c=c==oI?Wb:c,u=u==oI?Wb:u;var f=c==Wb,h=u==Wb,p=c==u;if(p&&Ah(e)){if(!Ah(t))return!1;o=!0,f=!1}if(p&&!f)return i||(i=new Wi),o||I1(e)?Sz(e,t,n,r,s,i):tge(e,t,c,n,r,s,i);if(!(n&oge)){var y=f&&lI.call(e,"__wrapped__"),v=h&&lI.call(t,"__wrapped__");if(y||v){var x=y?e.value():e,E=v?t.value():t;return i||(i=new Wi),s(x,E,n,r,i)}}return p?(i||(i=new Wi),ige(e,t,n,r,s,i)):!1}function z1(e,t,n,r,s){return e===t?!0:e==null||t==null||!ko(e)&&!ko(t)?e!==e&&t!==t:lge(e,t,n,r,z1,s)}var cge=1,uge=2;function dge(e,t,n,r){var s=n.length,i=s;if(e==null)return!i;for(e=Object(e);s--;){var o=n[s];if(o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1}for(;++s<i;){o=n[s];var a=o[0],c=e[a],u=o[1];if(o[2]){if(c===void 0&&!(a in e))return!1}else{var f=new Wi,h;if(!(h===void 0?z1(u,c,cge|uge,r,f):h))return!1}}return!0}function Ez(e){return e===e&&!Or(e)}function fge(e){for(var t=zy(e),n=t.length;n--;){var r=t[n],s=e[r];t[n]=[r,s,Ez(s)]}return t}function Nz(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}function hge(e){var t=fge(e);return t.length==1&&t[0][2]?Nz(t[0][0],t[0][1]):function(n){return n===e||dge(n,e,t)}}function mge(e,t){return e!=null&&t in Object(e)}function _z(e,t,n){t=dm(t,e);for(var r=-1,s=t.length,i=!1;++r<s;){var o=fm(t[r]);if(!(i=e!=null&&n(e,o)))break;e=e[o]}return i||++r!=s?i:(s=e==null?0:e.length,!!s&&OT(s)&&k1(o,s)&&(ds(e)||Lg(e)))}function Cz(e,t){return e!=null&&_z(e,t,mge)}var pge=1,gge=2;function yge(e,t){return TT(e)&&Ez(t)?Nz(fm(e),t):function(n){var r=zg(n,e);return r===void 0&&r===t?Cz(n,e):z1(t,r,pge|gge)}}function bge(e){return function(t){return t==null?void 0:t[e]}}function vge(e){return function(t){return L1(t,e)}}function xge(e){return TT(e)?bge(fm(e)):vge(e)}function wge(e){return typeof e=="function"?e:e==null?NT:typeof e=="object"?ds(e)?yge(e[0],e[1]):hge(e):xge(e)}function Sge(e){return function(t,n,r){for(var s=-1,i=Object(t),o=r(t),a=o.length;a--;){var c=o[++s];if(n(i[c],c,i)===!1)break}return t}}var Oz=Sge();function Ege(e,t){return e&&Oz(e,t,zy)}var LN=function(){return so.Date.now()},Nge="Expected a function",_ge=Math.max,Cge=Math.min;function Oge(e,t,n){var r,s,i,o,a,c,u=0,f=!1,h=!1,p=!0;if(typeof e!="function")throw new TypeError(Nge);t=D6(t)||0,Or(n)&&(f=!!n.leading,h="maxWait"in n,i=h?_ge(D6(n.maxWait)||0,t):i,p="trailing"in n?!!n.trailing:p);function y($){var k=r,R=s;return r=s=void 0,u=$,o=e.apply(R,k),o}function v($){return u=$,a=setTimeout(N,t),f?y($):o}function x($){var k=$-c,R=$-u,B=t-k;return h?Cge(B,i-R):B}function E($){var k=$-c,R=$-u;return c===void 0||k>=t||k<0||h&&R>=i}function N(){var $=LN();if(E($))return _($);a=setTimeout(N,x($))}function _($){return a=void 0,p&&r?y($):(r=s=void 0,o)}function C(){a!==void 0&&clearTimeout(a),u=0,r=c=s=a=void 0}function j(){return a===void 0?o:_(LN())}function A(){var $=LN(),k=E($);if(r=arguments,s=this,c=$,k){if(a===void 0)return v(c);if(h)return clearTimeout(a),a=setTimeout(N,t),y(c)}return a===void 0&&(a=setTimeout(N,t)),o}return A.cancel=C,A.flush=j,A}function iO(e,t,n){(n!==void 0&&!By(e[t],n)||n===void 0&&!(t in e))&&_T(e,t,n)}function jge(e){return ko(e)&&M1(e)}function oO(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}function Age(e){return um(e,Vy(e))}function Tge(e,t,n,r,s,i,o){var a=oO(e,n),c=oO(t,n),u=o.get(c);if(u){iO(e,n,u);return}var f=i?i(a,c,n+"",e,t,o):void 0,h=f===void 0;if(h){var p=ds(c),y=!p&&Ah(c),v=!p&&!y&&I1(c);f=c,p||y||v?ds(a)?f=a:jge(a)?f=QB(a):y?(h=!1,f=fz(c,!0)):v?(h=!1,f=yz(c,!0)):f=[]:uz(c)||Lg(c)?(f=a,Lg(a)?f=Age(a):(!Or(a)||R1(a))&&(f=bz(c))):h=!1}h&&(o.set(c,f),s(f,c,r,i,o),o.delete(c)),iO(e,n,f)}function jz(e,t,n,r,s){e!==t&&Oz(t,function(i,o){if(s||(s=new Wi),Or(i))Tge(e,t,o,n,jz,r,s);else{var a=r?r(oO(e,o),i,o+"",e,t,s):void 0;a===void 0&&(a=i),iO(e,o,a)}},Vy)}var $ge=Ofe(function(e,t,n,r){jz(e,t,n,r)});function Rge(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var kge=Object.prototype,Mge=kge.hasOwnProperty;function Ige(e,t){return e!=null&&Mge.call(e,t)}function FN(e,t){return e!=null&&_z(e,t,Ige)}function Pge(e,t){return t.length<2?e:L1(e,sme(t,0,-1))}function Az(e,t){return z1(e,t)}function Dge(e,t){return t=dm(t,e),e=Pge(e,t),e==null||delete e[fm(Rge(t))]}function Lge(e){return uz(e)?void 0:e}var Fge=1,Bge=2,zge=4,$h=lz(function(e,t){var n={};if(e==null)return n;var r=!1;t=JB(t,function(i){return i=dm(i,e),r||(r=i.length>1),i}),um(e,gz(e),n),r&&(n=lg(n,Fge|Bge|zge,Lge));for(var s=t.length;s--;)Dge(n,t[s]);return n});function Tz(e,t,n,r){if(!Or(e))return e;t=dm(t,e);for(var s=-1,i=t.length,o=i-1,a=e;a!=null&&++s<i;){var c=fm(t[s]),u=n;if(c==="__proto__"||c==="constructor"||c==="prototype")return e;if(s!=o){var f=a[c];u=r?r(f,c,a):void 0,u===void 0&&(u=Or(f)?f:k1(t[s+1])?[]:{})}CT(a,c,u),a=a[c]}return e}function Vge(e,t,n){for(var r=-1,s=t.length,i={};++r<s;){var o=t[r],a=L1(e,o);n(a,o)&&Tz(i,dm(o,e),a)}return i}function Uge(e,t){return Vge(e,t,function(n,r){return Cz(e,r)})}var jx=lz(function(e,t){return e==null?{}:Uge(e,t)});function Gb(e,t,n){return e==null?e:Tz(e,t,n)}var qge="Expected a function";function IT(e,t,n){var r=!0,s=!0;if(typeof e!="function")throw new TypeError(qge);return Or(n)&&(r="leading"in n?!!n.leading:r,s="trailing"in n?!!n.trailing:s),Oge(e,t,{leading:r,maxWait:t,trailing:s})}function ti(e,t,n){var r=ds(e),s=r||Ah(e)||I1(e);if(t=wge(t),n==null){var i=e&&e.constructor;s?n=r?new i:[]:Or(e)?n=R1(i)?KB(F1(e)):{}:n={}}return(s?ez:Ege)(e,function(o,a,c){return t(n,o,a,c)}),n}const Hge={primary:{schema:qB,field:Dg},text:{schema:HB,field:Nx},number:{schema:zB,field:VB},boolean:{schema:TB,field:$B},date:{schema:RB,field:ZC},enum:{schema:kB,field:MB},json:{schema:IB,field:PB},jsonschema:{schema:FB,field:BB}},kw=class kw{constructor(t){this.em=t}getIntrospector(){return this.em.connection.getIntrospector()}async introspect(){const t=await this.getIntrospector().getTables({withInternalKyselyTables:!1}),n=await this.getIntrospector().getIndices(),r=[];for(const s of t)kw.EXCLUDE_TABLES.includes(s.name)||s.name&&r.push({...s,indices:n.filter(i=>i.table===s.name)});return r}getIntrospectionFromEntity(t){const n=t.getFields(!1),r=this.em.getIndicesOf(t);return{name:t.name,isView:!1,columns:n.map(s=>({name:s.name,dataType:"TEXT",isNullable:!0,isAutoIncrementing:s instanceof Dg,hasDefaultValue:!1,comment:void 0})),indices:r.map(s=>({name:s.name,table:t.name,isUnique:s.unique,columns:s.fields.map(i=>({name:i.name,order:0}))}))}}async getDiff(){const t=await this.introspect(),n=this.em.entities.map(i=>this.getIntrospectionFromEntity(i)),r=[],s=i=>i.name;t.filter(i=>/bknd/.test(i.name)||i.isView?!1:!n.map(o=>o.name).includes(i.name)).forEach(i=>{r.push({name:i.name,isDrop:!0,isNew:!1,columns:{add:[],drop:[],change:[]},indices:{add:[],drop:[]}})});for(const i of n){const o=t.find(a=>a.name===i.name);if(!o)r.push({name:i.name,isNew:!0,columns:{add:i.columns.map(s),drop:[],change:[]},indices:{add:i.indices.map(s),drop:[]}});else{const a=i.columns.filter(y=>!o.columns.map(s).includes(y.name)),c=o.columns.filter(y=>!i.columns.map(s).includes(y.name)),u=[];for(const y of i.columns){const v=o.columns.find(E=>E.name===y.name),x=[];for(const[E,N]of Object.entries(y))v&&v[E]!==N&&x.push({attribute:E,prev:v[E],next:N});Object.keys(x).length>0&&u.push({name:y.name,changes:x})}const f=i.indices.filter(y=>!o.indices.map(v=>v.name).includes(y.name)),h=o.indices.filter(y=>!i.indices.map(v=>v.name).includes(y.name));[a,c,f,h].some(y=>y.length>0)&&r.push({name:i.name,isNew:!1,columns:{add:a.map(s),drop:c.map(s),change:[]},indices:{add:f.map(s),drop:h.map(s)}})}}return r}collectFieldSchemas(t,n){const r=[];if(n.length===0)return r;for(const s of n){const o=this.em.entity(t).getField(s).schema();o&&r.push(this.em.connection.getFieldSchema(o))}return r}async sync(t={force:!1,drop:!1}){const n=await this.getDiff(),r=[],s=this.em.connection.kysely.schema;for(const i of n){const o=[];let a=0;const c=this.collectFieldSchemas(i.name,i.columns.add),u=i.columns.drop,f=i.indices.drop;if(i.isDrop)a++,t.drop&&o.push(s.dropTable(i.name));else if(i.isNew){let h=s.createTable(i.name);for(const p of c)a++,h=h.addColumn(...p);o.push(h)}else{if(c.length>0)for(const h of c)a++,o.push(s.alterTable(i.name).addColumn(...h));if(t.drop&&u.length>0)for(const h of u)a++,o.push(s.alterTable(i.name).dropColumn(h))}for(const h of i.indices.add){const y=this.em.getIndicesOf(i.name).find(x=>x.name===h);let v=s.createIndex(h).on(i.name).columns(y.fields.map(x=>x.name));y.unique&&(v=v.unique()),o.push(v),a++}if(t.drop)for(const h of f)o.push(s.dropIndex(h)),a++;if(a!==0)for(const h of o){const{sql:p,parameters:y}=h.compile();if(r.push({sql:p,parameters:y}),t.force)try{pt.debug("[SchemaManager]",p),await h.execute()}catch(v){throw new Error(`Failed to execute query: ${p}: ${v.message}`)}}}return r}};K(kw,"EXCLUDE_TABLES",["libsql_wasm_func_table","sqlite_sequence","_cf_KV"]);let aO=kw;const PT=We({name:pe(),name_singular:pe(),description:pe(),sort_field:pe({default:UB.data.default_primary_field}),sort_dir:pe({enum:["asc","desc"],default:"asc"}),primary_format:pe({enum:ET})},{default:{}}).partial(),$z=["regular","system","generated"],cI=Symbol.for("bknd:entity");var Bj,zj;const J3=class J3{constructor(t,n,r,s){Fe(this,Bj);Fe(this,zj);K(this,"name");K(this,"fields");K(this,"config");K(this,"data");K(this,"type","regular");if(typeof t!="string"||t.length===0)throw new Error("Entity name must be a non-empty string");this.name=t,this.config=Un(PT,r||{});const i=(n==null?void 0:n.filter(o=>o instanceof Dg).length)??0;if(i>1)throw new Error(`Entity "${t}" has more than one primary field`);this.fields=i===1?[]:[new Dg(void 0,{format:this.config.primary_format})],n&&n.forEach(o=>this.addField(o)),s&&(this.type=s),this[cI]=!0}static isEntity(t){return t?t[cI]===!0:!1}static create(t){return new J3(t.name,t.fields,t.config,t.type)}getType(){return this.type}getSelect(t,n){return this.getFields().filter(r=>!r.isHidden(n??"read")).map(r=>t?`${t}.${r.name} as ${r.name}`:r.name)}getDefaultSort(){return{by:this.config.sort_field??"id",dir:this.config.sort_dir??"asc"}}getAliasedSelectFrom(t,n,r){const s=n??this.name;return this.getFields().filter(i=>!i.isVirtual()&&!i.isHidden(r??"read")&&t.includes(i.name)).map(i=>s?`${s}.${i.name} as ${i.name}`:i.name)}getFillableFields(t,n){return this.getFields(n).filter(r=>r.isFillable(t))}getRequiredFields(){return this.getFields().filter(t=>t.isRequired())}getDefaultObject(){return this.getFields().reduce((t,n)=>(n.hasDefault()&&(t[n.name]=n.getDefault()),t),{})}getField(t){return this.fields.find(n=>n.name===t)}__replaceField(t,n){const r=this.fields.findIndex(s=>s.name===t);if(r===-1)throw new Error(`Field "${t}" not found on entity "${this.name}"`);this.fields[r]=n}getPrimaryField(){return this.fields[0]}id(){return this.getPrimaryField()}get label(){return this.config.name??Ch(this.name)}field(t){return this.getField(t)}hasField(t){const n=typeof t=="string"?t:t.name;return this.fields.findIndex(r=>r.name===n)!==-1}getFields(t=!1){return t?this.fields:this.fields.filter(n=>!n.isVirtual())}addField(t){const n=this.getField(t.name);if(n){if(JSON.stringify(n)===JSON.stringify(t)){pt.warn(`Field "${t.name}" already exists on entity "${this.name}", but it's the same, so skipping.`);return}throw new Error(`Field "${t.name}" already exists on entity "${this.name}"`)}this.fields.push(t)}__setData(t){this.data=t}isValidData(t,n,r){if(typeof t!="object"&&r!=null&&r.explain)throw new Error(`Entity "${this.name}" data must be an object`);const s=this.getFillableFields(n,!1);if((r==null?void 0:r.ignoreUnknown)!==!0){const i=s.map(c=>c.name),a=Object.keys(t).filter(c=>!i.includes(c));if(a.length>0&&r!=null&&r.explain)throw new Error(`Entity "${this.name}" data must only contain known keys, unknown: "${a}"`)}for(const i of s)if(!i.isValid(t==null?void 0:t[i.name],n)){if(pt.warn("invalid data given for",this.name,n,i.name,t[i.name]),r!=null&&r.explain)throw new Error(`Field "${i.name}" has invalid data: "${t[i.name]}"`);return!1}return!0}toSchema(t){let n;switch(t==null?void 0:t.context){case"create":case"update":n=this.getFillableFields(t.context);break;default:n=this.getFields(!0)}const r=Object.fromEntries(n.map(i=>[i.name,i])),s={type:"object",additionalProperties:!1,properties:tn(r,i=>{const o=i.isFillable(t==null?void 0:t.context);return{title:i.config.label,$comment:i.config.description,$field:i.type,readOnly:o?void 0:!0,...i.toJsonSchema()}})};return t!=null&&t.clean?JSON.parse(JSON.stringify(s)):s}toTypes(){return{name:this.name,type:this.type,comment:this.config.description,fields:Object.fromEntries(this.getFields().map(t=>[t.name,t.toType()]))}}toJSON(){return{type:this.type,fields:Object.fromEntries(this.fields.map(t=>[t.name,t.toJSON()])),config:this.config}}};Bj=new WeakMap,zj=new WeakMap;let mc=J3;function Vl(e){return["string","number","boolean"].includes(typeof e)}function Wge(e){return[!0,!1,0,1].includes(e)}class Gge{constructor(t,n,r){K(this,"expect");this.key=t,this.valid=n,this.validate=r}}function ji(e,t,n){return new Gge(e,t,n)}function Rz(e,t){const n=e.find(r=>r.key===t);if(!n)throw new Error(`Expression does not exist: "${t}"`);return n}const uI="$or";function DT(e,t,n=[]){const r=t.map(c=>c.key),s=Object.keys(e),i=[uI],o={};if(s.some(c=>c.startsWith("$")&&!i.includes(c)))throw new Error(`Invalid key '${s}'. Keys must not start with '$'.`);if(n.length>0&&s.some(c=>i.includes(c)))throw new Error(`Operand ${uI} can only appear at the top level.`);function a(c,u,f=[]){if(Rz(t,c).valid(u)===!1)throw new Error(`Invalid value at "${[...f,c].join(".")}": ${u}`)}for(const[c,u]of Object.entries(e))if(c==="$or")o.$or=DT(u,t,[...n,c]);else if(Vl(u))a("$eq",u,n),o[c]={$eq:u};else if(typeof u=="object"){const f=Object.keys(u).filter(h=>!r.includes(h));if(f.length===0){o[c]={};for(const[h,p]of Object.entries(u))a(h,p,[...n,c]),o[c][h]=p}else throw new Error(`Invalid key(s) at "${c}": ${f.join(", ")}. Expected expressions.`)}return o}function dI(e,t,n){const r=n.convert?DT(e,t):e,s={$and:[],$or:[],keys:new Set},{$or:i,...o}=r;function a(c,u,f,h=[]){const p=Rz(t,c);if(!p)throw new Error(`Expression does not exist: "${c}"`);if(!p.valid(u))throw new Error(`Invalid expected value at "${[...h,c].join(".")}": ${u}`);return p.validate(u,f,n.exp_ctx)}for(const[c,u]of Object.entries(o))for(const[f,h]of Object.entries(u)){const p=n.value_is_kv?c:n.object[c];s.$and.push(a(f,h,p,[c])),s.keys.add(c)}for(const[c,u]of Object.entries(i??{})){const f=n.value_is_kv?c:n.object[c];for(const[h,p]of Object.entries(u))s.$or.push(a(h,p,f,[c])),s.keys.add(c)}return s}function Yge(e){const t={$and:void 0,$or:void 0};return t.$and=e.$and.every(n=>!!n),t.$or=e.$or.some(n=>!!n),!!t.$and||!!t.$or}function Jge(e){return{convert:t=>DT(t,e),build:(t,n)=>dI(t,e,n),validate:(t,n)=>{const r=dI(t,e,n);return Yge(r)},expressions:e,expressionKeys:e.map(t=>t.key)}}function Ai(e){if(typeof e!="string")throw new Error(`Invalid key: ${e}`);return e}const Xge=[ji("$eq",e=>Vl(e),(e,t,n)=>n(Ai(t),"=",e)),ji("$ne",e=>Vl(e),(e,t,n)=>n(Ai(t),"!=",e)),ji("$gt",e=>Vl(e),(e,t,n)=>n(Ai(t),">",e)),ji("$gte",e=>Vl(e),(e,t,n)=>n(Ai(t),">=",e)),ji("$lt",e=>Vl(e),(e,t,n)=>n(Ai(t),"<",e)),ji("$lte",e=>Vl(e),(e,t,n)=>n(Ai(t),"<=",e)),ji("$isnull",e=>Wge(e),(e,t,n)=>n(Ai(t),e?"is":"is not",null)),ji("$in",e=>Array.isArray(e),(e,t,n)=>n(Ai(t),"in",e)),ji("$notin",e=>Array.isArray(e),(e,t,n)=>n(Ai(t),"not in",e)),ji("$between",e=>Array.isArray(e)&&e.length===2,(e,t,n)=>n.between(Ai(t),e[0],e[1])),ji("$like",e=>Vl(e),(e,t,n)=>n(Ai(t),"like",String(e).replace(/\*/g,"%")))],BN=Jge(Xge);class fc{static addClause(t,n){return Object.keys(n).length===0?t:t.where(r=>{const s=BN.build(n,{value_is_kv:!0,exp_ctx:r,convert:!0});return s.$or.length>0&&s.$and.length>0?r.and(s.$and).or(r.and(s.$or)):s.$or.length>0?r.or(s.$or):r.and(s.$and)})}static convert(t){return BN.convert(t)}static getPropertyNames(t){const{keys:n}=BN.build(t,{value_is_kv:!0,exp_ctx:()=>null,convert:!0});return Array.from(n)}}class sd{constructor(t,n,r={}){K(this,"config");K(this,"source");K(this,"target");K(this,"directions",["source","target"]);this.source=t,this.target=n;const s=this.constructor.schema;this.config=Un(s,r)}getReferenceQuery(t,n,r){return{}}helper(t){return new Qge(this,t)}other(t){const n=typeof t=="string"?t:t.name;if(this.source.entity.name===this.target.entity.name)return this.source.cardinality===1?this.target:this.source;if(this.source.entity.name===n)return this.target;if(this.target.entity.name===n)return this.source;throw new Error(`Entity "${n}" is not part of the relation "${this.source.entity.name} <-> ${this.target.entity.name}"`)}self(t){return this.other(t).entity.name===this.source.entity.name?this.target:this.source}ref(t){return this.source.reference===t?this.source:this.target}otherRef(t){return this.source.reference===t?this.target:this.source}visibleFrom(t){return this.directions.includes(t)}hydrate(t,n,r){const s=typeof t=="string"?t:t.name,i=this.ref(s),o=r.hydrate(i.entity.name,n);if(i.cardinality===1){if(Array.isArray(o)&&o.length>1)throw new Error(`Failed to hydrate "${i.entity.name}" with value: ${JSON.stringify(n)} (cardinality: 1)`);return o[0]}if(!o)throw new Error(`Failed to hydrate "${i.entity.name}" with value: ${JSON.stringify(n)} (cardinality: -)`);return o}isListableFor(t){return this.target.entity.name===t.name}get required(){return!!this.config.required}async $set(t,n,r){throw new Error("$set is not allowed")}async $create(t,n,r){throw new Error("$create is not allowed")}async $attach(t,n,r){throw new Error("$attach is not allowed")}async $detach(t,n,r){throw new Error("$detach is not allowed")}getName(){return[this.type().replace(":",""),this.source.entity.name,this.target.entity.name,this.config.mappedBy,this.config.inversedBy].filter(Boolean).join("_")}toJSON(){return{type:this.type(),source:this.source.entity.name,target:this.target.entity.name,config:this.config}}}K(sd,"schema",We({mappedBy:pe().optional(),inversedBy:pe().optional(),required:gt().optional()}));class Rh{constructor(t,n,r){K(this,"entity");K(this,"cardinality");K(this,"reference");this.entity=t,this.cardinality=r,this.reference=n}toJSON(){return{entity:this.entity.name,cardinality:this.cardinality,name:this.reference}}}const Kge=["cascade","set null","set default","restrict","no action"],kz=We({reference:pe(),target:pe(),target_field:pe({default:"id"}).optional(),target_field_type:pe({enum:["text","integer"],default:"integer"}).optional(),on_delete:pe({enum:Kge,default:"set null"}).optional(),...no.properties});class _s extends ro{constructor(){super(...arguments);K(this,"type","relation")}getSchema(){return kz}static create(n,r,s){const i=[r.reference??r.entity.name,r.entity.getPrimaryField().name].join("_");return new _s(i,{...s,required:n.required,reference:r.reference,target:r.entity.name,target_field:r.entity.getPrimaryField().name,target_field_type:r.entity.getPrimaryField().fieldType})}reference(){return this.config.reference}target(){return this.config.target}targetField(){return this.config.target_field}schema(){return Object.freeze({...super.schema(),type:this.config.target_field_type??"integer",references:`${this.config.target}.${this.config.target_field}`,onDelete:this.config.on_delete??"set null"})}transformRetrieve(n){return n}async transformPersist(n,r){throw new Error("RelationField: This function should not be called")}toJsonSchema(){var n,r;return this.toSchemaWrapIfRequired(jt({$ref:`${(n=this.config)==null?void 0:n.target}#/properties/${(r=this.config)==null?void 0:r.target_field}`}))}toType(){const n=this.config.target_field_type==="integer"?"number":"string";return{...super.toType(),type:n}}}const Ur={OneToOne:"1:1",ManyToOne:"n:1",ManyToMany:"m:n",Polymorphic:"poly"},Mw=class Mw extends sd{constructor(n,r,s,i){const o=(s==null?void 0:s.connectionTable)||Mw.defaultConnectionTable(n,r),a=new Rh(n,n.name),c=new Rh(r,r.name);super(a,c,s);K(this,"connectionEntity");K(this,"additionalFields",[]);K(this,"connectionTableMappedName");K(this,"em");this.connectionEntity=new mc(o,i,void 0,"generated"),this.connectionTableMappedName=(s==null?void 0:s.connectionTableMappedName)||o,this.additionalFields=i||[]}static defaultConnectionTable(n,r){return`${n.name}_${r.name}`}type(){return Ur.ManyToMany}isListableFor(){return!0}getField(n){const r=this.connectionEntity,s=r.fields.find(i=>i instanceof _s&&i.target()===n.name);if(!s||!(s instanceof _s))throw new Error(`Connection entity "${r.name}" does not have a relation to "${n.name}"`);return s}getQueryInfo(n){const r=this.other(n),s=this.connectionEntity,i=this.getField(n),o=this.getField(r.entity),a=`${n.name}.${n.getPrimaryField().name}`,c=`${s.name}.${i.name}`,u=`${s.name}.${o.name}`,f=[s.name,`${r.entity.name}.${r.entity.getPrimaryField().name}`,u],h=`${n.name}.${n.getPrimaryField().name}`;return{other:r,join:f,entityRef:a,selfRef:c,otherRef:u,groupBy:h}}getReferenceQuery(n,r){const{other:s,otherRef:i}=this.getQueryInfo(n);return{where:{[i]:r},join:[s.reference]}}buildJoin(n,r){const{other:s,join:i,entityRef:o,selfRef:a,groupBy:c}=this.getQueryInfo(n);return r.innerJoin(s.entity.name,o,a).innerJoin(...i).groupBy(c)}buildWith(n){if(!this.em)throw new Error("EntityManager not set, can't build");const r=this.em.connection.fn.jsonBuildObject;if(!r)throw new Error("Connection does not support jsonBuildObject");const s=5,{other:i,join:o,entityRef:a,selfRef:c}=this.getQueryInfo(n),u=this.connectionEntity.fields.filter(f=>!(f instanceof _s||f instanceof Dg));return f=>f.selectFrom(i.entity.name).select(h=>{const p=[];if(u.length>0){const y=this.connectionEntity.name;p.push(r(Object.fromEntries(u.map(v=>[v.name,h.ref(`${y}.${v.name}`)]))).as(this.connectionTableMappedName))}return p}).whereRef(a,"=",c).innerJoin(...o).limit(s)}initialize(n){this.em=n;const r=_s.create(this,this.source),s=_s.create(this,this.target);n.hasEntity(this.connectionEntity)?(this.connectionEntity.hasField(r)||this.connectionEntity.addField(r),this.connectionEntity.hasField(s)||this.connectionEntity.addField(s)):(this.connectionEntity.addField(r),this.connectionEntity.addField(s),n.addEntity(this.connectionEntity))}getName(){return[...Array.from(new Set([this.type().replace(":",""),this.connectionEntity.name,this.connectionTableMappedName].filter(Boolean)))].join("_")}};K(Mw,"schema",We({connectionTable:pe().optional(),connectionTableMappedName:pe().optional(),...sd.schema.properties}));let Ua=Mw;const Eg=class Eg extends sd{constructor(n,r,s={}){const i=s.mappedBy||r.name,o=s.inversedBy||n.name,a=typeof s.sourceCardinality=="number"&&s.sourceCardinality>0?s.sourceCardinality:void 0,c=new Rh(n,o,a),u=new Rh(r,i,1);super(c,u,s);K(this,"fieldConfig");this.fieldConfig=s.fieldConfig??{}}type(){return Ur.ManyToOne}initialize(n){const r=Ch(this.target.reference),s=_s.create(this,this.target,{label:r,...this.fieldConfig});this.source.entity.field(s.name)||this.source.entity.addField(_s.create(this,this.target,{label:r,...this.fieldConfig}))}getField(){const n=this.target.entity.getPrimaryField().name,r=this.source.entity.getField(`${this.target.reference}_${n}`);if(!(r instanceof _s))throw new Error(`Field "${this.target.reference}_${n}" not found on entity "${this.source.entity.name}"`);return r}queryInfo(n,r){const s=this.source.reference===r?"source":"target",i=this[s],o=this[s==="source"?"target":"source"];let a,c,u;s==="source"?(a=this.source.reference,c=`${a}.${this.getField().name}`,u=`${n.name}.${i.entity.getPrimaryField().name}`):(a=this.target.reference,c=`${a}.${n.getPrimaryField().name}`,u=`${n.name}.${this.getField().name}`);const f=`${n.name}.${n.getPrimaryField().name}`;return{other:o,self:i,relationRef:a,entityRef:c,otherRef:u,groupBy:f}}getReferenceQuery(n,r,s){const i=this.source.reference===s?"source":"target",o=this[i],a=this[i==="source"?"target":"source"];return{where:{[`${a.reference}_${a.entity.getPrimaryField().name}`]:r},join:a.entity.name===o.entity.name?[]:[a.entity.name]}}buildJoin(n,r,s){const{self:i,entityRef:o,otherRef:a,groupBy:c}=this.queryInfo(n,s);return r.innerJoin(i.entity.name,o,a).groupBy(c)}buildWith(n,r){const{self:s,entityRef:i,otherRef:o,relationRef:a}=this.queryInfo(n,r);return c=>c.selectFrom(`${s.entity.name} as ${a}`).whereRef(i,"=",o).$if(s.cardinality===1,u=>u.limit(1))}async $set(n,r,s){if(typeof s!="object")throw new Error(`Invalid value for relation field "${r}" given, expected object.`);const i=this.source.entity,a=this.helper(i.name).getMutationInfo();if(!a.$set)throw new Error(`Cannot perform $set for relation "${r}"`);const c=a.local_field,u=this.getField(),f=s[Object.keys(s)[0]];if(!c||!(u instanceof _s))throw new Error(`Cannot perform $set for relation "${r}"`);if(f===null&&!u.isRequired())return[c,null];if(!(await n.repository(u.target()).exists({[u.targetField()]:f})).data.exists){const p=u.targetField();throw new Error(`Cannot connect "${i.name}.${r}" to "${u.target()}.${p}" = "${f}": not found.`)}return[c,f]}};K(Eg,"DEFAULTS",{with_limit:5}),K(Eg,"schema",We({sourceCardinality:jt().optional(),with_limit:jt({default:Eg.DEFAULTS.with_limit}).optional(),fieldConfig:ze({label:pe()}).optional(),...sd.schema.properties}));let Oc=Eg;class lO extends Oc{constructor(t,n,r){const{mappedBy:s,inversedBy:i,required:o}=r||{};super(t,n,{mappedBy:s,inversedBy:i,sourceCardinality:1,required:o,with_limit:1})}type(){return Ur.OneToOne}isListableFor(){return!1}async $set(t,n,r){throw new Error("$set is not allowed")}async $create(t,n,r){if(r===null||typeof r!="object")throw new Error(`Invalid value for relation field "${n}" given, expected object.`);const s=this.other(this.source.entity).entity,o=this.helper(this.source.entity.name).getMutationInfo(),a=o.primary,c=o.local_field;if(!o.$create||!a||!c)throw new Error(`Cannot perform $create for relation "${n}"`);try{const{data:u}=await t.mutator(s).insertOne(r),f=u[a];return[c,f]}catch{throw new Error(`Error performing $create on "${s.name}".`)}}}class Vg extends sd{constructor(t,n,r={}){const s=r.mappedBy||n.name,i=r.inversedBy||t.name,o=typeof r.targetCardinality=="number"&&r.targetCardinality>0?r.targetCardinality:void 0,a=new Rh(t,i,1),c=new Rh(n,s,o);super(a,c,r),this.directions=["source"]}type(){return Ur.Polymorphic}queryInfo(t){const n=this.other(t),r=`${n.entity.name}.${this.getReferenceField().name}`,s=`${t.name}.${this.config.mappedBy}`,i=`${n.entity.name}.${this.config.mappedBy}`,o=`${t.name}.${t.getPrimaryField().name}`,a=`${n.entity.name}.${this.getEntityIdField().name}`,c=`${t.name}.${t.getPrimaryField().name}`;return{other:n,whereLhs:r,reference:s,reference_other:i,entityRef:o,otherRef:a,groupBy:c}}buildJoin(t,n){const{other:r,whereLhs:s,reference:i,entityRef:o,otherRef:a,groupBy:c}=this.queryInfo(t);return n.innerJoin(r.entity.name,u=>u.onRef(o,"=",a).on(s,"=",i)).groupBy(c)}getReferenceQuery(t,n){const r=this.queryInfo(t);return{where:{[this.getReferenceField().name]:r.reference_other,[this.getEntityIdField().name]:n}}}buildWith(t){const{other:n,whereLhs:r,reference:s,entityRef:i,otherRef:o}=this.queryInfo(t);return a=>a.selectFrom(n.entity.name).where(r,"=",s).whereRef(i,"=",o).$if(n.cardinality===1,c=>c.limit(1))}isListableFor(t){return this.source.entity.name===t.name&&this.target.cardinality!==1}getReferenceField(){return new Nx("reference",{hidden:!0,fillable:["create"]})}getEntityIdField(){return new Nx("entity_id",{hidden:!0,fillable:["create"]})}initialize(t){const n=this.getReferenceField(),r=this.getEntityIdField();this.target.entity.field(n.name)||this.target.entity.addField(n),this.target.entity.field(r.name)||this.target.entity.addField(r)}}K(Vg,"schema",We({targetCardinality:jt().optional(),...sd.schema.properties}));const fI=["$set","$create","$attach","$detach"];class Qge{constructor(t,n){K(this,"relation");K(this,"access");K(this,"self");K(this,"other");if(this.relation=t,t.source.entity.name===n)this.access="source",this.self=t.source,this.other=t.target;else if(t.target.entity.name===n)this.access="target",this.self=t.target,this.other=t.source;else throw new Error(`Entity "${n}" is not part of the relation "${t.source.entity.name} <-> ${t.target.entity.name}"`)}getMutationInfo(){var s,i;const t={$set:!1,$create:!1,$attach:!1,$detach:!1};let n,r;switch(this.relation.type()){case Ur.ManyToOne:typeof this.self.cardinality>"u"&&this.other.cardinality===1&&(t.$set=!0,n=(s=this.relation.getField())==null?void 0:s.name,r=this.other.entity.getPrimaryField().name);break;case Ur.OneToOne:this.access==="source"&&(t.$create=!0,t.$set=!0,n=(i=this.relation.getField())==null?void 0:i.name,r=this.other.entity.getPrimaryField().name);break;case Ur.ManyToMany:this.access==="source"&&(t.$attach=!0,t.$detach=!0,r=this.other.entity.getPrimaryField().name);break}return{reference:this.other.reference,local_field:n,...t,primary:r,cardinality:this.other.cardinality,relation_type:this.relation.type()}}}class Zge{constructor(t,n){this.entity=t,this.em=n}getRelationalKeys(){const t=[];return this.entity.type==="generated"&&this.em.relations.all.find(r=>r instanceof Ua&&r.connectionEntity.name===this.entity.name)instanceof Ua&&t.push(...this.entity.fields.filter(r=>r.type==="relation").map(r=>r.name)),this.em.relationsOf(this.entity.name).map(n=>{const r=n.helper(this.entity.name).getMutationInfo();t.push(r.reference),r.local_field&&t.push(r.local_field)}),t}async persistRelationField(t,n,r){if(r===null&&!t.isRequired())return[n,r];if(typeof r=="object")throw new Error(`Invalid value for relation field "${n}" given, expected primitive.`);if(!(await this.em.repository(t.target()).exists({[t.targetField()]:r})).data.exists){const i=t.targetField();throw new Error(`Cannot connect "${this.entity.name}.${n}" to "${t.target()}.${i}" = "${r}": not found.`)}return[n,r]}async persistReference(t,n,r){if(typeof r!="object"||r===null||typeof r>"u")throw new Error(`Invalid value for relation "${n}" given, expected object to persist reference. Like '{$set: {id: 1}}'.`);const s=Object.keys(r)[0];if(!fI.includes(s))throw new Error(`Invalid operation "${s}" for relation "${n}". Allowed: ${fI.join(", ")}`);const i=r[s];return await t[s](this.em,n,i)}async persistRelation(t,n){const r=this.entity.getField(t);if(r instanceof _s)return this.persistRelationField(r,t,n);const s=this.em.relationOf(this.entity.name,t);if(s)return this.persistReference(s,t,n);throw new Error(`Relation "${t}" failed to resolve on entity "${this.entity.name}": Unable to resolve relation origin.`)}}const LT={[Ur.OneToOne]:{schema:lO.schema,cls:lO},[Ur.ManyToOne]:{schema:Oc.schema,cls:Oc},[Ur.ManyToMany]:{schema:Ua.schema,cls:Ua},[Ur.Polymorphic]:{schema:Vg.schema,cls:Vg}},eye={relation:{schema:kz,field:_s}};class Mz{constructor(t,n={}){K(this,"results",[]);K(this,"time",0);this.conn=t,this.options=n}get(){if(!this.results)throw new Error("Result not executed");return Array.isArray(this.results)?this.results??[]:this.results[0]}first(){const t=this.get();return(Array.isArray(t)?t[0]:t)??{}}get sql(){return this.first().sql}get parameters(){return this.first().parameters}get data(){var t;return this.options.single?(t=this.first().data)==null?void 0:t[0]:this.first().data??[]}async execute(t){var r,s,i,o;const n=Array.isArray(t)?t:[t];for(const a of n){const c=a.compile();await((s=(r=this.options).beforeExecute)==null?void 0:s.call(r,c));try{const u=performance.now(),f=await this.conn.executeQuery(c);this.time=Number.parseFloat((performance.now()-u).toFixed(2)),this.results.push({...f,data:(o=(i=this.options).hydrator)==null?void 0:o.call(i,f.rows),items:f.rows.length,time:this.time,sql:c.sql,parameters:[...c.parameters]})}catch(u){if(this.options.onError)await this.options.onError(u);else throw u}}return this}additionalMetaKeys(){return[]}toJSON(){const{rows:t,data:n,...r}=this.first(),s=Hr()?["items","time","sql","parameters"]:["items","time"],i=yF(r,[...s,...this.additionalMetaKeys()]);return{data:this.data,meta:i}}}class tye extends Mz{constructor(t,n,r){const s=(r==null?void 0:r.logParams)===void 0?Hr():r.logParams;super(t.connection,{hydrator:i=>t.hydrate(n.name,i),beforeExecute:i=>{r!=null&&r.silent||pt.debug(`[Mutation]
${i.sql}
`,s?i.parameters:void 0)},onError:i=>{if(!(r!=null&&r.silent))throw pt.error("[ERROR] Mutator:",i.message),i},...r}),this.em=t,this.entity=n}}const ma=class ma{constructor(t,n,r){K(this,"emgr");K(this,"__unstable_disable_system_entity_creation",!0);this.em=t,this.entity=n,this.options=r,this.emgr=(r==null?void 0:r.emgr)??new Fy(Ex)}__unstable_toggleSystemEntityCreation(t){this.__unstable_disable_system_entity_creation=t}get conn(){return this.em.connection.kysely}async getValidatedData(t,n){const r=this.entity;if(!n)throw new Error("Context must be provided for validation");const s=Object.keys(t),i={},o=new Zge(r,this.em),a=o.getRelationalKeys();for(const c of s){if(a.includes(c)){const f=await o.persistRelation(c,t[c]);if(Array.isArray(f)){const[h,p]=f;i[h]=p}continue}const u=r.getField(c);if(!u)throw new Error(`Field "${c}" not found on entity "${r.name}". Fields: ${r.getFillableFields().map(f=>f.name).join(", ")}`);if(!u.isFillable(n))throw new Error(`Field "${c}" is not fillable on entity "${r.name}"`);i[c]=await u.transformPersist(t[c],this.em,n),i[c]=this.em.connection.toDriver(i[c],u)}if(Object.keys(i).length===0)throw new Error(`No data left to update "${r.name}"`);return i}async performQuery(t,n){return await new tye(this.em,this.entity,{silent:!1,...n}).execute(t)}async insertOne(t){const n=this.entity;if(n.type==="system"&&this.__unstable_disable_system_entity_creation)throw new Error(`Creation of system entity "${n.name}" is disabled`);const r=await this.emgr.emit(new ma.Events.MutatorInsertBefore({entity:n,data:t})),s=r.returned?r.params.data:t;let i=await this.getValidatedData({...n.getDefaultObject(),...s},"create");const o=n.getRequiredFields();for(const h of o)if(typeof i[h.name]>"u"||i[h.name]===null)throw new Error(`Field "${h.name}" is required`);const a=n.getPrimaryField(),c=a.getNewValue();c&&(i={[a.name]:c,...i});const u=this.conn.insertInto(n.name).values(i).returning(n.getSelect()),f=await this.performQuery(u,{single:!0});return await this.emgr.emit(new ma.Events.MutatorInsertAfter({entity:n,data:f.data,changed:i})),f}async updateOne(t,n){const r=this.entity;if(!t)throw new Error("ID must be provided for update");const s=await this.emgr.emit(new ma.Events.MutatorUpdateBefore({entity:r,entityId:t,data:n})),i=s.returned?s.params.data:n,o=await this.getValidatedData(i,"update"),a=this.conn.updateTable(r.name).set(o).where(r.id().name,"=",t).returning(r.getSelect()),c=await this.performQuery(a,{single:!0});return await this.emgr.emit(new ma.Events.MutatorUpdateAfter({entity:r,entityId:t,data:c.data,changed:o})),c}async deleteOne(t){const n=this.entity;if(!t)throw new Error("ID must be provided for deletion");await this.emgr.emit(new ma.Events.MutatorDeleteBefore({entity:n,entityId:t}));const r=this.conn.deleteFrom(n.name).where(n.id().name,"=",t).returning(n.getSelect()),s=await this.performQuery(r,{single:!0});return await this.emgr.emit(new ma.Events.MutatorDeleteAfter({entity:n,entityId:t,data:s.data})),s}getValidOptions(t){const n=this.entity,r={};if(t!=null&&t.where){const s=fc.getPropertyNames(t.where).filter(i=>typeof n.getField(i)>"u");if(s.length>0)throw new Ql(`Invalid where field(s): ${s.join(", ")}`);r.where=t.where}return r}appendWhere(t,n){const r=this.entity;if(r.name,n){const s=fc.getPropertyNames(n).filter(i=>typeof r.getField(i)>"u");if(s.length>0)throw new Ql(`Invalid where field(s): ${s.join(", ")}`);return fc.addClause(t,n)}return t}async deleteWhere(t){const n=this.entity;if(!t||typeof t!="object"||Object.keys(t).length===0)throw new Error("Where clause must be provided for mass deletion");const r=this.appendWhere(this.conn.deleteFrom(n.name),t).returning(n.getSelect());return await this.performQuery(r)}async updateWhere(t,n){const r=this.entity,s=await this.getValidatedData(t,"update");if(!n||typeof n!="object"||Object.keys(n).length===0)throw new Error("Where clause must be provided for mass update");const i=this.appendWhere(this.conn.updateTable(r.name),n).set(s).returning(r.getSelect());return await this.performQuery(i)}async insertMany(t){const n=this.entity;if(n.type==="system"&&this.__unstable_disable_system_entity_creation)throw new Error(`Creation of system entity "${n.name}" is disabled`);const r=[];for(const i of t){const o={...n.getDefaultObject(),...await this.getValidatedData(i,"create")},a=n.getRequiredFields();for(const c of a)if(typeof o[c.name]>"u"||o[c.name]===null)throw new Error(`Field "${c.name}" is required`);r.push(o)}const s=this.conn.insertInto(n.name).values(r).returning(n.getSelect());return await this.performQuery(s)}};K(ma,"Events",Ex);let cO=ma;const Ax=pe({}),hI=Qt([Ax,Sn(Ax,{uniqueItems:!0})],{default:[],coerce:e=>Array.isArray(e)?e:typeof e=="string"?e.includes(",")?e.split(","):[e].filter(Boolean):[]}),Yb={by:"id",dir:"asc"},nye=ze({by:pe(),dir:pe({enum:["asc","desc"]}).optional()}).strict(),rye=Qt([pe(),nye],{default:Yb,coerce:e=>{if(typeof e=="string"){if(/^-?[a-zA-Z_][a-zA-Z0-9_.]*$/.test(e)){const t=e[0]==="-"?"desc":"asc";return{by:t==="desc"?e.slice(1):e,dir:t}}else if(/^{.*}$/.test(e))return{...Yb,...JSON.parse(e)};return pt.warn(`Invalid sort given: '${JSON.stringify(e)}'`),Yb}else if(Oh(e))return{...Yb,...e};return e}}),sye=Qt([pe(),ze({})],{default:{},examples:[{attribute:{$eq:1}}],coerce:e=>{if(e==null||e==="")return{};const t=typeof e=="string"?JSON.parse(e):e;return fc.convert(t)}}),iye=e=>Qt([Ax,Sn(Ax),e],{coerce:function(t,n={}){let r=t;if(typeof r=="string"&&(r.match(/^\{/)||r.match(/^\[/)?r=JSON.parse(r):r.includes(",")?r=r.split(","):r=[r]),Array.isArray(r)&&(r=r.reduce((s,i)=>(s[i]={},s),{})),Oh(r))for(const s in r)r[s]=e.coerce(r[s],n);return r}}),Ks=Kle(e=>ze({limit:jt({default:10}),offset:jt({default:0}),sort:rye,where:sye,select:hI,join:hI,with:iye(e)}).partial()),oye=()=>Ks.template({},{withOptional:!0});class Tx{static buildClause(t,n,r,s){const i=t.relationOf(r.name,s);if(!i)throw new Error(`Relation "${s}" not found`);return i.buildJoin(r,n,s)}static getJoinedEntityNames(t,n,r){return r.flatMap(s=>{const i=t.relationOf(n.name,s);if(!i)throw new Error(`Relation "${s}" not found`);const o=i.other(n);return i instanceof Oc?[o.entity.name]:i instanceof Ua?[o.entity.name,i.connectionEntity.name]:[]})}static addClause(t,n,r,s){if(s.length===0)return n;let i=n;for(const o of s)i=Tx.buildClause(t,i,r,o);return i}}class aye extends Mz{constructor(t,n,r){super(t.connection,{hydrator:s=>t.hydrate(n.name,s),beforeExecute:s=>{r!=null&&r.silent||pt.debug(`Query:
${s.sql}
`,s.parameters)},onError:s=>{if((r==null?void 0:r.silent)!==!0)throw pt.error("Repository:",String(s)),s},...r}),this.em=t,this.entity=n}shouldIncludeCounts(t){return t===void 0?this.conn.supports("softscans"):t}async execute(t,n){var s,i,o,a,c,u;if(this.shouldIncludeCounts(n==null?void 0:n.includeCounts)){const f=(v="count")=>this.conn.kysely.fn.countAll().as(v),h=t.clearSelect().select(f()).clearLimit().clearOffset().clearGroupBy().clearOrderBy(),p=this.conn.kysely.selectFrom(this.entity.name).select(f()),y=t.compile();(i=(s=this.options).beforeExecute)==null||i.call(s,y);try{const v=performance.now(),[x,E,N]=await this.em.connection.executeQueries(y,h,p);this.time=Number.parseFloat((performance.now()-v).toFixed(2)),this.results.push({...x,data:(a=(o=this.options).hydrator)==null?void 0:a.call(o,x.rows),items:x.rows.length,count:n6(((c=E.rows[0])==null?void 0:c.count)??0),total:n6(((u=N.rows[0])==null?void 0:u.count)??0),time:this.time,sql:y.sql,parameters:[...y.parameters]})}catch(v){if(this.options.onError)await this.options.onError(v);else throw v}return this}return await super.execute(t)}get count(){return this.first().count}get total(){return this.first().total}additionalMetaKeys(){return["count","total"]}}const Yl=class Yl{constructor(t,n,r={}){K(this,"emgr");this.em=t,this.entity=n,this.options=r,this.emgr=(r==null?void 0:r.emgr)??new Fy(Ex)}cloneFor(t,n={}){return new Yl(this.em,this.em.entity(t),{...this.options,...n,emgr:this.emgr})}get conn(){return this.em.connection.kysely}checkIndex(t,n,r){var i;!this.em.getIndexedFields(t).map(o=>o.name).includes(n)&&((i=this.options)==null?void 0:i.silent)!==!0&&pt.warn(`Field "${t}.${n}" used in "${r}" is not indexed`)}getValidOptions(t){var s;const n=this.entity,r={...structuredClone(oye()),sort:n.getDefaultSort(),select:n.getSelect()};if(!t)return r;if(t.sort){if(!r.select.includes(t.sort.by))throw new Ql(`Invalid sort field "${t.sort.by}"`);if(!["asc","desc"].includes(t.sort.dir))throw new Ql(`Invalid sort direction "${t.sort.dir}"`);this.checkIndex(n.name,t.sort.by,"sort"),r.sort={dir:t.sort.dir??"asc",by:t.sort.by}}if(t.select&&t.select.length>0){const i=t.select.filter(o=>!r.select.includes(o));if(i.length>0)throw new Ql(`Invalid select field(s): ${i.join(", ")}`).context({entity:n.name,valid:r.select});r.select=t.select}if(t.with&&(Ug.validateWiths(this.em,n.name,t.with),r.with=t.with),t.join&&t.join.length>0)for(const i of t.join){if(!this.em.relationOf(n.name,i))throw new Ql(`JOIN: "${i}" is not a relation of "${n.name}"`);r.join.push(i)}if(t.where){const i=[n.name];((s=r.join)==null?void 0:s.length)>0&&i.push(...Tx.getJoinedEntityNames(this.em,n,r.join));const o=fc.getPropertyNames(t.where).filter(a=>{if(a.includes(".")){const[c,u]=a.split(".");return i.includes(c)?(this.checkIndex(c,u,"where"),!this.em.entity(c).getField(u)):!0}return this.checkIndex(n.name,a,"where"),typeof n.getField(a)>"u"});if(o.length>0)throw new Ql(`Invalid where field(s): ${o.join(", ")}`).context({aliases:i,entity:n.name});r.where=t.where}return t.limit&&(r.limit=t.limit),t.offset&&(r.offset=t.offset),r}async performQuery(t,n,r){return await new aye(this.em,this.entity,{silent:this.options.silent,...n}).execute(t,{includeCounts:(r==null?void 0:r.includeCounts)??this.options.includeCounts})}async triggerFindBefore(t,n){const r=n.limit===1?Yl.Events.RepositoryFindOneBefore:Yl.Events.RepositoryFindManyBefore;await this.emgr.emit(new r({entity:t,options:n}))}async triggerFindAfter(t,n,r){n.limit===1?await this.emgr.emit(new Yl.Events.RepositoryFindOneAfter({entity:t,options:n,data:r})):await this.emgr.emit(new Yl.Events.RepositoryFindManyAfter({entity:t,options:n,data:r}))}async single(t,n){await this.triggerFindBefore(this.entity,n);const r=await this.performQuery(t,{single:!0});return await this.triggerFindAfter(this.entity,n,r.data),r}addOptionsToQueryBuilder(t,n,r){var h,p;const s=this.entity;let i=t??this.conn.selectFrom(s.name);const o=(r==null?void 0:r.validate)!==!1?this.getValidOptions(n):n;if(!o)return i;const a=(r==null?void 0:r.alias)??s.name,c=y=>`${a}.${y}`,u=(r==null?void 0:r.ignore)??[],f={limit:10,offset:0,...r==null?void 0:r.defaults};return!u.includes("select")&&o.select&&(i=i.select(s.getAliasedSelectFrom(o.select,a))),!u.includes("with")&&o.with&&(i=Ug.addClause(this.em,i,s,o.with)),!u.includes("join")&&o.join&&(i=Tx.addClause(this.em,i,s,o.join)),!u.includes("where")&&o.where&&(i=fc.addClause(i,o.where)),u.includes("limit")||(i=i.limit(o.limit??f.limit),u.includes("offset")||(i=i.offset(o.offset??f.offset))),u.includes("sort")||(i=i.orderBy(c(((h=o.sort)==null?void 0:h.by)??"id"),((p=o.sort)==null?void 0:p.dir)??"asc")),i}buildQuery(t,n=[]){const r=this.entity,s=this.getValidOptions(t);return{qb:this.addOptionsToQueryBuilder(void 0,s,{ignore:n,alias:r.name,validate:!1}),options:s}}async findId(t,n){const{qb:r,options:s}=this.buildQuery({...n,where:{[this.entity.getPrimaryField().name]:t},limit:1},["offset","sort"]);return this.single(r,s)}async findOne(t,n){const{qb:r,options:s}=this.buildQuery({...n,where:t,limit:1});return await this.single(r,s)}async findMany(t){const{qb:n,options:r}=this.buildQuery(t);await this.triggerFindBefore(this.entity,r);const s=await this.performQuery(n);return await this.triggerFindAfter(this.entity,r,s.data),s}async findManyByReference(t,n,r){const s=this.entity,o=this.em.relations.listableRelationsOf(s).find(f=>f.ref(n).reference===n);if(!o)throw new Error(`Relation "${n}" not found or not listable on entity "${s.name}"`);const a=o.other(s).entity,c=o.getReferenceQuery(a,t,n);if(!("where"in c)||Object.keys(c.where).length===0)throw new Error(`Invalid reference query for "${n}" on entity "${a.name}"`);const u={...r,...c,where:{...c.where,...(r==null?void 0:r.where)??{}}};return this.cloneFor(a).findMany(u)}async count(t){const n=this.entity,r=this.getValidOptions({where:t}),s=this.conn.fn.count(Pg`*`).as("count");let i=this.conn.selectFrom(n.name).select(s);return r.where&&(i=fc.addClause(i,r.where)),await this.performQuery(i,{hydrator:o=>{var a;return{count:((a=o[0])==null?void 0:a.count)??0}}},{includeCounts:!1})}async exists(t){const n=this.entity,r=this.getValidOptions({where:t}),s=this.conn.fn.count(Pg`*`).as("count");let i=this.conn.selectFrom(n.name).select(s);return i=fc.addClause(i,r.where).limit(1),await this.performQuery(i,{hydrator:o=>{var a;return{exists:((a=o[0])==null?void 0:a.count)>0}}})}};K(Yl,"Events",jB);let uO=Yl;class Ug{static addClause(t,n,r,s){if(!s||!Oh(s))return console.warn(`'withs' undefined or invalid, given: ${JSON.stringify(s)}`),n;const i=t.connection.fn;let o=n;for(const[a,c]of Object.entries(s)){const u=t.relationOf(r.name,a);if(!u)throw new Error(`Relation "${r.name}<>${a}" not found`);const f=u.ref(a).cardinality,h=f===1?i.jsonObjectFrom:i.jsonArrayFrom;if(!h)throw new Error("Connection does not support jsonObjectFrom/jsonArrayFrom");const p=u.other(r);o=o.select(y=>{let v=u.buildWith(r,a)(y);return c&&(v=t.repo(p.entity).addOptionsToQueryBuilder(v,c,{ignore:["with","join",f===1?"limit":void 0].filter(Boolean)})),c.with&&(v=Ug.addClause(t,v,p.entity,c.with)),h(v).as(p.reference)})}return o}static validateWiths(t,n,r){let s=0;if(!r||!Oh(r))return r&&console.warn(`'withs' invalid, given: ${JSON.stringify(r)}`),s;const i=[];for(const[o,a]of Object.entries(r)){if(!t.relationOf(n,o))throw new Ql(`WITH: "${o}" is not a relation of "${n}"`);s++,"with"in a&&i.push(Ug.validateWiths(t,o,a.with))}return i.length>0&&(s+=Math.max(...i)),s}}const Ng=class Ng{constructor(t,n,r=[],s=[],i){K(this,"connection");K(this,"_entities",[]);K(this,"_relations",[]);K(this,"_indices",[]);K(this,"_schema");K(this,"emgr");if(t.forEach(o=>this.addEntity(o)),r.forEach(o=>this.addRelation(o)),s.forEach(o=>this.addIndex(o)),!vB.isConnection(n))throw new Kue("");this.connection=n,this.emgr=i??new Fy,this.emgr.registerEvents(Ng.Events)}fork(){return new Ng(this._entities,this.connection,this._relations,this._indices)}clear(){return this._entities=[],this._relations=[],this._indices=[],this}get entities(){return this._entities}get relations(){return new AB(this._relations)}get indices(){return this._indices}async ping(){return(await Pg`SELECT 1`.execute(this.connection.kysely)).rows.length>0}addEntity(t){const n=this.entities.find(r=>r.name===t.name);if(n){if(JSON.stringify(n)===JSON.stringify(t)){pt.warn(`Entity "${t.name}" already exists, but it's the same, skipping adding it.`);return}throw new Error(`Entity "${t.name}" already exists`)}this.entities.push(t)}__replaceEntity(t,n=t.name){const r=this._entities.findIndex(s=>s.name===n);if(r===-1)throw new Error(`Entity "${n}" not found and cannot be replaced`);this._entities[r]=t}entity(t,n){const r=this.entities.find(s=>mc.isEntity(t)?s.name===t.name:s.name===t);if(!r){if(n===!0)return;throw new ede(mc.isEntity(t)?t.name:t)}return r}hasEntity(t){const n=typeof t=="string"?t:t.name;return this.entities.some(r=>r.name===n)}hasIndex(t){const n=typeof t=="string"?t:t.name;return this.indices.some(r=>r.name===n)}getIndexedFields(t){const n=this.entity(t),r=this.getIndicesOf(n),s=n.fields.filter(o=>o.type==="relation"),i=r.map(o=>o.fields[0]);return[n.getPrimaryField(),...s,...i].filter(Boolean)}addRelation(t){if(!this.entity(t.source.entity.name)||!this.entity(t.target.entity.name))throw new Error("Relation source or target entity not found");if(this._relations.find(r=>{const s=r.source.entity.name===t.source.entity.name&&r.target.entity.name===t.target.entity.name,i=r.source.reference===t.source.reference&&r.target.reference===t.target.reference;return s&&i}))throw new Error(`Relation "${t.type}" between "${t.source.entity.name}" and "${t.target.entity.name}" already exists`);this._relations.push(t),t.initialize(this)}relationsOf(t){return this.relations.relationsOf(this.entity(t))}relationOf(t,n){return this.relations.relationOf(this.entity(t),n)}hasRelations(t){return this.relations.hasRelations(this.entity(t))}relatedEntitiesOf(t){return this.relations.relatedEntitiesOf(this.entity(t))}relationReferencesOf(t){return this.relations.relationReferencesOf(this.entity(t))}repository(t,n={}){return this.repo(t,n)}repo(t,n={}){return new uO(this,this.entity(t),{...n,emgr:this.emgr})}mutator(t){return new cO(this,this.entity(t),{emgr:this.emgr})}addIndex(t,n=!1){if(this.indices.find(r=>r.name===t.name)){if(n)throw new Error(`Index "${t.name}" already exists`);return}this._indices.push(t)}getIndicesOf(t){const n=mc.isEntity(t)?t:this.entity(t);return this.indices.filter(r=>r.entity.name===n.name)}schema(){return this._schema||(this._schema=new aO(this)),this._schema}hydrate(t,n){if(!Array.isArray(n)||n.length===0)return[];const r=this.entity(t),s=[];for(const i of n){for(let[o,a]of Object.entries(i)){const c=r.getField(o);if(!c||c.isVirtual()){const u=this.relationOf(t,o);if(u){if(!a)continue;a=u.hydrate(o,Array.isArray(a)?a:[a],this),i[o]=a;continue}else if(c!=null&&c.isVirtual())continue;throw new Error(`Field "${o}" not found on entity "${r.name}"`)}try{a===null&&c.hasDefault()&&(i[o]=c.getDefault()),a=this.connection.fromDriver(a,c),i[o]=c.transformRetrieve(a)}catch(u){throw new Que(`"${c.type}" field "${o}" on entity "${r.name}": ${u.message}`)}}s.push(i)}return s}toJSON(){return{entities:Object.fromEntries(this.entities.map(t=>[t.name,t.toJSON()])),relations:Object.fromEntries(this.relations.all.map(t=>[t.getName(),t.toJSON()])),indices:Object.fromEntries(this.indices.map(t=>[t.name,t.toJSON()]))}}};K(Ng,"Events",{...Ex,...jB});let $x=Ng;var mI=(e,t,n)=>(r,s)=>{let i=-1;return o(0);async function o(a){if(a<=i)throw new Error("next() called multiple times");i=a;let c,u=!1,f;if(e[a]?(f=e[a][0][0],r.req.routeIndex=a):f=a===e.length&&s||void 0,f)try{c=await f(r,()=>o(a+1))}catch(h){if(h instanceof Error&&t)r.error=h,c=await t(h,r),u=!0;else throw h}else r.finalized===!1&&n&&(c=await n(r));return c&&(r.finalized===!1||u)&&(r.res=c),r}},lye=Symbol(),cye=async(e,t=Object.create(null))=>{const{all:n=!1,dot:r=!1}=t,i=(e instanceof Iz?e.raw.headers:e.headers).get("Content-Type");return i!=null&&i.startsWith("multipart/form-data")||i!=null&&i.startsWith("application/x-www-form-urlencoded")?uye(e,{all:n,dot:r}):{}};async function uye(e,t){const n=await e.formData();return n?dye(n,t):{}}function dye(e,t){const n=Object.create(null);return e.forEach((r,s)=>{t.all||s.endsWith("[]")?fye(n,s,r):n[s]=r}),t.dot&&Object.entries(n).forEach(([r,s])=>{r.includes(".")&&(hye(n,r,s),delete n[r])}),n}var fye=(e,t,n)=>{e[t]!==void 0?Array.isArray(e[t])?e[t].push(n):e[t]=[e[t],n]:t.endsWith("[]")?e[t]=[n]:e[t]=n},hye=(e,t,n)=>{let r=e;const s=t.split(".");s.forEach((i,o)=>{o===s.length-1?r[i]=n:((!r[i]||typeof r[i]!="object"||Array.isArray(r[i])||r[i]instanceof File)&&(r[i]=Object.create(null)),r=r[i])})},pI=e=>S1(e,fT),ph,Qs,Ga,Pz,Dz,dO,rc,T8,Iz=(T8=class{constructor(e,t="/",n=[[]]){Fe(this,Ga);K(this,"raw");Fe(this,ph);Fe(this,Qs);K(this,"routeIndex",0);K(this,"path");K(this,"bodyCache",{});Fe(this,rc,e=>{const{bodyCache:t,raw:n}=this,r=t[e];if(r)return r;const s=Object.keys(t)[0];return s?t[s].then(i=>(s==="json"&&(i=JSON.stringify(i)),new Response(i)[e]())):t[e]=n[e]()});this.raw=e,this.path=t,Be(this,Qs,n),Be(this,ph,{})}param(e){return e?ot(this,Ga,Pz).call(this,e):ot(this,Ga,Dz).call(this)}query(e){return sce(this.url,e)}queries(e){return ice(this.url,e)}header(e){if(e)return this.raw.headers.get(e)??void 0;const t={};return this.raw.headers.forEach((n,r)=>{t[r]=n}),t}async parseBody(e){var t;return(t=this.bodyCache).parsedBody??(t.parsedBody=await cye(this,e))}json(){return Y(this,rc).call(this,"json")}text(){return Y(this,rc).call(this,"text")}arrayBuffer(){return Y(this,rc).call(this,"arrayBuffer")}blob(){return Y(this,rc).call(this,"blob")}formData(){return Y(this,rc).call(this,"formData")}addValidatedData(e,t){Y(this,ph)[e]=t}valid(e){return Y(this,ph)[e]}get url(){return this.raw.url}get method(){return this.raw.method}get[lye](){return Y(this,Qs)}get matchedRoutes(){return Y(this,Qs)[0].map(([[,e]])=>e)}get routePath(){return Y(this,Qs)[0].map(([[,e]])=>e)[this.routeIndex].path}},ph=new WeakMap,Qs=new WeakMap,Ga=new WeakSet,Pz=function(e){const t=Y(this,Qs)[0][this.routeIndex][1][e],n=ot(this,Ga,dO).call(this,t);return n?/\%/.test(n)?pI(n):n:void 0},Dz=function(){const e={},t=Object.keys(Y(this,Qs)[0][this.routeIndex][1]);for(const n of t){const r=ot(this,Ga,dO).call(this,Y(this,Qs)[0][this.routeIndex][1][n]);r&&typeof r=="string"&&(e[n]=/\%/.test(r)?pI(r):r)}return e},dO=function(e){return Y(this,Qs)[1]?Y(this,Qs)[1][e]:e},rc=new WeakMap,T8),mye={Stringify:1},Lz=async(e,t,n,r,s)=>{typeof e=="object"&&!(e instanceof String)&&(e instanceof Promise||(e=e.toString()),e instanceof Promise&&(e=await e));const i=e.callbacks;return i!=null&&i.length?(s?s[0]+=e:s=[e],Promise.all(i.map(a=>a({phase:t,buffer:s,context:r}))).then(a=>Promise.all(a.filter(Boolean).map(c=>Lz(c,t,!1,r,s))).then(()=>s[0]))):Promise.resolve(e)},pye="text/plain; charset=UTF-8",zN=(e,t)=>({"Content-Type":e,...t}),Ey,Ny,ga,gh,ya,Dr,_y,yh,bh,Bu,Cy,Oy,sc,Mf,$8,gye=($8=class{constructor(e,t){Fe(this,sc);Fe(this,Ey);Fe(this,Ny);K(this,"env",{});Fe(this,ga);K(this,"finalized",!1);K(this,"error");Fe(this,gh);Fe(this,ya);Fe(this,Dr);Fe(this,_y);Fe(this,yh);Fe(this,bh);Fe(this,Bu);Fe(this,Cy);Fe(this,Oy);K(this,"render",(...e)=>(Y(this,yh)??Be(this,yh,t=>this.html(t)),Y(this,yh).call(this,...e)));K(this,"setLayout",e=>Be(this,_y,e));K(this,"getLayout",()=>Y(this,_y));K(this,"setRenderer",e=>{Be(this,yh,e)});K(this,"header",(e,t,n)=>{this.finalized&&Be(this,Dr,new Response(Y(this,Dr).body,Y(this,Dr)));const r=Y(this,Dr)?Y(this,Dr).headers:Y(this,Bu)??Be(this,Bu,new Headers);t===void 0?r.delete(e):n!=null&&n.append?r.append(e,t):r.set(e,t)});K(this,"status",e=>{Be(this,gh,e)});K(this,"set",(e,t)=>{Y(this,ga)??Be(this,ga,new Map),Y(this,ga).set(e,t)});K(this,"get",e=>Y(this,ga)?Y(this,ga).get(e):void 0);K(this,"newResponse",(...e)=>ot(this,sc,Mf).call(this,...e));K(this,"body",(e,t,n)=>ot(this,sc,Mf).call(this,e,t,n));K(this,"text",(e,t,n)=>!Y(this,Bu)&&!Y(this,gh)&&!t&&!n&&!this.finalized?new Response(e):ot(this,sc,Mf).call(this,e,t,zN(pye,n)));K(this,"json",(e,t,n)=>ot(this,sc,Mf).call(this,JSON.stringify(e),t,zN("application/json",n)));K(this,"html",(e,t,n)=>{const r=s=>ot(this,sc,Mf).call(this,s,t,zN("text/html; charset=UTF-8",n));return typeof e=="object"?Lz(e,mye.Stringify,!1,{}).then(r):r(e)});K(this,"redirect",(e,t)=>(this.header("Location",String(e)),this.newResponse(null,t??302)));K(this,"notFound",()=>(Y(this,bh)??Be(this,bh,()=>new Response),Y(this,bh).call(this,this)));Be(this,Ey,e),t&&(Be(this,ya,t.executionCtx),this.env=t.env,Be(this,bh,t.notFoundHandler),Be(this,Oy,t.path),Be(this,Cy,t.matchResult))}get req(){return Y(this,Ny)??Be(this,Ny,new Iz(Y(this,Ey),Y(this,Oy),Y(this,Cy))),Y(this,Ny)}get event(){if(Y(this,ya)&&"respondWith"in Y(this,ya))return Y(this,ya);throw Error("This context has no FetchEvent")}get executionCtx(){if(Y(this,ya))return Y(this,ya);throw Error("This context has no ExecutionContext")}get res(){return Y(this,Dr)||Be(this,Dr,new Response(null,{headers:Y(this,Bu)??Be(this,Bu,new Headers)}))}set res(e){if(Y(this,Dr)&&e){e=new Response(e.body,e);for(const[t,n]of Y(this,Dr).headers.entries())if(t!=="content-type")if(t==="set-cookie"){const r=Y(this,Dr).headers.getSetCookie();e.headers.delete("set-cookie");for(const s of r)e.headers.append("set-cookie",s)}else e.headers.set(t,n)}Be(this,Dr,e),this.finalized=!0}get var(){return Y(this,ga)?Object.fromEntries(Y(this,ga)):{}}},Ey=new WeakMap,Ny=new WeakMap,ga=new WeakMap,gh=new WeakMap,ya=new WeakMap,Dr=new WeakMap,_y=new WeakMap,yh=new WeakMap,bh=new WeakMap,Bu=new WeakMap,Cy=new WeakMap,Oy=new WeakMap,sc=new WeakSet,Mf=function(e,t,n){const r=Y(this,Dr)?new Headers(Y(this,Dr).headers):Y(this,Bu)??new Headers;if(typeof t=="object"&&"headers"in t){const i=t.headers instanceof Headers?t.headers:new Headers(t.headers);for(const[o,a]of i)o.toLowerCase()==="set-cookie"?r.append(o,a):r.set(o,a)}if(n)for(const[i,o]of Object.entries(n))if(typeof o=="string")r.set(i,o);else{r.delete(i);for(const a of o)r.append(i,a)}const s=typeof t=="number"?t:(t==null?void 0:t.status)??Y(this,gh);return new Response(e,{status:s,headers:r})},$8),Jn="ALL",yye="all",bye=["get","post","put","delete","options","patch"],Fz="Can not add a route since the matcher is already built.",Bz=class extends Error{},vye="__COMPOSED_HANDLER",xye=e=>e.text("404 Not Found",404),gI=(e,t)=>{if("getResponse"in e){const n=e.getResponse();return t.newResponse(n.body,n)}return console.error(e),t.text("Internal Server Error",500)},Ri,Xn,Vz,ki,gu,Pv,Dv,R8,zz=(R8=class{constructor(t={}){Fe(this,Xn);K(this,"get");K(this,"post");K(this,"put");K(this,"delete");K(this,"options");K(this,"patch");K(this,"all");K(this,"on");K(this,"use");K(this,"router");K(this,"getPath");K(this,"_basePath","/");Fe(this,Ri,"/");K(this,"routes",[]);Fe(this,ki,xye);K(this,"errorHandler",gI);K(this,"onError",t=>(this.errorHandler=t,this));K(this,"notFound",t=>(Be(this,ki,t),this));K(this,"fetch",(t,...n)=>ot(this,Xn,Dv).call(this,t,n[1],n[0],t.method));K(this,"request",(t,n,r,s)=>t instanceof Request?this.fetch(n?new Request(t,n):t,r,s):(t=t.toString(),this.fetch(new Request(/^https?:\/\//.test(t)?t:`http://localhost${Rf("/",t)}`,n),r,s)));K(this,"fire",()=>{addEventListener("fetch",t=>{t.respondWith(ot(this,Xn,Dv).call(this,t.request,t,void 0,t.request.method))})});[...bye,yye].forEach(i=>{this[i]=(o,...a)=>(typeof o=="string"?Be(this,Ri,o):ot(this,Xn,gu).call(this,i,Y(this,Ri),o),a.forEach(c=>{ot(this,Xn,gu).call(this,i,Y(this,Ri),c)}),this)}),this.on=(i,o,...a)=>{for(const c of[o].flat()){Be(this,Ri,c);for(const u of[i].flat())a.map(f=>{ot(this,Xn,gu).call(this,u.toUpperCase(),Y(this,Ri),f)})}return this},this.use=(i,...o)=>(typeof i=="string"?Be(this,Ri,i):(Be(this,Ri,"*"),o.unshift(i)),o.forEach(a=>{ot(this,Xn,gu).call(this,Jn,Y(this,Ri),a)}),this);const{strict:r,...s}=t;Object.assign(this,s),this.getPath=r??!0?t.getPath??DF:rce}route(t,n){const r=this.basePath(t);return n.routes.map(s=>{var o;let i;n.errorHandler===gI?i=s.handler:(i=async(a,c)=>(await mI([],n.errorHandler)(a,()=>s.handler(a,c))).res,i[vye]=s.handler),ot(o=r,Xn,gu).call(o,s.method,s.path,i)}),this}basePath(t){const n=ot(this,Xn,Vz).call(this);return n._basePath=Rf(this._basePath,t),n}mount(t,n,r){let s,i;r&&(typeof r=="function"?i=r:(i=r.optionHandler,r.replaceRequest===!1?s=c=>c:s=r.replaceRequest));const o=i?c=>{const u=i(c);return Array.isArray(u)?u:[u]}:c=>{let u;try{u=c.executionCtx}catch{}return[c.env,u]};s||(s=(()=>{const c=Rf(this._basePath,t),u=c==="/"?0:c.length;return f=>{const h=new URL(f.url);return h.pathname=h.pathname.slice(u)||"/",new Request(h,f)}})());const a=async(c,u)=>{const f=await n(s(c.req.raw),...o(c));if(f)return f;await u()};return ot(this,Xn,gu).call(this,Jn,Rf(t,"*"),a),this}},Ri=new WeakMap,Xn=new WeakSet,Vz=function(){const t=new zz({router:this.router,getPath:this.getPath});return t.errorHandler=this.errorHandler,Be(t,ki,Y(this,ki)),t.routes=this.routes,t},ki=new WeakMap,gu=function(t,n,r){t=t.toUpperCase(),n=Rf(this._basePath,n);const s={basePath:this._basePath,path:n,method:t,handler:r};this.router.add(t,n,[r,s]),this.routes.push(s)},Pv=function(t,n){if(t instanceof Error)return this.errorHandler(t,n);throw t},Dv=function(t,n,r,s){if(s==="HEAD")return(async()=>new Response(null,await ot(this,Xn,Dv).call(this,t,n,r,"GET")))();const i=this.getPath(t,{env:r}),o=this.router.match(s,i),a=new gye(t,{path:i,matchResult:o,env:r,executionCtx:n,notFoundHandler:Y(this,ki)});if(o[0].length===1){let u;try{u=o[0][0][0][0](a,async()=>{a.res=await Y(this,ki).call(this,a)})}catch(f){return ot(this,Xn,Pv).call(this,f,a)}return u instanceof Promise?u.then(f=>f||(a.finalized?a.res:Y(this,ki).call(this,a))).catch(f=>ot(this,Xn,Pv).call(this,f,a)):u??Y(this,ki).call(this,a)}const c=mI(o[0],this.errorHandler,Y(this,ki));return(async()=>{try{const u=await c(a);if(!u.finalized)throw new Error("Context is not finalized. Did you forget to return a Response object or `await next()`?");return u.res}catch(u){return ot(this,Xn,Pv).call(this,u,a)}})()},R8),Rx="[^/]+",cg=".*",ug="(?:|/.*)",Xp=Symbol(),wye=new Set(".\\+*[^]$()");function Sye(e,t){return e.length===1?t.length===1?e<t?-1:1:-1:t.length===1||e===cg||e===ug?1:t===cg||t===ug?-1:e===Rx?1:t===Rx?-1:e.length===t.length?e<t?-1:1:t.length-e.length}var zu,Vu,Mi,k8,fO=(k8=class{constructor(){Fe(this,zu);Fe(this,Vu);Fe(this,Mi,Object.create(null))}insert(t,n,r,s,i){if(t.length===0){if(Y(this,zu)!==void 0)throw Xp;if(i)return;Be(this,zu,n);return}const[o,...a]=t,c=o==="*"?a.length===0?["","",cg]:["","",Rx]:o==="/*"?["","",ug]:o.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/);let u;if(c){const f=c[1];let h=c[2]||Rx;if(f&&c[2]&&(h=h.replace(/^\((?!\?:)(?=[^)]+\)$)/,"(?:"),/\((?!\?:)/.test(h)))throw Xp;if(u=Y(this,Mi)[h],!u){if(Object.keys(Y(this,Mi)).some(p=>p!==cg&&p!==ug))throw Xp;if(i)return;u=Y(this,Mi)[h]=new fO,f!==""&&Be(u,Vu,s.varIndex++)}!i&&f!==""&&r.push([f,Y(u,Vu)])}else if(u=Y(this,Mi)[o],!u){if(Object.keys(Y(this,Mi)).some(f=>f.length>1&&f!==cg&&f!==ug))throw Xp;if(i)return;u=Y(this,Mi)[o]=new fO}u.insert(a,n,r,s,i)}buildRegExpStr(){const n=Object.keys(Y(this,Mi)).sort(Sye).map(r=>{const s=Y(this,Mi)[r];return(typeof Y(s,Vu)=="number"?`(${r})@${Y(s,Vu)}`:wye.has(r)?`\\${r}`:r)+s.buildRegExpStr()});return typeof Y(this,zu)=="number"&&n.unshift(`#${Y(this,zu)}`),n.length===0?"":n.length===1?n[0]:"(?:"+n.join("|")+")"}},zu=new WeakMap,Vu=new WeakMap,Mi=new WeakMap,k8),Iw,jy,M8,Eye=(M8=class{constructor(){Fe(this,Iw,{varIndex:0});Fe(this,jy,new fO)}insert(e,t,n){const r=[],s=[];for(let o=0;;){let a=!1;if(e=e.replace(/\{[^}]+\}/g,c=>{const u=`@\\${o}`;return s[o]=[u,c],o++,a=!0,u}),!a)break}const i=e.match(/(?::[^\/]+)|(?:\/\*$)|./g)||[];for(let o=s.length-1;o>=0;o--){const[a]=s[o];for(let c=i.length-1;c>=0;c--)if(i[c].indexOf(a)!==-1){i[c]=i[c].replace(a,s[o][1]);break}}return Y(this,jy).insert(i,t,r,Y(this,Iw),n),r}buildRegExp(){let e=Y(this,jy).buildRegExpStr();if(e==="")return[/^$/,[],[]];let t=0;const n=[],r=[];return e=e.replace(/#(\d+)|@(\d+)|\.\*\$/g,(s,i,o)=>i!==void 0?(n[++t]=Number(i),"$()"):(o!==void 0&&(r[Number(o)]=++t),"")),[new RegExp(`^${e}`),n,r]}},Iw=new WeakMap,jy=new WeakMap,M8),Uz=[],Nye=[/^$/,[],Object.create(null)],Lv=Object.create(null);function qz(e){return Lv[e]??(Lv[e]=new RegExp(e==="*"?"":`^${e.replace(/\/\*$|([.\\+*[^\]$()])/g,(t,n)=>n?`\\${n}`:"(?:|/.*)")}$`))}function _ye(){Lv=Object.create(null)}function Cye(e){var u;const t=new Eye,n=[];if(e.length===0)return Nye;const r=e.map(f=>[!/\*|\/:/.test(f[0]),...f]).sort(([f,h],[p,y])=>f?1:p?-1:h.length-y.length),s=Object.create(null);for(let f=0,h=-1,p=r.length;f<p;f++){const[y,v,x]=r[f];y?s[v]=[x.map(([N])=>[N,Object.create(null)]),Uz]:h++;let E;try{E=t.insert(v,h,y)}catch(N){throw N===Xp?new Bz(v):N}y||(n[h]=x.map(([N,_])=>{const C=Object.create(null);for(_-=1;_>=0;_--){const[j,A]=E[_];C[j]=A}return[N,C]}))}const[i,o,a]=t.buildRegExp();for(let f=0,h=n.length;f<h;f++)for(let p=0,y=n[f].length;p<y;p++){const v=(u=n[f][p])==null?void 0:u[1];if(!v)continue;const x=Object.keys(v);for(let E=0,N=x.length;E<N;E++)v[x[E]]=a[v[x[E]]]}const c=[];for(const f in o)c[f]=n[o[f]];return[i,c,s]}function _f(e,t){if(e){for(const n of Object.keys(e).sort((r,s)=>s.length-r.length))if(qz(n).test(t))return[...e[n]]}}var ic,oc,Jh,Hz,Wz,I8,Oye=(I8=class{constructor(){Fe(this,Jh);K(this,"name","RegExpRouter");Fe(this,ic);Fe(this,oc);Be(this,ic,{[Jn]:Object.create(null)}),Be(this,oc,{[Jn]:Object.create(null)})}add(e,t,n){var a;const r=Y(this,ic),s=Y(this,oc);if(!r||!s)throw new Error(Fz);r[e]||[r,s].forEach(c=>{c[e]=Object.create(null),Object.keys(c[Jn]).forEach(u=>{c[e][u]=[...c[Jn][u]]})}),t==="/*"&&(t="*");const i=(t.match(/\/:/g)||[]).length;if(/\*$/.test(t)){const c=qz(t);e===Jn?Object.keys(r).forEach(u=>{var f;(f=r[u])[t]||(f[t]=_f(r[u],t)||_f(r[Jn],t)||[])}):(a=r[e])[t]||(a[t]=_f(r[e],t)||_f(r[Jn],t)||[]),Object.keys(r).forEach(u=>{(e===Jn||e===u)&&Object.keys(r[u]).forEach(f=>{c.test(f)&&r[u][f].push([n,i])})}),Object.keys(s).forEach(u=>{(e===Jn||e===u)&&Object.keys(s[u]).forEach(f=>c.test(f)&&s[u][f].push([n,i]))});return}const o=LF(t)||[t];for(let c=0,u=o.length;c<u;c++){const f=o[c];Object.keys(s).forEach(h=>{var p;(e===Jn||e===h)&&((p=s[h])[f]||(p[f]=[..._f(r[h],f)||_f(r[Jn],f)||[]]),s[h][f].push([n,i-u+c+1]))})}}match(e,t){_ye();const n=ot(this,Jh,Hz).call(this);return this.match=(r,s)=>{const i=n[r]||n[Jn],o=i[2][s];if(o)return o;const a=s.match(i[0]);if(!a)return[[],Uz];const c=a.indexOf("",1);return[i[1][c],a]},this.match(e,t)}},ic=new WeakMap,oc=new WeakMap,Jh=new WeakSet,Hz=function(){const e=Object.create(null);return Object.keys(Y(this,oc)).concat(Object.keys(Y(this,ic))).forEach(t=>{e[t]||(e[t]=ot(this,Jh,Wz).call(this,t))}),Be(this,ic,Be(this,oc,void 0)),e},Wz=function(e){const t=[];let n=e===Jn;return[Y(this,ic),Y(this,oc)].forEach(r=>{const s=r[e]?Object.keys(r[e]).map(i=>[i,r[e][i]]):[];s.length!==0?(n||(n=!0),t.push(...s)):e!==Jn&&t.push(...Object.keys(r[Jn]).map(i=>[i,r[Jn][i]]))}),n?Cye(t):null},I8),ac,ba,P8,jye=(P8=class{constructor(e){K(this,"name","SmartRouter");Fe(this,ac,[]);Fe(this,ba,[]);Be(this,ac,e.routers)}add(e,t,n){if(!Y(this,ba))throw new Error(Fz);Y(this,ba).push([e,t,n])}match(e,t){if(!Y(this,ba))throw new Error("Fatal error");const n=Y(this,ac),r=Y(this,ba),s=n.length;let i=0,o;for(;i<s;i++){const a=n[i];try{for(let c=0,u=r.length;c<u;c++)a.add(...r[c]);o=a.match(e,t)}catch(c){if(c instanceof Bz)continue;throw c}this.match=a.match.bind(a),Be(this,ac,[a]),Be(this,ba,void 0);break}if(i===s)throw new Error("Fatal error");return this.name=`SmartRouter + ${this.activeRouter.name}`,o}get activeRouter(){if(Y(this,ba)||Y(this,ac).length!==1)throw new Error("No active router has been determined yet.");return Y(this,ac)[0]}},ac=new WeakMap,ba=new WeakMap,P8),kp=Object.create(null),lc,wr,Uu,vh,gr,va,yu,D8,Gz=(D8=class{constructor(t,n,r){Fe(this,va);Fe(this,lc);Fe(this,wr);Fe(this,Uu);Fe(this,vh,0);Fe(this,gr,kp);if(Be(this,wr,r||Object.create(null)),Be(this,lc,[]),t&&n){const s=Object.create(null);s[t]={handler:n,possibleKeys:[],score:0},Be(this,lc,[s])}Be(this,Uu,[])}insert(t,n,r){Be(this,vh,++Ok(this,vh)._);let s=this;const i=Qle(n),o=[];for(let a=0,c=i.length;a<c;a++){const u=i[a],f=i[a+1],h=tce(u,f),p=Array.isArray(h)?h[0]:u;if(p in Y(s,wr)){s=Y(s,wr)[p],h&&o.push(h[1]);continue}Y(s,wr)[p]=new Gz,h&&(Y(s,Uu).push(h),o.push(h[1])),s=Y(s,wr)[p]}return Y(s,lc).push({[t]:{handler:r,possibleKeys:o.filter((a,c,u)=>u.indexOf(a)===c),score:Y(this,vh)}}),s}search(t,n){var c;const r=[];Be(this,gr,kp);let i=[this];const o=PF(n),a=[];for(let u=0,f=o.length;u<f;u++){const h=o[u],p=u===f-1,y=[];for(let v=0,x=i.length;v<x;v++){const E=i[v],N=Y(E,wr)[h];N&&(Be(N,gr,Y(E,gr)),p?(Y(N,wr)["*"]&&r.push(...ot(this,va,yu).call(this,Y(N,wr)["*"],t,Y(E,gr))),r.push(...ot(this,va,yu).call(this,N,t,Y(E,gr)))):y.push(N));for(let _=0,C=Y(E,Uu).length;_<C;_++){const j=Y(E,Uu)[_],A=Y(E,gr)===kp?{}:{...Y(E,gr)};if(j==="*"){const D=Y(E,wr)["*"];D&&(r.push(...ot(this,va,yu).call(this,D,t,Y(E,gr))),Be(D,gr,A),y.push(D));continue}if(!h)continue;const[$,k,R]=j,B=Y(E,wr)[$],z=o.slice(u).join("/");if(R instanceof RegExp){const D=R.exec(z);if(D){if(A[k]=D[0],r.push(...ot(this,va,yu).call(this,B,t,Y(E,gr),A)),Object.keys(Y(B,wr)).length){Be(B,gr,A);const L=((c=D[0].match(/\//))==null?void 0:c.length)??0;(a[L]||(a[L]=[])).push(B)}continue}}(R===!0||R.test(h))&&(A[k]=h,p?(r.push(...ot(this,va,yu).call(this,B,t,A,Y(E,gr))),Y(B,wr)["*"]&&r.push(...ot(this,va,yu).call(this,Y(B,wr)["*"],t,A,Y(E,gr)))):(Be(B,gr,A),y.push(B)))}}i=y.concat(a.shift()??[])}return r.length>1&&r.sort((u,f)=>u.score-f.score),[r.map(({handler:u,params:f})=>[u,f])]}},lc=new WeakMap,wr=new WeakMap,Uu=new WeakMap,vh=new WeakMap,gr=new WeakMap,va=new WeakSet,yu=function(t,n,r,s){const i=[];for(let o=0,a=Y(t,lc).length;o<a;o++){const c=Y(t,lc)[o],u=c[n]||c[Jn],f={};if(u!==void 0&&(u.params=Object.create(null),i.push(u),r!==kp||s&&s!==kp))for(let h=0,p=u.possibleKeys.length;h<p;h++){const y=u.possibleKeys[h],v=f[u.score];u.params[y]=s!=null&&s[y]&&!v?s[y]:r[y]??(s==null?void 0:s[y]),f[u.score]=!0}}return i},D8),qu,L8,Aye=(L8=class{constructor(){K(this,"name","TrieRouter");Fe(this,qu);Be(this,qu,new Gz)}add(e,t,n){const r=LF(t);if(r){for(let s=0,i=r.length;s<i;s++)Y(this,qu).insert(e,r[s],n);return}Y(this,qu).insert(e,t,n)}match(e,t){return Y(this,qu).search(e,t)}},qu=new WeakMap,L8),V1=class extends zz{constructor(e={}){super(e),this.router=e.router??new jye({routers:[new Oye,new Aye]})}};class yI{constructor(t,n,r){K(this,"_default");K(this,"_value");K(this,"_config");K(this,"_restriction_bypass",!1);this._schema=t,this.options=r,this._default=$f(t.template({},{withOptional:!0})),this._value=$f(Un(t,n??{},{withDefaults:!0,forceParse:this.isForceParse(),skipMark:this.isForceParse()})),this._config=$f(this._value)}isForceParse(){var t;return((t=this.options)==null?void 0:t.forceParse)??!0}default(){return this._default}async onBeforeUpdate(t,n){var r;return(r=this.options)!=null&&r.onBeforeUpdate?this.options.onBeforeUpdate(t,n):n}get(t){return t!=null&&t.stripMark?Oce(this._config):this._config}clone(){return structuredClone(this._config)}async set(t,n){var i,o;const r=Un(this._schema,structuredClone(t),{coerce:!1,forceParse:!0,skipMark:this.isForceParse()}),s=await this.onBeforeUpdate(this._config,r);return this._value=$f(s),this._config=$f(s),n!==!0&&await((o=(i=this.options)==null?void 0:i.onUpdate)==null?void 0:o.call(i,this._config)),this._config}bypass(){return this._restriction_bypass=!0,this}throwIfRestricted(t){var r;if(this._restriction_bypass){this._restriction_bypass=!1;return}const n=((r=this.options)==null?void 0:r.restrictPaths)??[];if(Array.isArray(n)&&n.length>0){for(const s of n)if(typeof t=="string"?t.startsWith(s):FN(t,s))throw new Error(`Path "${s}" is restricted`)}}async patch(t,n){var a;const r=this.clone(),s=t.length>0?Gb({},t,n):n;this.throwIfRestricted(s);const i=gF(r,s,(c,u)=>{if(Array.isArray(c)&&Array.isArray(u))return u});if((a=this.options)!=null&&a.overwritePaths){const u=hF(n).map(f=>t.length>0?t+"."+f:f).filter(f=>{var h,p;return(p=(h=this.options)==null?void 0:h.overwritePaths)==null?void 0:p.some(y=>typeof y=="string"?f===y:y.test(f))});if(u.length>0){const f=u.length>1?u.filter(h=>u.some(p=>p!==h&&p.startsWith(h))):u;for(const h of f)Gb(i,h,zg(s,h))}}const o=await this.set(i);return[s,o]}async overwrite(t,n){const r=this.clone(),s=t.length>0?Gb({},t,n):n;this.throwIfRestricted(s);const i=Gb(r,t,n),o=await this.set(i);return[s,o]}has(t){const n=t.split(".");if(n.length>1){const r=n.slice(0,-1).join(".");if(!FN(this._config,r))throw new Error(`Parent path "${r}" does not exist`)}return FN(this._config,t)}async remove(t){if(this.throwIfRestricted(t),!this.has(t))throw new Error(`Path "${t}" does not exist`);const n=this.clone(),r=zg(n,t),s=$h(n,t),i=await this.set(s);return[r,i]}}var uC;let Uy=(uC=class{constructor(t,n){K(this,"_built",!1);K(this,"_schema");K(this,"_listener",()=>null);this._ctx=n,this._schema=new yI(this.getSchema(),t,{forceParse:this.useForceParse(),onUpdate:async r=>{await this._listener(r)},restrictPaths:this.getRestrictedPaths(),overwritePaths:this.getOverwritePaths(),onBeforeUpdate:this.onBeforeUpdate.bind(this)})}onBeforeUpdate(t,n){return n}setListener(t){return this._listener=t,this}useForceParse(){return!1}getRestrictedPaths(){}getOverwritePaths(){}get configDefault(){return this._schema.default()}get config(){return this._schema.get()}setContext(t){return this._ctx=t,this}schema(){return this._schema}onServerInit(t){}get ctx(){if(!this._ctx)throw new Error("Context not set");return this._ctx}async build(){throw new Error("Not implemented")}setBuilt(){this._built=!0,this._schema=new yI(this.getSchema(),this.toJSON(!0),{onUpdate:async t=>{await this._listener(t)},forceParse:this.useForceParse(),restrictPaths:this.getRestrictedPaths(),overwritePaths:this.getOverwritePaths(),onBeforeUpdate:this.onBeforeUpdate.bind(this)})}isBuilt(){return this._built}throwIfNotBuilt(){if(!this._built)throw new Error("Config not built: "+this.constructor.name)}toJSON(t){return this.config}},K(uC,"ctx_flags",{sync_required:!1,ctx_reload_required:!1}),uC);class Tye extends vB{constructor(){super(void 0);K(this,"name","dummy");K(this,"supported",{batching:!0})}getFieldSchema(n,r){throw new Error("Method not implemented.")}}const Yz=We({entity:pe(),min_items:jt(),max_items:jt(),mime_types:Sn(pe()),...no.properties}).partial();class qg extends ro{constructor(n,r){super(n,{...r,fillable:["update"],virtual:!0});K(this,"type","media")}getSchema(){return Yz}getMaxItems(){return this.config.max_items}getAllowedMimeTypes(){return this.config.mime_types}getMinItems(){return this.config.min_items}schema(){}toJsonSchema(){var i,o;const n="../schema.json#/properties/media",r=(i=this.config)==null?void 0:i.min_items,s=(o=this.config)==null?void 0:o.max_items;return s===1?{$ref:n}:{type:"array",items:{$ref:n},minItems:r,maxItems:s}}}const Jb={text:e=>new Nx(e.field_name,{...e.config,required:e.is_required}),number:e=>new VB(e.field_name,{...e.config,required:e.is_required}),date:e=>new ZC(e.field_name,{...e.config,required:e.is_required}),datetime:e=>new ZC(e.field_name,{...e.config,required:e.is_required}),boolean:e=>new $B(e.field_name,{...e.config,required:e.is_required}),enumm:e=>new MB(e.field_name,{...e.config,required:e.is_required}),json:e=>new PB(e.field_name,{...e.config,required:e.is_required}),jsonSchema:e=>new BB(e.field_name,{...e.config,required:e.is_required}),media:e=>new qg(e.field_name,{...e.config,entity:e.entity.name,required:e.is_required}),medium:e=>new qg(e.field_name,{...e.config,entity:e.entity.name,required:e.is_required})};class hm{constructor(t,n,r){this.type=t,this.config=n,this.is_required=r}required(){return this.is_required=!0,this}getField(t){if(!Jb[this.type])throw new Error(`Unknown field type: ${this.type}`);try{return Jb[this.type](t)}catch(n){throw new Error(`Faild to construct field "${this.type}": ${n}`)}}make(t){if(!Jb[this.type])throw new Error(`Unknown field type: ${this.type}`);try{return Jb[this.type]({entity:{name:"unknown",fields:{}},field_name:t,config:this.config,is_required:this.is_required})}catch(n){throw new Error(`Faild to construct field "${this.type}": ${n}`)}}}function xo(e){return new hm("text",e,!1)}function $ye(e){return new hm("number",e,!1)}function Rye(e){return new hm("date",{...e,type:"datetime"},!1)}function kye(e){return new hm("boolean",e,!1)}function bI(e){var r;const n={options:{type:typeof((r=e==null?void 0:e.enum)==null?void 0:r[0])!="string"?"objects":"strings",values:(e==null?void 0:e.enum)??[]}};return new hm("enumm",n,!1)}function Mye(e){return new hm("json",e,!1)}function Jz(e,t,n,r){const s=[];for(const[i,o]of Object.entries(t)){const a=o,c={entity:{name:e,fields:t},field_name:i,config:a.config,is_required:a.is_required};s.push(a.getField(c))}return new mc(e,s,n,r)}function Iye(e){return{manyToOne:(t,n)=>new Oc(e,t,n),oneToOne:(t,n)=>new lO(e,t,n),manyToMany:(t,n,r)=>{const s=[];if(r){const i=r,o=[],a=(n==null?void 0:n.connectionTable)??Ua.defaultConnectionTable(e,t);for(const[c,u]of Object.entries(r)){const f=u,h={entity:{name:a,fields:i},field_name:c,config:f.config,is_required:f.is_required};o.push(f.getField(h))}s.push(o)}return new Ua(e,t,n,s)},polyToOne:(t,n)=>new Vg(e,t,{...n,targetCardinality:1}),polyToMany:(t,n)=>new Vg(e,t,n)}}function Pye(e){return{on:(t,n)=>{const r=t.map(s=>{const i=e.field(s);if(!i)throw new Error(`Field "${String(s)}" not found on entity "${e.name}"`);return i});return new WB(e,r,n)}}}class Dye extends $x{constructor(t,n=[],r=[]){super(Object.values(t),new Tye,n,r),this.__entities=t}withConnection(t){return new $x(this.entities,t,this.relations.all,this.indices)}}function Xz(e,t){const n=[],r=[],s=a=>new Proxy(Iye(a),{get(c,u){return(...f)=>(n.push(c[u](...f)),s(a))}}),i=a=>new Proxy(Pye(a),{get(c,u){return(...f)=>(r.push(c[u](...f)),i(a))}});t&&t({relation:s,index:i},e);const o=new Dye(e,n,r);return{DB:o.__entities,entities:o.__entities,relations:n,indices:r,proto:o,toJSON:()=>o.toJSON()}}function Lye(e,t){const n=e.toJSON(),r=s=>{if(Qu(s)&&("required"in s&&(t!=null&&t.removeRequired)&&(s.required=void 0),"default"in s&&(t!=null&&t.removeDefault)&&(s.default=void 0),"properties"in s&&Qu(s.properties)))for(const i in s.properties)s.properties[i]=r(s.properties[i]);return s};return r(n),wa(n)}function Fye(e,t){const n={...e.properties};return tn(n,(r,s)=>{if(!t(r))return r})}const kh=Symbol.for("bknd-mcp-schema");class FT{constructor(t,n,r){K(this,"cleanSchema");this.schema=t,this.name=n,this.options=r,this.cleanSchema=this.getCleanSchema(this.schema)}getCleanSchema(t){if(t.type!=="object")return t;const n=Fye(t,s=>Qu(s)&&kh in s),r=We(n);return Lye(r,{removeRequired:!0,removeDefault:!1})}getToolOptions(t){const{tools:n,resources:r,...s}=this.options,i=o=>o&&[t&&Ku(t),o].filter(Boolean).join(" ");return{title:i(this.options.title??this.schema.title),description:i(this.options.description??this.schema.description),annotations:{destructiveHint:!0,idempotentHint:!0,...s.annotations}}}getManager(t){const n=t.context.app.modules;if("mutateConfigSafe"in n)return n;throw new Error("Manager not found")}}class Bye extends TF{constructor(t,n,r){const{mcp:s,...i}=r||{};super(n,i),this[kh]=new FT(this,t,s||{})}get mcp(){return this[kh]}toolGet(t){return new uc([this.mcp.name,"get"].join("_"),{...this.mcp.getToolOptions("get"),inputSchema:We({path:pe({pattern:/^[a-zA-Z0-9_.]{0,}$/,title:"Path",description:"Path to the property to get, e.g. `key.subkey`"}).optional(),depth:jt({description:"Limit the depth of the response"}).optional(),secrets:gt({default:!1,description:"Include secrets in the response config"}).optional()}),annotations:{readOnlyHint:!0,destructiveHint:!1}},async(n,r)=>{const s=r.context.app.toJSON(n.secrets),i=Er(s,t.instancePath);let o=Er(i,n.path??[]);return n.depth&&(o=Roe(o,n.depth)),r.json({path:n.path??"",secrets:n.secrets??!1,partial:!!n.depth,value:o??null})})}toolUpdate(t){const n=this.mcp.cleanSchema;return new uc([this.mcp.name,"update"].join("_"),{...this.mcp.getToolOptions("update"),inputSchema:We({full:gt({default:!1}).optional(),return_config:gt({default:!1,description:"If the new configuration should be returned"}).optional(),value:We(n.properties).partial()})},async(r,s)=>{const{full:i,value:o,return_config:a}=r,[c]=t.instancePath,u=this.mcp.getManager(s);i?await u.mutateConfigSafe(c).set(o):await u.mutateConfigSafe(c).patch("",o);let f;if(a){const h=s.context.app.toJSON();f=Er(h,t.instancePath)}return s.json({success:!0,module:c,config:f})})}getTools(t){const{tools:n=[]}=this.mcp.options;return[this.toolGet(t),this.toolUpdate(t),...n]}}const U1=(e,t,n)=>new Bye(e,t,n),vI=Symbol.for("bknd-mcp-record-opts");class zye extends RF{constructor(t,n,r,s){const{mcp:i,...o}=r||{};super(n,o),this[kh]=new FT(this,t,i||{}),this[vI]={new_schema:s}}get mcp(){return this[kh]}getNewSchema(t=this.additionalProperties){return this[vI].new_schema??this.additionalProperties??t}toolGet(t){return new uc([this.mcp.name,"get"].join("_"),{...this.mcp.getToolOptions("get"),inputSchema:We({key:pe({description:"key to get"}).optional(),secrets:gt({default:!1,description:"(optional) include secrets in the response config"}).optional(),schema:gt({default:!1,description:"(optional) include the schema in the response"}).optional()}),annotations:{readOnlyHint:!0,destructiveHint:!1}},async(n,r)=>{const s=r.context.app.toJSON(n.secrets),i=Er(s,t.instancePath),[o]=t.instancePath,a=n.schema?this.getNewSchema().toJSON():void 0;if(n.key){if(!(n.key in i))throw new Error(`Key "${n.key}" not found in config`);const c=Er(i,n.key);return r.json({secrets:n.secrets??!1,module:o,key:n.key,value:c??null,schema:a})}return r.json({secrets:n.secrets??!1,module:o,key:null,value:i??null,schema:a})})}toolAdd(t){return new uc([this.mcp.name,"add"].join("_"),{...this.mcp.getToolOptions("add"),inputSchema:We({key:pe({description:"key to add"}),value:this.getNewSchema(),return_config:gt({default:!1,description:"If the new configuration should be returned"}).optional()})},async(n,r)=>{const s=r.context.app.toJSON(!0),i=Er(s,t.instancePath),[o,...a]=t.instancePath,c=this.mcp.getManager(r);if(n.key in i)throw new Error(`Key "${n.key}" already exists in config`);await c.mutateConfigSafe(o).patch([...a,n.key],n.value);const u=Er(r.context.app.toJSON(),t.instancePath);return r.json({success:!0,module:o,action:{type:"add",key:n.key},config:n.return_config?u:void 0})})}toolUpdate(t){return new uc([this.mcp.name,"update"].join("_"),{...this.mcp.getToolOptions("update"),inputSchema:We({key:pe({description:"key to update"}),value:this.mcp.getCleanSchema(this.getNewSchema(ze({}))),return_config:gt({default:!1,description:"If the new configuration should be returned"}).optional()})},async(n,r)=>{const s=r.context.app.toJSON(!0),i=Er(s,t.instancePath),[o,...a]=t.instancePath,c=this.mcp.getManager(r);if(!(n.key in i))throw new Error(`Key "${n.key}" not found in config`);await c.mutateConfigSafe(o).patch([...a,n.key],n.value);const u=Er(r.context.app.toJSON(),t.instancePath);return r.json({success:!0,module:o,action:{type:"update",key:n.key},config:n.return_config?u:void 0})})}toolRemove(t){return new uc([this.mcp.name,"remove"].join("_"),{...this.mcp.getToolOptions("get"),inputSchema:We({key:pe({description:"key to remove"}),return_config:gt({default:!1,description:"If the new configuration should be returned"}).optional()})},async(n,r)=>{const s=r.context.app.toJSON(!0),i=Er(s,t.instancePath),[o,...a]=t.instancePath,c=this.mcp.getManager(r);if(!(n.key in i))throw new Error(`Key "${n.key}" not found in config`);await c.mutateConfigSafe(o).remove([...a,n.key].join("."));const u=Er(r.context.app.toJSON(),t.instancePath);return r.json({success:!0,module:o,action:{type:"remove",key:n.key},config:n.return_config?u:void 0})})}getTools(t){const{tools:n=[],get:r=!0,add:s=!0,update:i=!0,remove:o=!0}=this.mcp.options;return[r&&this.toolGet(t),s&&this.toolAdd(t),i&&this.toolUpdate(t),o&&this.toolRemove(t),...n].filter(Boolean)}}const dg=(e,t,n,r)=>new zye(e,t,n,r),Vye=(e,t,n)=>{const r=new FT(t,e,{}),s=a=>new uc([r.name,"get"].join("_"),{...r.getToolOptions("get"),inputSchema:We({secrets:gt({default:!1,description:"Include secrets in the response config"}).optional()})},async(c,u)=>{const f=u.context.app.toJSON(c.secrets),h=Er(f,a.instancePath);return u.json({secrets:c.secrets??!1,value:h??null})}),i=a=>new uc([r.name,"update"].join("_"),{...r.getToolOptions("update"),inputSchema:We({value:t,return_config:gt({default:!1}).optional(),secrets:gt({default:!1}).optional()})},async(c,u)=>{const{value:f,return_config:h,secrets:p}=c,[y,...v]=a.instancePath;await r.getManager(u).mutateConfigSafe(y).overwrite(v,f);let E;if(h){const N=u.context.app.toJSON(p);E=Er(N,a.instancePath)}return u.json({success:!0,module:y,config:E})}),o=a=>{const{tools:c=[]}=r.options;return[s(a),i(a),...c]};return Object.assign(t,{[kh]:r,getTools:o})};var Uye=e=>{const n={...{origin:"*",allowMethods:["GET","HEAD","PUT","POST","DELETE","PATCH"],allowHeaders:[],exposeHeaders:[]},...e},r=(i=>typeof i=="string"?i==="*"?()=>i:o=>i===o?o:null:typeof i=="function"?i:o=>i.includes(o)?o:null)(n.origin),s=(i=>typeof i=="function"?i:Array.isArray(i)?()=>i:()=>[])(n.allowMethods);return async function(o,a){var f;function c(h,p){o.res.headers.set(h,p)}const u=r(o.req.header("origin")||"",o);if(u&&c("Access-Control-Allow-Origin",u),n.origin!=="*"){const h=o.req.header("Vary");h?c("Vary",h):c("Vary","Origin")}if(n.credentials&&c("Access-Control-Allow-Credentials","true"),(f=n.exposeHeaders)!=null&&f.length&&c("Access-Control-Expose-Headers",n.exposeHeaders.join(",")),o.req.method==="OPTIONS"){n.maxAge!=null&&c("Access-Control-Max-Age",n.maxAge.toString());const h=s(o.req.header("origin")||"",o);h.length&&c("Access-Control-Allow-Methods",h.join(","));let p=n.allowHeaders;if(!(p!=null&&p.length)){const y=o.req.header("Access-Control-Request-Headers");y&&(p=y.split(/\s*,\s*/))}return p!=null&&p.length&&(c("Access-Control-Allow-Headers",p.join(",")),o.res.headers.append("Vary","Access-Control-Request-Headers")),o.res.headers.delete("Content-Length"),o.res.headers.delete("Content-Type"),new Response(null,{headers:o.res.headers,status:204,statusText:"No Content"})}await a()}};class qy extends As{getSafeErrorAndCode(){return{error:"Invalid credentials",code:gn.UNAUTHORIZED}}toJSON(){return Hr()?super.toJSON():{error:this.getSafeErrorAndCode().error,type:"AuthException"}}}class qye extends qy{constructor(){super("User not found");K(this,"name","UserNotFoundException");K(this,"code",gn.NOT_FOUND)}}class VN extends qy{constructor(){super("Invalid credentials");K(this,"name","InvalidCredentialsException");K(this,"code",gn.UNAUTHORIZED)}}class Hye extends qy{constructor(){super("Unable to create user");K(this,"name","UnableToCreateUserException");K(this,"code",gn.INTERNAL_SERVER_ERROR)}}class Ul extends qy{constructor(n){super(n??"Invalid conditions");K(this,"code",gn.UNPROCESSABLE_ENTITY)}}const xI=["GET","POST","PATCH","PUT","DELETE"],Wye=U1("config_server",{cors:We({origin:pe({default:"*"}),allow_methods:Sn(pe({enum:xI}),{default:xI,uniqueItems:!0}),allow_headers:Sn(pe(),{default:["Content-Type","Content-Length","Authorization","Accept"]}),allow_credentials:gt({default:!0})}),mcp:We({enabled:gt({default:!1}),path:pe({default:"/api/system/mcp"}),logLevel:pe({enum:Sce,default:"warning"})})},{description:"Server configuration"}).strict();class Gye extends Uy{getRestrictedPaths(){return[]}get client(){return this.ctx.server}getSchema(){return Wye}async build(){const t=this.config.cors.origin??"";this.client.use("*",Uye({origin:t.includes(",")?t.split(",").map(n=>n.trim()):t,allowMethods:this.config.cors.allow_methods,allowHeaders:this.config.cors.allow_headers,credentials:this.config.cors.allow_credentials})),this.client.use("/",async(n,r)=>{await r(),(!n.finalized||n.res.status===404)&&new URL(n.req.url).pathname==="/"&&(n.res=void 0,n.res=Response.json({bknd:"hello world!"}))}),this.client.onError((n,r)=>(pt.error("[AppServer:onError]",n),n instanceof Response?n:n instanceof qy?r.json(n.toJSON(),n.getSafeErrorAndCode().code):n instanceof As?r.json(n.toJSON(),n.code):n instanceof Error&&Hr()?r.json({error:n.message,stack:n.stack},500):r.json({error:n.message},500))),this.setBuilt()}toJSON(t){return this.config}}const hO=new lr("auth.user.create"),Kz=new lr("auth.user.password.test"),Qz=new lr("auth.user.password.change"),Zz=new lr("auth.user.token.create"),Yye=Object.freeze(Object.defineProperty({__proto__:null,changePassword:Qz,createToken:Zz,createUser:hO,testPassword:Kz},Symbol.toStringTag,{value:"Module"})),po=new lr("data.entity.read"),q1=new lr("data.entity.create"),mO=new lr("data.entity.update"),pO=new lr("data.entity.delete"),eV=new lr("data.database.sync"),Jye=new lr("data.raw.query"),Xye=new lr("data.raw.mutate"),Kye=Object.freeze(Object.defineProperty({__proto__:null,databaseSync:eV,entityCreate:q1,entityDelete:pO,entityRead:po,entityUpdate:mO,rawMutate:Xye,rawQuery:Jye},Symbol.toStringTag,{value:"Module"}));var tV=e=>e;function BT(e){const t=e instanceof Request?e:e.req.raw;return new URL(t.url).pathname}function Qye(e,t){const n=e.get("auth");if(!n)throw new Error("auth ctx not found");if(n.skip)return!0;const r=e.req.raw;if(!t)return!1;const s=BT(r),i=t.some(o=>Aoe(s,o));return n.skip=i,i}const Zye=e=>tV(async(t,n)=>{t.get("auth")||t.set("auth",{registered:!1,resolved:!1,skip:!1,user:void 0});const r=t.get("app"),s=t.get("auth"),i=r==null?void 0:r.module.auth.authenticator;let o=Qye(t,e==null?void 0:e.skip)||!(r!=null&&r.module.auth.enabled);s.registered?(o=!0,pt.warn(`auth middleware already registered for ${BT(t)}`)):(s.registered=!0,!o&&!s.resolved&&(r!=null&&r.module.auth.enabled)&&(s.user=await(i==null?void 0:i.resolveAuthFromRequest(t)),s.resolved=!0)),await n(),s.skip=!1,s.resolved=!1,s.user=void 0}),e0e=(e,t)=>tV(async(n,r)=>{var o,a;const s=n.get("app"),i=n.get("auth");if(!i)throw new Error("auth ctx not found");if(!i.registered||!s){const c=`auth middleware not registered, cannot check permissions for ${BT(n)}`;if(s!=null&&s.module.auth.enabled)throw new Error(c);pt.warn(c)}else if(!i.skip){const c=s.modules.ctx().guard,u=Array.isArray(e)?e:[e];if(t!=null&&t.onGranted||t!=null&&t.onDenied){let f;if(u.every(h=>c.granted(h,n))?f=await((o=t==null?void 0:t.onGranted)==null?void 0:o.call(t,n)):f=await((a=t==null?void 0:t.onDenied)==null?void 0:a.call(t,n)),f instanceof Response)return f}else u.some(f=>c.throwUnlessGranted(f,n))}await r()}),t0e=Object.freeze(Object.defineProperty({__proto__:null,auth:Zye,permission:e0e},Symbol.toStringTag,{value:"Module"}));class Hy{constructor(){K(this,"middlewares",t0e)}create(){return Hy.createServer()}static createServer(){return new V1}getController(){return this.create()}isJsonRequest(t){return t.req.header("Content-Type")==="application/json"||t.req.header("Accept")==="application/json"}notFound(t){return this.isJsonRequest(t)?t.json({error:"Not found"},404):t.notFound()}getEntitiesEnum(t){const n=t.entities.map(r=>r.name);return n.length>0?Qt([pe({enum:n}),pe()]):pe()}registerMcp(){}}class n0e extends Hy{constructor(t){super(),this.auth=t}get guard(){return this.auth.ctx.guard}get em(){return this.auth.ctx.em}get userRepo(){const t=this.auth.config.entity_name;return this.em.repo(t)}registerStrategyActions(t,n){var h;if(!this.auth.isStrategyEnabled(t))return;const r=(h=t.getActions)==null?void 0:h.call(t);if(!r)return;const{auth:s,permission:i}=this.middlewares,o=this.create().use(s()),a=t.getName(),{create:c,change:u}=r,f=this.auth.em;c&&(o.post("/create",i([hO,q1]),en({summary:"Create a new user",tags:["auth"]}),async p=>{var y;try{const v=await this.auth.authenticator.getBody(p),x=Un(c.schema,v,{}),E=await((y=c.preprocess)==null?void 0:y.call(c,x))??x,N=f.mutator(this.auth.config.entity_name);N.__unstable_toggleSystemEntityCreation(!1);const{data:_}=await N.insertOne({...E,strategy:a});return N.__unstable_toggleSystemEntityCreation(!0),p.json({success:!0,action:"create",strategy:a,data:_})}catch(v){if(v instanceof E1)return p.json({success:!1,errors:v.errors},400);throw v}}),o.get("create/schema.json",en({summary:"Get the schema for creating a user",tags:["auth"]}),async p=>p.json(c.schema))),n.route(`/${a}/actions`,o)}getController(){const{auth:t}=this.middlewares,n=this.create();n.get("/me",en({summary:"Get the current user",tags:["auth"]}),ws("auth_me",{noErrorCodes:[403]}),t(),async s=>{var o,a;const i=(o=s.get("auth"))==null?void 0:o.user;if(i){const{data:c}=await this.userRepo.findId(i.id);return await((a=this.auth.authenticator)==null?void 0:a.requestCookieRefresh(s)),s.json({user:c})}return s.json({user:null},403)}),n.get("/logout",en({summary:"Logout the current user",tags:["auth"]}),t(),async s=>{if(await this.auth.authenticator.logout(s),this.auth.authenticator.isJsonRequest(s))return s.json({ok:!0});const i=s.req.header("referer");return i?s.redirect(i):s.redirect("/")}),n.get("/strategies",en({summary:"Get the available authentication strategies",tags:["auth"]}),ws("auth_strategies"),qt("query",ze({include_disabled:gt().optional()})),async s=>{const{include_disabled:i}=s.req.valid("query"),{strategies:o,basepath:a}=this.auth.toJSON(!1);return i?s.json({strategies:o,basepath:a}):s.json({strategies:tn(o??{},(c,u)=>this.auth.isStrategyEnabled(u)?c:void 0),basepath:a})});const r=this.auth.authenticator.getStrategies();for(const[s,i]of Object.entries(r))this.auth.isStrategyEnabled(i)&&(n.route(`/${s}`,i.getController(this.auth.authenticator)),this.registerStrategyActions(i,n));return n}registerMcp(){const{mcp:t}=this.auth.ctx,n=Qt([jt({title:"Integer"}),pe({title:"UUID"})]),r=async i=>{let o;if(i.id){const{data:a}=await this.userRepo.findId(i.id);o=a}else if(i.email){const{data:a}=await this.userRepo.findOne({email:i.email});o=a}if(!o)throw new Error("User not found");return o},s=Object.keys(this.auth.config.roles??{});t.tool("auth_user_create",{description:"Create a new user",inputSchema:ze({email:pe({format:"email"}),password:pe({minLength:8}),role:pe({enum:s.length>0?s:void 0}).optional()})},async(i,o)=>(await o.context.ctx().helper.throwUnlessGranted(hO,o),o.json(await this.auth.createUser(i)))),t.tool("auth_user_token",{description:"Get a user token",inputSchema:ze({id:n.optional(),email:pe({format:"email"}).optional()})},async(i,o)=>{await o.context.ctx().helper.throwUnlessGranted(Zz,o);const a=await r(i);return o.json({user:a,token:await this.auth.authenticator.jwt(a)})}),t.tool("auth_user_password_change",{description:"Change a user's password",inputSchema:ze({id:n.optional(),email:pe({format:"email"}).optional(),password:pe({minLength:8})})},async(i,o)=>{await o.context.ctx().helper.throwUnlessGranted(Qz,o);const a=await r(i);if(!await this.auth.changePassword(a.id,i.password))throw new Error("Failed to change password");return o.json({changed:!0})}),t.tool("auth_user_password_test",{description:"Test a user's password",inputSchema:ze({email:pe({format:"email"}),password:pe({minLength:8})})},async(i,o)=>{await o.context.ctx().helper.throwUnlessGranted(Kz,o);const u=await this.auth.authenticator.strategy("password").getController(this.auth.authenticator).request(new Request("https://localhost/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i.email,password:i.password})}));return o.json({valid:u.ok})})}}const gO="__bknd_flash";function wI(e,t,n="info"){var r;(r=e.req.header("Accept"))!=null&&r.includes("text/html")&&qF(e,gO,JSON.stringify({type:n,message:t}),{path:"/"})}function r0e(e){const t=document.cookie.split("; ");for(const n of t){const[r,s]=n.split("=");if(r===e)try{return decodeURIComponent(s)}catch{return null}}return null}function s0e(e=!0){const t=r0e(gO);return t&&e&&(document.cookie=`${gO}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;`),t?JSON.parse(t):void 0}var nV=e=>sV(e.replace(/_|-/g,t=>({_:"/","-":"+"})[t]??t)),rV=e=>i0e(e).replace(/\/|\+/g,t=>({"/":"_","+":"-"})[t]??t),i0e=e=>{let t="";const n=new Uint8Array(e);for(let r=0,s=n.length;r<s;r++)t+=String.fromCharCode(n[r]);return btoa(t)},sV=e=>{const t=atob(e),n=new Uint8Array(new ArrayBuffer(t.length)),r=t.length/2;for(let s=0,i=t.length-1;s<=r;s++,i--)n[s]=t.charCodeAt(s),n[i]=t.charCodeAt(i);return n},iV=(e=>(e.HS256="HS256",e.HS384="HS384",e.HS512="HS512",e.RS256="RS256",e.RS384="RS384",e.RS512="RS512",e.PS256="PS256",e.PS384="PS384",e.PS512="PS512",e.ES256="ES256",e.ES384="ES384",e.ES512="ES512",e.EdDSA="EdDSA",e))(iV||{}),o0e=class extends Error{constructor(e){super(`${e} is not an implemented algorithm`),this.name="JwtAlgorithmNotImplemented"}},oV=class extends Error{constructor(e){super(`invalid JWT token: ${e}`),this.name="JwtTokenInvalid"}},a0e=class extends Error{constructor(e){super(`token (${e}) is being used before it's valid`),this.name="JwtTokenNotBefore"}},l0e=class extends Error{constructor(e){super(`token (${e}) expired`),this.name="JwtTokenExpired"}},c0e=class extends Error{constructor(e,t){super(`Invalid "iat" claim, must be a valid number lower than "${e}" (iat: "${t}")`),this.name="JwtTokenIssuedAt"}},u0e=class extends Error{constructor(e){super(`jwt header is invalid: ${JSON.stringify(e)}`),this.name="JwtHeaderInvalid"}},d0e=class extends Error{constructor(e){super(`token(${e}) signature mismatched`),this.name="JwtTokenSignatureMismatched"}},Hg=(e=>(e.Encrypt="encrypt",e.Decrypt="decrypt",e.Sign="sign",e.Verify="verify",e.DeriveKey="deriveKey",e.DeriveBits="deriveBits",e.WrapKey="wrapKey",e.UnwrapKey="unwrapKey",e))(Hg||{}),Wy=new TextEncoder,f0e=new TextDecoder;async function h0e(e,t,n){const r=aV(t),s=await p0e(e,r);return await crypto.subtle.sign(r,s,n)}async function m0e(e,t,n,r){const s=aV(t),i=await g0e(e,s);return await crypto.subtle.verify(s,i,n,r)}function yO(e){return sV(e.replace(/-+(BEGIN|END).*/g,"").replace(/\s/g,""))}async function p0e(e,t){if(!crypto.subtle||!crypto.subtle.importKey)throw new Error("`crypto.subtle.importKey` is undefined. JWT auth middleware requires it.");if(lV(e)){if(e.type!=="private"&&e.type!=="secret")throw new Error(`unexpected key type: CryptoKey.type is ${e.type}, expected private or secret`);return e}const n=[Hg.Sign];return typeof e=="object"?await crypto.subtle.importKey("jwk",e,t,!1,n):e.includes("PRIVATE")?await crypto.subtle.importKey("pkcs8",yO(e),t,!1,n):await crypto.subtle.importKey("raw",Wy.encode(e),t,!1,n)}async function g0e(e,t){if(!crypto.subtle||!crypto.subtle.importKey)throw new Error("`crypto.subtle.importKey` is undefined. JWT auth middleware requires it.");if(lV(e)){if(e.type==="public"||e.type==="secret")return e;e=await SI(e)}if(typeof e=="string"&&e.includes("PRIVATE")){const r=await crypto.subtle.importKey("pkcs8",yO(e),t,!0,[Hg.Sign]);e=await SI(r)}const n=[Hg.Verify];return typeof e=="object"?await crypto.subtle.importKey("jwk",e,t,!1,n):e.includes("PUBLIC")?await crypto.subtle.importKey("spki",yO(e),t,!1,n):await crypto.subtle.importKey("raw",Wy.encode(e),t,!1,n)}async function SI(e){if(e.type!=="private")throw new Error(`unexpected key type: ${e.type}`);if(!e.extractable)throw new Error("unexpected private key is unextractable");const t=await crypto.subtle.exportKey("jwk",e),{kty:n}=t,{alg:r,e:s,n:i}=t,{crv:o,x:a,y:c}=t;return{kty:n,alg:r,e:s,n:i,crv:o,x:a,y:c,key_ops:[Hg.Verify]}}function aV(e){switch(e){case"HS256":return{name:"HMAC",hash:{name:"SHA-256"}};case"HS384":return{name:"HMAC",hash:{name:"SHA-384"}};case"HS512":return{name:"HMAC",hash:{name:"SHA-512"}};case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"RS384":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-384"}};case"RS512":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-512"}};case"PS256":return{name:"RSA-PSS",hash:{name:"SHA-256"},saltLength:32};case"PS384":return{name:"RSA-PSS",hash:{name:"SHA-384"},saltLength:48};case"PS512":return{name:"RSA-PSS",hash:{name:"SHA-512"},saltLength:64};case"ES256":return{name:"ECDSA",hash:{name:"SHA-256"},namedCurve:"P-256"};case"ES384":return{name:"ECDSA",hash:{name:"SHA-384"},namedCurve:"P-384"};case"ES512":return{name:"ECDSA",hash:{name:"SHA-512"},namedCurve:"P-521"};case"EdDSA":return{name:"Ed25519",namedCurve:"Ed25519"};default:throw new o0e(e)}}function lV(e){return xF()==="node"&&crypto.webcrypto?e instanceof crypto.webcrypto.CryptoKey:e instanceof CryptoKey}var UN=e=>rV(Wy.encode(JSON.stringify(e)).buffer).replace(/=/g,""),y0e=e=>rV(e).replace(/=/g,""),EI=e=>JSON.parse(f0e.decode(nV(e)));function b0e(e){if(typeof e=="object"&&e!==null){const t=e;return"alg"in t&&Object.values(iV).includes(t.alg)&&(!("typ"in t)||t.typ==="JWT")}return!1}var v0e=async(e,t,n="HS256")=>{const r=UN(e);let s;typeof t=="object"&&"alg"in t?(n=t.alg,s=UN({alg:n,typ:"JWT",kid:t.kid})):s=UN({alg:n,typ:"JWT"});const i=`${s}.${r}`,o=await h0e(t,n,Wy.encode(i)),a=y0e(o);return`${i}.${a}`},x0e=async(e,t,n="HS256")=>{const r=e.split(".");if(r.length!==3)throw new oV(e);const{header:s,payload:i}=cV(e);if(!b0e(s))throw new u0e(s);const o=Date.now()/1e3|0;if(i.nbf&&i.nbf>o)throw new a0e(e);if(i.exp&&i.exp<=o)throw new l0e(e);if(i.iat&&o<i.iat)throw new c0e(o,i.iat);const a=e.substring(0,e.lastIndexOf("."));if(!await m0e(t,n,nV(r[2]),Wy.encode(a)))throw new d0e(e);return i},cV=e=>{try{const[t,n]=e.split("."),r=EI(t),s=EI(n);return{header:r,payload:s}}catch{throw new oV(e)}},zT={sign:v0e,verify:x0e,decode:cV},w0e=zT.verify,S0e=zT.decode,E0e=zT.sign;const uV=60*60*24*7,dV=We({path:pe({default:"/"}),sameSite:pe({enum:["strict","lax","none"],default:"lax"}),secure:gt({default:!0}),httpOnly:gt({default:!0}),expires:jt({default:uV}),partitioned:gt({default:!1}),renew:gt({default:!0}),pathSuccess:pe({default:"/"}),pathLoggedOut:pe({default:"/"})}).partial(),fV=We({secret:Rg({default:""}),alg:pe({enum:["HS256","HS384","HS512"],default:"HS256"}).optional(),expires:jt().optional(),issuer:pe().optional(),fields:Sn(pe(),{default:["id","email","role"]})},{default:{}}),N0e=ze({jwt:fV,cookie:dV});class _0e{constructor(t,n,r){K(this,"config");this.strategies=t,this.userPool=n,this.config=Un(N0e,r??{})}async resolveLogin(t,n,r,s,i){try{const o=(i==null?void 0:i.identifier)||"email";if(typeof o!="string"||o.length===0)throw new Ul("Identifier must be a string");if(!(o in r))throw new Ul(`Profile must have identifier "${o}"`);const a=await this.userPool.findBy(n.getName(),o,r[o]);if(a.strategy_value){if(a.strategy!==n.getName())throw new Ul("User signed up with a different strategy")}else throw new Ul("User must have a strategy value");await s(a);const c=await this.safeAuthResponse(a);return this.respondWithUser(t,c,i)}catch(o){return this.respondWithError(t,o,i)}}async resolveRegister(t,n,r,s,i){try{const o=(i==null?void 0:i.identifier)||"email";if(typeof o!="string"||o.length===0)throw new Ul("Identifier must be a string");if(!(o in r))throw new Ul(`Profile must have identifier "${o}"`);if(!("strategy_value"in r))throw new Ul("Profile must have a strategy value");const a=await this.userPool.create(n.getName(),{...r,strategy_value:r.strategy_value});await s(a);const c=await this.safeAuthResponse(a);return this.respondWithUser(t,c,i)}catch(o){return this.respondWithError(t,o,i)}}async respondWithUser(t,n,r){const s=this.getSafeUrl(t,(r==null?void 0:r.redirect)??this.config.cookie.pathSuccess??"/");if("token"in n)return await this.setAuthCookie(t,n.token),this.isJsonRequest(t)||r!=null&&r.forceJsonResponse?t.json(n):t.redirect(s);throw new As("Invalid response")}async respondWithError(t,n,r){if(pt.error("respondWithError",n),this.isJsonRequest(t)||r!=null&&r.forceJsonResponse)throw n;await wI(t,String(n),"error");const s=this.getSafeUrl(t,t.req.header("Referer")??"/");return t.redirect(s)}getStrategies(){return this.strategies}strategy(t){try{return this.strategies[t]}catch{throw new Error(`Strategy "${String(t)}" not found`)}}async jwt(t){var i,o,a;const r={...jx(t,this.config.jwt.fields),iat:Math.floor(Date.now()/1e3)};(i=this.config.jwt)!=null&&i.issuer&&(r.iss=this.config.jwt.issuer),(o=this.config.jwt)!=null&&o.expires&&(r.exp=Math.floor(Date.now()/1e3)+this.config.jwt.expires);const s=this.config.jwt.secret;if(!s||s.length===0)throw new Error("Cannot sign JWT without a secret");return E0e(r,s,((a=this.config.jwt)==null?void 0:a.alg)??"HS256")}async safeAuthResponse(t){const n=jx(t,this.config.jwt.fields);return{user:n,token:await this.jwt(n)}}async verify(t){var n,r,s;try{const i=await w0e(t,((n=this.config.jwt)==null?void 0:n.secret)??"",((r=this.config.jwt)==null?void 0:r.alg)??"HS256");if((s=this.config.jwt)!=null&&s.issuer&&i.iss!==this.config.jwt.issuer)throw new As("Invalid issuer",403);return i}catch(i){pt.debug("Authenticator jwt verify error",String(i))}}get cookieOptions(){const{expires:t=uV,renew:n,...r}=this.config.cookie;return{...r,expires:new Date(Date.now()+t*1e3)}}async getAuthCookie(t){try{const n=this.config.jwt.secret,r=await UF(t,n,"auth");return typeof r!="string"?void 0:r}catch(n){n instanceof Error&&pt.error("[getAuthCookie]",n.message);return}}async requestCookieRefresh(t){var n;if(this.config.cookie.renew&&((n=t.get("auth"))!=null&&n.user)){const r=await this.getAuthCookie(t);r&&await this.setAuthCookie(t,r)}}async setAuthCookie(t,n){pt.debug("setting auth cookie",Toe(n));const r=this.config.jwt.secret;await HF(t,"auth",n,r,this.cookieOptions)}async unsafeGetAuthCookie(t){return Mv("auth",t,this.config.jwt.secret,this.cookieOptions)}deleteAuthCookie(t){pt.debug("deleting auth cookie"),uce(t,"auth",this.cookieOptions)}async logout(t){pt.info("Logging out"),t.set("auth",void 0),await this.getAuthCookie(t)&&wI(t,"Signed out","info"),this.deleteAuthCookie(t)}isJsonRequest(t){return t.req.header("Content-Type")==="application/json"}async getBody(t){return this.isJsonRequest(t)?await t.req.json():Object.fromEntries((await t.req.formData()).entries())}getSafeUrl(t,n){const r=n.replace(/\/+$/,"/");return Loe("redirects_non_fq")?r:new URL(t.req.url).origin+r}async resolveAuthFromRequest(t){let n,r=!1;if(t instanceof Headers)n=t;else if(t instanceof Request)n=t.headers;else{r=!0;try{n=t.req.raw.headers}catch{throw new As("Request/Headers/Context is required to resolve auth",400)}}let s;if(n.has("Authorization"))s=String(n.get("Authorization")).replace("Bearer ","");else{const i=r?t:{req:{raw:{headers:n}}};s=await this.getAuthCookie(i)}if(s)return await this.verify(s)}toJSON(t){return{...this.config,jwt:t?this.config.jwt:void 0}}}let bO;var Cv,F8;(typeof navigator>"u"||!((F8=(Cv=navigator.userAgent)==null?void 0:Cv.startsWith)!=null&&F8.call(Cv,"Mozilla/5.0 ")))&&(bO="oauth4webapi/v2.17.0");function Gy(e,t){if(e==null)return!1;try{return e instanceof t||Object.getPrototypeOf(e)[Symbol.toStringTag]===t.prototype[Symbol.toStringTag]}catch{return!1}}const kx=Symbol(),C0e=Symbol(),VT=Symbol(),O0e=Symbol(),hV=Symbol(),j0e=Symbol(),A0e=new TextEncoder,T0e=new TextDecoder;function pc(e){return typeof e=="string"?A0e.encode(e):T0e.decode(e)}const NI=32768;function $0e(e){e instanceof ArrayBuffer&&(e=new Uint8Array(e));const t=[];for(let n=0;n<e.byteLength;n+=NI)t.push(String.fromCharCode.apply(null,e.subarray(n,n+NI)));return btoa(t.join("")).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function R0e(e){try{const t=atob(e.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"")),n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}catch(t){throw new Qe("The input to be decoded is not correctly encoded.",{cause:t})}}function $a(e){return typeof e=="string"?R0e(e):$0e(e)}class k0e{constructor(t){this.cache=new Map,this._cache=new Map,this.maxSize=t}get(t){let n=this.cache.get(t);if(n)return n;if(n=this._cache.get(t))return this.update(t,n),n}has(t){return this.cache.has(t)||this._cache.has(t)}set(t,n){return this.cache.has(t)?this.cache.set(t,n):this.update(t,n),this}delete(t){return this.cache.has(t)?this.cache.delete(t):this._cache.has(t)?this._cache.delete(t):!1}update(t,n){this.cache.set(t,n),this.cache.size>=this.maxSize&&(this._cache=this.cache,this.cache=new Map)}}class Qi extends Error{constructor(t){var n;super(t??"operation not supported"),this.name=this.constructor.name,(n=Error.captureStackTrace)==null||n.call(Error,this,this.constructor)}}class M0e extends Error{constructor(t,n){var r;super(t,n),this.name=this.constructor.name,(r=Error.captureStackTrace)==null||r.call(Error,this,this.constructor)}}const Qe=M0e,mV=new k0e(100);function pV(e){return e instanceof CryptoKey}function I0e(e){return pV(e)&&e.type==="private"}function P0e(e){return pV(e)&&e.type==="public"}function UT(e){try{const t=e.headers.get("dpop-nonce");t&&mV.set(new URL(e.url).origin,t)}catch{}return e}function Mh(e){return!(e===null||typeof e!="object"||Array.isArray(e))}function H1(e){Gy(e,Headers)&&(e=Object.fromEntries(e.entries()));const t=new Headers(e);if(bO&&!t.has("user-agent")&&t.set("user-agent",bO),t.has("authorization"))throw new TypeError('"options.headers" must not include the "authorization" header name');if(t.has("dpop"))throw new TypeError('"options.headers" must not include the "dpop" header name');return t}function D0e(e){if(typeof e=="function"&&(e=e()),!(e instanceof AbortSignal))throw new TypeError('"options.signal" must return or be an instance of AbortSignal');return e}async function L0e(e,t){if(!(e instanceof URL))throw new TypeError('"issuerIdentifier" must be an instance of URL');if(e.protocol!=="https:"&&e.protocol!=="http:")throw new TypeError('"issuer.protocol" must be "https:" or "http:"');const n=new URL(e.href);switch(t==null?void 0:t.algorithm){case void 0:case"oidc":n.pathname=`${n.pathname}/.well-known/openid-configuration`.replace("//","/");break;case"oauth2":n.pathname==="/"?n.pathname=".well-known/oauth-authorization-server":n.pathname=`.well-known/oauth-authorization-server/${n.pathname}`.replace("//","/");break;default:throw new TypeError('"options.algorithm" must be "oidc" (default), or "oauth2"')}const r=H1(t==null?void 0:t.headers);return r.set("accept","application/json"),((t==null?void 0:t[VT])||fetch)(n.href,{headers:Object.fromEntries(r.entries()),method:"GET",redirect:"manual",signal:null}).then(UT)}function or(e){return typeof e=="string"&&e.length!==0}async function F0e(e,t){if(!(e instanceof URL))throw new TypeError('"expectedIssuer" must be an instance of URL');if(!Gy(t,Response))throw new TypeError('"response" must be an instance of Response');if(t.status!==200)throw new Qe('"response" is not a conform Authorization Server Metadata response');Wg(t);let n;try{n=await t.json()}catch(r){throw new Qe('failed to parse "response" body as JSON',{cause:r})}if(!Mh(n))throw new Qe('"response" body must be a top level object');if(!or(n.issuer))throw new Qe('"response" body "issuer" property must be a non-empty string');if(new URL(n.issuer).href!==e.href)throw new Qe('"response" body "issuer" does not match "expectedIssuer"');return n}function gV(){return $a(crypto.getRandomValues(new Uint8Array(32)))}function _I(){return gV()}async function B0e(e){if(!or(e))throw new TypeError('"codeVerifier" must be a non-empty string');return $a(await crypto.subtle.digest("SHA-256",pc(e)))}function CI(e){return encodeURIComponent(e).replace(/%20/g,"+")}function z0e(e,t){const n=CI(e),r=CI(t);return`Basic ${btoa(`${n}:${r}`)}`}function V0e(e){switch(e.algorithm.hash.name){case"SHA-256":return"PS256";case"SHA-384":return"PS384";case"SHA-512":return"PS512";default:throw new Qi("unsupported RsaHashedKeyAlgorithm hash name")}}function U0e(e){switch(e.algorithm.hash.name){case"SHA-256":return"RS256";case"SHA-384":return"RS384";case"SHA-512":return"RS512";default:throw new Qi("unsupported RsaHashedKeyAlgorithm hash name")}}function q0e(e){switch(e.algorithm.namedCurve){case"P-256":return"ES256";case"P-384":return"ES384";case"P-521":return"ES512";default:throw new Qi("unsupported EcKeyAlgorithm namedCurve")}}function H0e(e){switch(e.algorithm.name){case"RSA-PSS":return V0e(e);case"RSASSA-PKCS1-v1_5":return U0e(e);case"ECDSA":return q0e(e);case"Ed25519":case"Ed448":return"EdDSA";default:throw new Qi("unsupported CryptoKey algorithm name")}}function Yy(e){const t=e==null?void 0:e[kx];return typeof t=="number"&&Number.isFinite(t)?t:0}function qT(e){const t=e==null?void 0:e[C0e];return typeof t=="number"&&Number.isFinite(t)&&Math.sign(t)!==-1?t:30}function HT(){return Math.floor(Date.now()/1e3)}function Jy(e){if(typeof e!="object"||e===null)throw new TypeError('"as" must be an object');if(!or(e.issuer))throw new TypeError('"as.issuer" property must be a non-empty string');return!0}function Xy(e){if(typeof e!="object"||e===null)throw new TypeError('"client" must be an object');if(!or(e.client_id))throw new TypeError('"client.client_id" property must be a non-empty string');return!0}function OI(e){if(!or(e))throw new TypeError('"client.client_secret" property must be a non-empty string');return e}function jI(e,t){if(t!==void 0)throw new TypeError(`"client.client_secret" property must not be provided when ${e} client authentication method is used.`)}async function W0e(e,t,n,r,s){switch(n.delete("client_secret"),n.delete("client_assertion_type"),n.delete("client_assertion"),t.token_endpoint_auth_method){case void 0:case"client_secret_basic":{r.set("authorization",z0e(t.client_id,OI(t.client_secret)));break}case"client_secret_post":{n.set("client_id",t.client_id),n.set("client_secret",OI(t.client_secret));break}case"private_key_jwt":throw jI("private_key_jwt",t.client_secret),new TypeError('"options.clientPrivateKey" must be provided when "client.token_endpoint_auth_method" is "private_key_jwt"');case"tls_client_auth":case"self_signed_tls_client_auth":case"none":{jI(t.token_endpoint_auth_method,t.client_secret),t.token_endpoint_auth_method,n.set("client_id",t.client_id);break}default:throw new Qi("unsupported client token_endpoint_auth_method")}}async function G0e(e,t,n){if(!n.usages.includes("sign"))throw new TypeError('CryptoKey instances used for signing assertions must include "sign" in their "usages"');const r=`${$a(pc(JSON.stringify(e)))}.${$a(pc(JSON.stringify(t)))}`,s=$a(await crypto.subtle.sign(_V(n),n,pc(r)));return`${r}.${s}`}async function Y0e(e,t,n,r,s,i){var p;const{privateKey:o,publicKey:a,nonce:c=mV.get(n.origin)}=t;if(!I0e(o))throw new TypeError('"DPoP.privateKey" must be a private CryptoKey');if(!P0e(a))throw new TypeError('"DPoP.publicKey" must be a public CryptoKey');if(c!==void 0&&!or(c))throw new TypeError('"DPoP.nonce" must be a non-empty string or undefined');if(!a.extractable)throw new TypeError('"DPoP.publicKey.extractable" must be true');const u=HT()+s,f={alg:H0e(o),typ:"dpop+jwt",jwk:await X0e(a)},h={iat:u,jti:gV(),htm:r,nonce:c,htu:`${n.origin}${n.pathname}`,ath:i?$a(await crypto.subtle.digest("SHA-256",pc(i))):void 0};(p=t[O0e])==null||p.call(t,f,h),e.set("dpop",await G0e(f,h,o))}let Fv;async function J0e(e){const{kty:t,e:n,n:r,x:s,y:i,crv:o}=await crypto.subtle.exportKey("jwk",e),a={kty:t,e:n,n:r,x:s,y:i,crv:o};return Fv.set(e,a),a}async function X0e(e){return Fv||(Fv=new WeakMap),Fv.get(e)||J0e(e)}function AI(e,t,n){if(typeof e!="string")throw n?new TypeError(`"as.mtls_endpoint_aliases.${t}" must be a string`):new TypeError(`"as.${t}" must be a string`);return new URL(e)}function yV(e,t,n=!1){return n&&e.mtls_endpoint_aliases&&t in e.mtls_endpoint_aliases?AI(e.mtls_endpoint_aliases[t],t,n):AI(e[t],t,n)}function bV(e,t){return!!(e.use_mtls_endpoint_aliases||t!=null&&t[j0e])}function zf(e){const t=e;return typeof t!="object"||Array.isArray(t)||t===null?!1:t.error!==void 0}function K0e(e){return e.length>=2&&e[0]==='"'&&e[e.length-1]==='"'?e.slice(1,-1):e}const Q0e=/((?:,|, )?[0-9a-zA-Z!#$%&'*+-.^_`|~]+=)/,Z0e=/(?:^|, ?)([0-9a-zA-Z!#$%&'*+\-.^_`|~]+)(?=$|[ ,])/g;function ebe(e,t){const n=t.split(Q0e).slice(1);if(!n.length)return{scheme:e.toLowerCase(),parameters:{}};n[n.length-1]=n[n.length-1].replace(/,$/,"");const r={};for(let s=1;s<n.length;s+=2){const i=s;if(n[i][0]==='"')for(;n[i].slice(-1)!=='"'&&++s<n.length;)n[i]+=n[s];const o=n[i-1].replace(/^(?:, ?)|=$/g,"").toLowerCase();r[o]=K0e(n[i])}return{scheme:e.toLowerCase(),parameters:r}}function TI(e){if(!Gy(e,Response))throw new TypeError('"response" must be an instance of Response');const t=e.headers.get("www-authenticate");if(t===null)return;const n=[];for(const{1:s,index:i}of t.matchAll(Z0e))n.push([s,i]);return n.length?n.map(([s,i],o,a)=>{const c=a[o+1];let u;return c?u=t.slice(i,c[1]):u=t.slice(i),ebe(s,u)}):void 0}async function tbe(e,t,n,r,s,i){if(!or(e))throw new TypeError('"accessToken" must be a non-empty string');if(!(n instanceof URL))throw new TypeError('"url" must be an instance of URL');return r=H1(r),(i==null?void 0:i.DPoP)===void 0?r.set("authorization",`Bearer ${e}`):(await Y0e(r,i.DPoP,n,t.toUpperCase(),Yy({[kx]:i==null?void 0:i[kx]}),e),r.set("authorization",`DPoP ${e}`)),((i==null?void 0:i[VT])||fetch)(n.href,{body:s,headers:Object.fromEntries(r.entries()),method:t,redirect:"manual",signal:i!=null&&i.signal?D0e(i.signal):null}).then(UT)}async function $I(e,t,n,r){Jy(e),Xy(t);const s=yV(e,"userinfo_endpoint",bV(t,r)),i=H1(r==null?void 0:r.headers);return t.userinfo_signed_response_alg?i.set("accept","application/jwt"):(i.set("accept","application/json"),i.append("accept","application/jwt")),tbe(n,"GET",s,i,null,{...r,[kx]:Yy(t)})}const nbe=Symbol();function rbe(e){var t;return(t=e.headers.get("content-type"))==null?void 0:t.split(";")[0]}async function sbe(e,t,n,r){if(Jy(e),Xy(t),!Gy(r,Response))throw new TypeError('"response" must be an instance of Response');if(r.status!==200)throw new Qe('"response" is not a conform UserInfo Endpoint response');let s;if(rbe(r)==="application/jwt"){Wg(r);const{claims:i,jwt:o}=await CV(await r.text(),OV.bind(void 0,t.userinfo_signed_response_alg,e.userinfo_signing_alg_values_supported),WT,Yy(t),qT(t),t[hV]).then(lbe.bind(void 0,t.client_id)).then(cbe.bind(void 0,e.issuer));abe.set(r,o),s=i}else{if(t.userinfo_signed_response_alg)throw new Qe("JWT UserInfo Response expected");Wg(r);try{s=await r.json()}catch(i){throw new Qe('failed to parse "response" body as JSON',{cause:i})}}if(!Mh(s))throw new Qe('"response" body must be a top level object');if(!or(s.sub))throw new Qe('"response" body "sub" property must be a non-empty string');switch(n){case nbe:break;default:if(!or(n))throw new Qe('"expectedSubject" must be a non-empty string');if(s.sub!==n)throw new Qe('unexpected "response" body "sub" value')}return s}async function ibe(e,t,n,r,s,i,o){return await W0e(e,t,s,i),i.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),((o==null?void 0:o[VT])||fetch)(r.href,{body:s,headers:Object.fromEntries(i.entries()),method:n,redirect:"manual",signal:null}).then(UT)}async function obe(e,t,n,r,s){const i=yV(e,"token_endpoint",bV(t,s));r.set("grant_type",n);const o=H1(s==null?void 0:s.headers);return o.set("accept","application/json"),ibe(e,t,"POST",i,r,o,s)}const vV=new WeakMap,abe=new WeakMap;function xV(e){if(!e.id_token)return;const t=vV.get(e);if(!t)throw new TypeError('"ref" was already garbage collected or did not resolve from the proper sources');return t[0]}async function wV(e,t,n,r=!1,s=!1){if(Jy(e),Xy(t),!Gy(n,Response))throw new TypeError('"response" must be an instance of Response');if(n.status!==200){let o;if(o=await gbe(n))return o;throw new Qe('"response" is not a conform Token Endpoint response')}Wg(n);let i;try{i=await n.json()}catch(o){throw new Qe('failed to parse "response" body as JSON',{cause:o})}if(!Mh(i))throw new Qe('"response" body must be a top level object');if(!or(i.access_token))throw new Qe('"response" body "access_token" property must be a non-empty string');if(!or(i.token_type))throw new Qe('"response" body "token_type" property must be a non-empty string');if(i.token_type=i.token_type.toLowerCase(),i.token_type!=="dpop"&&i.token_type!=="bearer")throw new Qi("unsupported `token_type` value");if(i.expires_in!==void 0&&(typeof i.expires_in!="number"||i.expires_in<=0))throw new Qe('"response" body "expires_in" property must be a positive number');if(!s&&i.refresh_token!==void 0&&!or(i.refresh_token))throw new Qe('"response" body "refresh_token" property must be a non-empty string');if(i.scope!==void 0&&typeof i.scope!="string")throw new Qe('"response" body "scope" property must be a string');if(!r){if(i.id_token!==void 0&&!or(i.id_token))throw new Qe('"response" body "id_token" property must be a non-empty string');if(i.id_token){const{claims:o,jwt:a}=await CV(i.id_token,OV.bind(void 0,t.id_token_signed_response_alg,e.id_token_signing_alg_values_supported),WT,Yy(t),qT(t),t[hV]).then(fbe.bind(void 0,["aud","exp","iat","iss","sub"])).then(EV.bind(void 0,e.issuer)).then(SV.bind(void 0,t.client_id));if(Array.isArray(o.aud)&&o.aud.length!==1){if(o.azp===void 0)throw new Qe('ID Token "aud" (audience) claim includes additional untrusted audiences');if(o.azp!==t.client_id)throw new Qe('unexpected ID Token "azp" (authorized party) claim value')}if(o.auth_time!==void 0&&(!Number.isFinite(o.auth_time)||Math.sign(o.auth_time)!==1))throw new Qe('ID Token "auth_time" (authentication time) must be a positive number');vV.set(i,[o,a])}}return i}function lbe(e,t){return t.claims.aud!==void 0?SV(e,t):t}function SV(e,t){if(Array.isArray(t.claims.aud)){if(!t.claims.aud.includes(e))throw new Qe('unexpected JWT "aud" (audience) claim value')}else if(t.claims.aud!==e)throw new Qe('unexpected JWT "aud" (audience) claim value');return t}function cbe(e,t){return t.claims.iss!==void 0?EV(e,t):t}function EV(e,t){if(t.claims.iss!==e)throw new Qe('unexpected JWT "iss" (issuer) claim value');return t}const NV=new WeakSet;function ube(e){return NV.add(e),e}async function RI(e,t,n,r,s,i){if(Jy(e),Xy(t),!NV.has(n))throw new TypeError('"callbackParameters" must be an instance of URLSearchParams obtained from "validateAuthResponse()", or "validateJwtAuthResponse()');if(!or(r))throw new TypeError('"redirectUri" must be a non-empty string');if(!or(s))throw new TypeError('"codeVerifier" must be a non-empty string');const o=da(n,"code");if(!o)throw new Qe('no authorization code in "callbackParameters"');const a=new URLSearchParams(i==null?void 0:i.additionalParameters);return a.set("redirect_uri",r),a.set("code_verifier",s),a.set("code",o),obe(e,t,"authorization_code",a,i)}const dbe={aud:"audience",c_hash:"code hash",client_id:"client id",exp:"expiration time",iat:"issued at",iss:"issuer",jti:"jwt id",nonce:"nonce",s_hash:"state hash",sub:"subject",ath:"access token hash",htm:"http method",htu:"http uri",cnf:"confirmation"};function fbe(e,t){for(const n of e)if(t.claims[n]===void 0)throw new Qe(`JWT "${n}" (${dbe[n]}) claim missing`);return t}const hbe=Symbol(),qN=Symbol();async function mbe(e,t,n,r,s){const i=await wV(e,t,n);if(zf(i))return i;if(!or(i.id_token))throw new Qe('"response" body "id_token" property must be a non-empty string');s??(s=t.default_max_age??qN);const o=xV(i);if((t.require_auth_time||s!==qN)&&o.auth_time===void 0)throw new Qe('ID Token "auth_time" (authentication time) claim missing');if(s!==qN){if(typeof s!="number"||s<0)throw new TypeError('"maxAge" must be a non-negative number');const a=HT()+Yy(t),c=qT(t);if(o.auth_time+s<a-c)throw new Qe("too much time has elapsed since the last End-User authentication")}switch(r){case void 0:case hbe:if(o.nonce!==void 0)throw new Qe('unexpected ID Token "nonce" claim value');break;default:if(!or(r))throw new TypeError('"expectedNonce" must be a non-empty string');if(o.nonce===void 0)throw new Qe('ID Token "nonce" claim missing');if(o.nonce!==r)throw new Qe('unexpected ID Token "nonce" claim value')}return i}async function pbe(e,t,n){const r=await wV(e,t,n,!0);if(zf(r))return r;if(r.id_token!==void 0){if(typeof r.id_token=="string"&&r.id_token.length)throw new Qe("Unexpected ID Token returned, use processAuthorizationCodeOpenIDResponse() for OpenID Connect callback processing");delete r.id_token}return r}function Wg(e){if(e.bodyUsed)throw new TypeError('"response" body has been used already')}async function gbe(e){if(e.status>399&&e.status<500){Wg(e);try{const t=await e.json();if(Mh(t)&&typeof t.error=="string"&&t.error.length)return t.error_description!==void 0&&typeof t.error_description!="string"&&delete t.error_description,t.error_uri!==void 0&&typeof t.error_uri!="string"&&delete t.error_uri,t.algs!==void 0&&typeof t.algs!="string"&&delete t.algs,t.scope!==void 0&&typeof t.scope!="string"&&delete t.scope,t}catch{}}}function kI(e){if(typeof e.modulusLength!="number"||e.modulusLength<2048)throw new Qe(`${e.name} modulusLength must be at least 2048 bits`)}function ybe(e){switch(e){case"P-256":return"SHA-256";case"P-384":return"SHA-384";case"P-521":return"SHA-512";default:throw new Qi}}function _V(e){switch(e.algorithm.name){case"ECDSA":return{name:e.algorithm.name,hash:ybe(e.algorithm.namedCurve)};case"RSA-PSS":switch(kI(e.algorithm),e.algorithm.hash.name){case"SHA-256":case"SHA-384":case"SHA-512":return{name:e.algorithm.name,saltLength:parseInt(e.algorithm.hash.name.slice(-3),10)>>3};default:throw new Qi}case"RSASSA-PKCS1-v1_5":return kI(e.algorithm),e.algorithm.name;case"Ed448":case"Ed25519":return e.algorithm.name}throw new Qi}const WT=Symbol();async function bbe(e,t,n,r){const s=`${e}.${t}`;if(!await crypto.subtle.verify(_V(n),n,r,pc(s)))throw new Qe("JWT signature verification failed")}async function CV(e,t,n,r,s,i){let{0:o,1:a,2:c,length:u}=e.split(".");if(u===5)if(i!==void 0)e=await i(e),{0:o,1:a,2:c,length:u}=e.split(".");else throw new Qi("JWE structure JWTs are not supported");if(u!==3)throw new Qe("Invalid JWT");let f;try{f=JSON.parse(pc($a(o)))}catch(x){throw new Qe("failed to parse JWT Header body as base64url encoded JSON",{cause:x})}if(!Mh(f))throw new Qe("JWT Header must be a top level object");if(t(f),f.crit!==void 0)throw new Qe('unexpected JWT "crit" header parameter');const h=$a(c);let p;n!==WT&&(p=await n(f),await bbe(o,a,p,h));let y;try{y=JSON.parse(pc($a(a)))}catch(x){throw new Qe("failed to parse JWT Payload body as base64url encoded JSON",{cause:x})}if(!Mh(y))throw new Qe("JWT Payload must be a top level object");const v=HT()+r;if(y.exp!==void 0){if(typeof y.exp!="number")throw new Qe('unexpected JWT "exp" (expiration time) claim type');if(y.exp<=v-s)throw new Qe('unexpected JWT "exp" (expiration time) claim value, timestamp is <= now()')}if(y.iat!==void 0&&typeof y.iat!="number")throw new Qe('unexpected JWT "iat" (issued at) claim type');if(y.iss!==void 0&&typeof y.iss!="string")throw new Qe('unexpected JWT "iss" (issuer) claim type');if(y.nbf!==void 0){if(typeof y.nbf!="number")throw new Qe('unexpected JWT "nbf" (not before) claim type');if(y.nbf>v+s)throw new Qe('unexpected JWT "nbf" (not before) claim value, timestamp is > now()')}if(y.aud!==void 0&&typeof y.aud!="string"&&!Array.isArray(y.aud))throw new Qe('unexpected JWT "aud" (audience) claim type');return{header:f,claims:y,signature:h,key:p,jwt:e}}function OV(e,t,n){if(e!==void 0){if(n.alg!==e)throw new Qe('unexpected JWT "alg" header parameter');return}if(Array.isArray(t)){if(!t.includes(n.alg))throw new Qe('unexpected JWT "alg" header parameter');return}if(n.alg!=="RS256")throw new Qe('unexpected JWT "alg" header parameter')}function da(e,t){const{0:n,length:r}=e.getAll(t);if(r>1)throw new Qe(`"${t}" parameter must be provided only once`);return n}const vbe=Symbol(),vO=Symbol();function MI(e,t,n,r){if(Jy(e),Xy(t),n instanceof URL&&(n=n.searchParams),!(n instanceof URLSearchParams))throw new TypeError('"parameters" must be an instance of URLSearchParams, or URL');if(da(n,"response"))throw new Qe('"parameters" contains a JARM response, use validateJwtAuthResponse() instead of validateAuthResponse()');const s=da(n,"iss"),i=da(n,"state");if(!s&&e.authorization_response_iss_parameter_supported)throw new Qe('response parameter "iss" (issuer) missing');if(s&&s!==e.issuer)throw new Qe('unexpected "iss" (issuer) response parameter value');switch(r){case void 0:case vO:if(i!==void 0)throw new Qe('unexpected "state" response parameter encountered');break;case vbe:break;default:if(!or(r))throw new Qe('"expectedState" must be a non-empty string');if(i===void 0)throw new Qe('response parameter "state" missing');if(i!==r)throw new Qe('unexpected "state" response parameter value')}const o=da(n,"error");if(o)return{error:o,error_description:da(n,"error_description"),error_uri:da(n,"error_uri")};const a=da(n,"id_token"),c=da(n,"token");if(a!==void 0||c!==void 0)throw new Qi("implicit and hybrid flows are not supported");return ube(new URLSearchParams(n))}const xbe={type:"oidc",client:{token_endpoint_auth_method:"client_secret_basic"},as:{issuer:"https://accounts.google.com"},profile:async e=>({...e,sub:e.sub,email:e.email})},wbe={type:"oauth2",client:{token_endpoint_auth_method:"client_secret_basic"},as:{code_challenge_methods_supported:["S256"],issuer:"https://github.com",scopes_supported:["read:user","user:email"],scope_separator:" ",authorization_endpoint:"https://github.com/login/oauth/authorize",token_endpoint:"https://github.com/login/oauth/access_token",userinfo_endpoint:"https://api.github.com/user"},profile:async(e,t,n)=>{var r;try{const o=(r=(await(await fetch("https://api.github.com/user/emails",{headers:{"User-Agent":"bknd",Accept:"application/json",Authorization:`Bearer ${n.access_token}`}})).json()).find(a=>a.primary))==null?void 0:r.email;if(!o)throw new Error("No primary email found");return{...e,sub:String(e.id),email:o}}catch{throw new Error("Couldn't retrive github email")}}},jV=Object.freeze(Object.defineProperty({__proto__:null,github:wbe,google:xbe},Symbol.toStringTag,{value:"Module"}));class AV{constructor(t,n,r,s){K(this,"actions",{});this.config=t,this.type=n,this.name=r,this.mode=s,this.config=Un(this.getSchema(),t??{})}registerAction(t,n,r){this.actions[t]={schema:n,preprocess:r}}getType(){return this.type}getMode(){return this.mode}getName(){return this.name}toJSON(t){return{type:this.getType(),config:t?this.config:void 0}}getActions(){return this.actions}}const Sbe=ze({name:pe({enum:Object.keys(jV)}),type:pe({enum:["oidc","oauth2"],default:"oauth2"}),client:ze({client_id:pe(),client_secret:pe()}).strict()},{title:"OAuth"});class Mp extends As{constructor(n,r){super("OAuthCallbackException on "+r);K(this,"name","OAuthCallbackException");this.error=n,this.step=r}}class xO extends AV{constructor(t){super(t,"oauth",t.name,"external")}getSchema(){return Sbe}getIssuerConfig(){return jV[this.config.name]}async getConfig(){const t=this.getIssuerConfig();if(t.type==="oidc"){const n=new URL(t.as.issuer),r=await L0e(n);t.as=await F0e(n,r)}return{...t,type:t.type,client:{...t.client,...this.config.client}}}async getCodeChallenge(t,n,r="S256"){var a;const s=(a=t.code_challenge_methods_supported)==null?void 0:a.includes(r);let i,o;return s&&(i=await B0e(n),o=r),{challenge_supported:s,challenge:i,challenge_method:o}}async request(t){const{client:n,as:r}=await this.getConfig(),{challenge_supported:s,challenge:i,challenge_method:o}=await this.getCodeChallenge(r,t.state);if(!r.authorization_endpoint)throw new Error("authorization_endpoint is not provided");const a=t.scopes??r.scopes_supported;if(!Array.isArray(a)||a.length===0)throw new Error("No scopes provided");if(a.every(f=>{var h;return!((h=r.scopes_supported)!=null&&h.includes(f))}))throw new Error("Invalid scopes provided");const c=r.authorization_endpoint,u={client_id:n.client_id,redirect_uri:t.redirect_uri,response_type:"code",scope:a.join(r.scope_separator??" ")};return s?(u.code_challenge=i,u.code_challenge_method=o):u.nonce=t.state,{url:new URL(c)+"?"+new URLSearchParams(u).toString(),endpoint:c,params:u}}async oidc(t,n){const r=await this.getConfig(),{client:s,as:i,type:o}=r,a=MI(i,s,t,vO);if(zf(a))throw new Mp(a,"validateAuthResponse");const c=await RI(i,s,a,n.redirect_uri,n.state),u=TI(c);if(u)throw new Mp(u,"www-authenticate");const{challenge_supported:f,challenge:h}=await this.getCodeChallenge(i,n.state),y=await mbe(i,s,c,f?void 0:h);if(zf(y))throw new Mp(y,"processAuthorizationCodeOpenIDResponse");const v=xV(y),x=await $I(i,s,y.access_token),E=await sbe(i,s,v.sub,x);return await r.profile(E,r,v)}async oauth2(t,n){const r=await this.getConfig(),{client:s,type:i,as:o,profile:a}=r,c=MI(o,s,t,vO);if(zf(c))throw new Mp(c,"validateAuthResponse");const u=await RI(o,s,c,n.redirect_uri,n.state),f=TI(u);if(f)throw new Mp(f,"www-authenticate");const h=u.clone();let p={};try{if(p=await pbe(o,s,u),zf(p))throw new Error}catch{p=await h.json()}const v=await(await $I(o,s,p.access_token)).json();return await r.profile(v,r,p)}async callback(t,n){switch(this.getIssuerConfig().type){case"oidc":return await this.oidc(t,n);case"oauth2":return await this.oauth2(t,n);default:throw new Error("Unsupported type")}}getController(t){const n=new V1,r="secret",s="_challenge",i=async(a,c)=>{await HF(a,s,JSON.stringify(c),r,{secure:!0,httpOnly:!0,sameSite:"Lax",maxAge:60*5})},o=async a=>{if(a.req.header("X-State-Challenge"))return{state:a.req.header("X-State-Challenge"),action:a.req.header("X-State-Action"),mode:"token"};const c=await UF(a,r,s);try{return JSON.parse(c)}catch{throw new Error("Invalid state")}};return n.get("/callback",async a=>{const c=new URL(a.req.url),u=new URLSearchParams(c.search),f=await o(a),h=f.mode==="cookie"?c.origin+c.pathname:c.origin+c.pathname.replace("/callback","/token"),p=await this.callback(u,{redirect_uri:h,state:f.state}),y={email:p.email,strategy_value:p.sub},v=async E=>{if(E.strategy_value!==p.sub)throw new As("Invalid credentials")},x={redirect:f.redirect,forceJsonResponse:f.mode!=="cookie"};switch(f.action){case"login":return t.resolveLogin(a,this,y,v,x);case"register":return t.resolveRegister(a,this,y,v,x);default:throw new Error("Invalid action")}}),n.get("/token",async a=>{const c=new URL(a.req.url),u=new URLSearchParams(c.search);return a.json({code:u.get("code")??null})}),n.post("/:action",async a=>{const c=a.req.param("action");if(!["login","register"].includes(c))return a.notFound();const u=new URL(a.req.url),f=u.pathname.replace(`/${c}`,""),h=u.origin+f+"/callback",p=new URL(a.req.header("Referer")??"/"),y=_I(),v=await this.request({redirect_uri:h,state:y});return await i(a,{state:y,action:c,redirect:p.toString(),mode:"cookie"}),a.redirect(v.url)}),n.get("/:action",async a=>{const c=a.req.param("action");if(!["login","register"].includes(c))return a.notFound();const u=new URL(a.req.url),f=u.pathname.replace(`/${c}`,""),h=u.origin+f+"/token",p=_I(),y=await this.request({redirect_uri:h,state:p});return Hr()?a.json({url:y.url,redirect_uri:h,challenge:p,action:c,params:y.params}):a.json({url:y.url,challenge:p,action:c})}),n}toJSON(t){const n=t?this.config:fF(this.config,["secret","client_id"]);return{...super.toJSON(t),config:{...n,type:this.getIssuerConfig().type}}}}const HN=pe({pattern:"^(https?|wss?)://[^\\s/$.?#].[^\\s]*$"}),Ebe=We({type:pe({enum:["oidc","oauth2"],default:"oidc"}),name:pe(),client:ze({client_id:pe(),client_secret:pe(),token_endpoint_auth_method:pe({enum:["client_secret_basic"]})}),as:We({issuer:pe(),code_challenge_methods_supported:pe({enum:["S256"]}).optional(),scopes_supported:Sn(pe()).optional(),scope_separator:pe({default:" "}).optional(),authorization_endpoint:HN.optional(),token_endpoint:HN.optional(),userinfo_endpoint:HN.optional()})},{title:"Custom OAuth"});class II extends xO{constructor(t){super(t),this.type="custom_oauth"}getIssuerConfig(){return{...this.config,profile:async t=>t}}getSchema(){return Ebe}}const Nbe={};function _be(e){try{return crypto.getRandomValues(new Uint8Array(e))}catch{}try{return Nbe.randomBytes(e)}catch{}throw Error("Neither WebCryptoAPI nor a crypto module is available. Use bcrypt.setRandomFallback to set an alternative")}function Cbe(e,t){if(e=e||RV,typeof e!="number")throw Error("Illegal arguments: "+typeof e+", "+typeof t);e<4?e=4:e>31&&(e=31);var n=[];return n.push("$2b$"),e<10&&n.push("0"),n.push(e.toString()),n.push("$"),n.push(wO(_be(Gg),Gg)),n.join("")}function TV(e,t,n){if(typeof t=="function"&&(n=t,t=void 0),typeof e=="function"&&(n=e,e=void 0),typeof e>"u")e=RV;else if(typeof e!="number")throw Error("illegal arguments: "+typeof e);function r(s){Ui(function(){try{s(null,Cbe(e))}catch(i){s(i)}})}if(n){if(typeof n!="function")throw Error("Illegal callback: "+typeof n);r(n)}else return new Promise(function(s,i){r(function(o,a){if(o){i(o);return}s(a)})})}function $V(e,t,n,r){function s(i){typeof e=="string"&&typeof t=="number"?TV(t,function(o,a){BI(e,a,i,r)}):typeof e=="string"&&typeof t=="string"?BI(e,t,i,r):Ui(i.bind(this,Error("Illegal arguments: "+typeof e+", "+typeof t)))}if(n){if(typeof n!="function")throw Error("Illegal callback: "+typeof n);s(n)}else return new Promise(function(i,o){s(function(a,c){if(a){o(a);return}i(c)})})}function Obe(e,t){for(var n=e.length^t.length,r=0;r<e.length;++r)n|=e.charCodeAt(r)^t.charCodeAt(r);return n===0}function jbe(e,t,n,r){function s(i){if(typeof e!="string"||typeof t!="string"){Ui(i.bind(this,Error("Illegal arguments: "+typeof e+", "+typeof t)));return}if(t.length!==60){Ui(i.bind(this,null,!1));return}$V(e,t.substring(0,29),function(o,a){o?i(o):i(null,Obe(a,t))},r)}if(n){if(typeof n!="function")throw Error("Illegal callback: "+typeof n);s(n)}else return new Promise(function(i,o){s(function(a,c){if(a){o(a);return}i(c)})})}var Ui=typeof process<"u"&&process&&typeof process.nextTick=="function"?typeof setImmediate=="function"?setImmediate:process.nextTick:setTimeout;function Abe(e){for(var t=0,n=0,r=0;r<e.length;++r)n=e.charCodeAt(r),n<128?t+=1:n<2048?t+=2:(n&64512)===55296&&(e.charCodeAt(r+1)&64512)===56320?(++r,t+=4):t+=3;return t}function Tbe(e){for(var t=0,n,r,s=new Array(Abe(e)),i=0,o=e.length;i<o;++i)n=e.charCodeAt(i),n<128?s[t++]=n:n<2048?(s[t++]=n>>6|192,s[t++]=n&63|128):(n&64512)===55296&&((r=e.charCodeAt(i+1))&64512)===56320?(n=65536+((n&1023)<<10)+(r&1023),++i,s[t++]=n>>18|240,s[t++]=n>>12&63|128,s[t++]=n>>6&63|128,s[t++]=n&63|128):(s[t++]=n>>12|224,s[t++]=n>>6&63|128,s[t++]=n&63|128);return s}var Cf="./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),Il=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,54,55,56,57,58,59,60,61,62,63,-1,-1,-1,-1,-1,-1,-1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,-1,-1,-1,-1,-1,-1,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,-1,-1,-1,-1,-1];function wO(e,t){var n=0,r=[],s,i;if(t<=0||t>e.length)throw Error("Illegal len: "+t);for(;n<t;){if(s=e[n++]&255,r.push(Cf[s>>2&63]),s=(s&3)<<4,n>=t){r.push(Cf[s&63]);break}if(i=e[n++]&255,s|=i>>4&15,r.push(Cf[s&63]),s=(i&15)<<2,n>=t){r.push(Cf[s&63]);break}i=e[n++]&255,s|=i>>6&3,r.push(Cf[s&63]),r.push(Cf[i&63])}return r.join("")}function $be(e,t){for(var n=0,r=e.length,s=0,i=[],o,a,c,u,f,h;n<r-1&&s<t&&(h=e.charCodeAt(n++),o=h<Il.length?Il[h]:-1,h=e.charCodeAt(n++),a=h<Il.length?Il[h]:-1,!(o==-1||a==-1||(f=o<<2>>>0,f|=(a&48)>>4,i.push(String.fromCharCode(f)),++s>=t||n>=r)||(h=e.charCodeAt(n++),c=h<Il.length?Il[h]:-1,c==-1)||(f=(a&15)<<4>>>0,f|=(c&60)>>2,i.push(String.fromCharCode(f)),++s>=t||n>=r)));)h=e.charCodeAt(n++),u=h<Il.length?Il[h]:-1,f=(c&3)<<6>>>0,f|=u,i.push(String.fromCharCode(f)),++s;var p=[];for(n=0;n<s;n++)p.push(i[n].charCodeAt(0));return p}var Gg=16,RV=10,Rbe=16,kbe=100,PI=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],DI=[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946,1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055,3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504,976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462],kV=[1332899944,1700884034,1701343084,1684370003,1668446532,1869963892];function Yg(e,t,n,r){var s,i=e[t],o=e[t+1];return i^=n[0],s=r[i>>>24],s+=r[256|i>>16&255],s^=r[512|i>>8&255],s+=r[768|i&255],o^=s^n[1],s=r[o>>>24],s+=r[256|o>>16&255],s^=r[512|o>>8&255],s+=r[768|o&255],i^=s^n[2],s=r[i>>>24],s+=r[256|i>>16&255],s^=r[512|i>>8&255],s+=r[768|i&255],o^=s^n[3],s=r[o>>>24],s+=r[256|o>>16&255],s^=r[512|o>>8&255],s+=r[768|o&255],i^=s^n[4],s=r[i>>>24],s+=r[256|i>>16&255],s^=r[512|i>>8&255],s+=r[768|i&255],o^=s^n[5],s=r[o>>>24],s+=r[256|o>>16&255],s^=r[512|o>>8&255],s+=r[768|o&255],i^=s^n[6],s=r[i>>>24],s+=r[256|i>>16&255],s^=r[512|i>>8&255],s+=r[768|i&255],o^=s^n[7],s=r[o>>>24],s+=r[256|o>>16&255],s^=r[512|o>>8&255],s+=r[768|o&255],i^=s^n[8],s=r[i>>>24],s+=r[256|i>>16&255],s^=r[512|i>>8&255],s+=r[768|i&255],o^=s^n[9],s=r[o>>>24],s+=r[256|o>>16&255],s^=r[512|o>>8&255],s+=r[768|o&255],i^=s^n[10],s=r[i>>>24],s+=r[256|i>>16&255],s^=r[512|i>>8&255],s+=r[768|i&255],o^=s^n[11],s=r[o>>>24],s+=r[256|o>>16&255],s^=r[512|o>>8&255],s+=r[768|o&255],i^=s^n[12],s=r[i>>>24],s+=r[256|i>>16&255],s^=r[512|i>>8&255],s+=r[768|i&255],o^=s^n[13],s=r[o>>>24],s+=r[256|o>>16&255],s^=r[512|o>>8&255],s+=r[768|o&255],i^=s^n[14],s=r[i>>>24],s+=r[256|i>>16&255],s^=r[512|i>>8&255],s+=r[768|i&255],o^=s^n[15],s=r[o>>>24],s+=r[256|o>>16&255],s^=r[512|o>>8&255],s+=r[768|o&255],i^=s^n[16],e[t]=o^n[Rbe+1],e[t+1]=i,e}function If(e,t){for(var n=0,r=0;n<4;++n)r=r<<8|e[t]&255,t=(t+1)%e.length;return{key:r,offp:t}}function LI(e,t,n){for(var r=0,s=[0,0],i=t.length,o=n.length,a,c=0;c<i;c++)a=If(e,r),r=a.offp,t[c]=t[c]^a.key;for(c=0;c<i;c+=2)s=Yg(s,0,t,n),t[c]=s[0],t[c+1]=s[1];for(c=0;c<o;c+=2)s=Yg(s,0,t,n),n[c]=s[0],n[c+1]=s[1]}function Mbe(e,t,n,r){for(var s=0,i=[0,0],o=n.length,a=r.length,c,u=0;u<o;u++)c=If(t,s),s=c.offp,n[u]=n[u]^c.key;for(s=0,u=0;u<o;u+=2)c=If(e,s),s=c.offp,i[0]^=c.key,c=If(e,s),s=c.offp,i[1]^=c.key,i=Yg(i,0,n,r),n[u]=i[0],n[u+1]=i[1];for(u=0;u<a;u+=2)c=If(e,s),s=c.offp,i[0]^=c.key,c=If(e,s),s=c.offp,i[1]^=c.key,i=Yg(i,0,n,r),r[u]=i[0],r[u+1]=i[1]}function FI(e,t,n,r,s){var i=kV.slice(),o=i.length,a;if(n<4||n>31)if(a=Error("Illegal number of rounds (4-31): "+n),r){Ui(r.bind(this,a));return}else throw a;if(t.length!==Gg)if(a=Error("Illegal salt length: "+t.length+" != "+Gg),r){Ui(r.bind(this,a));return}else throw a;n=1<<n>>>0;var c,u,f=0,h;typeof Int32Array=="function"?(c=new Int32Array(PI),u=new Int32Array(DI)):(c=PI.slice(),u=DI.slice()),Mbe(t,e,c,u);function p(){if(s&&s(f/n),f<n)for(var v=Date.now();f<n&&(f=f+1,LI(e,c,u),LI(t,c,u),!(Date.now()-v>kbe)););else{for(f=0;f<64;f++)for(h=0;h<o>>1;h++)Yg(i,h<<1,c,u);var x=[];for(f=0;f<o;f++)x.push((i[f]>>24&255)>>>0),x.push((i[f]>>16&255)>>>0),x.push((i[f]>>8&255)>>>0),x.push((i[f]&255)>>>0);if(r){r(null,x);return}else return x}r&&Ui(p)}if(typeof r<"u")p();else for(var y;;)if(typeof(y=p())<"u")return y||[]}function BI(e,t,n,r){var s;if(typeof e!="string"||typeof t!="string")if(s=Error("Invalid string / salt: Not a string"),n){Ui(n.bind(this,s));return}else throw s;var i,o;if(t.charAt(0)!=="$"||t.charAt(1)!=="2")if(s=Error("Invalid salt version: "+t.substring(0,2)),n){Ui(n.bind(this,s));return}else throw s;if(t.charAt(2)==="$")i="\0",o=3;else{if(i=t.charAt(2),i!=="a"&&i!=="b"&&i!=="y"||t.charAt(3)!=="$")if(s=Error("Invalid salt revision: "+t.substring(2,4)),n){Ui(n.bind(this,s));return}else throw s;o=4}if(t.charAt(o+2)>"$")if(s=Error("Missing salt rounds"),n){Ui(n.bind(this,s));return}else throw s;var a=parseInt(t.substring(o,o+1),10)*10,c=parseInt(t.substring(o+1,o+2),10),u=a+c,f=t.substring(o+3,o+25);e+=i>="a"?"\0":"";var h=Tbe(e),p=$be(f,Gg);function y(v){var x=[];return x.push("$2"),i>="a"&&x.push(i),x.push("$"),u<10&&x.push("0"),x.push(u.toString()),x.push("$"),x.push(wO(p,p.length)),x.push(wO(v,kV.length*4-1)),x.join("")}if(typeof n>"u")return y(FI(h,p,u));FI(h,p,u,function(v,x){v?n(v,null):n(null,y(x))},r)}const Ibe=ze({hashing:pe({enum:["plain","sha256","bcrypt"],default:"sha256"}),rounds:jt({minimum:1,maximum:10}).optional()}).strict();class zI extends AV{constructor(t={}){super(t,"password","password","form"),this.registerAction("create",this.getPayloadSchema(),async({password:n,...r})=>({...r,strategy_value:await this.hash(n)}))}getSchema(){return Ibe}getPayloadSchema(){return ze({email:pe({format:"email"}),password:pe({minLength:8})})}async hash(t){switch(this.config.hashing){case"sha256":return NF.sha256(t);case"bcrypt":{const n=await TV(this.config.rounds??4);return $V(t,n)}default:return t}}async compare(t,n){switch(this.config.hashing){case"sha256":{const r=await this.hash(n);return t===r}case"bcrypt":return await jbe(n,t)}return!1}verify(t){return async n=>{if(await this.compare(n==null?void 0:n.strategy_value,t)!==!0)throw new VN}}getController(t){const n=new V1,r=ze({redirect:pe().optional()}),s=this.getPayloadSchema();return n.post("/login",qt("query",r),async i=>{try{const o=Un(s,await t.getBody(i),{onError:c=>{throw pt.error("Invalid login payload",[...c]),new VN}}),{redirect:a}=i.req.valid("query");return await t.resolveLogin(i,this,o,this.verify(o.password),{redirect:a})}catch(o){return t.respondWithError(i,o)}}),n.post("/register",qt("query",r),async i=>{try{const{redirect:o}=i.req.valid("query"),{password:a,email:c,...u}=Un(s,await t.getBody(i),{onError:h=>{pt.error("Invalid register payload",[...h]),new VN}}),f={...u,email:c,strategy_value:await this.hash(a)};return await t.resolveRegister(i,this,f,async()=>{},{redirect:o})}catch(o){return t.respondWithError(i,o)}}),n}}const Pbe={password:{cls:zI,schema:zI.prototype.getSchema()},oauth:{cls:xO,schema:xO.prototype.getSchema()},custom_oauth:{cls:II,schema:II.prototype.getSchema()}},MV=Pbe,Dbe=p1(MV,(e,t)=>We({enabled:gt({default:!0}).optional(),type:ii(t),config:e.schema},{title:t})),Lbe=Qt(Object.values(Dbe)),Fbe=ze({enabled:gt({default:!1}).optional()}),IV=We({permissions:Sn(pe()).optional(),is_default:gt().optional(),implicit_allow:gt().optional()}),VI=U1("config_auth",{enabled:gt({default:!1}),basepath:pe({default:"/api/auth"}),entity_name:pe({default:"users"}),allow_register:gt({default:!0}).optional(),jwt:fV,cookie:dV,strategies:dg("config_auth_strategies",Lbe,{title:"Strategies",default:{password:{type:"password",enabled:!0,config:{hashing:"sha256"}}}},We({type:pe(),enabled:gt({default:!0}).optional(),config:ze({})})),guard:Fbe.optional(),roles:dg("config_auth_roles",IV,{default:{}}).optional()},{title:"Authentication"});class Bbe{constructor(t){this.appAuth=t}get em(){return this.appAuth.em}get users(){return this.appAuth.getUsersEntity()}async findBy(t,n,r){pt.debug("[AppUserPool:findBy]",{strategy:t,prop:n,value:r}),this.toggleStrategyValueVisibility(!0);const s=await this.em.repo(this.users).findOne({[n]:r,strategy:t});if(this.toggleStrategyValueVisibility(!1),!s.data)throw pt.debug("[AppUserPool]: User not found"),new qye;return s.data}async create(t,n){if(pt.debug("[AppUserPool:create]",{strategy:t,payload:n}),!("strategy_value"in n))throw new Ul("Profile must have a strategy_value value");const r=this.users.getSelect(void 0,"create"),i={...jx(n,r),strategy:t},o=this.em.mutator(this.users);o.__unstable_toggleSystemEntityCreation(!1),this.toggleStrategyValueVisibility(!0);const a=await o.insertOne(i);if(o.__unstable_toggleSystemEntityCreation(!0),this.toggleStrategyValueVisibility(!1),!a.data)throw new Hye;return pt.debug("[AppUserPool]: User created",a.data),a.data}toggleStrategyValueVisibility(t){const n=(r,s)=>{const i=this.users.field(r);if(s)i.config.hidden=!1,i.config.fillable=!0;else{const o=Mx.usersFields.strategy_value.config;i.config.hidden=o.hidden,i.config.fillable=o.fillable}};n("strategy_value",t),n("strategy",t)}}const zbe={email:xo().required(),strategy:xo({fillable:["create"],hidden:["update","form"]}).required(),strategy_value:xo({fillable:["create"],hidden:["read","table","update","form"]}).required(),role:xo()},Pw=class Pw extends Uy{constructor(){super(...arguments);K(this,"_authenticator");K(this,"cache",{});K(this,"_controller")}async onBeforeUpdate(n,r){var i,o;const s=VI.properties.jwt.properties.secret.default;return!n.enabled&&r.enabled&&r.jwt.secret===s&&(pt.warn("No JWT secret provided, generating a random one"),r.jwt.secret=Gae(64)),(o=(i=r.strategies)==null?void 0:i.password)!=null&&o.enabled||(pt.warn("Password strategy cannot be disabled."),r.strategies.password.enabled=!0),r}get enabled(){return this.config.enabled}async build(){if(!this.enabled){this.setBuilt();return}const n=tn(this.config.roles??{},(s,i)=>mx.create({name:i,...s}));this.ctx.guard.setRoles(Object.values(n)),this.ctx.guard.setConfig(this.config.guard??{});const r=tn(this.config.strategies??{},(s,i)=>{try{return new MV[s.type].cls(s.config)}catch{throw new Error(`Could not build strategy ${String(i)} with config ${JSON.stringify(s.config)}`)}});this._authenticator=new _0e(r,new Bbe(this),{jwt:this.config.jwt,cookie:this.config.cookie}),this.registerEntities(),super.setBuilt(),this._controller=new n0e(this),this._controller.registerMcp(),this.ctx.server.route(this.config.basepath,this._controller.getController()),this.ctx.guard.registerPermissions(Yye)}isStrategyEnabled(n){var s,i;const r=typeof n=="string"?n:n.getName();return r==="password"?!0:((i=(s=this.config.strategies)==null?void 0:s[r])==null?void 0:i.enabled)??!1}get controller(){if(!this.isBuilt())throw new Error("Can't access controller, AppAuth not built yet");return this._controller}getSchema(){return VI}get authenticator(){return this.throwIfNotBuilt(),this._authenticator}get em(){return this.ctx.em}getUsersEntity(n){const r=this.config.entity_name;return n||!this.em.hasEntity(r)?Jz(r,Pw.usersFields,void 0,"system"):this.em.entity(r)}registerEntities(){const n=this.getUsersEntity(!0);this.ctx.helper.ensureSchema(Xz({[n.name]:n},({index:r},{users:s})=>{r(s).on(["email"],!0).on(["strategy"]).on(["strategy_value"])}));try{const r=Object.keys(this.config.roles??{});this.ctx.helper.replaceEntityField(n,"role",bI({enum:r}))}catch{}try{const r=Object.keys(this.config.strategies??{});this.ctx.helper.replaceEntityField(n,"strategy",bI({enum:r}))}catch{}}async createUser({email:n,password:r,...s}){if(!this.enabled)throw new Error("Cannot create user, auth not enabled");const i="password",a=await this.authenticator.strategy(i).hash(r),c=this.em.mutator(this.config.entity_name);c.__unstable_toggleSystemEntityCreation(!1);const{data:u}=await c.insertOne({...s,email:n,strategy:i,strategy_value:a});return c.__unstable_toggleSystemEntityCreation(!0),u}async changePassword(n,r){const s=this.config.entity_name,{data:i}=await this.em.repository(s).findId(n);if(i){if(i.strategy!=="password")throw new Error("User is not using password strategy")}else throw new Error("User not found");const o=c=>{const u=this.em.entity(s).field("strategy_value");u.config.hidden=!c,u.config.fillable=c},a=this.authenticator.strategy("password");return o(!0),await this.em.mutator(s).updateOne(i.id,{strategy_value:await a.hash(r)}),o(!1),!0}toJSON(n){if(!this.config.enabled)return this.configDefault;const r=this.authenticator.getStrategies();return{...this.config,...this.authenticator.toJSON(n),strategies:tn(r,s=>({enabled:this.isStrategyEnabled(s),...s.toJSON(n)}))}}};K(Pw,"usersFields",zbe);let Mx=Pw;const Vbe=new lr("system.access.api");class Ube extends Hy{constructor(t,n){super(),this.ctx=t,this.config=n}get em(){return this.ctx.em}get guard(){return this.ctx.guard}entityExists(t){try{return!!this.em.entity(t)}catch{return!1}}getController(){const{permission:t,auth:n}=this.middlewares,r=this.create().use(n(),t(Vbe)),s=this.getEntitiesEnum(this.em);return r.get("/",en({summary:"Retrieve data configuration",tags:["data"]}),i=>i.json(this.em.toJSON())),r.get("/sync",t(eV),ws("data_sync",{annotations:{destructiveHint:!0}}),en({summary:"Sync database schema",tags:["data"]}),qt("query",ze({force:gt(),drop:gt()}).partial()),async i=>{const{force:o,drop:a}=i.req.valid("query"),c=await this.em.schema().introspect(),u=await this.em.schema().sync({force:o,drop:a});return i.json({tables:c.map(f=>f.name),changes:u})}),r.get("/schema.json",t(po),en({summary:"Retrieve data schema",tags:["data"]}),async i=>{const o=`${this.config.basepath}/schema.json`,a=Object.fromEntries(this.em.entities.map(c=>[c.name,{$ref:`${this.config.basepath}/schemas/${c.name}`}]));return i.json({$schema:"https://json-schema.org/draft/2020-12/schema",$id:o,properties:a})}),r.get("/schemas/:entity/:context?",t(po),en({summary:"Retrieve entity schema",tags:["data"]}),qt("param",ze({entity:s,context:pe({enum:["create","update"],default:"create"}).optional()})),async i=>{const{entity:o,context:a}=i.req.param();if(!this.entityExists(o))return this.notFound(i);const c=this.em.entity(o),u=c.toSchema({context:a}),h=`${new URL(i.req.url).origin}${this.config.basepath}`,p=`${this.config.basepath}/schemas/${o}`;return i.json({$schema:`${h}/schema.json`,$id:p,title:c.label,$comment:c.config.description,...u})}),r.route("/entity",this.getEntityRoutes()),r.get("/info/:entity",t(po),en({summary:"Retrieve entity info",tags:["data"]}),ws("data_entity_info"),qt("param",ze({entity:s})),async i=>{const{entity:o}=i.req.param();if(!this.entityExists(o))return this.notFound(i);const a=this.em.entity(o),c=a.fields.map(f=>f.name),u=f=>f.map(h=>({entity:h.other(a).entity.name,ref:h.other(a).reference}));return i.json({name:a.name,fields:c,relations:{all:u(this.em.relations.relationsOf(a)),listable:u(this.em.relations.listableRelationsOf(a)),source:u(this.em.relations.sourceRelationsOf(a)),target:u(this.em.relations.targetRelationsOf(a))}})}),r}getEntityRoutes(){const{permission:t}=this.middlewares,n=this.create(),r=this.getEntitiesEnum(this.em),s=Qt([jt({title:"Integer"}),pe({title:"UUID"})],{coerce:u=>u});n.post("/:entity/fn/count",t(po),en({summary:"Count entities",tags:["data"]}),ws("data_entity_fn_count"),qt("param",ze({entity:r})),qt("json",Ks.properties.where),async u=>{const{entity:f}=u.req.valid("param");if(!this.entityExists(f))return this.notFound(u);const h=u.req.valid("json"),p=await this.em.repository(f).count(h);return u.json({entity:f,...p.data})}),n.post("/:entity/fn/exists",t(po),en({summary:"Check if entity exists",tags:["data"]}),ws("data_entity_fn_exists"),qt("param",ze({entity:r})),qt("json",Ks.properties.where),async u=>{const{entity:f}=u.req.valid("param");if(!this.entityExists(f))return this.notFound(u);const h=u.req.valid("json"),p=await this.em.repository(f).exists(h);return u.json({entity:f,...p.data})});const i=ze({...Ms(Ks.properties,["with"]),sort:pe({default:"id"}),select:Sn(pe()),join:Sn(pe())}).partial(),o=(u=Object.keys(Ks.properties))=>{var f;return[...(f=bce(i,"query").parameters)==null?void 0:f.filter(h=>u.includes(h.name))]},a=(u=Object.keys(i.properties))=>ze($oe(i.properties,u));n.get("/:entity",en({summary:"Read many",parameters:o(["limit","offset","sort","select","join"]),tags:["data"]}),t(po),qt("param",ze({entity:r})),qt("query",Ks,{skipOpenAPI:!0}),async u=>{const{entity:f}=u.req.valid("param");if(!this.entityExists(f))return this.notFound(u);const h=u.req.valid("query"),p=await this.em.repository(f).findMany(h);return u.json(p,{status:p.data?200:404})}),n.get("/:entity/:id",en({summary:"Read one",parameters:o(["offset","sort","select"]),tags:["data"]}),t(po),ws("data_entity_read_one",{inputSchema:{param:ze({entity:r,id:s}),query:a(["offset","sort","select"])},noErrorCodes:[404]}),qt("param",ze({entity:r,id:s})),qt("query",Ks,{skipOpenAPI:!0}),async u=>{const{entity:f,id:h}=u.req.valid("param");if(!this.entityExists(f))return this.notFound(u);const p=u.req.valid("query"),y=await this.em.repository(f).findId(h,p);return u.json(y,{status:y.data?200:404})}),n.get("/:entity/:id/:reference",en({summary:"Read many by reference",parameters:o(),tags:["data"]}),t(po),qt("param",ze({entity:r,id:s,reference:pe()})),qt("query",Ks,{skipOpenAPI:!0}),async u=>{const{entity:f,id:h,reference:p}=u.req.valid("param");if(!this.entityExists(f))return this.notFound(u);const y=u.req.valid("query"),v=await this.em.repository(f).findManyByReference(h,p,y);return u.json(v,{status:v.data?200:404})});const c=ze({...i.properties,with:ze({})}).partial();return n.post("/:entity/query",en({summary:"Query entities",requestBody:{content:{"application/json":{schema:c.toJSON(),example:c.template({withOptional:!0})}}},tags:["data"]}),t(po),ws("data_entity_read_many",{inputSchema:{param:ze({entity:r}),json:c}}),qt("param",ze({entity:r})),qt("json",Ks,{skipOpenAPI:!0}),async u=>{const{entity:f}=u.req.valid("param");if(!this.entityExists(f))return this.notFound(u);const h=u.req.valid("json"),p=await this.em.repository(f).findMany(h);return u.json(p,{status:p.data?200:404})}),n.post("/:entity",en({summary:"Insert one or many",tags:["data"]}),t(q1),ws("data_entity_insert"),qt("param",ze({entity:r})),qt("json",Qt([ze({}),Sn(ze({}))])),async u=>{const{entity:f}=u.req.valid("param");if(!this.entityExists(f))return this.notFound(u);const h=await u.req.json(),p=koe(h);if(Array.isArray(p)){const v=await this.em.mutator(f).insertMany(p);return u.json(v,201)}const y=await this.em.mutator(f).insertOne(p);return u.json(y,201)}),n.patch("/:entity",en({summary:"Update many",tags:["data"]}),t(mO),ws("data_entity_update_many",{inputSchema:{param:ze({entity:r}),json:ze({update:ze({}),where:ze({})})}}),qt("param",ze({entity:r})),qt("json",ze({update:ze({}),where:Ks.properties.where})),async u=>{const{entity:f}=u.req.param();if(!this.entityExists(f))return this.notFound(u);const{update:h,where:p}=await u.req.json(),y=await this.em.mutator(f).updateWhere(h,p);return u.json(y)}),n.patch("/:entity/:id",en({summary:"Update one",tags:["data"]}),t(mO),ws("data_entity_update_one"),qt("param",ze({entity:r,id:s})),qt("json",ze({})),async u=>{const{entity:f,id:h}=u.req.valid("param");if(!this.entityExists(f))return this.notFound(u);const p=await u.req.json(),y=await this.em.mutator(f).updateOne(h,p);return u.json(y)}),n.delete("/:entity/:id",en({summary:"Delete one",tags:["data"]}),t(pO),ws("data_entity_delete_one"),qt("param",ze({entity:r,id:s})),async u=>{const{entity:f,id:h}=u.req.valid("param");if(!this.entityExists(f))return this.notFound(u);const p=await this.em.mutator(f).deleteOne(h);return u.json(p)}),n.delete("/:entity",en({summary:"Delete many",tags:["data"]}),t(pO),ws("data_entity_delete_many",{inputSchema:{param:ze({entity:r}),json:ze({})}}),qt("param",ze({entity:r})),qt("json",Ks.properties.where),async u=>{const{entity:f}=u.req.valid("param");if(!this.entityExists(f))return this.notFound(u);const h=await u.req.json(),p=await this.em.mutator(f).deleteWhere(h);return u.json(p)}),n}registerMcp(){this.ctx.mcp.resource("data_entities","bknd://data/entities",t=>t.json(t.context.ctx().em.toJSON().entities),{title:"Entities",description:"Retrieve all entities"}).resource("data_relations","bknd://data/relations",t=>t.json(t.context.ctx().em.toJSON().relations),{title:"Relations",description:"Retrieve all relations"}).resource("data_indices","bknd://data/indices",t=>t.json(t.context.ctx().em.toJSON().indices),{title:"Indices",description:"Retrieve all indices"})}}const Ix={...Hge,...eye,media:{schema:Yz,field:qg}},qbe=Object.keys(Ix),Hbe=LT,PV=p1(Ix,(e,t)=>We({name:pe().optional(),type:ii(t),config:e.schema.optional()},{title:t})),GT=Qt(Object.values(PV)),DV=ed(GT,{default:{}}),YT=We({name:pe().optional(),type:pe({enum:$z,default:"regular"}).optional(),config:PT.optional(),fields:DV.optional()});We({type:pe({enum:$z,default:"regular"}).optional(),config:PT.optional(),fields:ed(ze({type:Qt([pe({enum:qbe}),pe()]),config:no.optional()}),{default:{}}).optional()});const JT=Object.entries(LT).map(([e,t])=>We({type:ii(e),source:pe(),target:pe(),config:t.schema.optional()},{title:e})),Wbe=We({entity:pe(),fields:Sn(pe(),{minItems:1}),unique:gt({default:!1}).optional()}),Gbe=U1("config_data",{basepath:pe({default:"/api/data"}).optional(),default_primary_format:pe({enum:ET,default:"integer"}).optional(),entities:dg("config_data_entities",YT,{default:{}}).optional(),relations:dg("config_data_relations",Qt(JT),{default:{}},We({type:pe({enum:Object.keys(LT)}),source:pe(),target:pe(),config:ze({}).optional()})).optional(),indices:dg("config_data_indices",Wbe,{default:{},mcp:{update:!1}}).optional()}).strict();function XT(e,t){const n=tn(t.fields??{},(r,s)=>{const{type:i}=r;if(!(i in Ix))throw new Error(`Field type "${i}" not found`);const{field:o}=Ix[i];return new o(s,r.config)});return new mc(e,Object.values(n),t.config,t.type)}function LV(e,t){return new Hbe[e.type].cls(t(e.source),t(e.target),e.config)}class Ybe extends Uy{async build(){const{entities:t={},relations:n={},indices:r={}}=this.config,s=tn(t,(u,f)=>XT(f,u)),i=u=>{const f=typeof u=="string"?u:u.name,h=s[f];if(h)return h;throw new Error(`[AppData] Entity "${f}" not found`)},o=tn(n,u=>LV(u,i)),a=tn(r,(u,f)=>{const h=i(u.entity),p=u.fields.map(y=>h.field(y));return new WB(h,p,u.unique,f)});for(const u of Object.values(s))this.ctx.em.addEntity(u);for(const u of Object.values(o))this.ctx.em.addRelation(u);for(const u of Object.values(a))this.ctx.em.addIndex(u);const c=new Ube(this.ctx,this.config);c.registerMcp(),this.ctx.server.route(this.basepath,c.getController()),this.ctx.guard.registerPermissions(Object.values(Kye)),this.setBuilt()}async onBeforeUpdate(t,n){const r={from:Object.keys(t.entities??{}),to:Object.keys(n.entities??{})};if(r.from.length-r.to.length>1)throw new Error("Cannot remove more than one entity at a time");return n}getSchema(){return Gbe}get em(){return this.throwIfNotBuilt(),this.ctx.em}get basepath(){return this.config.basepath??"/api/data"}getOverwritePaths(){return[/^entities\..*\.config$/,/^entities\..*\.fields\..*\.config$/]}toJSON(t){return{...this.config,...this.em.toJSON()}}}class UI{constructor(t={},n={}){this.variables=t,this.options=n}another(){return 1}static hasMarkup(t){let n="";if(Array.isArray(t)||typeof t=="object"){if(!["Array","Object"].includes(t.constructor.name))return!1;n=JSON.stringify(t)}else n=String(t);return["{{"].some(s=>n.includes(s))}async render(t){if(typeof t>"u"||t===null)return t;if(typeof t=="string")return await this.renderString(t);if(Array.isArray(t))return await Promise.all(t.map(n=>this.render(n)));if(typeof t=="object")return await this.renderObject(t);throw new Error("Invalid template type")}async renderString(t){return t.replace(/{{\s*([^{}]+?)\s*}}/g,(n,r)=>{const s=zg(this.variables,r.trim());return s==null?"":String(s)})}async renderObject(t){const n={};for(const[r,s]of Object.entries(t)){let i=r;this.options.renderKeys&&(i=await this.renderString(r)),n[i]=await this.render(s)}return n}}const Kp=(e,t)=>e,_g=class _g{constructor(t,n){K(this,"name");K(this,"_params");if(typeof t!="string")throw new Error(`Task name must be a string, got ${typeof t}`);this.name=t;const r=this.constructor.schema;if(r===_g.schema&&typeof n<"u"&&Object.keys(n||{}).length>0)throw new Error(`Task "${t}" has no schema defined but params passed: ${JSON.stringify(n)}`);this._params=Un(r,n||{})}get params(){return this._params}clone(t,n){return new this.constructor(t,n)}static async resolveParams(t,n,r={}){const s={},i=new UI(r,{renderKeys:!0});for(const[o,a]of Object.entries(n)){if(a&&UI.hasMarkup(a)){try{s[o]=await i.render(a)}catch(c){throw c instanceof Lf?c:new Lf("Failed to resolve param",{key:o,value:a,error:c.message},"resolve-params")}continue}s[o]=a}return t.coerce(s)}async cloneWithResolvedParams(t){const n=Object.fromEntries(t.entries()),r=await _g.resolveParams(this.constructor.schema,this._params,n);return this.clone(this.name,r)}async run(t=new Map){const n=new Date;let r,s,i,o;const a=performance.now();try{const c=await this.cloneWithResolvedParams(t);o=c.params,r=await c.execute(t),i=!0}catch(c){i=!1,c instanceof Lf?s=c.toJSON():s={type:"unknown",message:c.message}}return{start:n,output:r,error:s,success:i,params:o,time:performance.now()-a}}error(t,n){return new Lf(t,n,"runtime")}get label(){return this.name}toJSON(){return{type:this.type,params:this.params}}};K(_g,"schema",Xi());let Ih=_g;const WN=["GET","POST","PUT","PATCH","DELETE"];class KT extends Ih{constructor(){super(...arguments);K(this,"type","fetch")}getBody(){const n=this.params.body;if(n){if(typeof n=="string")return n;if(typeof n=="object")return JSON.stringify(n);throw new Error(`Invalid body type: ${typeof n}`)}}async execute(){var o;if(!WN.includes(this.params.method??"GET"))throw this.error("Invalid method",{given:this.params.method,valid:WN});const n=this.getBody(),r=new Headers((o=this.params.headers)==null?void 0:o.map(a=>[a.key,a.value])),s=await fetch(this.params.url,{method:this.params.method??"GET",headers:r,body:n});if(!s.ok)throw this.error("Failed to fetch",{status:s.status,statusText:s.statusText});return await s.json()}}K(KT,"schema",We({url:pe({pattern:"^(http|https)://"}),method:Kp(pe({enum:WN,default:"GET"})).optional(),headers:Kp(Sn(We({key:pe(),value:pe()}))).optional(),body:Kp(pe()).optional(),normal:Kp(jt()).optional()}));class FV extends Ih{constructor(){super(...arguments);K(this,"type","log")}async execute(){return await new Promise(n=>setTimeout(n,this.params.delay)),pt.log(`[DONE] LogTask: ${this.name}`),!0}}K(FV,"schema",We({delay:jt({default:10})}));class BV extends Ih{constructor(){super(...arguments);K(this,"type","render")}async execute(){return this.params.render}}K(BV,"schema",We({render:pe()}));class zV{constructor(t,n,r,s){K(this,"source");K(this,"target");K(this,"config");K(this,"id");this.source=t,this.target=n,this.config=r??{},this.config.condition instanceof wo||(this.config.condition=wo.default()),this.id=s??ele()}get condition(){return this.config.condition}get max_retries(){return this.config.max_retries??0}toJSON(){var t;return $g({source:this.source.name,target:this.target.name,config:{...this.config,condition:(t=this.config.condition)==null?void 0:t.toJSON()}})}}class wo{constructor(t,n="",r=void 0){this.type=t,this.path=n,this.value=r}static default(){return wo.success()}static success(){return new wo("success")}static error(){return new wo("error")}static matches(t,n){if(typeof t!="string"||t.length===0)throw new Error("Invalid path");return new wo("matches",t,n)}isMet(t){switch(this.type){case"success":return t.success;case"error":return t.success===!1;case"matches":return zg(t.output,this.path)===this.value}}sameAs(t=wo.default()){return this.type===t.type&&this.path===t.path&&this.value===t.value}toJSON(){return{type:this.type,path:this.path.length===0?void 0:this.path,value:this.value}}static fromObject(t){return new wo(t.type,t.path,t.value)}}class Bv extends Wr{task(){return this.params.task}getState(){return this.succeeded()?"success":this.failed()?"failed":this.isStart()?"running":"idle"}isStart(){return this.params.end===void 0}isEnd(){return!this.isStart()}succeeded(){var t;return this.isEnd()&&((t=this.params.result)==null?void 0:t.success)}failed(){var t;return this.isEnd()&&!((t=this.params.result)!=null&&t.success)}}K(Bv,"slug","flow-execution-event");class zv extends Wr{}K(zv,"slug","flow-execution-state");const Dw=class Dw{constructor(t){K(this,"flow");K(this,"started_at");K(this,"finished_at");K(this,"logs",[]);K(this,"inputs",new Map);K(this,"queue",[]);K(this,"emgr");this.flow=t,this.logs=[],this.queue=[this.flow.startTask],this.emgr=new Fy(Dw.Events)}subscribe(t){this.emgr.onAny(t)}async onDone(t,n){const r=new Date;if(this.logs.push({...n,task:t,end:r}),this.inputs.set(t.name,n),this.flow.respondingTask===t){this.queue=[];return}this.queue=this.queue.filter(i=>i!==t);const s=this.flow.task(t).getOutConnections(n).filter(i=>{var u;const o=i.target,a=this.logs.filter(f=>f.task===o&&f.success).length,c=((u=this.flow.task(o).getInConnections().find(f=>f.source===t))==null?void 0:u.max_retries)??0;if(a>c)throw new Error(`Task "${o.name}" reached max retries (${a}/${c})`);return this.flow.task(o).getInTasks(!0).every(f=>this.logs.some(h=>h.task===f&&h.end!==void 0))}).map(i=>i.target);this.queue.push(...s)}__getLastTaskLog(t){var n;for(let r=this.logs.length-1;r>=0;r--)if(((n=this.logs[r])==null?void 0:n.task)===t)return this.logs[r];return null}async run(){const t=this.queue;if(t.length===0)return;const n=t.map(async r=>{await this.emgr.emit(new Bv({task:r}));const s=await r.run(this.inputs);return await this.emgr.emit(new Bv({task:r,result:s,end:new Date})),await this.onDone(r,s),s});try{return await Promise.all(n),this.run()}catch(r){throw pt.error("RuntimeExecutor: error",r),r}}async start(t){await this.emgr.emit(new zv({execution:this,state:"started"})),this.inputs.set("flow",{start:new Date,output:t,error:void 0,success:!0,params:t}),this.started_at=new Date,await this.run(),this.finished_at=new Date,await this.emgr.emit(new zv({execution:this,state:"ended"}))}finished(){return this.finished_at!==void 0}errorCount(){return this.logs.filter(t=>!t.success).length}hasErrors(){return this.errorCount()>0}getErrorLogs(){return this.logs.filter(t=>!t.success)}getErrors(){return this.getErrorLogs().map(t=>t.error)}getResponse(){let t=this.flow.respondingTask;t||(t=this.flow.tasks[this.flow.tasks.length-1]);const n=this.__getLastTaskLog(t);if(n)return n.output}};K(Dw,"Events",{ExecutionEvent:Bv,ExecutionState:zv});let SO=Dw;class QT{constructor(t,n){K(this,"flow");K(this,"source");this.flow=t,this.source=n}task(t){return new QT(this.flow,t)}asInputFor(t,n,r){const s=this.getDepth(),i=this.getOutConnections(),o=i.map(c=>c.condition),a=i.some(c=>this.task(c.target).getDepth()<=s);if(o.length>0&&a&&this.getOutConnections().some(c=>c.condition.sameAs(n)))throw new Error("Task cannot be connected to a deeper task with the same condition");this.flow.addConnection(new zV(this.source,t,{condition:n,max_retries:r}))}asOutputFor(t,n){this.task(t).asInputFor(this.source,n)}getNext(){return this.flow.connections.filter(t=>t.source===this.source).map(t=>t.target)}getDepth(){return this.flow.getSequence().findIndex(t=>t.includes(this.source))}getInConnections(t=!1){if(t){const n=this.getDepth();return this.getInConnections().filter(r=>r.target===this.source&&this.task(r.source).getDepth()<n)}return this.flow.connections.filter(n=>n.target===this.source)}getInTasks(t=!1){if(t){const n=this.getDepth();return this.getInConnections().map(r=>r.source).filter(r=>this.task(r).getDepth()<n)}return this.getInConnections().map(n=>n.source)}getOutConnections(t){return t?this.flow.connections.filter(n=>n.source===this.source&&n.condition.isMet(t)):this.flow.connections.filter(n=>n.source===this.source)}getOutTasks(t){return this.getOutConnections(t).map(n=>n.target)}}class id{constructor(t){K(this,"executions",[]);K(this,"type","manual");K(this,"config");const n=this.constructor.schema;this.config=Un(n,t??{})}async register(t,...n){this.executions.push(await t.start())}toJSON(){return{type:this.type,config:this.config}}}K(id,"schema",We({mode:pe({enum:["sync","async"],default:"async"})}));class Ky{constructor(t,n,r,s){K(this,"name");K(this,"trigger");K(this,"tasks",[]);K(this,"connections",[]);K(this,"respondingTask");K(this,"startTask");K(this,"sequence");this.name=t,this.trigger=s??new id,n.map(i=>this.addTask(i)),this.connections=r||[],this.startTask=n[0],this.sequence=this.getSequence()}setStartTask(t){return this.startTask=t,this.sequence=this.getSequence(),this}getSequence(t=[]){if(t.length===0)return t.push([this.startTask]),this.getSequence(t);const n=t[t.length-1],r=[];return n==null||n.forEach(s=>{this.task(s).getOutTasks().forEach(o=>{t.some(a=>a.includes(o))||r.push(o)})}),r.length===0?t:(t.push(r),this.getSequence(t))}addTask(t){if(this.tasks.includes(t))throw new Error("Task already defined");if(this.tasks.some(n=>n.name===t.name))throw new Error(`Task with name "${t.name}" already defined. Use a unique name.`);return this.tasks.push(t),this}setRespondingTask(t){if(!this.tasks.includes(t))throw new Error(`Cannot set task "${t.name}" as responding, not registered.`);return this.respondingTask=t,this}addConnection(t){if(this.connections.some(r=>r.source===t.source&&r.target===t.target&&r.condition[0]===t.condition[0]&&r.condition[1]===t.condition[1]))throw new Error("Connection already defined");return this.connections.push(t),this}task(t){return new QT(this,t)}createExecution(){return this.sequence=this.getSequence(),new SO(this)}async start(t=void 0){const n=this.createExecution();return await n.start(t),n}toJSON(){var t,n;return{trigger:this.trigger.toJSON(),tasks:Object.fromEntries(this.tasks.map(r=>[r.name,r.toJSON()])),connections:Object.fromEntries(this.connections.map(r=>[r.id,r.toJSON()])),start_task:(t=this.startTask)==null?void 0:t.name,responding_task:(n=this.respondingTask)==null?void 0:n.name}}static fromObject(t,n,r){var c;const s=tn(n.tasks??{},(u,f)=>{const h=r[u.type];if(!h)throw new Error(`Task ${f} not found in taskMap`);try{const p=h.cls;return new p(f,u.params)}catch(p){throw pt.error("Error creating task",f,u.type,u,h),new Error(`Error creating task ${u.type}: ${p.message}`)}}),i=tn(n.connections??{},(u,f)=>{const h=u.config.condition?wo.fromObject(u.config.condition):void 0;return new zV(s[u.source],s[u.target],{...u.config,condition:h},f)});let o;if(n.trigger){const u=(c=e$[n.trigger.type])==null?void 0:c.cls;u&&(o=new u(n.trigger.config))}const a=new Ky(t,Object.values(s),Object.values(i),o);return a.startTask=n.start_task?s[n.start_task]:null,n.responding_task&&(a.respondingTask=s[n.responding_task]),a}}class VV extends Ih{constructor(){super(...arguments);K(this,"type","subflow")}async execute(){const n=this.params.flow;if(!(n instanceof Ky))throw new Error("Invalid flow provided");if(this.params.loop){const s=Array.isArray(this.params.input)?this.params.input:[this.params.input],i=[];for(const o of s){const a=n.createExecution();await a.start(o),i.push(await a.getResponse())}return i}const r=n.createExecution();return await r.start(this.params.input),r.getResponse()}}K(VV,"schema",We({flow:Xi(),input:Kp(Xi()).optional(),loop:gt().optional()}));class UV extends id{constructor(){super(...arguments);K(this,"type","event")}async register(n,r){if(!r.eventExists(this.config.event))throw new Error(`Event ${this.config.event} is not registered.`);r.on(this.config.event,async s=>{const i=n.createExecution();this.executions.push(i);try{await i.start(s.params)}catch(o){pt.error(o)}},this.config.mode)}}K(UV,"schema",We({event:pe(),...id.schema.properties}));const Jbe=["GET","POST","PUT","PATCH","DELETE"];class ZT extends id{constructor(){super(...arguments);K(this,"type","http")}async register(n,r){const s=this.config.method.toLowerCase();r[s](this.config.path,async i=>{const o=i.req.raw,a=i[this.config.response_type],c=n.createExecution();if(this.executions.push(c),this.config.mode==="sync"){await c.start(o);const u=c.getResponse(),f=c.getErrors();return f.length>0?i.json({success:!1,errors:f}):a(u)}return c.start(o),i.json({success:!0})})}}K(ZT,"schema",We({path:pe({pattern:"^/.*$"}),method:pe({enum:Jbe,default:"GET"}),response_type:pe({enum:["json","text","html"],default:"json"}),...id.schema.properties}));const e$={manual:{cls:id},event:{cls:UV},http:{cls:ZT}},qV={fetch:{cls:KT},log:{cls:FV},render:{cls:BV},subflow:{cls:VV}},HV={...qV},WV=e$,GV=tn(HV,(e,t)=>We({type:ii(t),params:e.cls.schema},{title:String(t)}));Qt(Object.values(GV));const YV=tn(WV,(e,t)=>We({type:ii(t),config:e.cls.schema.optional()},{title:String(t)}));Qt(Object.values(YV));const Xbe=We({source:pe(),target:pe(),config:We({condition:Qt([We({type:ii("success")},{title:"success"}),We({type:ii("error")},{title:"error"}),We({type:ii("matches"),path:pe(),value:pe()},{title:"matches"})]),max_retries:jt()}).partial()}),JV=We({trigger:Qt(Object.values(YV)),tasks:ed(Qt(Object.values(GV))).optional(),connections:ed(Xbe).optional(),start_task:pe().optional(),responding_task:pe().optional()}),Kbe=We({basepath:pe({default:"/api/flows"}),flows:ed(JV,{default:{}})});class Qbe extends Uy{constructor(){super(...arguments);K(this,"flows",{})}getSchema(){return Kbe}getFlowInfo(n){return{...n.toJSON(),tasks:n.tasks.length,connections:n.connections}}async build(){const n=tn(this.config.flows,(s,i)=>Ky.fromObject(i,s,HV));this.flows=n;const r=new V1;r.get("/",async s=>{const i=tn(this.flows,o=>this.getFlowInfo(o));return s.json(i)}),r.get("/flow/:name",async s=>{var o;const i=s.req.param("name");return s.json((o=this.flows[i])==null?void 0:o.toJSON())}),r.get("/flow/:name/run",async s=>{const i=s.req.param("name"),o=this.flows[i],a=o.createExecution(),c=performance.now();await a.start();const u=performance.now()-c,f=a.getErrors();return s.json({success:f.length===0,time:u,errors:f,response:a.getResponse(),flow:this.getFlowInfo(o),logs:a.logs})}),r.all("*",s=>s.notFound()),this.ctx.server.route(this.config.basepath,r);for(const[s,i]of Object.entries(this.flows)){const o=i.trigger;switch(!0){case o instanceof ZT:await o.register(i,this.ctx.server);break}}this.setBuilt()}toJSON(){return{...this.config,flows:tn(this.flows,n=>n.toJSON())}}}class t$ extends Wr{validate(t){if(typeof t!="object")throw new N1("object",typeof t);return this.clone({...t,...this.params})}}K(t$,"slug","file-uploaded");class n$ extends Wr{}K(n$,"slug","file-deleted");class r$ extends Wr{}K(r$,"slug","file-access");const Zbe=Object.freeze(Object.defineProperty({__proto__:null,FileAccessEvent:r$,FileDeletedEvent:n$,FileUploadedEvent:t$},Symbol.toStringTag,{value:"Module"}));var vo;const Lw=class Lw{constructor(t,n={},r){Fe(this,vo);K(this,"emgr");K(this,"config");Be(this,vo,t),this.config={...n,body_max_size:n.body_max_size&&n.body_max_size>0?n.body_max_size:void 0},this.emgr=r??new Fy,this.emgr.registerEvents(Lw.Events)}getAdapter(){return Y(this,vo)}async objectMetadata(t){return await Y(this,vo).getObjectMeta(t)}getConfig(){return this.config}async uploadFile(t,n,r){const s=await Y(this,vo).putObject(n,t);if(typeof s>"u")throw new Error("Failed to upload file");let i={name:n,meta:gd(t)?{size:t.size,type:t.type}:{size:0,type:"application/octet-stream"},etag:typeof s=="string"?s:""};if(typeof s=="object"&&(i=s),!i.meta.type||["application/octet-stream","application/json"].includes(i.meta.type)||!i.meta.size){const a=await Y(this,vo).getObjectMeta(n);if(!a)throw new Error("Failed to get object meta");i.meta=a}if(i.meta.type.startsWith("image")&&(!i.meta.width||!i.meta.height))try{const a=await Hoe(t);i.meta={...i.meta,...a}}catch(a){pt.warn("Failed to get image dimensions",a,t)}const o={file:t,...i,state:{name:i.name,path:i.name}};if(!r){const a=await this.emgr.emit(new t$(o));if(a.returned)return a.params}return o}async deleteFile(t){await Y(this,vo).deleteObject(t),await this.emgr.emit(new n$({name:t}))}async fileExists(t){return await Y(this,vo).objectExists(t)}};vo=new WeakMap,K(Lw,"Events",Zbe);let fg=Lw;const XV=new lr("media.file.read"),KV=new lr("media.file.list"),EO=new lr("media.file.upload"),QV=new lr("media.file.delete"),eve=Object.freeze(Object.defineProperty({__proto__:null,deleteFile:QV,listFiles:KV,readFile:XV,uploadFile:EO},Symbol.toStringTag,{value:"Module"}));function tve(e){var n;if(!e.includes("."))return;const t=e.split(".");return(n=t[t.length-1])==null?void 0:n.toLowerCase()}function qI(e,t=16){const n=typeof e=="string"?e:e.name;if(typeof n!="string")throw console.error("Couldn't extract filename from",e),new Error("Invalid file name");let r=tve(n);if(!r&&gd(e)&&e.type){const s=vF(e.type);s.length>0&&(r=s)}return[dF(t),r].filter(Boolean).join(".")}class nve extends Hy{constructor(t){super(),this.media=t}getStorageAdapter(){return this.getStorage().getAdapter()}getStorage(){return this.media.storage}getController(){const{auth:t,permission:n}=this.middlewares,r=this.create().use(t()),s=this.getEntitiesEnum(this.media.em);r.get("/files",en({summary:"Get the list of files",tags:["media"]}),n(KV),async a=>{const c=await this.getStorageAdapter().listObjects();return a.json(c)}),r.get("/file/:filename",en({summary:"Get a file by name",tags:["media"]}),n(XV),async a=>{const{filename:c}=a.req.param();if(!c)throw new Error("No file name provided");await this.getStorage().emgr.emit(new r$({name:c}));const u=await this.getStorageAdapter().getObject(c,a.req.raw.headers),f=new Headers(u.headers);return f.set("Cache-Control","public, max-age=31536000, immutable"),new Response(u.body,{status:u.status,statusText:u.statusText,headers:f})}),r.delete("/file/:filename",en({summary:"Delete a file by name",tags:["media"]}),n(QV),async a=>{const{filename:c}=a.req.param();if(!c)throw new Error("No file name provided");return await this.getStorage().deleteFile(c),a.json({message:"File deleted"})});const i=this.getStorage().getConfig().body_max_size??Number.POSITIVE_INFINITY;Hr()&&r.post("/inspect",en({summary:"Inspect a file",tags:["media"]}),async a=>{const c=await ON(a);return a.json({type:c==null?void 0:c.type,name:c==null?void 0:c.name,size:c==null?void 0:c.size})});const o={content:{"multipart/form-data":{schema:{type:"object",properties:{file:{type:"string",format:"binary"}},required:["file"]}},"application/octet-stream":{schema:{type:"string",format:"binary"}}}};return r.post("/upload/:filename?",en({summary:"Upload a file",tags:["media"],requestBody:o}),qt("param",ze({filename:pe().optional()})),n(EO),async a=>{const c=a.req.param("filename"),u=await ON(a);if(!u)return a.json({error:"No file provided"},gn.BAD_REQUEST);if(u.size>i)return a.json({error:`Max size (${i} bytes) exceeded`},gn.PAYLOAD_TOO_LARGE);const f=c??qI(u),h=await this.getStorage().uploadFile(u,f);return a.json(h,gn.CREATED)}),r.post("/entity/:entity/:id/:field",en({summary:"Add a file to an entity",tags:["media"],requestBody:o}),qt("param",ze({entity:s,id:Qt([jt(),pe()]),field:pe()})),qt("query",ze({overwrite:gt().optional()})),n([q1,EO]),async a=>{const{entity:c,id:u,field:f}=a.req.valid("param"),h=this.media.em.entity(c);if(!h)return a.json({error:`Entity "${c}" not found`},gn.NOT_FOUND);const p=h.field(f);if(!p||!(p instanceof qg))return a.json({error:`Invalid field "${f}"`},gn.BAD_REQUEST);const y=this.media.getMediaEntity().name,v=`${c}.${f}`,x={scope:f,reference:v,entity_id:u},E=p.getMaxItems(),N=[];if(E){const{overwrite:R}=a.req.valid("query"),{data:{count:B}}=await this.media.em.repository(y).count(x);if(B>=E){if(!R)return a.json({error:`Max items (${E}) reached`},gn.BAD_REQUEST);if(B>E)return a.json({error:`Max items (${E}) exceeded already with ${B} items.`},gn.UNPROCESSABLE_ENTITY);const z=await this.media.em.repo(y).findMany({select:["path"],where:x,sort:{by:"id",dir:"asc"},limit:B-E+1});z.data&&z.data.length>0&&z.data.map(D=>N.push(D.path))}}const{data:{exists:_}}=await this.media.em.repository(h).exists({id:u});if(!_)return a.json({error:`Entity "${c}" with ID "${u}" doesn't exist found`},gn.NOT_FOUND);const C=await ON(a);if(!C)return a.json({error:"No file provided"},gn.BAD_REQUEST);if(C.size>i)return a.json({error:`Max size (${i} bytes) exceeded`},gn.PAYLOAD_TOO_LARGE);const j=qI(C),A=await this.getStorage().uploadFile(C,j,!0),$=this.media.em.mutator(y);$.__unstable_toggleSystemEntityCreation(!1);const k=await $.insertOne({...this.media.uploadedEventDataToMediaPayload(A),...x});if($.__unstable_toggleSystemEntityCreation(!0),N.length>0)for(const R of N)await this.getStorage().deleteFile(R);return a.json({ok:!0,result:k.data,...A},gn.CREATED)}),r}}class rve{constructor(t){K(this,"is_set",!1);K(this,"items",{});this.registerFn=t}set(t){if(this.is_set)throw new Error("Registry is already set");return this.items=t,this.is_set=!0,this}add(t,n){return this.items[t]=n,this}register(t,n){if(this.registerFn){const r=this.registerFn(n);return this.items[t]=r,this}return this.add(t,n)}get(t){return this.items[t]}has(t){return t in this.items}all(){return this.items}}/**
 * @license MIT <https://opensource.org/licenses/MIT>
 * @copyright Michael Hart 2024
 */const NO=new TextEncoder,sve={appstream2:"appstream",cloudhsmv2:"cloudhsm",email:"ses",marketplace:"aws-marketplace",mobile:"AWSMobileHubService",pinpoint:"mobiletargeting",queue:"sqs","git-codecommit":"codecommit","mturk-requester-sandbox":"mturk-requester","personalize-runtime":"personalize"},ive=new Set(["authorization","content-type","content-length","user-agent","presigned-expires","expect","x-amzn-trace-id","range","connection"]);let ove=class{constructor({accessKeyId:t,secretAccessKey:n,sessionToken:r,service:s,region:i,cache:o,retries:a,initRetryMs:c}){if(t==null)throw new TypeError("accessKeyId is a required option");if(n==null)throw new TypeError("secretAccessKey is a required option");this.accessKeyId=t,this.secretAccessKey=n,this.sessionToken=r,this.service=s,this.region=i,this.cache=o||new Map,this.retries=a??10,this.initRetryMs=c||50}async sign(t,n){if(t instanceof Request){const{method:i,url:o,headers:a,body:c}=t;n=Object.assign({method:i,url:o,headers:a},n),n.body==null&&a.has("Content-Type")&&(n.body=c!=null&&a.has("X-Amz-Content-Sha256")?c:await t.clone().arrayBuffer()),t=o}const r=new ave(Object.assign({url:t.toString()},n,this,n&&n.aws)),s=Object.assign({},n,await r.sign());delete s.aws;try{return new Request(s.url.toString(),s)}catch(i){if(i instanceof TypeError)return new Request(s.url.toString(),Object.assign({duplex:"half"},s));throw i}}async fetch(t,n){for(let r=0;r<=this.retries;r++){const s=fetch(await this.sign(t,n));if(r===this.retries)return s;const i=await s;if(i.status<500&&i.status!==429)return i;await new Promise(o=>setTimeout(o,Math.random()*this.initRetryMs*Math.pow(2,r)))}throw new Error("An unknown error occurred, ensure retries is not negative")}};class ave{constructor({method:t,url:n,headers:r,body:s,accessKeyId:i,secretAccessKey:o,sessionToken:a,service:c,region:u,cache:f,datetime:h,signQuery:p,appendSessionToken:y,allHeaders:v,singleEncode:x}){if(n==null)throw new TypeError("url is a required option");if(i==null)throw new TypeError("accessKeyId is a required option");if(o==null)throw new TypeError("secretAccessKey is a required option");this.method=t||(s?"POST":"GET"),this.url=new URL(n),this.headers=new Headers(r||{}),this.body=s,this.accessKeyId=i,this.secretAccessKey=o,this.sessionToken=a;let E,N;(!c||!u)&&([E,N]=lve(this.url,this.headers)),this.service=c||E||"",this.region=u||N||"us-east-1",this.cache=f||new Map,this.datetime=h||new Date().toISOString().replace(/[:-]|\.\d{3}/g,""),this.signQuery=p,this.appendSessionToken=y||this.service==="iotdevicegateway",this.headers.delete("Host"),this.service==="s3"&&!this.signQuery&&!this.headers.has("X-Amz-Content-Sha256")&&this.headers.set("X-Amz-Content-Sha256","UNSIGNED-PAYLOAD");const _=this.signQuery?this.url.searchParams:this.headers;if(_.set("X-Amz-Date",this.datetime),this.sessionToken&&!this.appendSessionToken&&_.set("X-Amz-Security-Token",this.sessionToken),this.signableHeaders=["host",...this.headers.keys()].filter(j=>v||!ive.has(j)).sort(),this.signedHeaders=this.signableHeaders.join(";"),this.canonicalHeaders=this.signableHeaders.map(j=>j+":"+(j==="host"?this.url.host:(this.headers.get(j)||"").replace(/\s+/g," "))).join(`
`),this.credentialString=[this.datetime.slice(0,8),this.region,this.service,"aws4_request"].join("/"),this.signQuery&&(this.service==="s3"&&!_.has("X-Amz-Expires")&&_.set("X-Amz-Expires","86400"),_.set("X-Amz-Algorithm","AWS4-HMAC-SHA256"),_.set("X-Amz-Credential",this.accessKeyId+"/"+this.credentialString),_.set("X-Amz-SignedHeaders",this.signedHeaders)),this.service==="s3")try{this.encodedPath=decodeURIComponent(this.url.pathname.replace(/\+/g," "))}catch{this.encodedPath=this.url.pathname}else this.encodedPath=this.url.pathname.replace(/\/+/g,"/");x||(this.encodedPath=encodeURIComponent(this.encodedPath).replace(/%2F/g,"/")),this.encodedPath=GI(this.encodedPath);const C=new Set;this.encodedSearch=[...this.url.searchParams].filter(([j])=>{if(!j)return!1;if(this.service==="s3"){if(C.has(j))return!1;C.add(j)}return!0}).map(j=>j.map(A=>GI(encodeURIComponent(A)))).sort(([j,A],[$,k])=>j<$?-1:j>$?1:A<k?-1:A>k?1:0).map(j=>j.join("=")).join("&")}async sign(){return this.signQuery?(this.url.searchParams.set("X-Amz-Signature",await this.signature()),this.sessionToken&&this.appendSessionToken&&this.url.searchParams.set("X-Amz-Security-Token",this.sessionToken)):this.headers.set("Authorization",await this.authHeader()),{method:this.method,url:this.url,headers:this.headers,body:this.body}}async authHeader(){return["AWS4-HMAC-SHA256 Credential="+this.accessKeyId+"/"+this.credentialString,"SignedHeaders="+this.signedHeaders,"Signature="+await this.signature()].join(", ")}async signature(){const t=this.datetime.slice(0,8),n=[this.secretAccessKey,t,this.region,this.service].join();let r=this.cache.get(n);if(!r){const s=await Ip("AWS4"+this.secretAccessKey,t),i=await Ip(s,this.region),o=await Ip(i,this.service);r=await Ip(o,"aws4_request"),this.cache.set(n,r)}return GN(await Ip(r,await this.stringToSign()))}async stringToSign(){return["AWS4-HMAC-SHA256",this.datetime,this.credentialString,GN(await HI(await this.canonicalString()))].join(`
`)}async canonicalString(){return[this.method.toUpperCase(),this.encodedPath,this.encodedSearch,this.canonicalHeaders+`
`,this.signedHeaders,await this.hexBodyHash()].join(`
`)}async hexBodyHash(){let t=this.headers.get("X-Amz-Content-Sha256")||(this.service==="s3"&&this.signQuery?"UNSIGNED-PAYLOAD":null);if(t==null){if(this.body&&typeof this.body!="string"&&!("byteLength"in this.body))throw new Error("body must be a string, ArrayBuffer or ArrayBufferView, unless you include the X-Amz-Content-Sha256 header");t=GN(await HI(this.body||""))}return t}}async function Ip(e,t){const n=await crypto.subtle.importKey("raw",typeof e=="string"?NO.encode(e):e,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);return crypto.subtle.sign("HMAC",n,NO.encode(t))}async function HI(e){return crypto.subtle.digest("SHA-256",typeof e=="string"?NO.encode(e):e)}const WI=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function GN(e){const t=new Uint8Array(e);let n="";for(let r=0;r<t.length;r++){const s=t[r];n+=WI[s>>>4&15],n+=WI[s&15]}return n}function GI(e){return e.replace(/[!'()*]/g,t=>"%"+t.charCodeAt(0).toString(16).toUpperCase())}function lve(e,t){const{hostname:n,pathname:r}=e;if(n.endsWith(".on.aws")){const a=n.match(/^[^.]{1,63}\.lambda-url\.([^.]{1,63})\.on\.aws$/);return a!=null?["lambda",a[1]||""]:["",""]}if(n.endsWith(".r2.cloudflarestorage.com"))return["s3","auto"];if(n.endsWith(".backblazeb2.com")){const a=n.match(/^(?:[^.]{1,63}\.)?s3\.([^.]{1,63})\.backblazeb2\.com$/);return a!=null?["s3",a[1]||""]:["",""]}const s=n.replace("dualstack.","").match(/([^.]{1,63})\.(?:([^.]{0,63})\.)?amazonaws\.com(?:\.cn)?$/);let i=s&&s[1]||"",o=s&&s[2];if(o==="us-gov")o="us-gov-west-1";else if(o==="s3"||o==="s3-accelerate")o="us-east-1",i="s3";else if(i==="iot")n.startsWith("iot.")?i="execute-api":n.startsWith("data.jobs.iot.")?i="iot-jobs-data":i=r==="/mqtt"?"iotdevicegateway":"iotdata";else if(i==="autoscaling"){const a=(t.get("X-Amz-Target")||"").split(".")[0];a==="AnyScaleFrontendService"?i="application-autoscaling":a==="AnyScaleScalingPlannerFrontendService"&&(i="autoscaling-plans")}else o==null&&i.startsWith("s3-")?(o=i.slice(3).replace(/^fips-|^external-1/,""),i="s3"):i.endsWith("-fips")?i=i.slice(0,-5):o&&/-\d$/.test(i)&&!/-\d$/.test(o)&&([i,o]=[o,i]);return[sve[i]||i,o||""]}var Hu;class cve extends ove{constructor(n,r){super(n);Fe(this,Hu);Be(this,Hu,r??{responseType:"json"})}convertParams(n){switch(Y(this,Hu).convertParams){case"pascalToKebab":return TC(n);default:return n}}getUrl(n="/",r={}){const s=new URL(n),i=this.convertParams(r);return Object.entries(i).forEach(([o,a])=>{s.searchParams.append(o,a)}),s.toString()}updateKeysRecursively(n,r){return n==null?n:Array.isArray(n)?n.map(s=>this.updateKeysRecursively(s,r)):typeof n=="object"?Object.keys(n).reduce((s,i)=>{let o=i;return i.indexOf(" ")===-1&&(o=i.charAt(0)[r]()+i.slice(1)),s[o]=this.updateKeysRecursively(n[i],r),s},{}):n}async fetchJson(n,r){const s=await this.fetch(n,r);if(Y(this,Hu).responseType==="xml"){if(!s.ok){const a=await s.text();throw new Error(a)}const o=await s.text();return Hae(o)}if(!s.ok){const o=await s.json();throw new Error(o.message)}const i=await s.json();return Y(this,Hu).responseKeysToUpper?this.updateKeysRecursively(i,"toUpperCase"):i}}Hu=new WeakMap;const YI=Symbol.for("bknd:storage");class ZV{constructor(){this[YI]=!0}static isAdapter(t){return t?t[YI]===!0:!1}}const JI=ze({access_key:Rg(),secret_access_key:Rg(),url:pe({pattern:"^https?://(?:.*)?[^/.]+$",description:"URL to S3 compatible endpoint without trailing slash",examples:["https://{account_id}.r2.cloudflarestorage.com/{bucket}","https://{bucket}.s3.{region}.amazonaws.com"]})},{title:"AWS S3",description:"AWS S3 or compatible storage"});var xh;class eU extends ZV{constructor(n){super();Fe(this,xh);K(this,"client");this.client=new cve({accessKeyId:n.access_key,secretAccessKey:n.secret_access_key,retries:Hr()?0:10,service:"s3"},{convertParams:"pascalToKebab",responseType:"xml"}),Be(this,xh,Un(JI,n))}getName(){return"s3"}getSchema(){return JI}getUrl(n="",r={}){let s=this.getObjectUrl("").slice(0,-1);return n.length>0&&(s+=`/${n}`),this.client.getUrl(s,r)}getObjectUrl(n){return`${Y(this,xh).url}/${n}`}async listObjects(n=""){const r={ListType:2,Prefix:n},s=this.getUrl("",r),i=await this.client.fetchJson(s,{method:"GET"}),{Contents:o}=i.ListBucketResult,a=o?Array.isArray(o)?o:[o]:[];return ti(a,(u,f)=>{f.Key&&f.LastModified&&f.Size&&u.push({key:f.Key,last_modified:f.LastModified,size:f.Size})},[])}async putObject(n,r,s={}){const i=this.getUrl(n,{}),o=await this.client.fetch(i,{method:"PUT",body:r,headers:gd(r)?{"Content-Length":String(r.size)}:{}});if(!o.ok)throw new Error(`Failed to upload object: ${o.status} ${o.statusText}`);return String(o.headers.get("etag"))}async headObject(n,r={}){const s=this.getUrl(n,{});return await this.client.fetch(s,{method:"HEAD",headers:{Range:"bytes=0-1"}})}async getObjectMeta(n){var o;const r=await this.headObject(n),s=String(r.headers.get("content-type")),i=Number(String((o=r.headers.get("content-range"))==null?void 0:o.split("/")[1]));return{type:s,size:i}}async objectExists(n,r={}){return(await this.headObject(n)).ok}async getObject(n,r){const s=this.getUrl(n),i=await this.client.fetch(s,{method:"GET",headers:Yoe(r,["if-none-match","accept","if-modified-since"])});return new Response(i.body,{status:i.status,statusText:i.statusText,headers:i.headers})}async deleteObject(n,r={}){const s=this.getUrl(n,r);await this.client.fetch(s,{method:"DELETE"})}toJSON(n){return{type:this.getName(),config:n?Y(this,xh):void 0}}}xh=new WeakMap;const XI=ze({cloud_name:pe(),api_key:Rg(),api_secret:Rg(),upload_preset:pe().optional()},{title:"Cloudinary",description:"Cloudinary media storage"});class tU extends ZV{constructor(n){super();K(this,"config");this.config=Un(XI,n)}getSchema(){return XI}getMimeType(n){switch(!0){case(n.format==="jpeg"||n.format==="jpg"):return"image/jpeg"}return`${n.resource_type}/${n.format}`}getName(){return"cloudinary"}getAuthorizationHeader(){return{Authorization:`Basic ${btoa(`${this.config.api_key}:${this.config.api_secret}`)}`}}async putObject(n,r){const s=n.replace(/\.[a-z0-9]{2,5}$/,""),i=new FormData;i.append("file",r),i.append("public_id",s),i.append("api_key",this.config.api_key),this.config.upload_preset&&i.append("upload_preset",this.config.upload_preset);const o=await fetch(`https://api.cloudinary.com/v1_1/${this.config.cloud_name}/auto/upload`,{method:"POST",headers:{Accept:"application/json"},body:i});if(!o.ok)return;const a=await o.json();return{name:a.public_id+"."+a.format,etag:a.etag,meta:{type:this.getMimeType(a),size:a.bytes}}}async listObjects(n){const r=await fetch(`https://api.cloudinary.com/v1_1/${this.config.cloud_name}/resources/search`,{method:"GET",headers:{Accept:"application/json","Cache-Control":"no-cache",...this.getAuthorizationHeader()}});if(!r.ok)throw new Error("Failed to list objects");return(await r.json()).resources.map(o=>({key:o.public_id,last_modified:new Date(o.uploaded_at),size:o.bytes}))}async headObject(n){const r=this.getObjectUrl(n);return await fetch(r,{method:"HEAD",headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0",Range:"bytes=0-1"}})}async objectExists(n){return(await this.headObject(n)).ok}async getObjectMeta(n){var s;const r=await this.headObject(n);if(r.ok){const i=r.headers.get("content-type"),o=Number((s=r.headers.get("content-range"))==null?void 0:s.split("/")[1]);return{type:i,size:o}}throw new Error("Cannot get object meta")}guessType(n){const r={image:["jpg","jpeg","png","gif","webp","svg"],video:["mp4","webm","ogg"]},s=n.split(".").pop();return Object.keys(r).find(i=>r[i].includes(s))}getObjectUrl(n){const r=this.guessType(n)??"image";return`https://res.cloudinary.com/${this.config.cloud_name}/${r}/upload/${n}`}async generateSignature(n,r){const s=n.timestamp??Math.floor(Date.now()/1e3),i=Object.entries({...n,timestamp:s}).sort(([a],[c])=>a.localeCompare(c)).map(([a,c])=>`${a}=${c}`).join("&");return{signature:await NF.sha1(i+(r??this.config.api_secret)),timestamp:s}}filenameToPublicId(n){return n.split(".").slice(0,-1).join(".")}async getObject(n,r){const s=await fetch(this.getObjectUrl(n),{method:"GET",headers:Goe(r,["range"])});return new Response(s.body,{status:s.status,statusText:s.statusText,headers:s.headers})}async deleteObject(n){const r=this.guessType(n)??"image",s=this.filenameToPublicId(n),{timestamp:i,signature:o}=await this.generateSignature({public_id:s}),a=new FormData;a.append("public_id",s),a.append("timestamp",String(i)),a.append("signature",o),a.append("api_key",this.config.api_key);const c=`https://api.cloudinary.com/v1_1/${this.config.cloud_name}/${r}/destroy`,u=await fetch(c,{headers:{Accept:"application/json","Cache-Control":"no-cache",...this.getAuthorizationHeader()},method:"POST",body:a});if(!u.ok)throw new Error(`Failed to delete object: ${u.status} ${u.statusText}`)}toJSON(n){return{type:"cloudinary",config:n?this.config:{cloud_name:this.config.cloud_name}}}}const uve=new rve(e=>({cls:e,schema:e.prototype.getSchema()})).register("s3",eU).register("cloudinary",tU);eU.prototype.getSchema(),tU.prototype.getSchema();const dve={media:uve},nU=dve.media;function rU(){const e=p1(nU.all(),(t,n)=>{var r,s;return We({type:ii(n),config:t.schema},{title:((r=t.schema)==null?void 0:r.title)??n,description:(s=t.schema)==null?void 0:s.description})});return U1("config_media",{enabled:gt({default:!1}),basepath:pe({default:"/api/media"}),entity_name:pe({default:"media"}),storage:We({body_max_size:jt({description:"Max size of the body in bytes. Leave blank for unlimited."}).optional()},{default:{}}),adapter:Vye("config_media_adapter",Qt(Object.values(e))).optional()},{default:{}})}rU();const fve={path:xo().required(),folder:kye({default_value:!1,hidden:!0,fillable:["create"]}),mime_type:xo(),size:$ye(),scope:xo({hidden:!0,fillable:["create"]}),etag:xo(),modified_at:Rye(),reference:xo(),entity_id:xo(),metadata:Mye()},Fw=class Fw extends Uy{constructor(){super(...arguments);K(this,"_storage")}async build(){if(!this.config.enabled){this.setBuilt();return}if(!this.config.adapter){console.info("No storage adapter provided, skip building media.");return}let n;try{const{type:r,config:s}=this.config.adapter,i=nU.get(r).cls;n=new i(s),this._storage=new fg(n,this.config.storage,this.ctx.emgr),this.setBuilt(),this.setupListeners(),this.ctx.guard.registerPermissions(eve),this.ctx.server.route(this.basepath,new nve(this).getController());const o=this.getMediaEntity(!0);this.ctx.helper.ensureSchema(Xz({[o.name]:o},({index:a},{media:c})=>{a(c).on(["path"],!0).on(["reference"]).on(["entity_id"])}))}catch(r){throw console.error(r),new Error(`Could not build adapter with config ${JSON.stringify(this.config.adapter)}`)}}getSchema(){return rU()}get basepath(){return this.config.basepath}get storage(){return this.throwIfNotBuilt(),this._storage}uploadedEventDataToMediaPayload(n){const r={};return n.meta.width&&n.meta.height&&(r.width=n.meta.width,r.height=n.meta.height),{path:n.name,mime_type:n.meta.type,size:n.meta.size,etag:n.etag,modified_at:new Date,metadata:r}}getMediaEntity(n){const r=this.config.entity_name;return n||!this.em.hasEntity(r)?Jz(r,Fw.mediaFields,void 0,"system"):this.em.entity(r)}get em(){return this.ctx.em}setupListeners(){const{emgr:n,em:r}=this.ctx,s=this.getMediaEntity().name;n.onEvent(fg.Events.FileUploadedEvent,async i=>{const o=r.mutator(s);o.__unstable_toggleSystemEntityCreation(!1);const a=this.uploadedEventDataToMediaPayload(i.params),{data:c}=await o.insertOne(a);return o.__unstable_toggleSystemEntityCreation(!0),{data:c}},{mode:"sync",id:"add-data-media"}),n.onEvent(fg.Events.FileDeletedEvent,async i=>{const{data:o}=await r.repo(s).findOne({path:i.params.name});o&&await r.mutator(s).deleteOne(o.id),pt.log("App:storage:file deleted",i.params)},{mode:"sync",id:"delete-data-media"}),n.onEvent(ST,async i=>{const{entity:o,data:a}=i.params,c=o.fields.filter(u=>u.type==="media");if(c.length>0){const u=c.map(h=>`${o.name}.${h.name}`);pt.log("App:storage:file cleaning up",{reference:{$in:u},entity_id:String(a.id)});const{data:f}=await r.mutator(s).deleteWhere({reference:{$in:u},entity_id:String(a.id)});for(const h of f)await this.storage.deleteFile(h.path);pt.log("App:storage:file cleaned up files:",f.length)}},{mode:"async",id:"delete-data-media-after"})}getOverwritePaths(){return[/^\.?adapter$/]}toJSON(n){return!this.isBuilt()||!this.config.enabled?this.configDefault:{...this.config,adapter:this.storage.getAdapter().toJSON(n)}}};K(Fw,"mediaFields",fve);let _O=Fw;const sU={server:Gye,data:Ybe,auth:Mx,media:_O,flows:Qbe};cF("modules_debug");function hve(){return{type:"object",...tn(sU,t=>t.prototype.getSchema())}}function mve(){const e=tn(sU,t=>t.prototype.getSchema().template({},{withOptional:!0,withExtendedOptional:!0}));return structuredClone(e)}class W1{constructor(t={},n){K(this,"fetcher");this._options=t,this.fetcher=n??fetch}getDefaultOptions(){return{}}get options(){return{host:"http://localhost",token:void 0,...this.getDefaultOptions(),...this._options}}key(){return this.options.basepath??""}getUrl(t){const n=this.options.basepath??"";return this.options.host+(n+"/"+t).replace(/\/{2,}/g,"/").replace(/\/$/,"")}request(t,n,r){const s=(r==null?void 0:r.method)??"GET",i=Array.isArray(t)?t.join("/"):t;let o=this.getUrl(i);n instanceof URLSearchParams?o+="?"+n.toString():typeof n=="object"&&Object.keys(n).length>0&&(o+="?"+y1(n));const a=new Headers(this.options.headers??{});for(const[f,h]of Object.entries((r==null?void 0:r.headers)??{}))a.set(f,h);a.has("Accept")||a.set("Accept","application/json"),this.options.token&&this.options.token_transport==="header"&&a.set("Authorization",`Bearer ${this.options.token}`);let c=r==null?void 0:r.body;if(r&&"body"in r&&["POST","PATCH","PUT"].includes(s)){const f=a.get("Content-Type")??void 0;(!f||f.startsWith("application/json")||Qu(c))&&(c=JSON.stringify(r.body),a.set("Content-Type","application/json"))}const u=new Request(o,{...r,method:s,body:c,headers:a});return new Px(u,{fetcher:this.fetcher,verbose:this.options.verbose})}get(t,n,r){return this.request(t,n,{...r,method:"GET"})}post(t,n,r){return this.request(t,void 0,{...r,body:n,method:"POST"})}patch(t,n,r){return this.request(t,void 0,{...r,body:n,method:"PATCH"})}put(t,n,r){return this.request(t,void 0,{...r,body:n,method:"PUT"})}delete(t,n,r){return this.request(t,void 0,{...r,body:n,method:"DELETE"})}}function pve(e,t,n){let r=typeof n<"u"?n:t;const s=["raw","body","ok","status","res","data","toJSON"];return typeof r!="object"&&(r={}),new Proxy(r,{get(i,o,a){return o==="raw"||o==="res"?e:o==="body"?t:o==="data"?n:o==="ok"?e.ok:o==="status"?e.status:o==="toJSON"?()=>i:Reflect.get(i,o,a)},has(i,o){return s.includes(o)?!0:Reflect.has(i,o)},ownKeys(i){return Array.from(new Set([...Reflect.ownKeys(i),...s]))},getOwnPropertyDescriptor(i,o){return s.includes(o)?{configurable:!0,enumerable:!0,value:Reflect.get({raw:e,body:t,ok:e.ok,status:e.status},o)}:Reflect.getOwnPropertyDescriptor(i,o)}})}var B8;B8=Symbol.toStringTag;const X3=class X3{constructor(t,n,r){K(this,B8);this.request=t,this.options=n,this.refineData=r}get verbose(){var t;return((t=this.options)==null?void 0:t.verbose)??!1}refine(t){return new X3(this.request,this.options,t)}async execute(){var o;Hr()&&await new Promise(a=>setTimeout(a,200));const t=((o=this.options)==null?void 0:o.fetcher)??fetch;this.verbose&&pt.debug("[FetchPromise] Request",{method:this.request.method,url:this.request.url});const n=await t(this.request);this.verbose&&pt.debug("[FetchPromise] Response",{res:n,ok:n.ok,status:n.status});let r,s;const i=n.headers.get("Content-Type")??"";if(i.startsWith("application/json")?(r=await n.json(),typeof r=="object"&&(s="data"in r?r.data:r)):i.startsWith("text")?r=await n.text():r=n.body,this.refineData)try{s=this.refineData(s)}catch(a){console.warn("[FetchPromise] Error in refineData",a),s=void 0}return pve(n,r,s)}then(t,n){return this.execute().then(t,n)}catch(t){return this.then(void 0,t)}finally(t){return this.then(n=>(t==null||t(),n),n=>{throw t==null||t(),n})}path(){return new URL(this.request.url).pathname}key(t){const n=new URL(this.request.url);return(t==null?void 0:t.search)!==!1?this.path()+n.search:this.path()}keyArray(t){const n=new URL(this.request.url),r=this.path().split("/");return((t==null?void 0:t.search)!==!1?[...r,n.searchParams.toString()]:r).filter(Boolean)}toString(){return this.key({search:!0})}toJSON(){return{url:this.request.url,method:this.request.method}}};let Px=X3;class gve extends W1{getDefaultOptions(){return{basepath:"/api/auth",credentials:"include"}}async login(t,n){var s,i;const r=await this.post([t,"login"],n,{credentials:this.options.credentials});return r.ok&&r.body.token&&await((i=(s=this.options).onTokenUpdate)==null?void 0:i.call(s,r.body.token)),r}async register(t,n){var s,i;const r=await this.post([t,"register"],n,{credentials:this.options.credentials});return r.ok&&r.body.token&&await((i=(s=this.options).onTokenUpdate)==null?void 0:i.call(s,r.body.token)),r}async actionSchema(t,n){return this.get([t,"actions",n,"schema.json"])}async action(t,n,r){return this.post([t,"actions",n],r)}async loginWithPassword(t){return this.login("password",t)}async registerWithPassword(t){return this.register("password",t)}me(){return this.get(["me"])}strategies(){return this.get(["strategies"])}async logout(){var t,n;await((n=(t=this.options).onTokenUpdate)==null?void 0:n.call(t,void 0))}}class yve extends W1{getDefaultOptions(){return{basepath:"/api/data",queryLengthLimit:1e3,defaultQuery:{limit:10}}}requireObjectSet(t,n){if(!t||typeof t!="object"||Object.keys(t).length===0)throw new Error(n??"object is required")}readOne(t,n,r={}){return this.get(["entity",t,n],r)}readOneBy(t,n={}){return this.readMany(t,{...n,limit:1,offset:0}).refine(r=>r[0])}readMany(t,n={}){const r=n??this.options.defaultQuery,s=this.get(["entity",t],r);return s.request.url.length<=this.options.queryLengthLimit?s:this.post(["entity",t,"query"],r)}readManyByReference(t,n,r,s={}){return this.get(["entity",t,n,r],s??this.options.defaultQuery)}createOne(t,n){return this.post(["entity",t],n)}createMany(t,n){if(!n||!Array.isArray(n)||n.length===0)throw new Error("input is required");return this.post(["entity",t],n)}updateOne(t,n,r){if(!n)throw new Error("ID is required");return this.patch(["entity",t,n],r)}updateMany(t,n,r){return this.requireObjectSet(n),this.patch(["entity",t],{update:r,where:n})}deleteOne(t,n){if(!n)throw new Error("ID is required");return this.delete(["entity",t,n])}deleteMany(t,n){return this.requireObjectSet(n),this.delete(["entity",t],n)}count(t,n={}){return this.post(["entity",t,"fn","count"],n)}exists(t,n={}){return this.post(["entity",t,"fn","exists"],n)}}class bve extends W1{getDefaultOptions(){return{basepath:"/api/media",upload_fetcher:fetch,init:{}}}listFiles(){return this.get(["files"])}getFile(t){return this.get(["file",t],void 0,{headers:{Accept:"*/*"}})}async getFileStream(t){const{res:n}=await this.getFile(t);if(!n.ok||!n.body)throw new Error("Failed to fetch file");return n.body}async download(t){const{res:n}=await this.getFile(t);if(!n.ok||!n.body)throw new Error("Failed to fetch file");return await n.blob()}getFileUploadUrl(t){return t?this.getUrl(`/upload/${t.path}`):this.getUrl("/upload")}getEntityUploadUrl(t,n,r){return this.getUrl(`/entity/${t}/${n}/${r}`)}getUploadHeaders(){return this.options.token_transport==="header"&&this.options.token?new Headers({Authorization:`Bearer ${this.options.token}`}):new Headers}uploadFile(t,n){var o;const r={"Content-Type":"application/octet-stream",...((o=n==null?void 0:n._init)==null?void 0:o.headers)||{}};let s=(n==null?void 0:n.filename)||"";try{typeof t.type<"u"&&(r["Content-Type"]=t.type),n!=null&&n.filename||(s=t.name)}catch{}s&&s.length>0&&s.includes("/")&&(s=s.split("/").pop()||"");const i={...this.options.init,...(n==null?void 0:n._init)||{},headers:r};if(n!=null&&n.path)return this.post(n.path,t,i);if(!s||s.length===0)throw new Error("Invalid filename");return this.post((n==null?void 0:n.path)??["upload",s],t,i)}async upload(t,n={}){var r;if(t instanceof Request||typeof t=="string"){const i=await(n.fetcher??this.options.upload_fetcher)(t);if(!i.ok||!i.body)throw new Error("Failed to fetch file");return this.uploadFile(i.body,n)}else if(t instanceof Response){if(!t.body)throw new Error("Invalid response");return this.uploadFile(t.body,{...n??{},_init:{...n._init??{},headers:{...((r=n._init)==null?void 0:r.headers)??{},"Content-Type":t.headers.get("Content-Type")||"application/octet-stream"}}})}return this.uploadFile(t,n)}async uploadToEntity(t,n,r,s,i){return this.upload(s,{...i,path:["entity",t,n,r]})}deleteFile(t){return this.delete(["file",t])}}class vve extends W1{getDefaultOptions(){return{basepath:"/api/system"}}readConfig(){return this.get("config")}readSchema(t){return this.get("schema",{config:t!=null&&t.config?1:0,secrets:t!=null&&t.secrets?1:0,fresh:t!=null&&t.fresh?1:0})}setConfig(t,n,r){return this.post(["config","set",t].join("/")+`?force=${r?1:0}`,n)}addConfig(t,n,r){return this.post(["config","add",t,n],r)}patchConfig(t,n,r){return this.patch(["config","patch",t,n],r)}overwriteConfig(t,n,r){return this.put(["config","overwrite",t,n],r)}removeConfig(t,n){return this.delete(["config","remove",t,n])}}class iU{constructor(t={}){K(this,"token");K(this,"user");K(this,"verified",!1);K(this,"token_transport","header");K(this,"system");K(this,"data");K(this,"auth");K(this,"media");this.options=t,this.verified=t.verified===!0,"request"in t&&t.request?(this.options.host=t.host??new URL(t.request.url).origin,this.options.headers=t.headers??t.request.headers,this.extractToken()):"token"in t&&t.token?(this.token_transport="header",this.updateToken(t.token,{trigger:!1})):"user"in t&&t.user?(this.token_transport="none",this.user=t.user,this.verified=t.verified!==!1):this.extractToken(),this.buildApis()}get fetcher(){return this.options.fetcher??fetch}get baseUrl(){return this.options.host??"http://localhost"}get tokenKey(){return this.options.key??"auth"}extractToken(){var t;if(this.verified=!1,this.options.headers){const n=xve(this.options.headers.get("cookie"),"auth");if(n){this.token_transport="cookie",this.updateToken(n);return}const r=(t=this.options.headers.get("authorization"))==null?void 0:t.replace("Bearer ","");if(r){this.token_transport="header",this.updateToken(r);return}}else this.storage&&this.storage.getItem(this.tokenKey).then(n=>{this.token_transport="header",this.updateToken(n?String(n):void 0)})}get storage(){return this.options.storage?{getItem:async t=>await this.options.storage.getItem(t),setItem:async(t,n)=>await this.options.storage.setItem(t,n),removeItem:async t=>await this.options.storage.removeItem(t)}:null}updateToken(t,n){var r,s;if(this.token=t,this.verified=!1,t?this.user=Ms(S0e(t).payload,["iat","iss","exp"]):this.user=void 0,this.storage){const i=this.tokenKey;t?this.storage.setItem(i,t).then(()=>{var o,a;(a=(o=this.options).onAuthStateChange)==null||a.call(o,this.getAuthState())}):this.storage.removeItem(i).then(()=>{var o,a;(a=(o=this.options).onAuthStateChange)==null||a.call(o,this.getAuthState())})}else(n==null?void 0:n.trigger)!==!1&&((s=(r=this.options).onAuthStateChange)==null||s.call(r,this.getAuthState()));n!=null&&n.rebuild&&this.buildApis()}markAuthVerified(t){return this.verified=t,this}isAuthVerified(){return this.verified}getAuthState(){return{token:this.token,user:this.user,verified:this.verified}}isAuthenticated(){const{token:t,user:n}=this.getAuthState();return!!t&&!!n}async getVerifiedAuthState(){return await this.verifyAuth(),this.getAuthState()}async verifyAuth(){if(!this.token){this.markAuthVerified(!1);return}try{const{ok:t,data:n}=await this.auth.me(),r=n==null?void 0:n.user;if(!t||!r)throw new Error;this.user=r,this.markAuthVerified(!0)}catch{this.markAuthVerified(!1),this.updateToken(void 0)}}getUser(){return this.user||null}getParams(){return Object.freeze({host:this.baseUrl,token:this.token,headers:this.options.headers,token_transport:this.token_transport,verbose:this.options.verbose})}buildApis(){const t=this.getParams(),n=this.options.fetcher;this.system=new vve(t,n),this.data=new yve({...t,...this.options.data},n),this.auth=new gve({...t,credentials:this.options.storage?"omit":"include",...this.options.auth,onTokenUpdate:r=>{var s,i;this.updateToken(r,{rebuild:!0}),(i=(s=this.options.auth)==null?void 0:s.onTokenUpdate)==null||i.call(s,r)}},n),this.media=new bve({...t,...this.options.media},n)}}function xve(e,t){if(!e)return null;for(const n of e.split("; ")){const[r,s]=n.split("=");if(r===t&&s)return decodeURIComponent(s)}return null}const s$=w.createContext(void 0),wve=({children:e,host:t,baseUrl:n=t,...r})=>{const s=G1(),i=oU();let o=n??(i==null?void 0:i.baseUrl)??"",a;if(s&&(a=s.user),!o)try{o=window.location.origin}catch{}const c={user:a,...r,host:o},u=w.useMemo(()=>new iU({...c,verbose:Hr(),onAuthStateChange:p=>{var y;(y=r.onAuthStateChange)==null||y.call(r,p),(!(f!=null&&f.token)||p.token!==(f==null?void 0:f.token))&&h(p)}}),[JSON.stringify(c)]),[f,h]=w.useState(c.user?u.getAuthState():void 0);return m.jsx(s$.Provider,{value:{baseUrl:u.baseUrl,api:u,authState:f},children:e})},Fo=e=>{const t=w.useContext(s$);return!(t!=null&&t.api)||e?new iU({host:""}):t.api},oU=()=>w.useContext(s$);function G1(){const e={logout_route:"/api/auth/logout",admin_basepath:""};return typeof window<"u"&&window.__BKND__?{...e,...window.__BKND__}:e}var YN={exports:{}},JN={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KI;function Sve(){if(KI)return JN;KI=1;var e=Xh();function t(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,s=e.useEffect,i=e.useLayoutEffect,o=e.useDebugValue;function a(h,p){var y=p(),v=r({inst:{value:y,getSnapshot:p}}),x=v[0].inst,E=v[1];return i(function(){x.value=y,x.getSnapshot=p,c(x)&&E({inst:x})},[h,y,p]),s(function(){return c(x)&&E({inst:x}),h(function(){c(x)&&E({inst:x})})},[h]),o(y),y}function c(h){var p=h.getSnapshot;h=h.value;try{var y=p();return!n(h,y)}catch{return!0}}function u(h,p){return p()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:a;return JN.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:f,JN}var QI;function aU(){return QI||(QI=1,YN.exports=Sve()),YN.exports}var i$=aU();const lU=0,cU=1,uU=2,ZI=3;var eP=Object.prototype.hasOwnProperty;function CO(e,t){var n,r;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&CO(e[r],t[r]););return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(eP.call(e,n)&&++r&&!eP.call(t,n)||!(n in t)||!CO(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}const So=new WeakMap,hc=()=>{},ir=hc(),OO=Object,vt=e=>e===ir,Li=e=>typeof e=="function",jc=(e,t)=>({...e,...t}),dU=e=>Li(e.then),XN={},Xb={},o$="undefined",Qy=typeof window!=o$,jO=typeof document!=o$,Eve=Qy&&"Deno"in window,Nve=()=>Qy&&typeof window.requestAnimationFrame!=o$,Wl=(e,t)=>{const n=So.get(e);return[()=>!vt(t)&&e.get(t)||XN,r=>{if(!vt(t)){const s=e.get(t);t in Xb||(Xb[t]=s),n[5](t,jc(s,r),s||XN)}},n[6],()=>!vt(t)&&t in Xb?Xb[t]:!vt(t)&&e.get(t)||XN]};let AO=!0;const _ve=()=>AO,[TO,$O]=Qy&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[hc,hc],Cve=()=>{const e=jO&&document.visibilityState;return vt(e)||e!=="hidden"},Ove=e=>(jO&&document.addEventListener("visibilitychange",e),TO("focus",e),()=>{jO&&document.removeEventListener("visibilitychange",e),$O("focus",e)}),jve=e=>{const t=()=>{AO=!0,e()},n=()=>{AO=!1};return TO("online",t),TO("offline",n),()=>{$O("online",t),$O("offline",n)}},Ave={isOnline:_ve,isVisible:Cve},Tve={initFocus:Ove,initReconnect:jve},tP=!je.useId,Jg=!Qy||Eve,$ve=e=>Nve()?window.requestAnimationFrame(e):setTimeout(e,1),Vv=Jg?w.useEffect:w.useLayoutEffect,KN=typeof navigator<"u"&&navigator.connection,nP=!Jg&&KN&&(["slow-2g","2g"].includes(KN.effectiveType)||KN.saveData),Kb=new WeakMap,QN=(e,t)=>OO.prototype.toString.call(e)===`[object ${t}]`;let Rve=0;const RO=e=>{const t=typeof e,n=QN(e,"Date"),r=QN(e,"RegExp"),s=QN(e,"Object");let i,o;if(OO(e)===e&&!n&&!r){if(i=Kb.get(e),i)return i;if(i=++Rve+"~",Kb.set(e,i),Array.isArray(e)){for(i="@",o=0;o<e.length;o++)i+=RO(e[o])+",";Kb.set(e,i)}if(s){i="#";const a=OO.keys(e).sort();for(;!vt(o=a.pop());)vt(e[o])||(i+=o+":"+RO(e[o])+",");Kb.set(e,i)}}else i=n?e.toJSON():t=="symbol"?e.toString():t=="string"?JSON.stringify(e):""+e;return i},Xg=e=>{if(Li(e))try{e=e()}catch{e=""}const t=e;return e=typeof e=="string"?e:(Array.isArray(e)?e.length:e)?RO(e):"",[e,t]};let kve=0;const kO=()=>++kve;async function fU(...e){const[t,n,r,s]=e,i=jc({populateCache:!0,throwOnError:!0},typeof s=="boolean"?{revalidate:s}:s||{});let o=i.populateCache;const a=i.rollbackOnError;let c=i.optimisticData;const u=p=>typeof a=="function"?a(p):a!==!1,f=i.throwOnError;if(Li(n)){const p=n,y=[],v=t.keys();for(const x of v)!/^\$(inf|sub)\$/.test(x)&&p(t.get(x)._k)&&y.push(x);return Promise.all(y.map(h))}return h(n);async function h(p){const[y]=Xg(p);if(!y)return;const[v,x]=Wl(t,y),[E,N,_,C]=So.get(t),j=()=>{const H=E[y];return(Li(i.revalidate)?i.revalidate(v().data,p):i.revalidate!==!1)&&(delete _[y],delete C[y],H&&H[0])?H[0](uU).then(()=>v().data):v().data};if(e.length<3)return j();let A=r,$;const k=kO();N[y]=[k,0];const R=!vt(c),B=v(),z=B.data,D=B._c,L=vt(D)?z:D;if(R&&(c=Li(c)?c(L,z):c,x({data:c,_c:L})),Li(A))try{A=A(L)}catch(H){$=H}if(A&&dU(A))if(A=await A.catch(H=>{$=H}),k!==N[y][0]){if($)throw $;return A}else $&&R&&u($)&&(o=!0,x({data:L,_c:ir}));if(o&&!$)if(Li(o)){const H=o(A,L);x({data:H,error:ir,_c:ir})}else x({data:A,error:ir,_c:ir});if(N[y][1]=kO(),Promise.resolve(j()).then(()=>{x({_c:ir})}),$){if(f)throw $;return}return A}}const rP=(e,t)=>{for(const n in e)e[n][0]&&e[n][0](t)},Mve=(e,t)=>{if(!So.has(e)){const n=jc(Tve,t),r=Object.create(null),s=fU.bind(ir,e);let i=hc;const o=Object.create(null),a=(f,h)=>{const p=o[f]||[];return o[f]=p,p.push(h),()=>p.splice(p.indexOf(h),1)},c=(f,h,p)=>{e.set(f,h);const y=o[f];if(y)for(const v of y)v(h,p)},u=()=>{if(!So.has(e)&&(So.set(e,[r,Object.create(null),Object.create(null),Object.create(null),s,c,a]),!Jg)){const f=n.initFocus(setTimeout.bind(ir,rP.bind(ir,r,lU))),h=n.initReconnect(setTimeout.bind(ir,rP.bind(ir,r,cU)));i=()=>{f&&f(),h&&h(),So.delete(e)}}};return u(),[e,s,u,i]}return[e,So.get(e)[4]]},Ive=(e,t,n,r,s)=>{const i=n.errorRetryCount,o=s.retryCount,a=~~((Math.random()+.5)*(1<<(o<8?o:8)))*n.errorRetryInterval;!vt(i)&&o>i||setTimeout(r,a,s)},Pve=CO,[a$,l$]=Mve(new Map),Dve=jc({onLoadingSlow:hc,onSuccess:hc,onError:hc,onErrorRetry:Ive,onDiscarded:hc,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:nP?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:nP?5e3:3e3,compare:Pve,isPaused:()=>!1,cache:a$,mutate:l$,fallback:{}},Ave),Lve=(e,t)=>{const n=jc(e,t);if(t){const{use:r,fallback:s}=e,{use:i,fallback:o}=t;r&&i&&(n.use=r.concat(i)),s&&o&&(n.fallback=jc(s,o))}return n},Fve=w.createContext({}),hU="$inf$",mU=Qy&&window.__SWR_DEVTOOLS_USE__,Bve=mU?window.__SWR_DEVTOOLS_USE__:[],zve=()=>{mU&&(window.__SWR_DEVTOOLS_REACT__=je)},pU=e=>Li(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(e[1]===null?e[2]:e[1])||{}],gU=()=>jc(Dve,w.useContext(Fve)),Vve=e=>(t,n,r)=>e(t,n&&((...i)=>{const[o]=Xg(t),[,,,a]=So.get(a$);if(o.startsWith(hU))return n(...i);const c=a[o];return vt(c)?n(...i):(delete a[o],c)}),r),Uve=Bve.concat(Vve),qve=e=>function(...n){const r=gU(),[s,i,o]=pU(n),a=Lve(r,o);let c=e;const{use:u}=a,f=(u||[]).concat(Uve);for(let h=f.length;h--;)c=f[h](c);return c(s,i||a.fetcher||null,a)},Hve=(e,t,n)=>{const r=t[e]||(t[e]=[]);return r.push(n),()=>{const s=r.indexOf(n);s>=0&&(r[s]=r[r.length-1],r.pop())}},Wve=(e,t)=>(...n)=>{const[r,s,i]=pU(n),o=(i.use||[]).concat(t);return e(r,s,{...i,use:o})};zve();const ZN=je.use||(e=>{switch(e.status){case"pending":throw e;case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e}}),e_={dedupe:!0},Gve=(e,t,n)=>{const{cache:r,compare:s,suspense:i,fallbackData:o,revalidateOnMount:a,revalidateIfStale:c,refreshInterval:u,refreshWhenHidden:f,refreshWhenOffline:h,keepPreviousData:p}=n,[y,v,x,E]=So.get(r),[N,_]=Xg(e),C=w.useRef(!1),j=w.useRef(!1),A=w.useRef(N),$=w.useRef(t),k=w.useRef(n),R=()=>k.current,B=()=>R().isVisible()&&R().isOnline(),[z,D,L,H]=Wl(r,N),M=w.useRef({}).current,V=vt(o)?vt(n.fallback)?ir:n.fallback[N]:o,T=(Re,ke)=>{for(const He in M){const et=He;if(et==="data"){if(!s(Re[et],ke[et])&&(!vt(Re[et])||!s(ae,ke[et])))return!1}else if(ke[et]!==Re[et])return!1}return!0},I=w.useMemo(()=>{const Re=!N||!t?!1:vt(a)?R().isPaused()||i?!1:c!==!1:a,ke=G=>{const re=jc(G);return delete re._k,Re?{isValidating:!0,isLoading:!0,...re}:re},He=z(),et=H(),Oe=ke(He),Me=He===et?Oe:ke(et);let Ie=Oe;return[()=>{const G=ke(z());return T(G,Ie)?(Ie.data=G.data,Ie.isLoading=G.isLoading,Ie.isValidating=G.isValidating,Ie.error=G.error,Ie):(Ie=G,G)},()=>Me]},[r,N]),P=i$.useSyncExternalStore(w.useCallback(Re=>L(N,(ke,He)=>{T(He,ke)||Re()}),[r,N]),I[0],I[1]),W=!C.current,F=y[N]&&y[N].length>0,q=P.data,X=vt(q)?V&&dU(V)?ZN(V):V:q,Q=P.error,se=w.useRef(X),ae=p?vt(q)?vt(se.current)?X:se.current:q:X,de=F&&!vt(Q)?!1:W&&!vt(a)?a:R().isPaused()?!1:i?vt(X)?!1:c:vt(X)||c,ce=!!(N&&t&&W&&de),fe=vt(P.isValidating)?ce:P.isValidating,ve=vt(P.isLoading)?ce:P.isLoading,Ae=w.useCallback(async Re=>{const ke=$.current;if(!N||!ke||j.current||R().isPaused())return!1;let He,et,Oe=!0;const Me=Re||{},Ie=!x[N]||!Me.dedupe,G=()=>tP?!j.current&&N===A.current&&C.current:N===A.current,re={isValidating:!1,isLoading:!1},te=()=>{D(re)},he=()=>{const ne=x[N];ne&&ne[1]===et&&delete x[N]},ie={isValidating:!0};vt(z().data)&&(ie.isLoading=!0);try{if(Ie&&(D(ie),n.loadingTimeout&&vt(z().data)&&setTimeout(()=>{Oe&&G()&&R().onLoadingSlow(N,n)},n.loadingTimeout),x[N]=[ke(_),kO()]),[He,et]=x[N],He=await He,Ie&&setTimeout(he,n.dedupingInterval),!x[N]||x[N][1]!==et)return Ie&&G()&&R().onDiscarded(N),!1;re.error=ir;const ne=v[N];if(!vt(ne)&&(et<=ne[0]||et<=ne[1]||ne[1]===0))return te(),Ie&&G()&&R().onDiscarded(N),!1;const le=z().data;re.data=s(le,He)?le:He,Ie&&G()&&R().onSuccess(He,N,n)}catch(ne){he();const le=R(),{shouldRetryOnError:xe}=le;le.isPaused()||(re.error=ne,Ie&&G()&&(le.onError(ne,N,le),(xe===!0||Li(xe)&&xe(ne))&&(!R().revalidateOnFocus||!R().revalidateOnReconnect||B())&&le.onErrorRetry(ne,N,le,Ne=>{const Ge=y[N];Ge&&Ge[0]&&Ge[0](ZI,Ne)},{retryCount:(Me.retryCount||0)+1,dedupe:!0})))}return Oe=!1,te(),!0},[N,r]),Ce=w.useCallback((...Re)=>fU(r,A.current,...Re),[]);if(Vv(()=>{$.current=t,k.current=n,vt(q)||(se.current=q)}),Vv(()=>{if(!N)return;const Re=Ae.bind(ir,e_);let ke=0;R().revalidateOnFocus&&(ke=Date.now()+R().focusThrottleInterval);const et=Hve(N,y,(Oe,Me={})=>{if(Oe==lU){const Ie=Date.now();R().revalidateOnFocus&&Ie>ke&&B()&&(ke=Ie+R().focusThrottleInterval,Re())}else if(Oe==cU)R().revalidateOnReconnect&&B()&&Re();else{if(Oe==uU)return Ae();if(Oe==ZI)return Ae(Me)}});return j.current=!1,A.current=N,C.current=!0,D({_k:_}),de&&(vt(X)||Jg?Re():$ve(Re)),()=>{j.current=!0,et()}},[N]),Vv(()=>{let Re;function ke(){const et=Li(u)?u(z().data):u;et&&Re!==-1&&(Re=setTimeout(He,et))}function He(){!z().error&&(f||R().isVisible())&&(h||R().isOnline())?Ae(e_).then(ke):ke()}return ke(),()=>{Re&&(clearTimeout(Re),Re=-1)}},[u,f,h,N]),w.useDebugValue(ae),i&&vt(X)&&N){if(!tP&&Jg)throw new Error("Fallback data is required when using Suspense in SSR.");$.current=t,k.current=n,j.current=!1;const Re=E[N];if(!vt(Re)){const ke=Ce(Re);ZN(ke)}if(vt(Q)){const ke=Ae(e_);vt(ae)||(ke.status="fulfilled",ke.value=!0),ZN(ke)}else throw Q}return{mutate:Ce,get data(){return M.data=!0,ae},get error(){return M.error=!0,Q},get isValidating(){return M.isValidating=!0,fe},get isLoading(){return M.isLoading=!0,ve}}},c$=qve(Gve),Yve=()=>{},Jve=Yve(),MO=Object,sP=e=>e===Jve,Xve=e=>typeof e=="function",Qb=new WeakMap,t_=(e,t)=>MO.prototype.toString.call(e)===`[object ${t}]`;let Kve=0;const IO=e=>{const t=typeof e,n=t_(e,"Date"),r=t_(e,"RegExp"),s=t_(e,"Object");let i,o;if(MO(e)===e&&!n&&!r){if(i=Qb.get(e),i)return i;if(i=++Kve+"~",Qb.set(e,i),Array.isArray(e)){for(i="@",o=0;o<e.length;o++)i+=IO(e[o])+",";Qb.set(e,i)}if(s){i="#";const a=MO.keys(e).sort();for(;!sP(o=a.pop());)sP(e[o])||(i+=o+":"+IO(e[o])+",");Qb.set(e,i)}}else i=n?e.toJSON():t=="symbol"?e.toString():t=="string"?JSON.stringify(e):""+e;return i},Qve=e=>{if(Xve(e))try{e=e()}catch{e=""}const t=e;return e=typeof e=="string"?e:(Array.isArray(e)?e.length:e)?IO(e):"",[e,t]},Zve=e=>Qve(e?e(0,null):null)[0],n_=Promise.resolve(),exe=e=>(t,n,r)=>{const s=w.useRef(!1),{cache:i,initialSize:o=1,revalidateAll:a=!1,persistSize:c=!1,revalidateFirstPage:u=!0,revalidateOnMount:f=!1,parallel:h=!1}=r,[,,,p]=So.get(a$);let y;try{y=Zve(t),y&&(y=hU+y)}catch{}const[v,x,E]=Wl(i,y),N=w.useCallback(()=>vt(v()._l)?o:v()._l,[i,y,o]);i$.useSyncExternalStore(w.useCallback(R=>y?E(y,()=>{R()}):()=>{},[i,y]),N,N);const _=w.useCallback(()=>{const R=v()._l;return vt(R)?o:R},[y,o]),C=w.useRef(_());Vv(()=>{if(!s.current){s.current=!0;return}y&&x({_l:c?C.current:_()})},[y,i]);const j=f&&!s.current,A=e(y,async R=>{const B=v()._i,z=v()._r;x({_r:ir});const D=[],L=_(),[H]=Wl(i,R),M=H().data,V=[];let T=null;for(let I=0;I<L;++I){const[P,W]=Xg(t(I,h?null:T));if(!P)break;const[F,q]=Wl(i,P);let X=F().data;const Q=a||B||vt(X)||u&&!I&&!vt(M)||j||M&&!vt(M[I])&&!r.compare(M[I],X);if(n&&(typeof z=="function"?z(X,W):Q)){const se=async()=>{if(!(P in p))X=await n(W);else{const de=p[P];delete p[P],X=await de}q({data:X,_k:W}),D[I]=X};h?V.push(se):await se()}else D[I]=X;h||(T=X)}return h&&await Promise.all(V.map(I=>I())),x({_i:ir}),D},r),$=w.useCallback(function(R,B){const z=typeof B=="boolean"?{revalidate:B}:B||{},D=z.revalidate!==!1;return y?(D&&(vt(R)?x({_i:!0,_r:z.revalidate}):x({_i:!1,_r:z.revalidate})),arguments.length?A.mutate(R,{...z,revalidate:D}):A.mutate()):n_},[y,i]),k=w.useCallback(R=>{if(!y)return n_;const[,B]=Wl(i,y);let z;if(Li(R)?z=R(_()):typeof R=="number"&&(z=R),typeof z!="number")return n_;B({_l:z}),C.current=z;const D=[],[L]=Wl(i,y);let H=null;for(let M=0;M<z;++M){const[V]=Xg(t(M,H)),[T]=Wl(i,V),I=V?T().data:ir;if(vt(I))return $(L().data);D.push(I),H=I}return $(D)},[y,i,$,_]);return{size:_(),setSize:k,mutate:$,get data(){return A.data},get error(){return A.error},get isValidating(){return A.isValidating},get isLoading(){return A.isLoading}}},txe=Wve(c$,exe),Y1=(e,t)=>{const n=Fo(),r=e(n),s=(t==null?void 0:t.refine)??(c=>c),i=()=>r.execute().then(s),o=r.key();return{...c$((t==null?void 0:t.enabled)===!1?null:o,i,t),promise:r,key:o,api:n}},nxe=(e,t)=>{const[n,r]=w.useState(!1),s=Fo(),i=u=>e(s,u),o=(t==null?void 0:t.refine)??(u=>u),a=txe((u,f)=>f&&!f.length?(r(!0),null):i(u).request.url,u=>new Px(new Request(u),{fetcher:s.fetcher},o).execute(),{revalidateFirstPage:!1}),c=a.data?[].concat(...a.data):[];return{...a,_data:a.data,data:c,endReached:n,promise:i(a.size),key:i(a.size).key(),api:s}},u$=e=>{const t=gU().mutate,n=Fo();return async r=>{let s="";return typeof r=="string"?s=r:typeof r=="function"&&(s=r(n).key()),t(i=>typeof i=="string"&&i.startsWith(s))}};class Zb extends Error{constructor(t,n){let r=n;"error"in t&&(r=t.error,n&&(r=`${n}: ${r}`)),super(r??"UseEntityApiError"),this.response=t}}const rxe=(e,t)=>{const n=Fo().data;return{create:async r=>{const s=await n.createOne(e,r);if(!s.ok)throw new Zb(s,`Failed to create entity "${e}"`);return s},read:async r=>{const s=t?await n.readOne(e,t,r):await n.readMany(e,r);if(!s.ok)throw new Zb(s,`Failed to read entity "${e}"`);return s},update:async(r,s=t)=>{if(!s)throw new Error("id is required");const i=await n.updateOne(e,s,r);if(!i.ok)throw new Zb(i,`Failed to update entity "${e}"`);return i},_delete:async(r=t)=>{if(!r)throw new Error("id is required");const s=await n.deleteOne(e,r);if(!s.ok)throw new Zb(s,`Failed to delete entity "${e}"`);return s}}};function PO(e,t,n,r){var s,i;return"/"+[...((i=(s=e.options)==null?void 0:s.basepath)==null?void 0:i.split("/"))??[],t,...n?[n]:[]].filter(Boolean).join("/")+(r?"?"+y1(r):"")}const J1=(e,t,n,r)=>{const s=Fo().data,i=PO(s,e,t,n),{read:o,...a}=rxe(e,t),c=()=>o(n??{}),u=c$((r==null?void 0:r.enabled)===!1?null:i,c,{revalidateOnFocus:!1,keepPreviousData:!0,...r}),f=async p=>{const y=PO(s,e,p);return l$(v=>typeof v=="string"&&v.startsWith(y),void 0,{revalidate:!0})},h=p1(a,p=>async(...y)=>{const v=await p(...y);return(r==null?void 0:r.revalidateOnMutate)!==!1&&await f(),v});return{...u,...h,mutate:f,mutateRaw:u.mutate,api:s,key:i}};async function sxe(e,t,n,r){function s(o,a){return typeof o<"u"&&typeof a<"u"&&"id"in o&&o.id===n?{...o,...a}:o}const i=PO(e,t);return l$(o=>typeof o=="string"&&o.startsWith(i),async o=>{if(!(typeof o>"u"))return Array.isArray(o)?o.map(a=>s(a,r)):s(o,r)},{revalidate:!1})}const ixe=(e,t,n)=>{const{data:r,...s}=J1(e,t,void 0,{...n,enabled:!1});return{...s,mutate:(o,a)=>sxe(s.api,e,o,a)}},yU=e=>{const t=Fo(e==null?void 0:e.baseUrl),n=u$(),{authState:r}=oU(),s=(r==null?void 0:r.verified)??!1;async function i(f){return(await t.auth.login("password",f)).data}async function o(f){return(await t.auth.register("password",f)).data}function a(f){t.updateToken(f)}async function c(){t.updateToken(void 0),n()}async function u(){await t.verifyAuth()}return{data:r,user:r==null?void 0:r.user,token:r==null?void 0:r.token,verified:s,login:i,register:o,logout:c,setToken:a,verify:u}};function oxe({api:e,setSchema:t,reloadSchema:n}){async function r(s,i,o,a){const c={id:"schema-"+[s,i,a].join("-"),position:"top-right",autoClose:3e3};return o.success?(console.log("update config",s,i,a,o.body),o.body.success&&t(u=>u&&{...u,config:{...u.config,[i]:o.config}}),si.show({...c,title:`Config updated: ${ci(i)}`,color:"blue",message:`Operation ${s.toUpperCase()} at ${i}${a?"."+a:""}`})):si.show({...c,title:`Config Update failed: ${ci(i)}${a?"."+a:""}`,color:"red",withCloseButton:!0,autoClose:!1,message:o.error??"Failed to complete config update"}),o.success}return{reload:n,set:async(s,i,o)=>{const a=await e.system.setConfig(s,i,o);return await r("set",s,a)},patch:async(s,i,o)=>{const a=await e.system.patchConfig(s,i,o);return await r("patch",s,a,i)},overwrite:async(s,i,o)=>{const a=await e.system.overwriteConfig(s,i,o);return await r("overwrite",s,a,i)},add:async(s,i,o)=>{const a=await e.system.addConfig(s,i,o);return await r("add",s,a,i)},remove:async(s,i)=>{const o=await e.system.removeConfig(s,i);return await r("remove",s,o,i)}}}class axe{constructor(t,n={}){K(this,"_entities",[]);K(this,"_relations",[]);K(this,"_flows",[]);this.appJson=t,this._options=n,this._entities=Object.entries(this.appJson.data.entities??{}).map(([r,s])=>XT(r,s)),this._relations=Object.entries(this.appJson.data.relations??{}).map(([,r])=>LV(r,this.entity.bind(this)));for(const[r,s]of Object.entries(this.appJson.flows.flows??{})){const i=Ky.fromObject(r,s,qV);this._flows.push(i)}}get entities(){return this._entities}entity(t){const n=typeof t=="string"?t:t.name,r=this._entities.find(s=>s.name===n);if(!r)throw new Error(`Entity "${n}" not found`);return r}get relations(){return new AB(this._relations)}get flows(){return this._flows}get config(){return this.appJson}get options(){return{basepath:"",logo_return_path:"/",...this._options}}getSettingsPath(t=[]){return[`~/${this.options.basepath}/settings`.replace(/\/+/g,"/"),...t].join("/")}getAbsolutePath(t){const{basepath:n}=this.options;return(t?`~/${n}/${t}`:`~/${n}`).replace(/\/+/g,"/")}getAuthConfig(){return this.appJson.auth}}/**
 * @license @tabler/icons-react v3.18.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var lxe={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.18.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=(e,t,n,r)=>{const s=w.forwardRef(({color:i="currentColor",size:o=24,stroke:a=2,title:c,className:u,children:f,...h},p)=>w.createElement("svg",{ref:p,...lxe[e],width:o,height:o,className:["tabler-icon",`tabler-icon-${t}`,u].join(" "),...e==="filled"?{fill:i}:{strokeWidth:a,stroke:i},...h},[c&&w.createElement("title",{key:"svg-title"},c),...r.map(([y,v])=>w.createElement(y,v)),...Array.isArray(f)?f:[f]]));return s.displayName=`${n}`,s};/**
 * @license @tabler/icons-react v3.18.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var d$=Lt("outline","align-justified","IconAlignJustified",[["path",{d:"M4 6l16 0",key:"svg-0"}],["path",{d:"M4 12l16 0",key:"svg-1"}],["path",{d:"M4 18l12 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.18.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var cxe=Lt("outline","api","IconApi",[["path",{d:"M4 13h5",key:"svg-0"}],["path",{d:"M12 16v-8h3a2 2 0 0 1 2 2v1a2 2 0 0 1 -2 2h-3",key:"svg-1"}],["path",{d:"M20 8v8",key:"svg-2"}],["path",{d:"M9 16v-5.5a2.5 2.5 0 0 0 -5 0v5.5",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.18.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var uxe=Lt("outline","bolt","IconBolt",[["path",{d:"M13 3l0 7l6 0l-8 11l0 -7l-6 0l8 -11",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.18.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var dxe=Lt("outline","book","IconBook",[["path",{d:"M3 19a9 9 0 0 1 9 0a9 9 0 0 1 9 0",key:"svg-0"}],["path",{d:"M3 6a9 9 0 0 1 9 0a9 9 0 0 1 9 0",key:"svg-1"}],["path",{d:"M3 6l0 13",key:"svg-2"}],["path",{d:"M12 6l0 13",key:"svg-3"}],["path",{d:"M21 6l0 13",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.18.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var fxe=Lt("outline","box","IconBox",[["path",{d:"M12 3l8 4.5l0 9l-8 4.5l-8 -4.5l0 -9l8 -4.5",key:"svg-0"}],["path",{d:"M12 12l8 -4.5",key:"svg-1"}],["path",{d:"M12 12l0 9",key:"svg-2"}],["path",{d:"M12 12l-8 -4.5",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.18.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var hxe=Lt("outline","brand-aws","IconBrandAws",[["path",{d:"M17 18.5a15.198 15.198 0 0 1 -7.37 1.44a14.62 14.62 0 0 1 -6.63 -2.94",key:"svg-0"}],["path",{d:"M19.5 21c.907 -1.411 1.451 -3.323 1.5 -5c-1.197 -.773 -2.577 -.935 -4 -1",key:"svg-1"}],["path",{d:"M3 11v-4.5a1.5 1.5 0 0 1 3 0v4.5",key:"svg-2"}],["path",{d:"M3 9h3",key:"svg-3"}],["path",{d:"M9 5l1.2 6l1.8 -4l1.8 4l1.2 -6",key:"svg-4"}],["path",{d:"M18 10.25c0 .414 .336 .75 .75 .75h1.25a1 1 0 0 0 1 -1v-1a1 1 0 0 0 -1 -1h-1a1 1 0 0 1 -1 -1v-1a1 1 0 0 1 1 -1h1.25a.75 .75 0 0 1 .75 .75",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.18.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var mxe=Lt("outline","brand-cloudflare","IconBrandCloudflare",[["path",{d:"M13.031 7.007c2.469 -.007 3.295 1.293 3.969 2.993c4 0 4.994 3.825 5 6h-20c-.001 -1.64 1.36 -2.954 3 -3c0 -1.5 1 -3 3 -3c.66 -1.942 2.562 -2.986 5.031 -2.993z",key:"svg-0"}],["path",{d:"M12 13h6",key:"svg-1"}],["path",{d:"M17 10l-2.5 6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.18.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var bU=Lt("outline","bug","IconBug",[["path",{d:"M9 9v-1a3 3 0 0 1 6 0v1",key:"svg-0"}],["path",{d:"M8 9h8a6 6 0 0 1 1 3v3a5 5 0 0 1 -10 0v-3a6 6 0 0 1 1 -3",key:"svg-1"}],["path",{d:"M3 13l4 0",key:"svg-2"}],["path",{d:"M17 13l4 0",key:"svg-3"}],["path",{d:"M12 20l0 -6",key:"svg-4"}],["path",{d:"M4 19l3.35 -2",key:"svg-5"}],["path",{d:"M20 19l-3.35 -2",key:"svg-6"}],["path",{d:"M4 7l3.75 2.4",key:"svg-7"}],["path",{d:"M20 7l-3.75 2.4",key:"svg-8"}]]);/**
 * @license @tabler/icons-react v3.18.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var pxe=Lt("outline","chevron-down","IconChevronDown",[["path",{d:"M6 9l6 6l6 -6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.18.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var gxe=Lt("outline","chevron-up","IconChevronUp",[["path",{d:"M6 15l6 -6l6 6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.18.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var f$=Lt("outline","circles-relation","IconCirclesRelation",[["path",{d:"M9.183 6.117a6 6 0 1 0 4.511 3.986",key:"svg-0"}],["path",{d:"M14.813 17.883a6 6 0 1 0 -4.496 -3.954",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.18.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var yxe=Lt("outline","cloud","IconCloud",[["path",{d:"M6.657 18c-2.572 0 -4.657 -2.007 -4.657 -4.483c0 -2.475 2.085 -4.482 4.657 -4.482c.393 -1.762 1.794 -3.2 3.675 -3.773c1.88 -.572 3.956 -.193 5.444 1c1.488 1.19 2.162 3.007 1.77 4.769h.99c1.913 0 3.464 1.56 3.464 3.486c0 1.927 -1.551 3.487 -3.465 3.487h-11.878",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.18.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var od=Lt("outline","database","IconDatabase",[["path",{d:"M12 6m-8 0a8 3 0 1 0 16 0a8 3 0 1 0 -16 0",key:"svg-0"}],["path",{d:"M4 6v6a8 3 0 0 0 16 0v-6",key:"svg-1"}],["path",{d:"M4 12v6a8 3 0 0 0 16 0v-6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.18.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var bxe=Lt("outline","external-link","IconExternalLink",[["path",{d:"M12 6h-6a2 2 0 0 0 -2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-6",key:"svg-0"}],["path",{d:"M11 13l9 -9",key:"svg-1"}],["path",{d:"M15 4h5v5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.18.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var vxe=Lt("outline","grip-vertical","IconGripVertical",[["path",{d:"M9 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M9 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M9 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}],["path",{d:"M15 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-3"}],["path",{d:"M15 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-4"}],["path",{d:"M15 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.18.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var xxe=Lt("outline","hierarchy-2","IconHierarchy2",[["path",{d:"M10 3h4v4h-4z",key:"svg-0"}],["path",{d:"M3 17h4v4h-4z",key:"svg-1"}],["path",{d:"M17 17h4v4h-4z",key:"svg-2"}],["path",{d:"M7 17l5 -4l5 4",key:"svg-3"}],["path",{d:"M12 7l0 6",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.18.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var wxe=Lt("outline","home","IconHome",[["path",{d:"M5 12l-2 0l9 -9l9 9l-2 0",key:"svg-0"}],["path",{d:"M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7",key:"svg-1"}],["path",{d:"M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.18.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Sxe=Lt("outline","info-circle","IconInfoCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.18.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Exe=Lt("outline","key-off","IconKeyOff",[["path",{d:"M10.17 6.159l2.316 -2.316a2.877 2.877 0 0 1 4.069 0l3.602 3.602a2.877 2.877 0 0 1 0 4.069l-2.33 2.33",key:"svg-0"}],["path",{d:"M14.931 14.948a2.863 2.863 0 0 1 -1.486 -.79l-.301 -.302l-6.558 6.558a2 2 0 0 1 -1.239 .578l-.175 .008h-1.172a1 1 0 0 1 -.993 -.883l-.007 -.117v-1.172a2 2 0 0 1 .467 -1.284l.119 -.13l.414 -.414h2v-2h2v-2l2.144 -2.144l-.301 -.301a2.863 2.863 0 0 1 -.794 -1.504",key:"svg-1"}],["path",{d:"M15 9h.01",key:"svg-2"}],["path",{d:"M3 3l18 18",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.18.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Nxe=Lt("outline","library-plus","IconLibraryPlus",[["path",{d:"M7 3m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z",key:"svg-0"}],["path",{d:"M4.012 7.26a2.005 2.005 0 0 0 -1.012 1.737v10c0 1.1 .9 2 2 2h10c.75 0 1.158 -.385 1.5 -1",key:"svg-1"}],["path",{d:"M11 10h6",key:"svg-2"}],["path",{d:"M14 7v6",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.18.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var _xe=Lt("outline","lock-access-off","IconLockAccessOff",[["path",{d:"M4 8v-2c0 -.554 .225 -1.055 .588 -1.417",key:"svg-0"}],["path",{d:"M4 16v2a2 2 0 0 0 2 2h2",key:"svg-1"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v2",key:"svg-2"}],["path",{d:"M16 20h2c.55 0 1.05 -.222 1.41 -.582",key:"svg-3"}],["path",{d:"M15 11a1 1 0 0 1 1 1m-.29 3.704a1 1 0 0 1 -.71 .296h-6a1 1 0 0 1 -1 -1v-3a1 1 0 0 1 1 -1h2",key:"svg-4"}],["path",{d:"M10 11v-1m1.182 -2.826a2 2 0 0 1 2.818 1.826v1",key:"svg-5"}],["path",{d:"M3 3l18 18",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.18.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Cxe=Lt("outline","minus","IconMinus",[["path",{d:"M5 12l14 0",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.18.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var vU=Lt("outline","photo","IconPhoto",[["path",{d:"M15 8h.01",key:"svg-0"}],["path",{d:"M3 6a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v12a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3v-12z",key:"svg-1"}],["path",{d:"M3 16l5 -5c.928 -.893 2.072 -.893 3 0l5 5",key:"svg-2"}],["path",{d:"M14 14l1 -1c.928 -.893 2.072 -.893 3 0l3 3",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.18.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var h$=Lt("outline","plus","IconPlus",[["path",{d:"M12 5l0 14",key:"svg-0"}],["path",{d:"M5 12l14 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.18.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Oxe=Lt("outline","refresh","IconRefresh",[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.18.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var jxe=Lt("outline","server","IconServer",[["path",{d:"M3 4m0 3a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v2a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3z",key:"svg-0"}],["path",{d:"M3 12m0 3a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v2a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3z",key:"svg-1"}],["path",{d:"M7 8l0 .01",key:"svg-2"}],["path",{d:"M7 16l0 .01",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.18.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Kg=Lt("outline","settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.18.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Axe=Lt("outline","switch-horizontal","IconSwitchHorizontal",[["path",{d:"M16 3l4 4l-4 4",key:"svg-0"}],["path",{d:"M10 7l10 0",key:"svg-1"}],["path",{d:"M8 13l-4 4l4 4",key:"svg-2"}],["path",{d:"M4 17l9 0",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.18.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var xU=Lt("outline","trash","IconTrash",[["path",{d:"M4 7l16 0",key:"svg-0"}],["path",{d:"M10 11l0 6",key:"svg-1"}],["path",{d:"M14 11l0 6",key:"svg-2"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-3"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.18.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Txe=Lt("outline","user","IconUser",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.18.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var wU=Lt("outline","world","IconWorld",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M3.6 9h16.8",key:"svg-1"}],["path",{d:"M3.6 15h16.8",key:"svg-2"}],["path",{d:"M11.5 3a17 17 0 0 0 0 18",key:"svg-3"}],["path",{d:"M12.5 3a17 17 0 0 1 0 18",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.18.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var $xe=Lt("filled","bolt-filled","IconBoltFilled",[["path",{d:"M13 2l.018 .001l.016 .001l.083 .005l.011 .002h.011l.038 .009l.052 .008l.016 .006l.011 .001l.029 .011l.052 .014l.019 .009l.015 .004l.028 .014l.04 .017l.021 .012l.022 .01l.023 .015l.031 .017l.034 .024l.018 .011l.013 .012l.024 .017l.038 .034l.022 .017l.008 .01l.014 .012l.036 .041l.026 .027l.006 .009c.12 .147 .196 .322 .218 .513l.001 .012l.002 .041l.004 .064v6h5a1 1 0 0 1 .868 1.497l-.06 .091l-8 11c-.568 .783 -1.808 .38 -1.808 -.588v-6h-5a1 1 0 0 1 -.868 -1.497l.06 -.091l8 -11l.01 -.013l.018 -.024l.033 -.038l.018 -.022l.009 -.008l.013 -.014l.04 -.036l.028 -.026l.008 -.006a1 1 0 0 1 .402 -.199l.011 -.001l.027 -.005l.074 -.013l.011 -.001l.041 -.002z",key:"svg-0"}]]);const m$="-",Rxe=e=>{const t=Mxe(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:o=>{const a=o.split(m$);return a[0]===""&&a.length!==1&&a.shift(),SU(a,t)||kxe(o)},getConflictingClassGroupIds:(o,a)=>{const c=n[o]||[];return a&&r[o]?[...c,...r[o]]:c}}},SU=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),s=r?SU(e.slice(1),r):void 0;if(s)return s;if(t.validators.length===0)return;const i=e.join(m$);return(o=t.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},iP=/^\[(.+)\]$/,kxe=e=>{if(iP.test(e)){const t=iP.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},Mxe=e=>{const{theme:t,classGroups:n}=e,r={nextPart:new Map,validators:[]};for(const s in n)DO(n[s],r,s,t);return r},DO=(e,t,n,r)=>{e.forEach(s=>{if(typeof s=="string"){const i=s===""?t:oP(t,s);i.classGroupId=n;return}if(typeof s=="function"){if(Ixe(s)){DO(s(r),t,n,r);return}t.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{DO(o,oP(t,i),n,r)})})},oP=(e,t)=>{let n=e;return t.split(m$).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},Ixe=e=>e.isThemeGetter,Pxe=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),t++,t>e&&(t=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},LO="!",FO=":",Dxe=FO.length,Lxe=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=s=>{const i=[];let o=0,a=0,c=0,u;for(let v=0;v<s.length;v++){let x=s[v];if(o===0&&a===0){if(x===FO){i.push(s.slice(c,v)),c=v+Dxe;continue}if(x==="/"){u=v;continue}}x==="["?o++:x==="]"?o--:x==="("?a++:x===")"&&a--}const f=i.length===0?s:s.substring(c),h=Fxe(f),p=h!==f,y=u&&u>c?u-c:void 0;return{modifiers:i,hasImportantModifier:p,baseClassName:h,maybePostfixModifierPosition:y}};if(t){const s=t+FO,i=r;r=o=>o.startsWith(s)?i(o.substring(s.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:o,maybePostfixModifierPosition:void 0}}if(n){const s=r;r=i=>n({className:i,parseClassName:s})}return r},Fxe=e=>e.endsWith(LO)?e.substring(0,e.length-1):e.startsWith(LO)?e.substring(1):e,Bxe=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const s=[];let i=[];return r.forEach(o=>{o[0]==="["||t[o]?(s.push(...i.sort(),o),i=[]):i.push(o)}),s.push(...i.sort()),s}},zxe=e=>({cache:Pxe(e.cacheSize),parseClassName:Lxe(e),sortModifiers:Bxe(e),...Rxe(e)}),Vxe=/\s+/,Uxe=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s,sortModifiers:i}=t,o=[],a=e.trim().split(Vxe);let c="";for(let u=a.length-1;u>=0;u-=1){const f=a[u],{isExternal:h,modifiers:p,hasImportantModifier:y,baseClassName:v,maybePostfixModifierPosition:x}=n(f);if(h){c=f+(c.length>0?" "+c:c);continue}let E=!!x,N=r(E?v.substring(0,x):v);if(!N){if(!E){c=f+(c.length>0?" "+c:c);continue}if(N=r(v),!N){c=f+(c.length>0?" "+c:c);continue}E=!1}const _=i(p).join(":"),C=y?_+LO:_,j=C+N;if(o.includes(j))continue;o.push(j);const A=s(N,E);for(let $=0;$<A.length;++$){const k=A[$];o.push(C+k)}c=f+(c.length>0?" "+c:c)}return c};function qxe(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=EU(t))&&(r&&(r+=" "),r+=n);return r}const EU=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=EU(e[r]))&&(n&&(n+=" "),n+=t);return n};function Hxe(e,...t){let n,r,s,i=o;function o(c){const u=t.reduce((f,h)=>h(f),e());return n=zxe(u),r=n.cache.get,s=n.cache.set,i=a,a(c)}function a(c){const u=r(c);if(u)return u;const f=Uxe(c,n);return s(c,f),f}return function(){return i(qxe.apply(null,arguments))}}const Yn=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},NU=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,_U=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Wxe=/^\d+\/\d+$/,Gxe=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Yxe=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Jxe=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Xxe=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Kxe=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Of=e=>Wxe.test(e),Nt=e=>!!e&&!Number.isNaN(Number(e)),Pl=e=>!!e&&Number.isInteger(Number(e)),r_=e=>e.endsWith("%")&&Nt(e.slice(0,-1)),aa=e=>Gxe.test(e),Qxe=()=>!0,Zxe=e=>Yxe.test(e)&&!Jxe.test(e),CU=()=>!1,ewe=e=>Xxe.test(e),twe=e=>Kxe.test(e),nwe=e=>!Xe(e)&&!Ke(e),rwe=e=>mm(e,AU,CU),Xe=e=>NU.test(e),fu=e=>mm(e,TU,Zxe),s_=e=>mm(e,lwe,Nt),aP=e=>mm(e,OU,CU),swe=e=>mm(e,jU,twe),ev=e=>mm(e,$U,ewe),Ke=e=>_U.test(e),Pp=e=>pm(e,TU),iwe=e=>pm(e,cwe),lP=e=>pm(e,OU),owe=e=>pm(e,AU),awe=e=>pm(e,jU),tv=e=>pm(e,$U,!0),mm=(e,t,n)=>{const r=NU.exec(e);return r?r[1]?t(r[1]):n(r[2]):!1},pm=(e,t,n=!1)=>{const r=_U.exec(e);return r?r[1]?t(r[1]):n:!1},OU=e=>e==="position"||e==="percentage",jU=e=>e==="image"||e==="url",AU=e=>e==="length"||e==="size"||e==="bg-size",TU=e=>e==="length",lwe=e=>e==="number",cwe=e=>e==="family-name",$U=e=>e==="shadow",uwe=()=>{const e=Yn("color"),t=Yn("font"),n=Yn("text"),r=Yn("font-weight"),s=Yn("tracking"),i=Yn("leading"),o=Yn("breakpoint"),a=Yn("container"),c=Yn("spacing"),u=Yn("radius"),f=Yn("shadow"),h=Yn("inset-shadow"),p=Yn("text-shadow"),y=Yn("drop-shadow"),v=Yn("blur"),x=Yn("perspective"),E=Yn("aspect"),N=Yn("ease"),_=Yn("animate"),C=()=>["auto","avoid","all","avoid-page","page","left","right","column"],j=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],A=()=>[...j(),Ke,Xe],$=()=>["auto","hidden","clip","visible","scroll"],k=()=>["auto","contain","none"],R=()=>[Ke,Xe,c],B=()=>[Of,"full","auto",...R()],z=()=>[Pl,"none","subgrid",Ke,Xe],D=()=>["auto",{span:["full",Pl,Ke,Xe]},Pl,Ke,Xe],L=()=>[Pl,"auto",Ke,Xe],H=()=>["auto","min","max","fr",Ke,Xe],M=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],V=()=>["start","end","center","stretch","center-safe","end-safe"],T=()=>["auto",...R()],I=()=>[Of,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...R()],P=()=>[e,Ke,Xe],W=()=>[...j(),lP,aP,{position:[Ke,Xe]}],F=()=>["no-repeat",{repeat:["","x","y","space","round"]}],q=()=>["auto","cover","contain",owe,rwe,{size:[Ke,Xe]}],X=()=>[r_,Pp,fu],Q=()=>["","none","full",u,Ke,Xe],se=()=>["",Nt,Pp,fu],ae=()=>["solid","dashed","dotted","double"],de=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ce=()=>[Nt,r_,lP,aP],fe=()=>["","none",v,Ke,Xe],ve=()=>["none",Nt,Ke,Xe],Ae=()=>["none",Nt,Ke,Xe],Ce=()=>[Nt,Ke,Xe],Ee=()=>[Of,"full",...R()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[aa],breakpoint:[aa],color:[Qxe],container:[aa],"drop-shadow":[aa],ease:["in","out","in-out"],font:[nwe],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[aa],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[aa],shadow:[aa],spacing:["px",Nt],text:[aa],"text-shadow":[aa],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Of,Xe,Ke,E]}],container:["container"],columns:[{columns:[Nt,Xe,Ke,a]}],"break-after":[{"break-after":C()}],"break-before":[{"break-before":C()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:A()}],overflow:[{overflow:$()}],"overflow-x":[{"overflow-x":$()}],"overflow-y":[{"overflow-y":$()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:B()}],"inset-x":[{"inset-x":B()}],"inset-y":[{"inset-y":B()}],start:[{start:B()}],end:[{end:B()}],top:[{top:B()}],right:[{right:B()}],bottom:[{bottom:B()}],left:[{left:B()}],visibility:["visible","invisible","collapse"],z:[{z:[Pl,"auto",Ke,Xe]}],basis:[{basis:[Of,"full","auto",a,...R()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Nt,Of,"auto","initial","none",Xe]}],grow:[{grow:["",Nt,Ke,Xe]}],shrink:[{shrink:["",Nt,Ke,Xe]}],order:[{order:[Pl,"first","last","none",Ke,Xe]}],"grid-cols":[{"grid-cols":z()}],"col-start-end":[{col:D()}],"col-start":[{"col-start":L()}],"col-end":[{"col-end":L()}],"grid-rows":[{"grid-rows":z()}],"row-start-end":[{row:D()}],"row-start":[{"row-start":L()}],"row-end":[{"row-end":L()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":H()}],"auto-rows":[{"auto-rows":H()}],gap:[{gap:R()}],"gap-x":[{"gap-x":R()}],"gap-y":[{"gap-y":R()}],"justify-content":[{justify:[...M(),"normal"]}],"justify-items":[{"justify-items":[...V(),"normal"]}],"justify-self":[{"justify-self":["auto",...V()]}],"align-content":[{content:["normal",...M()]}],"align-items":[{items:[...V(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...V(),{baseline:["","last"]}]}],"place-content":[{"place-content":M()}],"place-items":[{"place-items":[...V(),"baseline"]}],"place-self":[{"place-self":["auto",...V()]}],p:[{p:R()}],px:[{px:R()}],py:[{py:R()}],ps:[{ps:R()}],pe:[{pe:R()}],pt:[{pt:R()}],pr:[{pr:R()}],pb:[{pb:R()}],pl:[{pl:R()}],m:[{m:T()}],mx:[{mx:T()}],my:[{my:T()}],ms:[{ms:T()}],me:[{me:T()}],mt:[{mt:T()}],mr:[{mr:T()}],mb:[{mb:T()}],ml:[{ml:T()}],"space-x":[{"space-x":R()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":R()}],"space-y-reverse":["space-y-reverse"],size:[{size:I()}],w:[{w:[a,"screen",...I()]}],"min-w":[{"min-w":[a,"screen","none",...I()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[o]},...I()]}],h:[{h:["screen","lh",...I()]}],"min-h":[{"min-h":["screen","lh","none",...I()]}],"max-h":[{"max-h":["screen","lh",...I()]}],"font-size":[{text:["base",n,Pp,fu]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Ke,s_]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",r_,Xe]}],"font-family":[{font:[iwe,Xe,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,Ke,Xe]}],"line-clamp":[{"line-clamp":[Nt,"none",Ke,s_]}],leading:[{leading:[i,...R()]}],"list-image":[{"list-image":["none",Ke,Xe]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Ke,Xe]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:P()}],"text-color":[{text:P()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ae(),"wavy"]}],"text-decoration-thickness":[{decoration:[Nt,"from-font","auto",Ke,fu]}],"text-decoration-color":[{decoration:P()}],"underline-offset":[{"underline-offset":[Nt,"auto",Ke,Xe]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:R()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ke,Xe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ke,Xe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:W()}],"bg-repeat":[{bg:F()}],"bg-size":[{bg:q()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Pl,Ke,Xe],radial:["",Ke,Xe],conic:[Pl,Ke,Xe]},awe,swe]}],"bg-color":[{bg:P()}],"gradient-from-pos":[{from:X()}],"gradient-via-pos":[{via:X()}],"gradient-to-pos":[{to:X()}],"gradient-from":[{from:P()}],"gradient-via":[{via:P()}],"gradient-to":[{to:P()}],rounded:[{rounded:Q()}],"rounded-s":[{"rounded-s":Q()}],"rounded-e":[{"rounded-e":Q()}],"rounded-t":[{"rounded-t":Q()}],"rounded-r":[{"rounded-r":Q()}],"rounded-b":[{"rounded-b":Q()}],"rounded-l":[{"rounded-l":Q()}],"rounded-ss":[{"rounded-ss":Q()}],"rounded-se":[{"rounded-se":Q()}],"rounded-ee":[{"rounded-ee":Q()}],"rounded-es":[{"rounded-es":Q()}],"rounded-tl":[{"rounded-tl":Q()}],"rounded-tr":[{"rounded-tr":Q()}],"rounded-br":[{"rounded-br":Q()}],"rounded-bl":[{"rounded-bl":Q()}],"border-w":[{border:se()}],"border-w-x":[{"border-x":se()}],"border-w-y":[{"border-y":se()}],"border-w-s":[{"border-s":se()}],"border-w-e":[{"border-e":se()}],"border-w-t":[{"border-t":se()}],"border-w-r":[{"border-r":se()}],"border-w-b":[{"border-b":se()}],"border-w-l":[{"border-l":se()}],"divide-x":[{"divide-x":se()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":se()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ae(),"hidden","none"]}],"divide-style":[{divide:[...ae(),"hidden","none"]}],"border-color":[{border:P()}],"border-color-x":[{"border-x":P()}],"border-color-y":[{"border-y":P()}],"border-color-s":[{"border-s":P()}],"border-color-e":[{"border-e":P()}],"border-color-t":[{"border-t":P()}],"border-color-r":[{"border-r":P()}],"border-color-b":[{"border-b":P()}],"border-color-l":[{"border-l":P()}],"divide-color":[{divide:P()}],"outline-style":[{outline:[...ae(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Nt,Ke,Xe]}],"outline-w":[{outline:["",Nt,Pp,fu]}],"outline-color":[{outline:P()}],shadow:[{shadow:["","none",f,tv,ev]}],"shadow-color":[{shadow:P()}],"inset-shadow":[{"inset-shadow":["none",h,tv,ev]}],"inset-shadow-color":[{"inset-shadow":P()}],"ring-w":[{ring:se()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:P()}],"ring-offset-w":[{"ring-offset":[Nt,fu]}],"ring-offset-color":[{"ring-offset":P()}],"inset-ring-w":[{"inset-ring":se()}],"inset-ring-color":[{"inset-ring":P()}],"text-shadow":[{"text-shadow":["none",p,tv,ev]}],"text-shadow-color":[{"text-shadow":P()}],opacity:[{opacity:[Nt,Ke,Xe]}],"mix-blend":[{"mix-blend":[...de(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":de()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Nt]}],"mask-image-linear-from-pos":[{"mask-linear-from":ce()}],"mask-image-linear-to-pos":[{"mask-linear-to":ce()}],"mask-image-linear-from-color":[{"mask-linear-from":P()}],"mask-image-linear-to-color":[{"mask-linear-to":P()}],"mask-image-t-from-pos":[{"mask-t-from":ce()}],"mask-image-t-to-pos":[{"mask-t-to":ce()}],"mask-image-t-from-color":[{"mask-t-from":P()}],"mask-image-t-to-color":[{"mask-t-to":P()}],"mask-image-r-from-pos":[{"mask-r-from":ce()}],"mask-image-r-to-pos":[{"mask-r-to":ce()}],"mask-image-r-from-color":[{"mask-r-from":P()}],"mask-image-r-to-color":[{"mask-r-to":P()}],"mask-image-b-from-pos":[{"mask-b-from":ce()}],"mask-image-b-to-pos":[{"mask-b-to":ce()}],"mask-image-b-from-color":[{"mask-b-from":P()}],"mask-image-b-to-color":[{"mask-b-to":P()}],"mask-image-l-from-pos":[{"mask-l-from":ce()}],"mask-image-l-to-pos":[{"mask-l-to":ce()}],"mask-image-l-from-color":[{"mask-l-from":P()}],"mask-image-l-to-color":[{"mask-l-to":P()}],"mask-image-x-from-pos":[{"mask-x-from":ce()}],"mask-image-x-to-pos":[{"mask-x-to":ce()}],"mask-image-x-from-color":[{"mask-x-from":P()}],"mask-image-x-to-color":[{"mask-x-to":P()}],"mask-image-y-from-pos":[{"mask-y-from":ce()}],"mask-image-y-to-pos":[{"mask-y-to":ce()}],"mask-image-y-from-color":[{"mask-y-from":P()}],"mask-image-y-to-color":[{"mask-y-to":P()}],"mask-image-radial":[{"mask-radial":[Ke,Xe]}],"mask-image-radial-from-pos":[{"mask-radial-from":ce()}],"mask-image-radial-to-pos":[{"mask-radial-to":ce()}],"mask-image-radial-from-color":[{"mask-radial-from":P()}],"mask-image-radial-to-color":[{"mask-radial-to":P()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":j()}],"mask-image-conic-pos":[{"mask-conic":[Nt]}],"mask-image-conic-from-pos":[{"mask-conic-from":ce()}],"mask-image-conic-to-pos":[{"mask-conic-to":ce()}],"mask-image-conic-from-color":[{"mask-conic-from":P()}],"mask-image-conic-to-color":[{"mask-conic-to":P()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:W()}],"mask-repeat":[{mask:F()}],"mask-size":[{mask:q()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Ke,Xe]}],filter:[{filter:["","none",Ke,Xe]}],blur:[{blur:fe()}],brightness:[{brightness:[Nt,Ke,Xe]}],contrast:[{contrast:[Nt,Ke,Xe]}],"drop-shadow":[{"drop-shadow":["","none",y,tv,ev]}],"drop-shadow-color":[{"drop-shadow":P()}],grayscale:[{grayscale:["",Nt,Ke,Xe]}],"hue-rotate":[{"hue-rotate":[Nt,Ke,Xe]}],invert:[{invert:["",Nt,Ke,Xe]}],saturate:[{saturate:[Nt,Ke,Xe]}],sepia:[{sepia:["",Nt,Ke,Xe]}],"backdrop-filter":[{"backdrop-filter":["","none",Ke,Xe]}],"backdrop-blur":[{"backdrop-blur":fe()}],"backdrop-brightness":[{"backdrop-brightness":[Nt,Ke,Xe]}],"backdrop-contrast":[{"backdrop-contrast":[Nt,Ke,Xe]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Nt,Ke,Xe]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Nt,Ke,Xe]}],"backdrop-invert":[{"backdrop-invert":["",Nt,Ke,Xe]}],"backdrop-opacity":[{"backdrop-opacity":[Nt,Ke,Xe]}],"backdrop-saturate":[{"backdrop-saturate":[Nt,Ke,Xe]}],"backdrop-sepia":[{"backdrop-sepia":["",Nt,Ke,Xe]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":R()}],"border-spacing-x":[{"border-spacing-x":R()}],"border-spacing-y":[{"border-spacing-y":R()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Ke,Xe]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Nt,"initial",Ke,Xe]}],ease:[{ease:["linear","initial",N,Ke,Xe]}],delay:[{delay:[Nt,Ke,Xe]}],animate:[{animate:["none",_,Ke,Xe]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[x,Ke,Xe]}],"perspective-origin":[{"perspective-origin":A()}],rotate:[{rotate:ve()}],"rotate-x":[{"rotate-x":ve()}],"rotate-y":[{"rotate-y":ve()}],"rotate-z":[{"rotate-z":ve()}],scale:[{scale:Ae()}],"scale-x":[{"scale-x":Ae()}],"scale-y":[{"scale-y":Ae()}],"scale-z":[{"scale-z":Ae()}],"scale-3d":["scale-3d"],skew:[{skew:Ce()}],"skew-x":[{"skew-x":Ce()}],"skew-y":[{"skew-y":Ce()}],transform:[{transform:[Ke,Xe,"","none","gpu","cpu"]}],"transform-origin":[{origin:A()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Ee()}],"translate-x":[{"translate-x":Ee()}],"translate-y":[{"translate-y":Ee()}],"translate-z":[{"translate-z":Ee()}],"translate-none":["translate-none"],accent:[{accent:P()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:P()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ke,Xe]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":R()}],"scroll-mx":[{"scroll-mx":R()}],"scroll-my":[{"scroll-my":R()}],"scroll-ms":[{"scroll-ms":R()}],"scroll-me":[{"scroll-me":R()}],"scroll-mt":[{"scroll-mt":R()}],"scroll-mr":[{"scroll-mr":R()}],"scroll-mb":[{"scroll-mb":R()}],"scroll-ml":[{"scroll-ml":R()}],"scroll-p":[{"scroll-p":R()}],"scroll-px":[{"scroll-px":R()}],"scroll-py":[{"scroll-py":R()}],"scroll-ps":[{"scroll-ps":R()}],"scroll-pe":[{"scroll-pe":R()}],"scroll-pt":[{"scroll-pt":R()}],"scroll-pr":[{"scroll-pr":R()}],"scroll-pb":[{"scroll-pb":R()}],"scroll-pl":[{"scroll-pl":R()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ke,Xe]}],fill:[{fill:["none",...P()]}],"stroke-w":[{stroke:[Nt,Pp,fu,s_]}],stroke:[{stroke:["none",...P()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},qe=Hxe(uwe);function dwe(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var n,r,s,i,o=[],a="",c=e.split("/");for(c[0]||c.shift();s=c.shift();)n=s[0],n==="*"?(o.push(n),a+=s[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(r=s.indexOf("?",1),i=s.indexOf(".",1),o.push(s.substring(1,~r?r:~i?i:s.length)),a+=~r&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(a+=(~r?"?":"")+"\\"+s.substring(i))):a+="/"+s;return{keys:o,pattern:new RegExp("^"+a+(t?"(?=$|/)":"/?$"),"i")}}const fwe=z8.useInsertionEffect,hwe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",mwe=hwe?w.useLayoutEffect:w.useEffect,pwe=fwe||mwe,RU=e=>{const t=w.useRef([e,(...n)=>t[0](...n)]).current;return pwe(()=>{t[0]=e}),t[1]},gwe="popstate",p$="pushState",g$="replaceState",ywe="hashchange",cP=[gwe,p$,g$,ywe],bwe=e=>{for(const t of cP)addEventListener(t,e);return()=>{for(const t of cP)removeEventListener(t,e)}},kU=(e,t)=>i$.useSyncExternalStore(bwe,e,t),vwe=()=>location.search,xwe=({ssrSearch:e=""}={})=>kU(vwe,()=>e),uP=()=>location.pathname,wwe=({ssrPath:e}={})=>kU(uP,e?()=>e:uP),Swe=(e,{replace:t=!1,state:n=null}={})=>history[t?g$:p$](n,"",e),Ewe=(e={})=>[wwe(e),Swe],dP=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[dP]>"u"){for(const e of[p$,g$]){const t=history[e];history[e]=function(){const n=t.apply(this,arguments),r=new Event(e);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,dP,{value:!0})}const Nwe=(e,t)=>t.toLowerCase().indexOf(e.toLowerCase())?"~"+t:t.slice(e.length)||"/",MU=(e="")=>e==="/"?"":e,_we=(e,t)=>e[0]==="~"?e.slice(1):MU(t)+e,Cwe=(e="",t)=>Nwe(BO(MU(e)),BO(t)),Owe=e=>e[0]==="?"?e.slice(1):e,BO=e=>{try{return decodeURI(e)}catch{return e}},jwe=e=>BO(Owe(e)),IU={hook:Ewe,searchHook:xwe,parser:dwe,base:"",ssrPath:void 0,ssrSearch:void 0,ssrContext:void 0,hrefs:e=>e},PU=w.createContext(IU),Fc=()=>w.useContext(PU),DU={},LU=w.createContext(DU),y$=()=>w.useContext(LU),X1=e=>{const[t,n]=e.hook(e);return[Cwe(e.base,t),RU((r,s)=>n(_we(r,e.base),s))]},vi=()=>X1(Fc()),Awe=()=>{const e=Fc();return jwe(e.searchHook(e))},FU=(e,t,n,r)=>{const{pattern:s,keys:i}=t instanceof RegExp?{keys:!1,pattern:t}:e(t||"*",r),o=s.exec(n)||[],[a,...c]=o;return a!==void 0?[!0,(()=>{const u=i!==!1?Object.fromEntries(i.map((h,p)=>[h,c[p]])):o.groups;let f={...c};return u&&Object.assign(f,u),f})(),...r?[a]:[]]:[!1,null]},BU=({children:e,...t})=>{var f,h;const n=Fc(),r=t.hook?IU:n;let s=r;const[i,o]=((f=t.ssrPath)==null?void 0:f.split("?"))??[];o&&(t.ssrSearch=o,t.ssrPath=i),t.hrefs=t.hrefs??((h=t.hook)==null?void 0:h.hrefs);let a=w.useRef({}),c=a.current,u=c;for(let p in r){const y=p==="base"?r[p]+(t[p]||""):t[p]||r[p];c===u&&y!==u[p]&&(a.current=u={...u}),u[p]=y,y!==r[p]&&(s=u)}return w.createElement(PU.Provider,{value:s,children:e})},fP=({children:e,component:t},n)=>t?w.createElement(t,{params:n}):typeof e=="function"?e(n):e,Twe=e=>{let t=w.useRef(DU);const n=t.current;return t.current=Object.keys(e).length!==Object.keys(n).length||Object.entries(e).some(([r,s])=>s!==n[r])?e:n},at=({path:e,nest:t,match:n,...r})=>{const s=Fc(),[i]=X1(s),[o,a,c]=n??FU(s.parser,e,i,t),u=Twe({...y$(),...a});if(!o)return null;const f=c?w.createElement(BU,{base:c},fP(r,u)):fP(r,u);return w.createElement(LU.Provider,{value:u,children:f})},K1=w.forwardRef((e,t)=>{const n=Fc(),[r,s]=X1(n),{to:i="",href:o=i,onClick:a,asChild:c,children:u,className:f,replace:h,state:p,...y}=e,v=RU(E=>{E.ctrlKey||E.metaKey||E.altKey||E.shiftKey||E.button!==0||(a==null||a(E),E.defaultPrevented||(E.preventDefault(),s(o,e)))}),x=n.hrefs(o[0]==="~"?o.slice(1):n.base+o,n);return c&&w.isValidElement(u)?w.cloneElement(u,{onClick:v,href:x}):w.createElement("a",{...y,onClick:v,href:x,className:f!=null&&f.call?f(r===o):f,children:u,ref:t})}),zU=e=>Array.isArray(e)?e.flatMap(t=>zU(t&&t.type===w.Fragment?t.props.children:t)):[e],qa=({children:e,location:t})=>{const n=Fc(),[r]=X1(n);for(const s of zU(e)){let i=0;if(w.isValidElement(s)&&(i=FU(n.parser,s.props.path,t||r,s.props.nest))[0])return w.cloneElement(s,{match:i})}return null},Dt=e=>(Hr(),e),$we=(e="",t="")=>t.toLowerCase().indexOf(e.toLowerCase())?"~"+t:t.slice(e.length)||"/",VU=(e,t="")=>e[0]==="~"?e.slice(1):t+e,Rwe=e=>{try{return decodeURI(e)}catch{return e}},kwe=e=>{const[t,n]=e.hook(e);return[Rwe($we(e.base,t)),Dt((r,s)=>n(VU(r,e.base),s))]};function Mwe(e,t){const n=window.location.pathname;return n===e||n.endsWith(e)||n.includes(e+"/")}function In({className:e,native:t,onClick:n,...r}){const s=Fc(),[i,o]=kwe(s);function a(y,v){if(y.startsWith(v)){const x=y.replace(v,"");return x.length===0||x[0]==="/"}return!1}const c=r.href??r.to,u=s.hrefs(c[0]==="~"?c.slice(1):s.base+c,s).replace("//","/"),f=VU(i,s.base).replace("//","/"),h=u.replace(s.base,"").length<=1?u===f:a(f,u);if(t)return m.jsx("a",{className:`${h?"active ":""}${e}`,...r});const p=y=>{n==null||n(y)};return m.jsx(K1,{className:`${h?"active ":""}${e}`,...r,onClick:p})}const Iwe={small:"px-2 py-1.5 rounded-md gap-1 text-sm",default:"px-3 py-2.5 rounded-md gap-1.5",large:"px-4 py-3 rounded-md gap-2.5 text-lg"},Pwe={small:12,default:16,large:20},Dwe={default:"bg-primary/5 hover:bg-primary/10 link text-primary/70",primary:"bg-primary hover:bg-primary/80 link text-background",ghost:"bg-transparent hover:bg-primary/5 link text-primary/70",outline:"border border-primary/20 bg-transparent hover:bg-primary/5 link text-primary/80",red:"dark:bg-red-950 dark:hover:bg-red-900 bg-red-100 hover:bg-red-200 link text-primary/70",subtlered:"dark:text-red-700 text-red-700 dark:hover:bg-red-900 dark:hover:text-red-200 bg-transparent hover:bg-red-50 link"},UU=({children:e,size:t,variant:n,IconLeft:r,IconRight:s,iconSize:i=Pwe[t??"default"],iconProps:o,labelClassName:a,...c})=>({...c,className:qe("flex flex-row flex-nowrap items-center !font-semibold disabled:opacity-50 cursor-pointer disabled:cursor-not-allowed transition-[opacity,background-color,color,border-color]",Iwe[t??"default"],Dwe[n??"default"],c.className),children:m.jsxs(m.Fragment,{children:[r&&m.jsx(r,{size:i,...o}),e&&w.Children.count(e)===1?m.jsx("span",{className:qe("leading-none",a),children:e}):e,s&&m.jsx(s,{size:i,...o})]})}),st=w.forwardRef((e,t)=>m.jsx("button",{type:"button",ref:t,...UU(e)})),zO=w.forwardRef((e,t)=>m.jsx(In,{ref:t,href:"#",...UU(e)})),qn=({Icon:e=void 0,title:t=void 0,description:n="Check back later my friend.",primary:r,secondary:s,className:i,children:o})=>m.jsx("div",{className:qe("flex flex-col h-full w-full justify-center items-center",i),children:m.jsxs("div",{className:"flex flex-col gap-3 items-center max-w-80",children:[e&&m.jsx(e,{size:48,className:"opacity-50",stroke:1}),m.jsxs("div",{className:"flex flex-col gap-1",children:[t&&m.jsx("h3",{className:"text-center text-lg font-bold",children:t}),m.jsx("p",{className:"text-center text-primary/60",children:n})]}),m.jsxs("div",{className:"mt-1.5 flex flex-row gap-2",children:[s&&m.jsx(st,{variant:"default",...s}),r&&m.jsx(st,{variant:"primary",...r}),o]})]})}),Lwe=e=>m.jsx(qn,{title:"Not Found",...e}),Fwe=e=>m.jsx(qn,{title:"Not Allowed",...e}),Bwe=({what:e,...t})=>m.jsx(qn,{Icon:_xe,title:"Missing Permission",description:`You're not allowed to access ${e??"this"}.`,...t}),zwe=e=>m.jsx(qn,{title:"Not Enabled",...e}),Is={NotFound:Lwe,NotAllowed:Fwe,NotEnabled:zwe,MissingPermission:Bwe},ut={data:{root:()=>"/data",entity:{list:e=>`/entity/${e}`,create:e=>`/entity/${e}/create`,edit:(e,t)=>`/entity/${e}/edit/${t}`},schema:{root:()=>"/schema",entity:e=>`/schema/entity/${e}`}},auth:{root:()=>"/auth",users:{list:()=>"/users",edit:e=>`/users/edit/${e}`},roles:{list:()=>"/roles",edit:e=>`/roles/edit/${e}`},settings:()=>"/settings",strategies:()=>"/strategies"},flows:{root:()=>"/flows",flows:{list:()=>"/",edit:e=>`/flow/${e}`}},settings:{root:()=>"/settings",path:e=>`/settings/${e.join("/")}`}};function Vwe(e,t){const n=y1(t,{encode:!1});return`${e}?${n}`}function Uwe(){const[e]=Dn();return(t,n)=>{e(t(ut),n)}}function Dn(){const[e,t]=vi(),n=Fc(),{app:r}=dt(),s=r.options.basepath;return[(i,o)=>{(c=>{c()})(()=>{if(o){if("reload"in o){window.location.href=i;return}else if("target"in o){const f=window.location.origin+s+n.base+i;window.open(f,o.target);return}}const c=o!=null&&o.absolute?`~/${s}${i}`.replace(/\/+/g,"/"):i,u={...o==null?void 0:o.state,referrer:e};t(o!=null&&o.query?Vwe(c,o==null?void 0:o.query):c,{replace:o==null?void 0:o.replace,state:u})})},e,i=>{const o=window.history.state;o!=null&&o.referrer?t(o.referrer,{replace:!0}):i!=null&&i.fallback?t(i.fallback,{replace:!0}):window.history.back()}]}function qwe(e="/",t){const{app:n}=dt(),[r]=Dn(),s=document.referrer,i=window.history.length,o=s.length===0,a=o&&i>1||!!o;function c(){o&&i>2?window.history.back():typeof e=="string"?r(e):typeof e=="function"&&e()}return{same:o,canGoBack:a,goBack:c}}const qU=w.createContext(void 0);function Hwe({includeSecrets:e=!1,options:t,children:n,fallback:r=null}){const[s,i]=w.useState(e),[o,a]=w.useState(),[c,u]=w.useState(!1),[f,h]=w.useState(),p=w.useRef(!1),y=w.useRef(0),[v,x]=w.useState(0),E=Fo();async function N(){await _(e,{force:!0,fresh:!0})}async function _(k=!1,R){const B=s?2:1;if(y.current===B||s&&(R==null?void 0:R.force)!==!0)return;y.current=B;const z=await E.system.readSchema({config:!0,secrets:k,fresh:R==null?void 0:R.fresh});if(z.ok)f&&h(!1);else if(p.current||(p.current=!0,h(!0),c&&(o!=null&&o.schema)))return;const D=z.ok?z.body:{version:0,mode:"db",schema:hve(),config:mve(),permissions:[],fallback:!0};w.startTransition(()=>{const L=()=>{a(D),i(k),u(!0),x(H=>H+1),y.current=0};"startViewTransition"in document?document.startViewTransition(L):L()})}async function C(){s||await _(!0)}if(w.useEffect(()=>{o!=null&&o.schema||_(e)},[]),!c||!o)return r;const j=new axe(o==null?void 0:o.config,t),A=oxe({api:E,setSchema:a,reloadSchema:N}),$=s&&!f;return m.jsx(qU.Provider,{value:{...o,actions:A,requireSecrets:C,app:j,options:j.options,hasSecrets:$},children:f?m.jsx(Wwe,{}):n},v)}function Wwe(){const[e]=Dn();return m.jsx(Is.MissingPermission,{what:"the Admin UI",primary:{children:"Login",onClick:()=>e("/auth/login")}})}function dt({withSecrets:e}={}){const t=w.useContext(qU);return e&&t.requireSecrets(),t}function Q1({children:e}){const{readonly:t}=dt();return t?null:e}const Gwe={},hP=e=>{let t;const n=new Set,r=(f,h)=>{const p=typeof f=="function"?f(t):f;if(!Object.is(p,t)){const y=t;t=h??(typeof p!="object"||p===null)?p:Object.assign({},t,p),n.forEach(v=>v(t,y))}},s=()=>t,c={setState:r,getState:s,getInitialState:()=>u,subscribe:f=>(n.add(f),()=>n.delete(f)),destroy:()=>{(Gwe?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=t=e(r,s,c);return c},b$=e=>e?hP(e):hP;var i_={exports:{}},o_={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mP;function Ywe(){if(mP)return o_;mP=1;var e=Xh(),t=aU();function n(u,f){return u===f&&(u!==0||1/u===1/f)||u!==u&&f!==f}var r=typeof Object.is=="function"?Object.is:n,s=t.useSyncExternalStore,i=e.useRef,o=e.useEffect,a=e.useMemo,c=e.useDebugValue;return o_.useSyncExternalStoreWithSelector=function(u,f,h,p,y){var v=i(null);if(v.current===null){var x={hasValue:!1,value:null};v.current=x}else x=v.current;v=a(function(){function N($){if(!_){if(_=!0,C=$,$=p($),y!==void 0&&x.hasValue){var k=x.value;if(y(k,$))return j=k}return j=$}if(k=j,r(C,$))return k;var R=p($);return y!==void 0&&y(k,R)?(C=$,k):(C=$,j=R)}var _=!1,C,j,A=h===void 0?null:h;return[function(){return N(f())},A===null?void 0:function(){return N(A())}]},[f,h,p,y]);var E=s(u,v[0],v[1]);return o(function(){x.hasValue=!0,x.value=E},[E]),c(E),E},o_}var pP;function Jwe(){return pP||(pP=1,i_.exports=Ywe()),i_.exports}var HU=Jwe();const WU=eo(HU),GU={},{useDebugValue:Xwe}=je,{useSyncExternalStoreWithSelector:Kwe}=WU;let gP=!1;const Qwe=e=>e;function Br(e,t=Qwe,n){(GU?"production":void 0)!=="production"&&n&&!gP&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),gP=!0);const r=Kwe(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Xwe(r),r}const yP=e=>{(GU?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?b$(e):e,n=(r,s)=>Br(t,r,s);return Object.assign(n,t),n},Z1=e=>e?yP(e):yP,Zwe={},Zy=(e,t)=>(...n)=>Object.assign({},e,t(...n));function e1e(e,t){let n;try{n=e()}catch{return}return{getItem:s=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),a=(i=n.getItem(s))!=null?i:null;return a instanceof Promise?a.then(o):o(a)},setItem:(s,i)=>n.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>n.removeItem(s)}}const Qg=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(r){return Qg(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Qg(r)(n)}}}},t1e=(e,t)=>(n,r,s)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:E=>E,version:0,merge:(E,N)=>({...N,...E}),...t},o=!1;const a=new Set,c=new Set;let u;try{u=i.getStorage()}catch{}if(!u)return e((...E)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...E)},r,s);const f=Qg(i.serialize),h=()=>{const E=i.partialize({...r()});let N;const _=f({state:E,version:i.version}).then(C=>u.setItem(i.name,C)).catch(C=>{N=C});if(N)throw N;return _},p=s.setState;s.setState=(E,N)=>{p(E,N),h()};const y=e((...E)=>{n(...E),h()},r,s);let v;const x=()=>{var E;if(!u)return;o=!1,a.forEach(_=>_(r()));const N=((E=i.onRehydrateStorage)==null?void 0:E.call(i,r()))||void 0;return Qg(u.getItem.bind(u))(i.name).then(_=>{if(_)return i.deserialize(_)}).then(_=>{if(_)if(typeof _.version=="number"&&_.version!==i.version){if(i.migrate)return i.migrate(_.state,_.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return _.state}).then(_=>{var C;return v=i.merge(_,(C=r())!=null?C:y),n(v,!0),h()}).then(()=>{N==null||N(v,void 0),o=!0,c.forEach(_=>_(v))}).catch(_=>{N==null||N(void 0,_)})};return s.persist={setOptions:E=>{i={...i,...E},E.getStorage&&(u=E.getStorage())},clearStorage:()=>{u==null||u.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>x(),hasHydrated:()=>o,onHydrate:E=>(a.add(E),()=>{a.delete(E)}),onFinishHydration:E=>(c.add(E),()=>{c.delete(E)})},x(),v||y},n1e=(e,t)=>(n,r,s)=>{let i={storage:e1e(()=>localStorage),partialize:x=>x,version:0,merge:(x,E)=>({...E,...x}),...t},o=!1;const a=new Set,c=new Set;let u=i.storage;if(!u)return e((...x)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...x)},r,s);const f=()=>{const x=i.partialize({...r()});return u.setItem(i.name,{state:x,version:i.version})},h=s.setState;s.setState=(x,E)=>{h(x,E),f()};const p=e((...x)=>{n(...x),f()},r,s);s.getInitialState=()=>p;let y;const v=()=>{var x,E;if(!u)return;o=!1,a.forEach(_=>{var C;return _((C=r())!=null?C:p)});const N=((E=i.onRehydrateStorage)==null?void 0:E.call(i,(x=r())!=null?x:p))||void 0;return Qg(u.getItem.bind(u))(i.name).then(_=>{if(_)if(typeof _.version=="number"&&_.version!==i.version){if(i.migrate)return[!0,i.migrate(_.state,_.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,_.state];return[!1,void 0]}).then(_=>{var C;const[j,A]=_;if(y=i.merge(A,(C=r())!=null?C:p),n(y,!0),j)return f()}).then(()=>{N==null||N(y,void 0),y=r(),o=!0,c.forEach(_=>_(y))}).catch(_=>{N==null||N(void 0,_)})};return s.persist={setOptions:x=>{i={...i,...x},x.storage&&(u=x.storage)},clearStorage:()=>{u==null||u.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>v(),hasHydrated:()=>o,onHydrate:x=>(a.add(x),()=>{a.delete(x)}),onFinishHydration:x=>(c.add(x),()=>{c.delete(x)})},i.skipHydration||v(),y||p},r1e=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((Zwe?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),t1e(e,t)):n1e(e,t),YU=r1e,JU=["dark","light","system"],bP=Z1(YU(Zy({theme:null},e=>({setTheme:t=>{JU.includes(t)&&document.startViewTransition(()=>{e({theme:t})})}})),{name:"bknd-admin-theme"}));function Bc(e="system"){var a;const t=dt(),n=bP(c=>c.theme),r=bP(c=>c.setTheme),s=(a=t==null?void 0:t.options)==null?void 0:a.theme,i=typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").matches,o=s??n??e;return{theme:o==="system"?i?"dark":"light":o,value:o,themes:JU,setTheme:r,state:n,prefersDark:i,override:s}}function eS({scale:e=.2,fill:t,...n}){const r=Bc(),s=n.theme??r.theme,i=t||(s==="light"?"black":"white"),o={width:Math.round(578*e),height:Math.round(188*e)};return m.jsx("div",{style:o,children:m.jsxs("svg",{width:o.width,height:o.height,viewBox:"0 0 578 188",fill:i,xmlns:"http://www.w3.org/2000/svg",children:[m.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M41.5 34C37.0817 34 33.5 37.5817 33.5 42V146C33.5 150.418 37.0817 154 41.5 154H158.5C162.918 154 166.5 150.418 166.5 146V42C166.5 37.5817 162.918 34 158.5 34H41.5ZM123.434 113.942C124.126 111.752 124.5 109.42 124.5 107C124.5 94.2975 114.203 84 101.5 84C99.1907 84 96.9608 84.3403 94.8579 84.9736L87.2208 65.1172C90.9181 63.4922 93.5 59.7976 93.5 55.5C93.5 49.701 88.799 45 83 45C77.201 45 72.5 49.701 72.5 55.5C72.5 61.299 77.201 66 83 66C83.4453 66 83.8841 65.9723 84.3148 65.9185L92.0483 86.0256C87.1368 88.2423 83.1434 92.1335 80.7957 96.9714L65.4253 91.1648C65.4746 90.7835 65.5 90.3947 65.5 90C65.5 85.0294 61.4706 81 56.5 81C51.5294 81 47.5 85.0294 47.5 90C47.5 94.9706 51.5294 99 56.5 99C60.0181 99 63.0648 96.9814 64.5449 94.0392L79.6655 99.7514C78.9094 102.03 78.5 104.467 78.5 107C78.5 110.387 79.2321 113.603 80.5466 116.498L69.0273 123.731C67.1012 121.449 64.2199 120 61 120C55.201 120 50.5 124.701 50.5 130.5C50.5 136.299 55.201 141 61 141C66.799 141 71.5 136.299 71.5 130.5C71.5 128.997 71.1844 127.569 70.6158 126.276L81.9667 119.149C86.0275 125.664 93.2574 130 101.5 130C110.722 130 118.677 124.572 122.343 116.737L132.747 120.899C132.585 121.573 132.5 122.276 132.5 123C132.5 127.971 136.529 132 141.5 132C146.471 132 150.5 127.971 150.5 123C150.5 118.029 146.471 114 141.5 114C138.32 114 135.525 115.649 133.925 118.139L123.434 113.942Z"}),m.jsx("path",{d:"M243.9 151.5C240.4 151.5 237 151 233.7 150C230.4 149 227.4 147.65 224.7 145.95C222 144.15 219.75 142.15 217.95 139.95C216.15 137.65 215 135.3 214.5 132.9L219.3 131.1L218.25 149.7H198.15V39H219.45V89.25L215.4 87.6C216 85.2 217.15 82.9 218.85 80.7C220.55 78.4 222.7 76.4 225.3 74.7C227.9 72.9 230.75 71.5 233.85 70.5C236.95 69.5 240.15 69 243.45 69C250.35 69 256.5 70.8 261.9 74.4C267.3 77.9 271.55 82.75 274.65 88.95C277.85 95.15 279.45 102.25 279.45 110.25C279.45 118.25 277.9 125.35 274.8 131.55C271.7 137.75 267.45 142.65 262.05 146.25C256.75 149.75 250.7 151.5 243.9 151.5ZM238.8 133.35C242.8 133.35 246.25 132.4 249.15 130.5C252.15 128.5 254.5 125.8 256.2 122.4C257.9 118.9 258.75 114.85 258.75 110.25C258.75 105.75 257.9 101.75 256.2 98.25C254.6 94.75 252.3 92.05 249.3 90.15C246.3 88.25 242.8 87.3 238.8 87.3C234.8 87.3 231.3 88.25 228.3 90.15C225.3 92.05 222.95 94.75 221.25 98.25C219.55 101.75 218.7 105.75 218.7 110.25C218.7 114.85 219.55 118.9 221.25 122.4C222.95 125.8 225.3 128.5 228.3 130.5C231.3 132.4 234.8 133.35 238.8 133.35ZM308.312 126.15L302.012 108.6L339.512 70.65H367.562L308.312 126.15ZM288.062 150V39H309.362V150H288.062ZM341.762 150L313.262 114.15L328.262 102.15L367.412 150H341.762ZM371.675 150V70.65H392.075L392.675 86.85L388.475 88.65C389.575 85.05 391.525 81.8 394.325 78.9C397.225 75.9 400.675 73.5 404.675 71.7C408.675 69.9 412.875 69 417.275 69C423.275 69 428.275 70.2 432.275 72.6C436.375 75 439.425 78.65 441.425 83.55C443.525 88.35 444.575 94.3 444.575 101.4V150H423.275V103.05C423.275 99.45 422.775 96.45 421.775 94.05C420.775 91.65 419.225 89.9 417.125 88.8C415.125 87.6 412.625 87.1 409.625 87.3C407.225 87.3 404.975 87.7 402.875 88.5C400.875 89.2 399.125 90.25 397.625 91.65C396.225 93.05 395.075 94.65 394.175 96.45C393.375 98.25 392.975 100.2 392.975 102.3V150H382.475C380.175 150 378.125 150 376.325 150C374.525 150 372.975 150 371.675 150ZM488.536 151.5C481.636 151.5 475.436 149.75 469.936 146.25C464.436 142.65 460.086 137.8 456.886 131.7C453.786 125.5 452.236 118.35 452.236 110.25C452.236 102.35 453.786 95.3 456.886 89.1C460.086 82.9 464.386 78 469.786 74.4C475.286 70.8 481.536 69 488.536 69C492.236 69 495.786 69.6 499.186 70.8C502.686 71.9 505.786 73.45 508.486 75.45C511.286 77.45 513.536 79.7 515.236 82.2C516.936 84.6 517.886 87.15 518.086 89.85L512.686 90.75V39H533.986V150H513.886L512.986 131.7L517.186 132.15C516.986 134.65 516.086 137.05 514.486 139.35C512.886 141.65 510.736 143.75 508.036 145.65C505.436 147.45 502.436 148.9 499.036 150C495.736 151 492.236 151.5 488.536 151.5ZM493.336 133.8C497.336 133.8 500.836 132.8 503.836 130.8C506.836 128.8 509.186 126.05 510.886 122.55C512.586 119.05 513.436 114.95 513.436 110.25C513.436 105.65 512.586 101.6 510.886 98.1C509.186 94.5 506.836 91.75 503.836 89.85C500.836 87.85 497.336 86.85 493.336 86.85C489.336 86.85 485.836 87.85 482.836 89.85C479.936 91.75 477.636 94.5 475.936 98.1C474.336 101.6 473.536 105.65 473.536 110.25C473.536 114.95 474.336 119.05 475.936 122.55C477.636 126.05 479.936 128.8 482.836 130.8C485.836 132.8 489.336 133.8 493.336 133.8Z"})]})})}const vP=["mousedown","touchstart"];function tS(e,t,n){const r=w.useRef(null);return w.useEffect(()=>{const s=i=>{const{target:o}=i??{};if(Array.isArray(n)){const a=(o==null?void 0:o.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(o)&&o.tagName!=="HTML";n.every(u=>!!u&&!i.composedPath().includes(u))&&!a&&e()}else r.current&&!r.current.contains(o)&&e()};return(t||vP).forEach(i=>document.addEventListener(i,s)),()=>{(t||vP).forEach(i=>document.removeEventListener(i,s))}},[r,e,n]),r}function s1e({timeout:e=2e3}={}){const[t,n]=w.useState(null),[r,s]=w.useState(!1),[i,o]=w.useState(null),a=f=>{window.clearTimeout(i),o(window.setTimeout(()=>s(!1),e)),s(f)};return{copy:f=>{"clipboard"in navigator?navigator.clipboard.writeText(f).then(()=>a(!0)).catch(h=>n(h)):n(new Error("useClipboard: navigator.clipboard is not supported"))},reset:()=>{s(!1),n(null),window.clearTimeout(i)},error:t,copied:r}}const i1e=/input|select|textarea|button|object/,XU="a, input, select, textarea, button, object, [tabindex]";function o1e(e){return e.style.display==="none"}function a1e(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let n=e;for(;n&&!(n===document.body||n.nodeType===11);){if(o1e(n))return!1;n=n.parentNode}return!0}function KU(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function VO(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN(KU(e));return(i1e.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&a1e(e)}function QU(e){const t=KU(e);return(Number.isNaN(t)||t>=0)&&VO(e)}function l1e(e){return Array.from(e.querySelectorAll(XU)).filter(QU)}function c1e(e,t){const n=l1e(e);if(!n.length){t.preventDefault();return}const r=n[t.shiftKey?0:n.length-1],s=e.getRootNode();let i=r===s.activeElement||e===s.activeElement;const o=s.activeElement;if(o.tagName==="INPUT"&&o.getAttribute("type")==="radio"&&(i=n.filter(f=>f.getAttribute("type")==="radio"&&f.getAttribute("name")===o.getAttribute("name")).includes(r)),!i)return;t.preventDefault();const c=n[t.shiftKey?n.length-1:0];c&&c.focus()}function v$(e=!0){const t=w.useRef(null),n=s=>{let i=s.querySelector("[data-autofocus]");if(!i){const o=Array.from(s.querySelectorAll(XU));i=o.find(QU)||o.find(VO)||null,!i&&VO(s)&&(i=s)}i&&i.focus({preventScroll:!0})},r=w.useCallback(s=>{e&&s!==null&&t.current!==s&&(s?(setTimeout(()=>{s.getRootNode()&&n(s)}),t.current=s):t.current=null)},[e]);return w.useEffect(()=>{if(!e)return;t.current&&setTimeout(()=>n(t.current));const s=i=>{i.key==="Tab"&&t.current&&c1e(t.current,i)};return document.addEventListener("keydown",s),()=>document.removeEventListener("keydown",s)},[e]),r}function xP(e,t,n){w.useEffect(()=>(window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n)),[e,t])}function ZU(e=[!1,!0]){const[[t],n]=w.useReducer((r,s)=>{const i=s instanceof Function?s(r[0]):s,o=Math.abs(r.indexOf(i));return r.slice(o).concat(r.slice(0,o))},e);return[t,n]}const wP={passive:!0};function u1e(){const[e,t]=w.useState({width:0,height:0}),n=w.useCallback(()=>{t({width:window.innerWidth||0,height:window.innerHeight||0})},[]);return xP("resize",n,wP),xP("orientationchange",n,wP),w.useEffect(n,[]),e}const d1e={" ":"space",ArrowLeft:"arrowleft",ArrowRight:"arrowright",ArrowUp:"arrowup",ArrowDown:"arrowdown",Escape:"esc",Esc:"esc",Enter:"enter",Tab:"tab",Backspace:"backspace",Delete:"delete",Insert:"insert",Home:"home",End:"end",PageUp:"pageup",PageDown:"pagedown","+":"plus","-":"minus","*":"asterisk","/":"slash"};function nv(e){const t=e.replace("Key","").toLowerCase();return d1e[e]||t}function f1e(e){const t=e.toLowerCase().split("+").map(i=>i.trim()),n={alt:t.includes("alt"),ctrl:t.includes("ctrl"),meta:t.includes("meta"),mod:t.includes("mod"),shift:t.includes("shift"),plus:t.includes("[plus]")},r=["alt","ctrl","meta","shift","mod"],s=t.find(i=>!r.includes(i));return{...n,key:s==="[plus]"?"+":s}}function h1e(e,t,n){const{alt:r,ctrl:s,meta:i,mod:o,shift:a,key:c}=e,{altKey:u,ctrlKey:f,metaKey:h,shiftKey:p,key:y,code:v}=t;if(r!==u)return!1;if(o){if(!f&&!h)return!1}else if(s!==f||i!==h)return!1;return a!==p?!1:!!(c&&(n?nv(v)===nv(c):nv(y??v)===nv(c)))}function eq(e,t){return n=>h1e(f1e(e),n,t)}function m1e(e){return t=>{const n="nativeEvent"in t?t.nativeEvent:t;e.forEach(([r,s,i={preventDefault:!0,usePhysicalKeys:!1}])=>{eq(r,i.usePhysicalKeys)(n)&&(i.preventDefault&&t.preventDefault(),s(n))})}}function p1e(e,t,n=!1){return e.target instanceof HTMLElement?(n||!e.target.isContentEditable)&&!t.includes(e.target.tagName):!0}function x$(e,t=["INPUT","TEXTAREA","SELECT"],n=!1){w.useEffect(()=>{const r=s=>{e.forEach(([i,o,a={preventDefault:!0,usePhysicalKeys:!1}])=>{eq(i,a.usePhysicalKeys)(s)&&p1e(s,t,n)&&(a.preventDefault&&s.preventDefault(),o(s))})};return document.documentElement.addEventListener("keydown",r),()=>document.documentElement.removeEventListener("keydown",r)},[e])}function gm(e=!1,t){const{onOpen:n,onClose:r}={},[s,i]=w.useState(e),o=w.useCallback(()=>{i(u=>u||(n==null||n(),!0))},[n]),a=w.useCallback(()=>{i(u=>u&&(r==null||r(),!1))},[r]),c=w.useCallback(()=>{s?a():o()},[a,o,s]);return[s,{open:o,close:a,toggle:c}]}function g1e(){const e=w.useRef(null),[t,n]=w.useState(!1);return{ref:w.useCallback(s=>{var i,o;typeof IntersectionObserver<"u"&&(s&&!e.current?e.current=new IntersectionObserver(a=>n(a.some(c=>c.isIntersecting))):(i=e.current)==null||i.disconnect(),s?(o=e.current)==null||o.observe(s):n(!1))},[]),inViewport:t}}function SP(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function tq(...e){return t=>{let n=!1;const r=e.map(s=>{const i=SP(s,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():SP(e[s],null)}}}}function zc(...e){return w.useCallback(tq(...e),e)}var nq=w.forwardRef((e,t)=>{const{children:n,...r}=e,s=w.Children.toArray(n),i=s.find(b1e);if(i){const o=i.props.children,a=s.map(c=>c===i?w.Children.count(o)>1?w.Children.only(null):w.isValidElement(o)?o.props.children:null:c);return m.jsx(UO,{...r,ref:t,children:w.isValidElement(o)?w.cloneElement(o,void 0,a):null})}return m.jsx(UO,{...r,ref:t,children:n})});nq.displayName="Slot";var UO=w.forwardRef((e,t)=>{const{children:n,...r}=e;if(w.isValidElement(n)){const s=x1e(n),i=v1e(r,n.props);return n.type!==w.Fragment&&(i.ref=t?tq(t,s):s),w.cloneElement(n,i)}return w.Children.count(n)>1?w.Children.only(null):null});UO.displayName="SlotClone";var y1e=({children:e})=>m.jsx(m.Fragment,{children:e});function b1e(e){return w.isValidElement(e)&&e.type===y1e}function v1e(e,t){const n={...t};for(const r in t){const s=e[r],i=t[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{i(...a),s(...a)}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...e,...n}}function x1e(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var w1e=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Sd=w1e.reduce((e,t)=>{const n=w.forwardRef((r,s)=>{const{asChild:i,...o}=r,a=i?nq:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),m.jsx(a,{...o,ref:s})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function rq(e,t=[]){let n=[];function r(i,o){const a=w.createContext(o),c=n.length;n=[...n,o];const u=h=>{var N;const{scope:p,children:y,...v}=h,x=((N=p==null?void 0:p[e])==null?void 0:N[c])||a,E=w.useMemo(()=>v,Object.values(v));return m.jsx(x.Provider,{value:E,children:y})};u.displayName=i+"Provider";function f(h,p){var x;const y=((x=p==null?void 0:p[e])==null?void 0:x[c])||a,v=w.useContext(y);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[u,f]}const s=()=>{const i=n.map(o=>w.createContext(o));return function(a){const c=(a==null?void 0:a[e])||i;return w.useMemo(()=>({[`__scope${e}`]:{...a,[e]:c}}),[a,c])}};return s.scopeName=e,[r,S1e(s,...t)]}function S1e(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:c,scopeName:u})=>{const h=c(i)[`__scope${u}`];return{...a,...h}},{});return w.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}function gc(e,t,{checkForDefaultPrevented:n=!0}={}){return function(s){if(e==null||e(s),n===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function Sa(e){const t=w.useRef(e);return w.useEffect(()=>{t.current=e}),w.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function E1e({prop:e,defaultProp:t,onChange:n=()=>{}}){const[r,s]=N1e({defaultProp:t,onChange:n}),i=e!==void 0,o=i?e:r,a=Sa(n),c=w.useCallback(u=>{if(i){const h=typeof u=="function"?u(e):u;h!==e&&a(h)}else s(u)},[i,e,s,a]);return[o,c]}function N1e({defaultProp:e,onChange:t}){const n=w.useState(e),[r]=n,s=w.useRef(r),i=Sa(t);return w.useEffect(()=>{s.current!==r&&(i(r),s.current=r)},[r,s,i]),n}var Dx=globalThis!=null&&globalThis.document?w.useLayoutEffect:()=>{};function _1e(e,t){return w.useReducer((n,r)=>t[n][r]??n,e)}var e0=e=>{const{present:t,children:n}=e,r=C1e(t),s=typeof n=="function"?n({present:r.isPresent}):w.Children.only(n),i=zc(r.ref,O1e(s));return typeof n=="function"||r.isPresent?w.cloneElement(s,{ref:i}):null};e0.displayName="Presence";function C1e(e){const[t,n]=w.useState(),r=w.useRef({}),s=w.useRef(e),i=w.useRef("none"),o=e?"mounted":"unmounted",[a,c]=_1e(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return w.useEffect(()=>{const u=rv(r.current);i.current=a==="mounted"?u:"none"},[a]),Dx(()=>{const u=r.current,f=s.current;if(f!==e){const p=i.current,y=rv(u);e?c("MOUNT"):y==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(f&&p!==y?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,c]),Dx(()=>{if(t){let u;const f=t.ownerDocument.defaultView??window,h=y=>{const x=rv(r.current).includes(y.animationName);if(y.target===t&&x&&(c("ANIMATION_END"),!s.current)){const E=t.style.animationFillMode;t.style.animationFillMode="forwards",u=f.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=E)})}},p=y=>{y.target===t&&(i.current=rv(r.current))};return t.addEventListener("animationstart",p),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{f.clearTimeout(u),t.removeEventListener("animationstart",p),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:w.useCallback(u=>{u&&(r.current=getComputedStyle(u)),n(u)},[])}}function rv(e){return(e==null?void 0:e.animationName)||"none"}function O1e(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var j1e=w.createContext(void 0);function A1e(e){const t=w.useContext(j1e);return e||t||"ltr"}function T1e(e){const t=w.useRef({value:e,previous:e});return w.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}function $1e(e){const[t,n]=w.useState(void 0);return Dx(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,a=u.blockSize}else o=e.offsetWidth,a=e.offsetHeight;n({width:o,height:a})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}function R1e(e,[t,n]){return Math.min(n,Math.max(t,e))}function k1e(e,t){return w.useReducer((n,r)=>t[n][r]??n,e)}var w$="ScrollArea",[sq,x8e]=rq(w$),[M1e,xi]=sq(w$),iq=w.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:i=600,...o}=e,[a,c]=w.useState(null),[u,f]=w.useState(null),[h,p]=w.useState(null),[y,v]=w.useState(null),[x,E]=w.useState(null),[N,_]=w.useState(0),[C,j]=w.useState(0),[A,$]=w.useState(!1),[k,R]=w.useState(!1),B=zc(t,D=>c(D)),z=A1e(s);return m.jsx(M1e,{scope:n,type:r,dir:z,scrollHideDelay:i,scrollArea:a,viewport:u,onViewportChange:f,content:h,onContentChange:p,scrollbarX:y,onScrollbarXChange:v,scrollbarXEnabled:A,onScrollbarXEnabledChange:$,scrollbarY:x,onScrollbarYChange:E,scrollbarYEnabled:k,onScrollbarYEnabledChange:R,onCornerWidthChange:_,onCornerHeightChange:j,children:m.jsx(Sd.div,{dir:z,...o,ref:B,style:{position:"relative","--radix-scroll-area-corner-width":N+"px","--radix-scroll-area-corner-height":C+"px",...e.style}})})});iq.displayName=w$;var oq="ScrollAreaViewport",aq=w.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:s,...i}=e,o=xi(oq,n),a=w.useRef(null),c=zc(t,a,o.onViewportChange);return m.jsxs(m.Fragment,{children:[m.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),m.jsx(Sd.div,{"data-radix-scroll-area-viewport":"",...i,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:m.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});aq.displayName=oq;var Bo="ScrollAreaScrollbar",lq=w.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=xi(Bo,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=s,a=e.orientation==="horizontal";return w.useEffect(()=>(a?i(!0):o(!0),()=>{a?i(!1):o(!1)}),[a,i,o]),s.type==="hover"?m.jsx(I1e,{...r,ref:t,forceMount:n}):s.type==="scroll"?m.jsx(P1e,{...r,ref:t,forceMount:n}):s.type==="auto"?m.jsx(cq,{...r,ref:t,forceMount:n}):s.type==="always"?m.jsx(S$,{...r,ref:t}):null});lq.displayName=Bo;var I1e=w.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=xi(Bo,e.__scopeScrollArea),[i,o]=w.useState(!1);return w.useEffect(()=>{const a=s.scrollArea;let c=0;if(a){const u=()=>{window.clearTimeout(c),o(!0)},f=()=>{c=window.setTimeout(()=>o(!1),s.scrollHideDelay)};return a.addEventListener("pointerenter",u),a.addEventListener("pointerleave",f),()=>{window.clearTimeout(c),a.removeEventListener("pointerenter",u),a.removeEventListener("pointerleave",f)}}},[s.scrollArea,s.scrollHideDelay]),m.jsx(e0,{present:n||i,children:m.jsx(cq,{"data-state":i?"visible":"hidden",...r,ref:t})})}),P1e=w.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=xi(Bo,e.__scopeScrollArea),i=e.orientation==="horizontal",o=rS(()=>c("SCROLL_END"),100),[a,c]=k1e("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return w.useEffect(()=>{if(a==="idle"){const u=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(u)}},[a,s.scrollHideDelay,c]),w.useEffect(()=>{const u=s.viewport,f=i?"scrollLeft":"scrollTop";if(u){let h=u[f];const p=()=>{const y=u[f];h!==y&&(c("SCROLL"),o()),h=y};return u.addEventListener("scroll",p),()=>u.removeEventListener("scroll",p)}},[s.viewport,i,c,o]),m.jsx(e0,{present:n||a!=="hidden",children:m.jsx(S$,{"data-state":a==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:gc(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:gc(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),cq=w.forwardRef((e,t)=>{const n=xi(Bo,e.__scopeScrollArea),{forceMount:r,...s}=e,[i,o]=w.useState(!1),a=e.orientation==="horizontal",c=rS(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,f=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?u:f)}},10);return Ph(n.viewport,c),Ph(n.content,c),m.jsx(e0,{present:r||i,children:m.jsx(S$,{"data-state":i?"visible":"hidden",...s,ref:t})})}),S$=w.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,s=xi(Bo,e.__scopeScrollArea),i=w.useRef(null),o=w.useRef(0),[a,c]=w.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=hq(a.viewport,a.content),f={...r,sizes:a,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:p=>i.current=p,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:p=>o.current=p};function h(p,y){return U1e(p,o.current,a,y)}return n==="horizontal"?m.jsx(D1e,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&i.current){const p=s.viewport.scrollLeft,y=EP(p,a,s.dir);i.current.style.transform=`translate3d(${y}px, 0, 0)`}},onWheelScroll:p=>{s.viewport&&(s.viewport.scrollLeft=p)},onDragScroll:p=>{s.viewport&&(s.viewport.scrollLeft=h(p,s.dir))}}):n==="vertical"?m.jsx(L1e,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&i.current){const p=s.viewport.scrollTop,y=EP(p,a);i.current.style.transform=`translate3d(0, ${y}px, 0)`}},onWheelScroll:p=>{s.viewport&&(s.viewport.scrollTop=p)},onDragScroll:p=>{s.viewport&&(s.viewport.scrollTop=h(p))}}):null}),D1e=w.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,i=xi(Bo,e.__scopeScrollArea),[o,a]=w.useState(),c=w.useRef(null),u=zc(t,c,i.onScrollbarXChange);return w.useEffect(()=>{c.current&&a(getComputedStyle(c.current))},[c]),m.jsx(dq,{"data-orientation":"horizontal",...s,ref:u,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":nS(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,h)=>{if(i.viewport){const p=i.viewport.scrollLeft+f.deltaX;e.onWheelScroll(p),pq(p,h)&&f.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Fx(o.paddingLeft),paddingEnd:Fx(o.paddingRight)}})}})}),L1e=w.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,i=xi(Bo,e.__scopeScrollArea),[o,a]=w.useState(),c=w.useRef(null),u=zc(t,c,i.onScrollbarYChange);return w.useEffect(()=>{c.current&&a(getComputedStyle(c.current))},[c]),m.jsx(dq,{"data-orientation":"vertical",...s,ref:u,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":nS(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,h)=>{if(i.viewport){const p=i.viewport.scrollTop+f.deltaY;e.onWheelScroll(p),pq(p,h)&&f.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Fx(o.paddingTop),paddingEnd:Fx(o.paddingBottom)}})}})}),[F1e,uq]=sq(Bo),dq=w.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:a,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:f,onResize:h,...p}=e,y=xi(Bo,n),[v,x]=w.useState(null),E=zc(t,B=>x(B)),N=w.useRef(null),_=w.useRef(""),C=y.viewport,j=r.content-r.viewport,A=Sa(f),$=Sa(c),k=rS(h,10);function R(B){if(N.current){const z=B.clientX-N.current.left,D=B.clientY-N.current.top;u({x:z,y:D})}}return w.useEffect(()=>{const B=z=>{const D=z.target;(v==null?void 0:v.contains(D))&&A(z,j)};return document.addEventListener("wheel",B,{passive:!1}),()=>document.removeEventListener("wheel",B,{passive:!1})},[C,v,j,A]),w.useEffect($,[r,$]),Ph(v,k),Ph(y.content,k),m.jsx(F1e,{scope:n,scrollbar:v,hasThumb:s,onThumbChange:Sa(i),onThumbPointerUp:Sa(o),onThumbPositionChange:$,onThumbPointerDown:Sa(a),children:m.jsx(Sd.div,{...p,ref:E,style:{position:"absolute",...p.style},onPointerDown:gc(e.onPointerDown,B=>{B.button===0&&(B.target.setPointerCapture(B.pointerId),N.current=v.getBoundingClientRect(),_.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",y.viewport&&(y.viewport.style.scrollBehavior="auto"),R(B))}),onPointerMove:gc(e.onPointerMove,R),onPointerUp:gc(e.onPointerUp,B=>{const z=B.target;z.hasPointerCapture(B.pointerId)&&z.releasePointerCapture(B.pointerId),document.body.style.webkitUserSelect=_.current,y.viewport&&(y.viewport.style.scrollBehavior=""),N.current=null})})})}),Lx="ScrollAreaThumb",fq=w.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=uq(Lx,e.__scopeScrollArea);return m.jsx(e0,{present:n||s.hasThumb,children:m.jsx(B1e,{ref:t,...r})})}),B1e=w.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...s}=e,i=xi(Lx,n),o=uq(Lx,n),{onThumbPositionChange:a}=o,c=zc(t,h=>o.onThumbChange(h)),u=w.useRef(void 0),f=rS(()=>{u.current&&(u.current(),u.current=void 0)},100);return w.useEffect(()=>{const h=i.viewport;if(h){const p=()=>{if(f(),!u.current){const y=q1e(h,a);u.current=y,a()}};return a(),h.addEventListener("scroll",p),()=>h.removeEventListener("scroll",p)}},[i.viewport,f,a]),m.jsx(Sd.div,{"data-state":o.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:gc(e.onPointerDownCapture,h=>{const y=h.target.getBoundingClientRect(),v=h.clientX-y.left,x=h.clientY-y.top;o.onThumbPointerDown({x:v,y:x})}),onPointerUp:gc(e.onPointerUp,o.onThumbPointerUp)})});fq.displayName=Lx;var E$="ScrollAreaCorner",z1e=w.forwardRef((e,t)=>{const n=xi(E$,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?m.jsx(V1e,{...e,ref:t}):null});z1e.displayName=E$;var V1e=w.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,s=xi(E$,n),[i,o]=w.useState(0),[a,c]=w.useState(0),u=!!(i&&a);return Ph(s.scrollbarX,()=>{var h;const f=((h=s.scrollbarX)==null?void 0:h.offsetHeight)||0;s.onCornerHeightChange(f),c(f)}),Ph(s.scrollbarY,()=>{var h;const f=((h=s.scrollbarY)==null?void 0:h.offsetWidth)||0;s.onCornerWidthChange(f),o(f)}),u?m.jsx(Sd.div,{...r,ref:t,style:{width:i,height:a,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Fx(e){return e?parseInt(e,10):0}function hq(e,t){const n=e/t;return isNaN(n)?0:n}function nS(e){const t=hq(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function U1e(e,t,n,r="ltr"){const s=nS(n),i=s/2,o=t||i,a=s-o,c=n.scrollbar.paddingStart+o,u=n.scrollbar.size-n.scrollbar.paddingEnd-a,f=n.content-n.viewport,h=r==="ltr"?[0,f]:[f*-1,0];return mq([c,u],h)(e)}function EP(e,t,n="ltr"){const r=nS(t),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-s,o=t.content-t.viewport,a=i-r,c=n==="ltr"?[0,o]:[o*-1,0],u=R1e(e,c);return mq([0,o],[0,a])(u)}function mq(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function pq(e,t){return e>0&&e<t}var q1e=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function s(){const i={left:e.scrollLeft,top:e.scrollTop},o=n.left!==i.left,a=n.top!==i.top;(o||a)&&t(),n=i,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function rS(e,t){const n=Sa(e),r=w.useRef(0);return w.useEffect(()=>()=>window.clearTimeout(r.current),[]),w.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function Ph(e,t){const n=Sa(t);Dx(()=>{let r=0;if(e){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(e),()=>{window.cancelAnimationFrame(r),s.unobserve(e)}}},[e,n])}var gq=iq,yq=aq,Bx=lq,zx=fq,N$="Switch",[H1e,w8e]=rq(N$),[W1e,G1e]=H1e(N$),bq=w.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:i,required:o,disabled:a,value:c="on",onCheckedChange:u,form:f,...h}=e,[p,y]=w.useState(null),v=zc(t,C=>y(C)),x=w.useRef(!1),E=p?f||!!p.closest("form"):!0,[N=!1,_]=E1e({prop:s,defaultProp:i,onChange:u});return m.jsxs(W1e,{scope:n,checked:N,disabled:a,children:[m.jsx(Sd.button,{type:"button",role:"switch","aria-checked":N,"aria-required":o,"data-state":wq(N),"data-disabled":a?"":void 0,disabled:a,value:c,...h,ref:v,onClick:gc(e.onClick,C=>{_(j=>!j),E&&(x.current=C.isPropagationStopped(),x.current||C.stopPropagation())})}),E&&m.jsx(Y1e,{control:p,bubbles:!x.current,name:r,value:c,checked:N,required:o,disabled:a,form:f,style:{transform:"translateX(-100%)"}})]})});bq.displayName=N$;var vq="SwitchThumb",xq=w.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,s=G1e(vq,n);return m.jsx(Sd.span,{"data-state":wq(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:t})});xq.displayName=vq;var Y1e=e=>{const{control:t,checked:n,bubbles:r=!0,...s}=e,i=w.useRef(null),o=T1e(n),a=$1e(t);return w.useEffect(()=>{const c=i.current,u=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(u,"checked").set;if(o!==n&&h){const p=new Event("click",{bubbles:r});h.call(c,n),c.dispatchEvent(p)}},[o,n,r]),m.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:i,style:{...e.style,...a,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function wq(e){return e?"checked":"unchecked"}var J1e=bq,X1e=xq;const K1e={xs:{className:"p-0.5",size:13},sm:{className:"p-0.5",size:15},md:{className:"p-1",size:18},lg:{className:"p-1.5",size:22}},xt=w.forwardRef(({Icon:e,size:t,variant:n="ghost",onClick:r,disabled:s,iconProps:i,tabIndex:o,...a},c)=>{const u=K1e[t??"md"];return m.jsx(st,{ref:c,variant:n,iconSize:u.size,iconProps:i,IconLeft:e,className:qe(u.className,a.className),onClick:r,disabled:s,tabIndex:o})});function Sq(e){const t=e.match(/:(\w+)\??/);return(t==null?void 0:t[1])??""}function NP(e,t){return t?e.replace(/:\w+\??/,t):e.replace(/\/:\w+\??/,"")}function _$(e,t){const n=Z1e(e??""),r=e??(n==null?void 0:n.path)??"",s=Sq(r),i=y$()[s],[o,a]=w.useState(i===t),c=n?t===n.activeIdentifier:o,[,u]=vi();function f(h){const p=h??!o;n&&n.setActiveIdentifier(t),r?u(p?NP(r,t):NP(r)):a(p)}return w.useEffect(()=>{!n&&e&&t&&a(i===t)},[i,t,e]),{active:c,toggle:f}}const Eq=w.createContext(void 0);function Q1e({children:e,defaultIdentifier:t,path:n}){const r=Sq(n),s=y$()[r],[i,o]=w.useState(s??t);return m.jsx(Eq.Provider,{value:{defaultIdentifier:t,path:n,activeIdentifier:i,setActiveIdentifier:o},children:e})}function Z1e(e){const t=w.use(Eq);if(t&&(!e||t.path===e))return t}const Nq=w.createContext(void 0);function eSe({children:e}){const{width:t}=u1e(),[n,r]=gm(t>768);return m.jsx(Nq.Provider,{value:{sidebar:{open:n,handler:r}},children:e})}function tSe(){return w.useContext(Nq)}const Ra=Z1(YU(Zy({sidebars:{default:{open:!1,width:350}}},e=>({toggleSidebar:t=>()=>e(n=>{const r=n.sidebars[t];return r?{sidebars:{...n.sidebars,[t]:{...r,open:!r.open}}}:n}),closeSidebar:t=>()=>e(n=>{const r=n.sidebars[t];return r?{sidebars:{...n.sidebars,[t]:{...r,open:!1}}}:n}),setSidebarWidth:t=>n=>e(r=>{const s=r.sidebars[t];return s?{sidebars:{...r.sidebars,[t]:{...s,width:n}}}:{sidebars:{...r.sidebars,[t]:{open:!1,width:n}}}}),resetSidebarWidth:t=>e(n=>{const r=n.sidebars[t];return r?{sidebars:{...n.sidebars,[t]:{...r,width:350}}}:n}),setSidebarState:(t,n)=>e(r=>({sidebars:{...r.sidebars,[t]:n}}))})),{name:"appshell",version:1,migrate:()=>({sidebars:{default:{open:!1,width:350}}})}));var _q={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},_P=je.createContext&&je.createContext(_q),nSe=["attr","size","title"];function rSe(e,t){if(e==null)return{};var n=sSe(e,t),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function sSe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Vx(){return Vx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vx.apply(this,arguments)}function CP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Ux(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?CP(Object(n),!0).forEach(function(r){iSe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function iSe(e,t,n){return t=oSe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oSe(e){var t=aSe(e,"string");return typeof t=="symbol"?t:t+""}function aSe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Cq(e){return e&&e.map((t,n)=>je.createElement(t.tag,Ux({key:n},t.attr),Cq(t.child)))}function Ue(e){return t=>je.createElement(lSe,Vx({attr:Ux({},e.attr)},t),Cq(e.child))}function lSe(e){var t=n=>{var{attr:r,size:s,title:i}=e,o=rSe(e,nSe),a=s||n.size||"1em",c;return n.className&&(c=n.className),e.className&&(c=(c?c+" ":"")+e.className),je.createElement("svg",Vx({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:c,style:Ux(Ux({color:e.color||n.color},n.style),e.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),i&&je.createElement("title",null,i),e.children)};return _P!==void 0?je.createElement(_P.Consumer,null,n=>t(n)):t(_q)}function cSe(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M15.079 5.999l.239 .012c1.43 .097 3.434 1.013 4.508 2.586a1 1 0 0 1 -.344 1.44c-.05 .028 -.372 .158 -.497 .217a4.15 4.15 0 0 0 -.722 .431c-.614 .461 -.948 1.009 -.942 1.694c.01 .885 .339 1.454 .907 1.846c.208 .143 .436 .253 .666 .33c.126 .043 .426 .116 .444 .122a1 1 0 0 1 .662 .942c0 2.621 -3.04 6.381 -5.286 6.381c-.79 0 -1.272 -.091 -1.983 -.315l-.098 -.031c-.463 -.146 -.702 -.192 -1.133 -.192c-.52 0 -.863 .06 -1.518 .237l-.197 .053c-.575 .153 -.964 .226 -1.5 .248c-2.749 0 -5.285 -5.093 -5.285 -9.072c0 -3.87 1.786 -6.92 5.286 -6.92c.297 0 .598 .045 .909 .128c.403 .107 .774 .26 1.296 .508c.787 .374 .948 .44 1.009 .44h.016c.03 -.003 .128 -.047 1.056 -.457c1.061 -.467 1.864 -.685 2.746 -.616l-.24 -.012z"},child:[]},{tag:"path",attr:{d:"M14 1a1 1 0 0 1 1 1a3 3 0 0 1 -3 3a1 1 0 0 1 -1 -1a3 3 0 0 1 3 -3z"},child:[]}]})(e)}function uSe(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M14.983 3l.123 .006c2.014 .214 3.527 .672 4.966 1.673a1 1 0 0 1 .371 .488c1.876 5.315 2.373 9.987 1.451 12.28c-1.003 2.005 -2.606 3.553 -4.394 3.553c-.732 0 -1.693 -.968 -2.328 -2.045a21.512 21.512 0 0 0 2.103 -.493a1 1 0 1 0 -.55 -1.924c-3.32 .95 -6.13 .95 -9.45 0a1 1 0 0 0 -.55 1.924c.717 .204 1.416 .37 2.103 .494c-.635 1.075 -1.596 2.044 -2.328 2.044c-1.788 0 -3.391 -1.548 -4.428 -3.629c-.888 -2.217 -.39 -6.89 1.485 -12.204a1 1 0 0 1 .371 -.488c1.439 -1.001 2.952 -1.459 4.966 -1.673a1 1 0 0 1 .935 .435l.063 .107l.651 1.285l.137 -.016a12.97 12.97 0 0 1 2.643 0l.134 .016l.65 -1.284a1 1 0 0 1 .754 -.54l.122 -.009zm-5.983 7a2 2 0 0 0 -1.977 1.697l-.018 .154l-.005 .149l.005 .15a2 2 0 1 0 1.995 -2.15zm6 0a2 2 0 0 0 -1.977 1.697l-.018 .154l-.005 .149l.005 .15a2 2 0 1 0 1.995 -2.15z"},child:[]}]})(e)}function dSe(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M18 2a1 1 0 0 1 .993 .883l.007 .117v4a1 1 0 0 1 -.883 .993l-.117 .007h-3v1h3a1 1 0 0 1 .991 1.131l-.02 .112l-1 4a1 1 0 0 1 -.858 .75l-.113 .007h-2v6a1 1 0 0 1 -.883 .993l-.117 .007h-4a1 1 0 0 1 -.993 -.883l-.007 -.117v-6h-2a1 1 0 0 1 -.993 -.883l-.007 -.117v-4a1 1 0 0 1 .883 -.993l.117 -.007h2v-1a6 6 0 0 1 5.775 -5.996l.225 -.004h3z"},child:[]}]})(e)}function fSe(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5.315 2.1c.791 -.113 1.9 .145 3.333 .966l.272 .161l.16 .1l.397 -.083a13.3 13.3 0 0 1 4.59 -.08l.456 .08l.396 .083l.161 -.1c1.385 -.84 2.487 -1.17 3.322 -1.148l.164 .008l.147 .017l.076 .014l.05 .011l.144 .047a1 1 0 0 1 .53 .514a5.2 5.2 0 0 1 .397 2.91l-.047 .267l-.046 .196l.123 .163c.574 .795 .93 1.728 1.03 2.707l.023 .295l.007 .272c0 3.855 -1.659 5.883 -4.644 6.68l-.245 .061l-.132 .029l.014 .161l.008 .157l.004 .365l-.002 .213l-.003 3.834a1 1 0 0 1 -.883 .993l-.117 .007h-6a1 1 0 0 1 -.993 -.883l-.007 -.117v-.734c-1.818 .26 -3.03 -.424 -4.11 -1.878l-.535 -.766c-.28 -.396 -.455 -.579 -.589 -.644l-.048 -.019a1 1 0 0 1 .564 -1.918c.642 .188 1.074 .568 1.57 1.239l.538 .769c.76 1.079 1.36 1.459 2.609 1.191l.001 -.678l-.018 -.168a5.03 5.03 0 0 1 -.021 -.824l.017 -.185l.019 -.12l-.108 -.024c-2.976 -.71 -4.703 -2.573 -4.875 -6.139l-.01 -.31l-.004 -.292a5.6 5.6 0 0 1 .908 -3.051l.152 -.222l.122 -.163l-.045 -.196a5.2 5.2 0 0 1 .145 -2.642l.1 -.282l.106 -.253a1 1 0 0 1 .529 -.514l.144 -.047l.154 -.03z"},child:[]}]})(e)}function hSe(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M12 2a9.96 9.96 0 0 1 6.29 2.226a1 1 0 0 1 .04 1.52l-1.51 1.362a1 1 0 0 1 -1.265 .06a6 6 0 1 0 2.103 6.836l.001 -.004h-3.66a1 1 0 0 1 -.992 -.883l-.007 -.117v-2a1 1 0 0 1 1 -1h6.945a1 1 0 0 1 .994 .89c.04 .367 .061 .737 .061 1.11c0 5.523 -4.477 10 -10 10s-10 -4.477 -10 -10s4.477 -10 10 -10z"},child:[]}]})(e)}function mSe(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17 3.34a10 10 0 1 1 -14.995 8.984l-.005 -.324l.005 -.324a10 10 0 0 1 14.995 -8.336zm-1.293 5.953a1 1 0 0 0 -1.32 -.083l-.094 .083l-3.293 3.292l-1.293 -1.292l-.094 -.083a1 1 0 0 0 -1.403 1.403l.083 .094l2 2l.094 .083a1 1 0 0 0 1.226 0l.094 -.083l4 -4l.083 -.094a1 1 0 0 0 -.083 -1.32z"},child:[]}]})(e)}function pSe(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M6 4v16a1 1 0 0 0 1.524 .852l13 -8a1 1 0 0 0 0 -1.704l-13 -8a1 1 0 0 0 -1.524 .852z"},child:[]}]})(e)}function gSe(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M18.333 2c1.96 0 3.56 1.537 3.662 3.472l.005 .195v12.666c0 1.96 -1.537 3.56 -3.472 3.662l-.195 .005h-12.666a3.667 3.667 0 0 1 -3.662 -3.472l-.005 -.195v-12.666c0 -1.96 1.537 -3.56 3.472 -3.662l.195 -.005h12.666zm-2.626 7.293a1 1 0 0 0 -1.414 0l-3.293 3.292l-1.293 -1.292l-.094 -.083a1 1 0 0 0 -1.32 1.497l2 2l.094 .083a1 1 0 0 0 1.32 -.083l4 -4l.083 -.094a1 1 0 0 0 -.083 -1.32z"},child:[]}]})(e)}function Oq(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0"},child:[]},{tag:"path",attr:{d:"M12 8v4"},child:[]},{tag:"path",attr:{d:"M12 16h.01"},child:[]}]})(e)}function ySe(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 5l0 14"},child:[]},{tag:"path",attr:{d:"M18 13l-6 6"},child:[]},{tag:"path",attr:{d:"M6 13l6 6"},child:[]}]})(e)}function C$(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M5 12l14 0"},child:[]},{tag:"path",attr:{d:"M5 12l6 6"},child:[]},{tag:"path",attr:{d:"M5 12l6 -6"},child:[]}]})(e)}function bSe(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M5 12l14 0"},child:[]},{tag:"path",attr:{d:"M13 18l6 -6"},child:[]},{tag:"path",attr:{d:"M13 6l6 6"},child:[]}]})(e)}function vSe(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 5l0 14"},child:[]},{tag:"path",attr:{d:"M18 11l-6 -6"},child:[]},{tag:"path",attr:{d:"M6 11l6 -6"},child:[]}]})(e)}function xSe(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0"},child:[]},{tag:"path",attr:{d:"M16 12v1.5a2.5 2.5 0 0 0 5 0v-1.5a9 9 0 1 0 -5.5 8.28"},child:[]}]})(e)}function wSe(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 3l8 4.5l0 9l-8 4.5l-8 -4.5l0 -9l8 -4.5"},child:[]},{tag:"path",attr:{d:"M12 12l8 -4.5"},child:[]},{tag:"path",attr:{d:"M12 12l0 9"},child:[]},{tag:"path",attr:{d:"M12 12l-8 -4.5"},child:[]}]})(e)}function SSe(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M7 4a2 2 0 0 0 -2 2v3a2 3 0 0 1 -2 3a2 3 0 0 1 2 3v3a2 2 0 0 0 2 2"},child:[]},{tag:"path",attr:{d:"M17 4a2 2 0 0 1 2 2v3a2 3 0 0 0 2 3a2 3 0 0 0 -2 3v3a2 2 0 0 1 -2 2"},child:[]}]})(e)}function ESe(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4m0 4a4 4 0 0 1 4 -4h8a4 4 0 0 1 4 4v8a4 4 0 0 1 -4 4h-8a4 4 0 0 1 -4 -4z"},child:[]},{tag:"path",attr:{d:"M12 12m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"},child:[]},{tag:"path",attr:{d:"M16.5 7.5l0 .01"},child:[]}]})(e)}function NSe(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 12m-10 0a10 10 0 1 0 20 0a10 10 0 1 0 -20 0"},child:[]},{tag:"path",attr:{d:"M12.556 6c.65 0 1.235 .373 1.508 .947l2.839 7.848a1.646 1.646 0 0 1 -1.01 2.108a1.673 1.673 0 0 1 -2.068 -.851l-.46 -1.052h-2.73l-.398 .905a1.67 1.67 0 0 1 -1.977 1.045l-.153 -.047a1.647 1.647 0 0 1 -1.056 -1.956l2.824 -7.852a1.664 1.664 0 0 1 1.409 -1.087l1.272 -.008z"},child:[]}]})(e)}function _Se(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4l11.733 16h4.267l-11.733 -16z"},child:[]},{tag:"path",attr:{d:"M4 20l6.768 -6.768m2.46 -2.46l6.772 -6.772"},child:[]}]})(e)}function jq(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 7a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12z"},child:[]},{tag:"path",attr:{d:"M16 3v4"},child:[]},{tag:"path",attr:{d:"M8 3v4"},child:[]},{tag:"path",attr:{d:"M4 11h16"},child:[]},{tag:"path",attr:{d:"M11 15h1"},child:[]},{tag:"path",attr:{d:"M12 15v3"},child:[]}]})(e)}function CSe(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M5 12l5 5l10 -10"},child:[]}]})(e)}function Aq(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M6 9l6 6l6 -6"},child:[]}]})(e)}function OSe(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M15 6l-6 6l6 6"},child:[]}]})(e)}function jSe(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 6l6 6l-6 6"},child:[]}]})(e)}function ASe(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M6 15l6 -6l6 6"},child:[]}]})(e)}function TSe(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11 7l-5 5l5 5"},child:[]},{tag:"path",attr:{d:"M17 7l-5 5l5 5"},child:[]}]})(e)}function $Se(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M7 7l5 5l-5 5"},child:[]},{tag:"path",attr:{d:"M13 7l5 5l-5 5"},child:[]}]})(e)}function RSe(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"},child:[]}]})(e)}function O$(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9.183 6.117a6 6 0 1 0 4.511 3.986"},child:[]},{tag:"path",attr:{d:"M14.813 17.883a6 6 0 1 0 -4.496 -3.954"},child:[]}]})(e)}function kSe(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 12h6"},child:[]},{tag:"path",attr:{d:"M12 9v6"},child:[]},{tag:"path",attr:{d:"M6 19a2 2 0 0 1 -2 -2v-4l-1 -1l1 -1v-4a2 2 0 0 1 2 -2"},child:[]},{tag:"path",attr:{d:"M18 19a2 2 0 0 0 2 -2v-4l1 -1l-1 -1v-4a2 2 0 0 0 -2 -2"},child:[]}]})(e)}function Tq(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z"},child:[]},{tag:"path",attr:{d:"M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1"},child:[]}]})(e)}function $q(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 6c0 1.657 3.582 3 8 3s8 -1.343 8 -3s-3.582 -3 -8 -3s-8 1.343 -8 3"},child:[]},{tag:"path",attr:{d:"M4 6v6c0 1.657 3.582 3 8 3c1.075 0 2.1 -.08 3.037 -.224"},child:[]},{tag:"path",attr:{d:"M20 12v-6"},child:[]},{tag:"path",attr:{d:"M4 12v6c0 1.657 3.582 3 8 3c.166 0 .331 -.002 .495 -.006"},child:[]},{tag:"path",attr:{d:"M16 19h6"},child:[]},{tag:"path",attr:{d:"M19 16v6"},child:[]}]})(e)}function MSe(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 6m-8 0a8 3 0 1 0 16 0a8 3 0 1 0 -16 0"},child:[]},{tag:"path",attr:{d:"M4 6v6a8 3 0 0 0 16 0v-6"},child:[]},{tag:"path",attr:{d:"M4 12v6a8 3 0 0 0 16 0v-6"},child:[]}]})(e)}function S8e(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M10.831 20.413l-5.375 -6.91c-.608 -.783 -.608 -2.223 0 -3l5.375 -6.911a1.457 1.457 0 0 1 2.338 0l5.375 6.91c.608 .783 .608 2.223 0 3l-5.375 6.911a1.457 1.457 0 0 1 -2.338 0z"},child:[]}]})(e)}function ISe(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"},child:[]},{tag:"path",attr:{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"},child:[]},{tag:"path",attr:{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"},child:[]}]})(e)}function nl(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"},child:[]},{tag:"path",attr:{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"},child:[]},{tag:"path",attr:{d:"M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"},child:[]}]})(e)}function PSe(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 6h-6a2 2 0 0 0 -2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-6"},child:[]},{tag:"path",attr:{d:"M11 13l9 -9"},child:[]},{tag:"path",attr:{d:"M15 4h5v5"},child:[]}]})(e)}function DSe(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M10.585 10.587a2 2 0 0 0 2.829 2.828"},child:[]},{tag:"path",attr:{d:"M16.681 16.673a8.717 8.717 0 0 1 -4.681 1.327c-3.6 0 -6.6 -2 -9 -6c1.272 -2.12 2.712 -3.678 4.32 -4.674m2.86 -1.146a9.055 9.055 0 0 1 1.82 -.18c3.6 0 6.6 2 9 6c-.666 1.11 -1.379 2.067 -2.138 2.87"},child:[]},{tag:"path",attr:{d:"M3 3l18 18"},child:[]}]})(e)}function Rq(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0"},child:[]},{tag:"path",attr:{d:"M21 12c-2.4 4 -5.4 6 -9 6c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6"},child:[]}]})(e)}function LSe(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 3v4a1 1 0 0 0 1 1h4"},child:[]},{tag:"path",attr:{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z"},child:[]},{tag:"path",attr:{d:"M9 9l1 0"},child:[]},{tag:"path",attr:{d:"M9 13l6 0"},child:[]},{tag:"path",attr:{d:"M9 17l6 0"},child:[]}]})(e)}function FSe(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 3v4a1 1 0 0 0 1 1h4"},child:[]},{tag:"path",attr:{d:"M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4"},child:[]},{tag:"path",attr:{d:"M7 16.5a1.5 1.5 0 0 0 -3 0v3a1.5 1.5 0 0 0 3 0"},child:[]},{tag:"path",attr:{d:"M10 20.25c0 .414 .336 .75 .75 .75h1.25a1 1 0 0 0 1 -1v-1a1 1 0 0 0 -1 -1h-1a1 1 0 0 1 -1 -1v-1a1 1 0 0 1 1 -1h1.25a.75 .75 0 0 1 .75 .75"},child:[]},{tag:"path",attr:{d:"M16 15l2 6l2 -6"},child:[]}]})(e)}function BSe(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 3v4a1 1 0 0 0 1 1h4"},child:[]},{tag:"path",attr:{d:"M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4"},child:[]},{tag:"path",attr:{d:"M5 18h1.5a1.5 1.5 0 0 0 0 -3h-1.5v6"},child:[]},{tag:"path",attr:{d:"M17 18h2"},child:[]},{tag:"path",attr:{d:"M20 15h-3v6"},child:[]},{tag:"path",attr:{d:"M11 15v6h1a2 2 0 0 0 2 -2v-2a2 2 0 0 0 -2 -2h-1z"},child:[]}]})(e)}function zSe(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 3v4a1 1 0 0 0 1 1h4"},child:[]},{tag:"path",attr:{d:"M14 3v4a1 1 0 0 0 1 1h4"},child:[]},{tag:"path",attr:{d:"M5 20.25c0 .414 .336 .75 .75 .75h1.25a1 1 0 0 0 1 -1v-1a1 1 0 0 0 -1 -1h-1a1 1 0 0 1 -1 -1v-1a1 1 0 0 1 1 -1h1.25a.75 .75 0 0 1 .75 .75"},child:[]},{tag:"path",attr:{d:"M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4"},child:[]},{tag:"path",attr:{d:"M18 15v6h2"},child:[]},{tag:"path",attr:{d:"M13 15a2 2 0 0 1 2 2v2a2 2 0 1 1 -4 0v-2a2 2 0 0 1 2 -2z"},child:[]},{tag:"path",attr:{d:"M14 20l1.5 1.5"},child:[]}]})(e)}function VSe(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 3v4a1 1 0 0 0 1 1h4"},child:[]},{tag:"path",attr:{d:"M14 3v4a1 1 0 0 0 1 1h4"},child:[]},{tag:"path",attr:{d:"M16.5 15h3"},child:[]},{tag:"path",attr:{d:"M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4"},child:[]},{tag:"path",attr:{d:"M4.5 15h3"},child:[]},{tag:"path",attr:{d:"M6 15v6"},child:[]},{tag:"path",attr:{d:"M18 15v6"},child:[]},{tag:"path",attr:{d:"M10 15l4 6"},child:[]},{tag:"path",attr:{d:"M10 21l4 -6"},child:[]}]})(e)}function USe(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 3v4a1 1 0 0 0 1 1h4"},child:[]},{tag:"path",attr:{d:"M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4"},child:[]},{tag:"path",attr:{d:"M4 15l4 6"},child:[]},{tag:"path",attr:{d:"M4 21l4 -6"},child:[]},{tag:"path",attr:{d:"M19 15v6h3"},child:[]},{tag:"path",attr:{d:"M11 21v-6l2.5 3l2.5 -3v6"},child:[]}]})(e)}function kq(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18.9 7a8 8 0 0 1 1.1 5v1a6 6 0 0 0 .8 3"},child:[]},{tag:"path",attr:{d:"M8 11a4 4 0 0 1 8 0v1a10 10 0 0 0 2 6"},child:[]},{tag:"path",attr:{d:"M12 11v2a14 14 0 0 0 2.5 8"},child:[]},{tag:"path",attr:{d:"M8 15a18 18 0 0 0 1.8 6"},child:[]},{tag:"path",attr:{d:"M4.9 19a22 22 0 0 1 -.9 -7v-1a8 8 0 0 1 12 -6.95"},child:[]}]})(e)}function qSe(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"},child:[]},{tag:"path",attr:{d:"M9 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"},child:[]},{tag:"path",attr:{d:"M9 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"},child:[]},{tag:"path",attr:{d:"M15 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"},child:[]},{tag:"path",attr:{d:"M15 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"},child:[]},{tag:"path",attr:{d:"M15 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"},child:[]}]})(e)}function HSe(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M10 3h4v4h-4z"},child:[]},{tag:"path",attr:{d:"M3 17h4v4h-4z"},child:[]},{tag:"path",attr:{d:"M17 17h4v4h-4z"},child:[]},{tag:"path",attr:{d:"M7 17l5 -4l5 4"},child:[]},{tag:"path",attr:{d:"M12 7l0 6"},child:[]}]})(e)}function WSe(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3.05 11a8.975 8.975 0 0 1 2.54 -5.403m2.314 -1.697a9 9 0 0 1 12.113 12.112m-1.695 2.312a9 9 0 0 1 -14.772 -3.324m-.5 5v-5h5"},child:[]},{tag:"path",attr:{d:"M3 3l18 18"},child:[]}]})(e)}function GSe(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 8l0 4l2 2"},child:[]},{tag:"path",attr:{d:"M3.05 11a9 9 0 1 1 .5 4m-.5 5v-5h5"},child:[]}]})(e)}function YSe(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0"},child:[]},{tag:"path",attr:{d:"M12 9h.01"},child:[]},{tag:"path",attr:{d:"M11 12h1v4h1"},child:[]}]})(e)}function JSe(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 16v-8l3 8v-8"},child:[]},{tag:"path",attr:{d:"M15 8a2 2 0 0 1 2 2v4a2 2 0 1 1 -4 0v-4a2 2 0 0 1 2 -2z"},child:[]},{tag:"path",attr:{d:"M1 8h3v6.5a1.5 1.5 0 0 1 -3 0v-.5"},child:[]},{tag:"path",attr:{d:"M7 15a1 1 0 0 0 1 1h1a1 1 0 0 0 1 -1v-2a1 1 0 0 0 -1 -1h-1a1 1 0 0 1 -1 -1v-2a1 1 0 0 1 1 -1h1a1 1 0 0 1 1 1"},child:[]}]})(e)}function E8e(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16.555 3.843l3.602 3.602a2.877 2.877 0 0 1 0 4.069l-2.643 2.643a2.877 2.877 0 0 1 -4.069 0l-.301 -.301l-6.558 6.558a2 2 0 0 1 -1.239 .578l-.175 .008h-1.172a1 1 0 0 1 -.993 -.883l-.007 -.117v-1.172a2 2 0 0 1 .467 -1.284l.119 -.13l.414 -.414h2v-2h2v-2l2.144 -2.144l-.301 -.301a2.877 2.877 0 0 1 0 -4.069l2.643 -2.643a2.877 2.877 0 0 1 4.069 0z"},child:[]},{tag:"path",attr:{d:"M15 9h.01"},child:[]}]})(e)}function XSe(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 5m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z"},child:[]},{tag:"path",attr:{d:"M7 15v-6l2 2l2 -2v6"},child:[]},{tag:"path",attr:{d:"M14 13l2 2l2 -2m-2 2v-6"},child:[]}]})(e)}function KSe(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 8v-2a2 2 0 0 1 2 -2h2"},child:[]},{tag:"path",attr:{d:"M4 16v2a2 2 0 0 0 2 2h2"},child:[]},{tag:"path",attr:{d:"M16 4h2a2 2 0 0 1 2 2v2"},child:[]},{tag:"path",attr:{d:"M16 20h2a2 2 0 0 0 2 -2v-2"},child:[]}]})(e)}function QSe(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 6l16 0"},child:[]},{tag:"path",attr:{d:"M4 12l16 0"},child:[]},{tag:"path",attr:{d:"M4 18l16 0"},child:[]}]})(e)}function ZSe(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M5 12l14 0"},child:[]}]})(e)}function eEe(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 17a3 3 0 1 0 6 0a3 3 0 0 0 -6 0"},child:[]},{tag:"path",attr:{d:"M13 17a3 3 0 1 0 6 0a3 3 0 0 0 -6 0"},child:[]},{tag:"path",attr:{d:"M9 17v-13h10v13"},child:[]},{tag:"path",attr:{d:"M9 8h10"},child:[]}]})(e)}function tEe(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 10l2 -2v8"},child:[]},{tag:"path",attr:{d:"M9 8h3a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 0 -1 1v2a1 1 0 0 0 1 1h3"},child:[]},{tag:"path",attr:{d:"M17 8h2.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-1.5h1.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-2.5"},child:[]}]})(e)}function t0(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M15 8h.01"},child:[]},{tag:"path",attr:{d:"M3 6a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v12a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3v-12z"},child:[]},{tag:"path",attr:{d:"M3 16l5 -5c.928 -.893 2.072 -.893 3 0l5 5"},child:[]},{tag:"path",attr:{d:"M14 14l1 -1c.928 -.893 2.072 -.893 3 0l3 3"},child:[]}]})(e)}function Mq(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 5l0 14"},child:[]},{tag:"path",attr:{d:"M5 12l14 0"},child:[]}]})(e)}function Iq(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4"},child:[]},{tag:"path",attr:{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4"},child:[]}]})(e)}function j$(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M8 9l4 -4l4 4"},child:[]},{tag:"path",attr:{d:"M16 15l-4 4l-4 -4"},child:[]}]})(e)}function ym(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z"},child:[]},{tag:"path",attr:{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0"},child:[]}]})(e)}function qO(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 15m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z"},child:[]},{tag:"path",attr:{d:"M15 15m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z"},child:[]},{tag:"path",attr:{d:"M9 3m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z"},child:[]},{tag:"path",attr:{d:"M6 15v-1a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v1"},child:[]},{tag:"path",attr:{d:"M12 9l0 3"},child:[]}]})(e)}function nEe(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 3m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z"},child:[]}]})(e)}function OP(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 15h16"},child:[]},{tag:"path",attr:{d:"M4 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"},child:[]},{tag:"path",attr:{d:"M4 20h12"},child:[]}]})(e)}function rEe(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M8 12m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"},child:[]},{tag:"path",attr:{d:"M2 6m0 6a6 6 0 0 1 6 -6h8a6 6 0 0 1 6 6v0a6 6 0 0 1 -6 6h-8a6 6 0 0 1 -6 -6z"},child:[]}]})(e)}function Pq(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 7l16 0"},child:[]},{tag:"path",attr:{d:"M10 11l0 6"},child:[]},{tag:"path",attr:{d:"M14 11l0 6"},child:[]},{tag:"path",attr:{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"},child:[]},{tag:"path",attr:{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"},child:[]}]})(e)}function sEe(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2"},child:[]},{tag:"path",attr:{d:"M7 9l5 -5l5 5"},child:[]},{tag:"path",attr:{d:"M12 4l0 12"},child:[]}]})(e)}function iEe(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0"},child:[]},{tag:"path",attr:{d:"M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2"},child:[]}]})(e)}function oEe(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M5 4c-2.5 5 -2.5 10 0 16m14 -16c2.5 5 2.5 10 0 16m-10 -11h1c1 0 1 1 2.016 3.527c.984 2.473 .984 3.473 1.984 3.473h1"},child:[]},{tag:"path",attr:{d:"M8 16c1.5 0 3 -2 4 -3.5s2.5 -3.5 4 -3.5"},child:[]}]})(e)}function aEe(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0"},child:[]},{tag:"path",attr:{d:"M3.6 9h16.8"},child:[]},{tag:"path",attr:{d:"M3.6 15h16.8"},child:[]},{tag:"path",attr:{d:"M11.5 3a17 17 0 0 0 0 18"},child:[]},{tag:"path",attr:{d:"M12.5 3a17 17 0 0 1 0 18"},child:[]}]})(e)}function A$(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 6l-12 12"},child:[]},{tag:"path",attr:{d:"M6 6l12 12"},child:[]}]})(e)}function lEe(e){return Ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 16v-8h2a2 2 0 1 1 0 4h-2"},child:[]},{tag:"path",attr:{d:"M12 8v8"},child:[]},{tag:"path",attr:{d:"M4 8h4l-4 8h4"},child:[]}]})(e)}function jr({children:e,defaultOpen:t=!1,openEvent:n="onClick",position:r="bottom-start",dropdownWrapperProps:s,items:i,title:o,hideOnEmpty:a=!0,onClickItem:c,renderItem:u,itemsClassName:f,className:h}){const[p,y]=w.useState(t),[v,x]=w.useState(r),E=tS(()=>y(!1)),N=i.filter(Boolean),[_,C]=w.useState(0),j=Dt((L=50)=>setTimeout(()=>y(H=>!H),typeof L=="number"?L:0)),A=n==="onClick"?L=>{L.stopPropagation(),j()}:void 0,$=Dt(L=>{var T;if(n!=="onContextMenu")return;if(L.preventDefault(),p){j(0),setTimeout(()=>{x(r),C(0)},10);return}const H=L.clientX-L.currentTarget.getBoundingClientRect().left,{left:M=0,right:V=0}=((T=E.current)==null?void 0:T.getBoundingClientRect())??{};if(M>0&&V>0){const I=OF(H,M,V);H<(M+V)/2?(x("bottom-start"),C(I)):(x("bottom-end"),C(V-I))}else x(r),C(0);j()}),k=4,R={"bottom-start":{top:"100%",left:_,marginTop:k},"bottom-end":{right:_,top:"100%",marginTop:k},"top-start":{bottom:"100%",marginBottom:k},"top-end":{bottom:"100%",right:_,marginBottom:k}}[v],B=Dt(L=>{L.onClick&&L.onClick(),c&&c(L),j(50)});if(N.length===0&&a)return null;const z=N.some(L=>"icon"in L&&L.icon),D=u||((L,{key:H,onClick:M})=>typeof L=="function"?m.jsx(w.Fragment,{children:L()},H):m.jsxs("button",{type:"button",disabled:L.disabled,className:qe("flex flex-row flex-nowrap text-nowrap items-center outline-none cursor-pointer px-2.5 rounded-md link leading-none h-8",f,L.disabled?"opacity-50 cursor-not-allowed":"hover:bg-primary/10",L.destructive&&"text-red-500 hover:bg-red-600 hover:text-white"),onClick:M,title:L.title,children:[z&&m.jsx("div",{className:"size-[16px] text-left mr-1.5 opacity-80",children:L.icon&&m.jsx(L.icon,{className:"size-[16px]"})}),m.jsx("div",{className:"flex flex-grow truncate text-nowrap",children:L.label})]},H));return m.jsxs("div",{role:"dropdown",className:qe("relative flex",h),ref:E,onContextMenu:$,children:[w.cloneElement(e,{onClick:A}),p&&m.jsxs("div",{...s,className:qe("absolute z-30 flex flex-col bg-background border border-muted px-1 py-1 rounded-lg shadow-lg min-w-full",s==null?void 0:s.className),style:R,children:[o&&m.jsx("div",{className:"text-sm font-bold px-2.5 mb-1 mt-1 opacity-50 truncate",children:o}),N.map((L,H)=>D(L,{key:H,onClick:M=>{M.stopPropagation(),B(L)}}))]})]})}const Dq=()=>m.jsxs("svg",{fill:"currentColor",fillRule:"evenodd",height:"1em",style:{flex:"none",lineHeight:"1"},viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:[m.jsx("title",{children:"ModelContextProtocol"}),m.jsx("path",{d:"M15.688 2.343a2.588 2.588 0 00-3.61 0l-9.626 9.44a.863.863 0 01-1.203 0 .823.823 0 010-1.18l9.626-9.44a4.313 4.313 0 016.016 0 4.116 4.116 0 011.204 3.54 4.3 4.3 0 013.609 1.18l.05.05a4.115 4.115 0 010 5.9l-8.706 8.537a.274.274 0 000 .393l1.788 1.754a.823.823 0 010 1.18.863.863 0 01-1.203 0l-1.788-1.753a1.92 1.92 0 010-2.754l8.706-8.538a2.47 2.47 0 000-3.54l-.05-.049a2.588 2.588 0 00-3.607-.003l-7.172 7.034-.002.002-.098.097a.863.863 0 01-1.204 0 .823.823 0 010-1.18l7.273-7.133a2.47 2.47 0 00-.003-3.537z"}),m.jsx("path",{d:"M14.485 4.703a.823.823 0 000-1.18.863.863 0 00-1.204 0l-7.119 6.982a4.115 4.115 0 000 5.9 4.314 4.314 0 006.016 0l7.12-6.982a.823.823 0 000-1.18.863.863 0 00-1.204 0l-7.119 6.982a2.588 2.588 0 01-3.61 0 2.47 2.47 0 010-3.54l7.12-6.982z"})]});function sS(e,t,n){var c,u,f,h,p;const s=(u=(c=dt().options)==null?void 0:c.entities)==null?void 0:u[e.name],i=((f=s==null?void 0:s.footer)==null?void 0:f.call(s,t,e,n))??null,o=((h=s==null?void 0:s.header)==null?void 0:h.call(s,t,e,n))??null,a=(p=s==null?void 0:s.actions)==null?void 0:p.call(s,t,e,n);return{footer:i,header:o,field:y=>{var v;return(v=s==null?void 0:s.fields)==null?void 0:v[y]},actions:a}}function cEe(){var n;const{options:e}=dt();return{userMenu:((n=e==null?void 0:e.appShell)==null?void 0:n.userMenu)??[]}}function uEe(){const[e,t]=vi(),n=[{label:"Data",href:"/data",Icon:MSe},{label:"Auth",href:"/auth",Icon:kq},{label:"Media",href:"/media",Icon:t0},{label:"Flows",href:"/flows",Icon:HSe}],r=n.find(o=>o.exact?e===o.href:e.startsWith(o.href)),s=Dt(o=>{t(o.href)}),i=(o,{key:a,onClick:c})=>m.jsx(hg,{onClick:c,as:"button",className:"rounded-md",children:m.jsxs("div",{"data-active":(r==null?void 0:r.label)===o.label,className:"flex flex-row items-center gap-2.5 data-[active=true]:opacity-50",children:[m.jsx(o.Icon,{size:18}),m.jsx("span",{className:"text-lg",children:o.label})]})},a);return m.jsxs(m.Fragment,{children:[m.jsx("nav",{className:"hidden md:flex flex-row gap-2.5 pl-0 p-2.5 items-center",children:n.map(o=>m.jsx(hg,{as:In,href:o.href,Icon:o.Icon,disabled:o.disabled,children:o.label},o.href))}),m.jsx("nav",{className:"flex md:hidden flex-row items-center",children:r&&m.jsx(jr,{items:n,onClickItem:s,renderItem:i,children:m.jsx(hg,{as:"button",Icon:r.Icon,className:"active pl-6 pr-3.5",children:m.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[m.jsx("span",{className:"text-lg",children:r.label}),m.jsx(j$,{size:18,className:"opacity-70"})]})})})})]})}function dEe({name:e="default"}){const t=Ra(r=>r.toggleSidebar(e)),n=Ra(r=>{var s;return(s=r.sidebars[e])==null?void 0:s.open});return m.jsx(xt,{id:"toggle-sidebar",size:"lg",Icon:n?A$:QSe,onClick:t})}function fEe({hasSidebar:e=!0}){const{app:t}=dt(),{theme:n}=Bc(),{logo_return_path:r="/"}=t.options;return m.jsxs("header",{id:"header","data-shell":"header",className:"flex flex-row w-full h-16 gap-2.5 border-muted border-b justify-start bg-muted/10",children:[m.jsx(In,{href:r,native:r!=="/",className:"max-h-full flex hover:bg-primary/5 link p-2.5 w-[134px] outline-none",children:m.jsx(eS,{theme:n})}),m.jsx(uEe,{}),m.jsx("div",{className:"flex flex-grow"}),m.jsxs("div",{className:"flex md:hidden flex-row items-center pr-2 gap-2",children:[m.jsx(dEe,{name:"default"}),m.jsx(jP,{})]}),m.jsx("div",{className:"hidden md:flex flex-row items-center px-4 gap-2",children:m.jsx(jP,{})})]})}function jP(){var c;const{config:e}=dt(),t=cEe(),n=yU(),[r]=Dn(),{logout_route:s}=G1();async function i(){await n.logout(),r(s,{reload:!0})}async function o(){r("/auth/login")}const a=[...t.userMenu??[],{label:"Settings",onClick:()=>r("/settings"),icon:Kg},{label:"OpenAPI",onClick:()=>window.open("/api/system/swagger","_blank"),icon:cxe},{label:"Docs",onClick:()=>window.open("https://docs.bknd.io","_blank"),icon:dxe}];return e.server.mcp.enabled&&a.push({label:"MCP",onClick:()=>r("/tools/mcp"),icon:Dq}),e.auth.enabled&&(n.user?a.push({label:"Logout",title:`Logout ${n.user.email}`,onClick:i,icon:Exe}):a.push({label:"Login",onClick:o,icon:Txe})),a.push(()=>m.jsx(hEe,{})),a.push(()=>m.jsx("div",{className:"font-mono leading-none text-xs text-primary/50 text-center pb-1 pt-2 mt-1 border-t border-primary/5",children:woe()})),m.jsx(m.Fragment,{children:m.jsx(jr,{items:a,position:"bottom-end",children:n.user?m.jsx(st,{className:"rounded-full w-12 h-12 justify-center p-0 text-lg",children:(c=n.user.email[0])==null?void 0:c.toUpperCase()}):m.jsx(st,{className:"rounded-full w-12 h-12 justify-center p-0",IconLeft:iEe})})})}function hEe(){const{value:e,themes:t,setTheme:n}=Bc();return m.jsx("div",{className:"flex flex-col items-center mt-1 pt-1 border-t border-primary/5",children:m.jsx(md,{withItemsBorders:!1,className:"w-full",data:t.map(r=>({value:r,label:Ku(r)})),value:e,onChange:n,size:"xs"})})}function Lq({children:e}){const t=Ra(r=>r.sidebars),n=tn(t,r=>r.width);return m.jsx(eSe,{children:m.jsx("div",{id:"app-shell","data-shell":"root",className:"flex flex-1 flex-col select-none h-dvh",style:Object.fromEntries(Object.entries(n).map(([r,s])=>[`--sidebar-width-${r}`,`${s}px`])),children:e})})}const hg=({children:e,as:t,className:n,Icon:r,disabled:s,...i})=>{const o=t||"a";return m.jsxs(o,{...i,className:qe("px-6 py-2 [&.active]:bg-muted [&.active]:hover:bg-primary/15 hover:bg-primary/5 flex flex-row items-center rounded-full gap-2.5 link transition-colors",s&&"opacity-50 cursor-not-allowed",n),children:[r&&m.jsx(r,{size:18}),typeof e=="string"?m.jsx("span",{className:"text-lg",children:e}):e]})};function Fq({children:e,center:t}){return m.jsx("main",{"data-shell":"content",className:qe("flex flex-1 flex-row max-w-screen h-full",t&&"justify-center items-center"),children:e})}function n0({children:e}){const{sidebar:t}=tSe();return m.jsx("div",{"data-shell":"main",className:qe("flex flex-col flex-grow w-1 flex-shrink-1",t.open&&"md:max-w-[calc(100%-var(--sidebar-width))]"),children:e})}function Ed({children:e,name:t="default",handle:n="right",minWidth:r,maxWidth:s}){const i=Ra(p=>{var y;return(y=p.sidebars[t])==null?void 0:y.open}),o=Ra(p=>p.closeSidebar(t)),a=Ra(p=>{var y;return((y=p.sidebars[t])==null?void 0:y.width)??350}),c=tS(o,["mouseup","touchend"]),u=w.useRef(null),[f]=vi(),h=()=>{i&&o()};return w.useEffect(h,[f]),x$([["Escape",h]]),m.jsxs(m.Fragment,{children:[n==="left"&&m.jsx(AP,{name:t,handle:n,sidebarRef:u,minWidth:r,maxWidth:s}),m.jsx("aside",{"data-shell":"sidebar",ref:u,className:"hidden md:flex flex-col flex-shrink-0 flex-grow-0 h-full bg-muted/10",style:{width:a},children:e}),n==="right"&&m.jsx(AP,{name:t,handle:n,sidebarRef:u,minWidth:r,maxWidth:s}),m.jsx("div",{"data-open":i,className:"absolute w-full md:hidden data-[open=true]:translate-x-0 translate-x-[-100%] transition-transform z-10 backdrop-blur-sm max-w-[90%]",children:m.jsx("aside",{ref:c,"data-shell":"sidebar",className:"flex-col w-[var(--sidebar-width)] flex-shrink-0 flex-grow-0 h-full border-muted border-r bg-background",children:m.jsx(pEe,{className:"overflow-y-scroll md:overflow-y-hidden",children:e})})})]})}const AP=({name:e="default",handle:t="right",sidebarRef:n,minWidth:r=250,maxWidth:s=window.innerWidth*.5})=>{var x;const i=Ra(E=>E.setSidebarWidth(e)),[o,a]=w.useState(!1),[c,u]=w.useState(0),[f,h]=w.useState(((x=n.current)==null?void 0:x.offsetWidth)??0),p=E=>{var N;E.preventDefault(),a(!0),u(E.clientX),h(((N=n.current)==null?void 0:N.offsetWidth)??0)},y=E=>{if(!o)return;const N=t==="right"?E.clientX-c:c-E.clientX,_=OF(f+N,r,s);i(_)},v=()=>{a(!1)};return w.useEffect(()=>(o&&(window.addEventListener("mousemove",y),window.addEventListener("mouseup",v)),()=>{window.removeEventListener("mousemove",y),window.removeEventListener("mouseup",v)}),[o,c,f,r,s]),m.jsx("div",{"data-shell":"sidebar-resize","data-active":o?1:void 0,className:"w-px h-full hidden md:flex bg-muted after:transition-colors relative after:absolute after:inset-0 after:-left-px after:w-[2px] select-none data-[active]:after:bg-sky-400 data-[active]:cursor-col-resize hover:after:bg-sky-400 hover:cursor-col-resize after:z-2",onMouseDown:p,style:{touchAction:"none"}})};function r0({children:e,className:t,...n}){return m.jsx("h2",{...n,className:qe("text-lg dark:font-bold font-semibold select-text",t),children:e})}function An({children:e,right:t,className:n,scrollable:r,sticky:s}={}){return m.jsxs("div",{className:qe("flex flex-row h-14 flex-shrink-0 py-2 pl-5 pr-3 border-muted border-b items-center justify-between bg-muted/10",s&&"sticky top-0 bottom-10 z-10",n),children:[m.jsx("div",{className:qe("",r&&"overflow-x-scroll overflow-y-visible app-scrollbar"),children:typeof e=="string"?m.jsx(r0,{children:e}):e}),t&&!r&&m.jsx("div",{className:"flex flex-row gap-2.5",children:t}),t&&r&&m.jsxs("div",{className:"flex flex-row sticky z-10 right-0 h-full",children:[m.jsx("div",{className:"h-full w-5 bg-gradient-to-l from-background"}),m.jsx("div",{className:"flex flex-row gap-2.5 bg-background",children:t})]})]})}const ns=({children:e,as:t,className:n,disabled:r=!1,...s})=>{const i=t||"a";return m.jsx(i,{...s,className:qe("flex flex-row px-4 items-center gap-2 h-12",!r&&"cursor-pointer rounded-md [&.active]:bg-primary/10 [&.active]:hover:bg-primary/15 [&.active]:font-medium hover:bg-primary/5 focus:bg-primary/5 link",r&&"opacity-50 cursor-not-allowed pointer-events-none",n),children:e})},mEe=({children:e,as:t,className:n,disabled:r=!1,active:s=!1,badge:i,...o})=>{const a=t||"a";return m.jsxs(a,{...o,className:qe("hover:bg-primary/5 flex flex-row items-center justify-center gap-2.5 px-5 h-12 leading-none font-medium text-primary/80 rounded-tr-lg rounded-tl-lg cursor-pointer border border-transparent border-b-0",s?"bg-background hover:bg-background text-primary border-muted border-b-0":"link opacity-80",i&&"pr-4",n),children:[m.jsx("span",{className:"truncate",children:e}),i?m.jsx("span",{className:"px-3 py-1 rounded-full font-mono bg-primary/5 text-sm leading-none",children:i}):null]})},Bq=({title:e,items:t})=>m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute left-0 right-0 bottom-0 z-0 h-px bg-muted"}),m.jsx("div",{className:"overflow-x-scroll app-scrollbar mt-10 border-t border-t-muted",children:m.jsx(An,{className:"pl-3 pb-0 items-end ",children:m.jsxs("div",{className:"flex flex-row items-center gap-6 -mb-px",children:[e&&m.jsx(r0,{className:"pl-2 hidden md:block",children:e}),m.jsx("div",{className:"flex flex-row items-center gap-3 pr-3",children:t==null?void 0:t.map(({label:n,...r},s)=>m.jsx(mEe,{...r,className:"relative z-2",children:n},s))})]})})})]});function pEe(e){const t=w.useRef(null),[n,r]=w.useState(0),[s,i]=w.useState(window.innerHeight);function o(){if(t.current){const a=t.current.getBoundingClientRect().top,c=window.innerHeight;r(a),i(c)}}return w.useEffect(()=>{o();const a=IT(o,500);return window.addEventListener("resize",a),()=>{window.removeEventListener("resize",a)}},[]),m.jsx("div",{ref:t,style:{height:`${s-n}px`},...e,children:e.children})}function Zn({children:e,initialOffset:t=64}){const n=w.useRef(null),[r,s]=w.useState(t);function i(){if(n.current){const o=n.current.getBoundingClientRect().top;s(o)}}return w.useEffect(i,[]),typeof window<"u"&&window.addEventListener("resize",IT(i,500)),m.jsxs(gq,{style:{height:`calc(100dvh - ${r}px`},ref:n,children:[m.jsx(yq,{className:"w-full h-full",children:e}),m.jsx(Bx,{forceMount:!0,className:"flex select-none touch-none bg-transparent w-0.5",orientation:"vertical",children:m.jsx(zx,{className:"flex-1 bg-primary/50"})}),m.jsx(Bx,{forceMount:!0,className:"flex select-none touch-none bg-muted flex-col h-0.5",orientation:"horizontal",children:m.jsx(zx,{className:"flex-1 bg-primary/50 "})})]})}const T$=({title:e,open:t,toggle:n,ActiveIcon:r=gxe,children:s,renderHeaderRight:i})=>m.jsxs("div",{style:{minHeight:49},className:qe("flex flex-col flex-animate overflow-hidden",t?"flex-open border-b border-b-muted":"flex-initial cursor-pointer hover:bg-primary/5"),children:[m.jsxs("div",{className:qe("flex flex-row bg-muted/10 border-muted border-b h-14 py-4 pr-4 pl-2 items-center gap-2"),onClick:n,children:[m.jsx(xt,{Icon:t?r:pxe,disabled:t}),m.jsx("h2",{className:"text-lg dark:font-bold font-semibold select-text",children:e}),m.jsx("div",{className:"flex flex-grow"}),i==null?void 0:i({open:t})]}),m.jsx("div",{className:qe("overflow-y-scroll transition-all",t?" flex-grow":"h-0 opacity-0"),children:s})]}),qx=({routePattern:e,identifier:t,...n})=>{const{active:r,toggle:s}=_$(e,t);return m.jsx(T$,{...n,open:r,toggle:s})},HO=({className:e,...t})=>m.jsx("hr",{...t,className:qe("border-muted my-3",e)});function gEe(e){const t=e==="light",n={offset:2,transitionProps:{transition:"pop",duration:75}},r="!bg-muted/40 border-transparent disabled:bg-muted/50 disabled:text-primary/50 focus:!border-zinc-500";return{theme:{components:{Button:Xu.extend({vars:(s,i)=>({root:{"--button-height":"auto"}}),classNames:(s,i)=>({root:qe("px-3 py-2 rounded-md h-auto")}),defaultProps:{size:"md",variant:t?"filled":"white"}}),Switch:Ka.extend({defaultProps:{size:"md",color:t?"dark":"blue"}}),Select:h1.extend({classNames:(s,i)=>({input:r,dropdown:`bknd-admin ${e} bg-background border-primary/20`}),defaultProps:{checkIconPosition:"right",comboboxProps:n}}),TagsInput:sT.extend({defaultProps:{comboboxProps:n}}),Radio:To.extend({defaultProps:{classNames:{body:"items-center"}}}),TextInput:On.extend({classNames:(s,i)=>({wrapper:"leading-none",input:r})}),NumberInput:u1.extend({classNames:(s,i)=>({wrapper:"leading-none",input:r})}),Textarea:My.extend({classNames:(s,i)=>({wrapper:"leading-none",input:r})}),Modal:Ls.extend({classNames:(s,i)=>({...i.classNames,root:`bknd-admin ${e} ${i.className??""}`,content:"!bg-background !rounded-lg !select-none",overlay:"!backdrop-blur-sm"})}),Tabs:wn.extend({vars:(s,i)=>({root:{"--tabs-color":"border-primary"}})}),Menu:Os.extend({defaultProps:{offset:2},classNames:(s,i)=>({dropdown:"!rounded-lg !px-1",item:"!rounded-md !text-[14px]"})}),SegmentedControl:md.extend({classNames:(s,i)=>({root:t?"bg-primary/5":"bg-lightest/60",indicator:t?"bg-background":"bg-primary/15"})}),Notifications:Do.extend({classNames:(s,i)=>({notification:"-top-4 -right-4"})})},primaryColor:"dark",primaryShade:9},forceColorScheme:e}}const yEe="modulepreload",bEe=function(e){return"/"+e},TP={},s0=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){let o=function(u){return Promise.all(u.map(f=>Promise.resolve(f).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=o(n.map(u=>{if(u=bEe(u),u in TP)return;TP[u]=!0;const f=u.endsWith(".css"),h=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const p=document.createElement("link");if(p.rel=f?"stylesheet":yEe,f||(p.as="script"),p.crossOrigin="",p.href=u,c&&p.setAttribute("nonce",c),document.head.appendChild(p),f)return new Promise((y,v)=>{p.addEventListener("load",y),p.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return t().catch(i)})};function Vc(){const{config:e,schema:t,actions:n,app:r}=dt(),s={config:{set:async a=>(console.log("--set",a),await n.set("auth",a,!0)?(await n.reload(),!0):!1)},roles:{add:async(a,c={})=>(console.log("add role",a,c),await n.add("auth",`roles.${a}`,c)),patch:async(a,c)=>(console.log("patch role",a,c),await n.patch("auth",`roles.${a}`,c)),delete:async a=>(console.log("delete role",a),window.confirm(`Are you sure you want to delete the role "${a}"?`)?await n.remove("auth",`roles.${a}`):!1)}},i=["system.access.admin","system.access.api","system.config.read","system.config.read.secrets","system.build"];return{$auth:{roles:{none:Object.keys(e.auth.roles??{}).length===0,minimum_permissions:i,has_admin:Object.entries(e.auth.roles??{}).some(([a,c])=>c.implicit_allow||i.every(u=>{var f;return(f=c.permissions)==null?void 0:f.includes(u)}))},routes:{settings:r.getSettingsPath(["auth"]),listUsers:r.getAbsolutePath("/data/"+ut.data.entity.list(e.auth.entity_name))}},config:e.auth,schema:t.auth,actions:s}}const vEe=({className:e,...t})=>m.jsx(Oq,{...t,className:qe("dark:text-amber-300 text-amber-700 cursor-help",e)}),xEe=({className:e,...t})=>m.jsx(Oq,{...t,className:qe("dark:text-red-300 text-red-700 cursor-help",e)}),iS={Warning:vEe,Err:xEe};function Gr(e=[]){w.useLayoutEffect(()=>{const t="BKND";document.title=[t,...e].join(" / ")})}function wEe({children:e}){const{config:t,$auth:n}=Vc();return m.jsxs(m.Fragment,{children:[m.jsxs(Ed,{children:[m.jsx(An,{right:m.jsx(In,{href:n.routes.settings,children:m.jsx(xt,{Icon:ym})}),children:"Auth"}),m.jsx(Zn,{initialOffset:96,children:m.jsx("div",{className:"flex flex-col flex-grow p-3 gap-3",children:m.jsxs("nav",{className:"flex flex-col flex-1 gap-1",children:[m.jsx(ns,{as:In,href:"/",children:"Overview"}),m.jsxs(ns,{as:In,href:n.routes.listUsers,disabled:!t.enabled,className:"justify-between",children:["Users",!t.enabled&&m.jsx(Dp,{title:"Auth is not enabled."})]}),m.jsxs(ns,{as:In,href:ut.auth.roles.list(),disabled:!t.enabled,className:"justify-between",children:["Roles & Permissions",t.enabled?n.roles.none?m.jsx(Dp,{title:"No roles defined."}):n.roles.has_admin?null:m.jsx(Dp,{title:"No admin role defined."}):m.jsx(Dp,{title:"Auth is not enabled."})]}),m.jsxs(ns,{as:In,href:ut.auth.strategies(),disabled:!t.enabled,className:"justify-between",children:["Strategies",!t.enabled&&m.jsx(Dp,{title:"Auth is not enabled."})]}),m.jsx(ns,{as:In,href:ut.auth.settings(),className:"justify-between",children:"Settings"})]})})})]}),m.jsx(n0,{children:e})]})}const Dp=({title:e})=>m.jsx(iS.Warning,{title:e,className:"size-5 pointer-events-auto"}),oS=({visible:e=!0,title:t,message:n,className:r,children:s,...i})=>e?m.jsx("div",{...i,className:qe("flex flex-row items-center p-4",r),children:m.jsxs("p",{children:[t&&m.jsxs("b",{children:[t,": "]}),n||s]})}):null,SEe=({className:e,...t})=>m.jsx(oS,{...t,className:qe("bg-warning text-warning-foreground",e)}),EEe=({className:e,...t})=>m.jsx(oS,{...t,className:qe("bg-error text-error-foreground",e)}),NEe=({className:e,...t})=>m.jsx(oS,{...t,className:qe("bg-success text-success-foreground",e)}),_Ee=({className:e,...t})=>m.jsx(oS,{...t,className:qe("bg-info text-info-foreground",e)}),No={Warning:SEe,Exception:EEe,Success:NEe,Info:_Ee};function CEe(){var y;const{app:e}=dt(),{config:{roles:t,strategies:n,entity_name:r,enabled:s}}=Vc(),i=r,a=((y=Y1(v=>v.data.count(i),{enabled:s}).data)==null?void 0:y.count)??0,c=Object.keys(t??{}).length??0,u=Object.keys(n??{}).length??0,f=e.getAbsolutePath("/data/"+ut.data.entity.list(i)),h=ut.auth.roles.list(),p=ut.auth.strategies();return m.jsxs(m.Fragment,{children:[m.jsx(An,{children:"Overview"}),m.jsxs(Zn,{children:[m.jsx(No.Warning,{visible:!s,title:"Auth not enabled",message:"To use authentication features, please enable it in the settings."}),m.jsxs("div",{className:"flex flex-col md:flex-row flex-1 p-3 gap-3",children:[m.jsxs("div",{className:"flex flex-col border border-primary/20 self-stretch md:self-start",children:[m.jsxs("div",{className:"flex flex-row gap-3 py-3 px-4 border-b border-b-muted font-medium bg-muted items-center justify-between",children:["Getting started",m.jsx(kq,{className:"size-5"})]}),m.jsx(sv,{title:"Enable authentication",done:s,to:ut.auth.settings()}),m.jsx(sv,{title:"Create Roles",done:c>0,to:h}),m.jsx(sv,{title:"Create an user",done:a>0,to:f}),m.jsx(sv,{title:"Enable a second strategy",done:u>1,to:p})]}),m.jsxs("div",{className:"grid xs:grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-5 flex-grow",children:[m.jsx(a_,{title:"Users registered",value:s?a:0,actions:[{label:"View all",href:f},{label:"Add new",variant:"default",href:f}]}),m.jsx(a_,{title:"Roles",value:s?c:0,actions:[{label:"View all",href:h},{label:"Manage",variant:"default",href:h}]}),m.jsx(a_,{title:"Strategies enabled",value:s?u:0,actions:[{label:"View all",href:p},{label:"Manage",variant:"default",href:p}]})]})]})]})]})}const a_=({title:e,value:t,actions:n})=>m.jsxs("div",{className:"flex flex-col border border-muted h-auto self-start",children:[m.jsxs("div",{className:"flex flex-col gap-2 px-5 pt-3.5 pb-4 border-b border-b-muted",children:[m.jsx("div",{children:m.jsx("span",{className:"opacity-50",children:e})}),m.jsx("div",{className:"text-4xl font-medium",children:t})]}),m.jsx("div",{className:"flex flex-row gap-3 p-3 justify-between",children:n.map((r,s)=>m.jsx(zO,{size:"small",variant:"ghost",href:"#",...r,children:r.label},s))})]}),sv=({title:e,done:t=!1,to:n})=>{const[r]=Dn();return m.jsx("div",{className:"flex border-b border-b-muted",children:m.jsxs("div",{className:yn("flex flex-1 flex-row gap-3 py-3 px-4",t&&"opacity-50"),children:[m.jsxs("div",{className:"flex flex-row flex-1 gap-3 items-center",children:[t?m.jsx(mSe,{className:"size-5"}):m.jsx(RSe,{className:"size-5"}),m.jsx("p",{className:yn("font-medium text-primary/80 leading-none",t?"line-through":""),children:e})]}),n&&m.jsx(xt,{Icon:bSe,onClick:()=>r(n)})]})})},$$=w.createContext(null);$$.displayName="@mantine/modals/ModalsContext";function OEe(){const e=w.useContext($$);if(!e)throw new Error("[@mantine/modals] useModals hook was called outside of context, wrap your app with ModalsProvider component");return e}function jEe({id:e,cancelProps:t,confirmProps:n,labels:r={cancel:"",confirm:""},closeOnConfirm:s=!0,closeOnCancel:i=!0,groupProps:o,onCancel:a,onConfirm:c,children:u}){const{cancel:f,confirm:h}=r,p=OEe(),y=x=>{typeof(t==null?void 0:t.onClick)=="function"&&(t==null||t.onClick(x)),typeof a=="function"&&a(),i&&p.closeModal(e)},v=x=>{typeof(n==null?void 0:n.onClick)=="function"&&(n==null||n.onClick(x)),typeof c=="function"&&c(),s&&p.closeModal(e)};return m.jsxs(m.Fragment,{children:[u&&m.jsx(Ve,{mb:"md",children:u}),m.jsxs(vA,{mt:u?0:"md",justify:"flex-end",...o,children:[m.jsx(Xu,{variant:"default",...t,onClick:y,children:(t==null?void 0:t.children)||f}),m.jsx(Xu,{...n,onClick:v,children:(n==null?void 0:n.children)||h})]})]})}const[AEe,R$]=lZ("mantine-modals"),TEe=e=>{const t=e.modalId||Wf();return R$("openContextModal")({...e,modalId:t}),t},$Ee=R$("closeModal"),REe=R$("closeAllModals"),zq={closeAll:REe};function $P(e,t){var n,r,s,i;t&&e.type==="confirm"&&((r=(n=e.props).onCancel)==null||r.call(n)),(i=(s=e.props).onClose)==null||i.call(s)}function kEe(e,t){var n;switch(t.type){case"OPEN":return{current:t.modal,modals:[...e.modals,t.modal]};case"CLOSE":{const r=e.modals.find(i=>i.id===t.modalId);if(!r)return e;$P(r,t.canceled);const s=e.modals.filter(i=>i.id!==t.modalId);return{current:s[s.length-1]||e.current,modals:s}}case"CLOSE_ALL":return e.modals.length?(e.modals.concat().reverse().forEach(r=>{$P(r,t.canceled)}),{current:e.current,modals:[]}):e;case"UPDATE":{const{modalId:r,newProps:s}=t,i=e.modals.map(a=>a.id!==r?a:a.type==="content"||a.type==="confirm"?{...a,props:{...a.props,...s}}:a.type==="context"?{...a,props:{...a.props,...s,innerProps:{...a.props.innerProps,...s.innerProps}}}:a),o=((n=e.current)==null?void 0:n.id)===r&&i.find(a=>a.id===r)||e.current;return{...e,modals:i,current:o}}default:return e}}function MEe(e){if(!e)return{confirmProps:{},modalProps:{}};const{id:t,children:n,onCancel:r,onConfirm:s,closeOnConfirm:i,closeOnCancel:o,cancelProps:a,confirmProps:c,groupProps:u,labels:f,...h}=e;return{confirmProps:{id:t,children:n,onCancel:r,onConfirm:s,closeOnConfirm:i,closeOnCancel:o,cancelProps:a,confirmProps:c,groupProps:u,labels:f},modalProps:{id:t,...h}}}function IEe({children:e,modalProps:t,labels:n,modals:r}){const[s,i]=w.useReducer(kEe,{modals:[],current:null}),o=w.useRef(s);o.current=s;const a=w.useCallback(_=>{i({type:"CLOSE_ALL",canceled:_})},[o,i]),c=w.useCallback(({modalId:_,...C})=>{const j=_||Wf();return i({type:"OPEN",modal:{id:j,type:"content",props:C}}),j},[i]),u=w.useCallback(({modalId:_,...C})=>{const j=_||Wf();return i({type:"OPEN",modal:{id:j,type:"confirm",props:C}}),j},[i]),f=w.useCallback((_,{modalId:C,...j})=>{const A=C||Wf();return i({type:"OPEN",modal:{id:A,type:"context",props:j,ctx:_}}),A},[i]),h=w.useCallback((_,C)=>{i({type:"CLOSE",modalId:_,canceled:C})},[o,i]),p=w.useCallback(({modalId:_,...C})=>{i({type:"UPDATE",modalId:_,newProps:C})},[i]),y=w.useCallback(({modalId:_,...C})=>{i({type:"UPDATE",modalId:_,newProps:C})},[i]);AEe({openModal:c,openConfirmModal:u,openContextModal:({modal:_,...C})=>f(_,C),closeModal:h,closeContextModal:h,closeAllModals:a,updateModal:p,updateContextModal:y});const v={modalProps:t||{},modals:s.modals,openModal:c,openConfirmModal:u,openContextModal:f,closeModal:h,closeContextModal:h,closeAll:a,updateModal:p,updateContextModal:y},x=()=>{const _=o.current.current;switch(_==null?void 0:_.type){case"context":{const{innerProps:C,...j}=_.props,A=r[_.ctx];return{modalProps:j,content:m.jsx(A,{innerProps:C,context:v,id:_.id})}}case"confirm":{const{modalProps:C,confirmProps:j}=MEe(_.props);return{modalProps:C,content:m.jsx(jEe,{...j,id:_.id,labels:_.props.labels||n})}}case"content":{const{children:C,...j}=_.props;return{modalProps:j,content:C}}default:return{modalProps:{},content:null}}},{modalProps:E,content:N}=x();return m.jsxs($$.Provider,{value:v,children:[m.jsx(Ls,{zIndex:to("modal")+1,...t,...E,opened:s.modals.length>0,onClose:()=>{var _;return h((_=s.current)==null?void 0:_.id)},children:N}),e]})}function k$({context:e,id:t,innerProps:{content:n}}){return n}k$.defaultTitle=void 0;k$.modalProps={withCloseButton:!1,classNames:{size:"md",root:"bknd-admin",content:"text-center justify-center",title:"font-bold !text-md",body:"py-3 px-5 gap-4 flex flex-col"}};const PEe=e=>typeof e=="boolean"||e instanceof Boolean,DEe=e=>typeof e=="number"||e instanceof Number,LEe=e=>typeof e=="bigint"||e instanceof BigInt,Vq=e=>!!e&&e instanceof Date,FEe=e=>typeof e=="string"||e instanceof String,BEe=e=>Array.isArray(e),zEe=e=>typeof e=="object"&&e!==null,Uq=e=>!!e&&e instanceof Object&&typeof e=="function";function Hx(e,t){return t===void 0&&(t=!1),!e||t?`"${e}"`:e}function VEe(e,t,n){return n?JSON.stringify(e):t?`"${e}"`:e}function qq(e){let{field:t,value:n,data:r,lastElement:s,openBracket:i,closeBracket:o,level:a,style:c,shouldExpandNode:u,clickToExpandNode:f,outerRef:h,beforeExpandChange:p}=e;const y=w.useRef(!1),[v,x]=w.useState(()=>u(a,n,t)),E=w.useRef(null);w.useEffect(()=>{y.current?x(u(a,n,t)):y.current=!0},[u]);const N=w.useId();if(r.length===0)return UEe({field:t,openBracket:i,closeBracket:o,lastElement:s,style:c});const _=v?c.collapseIcon:c.expandIcon,C=v?c.ariaLables.collapseJson:c.ariaLables.expandJson,j=a+1,A=r.length-1,$=B=>{v!==B&&(!p||p({level:a,value:n,field:t,newExpandValue:B}))&&x(B)},k=B=>{if(B.key==="ArrowRight"||B.key==="ArrowLeft")B.preventDefault(),$(B.key==="ArrowRight");else if(B.key==="ArrowUp"||B.key==="ArrowDown"){B.preventDefault();const z=B.key==="ArrowUp"?-1:1;if(!h.current)return;const D=h.current.querySelectorAll("[role=button]");let L=-1;for(let M=0;M<D.length;M++)if(D[M].tabIndex===0){L=M;break}if(L<0)return;const H=(L+z+D.length)%D.length;D[L].tabIndex=-1,D[H].tabIndex=0,D[H].focus()}},R=()=>{var B;$(!v);const z=E.current;if(!z)return;const D=(B=h.current)===null||B===void 0?void 0:B.querySelector('[role=button][tabindex="0"]');D&&(D.tabIndex=-1),z.tabIndex=0,z.focus()};return w.createElement("div",{className:c.basicChildStyle,role:"treeitem","aria-expanded":v,"aria-selected":void 0},w.createElement("span",{className:_,onClick:R,onKeyDown:k,role:"button","aria-label":C,"aria-expanded":v,"aria-controls":v?N:void 0,ref:E,tabIndex:a===0?0:-1}),(t||t==="")&&(f?w.createElement("span",{className:c.clickableLabel,onClick:R,onKeyDown:k},Hx(t,c.quotesForFieldNames),":"):w.createElement("span",{className:c.label},Hx(t,c.quotesForFieldNames),":")),w.createElement("span",{className:c.punctuation},i),v?w.createElement("ul",{id:N,role:"group",className:c.childFieldsContainer},r.map((B,z)=>w.createElement(Hq,{key:B[0]||z,field:B[0],value:B[1],style:c,lastElement:z===A,level:j,shouldExpandNode:u,clickToExpandNode:f,outerRef:h}))):w.createElement("span",{className:c.collapsedContent,onClick:R,onKeyDown:k}),w.createElement("span",{className:c.punctuation},o),!s&&w.createElement("span",{className:c.punctuation},","))}function UEe(e){let{field:t,openBracket:n,closeBracket:r,lastElement:s,style:i}=e;return w.createElement("div",{className:i.basicChildStyle,role:"treeitem","aria-selected":void 0},(t||t==="")&&w.createElement("span",{className:i.label},Hx(t,i.quotesForFieldNames),":"),w.createElement("span",{className:i.punctuation},n),w.createElement("span",{className:i.punctuation},r),!s&&w.createElement("span",{className:i.punctuation},","))}function qEe(e){let{field:t,value:n,style:r,lastElement:s,shouldExpandNode:i,clickToExpandNode:o,level:a,outerRef:c,beforeExpandChange:u}=e;return qq({field:t,value:n,lastElement:s||!1,level:a,openBracket:"{",closeBracket:"}",style:r,shouldExpandNode:i,clickToExpandNode:o,data:Object.keys(n).map(f=>[f,n[f]]),outerRef:c,beforeExpandChange:u})}function HEe(e){let{field:t,value:n,style:r,lastElement:s,level:i,shouldExpandNode:o,clickToExpandNode:a,outerRef:c,beforeExpandChange:u}=e;return qq({field:t,value:n,lastElement:s||!1,level:i,openBracket:"[",closeBracket:"]",style:r,shouldExpandNode:o,clickToExpandNode:a,data:n.map(f=>[void 0,f]),outerRef:c,beforeExpandChange:u})}function WEe(e){let{field:t,value:n,style:r,lastElement:s}=e,i,o=r.otherValue;return n===null?(i="null",o=r.nullValue):n===void 0?(i="undefined",o=r.undefinedValue):FEe(n)?(i=VEe(n,!r.noQuotesForStringValues,r.stringifyStringValues),o=r.stringValue):PEe(n)?(i=n?"true":"false",o=r.booleanValue):DEe(n)?(i=n.toString(),o=r.numberValue):LEe(n)?(i=`${n.toString()}n`,o=r.numberValue):Vq(n)?i=n.toISOString():Uq(n)?i="function() { }":i=n.toString(),w.createElement("div",{className:r.basicChildStyle,role:"treeitem","aria-selected":void 0},(t||t==="")&&w.createElement("span",{className:r.label},Hx(t,r.quotesForFieldNames),":"),w.createElement("span",{className:o},i),!s&&w.createElement("span",{className:r.punctuation},","))}function Hq(e){const t=e.value;return BEe(t)?w.createElement(HEe,Object.assign({},e)):zEe(t)&&!Vq(t)&&!Uq(t)?w.createElement(qEe,Object.assign({},e)):w.createElement(WEe,Object.assign({},e))}var $r={"container-light":"_2IvMF _GzYRV","basic-element-style":"_2bkNM","child-fields-container":"_1BXBN","label-light":"_1MGIk","clickable-label-light":"_2YKJg _1MGIk _1MFti","punctuation-light":"_3uHL6 _3eOF8","value-null-light":"_2T6PJ","value-undefined-light":"_1Gho6","value-string-light":"_vGjyY","value-number-light":"_1bQdo","value-boolean-light":"_3zQKs","value-other-light":"_1xvuR","collapse-icon-light":"_oLqym _f10Tu _1MFti _1LId0","expand-icon-light":"_2AXVT _f10Tu _1MFti _1UmXx","collapsed-content-light":"_2KJWg _1pNG9 _1MFti"};const GEe={collapseJson:"collapse JSON",expandJson:"expand JSON"},RP={container:$r["container-light"],basicChildStyle:$r["basic-element-style"],childFieldsContainer:$r["child-fields-container"],label:$r["label-light"],clickableLabel:$r["clickable-label-light"],nullValue:$r["value-null-light"],undefinedValue:$r["value-undefined-light"],stringValue:$r["value-string-light"],booleanValue:$r["value-boolean-light"],numberValue:$r["value-number-light"],otherValue:$r["value-other-light"],punctuation:$r["punctuation-light"],collapseIcon:$r["collapse-icon-light"],expandIcon:$r["expand-icon-light"],collapsedContent:$r["collapsed-content-light"],noQuotesForStringValues:!1,quotesForFieldNames:!1,ariaLables:GEe,stringifyStringValues:!1},YEe=()=>!0,JEe=e=>{let{data:t,style:n=RP,shouldExpandNode:r=YEe,clickToExpandNode:s=!1,beforeExpandChange:i,...o}=e;const a=w.useRef(null);return w.createElement("div",Object.assign({"aria-label":"JSON view"},o,{className:n.container,ref:a,role:"tree"}),w.createElement(Hq,{value:t,style:{...RP,...n},lastElement:!0,level:0,shouldExpandNode:r,clickToExpandNode:s,outerRef:a,beforeExpandChange:i}))};let bm=class extends w.Component{constructor(n){super(n);K(this,"resetError",()=>{this.setState({hasError:!1,error:void 0})});this.state={hasError:!1,error:void 0}}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){const s=this.props.suppressError?"warn":"error";console[s]("ErrorBoundary caught an error:",n,r)}renderFallback(){var n;return this.props.fallback?typeof this.props.fallback=="function"?this.props.fallback({error:this.state.error,resetError:this.resetError}):m.jsx(kP,{children:this.props.fallback}):m.jsx(kP,{children:((n=this.state.error)==null?void 0:n.message)??"Unknown error"})}render(){if(this.state.hasError)return this.renderFallback();if(this.props.suppressError)try{return this.props.children}catch{return this.renderFallback()}return this.props.children}};const kP=({children:e})=>m.jsx("div",{className:"bg-red-700 text-white py-1 px-2 rounded-md leading-tight font-mono",children:e}),XEe={basicChildStyle:"pl-5 ml-1 border-l border-muted hover:border-primary/20",container:"ml-[-10px]",label:"text-primary/90 font-bold font-mono mr-2",stringValue:"text-emerald-600 dark:text-emerald-500 font-mono select-text text-wrap whitespace-wrap break-words",numberValue:"text-sky-500 dark:text-sky-400 font-mono select-text",nullValue:"text-zinc-400 font-mono",undefinedValue:"text-zinc-400 font-mono",otherValue:"text-zinc-400 font-mono",booleanValue:"text-orange-500 dark:text-orange-400 font-mono",punctuation:"text-zinc-400 font-bold font-mono m-0.5",collapsedContent:"text-zinc-400 font-mono after:content-['...']",collapseIcon:"text-zinc-400 font-mono font-bold text-lg after:content-[''] mr-1.5",expandIcon:"text-zinc-400 font-mono font-bold text-lg after:content-[''] mr-1.5",noQuotesForStringValues:!1},fs=({json:e,title:t,expand:n=0,showSize:r=!1,showCopy:s=!1,copyIconProps:i={},className:o})=>{const a=r?e?JSON.stringify(e).length:0:void 0,c=b1.fileSize(a??0),u=a||t||s;function f(){var h;(h=navigator.clipboard)==null||h.writeText(JSON.stringify(e,null,2))}return m.jsxs("div",{className:qe("bg-primary/5 py-3 relative overflow-hidden",o),children:[u&&m.jsxs("div",{className:"absolute right-4 top-3 font-mono text-zinc-400 flex flex-row gap-2 items-center",children:[(t||a!==void 0)&&m.jsxs("div",{className:"flex flex-row",children:[t&&m.jsx("span",{children:t})," ",a!==void 0&&m.jsxs("span",{children:["(",c,")"]})]}),s&&m.jsx("div",{children:m.jsx(xt,{Icon:Tq,onClick:f,...i})})]}),m.jsx(bm,{children:m.jsx(JEe,{data:e,shouldExpandNode:h=>h<n,style:XEe})})]})},KEe=w.forwardRef(({tabs:e,...t},n)=>{const r=Object.fromEntries(Object.entries(e).filter(([o,a])=>a.enabled!==!1)),[s,i]=w.useState(t.selected??Object.keys(r)[0]);return w.useImperativeHandle(n,()=>({setSelected:i})),m.jsxs("div",{className:"flex flex-col bg-primary/5 rounded-md flex-shrink-0",children:[m.jsx("div",{className:"flex flex-row gap-4 border-b px-3 border-primary/10 min-w-0",children:Object.keys(r).map(o=>m.jsx("button",{type:"button",className:qe("flex flex-row text-sm cursor-pointer py-3 pt-3.5 px-1 border-b border-transparent -mb-px transition-opacity flex-shrink-0",s===o?"border-primary":"opacity-50 hover:opacity-70"),onClick:()=>i(o),children:m.jsx("span",{className:"font-mono leading-none truncate",children:o})},o))}),m.jsx(fs,{className:"bg-transparent overflow-x-auto",...t,...r[s],title:void 0})]})}),QEe=w.forwardRef(({classNames:e,children:t,opened:n,closeOnClickOutside:r=!1,...s},i)=>{const[o,{open:a,close:c}]=gm(n);return w.useImperativeHandle(i,()=>({open:a,close:c})),m.jsx(Ls,{withCloseButton:!1,padding:0,size:"xl",opened:o,...s,closeOnClickOutside:r,onClose:c,classNames:{...e,root:"bknd-admin",content:"rounded-lg select-none"},children:t})}),bu=({path:e,onClose:t})=>m.jsxs("div",{className:"py-3 px-5 font-bold bg-lightest flex flex-row justify-between items-center sticky top-0 left-0 right-0 z-10 border-none",children:[m.jsx("div",{className:"flex flex-row gap-1",children:e.map((n,r)=>{const s=r+1===e.length;return m.jsxs(w.Fragment,{children:[m.jsx("span",{className:qe("",!s&&"opacity-70"),children:n},r),!s&&m.jsx("span",{className:"opacity-40",children:"/"})]},r)})}),m.jsx(xt,{Icon:A$,onClick:t})]}),Nd=({children:e,className:t})=>m.jsxs(gq,{className:qe("flex flex-col min-h-96",t),style:{maxHeight:"calc(80vh)"},children:[m.jsx(yq,{className:"w-full h-full",children:m.jsx("div",{className:"py-3 px-5 gap-4 flex flex-col",children:e})}),m.jsx(Bx,{forceMount:!0,className:"flex select-none touch-none bg-transparent w-0.5",orientation:"vertical",children:m.jsx(zx,{className:"flex-1 bg-primary/50"})}),m.jsx(Bx,{forceMount:!0,className:"flex select-none touch-none bg-muted flex-col h-0.5",orientation:"horizontal",children:m.jsx(zx,{className:"flex-1 bg-primary/50 "})})]}),_d=({next:e,prev:t,nextLabel:n="Next",prevLabel:r="Back",debug:s})=>{const[i,o]=gm(!1);return m.jsx("div",{className:"flex flex-col border-t border-t-muted",children:m.jsxs("div",{className:"flex flex-row justify-between items-center py-3 px-4",children:[m.jsx("div",{children:s&&m.jsxs(as,{position:"right-start",shadow:"md",opened:i,classNames:{dropdown:"!px-1 !pr-2.5 !py-2 text-sm"},children:[m.jsx(as.Target,{children:m.jsx(xt,{onClick:o.toggle,Icon:bU,variant:i?"default":"ghost"})}),m.jsx(as.Dropdown,{children:m.jsx(fs,{json:s,expand:6,className:"p-0"})})]})}),m.jsxs("div",{className:"flex flex-row gap-2",children:[m.jsx(st,{className:"w-24 justify-center",...t,children:r}),m.jsx(st,{className:"w-24 justify-center",variant:"primary",...e,children:n})]})]})})},Wq=w.createContext(void 0);function Gq({children:e,initialPath:t=[],initialState:n={},lastBack:r}){const[s,i]=w.useState(n),[o,a]=w.useState(t),c=w.Children.toArray(e).filter(p=>p.props.disabled!==!0);function u(){o.length===0?r==null||r():a(p=>p.slice(0,-1))}const f=p=>()=>{a(y=>[...y,p])},h=c.find(p=>p.props.id===o[o.length-1])||c[0];return m.jsx(Wq.Provider,{value:{nextStep:f,stepBack:u,state:s,path:o,setState:i,close:r},children:h})}function Cd(){return w.useContext(Wq)}function vu({children:e,disabled:t=!1,path:n=[],id:r,...s}){return m.jsx("div",{...s,children:e})}function Fs(){const{config:e,app:t,schema:n,actions:r}=dt(),s=tn(e.data.entities??{},(a,c)=>XT(c,a)),i={entity:{add:async(a,c)=>{const u=Un(YT,c,{skipMark:!0,forceParse:!0});return await r.add("data",`entities.${a}`,u)},patch:a=>{if(!s[a])throw new Error(`Entity "${a}" not found`);return{config:async u=>await r.overwrite("data",`entities.${a}.config`,u),fields:e2e(r,a)}}},relations:{add:async a=>{const c=crypto.randomUUID(),u=Un(Qt(JT),a,{skipMark:!0,forceParse:!0});return await r.add("data",`relations.${c}`,u)}}};return{$data:{entity:a=>s[a],modals:ZEe,system:a=>{var c;return{any:((c=s[a])==null?void 0:c.type)==="system",users:a===e.auth.entity_name,media:a===e.media.entity_name}}},entities:s,relations:t.relations,config:e.data,schema:n.data,actions:i}}const ZEe={createAny:()=>Nr.open(Nr.ids.dataCreate,{}),createEntity:()=>Nr.open(Nr.ids.dataCreate,{initialPath:["entities","entity"],initialState:{action:"entity"}}),createRelation:e=>Nr.open(Nr.ids.dataCreate,{initialPath:["entities","relation"],initialState:{action:"relation",relations:{create:[{source:e,type:"n:1"}]}}}),createMedia:e=>Nr.open(Nr.ids.dataCreate,{initialPath:["entities","template-media"],initialState:{action:"template-media",initial:{entity:e}}})};function e2e(e,t){return{add:async(n,r)=>{const s=Un(GT,r,{skipMark:!0,forceParse:!0});return await e.add("data",`entities.${t}.fields.${n}`,s)},patch:()=>null,set:async n=>{try{const r=Un(DV,n,{skipMark:!0,forceParse:!0}),s=await e.overwrite("data",`entities.${t}.fields`,r)}catch(r){console.error("error",r),r instanceof E1?alert("Error updating fields: "+r.firstToString()):alert("An error occured, check console. There will be nice error handling soon.")}}}}function t2e(){var h,p,y;const{stepBack:e,state:t,close:n}=Cd(),[r,s]=w.useState([]),[i,o]=w.useState(!1),a=Fs(),c=dt(),u=[];(h=t.entities)!=null&&h.create&&u.push(...t.entities.create.map(v=>({action:"add",Icon:fxe,type:"Entity",name:v.name,json:v,run:async()=>await a.actions.entity.add(v.name,v)}))),(p=t.fields)!=null&&p.create&&u.push(...t.fields.create.map(v=>({action:"add",Icon:d$,type:"Field",name:v.name,json:v,run:async()=>await a.actions.entity.patch(v.entity).fields.add(v.name,v.field)}))),(y=t.relations)!=null&&y.create&&u.push(...t.relations.create.map(v=>({action:"add",Icon:f$,type:"Relation",name:`${v.source} -> ${v.target} (${v.type})`,json:v,run:async()=>await a.actions.relations.add(v)})));async function f(){o(!0);for(const v of u)try{const x=await v.run();if(s(E=>[...E,x]),x!==!0)break}catch(x){s(E=>[...E,x.message])}}return w.useEffect(()=>{console.log("states",r,u,r.length,u.length,r.every(v=>v===!0)),u.length===r.length&&r.every(v=>v===!0)?c.actions.reload().then(n):o(!1)},[r]),m.jsxs(m.Fragment,{children:[m.jsxs(Nd,{children:[m.jsx("div",{children:'This is what will be created. Please confirm by clicking "Next".'}),m.jsx("div",{className:"flex flex-col gap-1",children:u.map((v,x)=>m.jsx(n2e,{...v,state:r[x]},x))})]}),m.jsx(_d,{nextLabel:"Create",next:{onClick:f,disabled:i},prev:{onClick:e,disabled:i},debug:{state:t}})]})}const n2e=({Icon:e,type:t,name:n,json:r,state:s,action:i,initialExpanded:o=!1})=>{const[a,c]=gm(o),u=typeof s<"u"&&s!==!0,f=s===!0;return m.jsxs("div",{className:qe("flex flex-col border border-muted rounded bg-background mb-2",u&&"bg-red-500/20",f&&"bg-green-500/20"),children:[m.jsxs("div",{className:"flex flex-row gap-4 px-2 py-2 items-center",children:[m.jsx("div",{className:"flex flex-row items-center p-1 bg-primary/5 rounded",children:m.jsx(e,{className:"w-6 h-6"})}),m.jsxs("div",{className:"flex flex-row flex-grow gap-5",children:[m.jsx(l_,{type:"action",name:i}),m.jsx(l_,{type:"type",name:t}),m.jsx(l_,{type:"name",name:n})]}),r&&m.jsx(xt,{Icon:Sxe,variant:a?"default":"ghost",onClick:c.toggle})]}),r&&a&&m.jsx("div",{className:"flex flex-col border-t border-t-muted",children:m.jsx(fs,{json:r,expand:8,className:"text-sm"})}),u&&typeof s=="string"&&m.jsx("div",{className:"text-sm text-red-500",children:s})]})},l_=({type:e,name:t})=>m.jsxs("div",{className:"flex flex-row text-sm font-mono gap-2",children:[m.jsx("div",{className:"opacity-50",children:ci(e)}),m.jsx("div",{className:"font-semibold",children:t})]});var i0=e=>e.type==="checkbox",Au=e=>e instanceof Date,zr=e=>e==null;const Yq=e=>typeof e=="object";var Pn=e=>!zr(e)&&!Array.isArray(e)&&Yq(e)&&!Au(e),Jq=e=>Pn(e)&&e.target?i0(e.target)?e.target.checked:e.target.value:e,r2e=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Xq=(e,t)=>e.has(r2e(t)),s2e=e=>{const t=e.constructor&&e.constructor.prototype;return Pn(t)&&t.hasOwnProperty("isPrototypeOf")},M$=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function cn(e){let t;const n=Array.isArray(e),r=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(M$&&(e instanceof Blob||r))&&(n||Pn(e)))if(t=n?[]:{},!n&&!s2e(e))t=e;else for(const s in e)e.hasOwnProperty(s)&&(t[s]=cn(e[s]));else return e;return t}var aS=e=>/^\w*$/.test(e),dn=e=>e===void 0,lS=e=>Array.isArray(e)?e.filter(Boolean):[],I$=e=>lS(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Le=(e,t,n)=>{if(!t||!Pn(e))return n;const r=(aS(t)?[t]:I$(t)).reduce((s,i)=>zr(s)?s:s[i],e);return dn(r)||r===e?dn(e[t])?n:e[t]:r},Ns=e=>typeof e=="boolean",Bt=(e,t,n)=>{let r=-1;const s=aS(t)?[t]:I$(t),i=s.length,o=i-1;for(;++r<i;){const a=s[r];let c=n;if(r!==o){const u=e[a];c=Pn(u)||Array.isArray(u)?u:isNaN(+s[r+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;e[a]=c,e=e[a]}};const Wx={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},ei={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},la={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Kq=je.createContext(null);Kq.displayName="HookFormContext";const cS=()=>je.useContext(Kq);var Qq=(e,t,n,r=!0)=>{const s={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(s,i,{get:()=>{const o=i;return t._proxyFormState[o]!==ei.all&&(t._proxyFormState[o]=!r||ei.all),n&&(n[o]=!0),e[o]}});return s};const uS=typeof window<"u"?je.useLayoutEffect:je.useEffect;function i2e(e){const t=cS(),{control:n=t.control,disabled:r,name:s,exact:i}=e||{},[o,a]=je.useState(n._formState),c=je.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return uS(()=>n._subscribe({name:s,formState:c.current,exact:i,callback:u=>{!r&&a({...n._formState,...u})}}),[s,r,i]),je.useEffect(()=>{c.current.isValid&&n._setValid(!0)},[n]),je.useMemo(()=>Qq(o,n,c.current,!1),[o,n])}var _o=e=>typeof e=="string",Zq=(e,t,n,r,s)=>_o(e)?(r&&t.watch.add(e),Le(n,e,s)):Array.isArray(e)?e.map(i=>(r&&t.watch.add(i),Le(n,i))):(r&&(t.watchAll=!0),n),WO=e=>zr(e)||!Yq(e);function Ea(e,t,n=new WeakSet){if(WO(e)||WO(t))return e===t;if(Au(e)&&Au(t))return e.getTime()===t.getTime();const r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;if(n.has(e)||n.has(t))return!0;n.add(e),n.add(t);for(const i of r){const o=e[i];if(!s.includes(i))return!1;if(i!=="ref"){const a=t[i];if(Au(o)&&Au(a)||Pn(o)&&Pn(a)||Array.isArray(o)&&Array.isArray(a)?!Ea(o,a,n):o!==a)return!1}}return!0}function o2e(e){const t=cS(),{control:n=t.control,name:r,defaultValue:s,disabled:i,exact:o,compute:a}=e||{},c=je.useRef(s),u=je.useRef(a),f=je.useRef(void 0);u.current=a;const h=je.useMemo(()=>n._getWatch(r,c.current),[n,r]),[p,y]=je.useState(u.current?u.current(h):h);return uS(()=>n._subscribe({name:r,formState:{values:!0},exact:o,callback:v=>{if(!i){const x=Zq(r,n._names,v.values||n._formValues,!1,c.current);if(u.current){const E=u.current(x);Ea(E,f.current)||(y(E),f.current=E)}else y(x)}}}),[n,i,r,o]),je.useEffect(()=>n._removeUnmounted()),p}function Od(e){const t=cS(),{name:n,disabled:r,control:s=t.control,shouldUnregister:i,defaultValue:o}=e,a=Xq(s._names.array,n),c=je.useMemo(()=>Le(s._formValues,n,Le(s._defaultValues,n,o)),[s,n,o]),u=o2e({control:s,name:n,defaultValue:c,exact:!0}),f=i2e({control:s,name:n,exact:!0}),h=je.useRef(e),p=je.useRef(s.register(n,{...e.rules,value:u,...Ns(e.disabled)?{disabled:e.disabled}:{}}));h.current=e;const y=je.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Le(f.errors,n)},isDirty:{enumerable:!0,get:()=>!!Le(f.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!Le(f.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!Le(f.validatingFields,n)},error:{enumerable:!0,get:()=>Le(f.errors,n)}}),[f,n]),v=je.useCallback(_=>p.current.onChange({target:{value:Jq(_),name:n},type:Wx.CHANGE}),[n]),x=je.useCallback(()=>p.current.onBlur({target:{value:Le(s._formValues,n),name:n},type:Wx.BLUR}),[n,s._formValues]),E=je.useCallback(_=>{const C=Le(s._fields,n);C&&_&&(C._f.ref={focus:()=>_.focus&&_.focus(),select:()=>_.select&&_.select(),setCustomValidity:j=>_.setCustomValidity(j),reportValidity:()=>_.reportValidity()})},[s._fields,n]),N=je.useMemo(()=>({name:n,value:u,...Ns(r)||f.disabled?{disabled:f.disabled||r}:{},onChange:v,onBlur:x,ref:E}),[n,r,f.disabled,v,x,E,u]);return je.useEffect(()=>{const _=s._options.shouldUnregister||i;s.register(n,{...h.current.rules,...Ns(h.current.disabled)?{disabled:h.current.disabled}:{}});const C=(j,A)=>{const $=Le(s._fields,j);$&&$._f&&($._f.mount=A)};if(C(n,!0),_){const j=cn(Le(s._options.defaultValues,n));Bt(s._defaultValues,n,j),dn(Le(s._formValues,n))&&Bt(s._formValues,n,j)}return!a&&s.register(n),()=>{(a?_&&!s._state.action:_)?s.unregister(n):C(n,!1)}},[n,s,a,i]),je.useEffect(()=>{s._setDisabledField({disabled:r,name:n})},[r,n,s]),je.useMemo(()=>({field:N,formState:f,fieldState:y}),[N,f,y])}var a2e=(e,t,n,r,s)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[r]:s||!0}}:{},ss=e=>Array.isArray(e)?e:[e],MP=()=>{let e=[];return{get observers(){return e},next:s=>{for(const i of e)i.next&&i.next(s)},subscribe:s=>(e.push(s),{unsubscribe:()=>{e=e.filter(i=>i!==s)}}),unsubscribe:()=>{e=[]}}},Fr=e=>Pn(e)&&!Object.keys(e).length,P$=e=>e.type==="file",Fi=e=>typeof e=="function",Gx=e=>{if(!M$)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},eH=e=>e.type==="select-multiple",D$=e=>e.type==="radio",l2e=e=>D$(e)||i0(e),c_=e=>Gx(e)&&e.isConnected;function c2e(e,t){const n=t.slice(0,-1).length;let r=0;for(;r<n;)e=dn(e)?r++:e[t[r++]];return e}function u2e(e){for(const t in e)if(e.hasOwnProperty(t)&&!dn(e[t]))return!1;return!0}function kn(e,t){const n=Array.isArray(t)?t:aS(t)?[t]:I$(t),r=n.length===1?e:c2e(e,n),s=n.length-1,i=n[s];return r&&delete r[i],s!==0&&(Pn(r)&&Fr(r)||Array.isArray(r)&&u2e(r))&&kn(e,n.slice(0,-1)),e}var tH=e=>{for(const t in e)if(Fi(e[t]))return!0;return!1};function Yx(e,t={}){const n=Array.isArray(e);if(Pn(e)||n)for(const r in e)Array.isArray(e[r])||Pn(e[r])&&!tH(e[r])?(t[r]=Array.isArray(e[r])?[]:{},Yx(e[r],t[r])):zr(e[r])||(t[r]=!0);return t}function nH(e,t,n){const r=Array.isArray(e);if(Pn(e)||r)for(const s in e)Array.isArray(e[s])||Pn(e[s])&&!tH(e[s])?dn(t)||WO(n[s])?n[s]=Array.isArray(e[s])?Yx(e[s],[]):{...Yx(e[s])}:nH(e[s],zr(t)?{}:t[s],n[s]):n[s]=!Ea(e[s],t[s]);return n}var Lp=(e,t)=>nH(e,t,Yx(t));const IP={value:!1,isValid:!1},PP={value:!0,isValid:!0};var rH=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!dn(e[0].attributes.value)?dn(e[0].value)||e[0].value===""?PP:{value:e[0].value,isValid:!0}:PP:IP}return IP},sH=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:r})=>dn(e)?e:t?e===""?NaN:e&&+e:n&&_o(e)?new Date(e):r?r(e):e;const DP={isValid:!1,value:null};var iH=e=>Array.isArray(e)?e.reduce((t,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:t,DP):DP;function LP(e){const t=e.ref;return P$(t)?t.files:D$(t)?iH(e.refs).value:eH(t)?[...t.selectedOptions].map(({value:n})=>n):i0(t)?rH(e.refs).value:sH(dn(t.value)?e.ref.value:t.value,e)}var d2e=(e,t,n,r)=>{const s={};for(const i of e){const o=Le(t,i);o&&Bt(s,i,o._f)}return{criteriaMode:n,names:[...e],fields:s,shouldUseNativeValidation:r}},Jx=e=>e instanceof RegExp,Fp=e=>dn(e)?e:Jx(e)?e.source:Pn(e)?Jx(e.value)?e.value.source:e.value:e,Vf=e=>({isOnSubmit:!e||e===ei.onSubmit,isOnBlur:e===ei.onBlur,isOnChange:e===ei.onChange,isOnAll:e===ei.all,isOnTouch:e===ei.onTouched});const FP="AsyncFunction";var f2e=e=>!!e&&!!e.validate&&!!(Fi(e.validate)&&e.validate.constructor.name===FP||Pn(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===FP)),h2e=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),GO=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(r=>e.startsWith(r)&&/^\.\w+/.test(e.slice(r.length))));const Xf=(e,t,n,r)=>{for(const s of n||Object.keys(e)){const i=Le(e,s);if(i){const{_f:o,...a}=i;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],s)&&!r)return!0;if(o.ref&&t(o.ref,o.name)&&!r)return!0;if(Xf(a,t))break}else if(Pn(a)&&Xf(a,t))break}}};function BP(e,t,n){const r=Le(e,n);if(r||aS(n))return{error:r,name:n};const s=n.split(".");for(;s.length;){const i=s.join("."),o=Le(t,i),a=Le(e,i);if(o&&!Array.isArray(o)&&n!==i)return{name:n};if(a&&a.type)return{name:i,error:a};if(a&&a.root&&a.root.type)return{name:`${i}.root`,error:a.root};s.pop()}return{name:n}}var m2e=(e,t,n,r)=>{n(e);const{name:s,...i}=e;return Fr(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(o=>t[o]===(!r||ei.all))},p2e=(e,t,n)=>!e||!t||e===t||ss(e).some(r=>r&&(n?r===t:r.startsWith(t)||t.startsWith(r))),g2e=(e,t,n,r,s)=>s.isOnAll?!1:!n&&s.isOnTouch?!(t||e):(n?r.isOnBlur:s.isOnBlur)?!e:(n?r.isOnChange:s.isOnChange)?e:!0,y2e=(e,t)=>!lS(Le(e,t)).length&&kn(e,t),oH=(e,t,n)=>{const r=ss(Le(e,n));return Bt(r,"root",t[n]),Bt(e,n,r),e},Uv=e=>_o(e);function zP(e,t,n="validate"){if(Uv(e)||Array.isArray(e)&&e.every(Uv)||Ns(e)&&!e)return{type:n,message:Uv(e)?e:"",ref:t}}var jf=e=>Pn(e)&&!Jx(e)?e:{value:e,message:""},YO=async(e,t,n,r,s,i)=>{const{ref:o,refs:a,required:c,maxLength:u,minLength:f,min:h,max:p,pattern:y,validate:v,name:x,valueAsNumber:E,mount:N}=e._f,_=Le(n,x);if(!N||t.has(x))return{};const C=a?a[0]:o,j=L=>{s&&C.reportValidity&&(C.setCustomValidity(Ns(L)?"":L||""),C.reportValidity())},A={},$=D$(o),k=i0(o),R=$||k,B=(E||P$(o))&&dn(o.value)&&dn(_)||Gx(o)&&o.value===""||_===""||Array.isArray(_)&&!_.length,z=a2e.bind(null,x,r,A),D=(L,H,M,V=la.maxLength,T=la.minLength)=>{const I=L?H:M;A[x]={type:L?V:T,message:I,ref:o,...z(L?V:T,I)}};if(i?!Array.isArray(_)||!_.length:c&&(!R&&(B||zr(_))||Ns(_)&&!_||k&&!rH(a).isValid||$&&!iH(a).isValid)){const{value:L,message:H}=Uv(c)?{value:!!c,message:c}:jf(c);if(L&&(A[x]={type:la.required,message:H,ref:C,...z(la.required,H)},!r))return j(H),A}if(!B&&(!zr(h)||!zr(p))){let L,H;const M=jf(p),V=jf(h);if(!zr(_)&&!isNaN(_)){const T=o.valueAsNumber||_&&+_;zr(M.value)||(L=T>M.value),zr(V.value)||(H=T<V.value)}else{const T=o.valueAsDate||new Date(_),I=F=>new Date(new Date().toDateString()+" "+F),P=o.type=="time",W=o.type=="week";_o(M.value)&&_&&(L=P?I(_)>I(M.value):W?_>M.value:T>new Date(M.value)),_o(V.value)&&_&&(H=P?I(_)<I(V.value):W?_<V.value:T<new Date(V.value))}if((L||H)&&(D(!!L,M.message,V.message,la.max,la.min),!r))return j(A[x].message),A}if((u||f)&&!B&&(_o(_)||i&&Array.isArray(_))){const L=jf(u),H=jf(f),M=!zr(L.value)&&_.length>+L.value,V=!zr(H.value)&&_.length<+H.value;if((M||V)&&(D(M,L.message,H.message),!r))return j(A[x].message),A}if(y&&!B&&_o(_)){const{value:L,message:H}=jf(y);if(Jx(L)&&!_.match(L)&&(A[x]={type:la.pattern,message:H,ref:o,...z(la.pattern,H)},!r))return j(H),A}if(v){if(Fi(v)){const L=await v(_,n),H=zP(L,C);if(H&&(A[x]={...H,...z(la.validate,H.message)},!r))return j(H.message),A}else if(Pn(v)){let L={};for(const H in v){if(!Fr(L)&&!r)break;const M=zP(await v[H](_,n),C,H);M&&(L={...M,...z(H,M.message)},j(M.message),r&&(A[x]=L))}if(!Fr(L)&&(A[x]={ref:C,...L},!r))return A}}return j(!0),A};const b2e={mode:ei.onSubmit,reValidateMode:ei.onChange,shouldFocusError:!0};function v2e(e={}){let t={...b2e,...e},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:Fi(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},r={},s=Pn(t.defaultValues)||Pn(t.values)?cn(t.defaultValues||t.values)||{}:{},i=t.shouldUnregister?{}:cn(s),o={action:!1,mount:!1,watch:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const f={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let h={...f};const p={array:MP(),state:MP()},y=t.criteriaMode===ei.all,v=G=>re=>{clearTimeout(u),u=setTimeout(G,re)},x=async G=>{if(!t.disabled&&(f.isValid||h.isValid||G)){const re=t.resolver?Fr((await k()).errors):await B(r,!0);re!==n.isValid&&p.state.next({isValid:re})}},E=(G,re)=>{!t.disabled&&(f.isValidating||f.validatingFields||h.isValidating||h.validatingFields)&&((G||Array.from(a.mount)).forEach(te=>{te&&(re?Bt(n.validatingFields,te,re):kn(n.validatingFields,te))}),p.state.next({validatingFields:n.validatingFields,isValidating:!Fr(n.validatingFields)}))},N=(G,re=[],te,he,ie=!0,ne=!0)=>{if(he&&te&&!t.disabled){if(o.action=!0,ne&&Array.isArray(Le(r,G))){const le=te(Le(r,G),he.argA,he.argB);ie&&Bt(r,G,le)}if(ne&&Array.isArray(Le(n.errors,G))){const le=te(Le(n.errors,G),he.argA,he.argB);ie&&Bt(n.errors,G,le),y2e(n.errors,G)}if((f.touchedFields||h.touchedFields)&&ne&&Array.isArray(Le(n.touchedFields,G))){const le=te(Le(n.touchedFields,G),he.argA,he.argB);ie&&Bt(n.touchedFields,G,le)}(f.dirtyFields||h.dirtyFields)&&(n.dirtyFields=Lp(s,i)),p.state.next({name:G,isDirty:D(G,re),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Bt(i,G,re)},_=(G,re)=>{Bt(n.errors,G,re),p.state.next({errors:n.errors})},C=G=>{n.errors=G,p.state.next({errors:n.errors,isValid:!1})},j=(G,re,te,he)=>{const ie=Le(r,G);if(ie){const ne=Le(i,G,dn(te)?Le(s,G):te);dn(ne)||he&&he.defaultChecked||re?Bt(i,G,re?ne:LP(ie._f)):M(G,ne),o.mount&&x()}},A=(G,re,te,he,ie)=>{let ne=!1,le=!1;const xe={name:G};if(!t.disabled){if(!te||he){(f.isDirty||h.isDirty)&&(le=n.isDirty,n.isDirty=xe.isDirty=D(),ne=le!==xe.isDirty);const Ne=Ea(Le(s,G),re);le=!!Le(n.dirtyFields,G),Ne?kn(n.dirtyFields,G):Bt(n.dirtyFields,G,!0),xe.dirtyFields=n.dirtyFields,ne=ne||(f.dirtyFields||h.dirtyFields)&&le!==!Ne}if(te){const Ne=Le(n.touchedFields,G);Ne||(Bt(n.touchedFields,G,te),xe.touchedFields=n.touchedFields,ne=ne||(f.touchedFields||h.touchedFields)&&Ne!==te)}ne&&ie&&p.state.next(xe)}return ne?xe:{}},$=(G,re,te,he)=>{const ie=Le(n.errors,G),ne=(f.isValid||h.isValid)&&Ns(re)&&n.isValid!==re;if(t.delayError&&te?(c=v(()=>_(G,te)),c(t.delayError)):(clearTimeout(u),c=null,te?Bt(n.errors,G,te):kn(n.errors,G)),(te?!Ea(ie,te):ie)||!Fr(he)||ne){const le={...he,...ne&&Ns(re)?{isValid:re}:{},errors:n.errors,name:G};n={...n,...le},p.state.next(le)}},k=async G=>{E(G,!0);const re=await t.resolver(i,t.context,d2e(G||a.mount,r,t.criteriaMode,t.shouldUseNativeValidation));return E(G),re},R=async G=>{const{errors:re}=await k(G);if(G)for(const te of G){const he=Le(re,te);he?Bt(n.errors,te,he):kn(n.errors,te)}else n.errors=re;return re},B=async(G,re,te={valid:!0})=>{for(const he in G){const ie=G[he];if(ie){const{_f:ne,...le}=ie;if(ne){const xe=a.array.has(ne.name),Ne=ie._f&&f2e(ie._f);Ne&&f.validatingFields&&E([he],!0);const Ge=await YO(ie,a.disabled,i,y,t.shouldUseNativeValidation&&!re,xe);if(Ne&&f.validatingFields&&E([he]),Ge[ne.name]&&(te.valid=!1,re))break;!re&&(Le(Ge,ne.name)?xe?oH(n.errors,Ge,ne.name):Bt(n.errors,ne.name,Ge[ne.name]):kn(n.errors,ne.name))}!Fr(le)&&await B(le,re,te)}}return te.valid},z=()=>{for(const G of a.unMount){const re=Le(r,G);re&&(re._f.refs?re._f.refs.every(te=>!c_(te)):!c_(re._f.ref))&&ce(G)}a.unMount=new Set},D=(G,re)=>!t.disabled&&(G&&re&&Bt(i,G,re),!Ea(F(),s)),L=(G,re,te)=>Zq(G,a,{...o.mount?i:dn(re)?s:_o(G)?{[G]:re}:re},te,re),H=G=>lS(Le(o.mount?i:s,G,t.shouldUnregister?Le(s,G,[]):[])),M=(G,re,te={})=>{const he=Le(r,G);let ie=re;if(he){const ne=he._f;ne&&(!ne.disabled&&Bt(i,G,sH(re,ne)),ie=Gx(ne.ref)&&zr(re)?"":re,eH(ne.ref)?[...ne.ref.options].forEach(le=>le.selected=ie.includes(le.value)):ne.refs?i0(ne.ref)?ne.refs.forEach(le=>{(!le.defaultChecked||!le.disabled)&&(Array.isArray(ie)?le.checked=!!ie.find(xe=>xe===le.value):le.checked=ie===le.value||!!ie)}):ne.refs.forEach(le=>le.checked=le.value===ie):P$(ne.ref)?ne.ref.value="":(ne.ref.value=ie,ne.ref.type||p.state.next({name:G,values:cn(i)})))}(te.shouldDirty||te.shouldTouch)&&A(G,ie,te.shouldTouch,te.shouldDirty,!0),te.shouldValidate&&W(G)},V=(G,re,te)=>{for(const he in re){if(!re.hasOwnProperty(he))return;const ie=re[he],ne=G+"."+he,le=Le(r,ne);(a.array.has(G)||Pn(ie)||le&&!le._f)&&!Au(ie)?V(ne,ie,te):M(ne,ie,te)}},T=(G,re,te={})=>{const he=Le(r,G),ie=a.array.has(G),ne=cn(re);Bt(i,G,ne),ie?(p.array.next({name:G,values:cn(i)}),(f.isDirty||f.dirtyFields||h.isDirty||h.dirtyFields)&&te.shouldDirty&&p.state.next({name:G,dirtyFields:Lp(s,i),isDirty:D(G,ne)})):he&&!he._f&&!zr(ne)?V(G,ne,te):M(G,ne,te),GO(G,a)&&p.state.next({...n,name:G}),p.state.next({name:o.mount?G:void 0,values:cn(i)})},I=async G=>{o.mount=!0;const re=G.target;let te=re.name,he=!0;const ie=Le(r,te),ne=Ne=>{he=Number.isNaN(Ne)||Au(Ne)&&isNaN(Ne.getTime())||Ea(Ne,Le(i,te,Ne))},le=Vf(t.mode),xe=Vf(t.reValidateMode);if(ie){let Ne,Ge;const Vt=re.type?LP(ie._f):Jq(G),St=G.type===Wx.BLUR||G.type===Wx.FOCUS_OUT,oo=!h2e(ie._f)&&!t.resolver&&!Le(n.errors,te)&&!ie._f.deps||g2e(St,Le(n.touchedFields,te),n.isSubmitted,xe,le),Ut=GO(te,a,St);Bt(i,te,Vt),St?(ie._f.onBlur&&ie._f.onBlur(G),c&&c(0)):ie._f.onChange&&ie._f.onChange(G);const hn=A(te,Vt,St),ur=!Fr(hn)||Ut;if(!St&&p.state.next({name:te,type:G.type,values:cn(i)}),oo)return(f.isValid||h.isValid)&&(t.mode==="onBlur"?St&&x():St||x()),ur&&p.state.next({name:te,...Ut?{}:hn});if(!St&&Ut&&p.state.next({...n}),t.resolver){const{errors:wi}=await k([te]);if(ne(Vt),he){const Bs=BP(n.errors,r,te),ao=BP(wi,r,Bs.name||te);Ne=ao.error,te=ao.name,Ge=Fr(wi)}}else E([te],!0),Ne=(await YO(ie,a.disabled,i,y,t.shouldUseNativeValidation))[te],E([te]),ne(Vt),he&&(Ne?Ge=!1:(f.isValid||h.isValid)&&(Ge=await B(r,!0)));he&&(ie._f.deps&&W(ie._f.deps),$(te,Ge,Ne,hn))}},P=(G,re)=>{if(Le(n.errors,re)&&G.focus)return G.focus(),1},W=async(G,re={})=>{let te,he;const ie=ss(G);if(t.resolver){const ne=await R(dn(G)?G:ie);te=Fr(ne),he=G?!ie.some(le=>Le(ne,le)):te}else G?(he=(await Promise.all(ie.map(async ne=>{const le=Le(r,ne);return await B(le&&le._f?{[ne]:le}:le)}))).every(Boolean),!(!he&&!n.isValid)&&x()):he=te=await B(r);return p.state.next({...!_o(G)||(f.isValid||h.isValid)&&te!==n.isValid?{}:{name:G},...t.resolver||!G?{isValid:te}:{},errors:n.errors}),re.shouldFocus&&!he&&Xf(r,P,G?ie:a.mount),he},F=G=>{const re={...o.mount?i:s};return dn(G)?re:_o(G)?Le(re,G):G.map(te=>Le(re,te))},q=(G,re)=>({invalid:!!Le((re||n).errors,G),isDirty:!!Le((re||n).dirtyFields,G),error:Le((re||n).errors,G),isValidating:!!Le(n.validatingFields,G),isTouched:!!Le((re||n).touchedFields,G)}),X=G=>{G&&ss(G).forEach(re=>kn(n.errors,re)),p.state.next({errors:G?n.errors:{}})},Q=(G,re,te)=>{const he=(Le(r,G,{_f:{}})._f||{}).ref,ie=Le(n.errors,G)||{},{ref:ne,message:le,type:xe,...Ne}=ie;Bt(n.errors,G,{...Ne,...re,ref:he}),p.state.next({name:G,errors:n.errors,isValid:!1}),te&&te.shouldFocus&&he&&he.focus&&he.focus()},se=(G,re)=>Fi(G)?p.state.subscribe({next:te=>"values"in te&&G(L(void 0,re),te)}):L(G,re,!0),ae=G=>p.state.subscribe({next:re=>{p2e(G.name,re.name,G.exact)&&m2e(re,G.formState||f,Oe,G.reRenderRoot)&&G.callback({values:{...i},...n,...re,defaultValues:s})}}).unsubscribe,de=G=>(o.mount=!0,h={...h,...G.formState},ae({...G,formState:h})),ce=(G,re={})=>{for(const te of G?ss(G):a.mount)a.mount.delete(te),a.array.delete(te),re.keepValue||(kn(r,te),kn(i,te)),!re.keepError&&kn(n.errors,te),!re.keepDirty&&kn(n.dirtyFields,te),!re.keepTouched&&kn(n.touchedFields,te),!re.keepIsValidating&&kn(n.validatingFields,te),!t.shouldUnregister&&!re.keepDefaultValue&&kn(s,te);p.state.next({values:cn(i)}),p.state.next({...n,...re.keepDirty?{isDirty:D()}:{}}),!re.keepIsValid&&x()},fe=({disabled:G,name:re})=>{(Ns(G)&&o.mount||G||a.disabled.has(re))&&(G?a.disabled.add(re):a.disabled.delete(re))},ve=(G,re={})=>{let te=Le(r,G);const he=Ns(re.disabled)||Ns(t.disabled);return Bt(r,G,{...te||{},_f:{...te&&te._f?te._f:{ref:{name:G}},name:G,mount:!0,...re}}),a.mount.add(G),te?fe({disabled:Ns(re.disabled)?re.disabled:t.disabled,name:G}):j(G,!0,re.value),{...he?{disabled:re.disabled||t.disabled}:{},...t.progressive?{required:!!re.required,min:Fp(re.min),max:Fp(re.max),minLength:Fp(re.minLength),maxLength:Fp(re.maxLength),pattern:Fp(re.pattern)}:{},name:G,onChange:I,onBlur:I,ref:ie=>{if(ie){ve(G,re),te=Le(r,G);const ne=dn(ie.value)&&ie.querySelectorAll&&ie.querySelectorAll("input,select,textarea")[0]||ie,le=l2e(ne),xe=te._f.refs||[];if(le?xe.find(Ne=>Ne===ne):ne===te._f.ref)return;Bt(r,G,{_f:{...te._f,...le?{refs:[...xe.filter(c_),ne,...Array.isArray(Le(s,G))?[{}]:[]],ref:{type:ne.type,name:G}}:{ref:ne}}}),j(G,!1,void 0,ne)}else te=Le(r,G,{}),te._f&&(te._f.mount=!1),(t.shouldUnregister||re.shouldUnregister)&&!(Xq(a.array,G)&&o.action)&&a.unMount.add(G)}}},Ae=()=>t.shouldFocusError&&Xf(r,P,a.mount),Ce=G=>{Ns(G)&&(p.state.next({disabled:G}),Xf(r,(re,te)=>{const he=Le(r,te);he&&(re.disabled=he._f.disabled||G,Array.isArray(he._f.refs)&&he._f.refs.forEach(ie=>{ie.disabled=he._f.disabled||G}))},0,!1))},Ee=(G,re)=>async te=>{let he;te&&(te.preventDefault&&te.preventDefault(),te.persist&&te.persist());let ie=cn(i);if(p.state.next({isSubmitting:!0}),t.resolver){const{errors:ne,values:le}=await k();n.errors=ne,ie=cn(le)}else await B(r);if(a.disabled.size)for(const ne of a.disabled)kn(ie,ne);if(kn(n.errors,"root"),Fr(n.errors)){p.state.next({errors:{}});try{await G(ie,te)}catch(ne){he=ne}}else re&&await re({...n.errors},te),Ae(),setTimeout(Ae);if(p.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Fr(n.errors)&&!he,submitCount:n.submitCount+1,errors:n.errors}),he)throw he},Re=(G,re={})=>{Le(r,G)&&(dn(re.defaultValue)?T(G,cn(Le(s,G))):(T(G,re.defaultValue),Bt(s,G,cn(re.defaultValue))),re.keepTouched||kn(n.touchedFields,G),re.keepDirty||(kn(n.dirtyFields,G),n.isDirty=re.defaultValue?D(G,cn(Le(s,G))):D()),re.keepError||(kn(n.errors,G),f.isValid&&x()),p.state.next({...n}))},ke=(G,re={})=>{const te=G?cn(G):s,he=cn(te),ie=Fr(G),ne=ie?s:he;if(re.keepDefaultValues||(s=te),!re.keepValues){if(re.keepDirtyValues){const le=new Set([...a.mount,...Object.keys(Lp(s,i))]);for(const xe of Array.from(le))Le(n.dirtyFields,xe)?Bt(ne,xe,Le(i,xe)):T(xe,Le(ne,xe))}else{if(M$&&dn(G))for(const le of a.mount){const xe=Le(r,le);if(xe&&xe._f){const Ne=Array.isArray(xe._f.refs)?xe._f.refs[0]:xe._f.ref;if(Gx(Ne)){const Ge=Ne.closest("form");if(Ge){Ge.reset();break}}}}if(re.keepFieldsRef)for(const le of a.mount)T(le,Le(ne,le));else r={}}i=t.shouldUnregister?re.keepDefaultValues?cn(s):{}:cn(ne),p.array.next({values:{...ne}}),p.state.next({values:{...ne}})}a={mount:re.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!f.isValid||!!re.keepIsValid||!!re.keepDirtyValues,o.watch=!!t.shouldUnregister,p.state.next({submitCount:re.keepSubmitCount?n.submitCount:0,isDirty:ie?!1:re.keepDirty?n.isDirty:!!(re.keepDefaultValues&&!Ea(G,s)),isSubmitted:re.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:ie?{}:re.keepDirtyValues?re.keepDefaultValues&&i?Lp(s,i):n.dirtyFields:re.keepDefaultValues&&G?Lp(s,G):re.keepDirty?n.dirtyFields:{},touchedFields:re.keepTouched?n.touchedFields:{},errors:re.keepErrors?n.errors:{},isSubmitSuccessful:re.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},He=(G,re)=>ke(Fi(G)?G(i):G,re),et=(G,re={})=>{const te=Le(r,G),he=te&&te._f;if(he){const ie=he.refs?he.refs[0]:he.ref;ie.focus&&(ie.focus(),re.shouldSelect&&Fi(ie.select)&&ie.select())}},Oe=G=>{n={...n,...G}},Ie={control:{register:ve,unregister:ce,getFieldState:q,handleSubmit:Ee,setError:Q,_subscribe:ae,_runSchema:k,_focusError:Ae,_getWatch:L,_getDirty:D,_setValid:x,_setFieldArray:N,_setDisabledField:fe,_setErrors:C,_getFieldArray:H,_reset:ke,_resetDefaultValues:()=>Fi(t.defaultValues)&&t.defaultValues().then(G=>{He(G,t.resetOptions),p.state.next({isLoading:!1})}),_removeUnmounted:z,_disableForm:Ce,_subjects:p,_proxyFormState:f,get _fields(){return r},get _formValues(){return i},get _state(){return o},set _state(G){o=G},get _defaultValues(){return s},get _names(){return a},set _names(G){a=G},get _formState(){return n},get _options(){return t},set _options(G){t={...t,...G}}},subscribe:de,trigger:W,register:ve,handleSubmit:Ee,watch:se,setValue:T,getValues:F,reset:He,resetField:Re,clearErrors:X,unregister:ce,setError:Q,setFocus:et,getFieldState:q};return{...Ie,formControl:Ie}}var Dl=()=>{if(typeof crypto<"u"&&crypto.randomUUID)return crypto.randomUUID();const e=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const n=(Math.random()*16+e)%16|0;return(t=="x"?n:n&3|8).toString(16)})},u_=(e,t,n={})=>n.shouldFocus||dn(n.shouldFocus)?n.focusName||`${e}.${dn(n.focusIndex)?t:n.focusIndex}.`:"",d_=(e,t)=>[...e,...ss(t)],f_=e=>Array.isArray(e)?e.map(()=>{}):void 0;function h_(e,t,n){return[...e.slice(0,t),...ss(n),...e.slice(t)]}var m_=(e,t,n)=>Array.isArray(e)?(dn(e[n])&&(e[n]=void 0),e.splice(n,0,e.splice(t,1)[0]),e):[],p_=(e,t)=>[...ss(t),...ss(e)];function x2e(e,t){let n=0;const r=[...e];for(const s of t)r.splice(s-n,1),n++;return lS(r).length?r:[]}var g_=(e,t)=>dn(t)?[]:x2e(e,ss(t).sort((n,r)=>n-r)),y_=(e,t,n)=>{[e[t],e[n]]=[e[n],e[t]]},VP=(e,t,n)=>(e[t]=n,e);function w2e(e){const t=cS(),{control:n=t.control,name:r,keyName:s="id",shouldUnregister:i,rules:o}=e,[a,c]=je.useState(n._getFieldArray(r)),u=je.useRef(n._getFieldArray(r).map(Dl)),f=je.useRef(a),h=je.useRef(!1);f.current=a,n._names.array.add(r),je.useMemo(()=>o&&n.register(r,o),[n,o,r]),uS(()=>n._subjects.array.subscribe({next:({values:A,name:$})=>{if($===r||!$){const k=Le(A,r);Array.isArray(k)&&(c(k),u.current=k.map(Dl))}}}).unsubscribe,[n,r]);const p=je.useCallback(A=>{h.current=!0,n._setFieldArray(r,A)},[n,r]),y=(A,$)=>{const k=ss(cn(A)),R=d_(n._getFieldArray(r),k);n._names.focus=u_(r,R.length-1,$),u.current=d_(u.current,k.map(Dl)),p(R),c(R),n._setFieldArray(r,R,d_,{argA:f_(A)})},v=(A,$)=>{const k=ss(cn(A)),R=p_(n._getFieldArray(r),k);n._names.focus=u_(r,0,$),u.current=p_(u.current,k.map(Dl)),p(R),c(R),n._setFieldArray(r,R,p_,{argA:f_(A)})},x=A=>{const $=g_(n._getFieldArray(r),A);u.current=g_(u.current,A),p($),c($),!Array.isArray(Le(n._fields,r))&&Bt(n._fields,r,void 0),n._setFieldArray(r,$,g_,{argA:A})},E=(A,$,k)=>{const R=ss(cn($)),B=h_(n._getFieldArray(r),A,R);n._names.focus=u_(r,A,k),u.current=h_(u.current,A,R.map(Dl)),p(B),c(B),n._setFieldArray(r,B,h_,{argA:A,argB:f_($)})},N=(A,$)=>{const k=n._getFieldArray(r);y_(k,A,$),y_(u.current,A,$),p(k),c(k),n._setFieldArray(r,k,y_,{argA:A,argB:$},!1)},_=(A,$)=>{const k=n._getFieldArray(r);m_(k,A,$),m_(u.current,A,$),p(k),c(k),n._setFieldArray(r,k,m_,{argA:A,argB:$},!1)},C=(A,$)=>{const k=cn($),R=VP(n._getFieldArray(r),A,k);u.current=[...R].map((B,z)=>!B||z===A?Dl():u.current[z]),p(R),c([...R]),n._setFieldArray(r,R,VP,{argA:A,argB:k},!0,!1)},j=A=>{const $=ss(cn(A));u.current=$.map(Dl),p([...$]),c([...$]),n._setFieldArray(r,[...$],k=>k,{},!0,!1)};return je.useEffect(()=>{if(n._state.action=!1,GO(r,n._names)&&n._subjects.state.next({...n._formState}),h.current&&(!Vf(n._options.mode).isOnSubmit||n._formState.isSubmitted)&&!Vf(n._options.reValidateMode).isOnSubmit)if(n._options.resolver)n._runSchema([r]).then(A=>{const $=Le(A.errors,r),k=Le(n._formState.errors,r);(k?!$&&k.type||$&&(k.type!==$.type||k.message!==$.message):$&&$.type)&&($?Bt(n._formState.errors,r,$):kn(n._formState.errors,r),n._subjects.state.next({errors:n._formState.errors}))});else{const A=Le(n._fields,r);A&&A._f&&!(Vf(n._options.reValidateMode).isOnSubmit&&Vf(n._options.mode).isOnSubmit)&&YO(A,n._names.disabled,n._formValues,n._options.criteriaMode===ei.all,n._options.shouldUseNativeValidation,!0).then($=>!Fr($)&&n._subjects.state.next({errors:oH(n._formState.errors,$,r)}))}n._subjects.state.next({name:r,values:cn(n._formValues)}),n._names.focus&&Xf(n._fields,(A,$)=>{if(n._names.focus&&$.startsWith(n._names.focus)&&A.focus)return A.focus(),1}),n._names.focus="",n._setValid(),h.current=!1},[a,r,n]),je.useEffect(()=>(!Le(n._formValues,r)&&n._setFieldArray(r),()=>{const A=($,k)=>{const R=Le(n._fields,$);R&&R._f&&(R._f.mount=k)};n._options.shouldUnregister||i?n.unregister(r):A(r,!1)}),[r,n,s,i]),{swap:je.useCallback(N,[p,r,n]),move:je.useCallback(_,[p,r,n]),prepend:je.useCallback(v,[p,r,n]),append:je.useCallback(y,[p,r,n]),remove:je.useCallback(x,[p,r,n]),insert:je.useCallback(E,[p,r,n]),update:je.useCallback(C,[p,r,n]),replace:je.useCallback(j,[p,r,n]),fields:je.useMemo(()=>a.map((A,$)=>({...A,[s]:u.current[$]||Dl()})),[a,s])}}function rl(e={}){const t=je.useRef(void 0),n=je.useRef(void 0),[r,s]=je.useState({isDirty:!1,isValidating:!1,isLoading:Fi(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Fi(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:r},e.defaultValues&&!Fi(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:o,...a}=v2e(e);t.current={...a,formState:r}}const i=t.current.control;return i._options=e,uS(()=>{const o=i._subscribe({formState:i._proxyFormState,callback:()=>s({...i._formState}),reRenderRoot:!0});return s(a=>({...a,isReady:!0})),i._formState.isReady=!0,o},[i]),je.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),je.useEffect(()=>{e.mode&&(i._options.mode=e.mode),e.reValidateMode&&(i._options.reValidateMode=e.reValidateMode)},[i,e.mode,e.reValidateMode]),je.useEffect(()=>{e.errors&&(i._setErrors(e.errors),i._focusError())},[i,e.errors]),je.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,e.shouldUnregister]),je.useEffect(()=>{if(i._proxyFormState.isDirty){const o=i._getDirty();o!==r.isDirty&&i._subjects.state.next({isDirty:o})}},[i,r.isDirty]),je.useEffect(()=>{e.values&&!Ea(e.values,n.current)?(i._reset(e.values,{keepFieldsRef:!0,...i._options.resetOptions}),n.current=e.values,s(o=>({...o}))):i._resetDefaultValues()},[i,e.values]),je.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),t.current.formState=Qq(r,i),t.current}const UP=(e,t,n)=>{if(e&&"reportValidity"in e){const r=Le(n,t);e.setCustomValidity(r&&r.message||""),e.reportValidity()}},aH=(e,t)=>{for(const n in t.fields){const r=t.fields[n];r&&r.ref&&"reportValidity"in r.ref?UP(r.ref,n,e):r&&r.refs&&r.refs.forEach(s=>UP(s,n,e))}},S2e=(e,t)=>{t.shouldUseNativeValidation&&aH(e,t);const n={};for(const r in e){const s=Le(t.fields,r),i=Object.assign(e[r]||{},{ref:s&&s.ref});if(E2e(t.names||Object.keys(e),r)){const o=Object.assign({},Le(n,r));Bt(o,"root",i),Bt(n,r,o)}else Bt(n,r,i)}return n},E2e=(e,t)=>{const n=qP(t);return e.some(r=>qP(r).match(`^${n}\\.\\d+`))};function qP(e){return e.replace(/\]|\[/g,"")}function N2e(e){var t;if((t=e.path)!=null&&t.length){let n="";for(const r of e.path){const s=typeof r=="object"?r.key:r;if(typeof s=="string"||typeof s=="number")n?n+=`.${s}`:n+=s;else return null}return n}return null}function JO(){return JO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},JO.apply(null,arguments)}function sl(e,t){return t===void 0&&(t={}),function(n,r,s){try{var i=function(){if(o.issues){var c=function(u,f){for(var h={},p=0;p<u.length;p++){var y=u[p],v=N2e(y);if(v&&(h[v]||(h[v]={message:y.message,type:""}),f)){var x,E=h[v].types||{};h[v].types=JO({},E,((x={})[Object.keys(E).length]=y.message,x))}}return h}(o.issues,!s.shouldUseNativeValidation&&s.criteriaMode==="all");return{values:{},errors:S2e(c,s)}}return s.shouldUseNativeValidation&&aH({},s),{values:t.raw?Object.assign({},n):o.value,errors:{}}},o=e["~standard"].validate(n),a=function(){if(o instanceof Promise)return Promise.resolve(o).then(function(c){o=c})}();return Promise.resolve(a&&a.then?a.then(i):i())}catch(c){return Promise.reject(c)}}}const L$=ze({...YT.properties,name:pe()}),_2e=Qt([pe({enum:["entity","relation","media"]}),pe({pattern:"^template-"})]),C2e=ze({entity:pe(),name:pe(),field:Sn(GT)});We({action:_2e,initial:Xi().optional(),entities:ze({create:Sn(L$).optional()}).optional(),relations:ze({create:Sn(Qt(JT)).optional()}).optional(),fields:ze({create:Sn(C2e).optional()}).optional()});const O2e=ze({name:pe({pattern:/^[a-z][a-zA-Z_]+$/}),config:L$.properties.config.partial().optional()});function j2e(){var h,p,y,v,x,E,N,_,C;const e=v$(),{nextStep:t,stepBack:n,state:r,setState:s}=Cd(),{register:i,handleSubmit:o,formState:a,watch:c,control:u}=rl({mode:"onChange",resolver:sl(JF(O2e)),defaultValues:((p=(h=r.entities)==null?void 0:h.create)==null?void 0:p[0])??{}});function f(j){console.log("onSubmit",j),s(A=>{var k,R;const $=(R=(k=A.entities)==null?void 0:k.create)==null?void 0:R[0];return $&&$.name!==j.name?{...A,entities:{create:[{...j,fields:$.fields}]}}:{...A,entities:{create:[j]}}}),a.isValid&&(console.log("would go next"),t("entity-fields")())}return m.jsx(m.Fragment,{children:m.jsxs("form",{onSubmit:o(f),ref:e,children:[m.jsxs(Nd,{children:[m.jsx("input",{type:"hidden",...i("type"),defaultValue:"regular"}),m.jsx(On,{"data-autofocus":!0,required:!0,error:(y=a.errors.name)==null?void 0:y.message,...i("name"),placeholder:"posts",size:"md",label:"What's the name of the entity?",description:"Use plural form, and all lowercase. It will be used as the database table."}),m.jsx(On,{...i("config.name"),error:(x=(v=a.errors.config)==null?void 0:v.name)==null?void 0:x.message,placeholder:"Posts",size:"md",label:"How should it be called?",description:"Use plural form. This will be used to display in the UI."}),m.jsx(On,{...i("config.name_singular"),error:(N=(E=a.errors.config)==null?void 0:E.name_singular)==null?void 0:N.message,placeholder:"Post",size:"md",label:"What's the singular form of it?"}),m.jsx(My,{placeholder:"This is a post (optional)",error:(C=(_=a.errors.config)==null?void 0:_.description)==null?void 0:C.message,...i("config.description"),size:"md",label:"Description"})]}),m.jsx(_d,{next:{type:"submit",disabled:!a.isValid},prev:{onClick:n},debug:{state:r}})]})})}function ka({name:e,control:t,defaultValue:n,rules:r,shouldUnregister:s,onChange:i,...o}){var h;const{field:{value:a,onChange:c,...u},fieldState:f}=Od({name:e,control:t,defaultValue:n,rules:r,shouldUnregister:s});return m.jsx(h1,{value:a,onChange:async p=>{await c({...new Event("change",{bubbles:!0,cancelable:!0}),target:{value:p,name:u.name}}),i==null||i(p)},error:(h=f.error)==null?void 0:h.message,...u,...o})}function mg({name:e,control:t,defaultValue:n,rules:r,shouldUnregister:s,onChange:i,...o}){var h;const{field:{value:a,onChange:c,...u},fieldState:f}=Od({name:e,control:t,defaultValue:n,rules:r,shouldUnregister:s});return m.jsx(Ka,{value:a,checked:a,onChange:p=>{c(p),i==null||i(p)},error:(h=f.error)==null?void 0:h.message,...u,...o})}const A2e=w.lazy(()=>s0(()=>import("./JsonSchemaForm-7GbBqc7p.js"),__vite__mapDeps([0,1])).then(e=>({default:e.JsonSchemaForm}))),vm=w.forwardRef((e,t)=>m.jsx(w.Suspense,{children:m.jsx(A2e,{ref:t,...e})}));function Ir(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var T2e=typeof Symbol=="function"&&Symbol.observable||"@@observable",HP=T2e,WP=()=>Math.random().toString(36).substring(7).split("").join("."),$2e={INIT:`@@redux/INIT${WP()}`,REPLACE:`@@redux/REPLACE${WP()}`},GP=$2e;function R2e(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function lH(e,t,n){if(typeof e!="function")throw new Error(Ir(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Ir(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Ir(1));return n(lH)(e,t)}let r=e,s=t,i=new Map,o=i,a=0,c=!1;function u(){o===i&&(o=new Map,i.forEach((E,N)=>{o.set(N,E)}))}function f(){if(c)throw new Error(Ir(3));return s}function h(E){if(typeof E!="function")throw new Error(Ir(4));if(c)throw new Error(Ir(5));let N=!0;u();const _=a++;return o.set(_,E),function(){if(N){if(c)throw new Error(Ir(6));N=!1,u(),o.delete(_),i=null}}}function p(E){if(!R2e(E))throw new Error(Ir(7));if(typeof E.type>"u")throw new Error(Ir(8));if(typeof E.type!="string")throw new Error(Ir(17));if(c)throw new Error(Ir(9));try{c=!0,s=r(s,E)}finally{c=!1}return(i=o).forEach(_=>{_()}),E}function y(E){if(typeof E!="function")throw new Error(Ir(10));r=E,p({type:GP.REPLACE})}function v(){const E=h;return{subscribe(N){if(typeof N!="object"||N===null)throw new Error(Ir(11));function _(){const j=N;j.next&&j.next(f())}return _(),{unsubscribe:E(_)}},[HP](){return this}}}return p({type:GP.INIT}),{dispatch:p,subscribe:h,getState:f,replaceReducer:y,[HP]:v}}function YP(e,t){return function(...n){return t(e.apply(this,n))}}function JP(e,t){if(typeof e=="function")return YP(e,t);if(typeof e!="object"||e===null)throw new Error(Ir(16));const n={};for(const r in e){const s=e[r];typeof s=="function"&&(n[r]=YP(s,t))}return n}function cH(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function k2e(...e){return t=>(n,r)=>{const s=t(n,r);let i=()=>{throw new Error(Ir(15))};const o={getState:s.getState,dispatch:(c,...u)=>i(c,...u)},a=e.map(c=>c(o));return i=cH(...a)(s.dispatch),{...s,dispatch:i}}}var b_={exports:{}},v_={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XP;function M2e(){if(XP)return v_;XP=1;var e=Xh();function t(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,s=e.useRef,i=e.useEffect,o=e.useMemo,a=e.useDebugValue;return v_.useSyncExternalStoreWithSelector=function(c,u,f,h,p){var y=s(null);if(y.current===null){var v={hasValue:!1,value:null};y.current=v}else v=y.current;y=o(function(){function E(A){if(!N){if(N=!0,_=A,A=h(A),p!==void 0&&v.hasValue){var $=v.value;if(p($,A))return C=$}return C=A}if($=C,n(_,A))return $;var k=h(A);return p!==void 0&&p($,k)?(_=A,$):(_=A,C=k)}var N=!1,_,C,j=f===void 0?null:f;return[function(){return E(u())},j===null?void 0:function(){return E(j())}]},[u,f,h,p]);var x=r(c,y[0],y[1]);return i(function(){v.hasValue=!0,v.value=x},[x]),a(x),x},v_}var KP;function I2e(){return KP||(KP=1,b_.exports=M2e()),b_.exports}I2e();var P2e=w.version.startsWith("19"),D2e=Symbol.for(P2e?"react.transitional.element":"react.element"),L2e=Symbol.for("react.portal"),F2e=Symbol.for("react.fragment"),B2e=Symbol.for("react.strict_mode"),z2e=Symbol.for("react.profiler"),V2e=Symbol.for("react.consumer"),U2e=Symbol.for("react.context"),uH=Symbol.for("react.forward_ref"),q2e=Symbol.for("react.suspense"),H2e=Symbol.for("react.suspense_list"),F$=Symbol.for("react.memo"),W2e=Symbol.for("react.lazy"),G2e=uH,Y2e=F$;function J2e(e){if(typeof e=="object"&&e!==null){const{$$typeof:t}=e;switch(t){case D2e:switch(e=e.type,e){case F2e:case z2e:case B2e:case q2e:case H2e:return e;default:switch(e=e&&e.$$typeof,e){case U2e:case uH:case W2e:case F$:return e;case V2e:return e;default:return t}}case L2e:return t}}}function X2e(e){return J2e(e)===F$}function K2e(e,t,n,r,{areStatesEqual:s,areOwnPropsEqual:i,areStatePropsEqual:o}){let a=!1,c,u,f,h,p;function y(_,C){return c=_,u=C,f=e(c,u),h=t(r,u),p=n(f,h,u),a=!0,p}function v(){return f=e(c,u),t.dependsOnOwnProps&&(h=t(r,u)),p=n(f,h,u),p}function x(){return e.dependsOnOwnProps&&(f=e(c,u)),t.dependsOnOwnProps&&(h=t(r,u)),p=n(f,h,u),p}function E(){const _=e(c,u),C=!o(_,f);return f=_,C&&(p=n(f,h,u)),p}function N(_,C){const j=!i(C,u),A=!s(_,c,C,u);return c=_,u=C,j&&A?v():j?x():A?E():p}return function(C,j){return a?N(C,j):y(C,j)}}function Q2e(e,{initMapStateToProps:t,initMapDispatchToProps:n,initMergeProps:r,...s}){const i=t(e,s),o=n(e,s),a=r(e,s);return K2e(i,o,a,e,s)}function Z2e(e,t){const n={};for(const r in e){const s=e[r];typeof s=="function"&&(n[r]=(...i)=>t(s(...i)))}return n}function XO(e){return function(n){const r=e(n);function s(){return r}return s.dependsOnOwnProps=!1,s}}function QP(e){return e.dependsOnOwnProps?!!e.dependsOnOwnProps:e.length!==1}function dH(e,t){return function(r,{displayName:s}){const i=function(a,c){return i.dependsOnOwnProps?i.mapToProps(a,c):i.mapToProps(a,void 0)};return i.dependsOnOwnProps=!0,i.mapToProps=function(a,c){i.mapToProps=e,i.dependsOnOwnProps=QP(e);let u=i(a,c);return typeof u=="function"&&(i.mapToProps=u,i.dependsOnOwnProps=QP(u),u=i(a,c)),u},i}}function B$(e,t){return(n,r)=>{throw new Error(`Invalid value of type ${typeof e} for ${t} argument when connecting component ${r.wrappedComponentName}.`)}}function eNe(e){return e&&typeof e=="object"?XO(t=>Z2e(e,t)):e?typeof e=="function"?dH(e):B$(e,"mapDispatchToProps"):XO(t=>({dispatch:t}))}function tNe(e){return e?typeof e=="function"?dH(e):B$(e,"mapStateToProps"):XO(()=>({}))}function nNe(e,t,n){return{...n,...e,...t}}function rNe(e){return function(n,{displayName:r,areMergedPropsEqual:s}){let i=!1,o;return function(c,u,f){const h=e(c,u,f);return i?s(h,o)||(o=h):(i=!0,o=h),o}}}function sNe(e){return e?typeof e=="function"?rNe(e):B$(e,"mergeProps"):()=>nNe}function iNe(e){e()}function oNe(){let e=null,t=null;return{clear(){e=null,t=null},notify(){iNe(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const s=t={callback:n,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){!r||e===null||(r=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}var ZP={notify(){},get:()=>[]};function fH(e,t){let n,r=ZP,s=0,i=!1;function o(x){f();const E=r.subscribe(x);let N=!1;return()=>{N||(N=!0,E(),h())}}function a(){r.notify()}function c(){v.onStateChange&&v.onStateChange()}function u(){return i}function f(){s++,n||(n=t?t.addNestedSub(c):e.subscribe(c),r=oNe())}function h(){s--,n&&s===0&&(n(),n=void 0,r.clear(),r=ZP)}function p(){i||(i=!0,f())}function y(){i&&(i=!1,h())}const v={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:c,isSubscribed:u,trySubscribe:p,tryUnsubscribe:y,getListeners:()=>r};return v}var aNe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",lNe=aNe(),cNe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",uNe=cNe(),dNe=()=>lNe||uNe?w.useLayoutEffect:w.useEffect,Xx=dNe();function eD(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function x_(e,t){if(eD(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(!Object.prototype.hasOwnProperty.call(t,n[s])||!eD(e[n[s]],t[n[s]]))return!1;return!0}var fNe={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},hNe={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},mNe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},hH={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},pNe={[G2e]:mNe,[Y2e]:hH};function tD(e){return X2e(e)?hH:pNe[e.$$typeof]||fNe}var gNe=Object.defineProperty,yNe=Object.getOwnPropertyNames,nD=Object.getOwnPropertySymbols,bNe=Object.getOwnPropertyDescriptor,vNe=Object.getPrototypeOf,rD=Object.prototype;function KO(e,t){if(typeof t!="string"){if(rD){const i=vNe(t);i&&i!==rD&&KO(e,i)}let n=yNe(t);nD&&(n=n.concat(nD(t)));const r=tD(e),s=tD(t);for(let i=0;i<n.length;++i){const o=n[i];if(!hNe[o]&&!(s&&s[o])&&!(r&&r[o])){const a=bNe(t,o);try{gNe(e,o,a)}catch{}}}}return e}var w_=Symbol.for("react-redux-context"),S_=typeof globalThis<"u"?globalThis:{};function xNe(){if(!w.createContext)return{};const e=S_[w_]??(S_[w_]=new Map);let t=e.get(w.createContext);return t||(t=w.createContext(null),e.set(w.createContext,t)),t}var mH=xNe(),wNe=[null,null];function SNe(e,t,n){Xx(()=>e(...t),n)}function ENe(e,t,n,r,s,i){e.current=r,n.current=!1,s.current&&(s.current=null,i())}function NNe(e,t,n,r,s,i,o,a,c,u,f){if(!e)return()=>{};let h=!1,p=null;const y=()=>{if(h||!a.current)return;const x=t.getState();let E,N;try{E=r(x,s.current)}catch(_){N=_,p=_}N||(p=null),E===i.current?o.current||u():(i.current=E,c.current=E,o.current=!0,f())};return n.onStateChange=y,n.trySubscribe(),y(),()=>{if(h=!0,n.tryUnsubscribe(),n.onStateChange=null,p)throw p}}function _Ne(e,t){return e===t}function CNe(e,t,n,{pure:r,areStatesEqual:s=_Ne,areOwnPropsEqual:i=x_,areStatePropsEqual:o=x_,areMergedPropsEqual:a=x_,forwardRef:c=!1,context:u=mH}={}){const f=u,h=tNe(e),p=eNe(t),y=sNe(n),v=!!e;return E=>{const N=E.displayName||E.name||"Component",_=`Connect(${N})`,C={shouldHandleStateChanges:v,displayName:_,wrappedComponentName:N,WrappedComponent:E,initMapStateToProps:h,initMapDispatchToProps:p,initMergeProps:y,areStatesEqual:s,areStatePropsEqual:o,areOwnPropsEqual:i,areMergedPropsEqual:a};function j(k){const[R,B,z]=w.useMemo(()=>{const{reactReduxForwardedRef:Ee,...Re}=k;return[k.context,Ee,Re]},[k]),D=w.useMemo(()=>{let Ee=f;return R!=null&&R.Consumer,Ee},[R,f]),L=w.useContext(D),H=!!k.store&&!!k.store.getState&&!!k.store.dispatch,M=!!L&&!!L.store,V=H?k.store:L.store,T=M?L.getServerState:V.getState,I=w.useMemo(()=>Q2e(V.dispatch,C),[V]),[P,W]=w.useMemo(()=>{if(!v)return wNe;const Ee=fH(V,H?void 0:L.subscription),Re=Ee.notifyNestedSubs.bind(Ee);return[Ee,Re]},[V,H,L]),F=w.useMemo(()=>H?L:{...L,subscription:P},[H,L,P]),q=w.useRef(void 0),X=w.useRef(z),Q=w.useRef(void 0),se=w.useRef(!1),ae=w.useRef(!1),de=w.useRef(void 0);Xx(()=>(ae.current=!0,()=>{ae.current=!1}),[]);const ce=w.useMemo(()=>()=>Q.current&&z===X.current?Q.current:I(V.getState(),z),[V,z]),fe=w.useMemo(()=>Re=>P?NNe(v,V,P,I,X,q,se,ae,Q,W,Re):()=>{},[P]);SNe(ENe,[X,q,se,z,Q,W]);let ve;try{ve=w.useSyncExternalStore(fe,ce,T?()=>I(T(),z):ce)}catch(Ee){throw de.current&&(Ee.message+=`
The error may be correlated with this previous error:
${de.current.stack}

`),Ee}Xx(()=>{de.current=void 0,Q.current=void 0,q.current=ve});const Ae=w.useMemo(()=>w.createElement(E,{...ve,ref:B}),[B,E,ve]);return w.useMemo(()=>v?w.createElement(D.Provider,{value:F},Ae):Ae,[D,Ae,F])}const $=w.memo(j);if($.WrappedComponent=E,$.displayName=j.displayName=_,c){const R=w.forwardRef(function(z,D){return w.createElement($,{...z,reactReduxForwardedRef:D})});return R.displayName=_,R.WrappedComponent=E,KO(R,E)}return KO($,E)}}var pH=CNe;function ONe(e){const{children:t,context:n,serverState:r,store:s}=e,i=w.useMemo(()=>{const c=fH(s);return{store:s,subscription:c,getServerState:r?()=>r:void 0}},[s,r]),o=w.useMemo(()=>s.getState(),[s]);Xx(()=>{const{subscription:c}=i;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==s.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[i,o]);const a=n||mH;return w.createElement(a.Provider,{value:i},t)}var jNe=ONe,ANe="Invariant failed";function TNe(e,t){throw new Error(ANe)}var qi=function(t){var n=t.top,r=t.right,s=t.bottom,i=t.left,o=r-i,a=s-n,c={top:n,right:r,bottom:s,left:i,width:o,height:a,x:i,y:n,center:{x:(r+i)/2,y:(s+n)/2}};return c},z$=function(t,n){return{top:t.top-n.top,left:t.left-n.left,bottom:t.bottom+n.bottom,right:t.right+n.right}},sD=function(t,n){return{top:t.top+n.top,left:t.left+n.left,bottom:t.bottom-n.bottom,right:t.right-n.right}},$Ne=function(t,n){return{top:t.top+n.y,left:t.left+n.x,bottom:t.bottom+n.y,right:t.right+n.x}},E_={top:0,right:0,bottom:0,left:0},V$=function(t){var n=t.borderBox,r=t.margin,s=r===void 0?E_:r,i=t.border,o=i===void 0?E_:i,a=t.padding,c=a===void 0?E_:a,u=qi(z$(n,s)),f=qi(sD(n,o)),h=qi(sD(f,c));return{marginBox:u,borderBox:qi(n),paddingBox:f,contentBox:h,margin:s,border:o,padding:c}},Js=function(t){var n=t.slice(0,-2),r=t.slice(-2);if(r!=="px")return 0;var s=Number(n);return isNaN(s)&&TNe(),s},RNe=function(){return{x:window.pageXOffset,y:window.pageYOffset}},Kx=function(t,n){var r=t.borderBox,s=t.border,i=t.margin,o=t.padding,a=$Ne(r,n);return V$({borderBox:a,border:s,margin:i,padding:o})},Qx=function(t,n){return n===void 0&&(n=RNe()),Kx(t,n)},gH=function(t,n){var r={top:Js(n.marginTop),right:Js(n.marginRight),bottom:Js(n.marginBottom),left:Js(n.marginLeft)},s={top:Js(n.paddingTop),right:Js(n.paddingRight),bottom:Js(n.paddingBottom),left:Js(n.paddingLeft)},i={top:Js(n.borderTopWidth),right:Js(n.borderRightWidth),bottom:Js(n.borderBottomWidth),left:Js(n.borderLeftWidth)};return V$({borderBox:t,margin:r,padding:s,border:i})},yH=function(t){var n=t.getBoundingClientRect(),r=window.getComputedStyle(t);return gH(n,r)},Zg=function(t){var n=[],r=null,s=function(){for(var o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];n=a,!r&&(r=requestAnimationFrame(function(){r=null,t.apply(void 0,n)}))};return s.cancel=function(){r&&(cancelAnimationFrame(r),r=null)},s};function bH(e,t){}bH.bind(null,"warn");bH.bind(null,"error");function yc(){}function kNe(e,t){return{...e,...t}}function ni(e,t,n){const r=t.map(s=>{const i=kNe(n,s.options);return e.addEventListener(s.eventName,s.fn,i),function(){e.removeEventListener(s.eventName,s.fn,i)}});return function(){r.forEach(i=>{i()})}}const MNe="Invariant failed";class Zx extends Error{}Zx.prototype.toString=function(){return this.message};function De(e,t){throw new Zx(MNe)}class INe extends je.Component{constructor(...t){super(...t),this.callbacks=null,this.unbind=yc,this.onWindowError=n=>{const r=this.getCallbacks();r.isDragging()&&r.tryAbort(),n.error instanceof Zx&&n.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=n=>{this.callbacks=n}}componentDidMount(){this.unbind=ni(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(t){if(t instanceof Zx){this.setState({});return}throw t}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const PNe=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,ew=e=>e+1,DNe=e=>`
  You have lifted an item in position ${ew(e.source.index)}
`,vH=(e,t)=>{const n=e.droppableId===t.droppableId,r=ew(e.index),s=ew(t.index);return n?`
      You have moved the item from position ${r}
      to position ${s}
    `:`
    You have moved the item from position ${r}
    in list ${e.droppableId}
    to list ${t.droppableId}
    in position ${s}
  `},xH=(e,t,n)=>t.droppableId===n.droppableId?`
      The item ${e}
      has been combined with ${n.draggableId}`:`
      The item ${e}
      in list ${t.droppableId}
      has been combined with ${n.draggableId}
      in list ${n.droppableId}
    `,LNe=e=>{const t=e.destination;if(t)return vH(e.source,t);const n=e.combine;return n?xH(e.draggableId,e.source,n):"You are over an area that cannot be dropped on"},iD=e=>`
  The item has returned to its starting position
  of ${ew(e.index)}
`,FNe=e=>{if(e.reason==="CANCEL")return`
      Movement cancelled.
      ${iD(e.source)}
    `;const t=e.destination,n=e.combine;return t?`
      You have dropped the item.
      ${vH(e.source,t)}
    `:n?`
      You have dropped the item.
      ${xH(e.draggableId,e.source,n)}
    `:`
    The item has been dropped while not over a drop area.
    ${iD(e.source)}
  `},qv={dragHandleUsageInstructions:PNe,onDragStart:DNe,onDragUpdate:LNe,onDragEnd:FNe};function BNe(e,t){return!!(e===t||Number.isNaN(e)&&Number.isNaN(t))}function wH(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!BNe(e[n],t[n]))return!1;return!0}function Tt(e,t){const n=w.useState(()=>({inputs:t,result:e()}))[0],r=w.useRef(!0),s=w.useRef(n),o=r.current||!!(t&&s.current.inputs&&wH(t,s.current.inputs))?s.current:{inputs:t,result:e()};return w.useEffect(()=>{r.current=!1,s.current=o},[o]),o.result}function rt(e,t){return Tt(()=>e,t)}const cr={x:0,y:0},yr=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),js=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),bc=(e,t)=>e.x===t.x&&e.y===t.y,xm=e=>({x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}),ad=(e,t,n=0)=>e==="x"?{x:t,y:n}:{x:n,y:t},ey=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),oD=(e,t)=>Math.min(...t.map(n=>ey(e,n))),SH=e=>t=>({x:e(t.x),y:e(t.y)});var zNe=(e,t)=>{const n=qi({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return n.width<=0||n.height<=0?null:n};const o0=(e,t)=>({top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}),aD=e=>[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}],VNe={top:0,right:0,bottom:0,left:0},UNe=(e,t)=>t?o0(e,t.scroll.diff.displacement):e,qNe=(e,t,n)=>n&&n.increasedBy?{...e,[t.end]:e[t.end]+n.increasedBy[t.line]}:e,HNe=(e,t)=>t&&t.shouldClipSubject?zNe(t.pageMarginBox,e):qi(e);var Dh=({page:e,withPlaceholder:t,axis:n,frame:r})=>{const s=UNe(e.marginBox,r),i=qNe(s,n,t),o=HNe(i,r);return{page:e,withPlaceholder:t,active:o}},U$=(e,t)=>{e.frame||De();const n=e.frame,r=js(t,n.scroll.initial),s=xm(r),i={...n,scroll:{initial:n.scroll.initial,current:t,diff:{value:r,displacement:s},max:n.scroll.max}},o=Dh({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:i});return{...e,frame:i,subject:o}};function ar(e,t=wH){let n=null;function r(...s){if(n&&n.lastThis===this&&t(s,n.lastArgs))return n.lastResult;const i=e.apply(this,s);return n={lastResult:i,lastArgs:s,lastThis:this},i}return r.clear=function(){n=null},r}const EH=ar(e=>e.reduce((t,n)=>(t[n.descriptor.id]=n,t),{})),NH=ar(e=>e.reduce((t,n)=>(t[n.descriptor.id]=n,t),{})),dS=ar(e=>Object.values(e)),WNe=ar(e=>Object.values(e));var wm=ar((e,t)=>WNe(t).filter(r=>e===r.descriptor.droppableId).sort((r,s)=>r.descriptor.index-s.descriptor.index));function q$(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function fS(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var hS=ar((e,t)=>t.filter(n=>n.descriptor.id!==e.descriptor.id)),GNe=({isMovingForward:e,draggable:t,destination:n,insideDestination:r,previousImpact:s})=>{if(!n.isCombineEnabled||!q$(s))return null;function o(y){const v={type:"COMBINE",combine:{draggableId:y,droppableId:n.descriptor.id}};return{...s,at:v}}const a=s.displaced.all,c=a.length?a[0]:null;if(e)return c?o(c):null;const u=hS(t,r);if(!c){if(!u.length)return null;const y=u[u.length-1];return o(y.descriptor.id)}const f=u.findIndex(y=>y.descriptor.id===c);f===-1&&De();const h=f-1;if(h<0)return null;const p=u[h];return o(p.descriptor.id)},Sm=(e,t)=>e.descriptor.droppableId===t.descriptor.id;const _H={point:cr,value:0},ty={invisible:{},visible:{},all:[]},YNe={displaced:ty,displacedBy:_H,at:null};var oi=(e,t)=>n=>e<=n&&n<=t,CH=e=>{const t=oi(e.top,e.bottom),n=oi(e.left,e.right);return r=>{if(t(r.top)&&t(r.bottom)&&n(r.left)&&n(r.right))return!0;const i=t(r.top)||t(r.bottom),o=n(r.left)||n(r.right);if(i&&o)return!0;const c=r.top<e.top&&r.bottom>e.bottom,u=r.left<e.left&&r.right>e.right;return c&&u?!0:c&&o||u&&i}},JNe=e=>{const t=oi(e.top,e.bottom),n=oi(e.left,e.right);return r=>t(r.top)&&t(r.bottom)&&n(r.left)&&n(r.right)};const H$={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},OH={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var XNe=e=>t=>{const n=oi(t.top,t.bottom),r=oi(t.left,t.right);return s=>e===H$?n(s.top)&&n(s.bottom):r(s.left)&&r(s.right)};const KNe=(e,t)=>{const n=t.frame?t.frame.scroll.diff.displacement:cr;return o0(e,n)},QNe=(e,t,n)=>t.subject.active?n(t.subject.active)(e):!1,ZNe=(e,t,n)=>n(t)(e),W$=({target:e,destination:t,viewport:n,withDroppableDisplacement:r,isVisibleThroughFrameFn:s})=>{const i=r?KNe(e,t):e;return QNe(i,t,s)&&ZNe(i,n,s)},e_e=e=>W$({...e,isVisibleThroughFrameFn:CH}),jH=e=>W$({...e,isVisibleThroughFrameFn:JNe}),t_e=e=>W$({...e,isVisibleThroughFrameFn:XNe(e.destination.axis)}),n_e=(e,t,n)=>{if(typeof n=="boolean")return n;if(!t)return!0;const{invisible:r,visible:s}=t;if(r[e])return!1;const i=s[e];return i?i.shouldAnimate:!0};function r_e(e,t){const n=e.page.marginBox,r={top:t.point.y,right:0,bottom:0,left:t.point.x};return qi(z$(n,r))}function ny({afterDragging:e,destination:t,displacedBy:n,viewport:r,forceShouldAnimate:s,last:i}){return e.reduce(function(a,c){const u=r_e(c,n),f=c.descriptor.id;if(a.all.push(f),!e_e({target:u,destination:t,viewport:r,withDroppableDisplacement:!0}))return a.invisible[c.descriptor.id]=!0,a;const p=n_e(f,i,s),y={draggableId:f,shouldAnimate:p};return a.visible[f]=y,a},{all:[],visible:{},invisible:{}})}function s_e(e,t){if(!e.length)return 0;const n=e[e.length-1].descriptor.index;return t.inHomeList?n:n+1}function lD({insideDestination:e,inHomeList:t,displacedBy:n,destination:r}){const s=s_e(e,{inHomeList:t});return{displaced:ty,displacedBy:n,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:s}}}}function tw({draggable:e,insideDestination:t,destination:n,viewport:r,displacedBy:s,last:i,index:o,forceShouldAnimate:a}){const c=Sm(e,n);if(o==null)return lD({insideDestination:t,inHomeList:c,displacedBy:s,destination:n});const u=t.find(v=>v.descriptor.index===o);if(!u)return lD({insideDestination:t,inHomeList:c,displacedBy:s,destination:n});const f=hS(e,t),h=t.indexOf(u),p=f.slice(h);return{displaced:ny({afterDragging:p,destination:n,displacedBy:s,last:i,viewport:r.frame,forceShouldAnimate:a}),displacedBy:s,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:o}}}}function Ac(e,t){return!!t.effected[e]}var i_e=({isMovingForward:e,destination:t,draggables:n,combine:r,afterCritical:s})=>{if(!t.isCombineEnabled)return null;const i=r.draggableId,a=n[i].descriptor.index;return Ac(i,s)?e?a:a-1:e?a+1:a},o_e=({isMovingForward:e,isInHomeList:t,insideDestination:n,location:r})=>{if(!n.length)return null;const s=r.index,i=e?s+1:s-1,o=n[0].descriptor.index,a=n[n.length-1].descriptor.index,c=t?a:a+1;return i<o||i>c?null:i},a_e=({isMovingForward:e,isInHomeList:t,draggable:n,draggables:r,destination:s,insideDestination:i,previousImpact:o,viewport:a,afterCritical:c})=>{const u=o.at;if(u||De(),u.type==="REORDER"){const h=o_e({isMovingForward:e,isInHomeList:t,location:u.destination,insideDestination:i});return h==null?null:tw({draggable:n,insideDestination:i,destination:s,viewport:a,last:o.displaced,displacedBy:o.displacedBy,index:h})}const f=i_e({isMovingForward:e,destination:s,displaced:o.displaced,draggables:r,combine:u.combine,afterCritical:c});return f==null?null:tw({draggable:n,insideDestination:i,destination:s,viewport:a,last:o.displaced,displacedBy:o.displacedBy,index:f})},l_e=({displaced:e,afterCritical:t,combineWith:n,displacedBy:r})=>{const s=!!(e.visible[n]||e.invisible[n]);return Ac(n,t)?s?cr:xm(r.point):s?r.point:cr},c_e=({afterCritical:e,impact:t,draggables:n})=>{const r=fS(t);r||De();const s=r.draggableId,i=n[s].page.borderBox.center,o=l_e({displaced:t.displaced,afterCritical:e,combineWith:s,displacedBy:t.displacedBy});return yr(i,o)};const AH=(e,t)=>t.margin[e.start]+t.borderBox[e.size]/2,u_e=(e,t)=>t.margin[e.end]+t.borderBox[e.size]/2,G$=(e,t,n)=>t[e.crossAxisStart]+n.margin[e.crossAxisStart]+n.borderBox[e.crossAxisSize]/2,cD=({axis:e,moveRelativeTo:t,isMoving:n})=>ad(e.line,t.marginBox[e.end]+AH(e,n),G$(e,t.marginBox,n)),uD=({axis:e,moveRelativeTo:t,isMoving:n})=>ad(e.line,t.marginBox[e.start]-u_e(e,n),G$(e,t.marginBox,n)),d_e=({axis:e,moveInto:t,isMoving:n})=>ad(e.line,t.contentBox[e.start]+AH(e,n),G$(e,t.contentBox,n));var f_e=({impact:e,draggable:t,draggables:n,droppable:r,afterCritical:s})=>{const i=wm(r.descriptor.id,n),o=t.page,a=r.axis;if(!i.length)return d_e({axis:a,moveInto:r.page,isMoving:o});const{displaced:c,displacedBy:u}=e,f=c.all[0];if(f){const p=n[f];if(Ac(f,s))return uD({axis:a,moveRelativeTo:p.page,isMoving:o});const y=Kx(p.page,u.point);return uD({axis:a,moveRelativeTo:y,isMoving:o})}const h=i[i.length-1];if(h.descriptor.id===t.descriptor.id)return o.borderBox.center;if(Ac(h.descriptor.id,s)){const p=Kx(h.page,xm(s.displacedBy.point));return cD({axis:a,moveRelativeTo:p,isMoving:o})}return cD({axis:a,moveRelativeTo:h.page,isMoving:o})},QO=(e,t)=>{const n=e.frame;return n?yr(t,n.scroll.diff.displacement):t};const h_e=({impact:e,draggable:t,droppable:n,draggables:r,afterCritical:s})=>{const i=t.page.borderBox.center,o=e.at;return!n||!o?i:o.type==="REORDER"?f_e({impact:e,draggable:t,draggables:r,droppable:n,afterCritical:s}):c_e({impact:e,draggables:r,afterCritical:s})};var mS=e=>{const t=h_e(e),n=e.droppable;return n?QO(n,t):t},TH=(e,t)=>{const n=js(t,e.scroll.initial),r=xm(n);return{frame:qi({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:n,displacement:r}}}};function dD(e,t){return e.map(n=>t[n])}function m_e(e,t){for(let n=0;n<t.length;n++){const r=t[n].visible[e];if(r)return r}return null}var p_e=({impact:e,viewport:t,destination:n,draggables:r,maxScrollChange:s})=>{const i=TH(t,yr(t.scroll.current,s)),o=n.frame?U$(n,yr(n.frame.scroll.current,s)):n,a=e.displaced,c=ny({afterDragging:dD(a.all,r),destination:n,displacedBy:e.displacedBy,viewport:i.frame,last:a,forceShouldAnimate:!1}),u=ny({afterDragging:dD(a.all,r),destination:o,displacedBy:e.displacedBy,viewport:t.frame,last:a,forceShouldAnimate:!1}),f={},h={},p=[a,c,u];return a.all.forEach(v=>{const x=m_e(v,p);if(x){h[v]=x;return}f[v]=!0}),{...e,displaced:{all:a.all,invisible:f,visible:h}}},g_e=(e,t)=>yr(e.scroll.diff.displacement,t),Y$=({pageBorderBoxCenter:e,draggable:t,viewport:n})=>{const r=g_e(n,e),s=js(r,t.page.borderBox.center);return yr(t.client.borderBox.center,s)},$H=({draggable:e,destination:t,newPageBorderBoxCenter:n,viewport:r,withDroppableDisplacement:s,onlyOnMainAxis:i=!1})=>{const o=js(n,e.page.borderBox.center),c={target:o0(e.page.borderBox,o),destination:t,withDroppableDisplacement:s,viewport:r};return i?t_e(c):jH(c)},y_e=({isMovingForward:e,draggable:t,destination:n,draggables:r,previousImpact:s,viewport:i,previousPageBorderBoxCenter:o,previousClientSelection:a,afterCritical:c})=>{if(!n.isEnabled)return null;const u=wm(n.descriptor.id,r),f=Sm(t,n),h=GNe({isMovingForward:e,draggable:t,destination:n,insideDestination:u,previousImpact:s})||a_e({isMovingForward:e,isInHomeList:f,draggable:t,draggables:r,destination:n,insideDestination:u,previousImpact:s,viewport:i,afterCritical:c});if(!h)return null;const p=mS({impact:h,draggable:t,droppable:n,draggables:r,afterCritical:c});if($H({draggable:t,destination:n,newPageBorderBoxCenter:p,viewport:i.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:Y$({pageBorderBoxCenter:p,draggable:t,viewport:i}),impact:h,scrollJumpRequest:null};const v=js(p,o),x=p_e({impact:h,viewport:i,destination:n,draggables:r,maxScrollChange:v});return{clientSelection:a,impact:x,scrollJumpRequest:v}};const Rr=e=>{const t=e.subject.active;return t||De(),t};var b_e=({isMovingForward:e,pageBorderBoxCenter:t,source:n,droppables:r,viewport:s})=>{const i=n.subject.active;if(!i)return null;const o=n.axis,a=oi(i[o.start],i[o.end]),c=dS(r).filter(f=>f!==n).filter(f=>f.isEnabled).filter(f=>!!f.subject.active).filter(f=>CH(s.frame)(Rr(f))).filter(f=>{const h=Rr(f);return e?i[o.crossAxisEnd]<h[o.crossAxisEnd]:h[o.crossAxisStart]<i[o.crossAxisStart]}).filter(f=>{const h=Rr(f),p=oi(h[o.start],h[o.end]);return a(h[o.start])||a(h[o.end])||p(i[o.start])||p(i[o.end])}).sort((f,h)=>{const p=Rr(f)[o.crossAxisStart],y=Rr(h)[o.crossAxisStart];return e?p-y:y-p}).filter((f,h,p)=>Rr(f)[o.crossAxisStart]===Rr(p[0])[o.crossAxisStart]);if(!c.length)return null;if(c.length===1)return c[0];const u=c.filter(f=>oi(Rr(f)[o.start],Rr(f)[o.end])(t[o.line]));return u.length===1?u[0]:u.length>1?u.sort((f,h)=>Rr(f)[o.start]-Rr(h)[o.start])[0]:c.sort((f,h)=>{const p=oD(t,aD(Rr(f))),y=oD(t,aD(Rr(h)));return p!==y?p-y:Rr(f)[o.start]-Rr(h)[o.start]})[0]};const fD=(e,t)=>{const n=e.page.borderBox.center;return Ac(e.descriptor.id,t)?js(n,t.displacedBy.point):n},v_e=(e,t)=>{const n=e.page.borderBox;return Ac(e.descriptor.id,t)?o0(n,xm(t.displacedBy.point)):n};var x_e=({pageBorderBoxCenter:e,viewport:t,destination:n,insideDestination:r,afterCritical:s})=>r.filter(o=>jH({target:v_e(o,s),destination:n,viewport:t.frame,withDroppableDisplacement:!0})).sort((o,a)=>{const c=ey(e,QO(n,fD(o,s))),u=ey(e,QO(n,fD(a,s)));return c<u?-1:u<c?1:o.descriptor.index-a.descriptor.index})[0]||null,a0=ar(function(t,n){const r=n[t.line];return{value:r,point:ad(t.line,r)}});const w_e=(e,t,n)=>{const r=e.axis;if(e.descriptor.mode==="virtual")return ad(r.line,t[r.line]);const s=e.subject.page.contentBox[r.size],c=wm(e.descriptor.id,n).reduce((u,f)=>u+f.client.marginBox[r.size],0)+t[r.line]-s;return c<=0?null:ad(r.line,c)},RH=(e,t)=>({...e,scroll:{...e.scroll,max:t}}),kH=(e,t,n)=>{const r=e.frame;Sm(t,e)&&De(),e.subject.withPlaceholder&&De();const s=a0(e.axis,t.displaceBy).point,i=w_e(e,s,n),o={placeholderSize:s,increasedBy:i,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!r){const f=Dh({page:e.subject.page,withPlaceholder:o,axis:e.axis,frame:e.frame});return{...e,subject:f}}const a=i?yr(r.scroll.max,i):r.scroll.max,c=RH(r,a),u=Dh({page:e.subject.page,withPlaceholder:o,axis:e.axis,frame:c});return{...e,subject:u,frame:c}},S_e=e=>{const t=e.subject.withPlaceholder;t||De();const n=e.frame;if(!n){const o=Dh({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return{...e,subject:o}}const r=t.oldFrameMaxScroll;r||De();const s=RH(n,r),i=Dh({page:e.subject.page,axis:e.axis,frame:s,withPlaceholder:null});return{...e,subject:i,frame:s}};var E_e=({previousPageBorderBoxCenter:e,moveRelativeTo:t,insideDestination:n,draggable:r,draggables:s,destination:i,viewport:o,afterCritical:a})=>{if(!t){if(n.length)return null;const h={displaced:ty,displacedBy:_H,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:0}}},p=mS({impact:h,draggable:r,droppable:i,draggables:s,afterCritical:a}),y=Sm(r,i)?i:kH(i,r,s);return $H({draggable:r,destination:y,newPageBorderBoxCenter:p,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?h:null}const c=e[i.axis.line]<=t.page.borderBox.center[i.axis.line],u=(()=>{const h=t.descriptor.index;return t.descriptor.id===r.descriptor.id||c?h:h+1})(),f=a0(i.axis,r.displaceBy);return tw({draggable:r,insideDestination:n,destination:i,viewport:o,displacedBy:f,last:ty,index:u})},N_e=({isMovingForward:e,previousPageBorderBoxCenter:t,draggable:n,isOver:r,draggables:s,droppables:i,viewport:o,afterCritical:a})=>{const c=b_e({isMovingForward:e,pageBorderBoxCenter:t,source:r,droppables:i,viewport:o});if(!c)return null;const u=wm(c.descriptor.id,s),f=x_e({pageBorderBoxCenter:t,viewport:o,destination:c,insideDestination:u,afterCritical:a}),h=E_e({previousPageBorderBoxCenter:t,destination:c,draggable:n,draggables:s,moveRelativeTo:f,insideDestination:u,viewport:o,afterCritical:a});if(!h)return null;const p=mS({impact:h,draggable:n,droppable:c,draggables:s,afterCritical:a});return{clientSelection:Y$({pageBorderBoxCenter:p,draggable:n,viewport:o}),impact:h,scrollJumpRequest:null}},$s=e=>{const t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null};const __e=(e,t)=>{const n=$s(e);return n?t[n]:null};var C_e=({state:e,type:t})=>{const n=__e(e.impact,e.dimensions.droppables),r=!!n,s=e.dimensions.droppables[e.critical.droppable.id],i=n||s,o=i.axis.direction,a=o==="vertical"&&(t==="MOVE_UP"||t==="MOVE_DOWN")||o==="horizontal"&&(t==="MOVE_LEFT"||t==="MOVE_RIGHT");if(a&&!r)return null;const c=t==="MOVE_DOWN"||t==="MOVE_RIGHT",u=e.dimensions.draggables[e.critical.draggable.id],f=e.current.page.borderBoxCenter,{draggables:h,droppables:p}=e.dimensions;return a?y_e({isMovingForward:c,previousPageBorderBoxCenter:f,draggable:u,destination:i,draggables:h,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):N_e({isMovingForward:c,previousPageBorderBoxCenter:f,draggable:u,isOver:i,draggables:h,droppables:p,viewport:e.viewport,afterCritical:e.afterCritical})};function xu(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function MH(e){const t=oi(e.top,e.bottom),n=oi(e.left,e.right);return function(s){return t(s.y)&&n(s.x)}}function O_e(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function j_e({pageBorderBox:e,draggable:t,candidates:n}){const r=t.page.borderBox.center,s=n.map(i=>{const o=i.axis,a=ad(i.axis.line,e.center[o.line],i.page.borderBox.center[o.crossAxisLine]);return{id:i.descriptor.id,distance:ey(r,a)}}).sort((i,o)=>o.distance-i.distance);return s[0]?s[0].id:null}function A_e({pageBorderBox:e,draggable:t,droppables:n}){const r=dS(n).filter(s=>{if(!s.isEnabled)return!1;const i=s.subject.active;if(!i||!O_e(e,i))return!1;if(MH(i)(e.center))return!0;const o=s.axis,a=i.center[o.crossAxisLine],c=e[o.crossAxisStart],u=e[o.crossAxisEnd],f=oi(i[o.crossAxisStart],i[o.crossAxisEnd]),h=f(c),p=f(u);return!h&&!p?!0:h?c<a:u>a});return r.length?r.length===1?r[0].descriptor.id:j_e({pageBorderBox:e,draggable:t,candidates:r}):null}const IH=(e,t)=>qi(o0(e,t));var T_e=(e,t)=>{const n=e.frame;return n?IH(t,n.scroll.diff.value):t};function PH({displaced:e,id:t}){return!!(e.visible[t]||e.invisible[t])}function $_e({draggable:e,closest:t,inHomeList:n}){return t?n&&t.descriptor.index>e.descriptor.index?t.descriptor.index-1:t.descriptor.index:null}var R_e=({pageBorderBoxWithDroppableScroll:e,draggable:t,destination:n,insideDestination:r,last:s,viewport:i,afterCritical:o})=>{const a=n.axis,c=a0(n.axis,t.displaceBy),u=c.value,f=e[a.start],h=e[a.end],y=hS(t,r).find(x=>{const E=x.descriptor.id,N=x.page.borderBox.center[a.line],_=Ac(E,o),C=PH({displaced:s,id:E});return _?C?h<=N:f<N-u:C?h<=N+u:f<N})||null,v=$_e({draggable:t,closest:y,inHomeList:Sm(t,n)});return tw({draggable:t,insideDestination:r,destination:n,viewport:i,last:s,displacedBy:c,index:v})};const k_e=4;var M_e=({draggable:e,pageBorderBoxWithDroppableScroll:t,previousImpact:n,destination:r,insideDestination:s,afterCritical:i})=>{if(!r.isCombineEnabled)return null;const o=r.axis,a=a0(r.axis,e.displaceBy),c=a.value,u=t[o.start],f=t[o.end],p=hS(e,s).find(v=>{const x=v.descriptor.id,E=v.page.borderBox,_=E[o.size]/k_e,C=Ac(x,i),j=PH({displaced:n.displaced,id:x});return C?j?f>E[o.start]+_&&f<E[o.end]-_:u>E[o.start]-c+_&&u<E[o.end]-c-_:j?f>E[o.start]+c+_&&f<E[o.end]+c-_:u>E[o.start]+_&&u<E[o.end]-_});return p?{displacedBy:a,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:p.descriptor.id,droppableId:r.descriptor.id}}}:null},DH=({pageOffset:e,draggable:t,draggables:n,droppables:r,previousImpact:s,viewport:i,afterCritical:o})=>{const a=IH(t.page.borderBox,e),c=A_e({pageBorderBox:a,draggable:t,droppables:r});if(!c)return YNe;const u=r[c],f=wm(u.descriptor.id,n),h=T_e(u,a);return M_e({pageBorderBoxWithDroppableScroll:h,draggable:t,previousImpact:s,destination:u,insideDestination:f,afterCritical:o})||R_e({pageBorderBoxWithDroppableScroll:h,draggable:t,destination:u,insideDestination:f,last:s.displaced,viewport:i,afterCritical:o})},J$=(e,t)=>({...e,[t.descriptor.id]:t});const I_e=({previousImpact:e,impact:t,droppables:n})=>{const r=$s(e),s=$s(t);if(!r||r===s)return n;const i=n[r];if(!i.subject.withPlaceholder)return n;const o=S_e(i);return J$(n,o)};var P_e=({draggable:e,draggables:t,droppables:n,previousImpact:r,impact:s})=>{const i=I_e({previousImpact:r,impact:s,droppables:n}),o=$s(s);if(!o)return i;const a=n[o];if(Sm(e,a)||a.subject.withPlaceholder)return i;const c=kH(a,e,t);return J$(i,c)},pg=({state:e,clientSelection:t,dimensions:n,viewport:r,impact:s,scrollJumpRequest:i})=>{const o=r||e.viewport,a=n||e.dimensions,c=t||e.current.client.selection,u=js(c,e.initial.client.selection),f={offset:u,selection:c,borderBoxCenter:yr(e.initial.client.borderBoxCenter,u)},h={selection:yr(f.selection,o.scroll.current),borderBoxCenter:yr(f.borderBoxCenter,o.scroll.current),offset:yr(f.offset,o.scroll.diff.value)},p={client:f,page:h};if(e.phase==="COLLECTING")return{...e,dimensions:a,viewport:o,current:p};const y=a.draggables[e.critical.draggable.id],v=s||DH({pageOffset:h.offset,draggable:y,draggables:a.draggables,droppables:a.droppables,previousImpact:e.impact,viewport:o,afterCritical:e.afterCritical}),x=P_e({draggable:y,impact:v,previousImpact:e.impact,draggables:a.draggables,droppables:a.droppables});return{...e,current:p,dimensions:{draggables:a.draggables,droppables:x},impact:v,viewport:o,scrollJumpRequest:i||null,forceShouldAnimate:i?!1:null}};function D_e(e,t){return e.map(n=>t[n])}var LH=({impact:e,viewport:t,draggables:n,destination:r,forceShouldAnimate:s})=>{const i=e.displaced,o=D_e(i.all,n),a=ny({afterDragging:o,destination:r,displacedBy:e.displacedBy,viewport:t.frame,forceShouldAnimate:s,last:i});return{...e,displaced:a}},FH=({impact:e,draggable:t,droppable:n,draggables:r,viewport:s,afterCritical:i})=>{const o=mS({impact:e,draggable:t,draggables:r,droppable:n,afterCritical:i});return Y$({pageBorderBoxCenter:o,draggable:t,viewport:s})},BH=({state:e,dimensions:t,viewport:n})=>{e.movementMode!=="SNAP"&&De();const r=e.impact,s=n||e.viewport,i=t||e.dimensions,{draggables:o,droppables:a}=i,c=o[e.critical.draggable.id],u=$s(r);u||De();const f=a[u],h=LH({impact:r,viewport:s,destination:f,draggables:o}),p=FH({impact:h,draggable:c,droppable:f,draggables:o,viewport:s,afterCritical:e.afterCritical});return pg({impact:h,clientSelection:p,state:e,dimensions:i,viewport:s})},L_e=e=>({index:e.index,droppableId:e.droppableId}),zH=({draggable:e,home:t,draggables:n,viewport:r})=>{const s=a0(t.axis,e.displaceBy),i=wm(t.descriptor.id,n),o=i.indexOf(e);o===-1&&De();const a=i.slice(o+1),c=a.reduce((p,y)=>(p[y.descriptor.id]=!0,p),{}),u={inVirtualList:t.descriptor.mode==="virtual",displacedBy:s,effected:c};return{impact:{displaced:ny({afterDragging:a,destination:t,displacedBy:s,last:null,viewport:r.frame,forceShouldAnimate:!1}),displacedBy:s,at:{type:"REORDER",destination:L_e(e.descriptor)}},afterCritical:u}},F_e=(e,t)=>({draggables:e.draggables,droppables:J$(e.droppables,t)}),B_e=({draggable:e,offset:t,initialWindowScroll:n})=>{const r=Kx(e.client,t),s=Qx(r,n);return{...e,placeholder:{...e.placeholder,client:r},client:r,page:s}},z_e=e=>{const t=e.frame;return t||De(),t},V_e=({additions:e,updatedDroppables:t,viewport:n})=>{const r=n.scroll.diff.value;return e.map(s=>{const i=s.descriptor.droppableId,o=t[i],c=z_e(o).scroll.diff.value,u=yr(r,c);return B_e({draggable:s,offset:u,initialWindowScroll:n.scroll.initial})})},U_e=({state:e,published:t})=>{const n=t.modified.map(N=>{const _=e.dimensions.droppables[N.droppableId];return U$(_,N.scroll)}),r={...e.dimensions.droppables,...EH(n)},s=NH(V_e({additions:t.additions,updatedDroppables:r,viewport:e.viewport})),i={...e.dimensions.draggables,...s};t.removals.forEach(N=>{delete i[N]});const o={droppables:r,draggables:i},a=$s(e.impact),c=a?o.droppables[a]:null,u=o.draggables[e.critical.draggable.id],f=o.droppables[e.critical.droppable.id],{impact:h,afterCritical:p}=zH({draggable:u,home:f,draggables:i,viewport:e.viewport}),y=c&&c.isCombineEnabled?e.impact:h,v=DH({pageOffset:e.current.page.offset,draggable:o.draggables[e.critical.draggable.id],draggables:o.draggables,droppables:o.droppables,previousImpact:y,viewport:e.viewport,afterCritical:p}),x={...e,phase:"DRAGGING",impact:v,onLiftImpact:h,dimensions:o,afterCritical:p,forceShouldAnimate:!1};return e.phase==="COLLECTING"?x:{...x,phase:"DROP_PENDING",reason:e.reason,isWaiting:!1}};const ZO=e=>e.movementMode==="SNAP",N_=(e,t,n)=>{const r=F_e(e.dimensions,t);return!ZO(e)||n?pg({state:e,dimensions:r}):BH({state:e,dimensions:r})};function __(e){return e.isDragging&&e.movementMode==="SNAP"?{...e,scrollJumpRequest:null}:e}const hD={phase:"IDLE",completed:null,shouldFlush:!1};var q_e=(e=hD,t)=>{if(t.type==="FLUSH")return{...hD,shouldFlush:!0};if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&De();const{critical:n,clientSelection:r,viewport:s,dimensions:i,movementMode:o}=t.payload,a=i.draggables[n.draggable.id],c=i.droppables[n.droppable.id],u={selection:r,borderBoxCenter:a.client.borderBox.center,offset:cr},f={client:u,page:{selection:yr(u.selection,s.scroll.initial),borderBoxCenter:yr(u.selection,s.scroll.initial),offset:yr(u.selection,s.scroll.diff.value)}},h=dS(i.droppables).every(x=>!x.isFixedOnPage),{impact:p,afterCritical:y}=zH({draggable:a,home:c,draggables:i.draggables,viewport:s});return{phase:"DRAGGING",isDragging:!0,critical:n,movementMode:o,dimensions:i,initial:f,current:f,isWindowScrollAllowed:h,impact:p,afterCritical:y,onLiftImpact:p,viewport:s,scrollJumpRequest:null,forceShouldAnimate:null}}if(t.type==="COLLECTION_STARTING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"?e:(e.phase!=="DRAGGING"&&De(),{...e,phase:"COLLECTING"});if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||De(),U_e({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;xu(e)||De();const{client:n}=t.payload;return bc(n,e.current.client.selection)?e:pg({state:e,clientSelection:n,impact:ZO(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return __(e);xu(e)||De();const{id:n,newScroll:r}=t.payload,s=e.dimensions.droppables[n];if(!s)return e;const i=U$(s,r);return N_(e,i,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;xu(e)||De();const{id:n,isEnabled:r}=t.payload,s=e.dimensions.droppables[n];s||De(),s.isEnabled===r&&De();const i={...s,isEnabled:r};return N_(e,i,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;xu(e)||De();const{id:n,isCombineEnabled:r}=t.payload,s=e.dimensions.droppables[n];s||De(),s.isCombineEnabled===r&&De();const i={...s,isCombineEnabled:r};return N_(e,i,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;xu(e)||De(),e.isWindowScrollAllowed||De();const n=t.payload.newScroll;if(bc(e.viewport.scroll.current,n))return __(e);const r=TH(e.viewport,n);return ZO(e)?BH({state:e,viewport:r}):pg({state:e,viewport:r})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!xu(e))return e;const n=t.payload.maxScroll;if(bc(n,e.viewport.scroll.max))return e;const r={...e.viewport,scroll:{...e.viewport.scroll,max:n}};return{...e,viewport:r}}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&De();const n=C_e({state:e,type:t.type});return n?pg({state:e,impact:n.impact,clientSelection:n.clientSelection,scrollJumpRequest:n.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){const n=t.payload.reason;return e.phase!=="COLLECTING"&&De(),{...e,phase:"DROP_PENDING",isWaiting:!0,reason:n}}if(t.type==="DROP_ANIMATE"){const{completed:n,dropDuration:r,newHomeClientOffset:s}=t.payload;return e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||De(),{phase:"DROP_ANIMATING",completed:n,dropDuration:r,newHomeClientOffset:s,dimensions:e.dimensions}}if(t.type==="DROP_COMPLETE"){const{completed:n}=t.payload;return{phase:"IDLE",completed:n,shouldFlush:!1}}return e};function Ht(e,t){return e instanceof Object&&"type"in e&&e.type===t}const H_e=e=>({type:"BEFORE_INITIAL_CAPTURE",payload:e}),W_e=e=>({type:"LIFT",payload:e}),G_e=e=>({type:"INITIAL_PUBLISH",payload:e}),Y_e=e=>({type:"PUBLISH_WHILE_DRAGGING",payload:e}),J_e=()=>({type:"COLLECTION_STARTING",payload:null}),X_e=e=>({type:"UPDATE_DROPPABLE_SCROLL",payload:e}),K_e=e=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}),Q_e=e=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}),VH=e=>({type:"MOVE",payload:e}),Z_e=e=>({type:"MOVE_BY_WINDOW_SCROLL",payload:e}),eCe=e=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}),tCe=()=>({type:"MOVE_UP",payload:null}),nCe=()=>({type:"MOVE_DOWN",payload:null}),rCe=()=>({type:"MOVE_RIGHT",payload:null}),sCe=()=>({type:"MOVE_LEFT",payload:null}),X$=()=>({type:"FLUSH",payload:null}),iCe=e=>({type:"DROP_ANIMATE",payload:e}),K$=e=>({type:"DROP_COMPLETE",payload:e}),UH=e=>({type:"DROP",payload:e}),oCe=e=>({type:"DROP_PENDING",payload:e}),qH=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var aCe=e=>({getState:t,dispatch:n})=>r=>s=>{if(!Ht(s,"LIFT")){r(s);return}const{id:i,clientSelection:o,movementMode:a}=s.payload,c=t();c.phase==="DROP_ANIMATING"&&n(K$({completed:c.completed})),t().phase!=="IDLE"&&De(),n(X$()),n(H_e({draggableId:i,movementMode:a}));const f={draggableId:i,scrollOptions:{shouldPublishImmediately:a==="SNAP"}},{critical:h,dimensions:p,viewport:y}=e.startPublishing(f);n(G_e({critical:h,dimensions:p,clientSelection:o,movementMode:a,viewport:y}))},lCe=e=>()=>t=>n=>{Ht(n,"INITIAL_PUBLISH")&&e.dragging(),Ht(n,"DROP_ANIMATE")&&e.dropping(n.payload.completed.result.reason),(Ht(n,"FLUSH")||Ht(n,"DROP_COMPLETE"))&&e.resting(),t(n)};const Q$={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},ry={opacity:{drop:0,combining:.7},scale:{drop:.75}},HH={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},hu=`${HH.outOfTheWay}s ${Q$.outOfTheWay}`,gg={fluid:`opacity ${hu}`,snap:`transform ${hu}, opacity ${hu}`,drop:e=>{const t=`${e}s ${Q$.drop}`;return`transform ${t}, opacity ${t}`},outOfTheWay:`transform ${hu}`,placeholder:`height ${hu}, width ${hu}, margin ${hu}`},mD=e=>bc(e,cr)?void 0:`translate(${e.x}px, ${e.y}px)`,ej={moveTo:mD,drop:(e,t)=>{const n=mD(e);if(n)return t?`${n} scale(${ry.scale.drop})`:n}},{minDropTime:tj,maxDropTime:WH}=HH,cCe=WH-tj,pD=1500,uCe=.6;var dCe=({current:e,destination:t,reason:n})=>{const r=ey(e,t);if(r<=0)return tj;if(r>=pD)return WH;const s=r/pD,i=tj+cCe*s,o=n==="CANCEL"?i*uCe:i;return Number(o.toFixed(2))},fCe=({impact:e,draggable:t,dimensions:n,viewport:r,afterCritical:s})=>{const{draggables:i,droppables:o}=n,a=$s(e),c=a?o[a]:null,u=o[t.descriptor.droppableId],f=FH({impact:e,draggable:t,draggables:i,afterCritical:s,droppable:c||u,viewport:r});return js(f,t.client.borderBox.center)},hCe=({draggables:e,reason:t,lastImpact:n,home:r,viewport:s,onLiftImpact:i})=>!n.at||t!=="DROP"?{impact:LH({draggables:e,impact:i,destination:r,viewport:s,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:n.at.type==="REORDER"?{impact:n,didDropInsideDroppable:!0}:{impact:{...n,displaced:ty},didDropInsideDroppable:!0};const mCe=({getState:e,dispatch:t})=>n=>r=>{if(!Ht(r,"DROP")){n(r);return}const s=e(),i=r.payload.reason;if(s.phase==="COLLECTING"){t(oCe({reason:i}));return}if(s.phase==="IDLE")return;s.phase==="DROP_PENDING"&&s.isWaiting&&De(),s.phase==="DRAGGING"||s.phase==="DROP_PENDING"||De();const a=s.critical,c=s.dimensions,u=c.draggables[s.critical.draggable.id],{impact:f,didDropInsideDroppable:h}=hCe({reason:i,lastImpact:s.impact,afterCritical:s.afterCritical,onLiftImpact:s.onLiftImpact,home:s.dimensions.droppables[s.critical.droppable.id],viewport:s.viewport,draggables:s.dimensions.draggables}),p=h?q$(f):null,y=h?fS(f):null,v={index:a.draggable.index,droppableId:a.droppable.id},x={draggableId:u.descriptor.id,type:u.descriptor.type,source:v,reason:i,mode:s.movementMode,destination:p,combine:y},E=fCe({impact:f,draggable:u,dimensions:c,viewport:s.viewport,afterCritical:s.afterCritical}),N={critical:s.critical,afterCritical:s.afterCritical,result:x,impact:f};if(!(!bc(s.current.client.offset,E)||!!x.combine)){t(K$({completed:N}));return}const C=dCe({current:s.current.client.offset,destination:E,reason:i});t(iCe({newHomeClientOffset:E,dropDuration:C,completed:N}))};var GH=()=>({x:window.pageXOffset,y:window.pageYOffset});function pCe(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:t=>{t.target!==window&&t.target!==window.document||e()}}}function gCe({onWindowScroll:e}){function t(){e(GH())}const n=Zg(t),r=pCe(n);let s=yc;function i(){return s!==yc}function o(){i()&&De(),s=ni(window,[r])}function a(){i()||De(),n.cancel(),s(),s=yc}return{start:o,stop:a,isActive:i}}const yCe=e=>Ht(e,"DROP_COMPLETE")||Ht(e,"DROP_ANIMATE")||Ht(e,"FLUSH"),bCe=e=>{const t=gCe({onWindowScroll:n=>{e.dispatch(Z_e({newScroll:n}))}});return n=>r=>{!t.isActive()&&Ht(r,"INITIAL_PUBLISH")&&t.start(),t.isActive()&&yCe(r)&&t.stop(),n(r)}};var vCe=e=>{let t=!1,n=!1;const r=setTimeout(()=>{n=!0}),s=i=>{t||n||(t=!0,e(i),clearTimeout(r))};return s.wasCalled=()=>t,s},xCe=()=>{const e=[],t=s=>{const i=e.findIndex(a=>a.timerId===s);i===-1&&De();const[o]=e.splice(i,1);o.callback()};return{add:s=>{const i=setTimeout(()=>t(i)),o={timerId:i,callback:s};e.push(o)},flush:()=>{if(!e.length)return;const s=[...e];e.length=0,s.forEach(i=>{clearTimeout(i.timerId),i.callback()})}}};const wCe=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.droppableId===t.droppableId&&e.index===t.index,SCe=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.draggableId===t.draggableId&&e.droppableId===t.droppableId,ECe=(e,t)=>{if(e===t)return!0;const n=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,r=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return n&&r},Bp=(e,t)=>{t()},iv=(e,t)=>({draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t});function C_(e,t,n,r){if(!e){n(r(t));return}const s=vCe(n);e(t,{announce:s}),s.wasCalled()||n(r(t))}var NCe=(e,t)=>{const n=xCe();let r=null;const s=(h,p)=>{r&&De(),Bp("onBeforeCapture",()=>{const y=e().onBeforeCapture;y&&y({draggableId:h,mode:p})})},i=(h,p)=>{r&&De(),Bp("onBeforeDragStart",()=>{const y=e().onBeforeDragStart;y&&y(iv(h,p))})},o=(h,p)=>{r&&De();const y=iv(h,p);r={mode:p,lastCritical:h,lastLocation:y.source,lastCombine:null},n.add(()=>{Bp("onDragStart",()=>C_(e().onDragStart,y,t,qv.onDragStart))})},a=(h,p)=>{const y=q$(p),v=fS(p);r||De();const x=!ECe(h,r.lastCritical);x&&(r.lastCritical=h);const E=!wCe(r.lastLocation,y);E&&(r.lastLocation=y);const N=!SCe(r.lastCombine,v);if(N&&(r.lastCombine=v),!x&&!E&&!N)return;const _={...iv(h,r.mode),combine:v,destination:y};n.add(()=>{Bp("onDragUpdate",()=>C_(e().onDragUpdate,_,t,qv.onDragUpdate))})},c=()=>{r||De(),n.flush()},u=h=>{r||De(),r=null,Bp("onDragEnd",()=>C_(e().onDragEnd,h,t,qv.onDragEnd))};return{beforeCapture:s,beforeStart:i,start:o,update:a,flush:c,drop:u,abort:()=>{if(!r)return;const h={...iv(r.lastCritical,r.mode),combine:null,destination:null,reason:"CANCEL"};u(h)}}},_Ce=(e,t)=>{const n=NCe(e,t);return r=>s=>i=>{if(Ht(i,"BEFORE_INITIAL_CAPTURE")){n.beforeCapture(i.payload.draggableId,i.payload.movementMode);return}if(Ht(i,"INITIAL_PUBLISH")){const a=i.payload.critical;n.beforeStart(a,i.payload.movementMode),s(i),n.start(a,i.payload.movementMode);return}if(Ht(i,"DROP_COMPLETE")){const a=i.payload.completed.result;n.flush(),s(i),n.drop(a);return}if(s(i),Ht(i,"FLUSH")){n.abort();return}const o=r.getState();o.phase==="DRAGGING"&&n.update(o.critical,o.impact)}};const CCe=e=>t=>n=>{if(!Ht(n,"DROP_ANIMATION_FINISHED")){t(n);return}const r=e.getState();r.phase!=="DROP_ANIMATING"&&De(),e.dispatch(K$({completed:r.completed}))},OCe=e=>{let t=null,n=null;function r(){n&&(cancelAnimationFrame(n),n=null),t&&(t(),t=null)}return s=>i=>{if((Ht(i,"FLUSH")||Ht(i,"DROP_COMPLETE")||Ht(i,"DROP_ANIMATION_FINISHED"))&&r(),s(i),!Ht(i,"DROP_ANIMATE"))return;const o={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){e.getState().phase==="DROP_ANIMATING"&&e.dispatch(qH())}};n=requestAnimationFrame(()=>{n=null,t=ni(window,[o])})}};var jCe=e=>()=>t=>n=>{(Ht(n,"DROP_COMPLETE")||Ht(n,"FLUSH")||Ht(n,"DROP_ANIMATE"))&&e.stopPublishing(),t(n)},ACe=e=>{let t=!1;return()=>n=>r=>{if(Ht(r,"INITIAL_PUBLISH")){t=!0,e.tryRecordFocus(r.payload.critical.draggable.id),n(r),e.tryRestoreFocusRecorded();return}if(n(r),!!t){if(Ht(r,"FLUSH")){t=!1,e.tryRestoreFocusRecorded();return}if(Ht(r,"DROP_COMPLETE")){t=!1;const s=r.payload.completed.result;s.combine&&e.tryShiftRecord(s.draggableId,s.combine.draggableId),e.tryRestoreFocusRecorded()}}}};const TCe=e=>Ht(e,"DROP_COMPLETE")||Ht(e,"DROP_ANIMATE")||Ht(e,"FLUSH");var $Ce=e=>t=>n=>r=>{if(TCe(r)){e.stop(),n(r);return}if(Ht(r,"INITIAL_PUBLISH")){n(r);const s=t.getState();s.phase!=="DRAGGING"&&De(),e.start(s);return}n(r),e.scroll(t.getState())};const RCe=e=>t=>n=>{if(t(n),!Ht(n,"PUBLISH_WHILE_DRAGGING"))return;const r=e.getState();r.phase==="DROP_PENDING"&&(r.isWaiting||e.dispatch(UH({reason:r.reason})))},kCe=cH;var MCe=({dimensionMarshal:e,focusMarshal:t,styleMarshal:n,getResponders:r,announce:s,autoScroller:i})=>lH(q_e,kCe(k2e(lCe(n),jCe(e),aCe(e),mCe,CCe,OCe,RCe,$Ce(i),bCe,ACe(t),_Ce(r,s))));const O_=()=>({additions:{},removals:{},modified:{}});function ICe({registry:e,callbacks:t}){let n=O_(),r=null;const s=()=>{r||(t.collectionStarting(),r=requestAnimationFrame(()=>{r=null;const{additions:c,removals:u,modified:f}=n,h=Object.keys(c).map(v=>e.draggable.getById(v).getDimension(cr)).sort((v,x)=>v.descriptor.index-x.descriptor.index),p=Object.keys(f).map(v=>{const E=e.droppable.getById(v).callbacks.getScrollWhileDragging();return{droppableId:v,scroll:E}}),y={additions:h,removals:Object.keys(u),modified:p};n=O_(),t.publish(y)}))};return{add:c=>{const u=c.descriptor.id;n.additions[u]=c,n.modified[c.descriptor.droppableId]=!0,n.removals[u]&&delete n.removals[u],s()},remove:c=>{const u=c.descriptor;n.removals[u.id]=!0,n.modified[u.droppableId]=!0,n.additions[u.id]&&delete n.additions[u.id],s()},stop:()=>{r&&(cancelAnimationFrame(r),r=null,n=O_())}}}var YH=({scrollHeight:e,scrollWidth:t,height:n,width:r})=>{const s=js({x:t,y:e},{x:r,y:n});return{x:Math.max(0,s.x),y:Math.max(0,s.y)}},JH=()=>{const e=document.documentElement;return e||De(),e},XH=()=>{const e=JH();return YH({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},PCe=()=>{const e=GH(),t=XH(),n=e.y,r=e.x,s=JH(),i=s.clientWidth,o=s.clientHeight,a=r+i,c=n+o;return{frame:qi({top:n,left:r,right:a,bottom:c}),scroll:{initial:e,current:e,max:t,diff:{value:cr,displacement:cr}}}},DCe=({critical:e,scrollOptions:t,registry:n})=>{const r=PCe(),s=r.scroll.current,i=e.droppable,o=n.droppable.getAllByType(i.type).map(f=>f.callbacks.getDimensionAndWatchScroll(s,t)),a=n.draggable.getAllByType(e.draggable.type).map(f=>f.getDimension(s));return{dimensions:{draggables:NH(a),droppables:EH(o)},critical:e,viewport:r}};function gD(e,t,n){return!(n.descriptor.id===t.id||n.descriptor.type!==t.type||e.droppable.getById(n.descriptor.droppableId).descriptor.mode!=="virtual")}var LCe=(e,t)=>{let n=null;const r=ICe({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),s=(p,y)=>{e.droppable.exists(p)||De(),n&&t.updateDroppableIsEnabled({id:p,isEnabled:y})},i=(p,y)=>{n&&(e.droppable.exists(p)||De(),t.updateDroppableIsCombineEnabled({id:p,isCombineEnabled:y}))},o=(p,y)=>{n&&(e.droppable.exists(p)||De(),t.updateDroppableScroll({id:p,newScroll:y}))},a=(p,y)=>{n&&e.droppable.getById(p).callbacks.scroll(y)},c=()=>{if(!n)return;r.stop();const p=n.critical.droppable;e.droppable.getAllByType(p.type).forEach(y=>y.callbacks.dragStopped()),n.unsubscribe(),n=null},u=p=>{n||De();const y=n.critical.draggable;p.type==="ADDITION"&&gD(e,y,p.value)&&r.add(p.value),p.type==="REMOVAL"&&gD(e,y,p.value)&&r.remove(p.value)};return{updateDroppableIsEnabled:s,updateDroppableIsCombineEnabled:i,scrollDroppable:a,updateDroppableScroll:o,startPublishing:p=>{n&&De();const y=e.draggable.getById(p.draggableId),v=e.droppable.getById(y.descriptor.droppableId),x={draggable:y.descriptor,droppable:v.descriptor},E=e.subscribe(u);return n={critical:x,unsubscribe:E},DCe({critical:x,registry:e,scrollOptions:p.scrollOptions})},stopPublishing:c}},KH=(e,t)=>e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP",FCe=e=>{window.scrollBy(e.x,e.y)};const BCe=ar(e=>dS(e).filter(t=>!(!t.isEnabled||!t.frame))),zCe=(e,t)=>BCe(t).find(r=>(r.frame||De(),MH(r.frame.pageMarginBox)(e)))||null;var VCe=({center:e,destination:t,droppables:n})=>{if(t){const s=n[t];return s.frame?s:null}return zCe(e,n)};const sy={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:e=>e**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var UCe=(e,t,n=()=>sy)=>{const r=n(),s=e[t.size]*r.startFromPercentage,i=e[t.size]*r.maxScrollAtPercentage;return{startScrollingFrom:s,maxScrollValueAt:i}},QH=({startOfRange:e,endOfRange:t,current:n})=>{const r=t-e;return r===0?0:(n-e)/r},Z$=1,qCe=(e,t,n=()=>sy)=>{const r=n();if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return r.maxPixelScroll;if(e===t.startScrollingFrom)return Z$;const i=1-QH({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),o=r.maxPixelScroll*r.ease(i);return Math.ceil(o)},HCe=(e,t,n)=>{const r=n(),s=r.durationDampening.accelerateAt,i=r.durationDampening.stopDampeningAt,o=t,a=i,u=Date.now()-o;if(u>=i)return e;if(u<s)return Z$;const f=QH({startOfRange:s,endOfRange:a,current:u}),h=e*r.ease(f);return Math.ceil(h)},yD=({distanceToEdge:e,thresholds:t,dragStartTime:n,shouldUseTimeDampening:r,getAutoScrollerOptions:s})=>{const i=qCe(e,t,s);return i===0?0:r?Math.max(HCe(i,n,s),Z$):i},bD=({container:e,distanceToEdges:t,dragStartTime:n,axis:r,shouldUseTimeDampening:s,getAutoScrollerOptions:i})=>{const o=UCe(e,r,i);return t[r.end]<t[r.start]?yD({distanceToEdge:t[r.end],thresholds:o,dragStartTime:n,shouldUseTimeDampening:s,getAutoScrollerOptions:i}):-1*yD({distanceToEdge:t[r.start],thresholds:o,dragStartTime:n,shouldUseTimeDampening:s,getAutoScrollerOptions:i})},WCe=({container:e,subject:t,proposedScroll:n})=>{const r=t.height>e.height,s=t.width>e.width;return!s&&!r?n:s&&r?null:{x:s?0:n.x,y:r?0:n.y}};const GCe=SH(e=>e===0?0:e);var ZH=({dragStartTime:e,container:t,subject:n,center:r,shouldUseTimeDampening:s,getAutoScrollerOptions:i})=>{const o={top:r.y-t.top,right:t.right-r.x,bottom:t.bottom-r.y,left:r.x-t.left},a=bD({container:t,distanceToEdges:o,dragStartTime:e,axis:H$,shouldUseTimeDampening:s,getAutoScrollerOptions:i}),c=bD({container:t,distanceToEdges:o,dragStartTime:e,axis:OH,shouldUseTimeDampening:s,getAutoScrollerOptions:i}),u=GCe({x:c,y:a});if(bc(u,cr))return null;const f=WCe({container:t,subject:n,proposedScroll:u});return f?bc(f,cr)?null:f:null};const YCe=SH(e=>e===0?0:e>0?1:-1),e3=(()=>{const e=(t,n)=>t<0?t:t>n?t-n:0;return({current:t,max:n,change:r})=>{const s=yr(t,r),i={x:e(s.x,n.x),y:e(s.y,n.y)};return bc(i,cr)?null:i}})(),eW=({max:e,current:t,change:n})=>{const r={x:Math.max(t.x,e.x),y:Math.max(t.y,e.y)},s=YCe(n),i=e3({max:r,current:t,change:s});return!i||s.x!==0&&i.x===0||s.y!==0&&i.y===0},t3=(e,t)=>eW({current:e.scroll.current,max:e.scroll.max,change:t}),JCe=(e,t)=>{if(!t3(e,t))return null;const n=e.scroll.max,r=e.scroll.current;return e3({current:r,max:n,change:t})},n3=(e,t)=>{const n=e.frame;return n?eW({current:n.scroll.current,max:n.scroll.max,change:t}):!1},XCe=(e,t)=>{const n=e.frame;return!n||!n3(e,t)?null:e3({current:n.scroll.current,max:n.scroll.max,change:t})};var KCe=({viewport:e,subject:t,center:n,dragStartTime:r,shouldUseTimeDampening:s,getAutoScrollerOptions:i})=>{const o=ZH({dragStartTime:r,container:e.frame,subject:t,center:n,shouldUseTimeDampening:s,getAutoScrollerOptions:i});return o&&t3(e,o)?o:null},QCe=({droppable:e,subject:t,center:n,dragStartTime:r,shouldUseTimeDampening:s,getAutoScrollerOptions:i})=>{const o=e.frame;if(!o)return null;const a=ZH({dragStartTime:r,container:o.pageMarginBox,subject:t,center:n,shouldUseTimeDampening:s,getAutoScrollerOptions:i});return a&&n3(e,a)?a:null},vD=({state:e,dragStartTime:t,shouldUseTimeDampening:n,scrollWindow:r,scrollDroppable:s,getAutoScrollerOptions:i})=>{const o=e.current.page.borderBoxCenter,c=e.dimensions.draggables[e.critical.draggable.id].page.marginBox;if(e.isWindowScrollAllowed){const h=e.viewport,p=KCe({dragStartTime:t,viewport:h,subject:c,center:o,shouldUseTimeDampening:n,getAutoScrollerOptions:i});if(p){r(p);return}}const u=VCe({center:o,destination:$s(e.impact),droppables:e.dimensions.droppables});if(!u)return;const f=QCe({dragStartTime:t,droppable:u,subject:c,center:o,shouldUseTimeDampening:n,getAutoScrollerOptions:i});f&&s(u.descriptor.id,f)},ZCe=({scrollWindow:e,scrollDroppable:t,getAutoScrollerOptions:n=()=>sy})=>{const r=Zg(e),s=Zg(t);let i=null;const o=u=>{i||De();const{shouldUseTimeDampening:f,dragStartTime:h}=i;vD({state:u,scrollWindow:r,scrollDroppable:s,dragStartTime:h,shouldUseTimeDampening:f,getAutoScrollerOptions:n})};return{start:u=>{i&&De();const f=Date.now();let h=!1;const p=()=>{h=!0};vD({state:u,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:p,scrollDroppable:p,getAutoScrollerOptions:n}),i={dragStartTime:f,shouldUseTimeDampening:h},h&&o(u)},stop:()=>{i&&(r.cancel(),s.cancel(),i=null)},scroll:o}},eOe=({move:e,scrollDroppable:t,scrollWindow:n})=>{const r=(a,c)=>{const u=yr(a.current.client.selection,c);e({client:u})},s=(a,c)=>{if(!n3(a,c))return c;const u=XCe(a,c);if(!u)return t(a.descriptor.id,c),null;const f=js(c,u);return t(a.descriptor.id,f),js(c,f)},i=(a,c,u)=>{if(!a||!t3(c,u))return u;const f=JCe(c,u);if(!f)return n(u),null;const h=js(u,f);return n(h),js(u,h)};return a=>{const c=a.scrollJumpRequest;if(!c)return;const u=$s(a.impact);u||De();const f=s(a.dimensions.droppables[u],c);if(!f)return;const h=a.viewport,p=i(a.isWindowScrollAllowed,h,f);p&&r(a,p)}},tOe=({scrollDroppable:e,scrollWindow:t,move:n,getAutoScrollerOptions:r})=>{const s=ZCe({scrollWindow:t,scrollDroppable:e,getAutoScrollerOptions:r}),i=eOe({move:n,scrollWindow:t,scrollDroppable:e});return{scroll:c=>{if(!(r().disabled||c.phase!=="DRAGGING")){if(c.movementMode==="FLUID"){s.scroll(c);return}c.scrollJumpRequest&&i(c)}},start:s.start,stop:s.stop}};const Lh="data-rfd",Fh=(()=>{const e=`${Lh}-drag-handle`;return{base:e,draggableId:`${e}-draggable-id`,contextId:`${e}-context-id`}})(),nj=(()=>{const e=`${Lh}-draggable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),nOe=(()=>{const e=`${Lh}-droppable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),xD={contextId:`${Lh}-scroll-container-context-id`},rOe=e=>t=>`[${t}="${e}"]`,zp=(e,t)=>e.map(n=>{const r=n.styles[t];return r?`${n.selector} { ${r} }`:""}).join(" "),sOe="pointer-events: none;";var iOe=e=>{const t=rOe(e),n=(()=>{const a=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(Fh.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:a,dragging:sOe,dropAnimating:a}}})(),r=(()=>{const a=`
      transition: ${gg.outOfTheWay};
    `;return{selector:t(nj.contextId),styles:{dragging:a,dropAnimating:a,userCancel:a}}})(),s={selector:t(nOe.contextId),styles:{always:"overflow-anchor: none;"}},o=[r,n,s,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:zp(o,"always"),resting:zp(o,"resting"),dragging:zp(o,"dragging"),dropAnimating:zp(o,"dropAnimating"),userCancel:zp(o,"userCancel")}};const Rs=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?w.useLayoutEffect:w.useEffect,j_=()=>{const e=document.querySelector("head");return e||De(),e},wD=e=>{const t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function oOe(e,t){const n=Tt(()=>iOe(e),[e]),r=w.useRef(null),s=w.useRef(null),i=rt(ar(h=>{const p=s.current;p||De(),p.textContent=h}),[]),o=rt(h=>{const p=r.current;p||De(),p.textContent=h},[]);Rs(()=>{!r.current&&!s.current||De();const h=wD(t),p=wD(t);return r.current=h,s.current=p,h.setAttribute(`${Lh}-always`,e),p.setAttribute(`${Lh}-dynamic`,e),j_().appendChild(h),j_().appendChild(p),o(n.always),i(n.resting),()=>{const y=v=>{const x=v.current;x||De(),j_().removeChild(x),v.current=null};y(r),y(s)}},[t,o,i,n.always,n.resting,e]);const a=rt(()=>i(n.dragging),[i,n.dragging]),c=rt(h=>{if(h==="DROP"){i(n.dropAnimating);return}i(n.userCancel)},[i,n.dropAnimating,n.userCancel]),u=rt(()=>{s.current&&i(n.resting)},[i,n.resting]);return Tt(()=>({dragging:a,dropping:c,resting:u}),[a,c,u])}function tW(e,t){return Array.from(e.querySelectorAll(t))}var nW=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;function pS(e){return e instanceof nW(e).HTMLElement}function aOe(e,t){const n=`[${Fh.contextId}="${e}"]`,r=tW(document,n);if(!r.length)return null;const s=r.find(i=>i.getAttribute(Fh.draggableId)===t);return!s||!pS(s)?null:s}function lOe(e){const t=w.useRef({}),n=w.useRef(null),r=w.useRef(null),s=w.useRef(!1),i=rt(function(p,y){const v={id:p,focus:y};return t.current[p]=v,function(){const E=t.current;E[p]!==v&&delete E[p]}},[]),o=rt(function(p){const y=aOe(e,p);y&&y!==document.activeElement&&y.focus()},[e]),a=rt(function(p,y){n.current===p&&(n.current=y)},[]),c=rt(function(){r.current||s.current&&(r.current=requestAnimationFrame(()=>{r.current=null;const p=n.current;p&&o(p)}))},[o]),u=rt(function(p){n.current=null;const y=document.activeElement;y&&y.getAttribute(Fh.draggableId)===p&&(n.current=p)},[]);return Rs(()=>(s.current=!0,function(){s.current=!1;const p=r.current;p&&cancelAnimationFrame(p)}),[]),Tt(()=>({register:i,tryRecordFocus:u,tryRestoreFocusRecorded:c,tryShiftRecord:a}),[i,u,c,a])}function cOe(){const e={draggables:{},droppables:{}},t=[];function n(h){return t.push(h),function(){const y=t.indexOf(h);y!==-1&&t.splice(y,1)}}function r(h){t.length&&t.forEach(p=>p(h))}function s(h){return e.draggables[h]||null}function i(h){const p=s(h);return p||De(),p}const o={register:h=>{e.draggables[h.descriptor.id]=h,r({type:"ADDITION",value:h})},update:(h,p)=>{const y=e.draggables[p.descriptor.id];y&&y.uniqueId===h.uniqueId&&(delete e.draggables[p.descriptor.id],e.draggables[h.descriptor.id]=h)},unregister:h=>{const p=h.descriptor.id,y=s(p);y&&h.uniqueId===y.uniqueId&&(delete e.draggables[p],e.droppables[h.descriptor.droppableId]&&r({type:"REMOVAL",value:h}))},getById:i,findById:s,exists:h=>!!s(h),getAllByType:h=>Object.values(e.draggables).filter(p=>p.descriptor.type===h)};function a(h){return e.droppables[h]||null}function c(h){const p=a(h);return p||De(),p}const u={register:h=>{e.droppables[h.descriptor.id]=h},unregister:h=>{const p=a(h.descriptor.id);p&&h.uniqueId===p.uniqueId&&delete e.droppables[h.descriptor.id]},getById:c,findById:a,exists:h=>!!a(h),getAllByType:h=>Object.values(e.droppables).filter(p=>p.descriptor.type===h)};function f(){e.draggables={},e.droppables={},t.length=0}return{draggable:o,droppable:u,subscribe:n,clean:f}}function uOe(){const e=Tt(cOe,[]);return w.useEffect(()=>function(){e.clean()},[e]),e}var r3=je.createContext(null),nw=()=>{const e=document.body;return e||De(),e};const dOe={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},fOe=e=>`rfd-announcement-${e}`;function hOe(e){const t=Tt(()=>fOe(e),[e]),n=w.useRef(null);return w.useEffect(function(){const i=document.createElement("div");return n.current=i,i.id=t,i.setAttribute("aria-live","assertive"),i.setAttribute("aria-atomic","true"),_h(i.style,dOe),nw().appendChild(i),function(){setTimeout(function(){const c=nw();c.contains(i)&&c.removeChild(i),i===n.current&&(n.current=null)})}},[t]),rt(s=>{const i=n.current;if(i){i.textContent=s;return}},[])}const mOe={separator:"::"};function s3(e,t=mOe){const n=je.useId();return Tt(()=>`${e}${t.separator}${n}`,[t.separator,e,n])}function pOe({contextId:e,uniqueId:t}){return`rfd-hidden-text-${e}-${t}`}function gOe({contextId:e,text:t}){const n=s3("hidden-text",{separator:"-"}),r=Tt(()=>pOe({contextId:e,uniqueId:n}),[n,e]);return w.useEffect(function(){const i=document.createElement("div");return i.id=r,i.textContent=t,i.style.display="none",nw().appendChild(i),function(){const a=nw();a.contains(i)&&a.removeChild(i)}},[r,t]),r}var gS=je.createContext(null);function rW(e){const t=w.useRef(e);return w.useEffect(()=>{t.current=e}),t}function yOe(){let e=null;function t(){return!!e}function n(o){return o===e}function r(o){e&&De();const a={abandon:o};return e=a,a}function s(){e||De(),e=null}function i(){e&&(e.abandon(),s())}return{isClaimed:t,isActive:n,claim:r,release:s,tryAbandon:i}}function iy(e){return e.phase==="IDLE"||e.phase==="DROP_ANIMATING"?!1:e.isDragging}const bOe=9,vOe=13,i3=27,sW=32,xOe=33,wOe=34,SOe=35,EOe=36,NOe=37,_Oe=38,COe=39,OOe=40,jOe={[vOe]:!0,[bOe]:!0};var iW=e=>{jOe[e.keyCode]&&e.preventDefault()};const yS=(()=>{const e="visibilitychange";return typeof document>"u"?e:[e,`ms${e}`,`webkit${e}`,`moz${e}`,`o${e}`].find(r=>`on${r}`in document)||e})(),oW=0,SD=5;function AOe(e,t){return Math.abs(t.x-e.x)>=SD||Math.abs(t.y-e.y)>=SD}const ED={type:"IDLE"};function TOe({cancel:e,completed:t,getPhase:n,setPhase:r}){return[{eventName:"mousemove",fn:s=>{const{button:i,clientX:o,clientY:a}=s;if(i!==oW)return;const c={x:o,y:a},u=n();if(u.type==="DRAGGING"){s.preventDefault(),u.actions.move(c);return}u.type!=="PENDING"&&De();const f=u.point;if(!AOe(f,c))return;s.preventDefault();const h=u.actions.fluidLift(c);r({type:"DRAGGING",actions:h})}},{eventName:"mouseup",fn:s=>{const i=n();if(i.type!=="DRAGGING"){e();return}s.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"mousedown",fn:s=>{n().type==="DRAGGING"&&s.preventDefault(),e()}},{eventName:"keydown",fn:s=>{if(n().type==="PENDING"){e();return}if(s.keyCode===i3){s.preventDefault(),e();return}iW(s)}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{n().type==="PENDING"&&e()}},{eventName:"webkitmouseforcedown",fn:s=>{const i=n();if(i.type==="IDLE"&&De(),i.actions.shouldRespectForcePress()){e();return}s.preventDefault()}},{eventName:yS,fn:e}]}function $Oe(e){const t=w.useRef(ED),n=w.useRef(yc),r=Tt(()=>({eventName:"mousedown",fn:function(h){if(h.defaultPrevented||h.button!==oW||h.ctrlKey||h.metaKey||h.shiftKey||h.altKey)return;const p=e.findClosestDraggableId(h);if(!p)return;const y=e.tryGetLock(p,o,{sourceEvent:h});if(!y)return;h.preventDefault();const v={x:h.clientX,y:h.clientY};n.current(),u(y,v)}}),[e]),s=Tt(()=>({eventName:"webkitmouseforcewillbegin",fn:f=>{if(f.defaultPrevented)return;const h=e.findClosestDraggableId(f);if(!h)return;const p=e.findOptionsForDraggable(h);p&&(p.shouldRespectForcePress||e.canGetLock(h)&&f.preventDefault())}}),[e]),i=rt(function(){const h={passive:!1,capture:!0};n.current=ni(window,[s,r],h)},[s,r]),o=rt(()=>{t.current.type!=="IDLE"&&(t.current=ED,n.current(),i())},[i]),a=rt(()=>{const f=t.current;o(),f.type==="DRAGGING"&&f.actions.cancel({shouldBlockNextClick:!0}),f.type==="PENDING"&&f.actions.abort()},[o]),c=rt(function(){const h={capture:!0,passive:!1},p=TOe({cancel:a,completed:o,getPhase:()=>t.current,setPhase:y=>{t.current=y}});n.current=ni(window,p,h)},[a,o]),u=rt(function(h,p){t.current.type!=="IDLE"&&De(),t.current={type:"PENDING",point:p,actions:h},c()},[c]);Rs(function(){return i(),function(){n.current()}},[i])}function ROe(){}const kOe={[wOe]:!0,[xOe]:!0,[EOe]:!0,[SOe]:!0};function MOe(e,t){function n(){t(),e.cancel()}function r(){t(),e.drop()}return[{eventName:"keydown",fn:s=>{if(s.keyCode===i3){s.preventDefault(),n();return}if(s.keyCode===sW){s.preventDefault(),r();return}if(s.keyCode===OOe){s.preventDefault(),e.moveDown();return}if(s.keyCode===_Oe){s.preventDefault(),e.moveUp();return}if(s.keyCode===COe){s.preventDefault(),e.moveRight();return}if(s.keyCode===NOe){s.preventDefault(),e.moveLeft();return}if(kOe[s.keyCode]){s.preventDefault();return}iW(s)}},{eventName:"mousedown",fn:n},{eventName:"mouseup",fn:n},{eventName:"click",fn:n},{eventName:"touchstart",fn:n},{eventName:"resize",fn:n},{eventName:"wheel",fn:n,options:{passive:!0}},{eventName:yS,fn:n}]}function IOe(e){const t=w.useRef(ROe),n=Tt(()=>({eventName:"keydown",fn:function(i){if(i.defaultPrevented||i.keyCode!==sW)return;const o=e.findClosestDraggableId(i);if(!o)return;const a=e.tryGetLock(o,f,{sourceEvent:i});if(!a)return;i.preventDefault();let c=!0;const u=a.snapLift();t.current();function f(){c||De(),c=!1,t.current(),r()}t.current=ni(window,MOe(u,f),{capture:!0,passive:!1})}}),[e]),r=rt(function(){const i={passive:!1,capture:!0};t.current=ni(window,[n],i)},[n]);Rs(function(){return r(),function(){t.current()}},[r])}const A_={type:"IDLE"},POe=120,DOe=.15;function LOe({cancel:e,getPhase:t}){return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:n=>{n.preventDefault()}},{eventName:"keydown",fn:n=>{if(t().type!=="DRAGGING"){e();return}n.keyCode===i3&&n.preventDefault(),e()}},{eventName:yS,fn:e}]}function FOe({cancel:e,completed:t,getPhase:n}){return[{eventName:"touchmove",options:{capture:!1},fn:r=>{const s=n();if(s.type!=="DRAGGING"){e();return}s.hasMoved=!0;const{clientX:i,clientY:o}=r.touches[0],a={x:i,y:o};r.preventDefault(),s.actions.move(a)}},{eventName:"touchend",fn:r=>{const s=n();if(s.type!=="DRAGGING"){e();return}r.preventDefault(),s.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"touchcancel",fn:r=>{if(n().type!=="DRAGGING"){e();return}r.preventDefault(),e()}},{eventName:"touchforcechange",fn:r=>{const s=n();s.type==="IDLE"&&De();const i=r.touches[0];if(!i||!(i.force>=DOe))return;const a=s.actions.shouldRespectForcePress();if(s.type==="PENDING"){a&&e();return}if(a){if(s.hasMoved){r.preventDefault();return}e();return}r.preventDefault()}},{eventName:yS,fn:e}]}function BOe(e){const t=w.useRef(A_),n=w.useRef(yc),r=rt(function(){return t.current},[]),s=rt(function(y){t.current=y},[]),i=Tt(()=>({eventName:"touchstart",fn:function(y){if(y.defaultPrevented)return;const v=e.findClosestDraggableId(y);if(!v)return;const x=e.tryGetLock(v,a,{sourceEvent:y});if(!x)return;const E=y.touches[0],{clientX:N,clientY:_}=E,C={x:N,y:_};n.current(),h(x,C)}}),[e]),o=rt(function(){const y={capture:!0,passive:!1};n.current=ni(window,[i],y)},[i]),a=rt(()=>{const p=t.current;p.type!=="IDLE"&&(p.type==="PENDING"&&clearTimeout(p.longPressTimerId),s(A_),n.current(),o())},[o,s]),c=rt(()=>{const p=t.current;a(),p.type==="DRAGGING"&&p.actions.cancel({shouldBlockNextClick:!0}),p.type==="PENDING"&&p.actions.abort()},[a]),u=rt(function(){const y={capture:!0,passive:!1},v={cancel:c,completed:a,getPhase:r},x=ni(window,FOe(v),y),E=ni(window,LOe(v),y);n.current=function(){x(),E()}},[c,r,a]),f=rt(function(){const y=r();y.type!=="PENDING"&&De();const v=y.actions.fluidLift(y.point);s({type:"DRAGGING",actions:v,hasMoved:!1})},[r,s]),h=rt(function(y,v){r().type!=="IDLE"&&De();const x=setTimeout(f,POe);s({type:"PENDING",point:v,actions:y,longPressTimerId:x}),u()},[u,r,s,f]);Rs(function(){return o(),function(){n.current();const v=r();v.type==="PENDING"&&(clearTimeout(v.longPressTimerId),s(A_))}},[r,o,s]),Rs(function(){return ni(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const zOe=["input","button","textarea","select","option","optgroup","video","audio"];function aW(e,t){if(t==null)return!1;if(zOe.includes(t.tagName.toLowerCase()))return!0;const r=t.getAttribute("contenteditable");return r==="true"||r===""?!0:t===e?!1:aW(e,t.parentElement)}function VOe(e,t){const n=t.target;return pS(n)?aW(e,n):!1}var UOe=e=>qi(e.getBoundingClientRect()).center;function qOe(e){return e instanceof nW(e).Element}const HOe=(()=>{const e="matches";return typeof document>"u"?e:[e,"msMatchesSelector","webkitMatchesSelector"].find(r=>r in Element.prototype)||e})();function lW(e,t){return e==null?null:e[HOe](t)?e:lW(e.parentElement,t)}function WOe(e,t){return e.closest?e.closest(t):lW(e,t)}function GOe(e){return`[${Fh.contextId}="${e}"]`}function YOe(e,t){const n=t.target;if(!qOe(n))return null;const r=GOe(e),s=WOe(n,r);return!s||!pS(s)?null:s}function JOe(e,t){const n=YOe(e,t);return n?n.getAttribute(Fh.draggableId):null}function XOe(e,t){const n=`[${nj.contextId}="${e}"]`,s=tW(document,n).find(i=>i.getAttribute(nj.id)===t);return!s||!pS(s)?null:s}function KOe(e){e.preventDefault()}function ov({expected:e,phase:t,isLockActive:n,shouldWarn:r}){return!(!n()||e!==t)}function cW({lockAPI:e,store:t,registry:n,draggableId:r}){if(e.isClaimed())return!1;const s=n.draggable.findById(r);return!(!s||!s.options.isEnabled||!KH(t.getState(),r))}function QOe({lockAPI:e,contextId:t,store:n,registry:r,draggableId:s,forceSensorStop:i,sourceEvent:o}){if(!cW({lockAPI:e,store:n,registry:r,draggableId:s}))return null;const c=r.draggable.getById(s),u=XOe(t,c.descriptor.id);if(!u||o&&!c.options.canDragInteractiveElements&&VOe(u,o))return null;const f=e.claim(i||yc);let h="PRE_DRAG";function p(){return c.options.shouldRespectForcePress}function y(){return e.isActive(f)}function v(A,$){ov({expected:A,phase:h,isLockActive:y,shouldWarn:!0})&&n.dispatch($())}const x=v.bind(null,"DRAGGING");function E(A){function $(){e.release(),h="COMPLETED"}h!=="PRE_DRAG"&&($(),De()),n.dispatch(W_e(A.liftActionArgs)),h="DRAGGING";function k(R,B={shouldBlockNextClick:!1}){if(A.cleanup(),B.shouldBlockNextClick){const z=ni(window,[{eventName:"click",fn:KOe,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(z)}$(),n.dispatch(UH({reason:R}))}return{isActive:()=>ov({expected:"DRAGGING",phase:h,isLockActive:y,shouldWarn:!1}),shouldRespectForcePress:p,drop:R=>k("DROP",R),cancel:R=>k("CANCEL",R),...A.actions}}function N(A){const $=Zg(R=>{x(()=>VH({client:R}))});return{...E({liftActionArgs:{id:s,clientSelection:A,movementMode:"FLUID"},cleanup:()=>$.cancel(),actions:{move:$}}),move:$}}function _(){const A={moveUp:()=>x(tCe),moveRight:()=>x(rCe),moveDown:()=>x(nCe),moveLeft:()=>x(sCe)};return E({liftActionArgs:{id:s,clientSelection:UOe(u),movementMode:"SNAP"},cleanup:yc,actions:A})}function C(){ov({expected:"PRE_DRAG",phase:h,isLockActive:y,shouldWarn:!0})&&e.release()}return{isActive:()=>ov({expected:"PRE_DRAG",phase:h,isLockActive:y,shouldWarn:!1}),shouldRespectForcePress:p,fluidLift:N,snapLift:_,abort:C}}const ZOe=[$Oe,IOe,BOe];function eje({contextId:e,store:t,registry:n,customSensors:r,enableDefaultSensors:s}){const i=[...s?ZOe:[],...r||[]],o=w.useState(()=>yOe())[0],a=rt(function(E,N){iy(E)&&!iy(N)&&o.tryAbandon()},[o]);Rs(function(){let E=t.getState();return t.subscribe(()=>{const _=t.getState();a(E,_),E=_})},[o,t,a]),Rs(()=>o.tryAbandon,[o.tryAbandon]);const c=rt(x=>cW({lockAPI:o,registry:n,store:t,draggableId:x}),[o,n,t]),u=rt((x,E,N)=>QOe({lockAPI:o,registry:n,contextId:e,store:t,draggableId:x,forceSensorStop:E||null,sourceEvent:N&&N.sourceEvent?N.sourceEvent:null}),[e,o,n,t]),f=rt(x=>JOe(e,x),[e]),h=rt(x=>{const E=n.draggable.findById(x);return E?E.options:null},[n.draggable]),p=rt(function(){o.isClaimed()&&(o.tryAbandon(),t.getState().phase!=="IDLE"&&t.dispatch(X$()))},[o,t]),y=rt(()=>o.isClaimed(),[o]),v=Tt(()=>({canGetLock:c,tryGetLock:u,findClosestDraggableId:f,findOptionsForDraggable:h,tryReleaseLock:p,isLockClaimed:y}),[c,u,f,h,p,y]);for(let x=0;x<i.length;x++)i[x](v)}const tje=e=>({onBeforeCapture:t=>{const n=()=>{e.onBeforeCapture&&e.onBeforeCapture(t)};Ty.flushSync(n)},onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}),nje=e=>({...sy,...e.autoScrollerOptions,durationDampening:{...sy.durationDampening,...e.autoScrollerOptions}});function Vp(e){return e.current||De(),e.current}function rje(e){const{contextId:t,setCallbacks:n,sensors:r,nonce:s,dragHandleUsageInstructions:i}=e,o=w.useRef(null),a=rW(e),c=rt(()=>tje(a.current),[a]),u=rt(()=>nje(a.current),[a]),f=hOe(t),h=gOe({contextId:t,text:i}),p=oOe(t,s),y=rt(z=>{Vp(o).dispatch(z)},[]),v=Tt(()=>JP({publishWhileDragging:Y_e,updateDroppableScroll:X_e,updateDroppableIsEnabled:K_e,updateDroppableIsCombineEnabled:Q_e,collectionStarting:J_e},y),[y]),x=uOe(),E=Tt(()=>LCe(x,v),[x,v]),N=Tt(()=>tOe({scrollWindow:FCe,scrollDroppable:E.scrollDroppable,getAutoScrollerOptions:u,...JP({move:VH},y)}),[E.scrollDroppable,y,u]),_=lOe(t),C=Tt(()=>MCe({announce:f,autoScroller:N,dimensionMarshal:E,focusMarshal:_,getResponders:c,styleMarshal:p}),[f,N,E,_,c,p]);o.current=C;const j=rt(()=>{const z=Vp(o);z.getState().phase!=="IDLE"&&z.dispatch(X$())},[]),A=rt(()=>{const z=Vp(o).getState();return z.phase==="DROP_ANIMATING"?!0:z.phase==="IDLE"?!1:z.isDragging},[]),$=Tt(()=>({isDragging:A,tryAbort:j}),[A,j]);n($);const k=rt(z=>KH(Vp(o).getState(),z),[]),R=rt(()=>xu(Vp(o).getState()),[]),B=Tt(()=>({marshal:E,focus:_,contextId:t,canLift:k,isMovementAllowed:R,dragHandleUsageInstructionsId:h,registry:x}),[t,E,h,_,k,R,x]);return eje({contextId:t,store:C,registry:x,customSensors:r||null,enableDefaultSensors:e.enableDefaultSensors!==!1}),w.useEffect(()=>j,[j]),je.createElement(gS.Provider,{value:B},je.createElement(jNe,{context:r3,store:C},e.children))}function sje(){return je.useId()}function ije(e){const t=sje(),n=e.dragHandleUsageInstructions||qv.dragHandleUsageInstructions;return je.createElement(INe,null,r=>je.createElement(rje,{nonce:e.nonce,contextId:t,setCallbacks:r,dragHandleUsageInstructions:n,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd,autoScrollerOptions:e.autoScrollerOptions},e.children))}const ND={dragging:5e3,dropAnimating:4500},oje=(e,t)=>t?gg.drop(t.duration):e?gg.snap:gg.fluid,aje=(e,t)=>{if(e)return t?ry.opacity.drop:ry.opacity.combining},lje=e=>e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP";function cje(e){const n=e.dimension.client,{offset:r,combineWith:s,dropping:i}=e,o=!!s,a=lje(e),c=!!i,u=c?ej.drop(r,o):ej.moveTo(r);return{position:"fixed",top:n.marginBox.top,left:n.marginBox.left,boxSizing:"border-box",width:n.borderBox.width,height:n.borderBox.height,transition:oje(a,i),transform:u,opacity:aje(o,c),zIndex:c?ND.dropAnimating:ND.dragging,pointerEvents:"none"}}function uje(e){return{transform:ej.moveTo(e.offset),transition:e.shouldAnimateDisplacement?void 0:"none"}}function dje(e){return e.type==="DRAGGING"?cje(e):uje(e)}function fje(e,t,n=cr){const r=window.getComputedStyle(t),s=t.getBoundingClientRect(),i=gH(s,r),o=Qx(i,n),a={client:i,tagName:t.tagName.toLowerCase(),display:r.display},c={x:i.marginBox.width,y:i.marginBox.height};return{descriptor:e,placeholder:a,displaceBy:c,client:i,page:o}}function hje(e){const t=s3("draggable"),{descriptor:n,registry:r,getDraggableRef:s,canDragInteractiveElements:i,shouldRespectForcePress:o,isEnabled:a}=e,c=Tt(()=>({canDragInteractiveElements:i,shouldRespectForcePress:o,isEnabled:a}),[i,a,o]),u=rt(y=>{const v=s();return v||De(),fje(n,v,y)},[n,s]),f=Tt(()=>({uniqueId:t,descriptor:n,options:c,getDimension:u}),[n,u,c,t]),h=w.useRef(f),p=w.useRef(!0);Rs(()=>(r.draggable.register(h.current),()=>r.draggable.unregister(h.current)),[r.draggable]),Rs(()=>{if(p.current){p.current=!1;return}const y=h.current;h.current=f,r.draggable.update(f,y)},[f,r.draggable])}var o3=je.createContext(null);function rw(e){const t=w.useContext(e);return t||De(),t}function mje(e){e.preventDefault()}const pje=e=>{const t=w.useRef(null),n=rt(($=null)=>{t.current=$},[]),r=rt(()=>t.current,[]),{contextId:s,dragHandleUsageInstructionsId:i,registry:o}=rw(gS),{type:a,droppableId:c}=rw(o3),u=Tt(()=>({id:e.draggableId,index:e.index,type:a,droppableId:c}),[e.draggableId,e.index,a,c]),{children:f,draggableId:h,isEnabled:p,shouldRespectForcePress:y,canDragInteractiveElements:v,isClone:x,mapped:E,dropAnimationFinished:N}=e;if(!x){const $=Tt(()=>({descriptor:u,registry:o,getDraggableRef:r,canDragInteractiveElements:v,shouldRespectForcePress:y,isEnabled:p}),[u,o,r,v,y,p]);hje($)}const _=Tt(()=>p?{tabIndex:0,role:"button","aria-describedby":i,"data-rfd-drag-handle-draggable-id":h,"data-rfd-drag-handle-context-id":s,draggable:!1,onDragStart:mje}:null,[s,i,h,p]),C=rt($=>{E.type==="DRAGGING"&&E.dropping&&$.propertyName==="transform"&&Ty.flushSync(N)},[N,E]),j=Tt(()=>{const $=dje(E),k=E.type==="DRAGGING"&&E.dropping?C:void 0;return{innerRef:n,draggableProps:{"data-rfd-draggable-context-id":s,"data-rfd-draggable-id":h,style:$,onTransitionEnd:k},dragHandleProps:_}},[s,_,h,E,C,n]),A=Tt(()=>({draggableId:u.id,type:u.type,source:{index:u.index,droppableId:u.droppableId}}),[u.droppableId,u.id,u.index,u.type]);return je.createElement(je.Fragment,null,f(j,E.snapshot,A))};var uW=(e,t)=>e===t,dW=e=>{const{combine:t,destination:n}=e;return n?n.droppableId:t?t.droppableId:null};const gje=e=>e.combine?e.combine.draggableId:null,yje=e=>e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null;function bje(){const e=ar((s,i)=>({x:s,y:i})),t=ar((s,i,o=null,a=null,c=null)=>({isDragging:!0,isClone:i,isDropAnimating:!!c,dropAnimation:c,mode:s,draggingOver:o,combineWith:a,combineTargetFor:null})),n=ar((s,i,o,a,c=null,u=null,f=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:c,combineWith:u,mode:i,offset:s,dimension:o,forceShouldAnimate:f,snapshot:t(i,a,c,u,null)}}));return(s,i)=>{if(iy(s)){if(s.critical.draggable.id!==i.draggableId)return null;const o=s.current.client.offset,a=s.dimensions.draggables[i.draggableId],c=$s(s.impact),u=yje(s.impact),f=s.forceShouldAnimate;return n(e(o.x,o.y),s.movementMode,a,i.isClone,c,u,f)}if(s.phase==="DROP_ANIMATING"){const o=s.completed;if(o.result.draggableId!==i.draggableId)return null;const a=i.isClone,c=s.dimensions.draggables[i.draggableId],u=o.result,f=u.mode,h=dW(u),p=gje(u),v={duration:s.dropDuration,curve:Q$.drop,moveTo:s.newHomeClientOffset,opacity:p?ry.opacity.drop:null,scale:p?ry.scale.drop:null};return{mapped:{type:"DRAGGING",offset:s.newHomeClientOffset,dimension:c,dropping:v,draggingOver:h,combineWith:p,mode:f,forceShouldAnimate:null,snapshot:t(f,a,h,p,v)}}}return null}}function fW(e=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}const vje={mapped:{type:"SECONDARY",offset:cr,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:fW(null)}};function xje(){const e=ar((o,a)=>({x:o,y:a})),t=ar(fW),n=ar((o,a=null,c)=>({mapped:{type:"SECONDARY",offset:o,combineTargetFor:a,shouldAnimateDisplacement:c,snapshot:t(a)}})),r=o=>o?n(cr,o,!0):null,s=(o,a,c,u)=>{const f=c.displaced.visible[o],h=!!(u.inVirtualList&&u.effected[o]),p=fS(c),y=p&&p.draggableId===o?a:null;if(!f){if(!h)return r(y);if(c.displaced.invisible[o])return null;const E=xm(u.displacedBy.point),N=e(E.x,E.y);return n(N,y,!0)}if(h)return r(y);const v=c.displacedBy.point,x=e(v.x,v.y);return n(x,y,f.shouldAnimate)};return(o,a)=>{if(iy(o))return o.critical.draggable.id===a.draggableId?null:s(a.draggableId,o.critical.draggable.id,o.impact,o.afterCritical);if(o.phase==="DROP_ANIMATING"){const c=o.completed;return c.result.draggableId===a.draggableId?null:s(a.draggableId,c.result.draggableId,c.impact,c.afterCritical)}return null}}const wje=()=>{const e=bje(),t=xje();return(r,s)=>e(r,s)||t(r,s)||vje},Sje={dropAnimationFinished:qH},Eje=pH(wje,Sje,null,{context:r3,areStatePropsEqual:uW})(pje);function hW(e){return rw(o3).isUsingCloneFor===e.draggableId&&!e.isClone?null:je.createElement(Eje,e)}function Nje(e){const t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,n=!!e.disableInteractiveElementBlocking,r=!!e.shouldRespectForcePress;return je.createElement(hW,_h({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:n,shouldRespectForcePress:r}))}const mW=e=>t=>e===t,_je=mW("scroll"),Cje=mW("auto"),_D=(e,t)=>t(e.overflowX)||t(e.overflowY),Oje=e=>{const t=window.getComputedStyle(e),n={overflowX:t.overflowX,overflowY:t.overflowY};return _D(n,_je)||_D(n,Cje)},jje=()=>!1,pW=e=>e==null?null:e===document.body?jje()?e:null:e===document.documentElement?null:Oje(e)?e:pW(e.parentElement);var rj=e=>({x:e.scrollLeft,y:e.scrollTop});const gW=e=>e?window.getComputedStyle(e).position==="fixed"?!0:gW(e.parentElement):!1;var Aje=e=>{const t=pW(e),n=gW(e);return{closestScrollable:t,isFixedOnPage:n}},Tje=({descriptor:e,isEnabled:t,isCombineEnabled:n,isFixedOnPage:r,direction:s,client:i,page:o,closest:a})=>{const c=(()=>{if(!a)return null;const{scrollSize:p,client:y}=a,v=YH({scrollHeight:p.scrollHeight,scrollWidth:p.scrollWidth,height:y.paddingBox.height,width:y.paddingBox.width});return{pageMarginBox:a.page.marginBox,frameClient:y,scrollSize:p,shouldClipSubject:a.shouldClipSubject,scroll:{initial:a.scroll,current:a.scroll,max:v,diff:{value:cr,displacement:cr}}}})(),u=s==="vertical"?H$:OH,f=Dh({page:o,withPlaceholder:null,axis:u,frame:c});return{descriptor:e,isCombineEnabled:n,isFixedOnPage:r,axis:u,isEnabled:t,client:i,page:o,frame:c,subject:f}};const $je=(e,t)=>{const n=yH(e);if(!t||e!==t)return n;const r=n.paddingBox.top-t.scrollTop,s=n.paddingBox.left-t.scrollLeft,i=r+t.scrollHeight,o=s+t.scrollWidth,c=z$({top:r,right:o,bottom:i,left:s},n.border);return V$({borderBox:c,margin:n.margin,border:n.border,padding:n.padding})};var Rje=({ref:e,descriptor:t,env:n,windowScroll:r,direction:s,isDropDisabled:i,isCombineEnabled:o,shouldClipSubject:a})=>{const c=n.closestScrollable,u=$je(e,c),f=Qx(u,r),h=(()=>{if(!c)return null;const y=yH(c),v={scrollHeight:c.scrollHeight,scrollWidth:c.scrollWidth};return{client:y,page:Qx(y,r),scroll:rj(c),scrollSize:v,shouldClipSubject:a}})();return Tje({descriptor:t,isEnabled:!i,isCombineEnabled:o,isFixedOnPage:n.isFixedOnPage,direction:s,client:u,page:f,closest:h})};const kje={passive:!1},Mje={passive:!0};var CD=e=>e.shouldPublishImmediately?kje:Mje;const av=e=>e&&e.env.closestScrollable||null;function Ije(e){const t=w.useRef(null),n=rw(gS),r=s3("droppable"),{registry:s,marshal:i}=n,o=rW(e),a=Tt(()=>({id:e.droppableId,type:e.type,mode:e.mode}),[e.droppableId,e.mode,e.type]),c=w.useRef(a),u=Tt(()=>ar((j,A)=>{t.current||De();const $={x:j,y:A};i.updateDroppableScroll(a.id,$)}),[a.id,i]),f=rt(()=>{const j=t.current;return!j||!j.env.closestScrollable?cr:rj(j.env.closestScrollable)},[]),h=rt(()=>{const j=f();u(j.x,j.y)},[f,u]),p=Tt(()=>Zg(h),[h]),y=rt(()=>{const j=t.current,A=av(j);if(j&&A||De(),j.scrollOptions.shouldPublishImmediately){h();return}p()},[p,h]),v=rt((j,A)=>{t.current&&De();const $=o.current,k=$.getDroppableRef();k||De();const R=Aje(k),B={ref:k,descriptor:a,env:R,scrollOptions:A};t.current=B;const z=Rje({ref:k,descriptor:a,env:R,windowScroll:j,direction:$.direction,isDropDisabled:$.isDropDisabled,isCombineEnabled:$.isCombineEnabled,shouldClipSubject:!$.ignoreContainerClipping}),D=R.closestScrollable;return D&&(D.setAttribute(xD.contextId,n.contextId),D.addEventListener("scroll",y,CD(B.scrollOptions))),z},[n.contextId,a,y,o]),x=rt(()=>{const j=t.current,A=av(j);return j&&A||De(),rj(A)},[]),E=rt(()=>{const j=t.current;j||De();const A=av(j);t.current=null,A&&(p.cancel(),A.removeAttribute(xD.contextId),A.removeEventListener("scroll",y,CD(j.scrollOptions)))},[y,p]),N=rt(j=>{const A=t.current;A||De();const $=av(A);$||De(),$.scrollTop+=j.y,$.scrollLeft+=j.x},[]),_=Tt(()=>({getDimensionAndWatchScroll:v,getScrollWhileDragging:x,dragStopped:E,scroll:N}),[E,v,x,N]),C=Tt(()=>({uniqueId:r,descriptor:a,callbacks:_}),[_,a,r]);Rs(()=>(c.current=C.descriptor,s.droppable.register(C),()=>{t.current&&E(),s.droppable.unregister(C)}),[_,a,E,C,i,s.droppable]),Rs(()=>{t.current&&i.updateDroppableIsEnabled(c.current.id,!e.isDropDisabled)},[e.isDropDisabled,i]),Rs(()=>{t.current&&i.updateDroppableIsCombineEnabled(c.current.id,e.isCombineEnabled)},[e.isCombineEnabled,i])}function T_(){}const OD={width:0,height:0,margin:VNe},Pje=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>e||n==="close"?OD:{height:t.client.borderBox.height,width:t.client.borderBox.width,margin:t.client.margin},Dje=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>{const r=Pje({isAnimatingOpenOnMount:e,placeholder:t,animate:n});return{display:t.display,boxSizing:"border-box",width:r.width,height:r.height,marginTop:r.margin.top,marginRight:r.margin.right,marginBottom:r.margin.bottom,marginLeft:r.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:n!=="none"?gg.placeholder:null}},Lje=e=>{const t=w.useRef(null),n=rt(()=>{t.current&&(clearTimeout(t.current),t.current=null)},[]),{animate:r,onTransitionEnd:s,onClose:i,contextId:o}=e,[a,c]=w.useState(e.animate==="open");w.useEffect(()=>a?r!=="open"?(n(),c(!1),T_):t.current?T_:(t.current=setTimeout(()=>{t.current=null,c(!1)}),n):T_,[r,a,n]);const u=rt(h=>{h.propertyName==="height"&&(s(),r==="close"&&i())},[r,i,s]),f=Dje({isAnimatingOpenOnMount:a,animate:e.animate,placeholder:e.placeholder});return je.createElement(e.placeholder.tagName,{style:f,"data-rfd-placeholder-context-id":o,onTransitionEnd:u,ref:e.innerRef})};var Fje=je.memo(Lje);class Bje extends je.PureComponent{constructor(...t){super(...t),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(t,n){return t.shouldAnimate?t.on?{isVisible:!0,data:t.on,animate:"open"}:n.isVisible?{isVisible:!0,data:n.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!t.on,data:t.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const t={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(t)}}const zje=e=>{const t=w.useContext(gS);t||De();const{contextId:n,isMovementAllowed:r}=t,s=w.useRef(null),i=w.useRef(null),{children:o,droppableId:a,type:c,mode:u,direction:f,ignoreContainerClipping:h,isDropDisabled:p,isCombineEnabled:y,snapshot:v,useClone:x,updateViewportMaxScroll:E,getContainerForClone:N}=e,_=rt(()=>s.current,[]),C=rt((D=null)=>{s.current=D},[]);rt(()=>i.current,[]);const j=rt((D=null)=>{i.current=D},[]),A=rt(()=>{r()&&E({maxScroll:XH()})},[r,E]);Ije({droppableId:a,type:c,mode:u,direction:f,isDropDisabled:p,isCombineEnabled:y,ignoreContainerClipping:h,getDroppableRef:_});const $=Tt(()=>je.createElement(Bje,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},({onClose:D,data:L,animate:H})=>je.createElement(Fje,{placeholder:L,onClose:D,innerRef:j,animate:H,contextId:n,onTransitionEnd:A})),[n,A,e.placeholder,e.shouldAnimatePlaceholder,j]),k=Tt(()=>({innerRef:C,placeholder:$,droppableProps:{"data-rfd-droppable-id":a,"data-rfd-droppable-context-id":n}}),[n,a,$,C]),R=x?x.dragging.draggableId:null,B=Tt(()=>({droppableId:a,type:c,isUsingCloneFor:R}),[a,R,c]);function z(){if(!x)return null;const{dragging:D,render:L}=x,H=je.createElement(hW,{draggableId:D.draggableId,index:D.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(M,V)=>L(M,V,D));return Df.createPortal(H,N())}return je.createElement(o3.Provider,{value:B},o(k,v),z())};function Vje(){return document.body||De(),document.body}const jD={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:Vje},yW=e=>{let t={...e},n;for(n in jD)e[n]===void 0&&(t={...t,[n]:jD[n]});return t},$_=(e,t)=>e===t.droppable.type,AD=(e,t)=>t.draggables[e.draggable.id],Uje=()=>{const e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t={...e,shouldAnimatePlaceholder:!1},n=ar(i=>({draggableId:i.id,type:i.type,source:{index:i.index,droppableId:i.droppableId}})),r=ar((i,o,a,c,u,f)=>{const h=u.descriptor.id;if(u.descriptor.droppableId===i){const v=f?{render:f,dragging:n(u.descriptor)}:null,x={isDraggingOver:a,draggingOverWith:a?h:null,draggingFromThisWith:h,isUsingPlaceholder:!0};return{placeholder:u.placeholder,shouldAnimatePlaceholder:!1,snapshot:x,useClone:v}}if(!o)return t;if(!c)return e;const y={isDraggingOver:a,draggingOverWith:h,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:u.placeholder,shouldAnimatePlaceholder:!0,snapshot:y,useClone:null}});return(i,o)=>{const a=yW(o),c=a.droppableId,u=a.type,f=!a.isDropDisabled,h=a.renderClone;if(iy(i)){const p=i.critical;if(!$_(u,p))return t;const y=AD(p,i.dimensions),v=$s(i.impact)===c;return r(c,f,v,v,y,h)}if(i.phase==="DROP_ANIMATING"){const p=i.completed;if(!$_(u,p.critical))return t;const y=AD(p.critical,i.dimensions);return r(c,f,dW(p.result)===c,$s(p.impact)===c,y,h)}if(i.phase==="IDLE"&&i.completed&&!i.shouldFlush){const p=i.completed;if(!$_(u,p.critical))return t;const y=$s(p.impact)===c,v=!!(p.impact.at&&p.impact.at.type==="COMBINE"),x=p.critical.droppable.id===c;return y?v?e:t:x?e:t}return t}},qje={updateViewportMaxScroll:eCe},Hje=pH(Uje,qje,(e,t,n)=>({...yW(n),...e,...t}),{context:r3,areStatePropsEqual:uW})(zje);function Wje({data:e=[],extractId:t,renderItem:n,dndProps:r={droppableId:"sortable-list",direction:"vertical"},onReordered:s,onChange:i,disableIndices:o=[],...a}){function c({destination:f,source:h}){if(o.includes(h.index)||o.includes(f.index))return;const p={from:h.index,to:(f==null?void 0:f.index)||0};s==null||s(p.from,p.to)}const u=e.map((f,h)=>{const p=t?t(f):w.useId();return m.jsx(Nje,{index:h,draggableId:p,isDragDisabled:o.includes(h),children:(y,v,x)=>n?n({...f,dnd:{provided:y,snapshot:v,rubic:x}},h):m.jsxs("div",{className:"flex flex-row gap-2 p-2 border border-gray-200 rounded-md mb-3 bg-white items-center",ref:y.innerRef,...y.draggableProps,children:[m.jsx("div",{...y.dragHandleProps,children:m.jsx(vxe,{className:"size-5",stroke:1.5})}),m.jsx("p",{children:JSON.stringify(f)})]})},p)});return m.jsx(ije,{onDragEnd:c,children:m.jsx(Hje,{...r,children:f=>m.jsxs("div",{...a,...f.droppableProps,ref:f.innerRef,children:[u,f.placeholder]})})})}function a3({children:e,target:t,defaultOpen:n=!1,backdrop:r=!1,position:s="bottom-start",overlayProps:i,className:o}){const[a,c]=w.useState(n),u=tS(()=>c(!1)),f=Dt((p=50)=>setTimeout(()=>c(y=>!y),typeof p=="number"?p:0)),h={"bottom-start":"mt-1 top-[100%]","bottom-end":"right-0 top-[100%] mt-1","top-start":"bottom-[100%] mb-1","top-end":"bottom-[100%] right-0 mb-1"}[s];return m.jsxs(m.Fragment,{children:[a&&r&&m.jsx("div",{className:"animate-fade-in w-full h-full absolute top-0 bottom-0 right-0 left-0 bg-background/60"}),m.jsxs("div",{role:"dropdown",className:qe("relative flex",o),ref:u,children:[w.cloneElement(e,{onClick:f}),a&&m.jsx("div",{...i,className:qe("animate-fade-in absolute z-20 flex flex-col bg-background border border-muted px-1 py-1 rounded-lg shadow-lg backdrop-blur-sm min-w-full max-w-20",h,i==null?void 0:i.className),children:t({toggle:f})})]})]})}const bS=[{type:"primary",label:"Primary",icon:OP,addable:!1,disabled:["name"],hidden:["virtual"]},{type:"text",label:"Text",icon:OP},{type:"number",label:"Number",icon:tEe},{type:"boolean",label:"Boolean",icon:rEe},{type:"date",label:"Date",icon:jq},{type:"enum",label:"Enum",icon:j$},{type:"json",label:"JSON",icon:SSe},{type:"jsonschema",label:"JSON Schema",icon:kSe},{type:"relation",label:"Relation",icon:O$,addable:!1,hidden:["virtual"]},{type:"media",label:"Media",icon:t0,addable:!1,hidden:["virtual"]}],TD=()=>{const[e,t]=ZU([!1,!0]),n=e?gSe:nEe;return m.jsx("button",{role:"checkbox",type:"button",className:"flex px-3 py-3",onClick:()=>t(),children:m.jsx(n,{size:18})})};function vS({data:e=[],columns:t,checkable:n,onClickRow:r,onClickPage:s,onClickSort:i,total:o,sort:a,page:c=1,perPage:u=10,perPageOptions:f,onClickPerPage:h,classNames:p,renderHeader:y,rowActions:v,renderValue:x,onClickNew:E}){o=o||(e==null?void 0:e.length)||0,c=c||1;const N=t&&t.length>0?t:Object.keys((e==null?void 0:e[0])||{}),_=Math.max(Math.ceil(o/u),1),C=x||xS;return m.jsxs("div",{className:"flex flex-col gap-3",children:[E&&m.jsx("div",{className:"flex flex-row space-between",children:E&&m.jsx(st,{onClick:E,children:"Create new"})}),m.jsx("div",{className:"border-muted border rounded-md shadow-sm w-full max-w-full overflow-x-scroll overflow-y-hidden",children:m.jsxs("table",{className:"w-full text-md",children:[N.length>0?m.jsx("thead",{className:"sticky top-0 bg-muted/10",children:m.jsxs("tr",{children:[n&&m.jsx("th",{align:"center",className:"w-[40px]",children:m.jsx(TD,{})}),N.map((j,A)=>{const $=(y==null?void 0:y(j))??ci(j);return m.jsx("th",{children:m.jsx("div",{className:"flex flex-row py-1 px-1 font-normal text-primary/55",children:m.jsxs("button",{type:"button",className:qe("py-1.5 rounded-md inline-flex flex-row justify-start items-center gap-1",i?"link hover:bg-primary/5 pl-2.5 pr-1":"px-2.5"),onClick:()=>i==null?void 0:i(j),children:[m.jsx("span",{className:"text-left text-nowrap whitespace-nowrap",children:$}),(i||a&&a.by===j)&&m.jsx(Gje,{sort:a,field:j})]})})},A)}),v&&v.length>0&&m.jsx("th",{className:"w-10"})]})}):null,m.jsx("tbody",{children:!e||!Array.isArray(e)||e.length===0?m.jsx("tr",{children:m.jsx("td",{colSpan:N.length+(n?1:0),children:m.jsx("div",{className:"flex flex-col gap-2 p-8 justify-center items-center border-t border-muted",children:m.jsx("i",{className:"opacity-50",children:Array.isArray(e)?"No data to show":e?m.jsx("pre",{children:JSON.stringify(e,null,2)}):"Loading..."})})})}):e.map((j,A)=>{const $=()=>r==null?void 0:r(j);return m.jsxs("tr",{"data-border":A>0,className:"hover:bg-primary/5 active:bg-muted border-muted data-[border]:border-t cursor-pointer transition-colors",children:[n&&m.jsx("td",{align:"center",children:m.jsx(TD,{})}),Object.entries(j).map(([k,R],B)=>m.jsx("td",{onClick:$,children:m.jsx("div",{className:"flex flex-row items-start py-3 px-3.5 font-normal ",children:m.jsx(C,{property:k,value:R})})},B)),v&&v.length>0&&m.jsx("td",{children:m.jsx("div",{className:"flex flex-row justify-end pr-2",children:m.jsxs(Os,{position:"bottom-end",children:[m.jsx(Os.Target,{children:m.jsx(xt,{Icon:ISe})}),m.jsx(Os.Dropdown,{children:v.map(k=>m.jsx(Os.Item,{onClick:()=>k.onClick(j,A),leftSection:k.icon&&m.jsx(k.icon,{}),children:k.label},k.label))})]})})})]},A)})})]})}),m.jsxs("div",{className:"flex flex-row items-center justify-between",children:[m.jsx("div",{className:"hidden md:flex text-primary/40",children:m.jsx(Yje,{perPage:u,page:c,items:(e==null?void 0:e.length)||0,total:o})}),m.jsxs("div",{className:"flex flex-row gap-2 md:gap-10 items-center",children:[f&&m.jsxs("div",{className:"hidden md:flex flex-row items-center gap-2 text-primary/40",children:["Per Page"," ",m.jsx(jr,{items:f.map(j=>({label:String(j),perPage:j})),position:"top-end",onClickItem:j=>h==null?void 0:h(j.perPage),children:m.jsx(st,{children:u})})]}),m.jsxs("div",{className:"text-primary/40",children:["Page ",c," of ",_]}),s&&m.jsx("div",{className:"flex flex-row gap-1.5",children:m.jsx(Jje,{current:c,total:_,onClick:s})})]})]})]})}const xS=({value:e,property:t})=>{let n=!1;return e!==null&&typeof e=="object"&&(e=JSON.stringify(e),n=!0),e!==null&&typeof e<"u"?m.jsx("span",{className:qe("line-clamp-2",n&&"font-mono break-all"),children:e}):m.jsx("span",{className:"opacity-10 font-mono",children:"null"})},Gje=({sort:e,field:t})=>!e||e.by!==t?m.jsx(j$,{size:18,className:"mt-[1px]"}):e.dir==="asc"?m.jsx(vSe,{size:18,className:"mt-[1px]"}):m.jsx(ySe,{size:18,className:"mt-[1px]"}),Yje=({perPage:e,page:t,items:n,total:r})=>r===0?m.jsx(m.Fragment,{children:"No rows to show"}):r===1?m.jsx(m.Fragment,{children:"Showing 1 row"}):m.jsxs(m.Fragment,{children:["Showing ",e*(t-1)+1,"-",e*(t-1)+n," of ",r," rows"]}),Jje=({current:e,total:t,onClick:n})=>[{value:1,Icon:TSe,disabled:e===1},{value:e-1,Icon:OSe,disabled:e===1},{value:e+1,Icon:jSe,disabled:e===t},{value:t,Icon:$Se,disabled:e===t}].map((s,i)=>m.jsx("button",{role:"button",type:"button",disabled:s.disabled,className:"px-2 py-2 border-muted border rounded-md enabled:link text-lg enabled:hover:bg-primary/5 text-primary/90 disabled:opacity-50 disabled:cursor-not-allowed",onClick:()=>{const o=s.value,a=o<1?1:o>t?t:o;n==null||n(a)},children:m.jsx(s.Icon,{})},i)),Xje=({path:e,backTo:t,onBack:n})=>{const[r,s]=vi(),i=window.location.pathname,o=Array.isArray(e)?e:[e],a=i.split("/").filter(h=>h!==""),c=o.length>1,u=n||Dt(()=>{if(t){s(t,{replace:!0});return}const h=a.slice(0,o.length+1).join("/");s(`~/${h}`,{replace:!0})}),f=w.useMemo(()=>o.map((h,p)=>{const y=p===o.length-1,v=a.indexOf(h),x=a.slice(0,v+1).join("/"),E=Dy(h);return{last:y,href:x,string:E}}),[o,a]);return m.jsxs("div",{className:"flex flex-row flex-grow items-center gap-2 text-lg",children:[c&&m.jsx(xt,{onClick:u,Icon:C$,variant:"default",size:"lg",className:"mr-1"}),m.jsx("div",{className:"hidden md:flex gap-2",children:m.jsx(bW,{crumbs:f})}),m.jsx("div",{className:"flex md:hidden gap-2",children:m.jsx(Kje,{crumbs:f})})]})},bW=({crumbs:e})=>e.map((t,n)=>t.last?m.jsx(vW,{...t},n):m.jsx(xW,{...t},n)),Kje=({crumbs:e})=>{const[,t]=vi();if(e.length<=2)return m.jsx(bW,{crumbs:e});const n=e[0],r=e[e.length-1],s=w.useMemo(()=>e.slice(1,-1).map(o=>({label:o.string,href:o.href})),[e]),i=Dt(o=>t(`~/${o.href}`));return m.jsxs(m.Fragment,{children:[m.jsx(xW,{...n}),m.jsx(jr,{onClickItem:i,items:s,children:m.jsx(xt,{Icon:nl,variant:"ghost"})}),m.jsx("span",{className:"opacity-25 dark:font-bold font-semibold",children:"/"}),m.jsx(vW,{...r})]})},vW=({string:e})=>m.jsx("span",{className:"text-nowrap dark:font-bold font-semibold",children:e}),xW=({href:e,string:t})=>m.jsxs("div",{className:"opacity-50 flex flex-row gap-2 dark:font-bold font-semibold",children:[m.jsx(K1,{to:`~/${e}`,className:"text-nowrap",children:t}),m.jsx("span",{className:"opacity-50",children:"/"})]});function wW(e,t,n){if(!e.properties)return[{...e.toJSON()},t,{}];const r=JSON.parse(JSON.stringify(e)),s={...r,properties:Ms(r.properties,n)};s.required&&(s.required=s.required.filter(a=>!n.includes(a)));const i={};for(const a of n)i[a]={config:t[a],schema:r.properties[a]};const o=Ms(t,n);return[s,o,i]}const Qje=w.forwardRef((e,t)=>{const[n,r]=w.useState(!!(e.value??e.defaultValue));w.useEffect(()=>{console.log("value change",e.value),r(!!e.value)},[e.value]);function s(i){var o;r(i.target.checked),(o=e.onChange)==null||o.call(e,i.target.checked)}return m.jsx("div",{className:"flex flex-row",children:m.jsx(Ka,{ref:t,checked:n,onChange:s,disabled:e.disabled,id:e.id})})}),Zi=({error:e,as:t,...n})=>{const r=t||"div";return m.jsx(r,{...n,className:qe("flex flex-col gap-1.5",t==="fieldset"&&"border border-primary/10 p-3 rounded-md",t==="fieldset"&&e&&"border-red-500",e&&"text-red-500",n.className)})},ld=({as:e,...t})=>{const n=e||"label";return m.jsx(n,{...t})},Zje=({className:e,...t})=>m.jsx("div",{...t,className:qe("text-sm text-primary/50",e)}),eAe=({className:e,...t})=>m.jsx("div",{...t,className:qe("text-sm text-red-500",e)}),Em=({field:e,label:t,...n})=>{const r=e.getDescription(),s=r?i=>m.jsx(Pc,{position:"right",label:r,...i}):i=>m.jsx(w.Fragment,{...i});return m.jsx(s,{children:m.jsxs(ld,{...n,className:"flex flex-row gap-1 items-center self-start",children:[t??e.getLabel(),e.isRequired()&&m.jsx("span",{className:"font-medium opacity-30",children:"*"}),r&&m.jsx(YSe,{className:"opacity-50"})]})})},il=w.forwardRef((e,t)=>{const n=e.disabled||e.readOnly;return m.jsx("input",{type:"text",...e,ref:t,className:qe("bg-muted/40 h-11 rounded-md py-2.5 px-4 outline-none w-full disabled:cursor-not-allowed",n&&"bg-muted/50 text-primary/50",!n&&"focus:bg-muted focus:outline-none focus:ring-2 focus:ring-zinc-500 focus:border-transparent transition-all",e.className)})}),tAe=w.forwardRef((e,t)=>e.type==="password"?m.jsx(SW,{...e,ref:t}):"data-type"in e&&e["data-type"]==="textarea"?m.jsx(EW,{...e,ref:t}):m.jsx(il,{...e,ref:t})),SW=w.forwardRef((e,t)=>{const[n,r]=w.useState(!1);function s(){r(i=>!i)}return m.jsxs("div",{className:"relative w-full",children:[m.jsx(il,{...e,type:n?"text":"password",className:"w-full",ref:t}),m.jsx("div",{className:"absolute right-3 top-0 bottom-0 flex items-center",children:m.jsx(xt,{Icon:n?DSe:Rq,onClick:s,variant:"ghost",className:"opacity-70"})})]})}),EW=w.forwardRef((e,t)=>m.jsx("textarea",{rows:3,...e,ref:t,className:qe("bg-muted/40 min-h-11 rounded-md py-2.5 px-4 focus:bg-muted outline-none focus:outline-none focus:ring-2 focus:ring-zinc-500 focus:border-transparent transition-all disabled:bg-muted/50 disabled:text-primary/50",e.className)})),sj=w.forwardRef((e,t)=>{const n=w.useRef(null),r=_oe();w.useImperativeHandle(t,()=>n.current);const s=Dt(()=>{n!=null&&n.current&&(n.current.focus(),["Safari"].includes(r)?n.current.click():n.current.showPicker())});return m.jsxs("div",{className:"relative w-full",children:[m.jsx("div",{className:"absolute h-full right-3 top-0 bottom-0 flex items-center",children:m.jsx(xt,{Icon:jq,onClick:s})}),m.jsx(il,{...e,type:e.type??"date",ref:n,className:"w-full appearance-none"})]})}),_8e=w.forwardRef((e,t)=>{const[n,r]=w.useState(!!e.value);w.useEffect(()=>{r(!!e.value)},[e.value]);function s(i){var o;r(i.target.checked),(o=e.onChange)==null||o.call(e,i.target.checked)}return m.jsx("div",{className:"h-11 flex items-center",children:m.jsx("input",{...e,type:"checkbox",ref:t,className:"outline-none focus:outline-none focus:ring-2 focus:ring-zinc-500  transition-all disabled:opacity-70 scale-150 ml-1",checked:n,onChange:s,disabled:e.disabled})})}),$D={xs:{root:"h-5 w-8",thumb:"data-[state=checked]:left-[calc(100%-1rem)]"},sm:{root:"h-6 w-10",thumb:"data-[state=checked]:left-[calc(100%-1.25rem)]"},md:{root:"h-7 w-12",thumb:"data-[state=checked]:left-[calc(100%-1.5rem)]"}},nAe=w.forwardRef(({type:e,required:t,...n},r)=>m.jsx(J1e,{className:yn("relative cursor-pointer rounded-full bg-muted border-2 border-transparent outline-none ring-1 dark:ring-primary/10 ring-primary/20 data-[state=checked]:ring-primary/60 data-[state=checked]:bg-primary/60 appearance-none transition-colors hover:bg-muted/80",$D[n.size??"md"].root,n.disabled&&"opacity-50 !cursor-not-allowed"),onCheckedChange:s=>{var i;console.log("setting",s),(i=n.onChange)==null||i.call(n,{target:{value:s}})},...n,checked:typeof n.checked<"u"?n.checked:typeof n.value<"u"?!!n.value:void 0,ref:r,children:m.jsx(X1e,{className:yn("absolute top-0 left-0 h-full aspect-square rounded-full bg-primary/30 data-[state=checked]:bg-background transition-[left,right] duration-100 border border-muted",$D[n.size??"md"].thumb)})})),NW=w.forwardRef(({children:e,options:t,...n},r)=>m.jsxs("div",{className:"flex w-full relative",children:[m.jsx("select",{...n,ref:r,className:qe("bg-muted/40 focus:bg-muted rounded-md py-2.5 px-4 outline-none focus:outline-none focus:ring-2 focus:ring-zinc-500 focus:border-transparent transition-all disabled:bg-muted/50 disabled:text-primary/50","appearance-none h-11 w-full",!n.multiple&&"border-r-8 border-r-transparent",n.className),children:t?m.jsxs(m.Fragment,{children:[!n.required&&m.jsx("option",{value:""}),t.map(s=>typeof s!="object"?{value:s,label:String(s)}:s).map(s=>m.jsx("option",{value:s.value,children:s.label},s.value))]}):e}),!n.multiple&&m.jsx(Aq,{className:"absolute right-3 top-0 bottom-0 h-full opacity-70 pointer-events-none",size:18})]})),rAe=(e,t)=>{switch(e){case"date":return sj;case"boolean":return Qje;case"textarea":return EW;default:return il}};function _W({open:e=!1,children:t,onClose:n=()=>null,allowBackdropClose:r=!0,className:s,stickToTop:i}){const o=tS(()=>{r&&n()});return m.jsx(m.Fragment,{children:e&&m.jsx("div",{className:qe("w-full h-full fixed bottom-0 top-0 right-0 left-0 bg-background/60 flex justify-center backdrop-blur-sm z-10",i?"items-start":"items-center"),children:m.jsx("div",{className:qe("z-20 flex flex-col bg-background rounded-lg shadow-lg",s),ref:o,children:t})})})}const sAe=({schema:e,uiSchema:t={},anyOfValues:n,path:r,prefixPath:s,generateKey:i})=>{const[o,a]=vi(),[c,u]=w.useState(e),[f,h]=w.useState(!1),{actions:p,readonly:y}=dt(),[v,{open:x,close:E}]=gm(!1),N=i!==void 0,_=typeof i=="string",[C,j]=w.useState(_?i:""),A=v$(!N),$=w.useRef(null),k="anyOf"in e;function R(L){i&&typeof i=="function"&&B({target:{value:i(L)}}),console.log("form change",L)}function B(L){const H=String(L.target.value);if(H.length>0&&!/^[a-zA-Z_][a-zA-Z0-9_ ]*$/.test(H)){console.log("no match",H);return}j(H.toLowerCase().replace(/ /g,"_").replace(/__+/g,"_"))}async function z(){var L,H,M,V;if((L=$.current)!=null&&L.validateForm()){h(!0);const T=(H=$.current)==null?void 0:H.formData(),[I,...P]=r,W=[...P,C].join(".");await p.add(I,W,T)?setTimeout(()=>{a(s+C,{replace:!0})},500):h(!1)}console.log("valid?",(M=$.current)==null?void 0:M.validateForm()),console.log("data",C,(V=$.current)==null?void 0:V.formData())}const D=k?e.anyOf.map(L=>{var T,I;const H=L.title,M=((T=n==null?void 0:n[H])==null?void 0:T.label)||H,V=(I=n==null?void 0:n[H])==null?void 0:I.icon;return{label:M,icon:V,onClick:()=>{u(L),x()}}}):[];return m.jsxs(m.Fragment,{children:[!y&&m.jsx("div",{className:"flex flex-row",children:k?m.jsx(jr,{position:"top-start",items:D,itemsClassName:"gap-3",children:m.jsx(st,{children:"Add new"})}):m.jsx(st,{onClick:x,children:"Add new"})}),m.jsx(_W,{open:v,allowBackdropClose:!1,onClose:E,className:"min-w-96 w-6/12 mt-[30px] mb-[20px]",stickToTop:!0,children:m.jsxs("div",{className:"border border-muted rounded-lg flex flex-col overflow-y-scroll font-normal",style:{maxHeight:"calc(100dvh - 100px)"},children:[m.jsx("div",{className:"bg-muted py-2 px-4 text-primary/70 font-mono flex flex-row gap-2 items-center",children:[...r,C].join(".")}),m.jsxs("div",{className:"flex flex-row gap-10 sticky top-0 bg-background z-10 p-4 border-b border-muted",children:[m.jsxs("div",{className:"flex flex-row flex-grow items-center relative",children:[m.jsx(il,{ref:A,className:"w-full",placeholder:"New unique key...",onChange:B,value:C,disabled:N}),N&&m.jsx("div",{className:"absolute h-full flex items-center z-10 right-3.5 top-0 bottom-0 font-mono font-sm opacity-50",children:"generated"})]}),m.jsxs("div",{className:"flex flex-row gap-2",children:[m.jsx(st,{onClick:E,disabled:f,children:"Cancel"}),m.jsx(st,{variant:"primary",onClick:z,disabled:f||C.length===0,children:"Create"})]})]}),m.jsx("div",{className:"flex flex-col p-4",children:m.jsx(vm,{ref:$,schema:$h(c,["title"]),uiSchema:t,onChange:R,className:"legacy hide-required-mark fieldset-alternative mute-root"})})]})})]})},RD=w.forwardRef(({tabs:e,title:t},n)=>{const[r,{open:s,close:i}]=gm(!1),[o,a]=w.useState(0),c=e[o];return w.useImperativeHandle(n,()=>({open:s,close:i,isOpen:r})),c?m.jsx(_W,{open:r,onClose:i,className:"min-w-96 w-9/12 mt-[80px] mb-[20px]",stickToTop:!0,children:m.jsxs("div",{className:"border border-primary rounded-lg flex flex-col overflow-scroll font-normal",style:{maxHeight:"calc(100dvh - 100px)"},children:[t&&m.jsxs("div",{className:"bg-primary py-2 px-4 text-background font-mono flex flex-row gap-2 items-center",children:[m.jsx(oEe,{size:20,className:"opacity-50"}),t]}),m.jsxs("div",{className:"flex flex-row justify-between sticky top-0 bg-background z-10 py-4 px-5",children:[m.jsx("div",{className:"flex flex-row gap-3",children:e.map((u,f)=>m.jsx("button",{onClick:()=>a(f),"data-active":f===o?1:void 0,className:"font-mono data-[active]:font-bold",children:u.title},f))}),m.jsx(xt,{Icon:A$,onClick:i})]}),m.jsx("div",{className:"",children:m.jsx(fs,{json:c.json,expand:6,showSize:!0,showCopy:!0})})]})}):null});function rs({schema:e,uiSchema:t,config:n,prefix:r="/",options:s,path:i=[],properties:o}){var H,M,V;const[a,c]=w.useState(!1),{actions:u,readonly:f}=dt(),h=w.useRef(null),p=w.useRef(null),y=w.useRef(null),[v,x]=w.useState(!1);x$([["mod+s",T=>(T.preventDefault(),D(),!1)],["e",()=>{v||z()}],["Escape",()=>{v&&z()}]]);const E=w.useMemo(()=>o?Object.entries(o).filter(([,T])=>T.hide||T.extract).map(([T])=>T):[],[o]),N=Dt(T=>{const I=window.location.href.split("/").slice(0,-1).join("/");T?window.location.replace(I):window.history.back()}),_=(((H=s==null?void 0:s.allowDelete)==null?void 0:H.call(s,n))??!0)&&!f,C=(((M=s==null?void 0:s.allowEdit)==null?void 0:M.call(s,n))??!0)&&!f,j=((V=s==null?void 0:s.showAlert)==null?void 0:V.call(s,n))??void 0;console.log("--setting",{schema:e,config:n,prefix:r,path:i,exclude:E});const[A,$,k]=wW(e,n,E);console.log({reducedSchema:A,reducedConfig:$,extracted:k});const R=Object.keys(k),B=R.find(T=>window.location.pathname.endsWith(T))??R[0],z=Dt(()=>{C&&x(T=>!T)}),D=Dt(async()=>{var T,I;if(!(!C||!v)&&(T=h.current)!=null&&T.validateForm()){c(!0);const P=(I=h.current)==null?void 0:I.formData(),[W,...F]=i;let q;console.log("save:data",{module:W,restOfPath:F},P),F.length>0?(console.log("-> patch",{module:W,path:F.join(".")},P),q=await u.patch(W,F.join("."),P)):(console.log("-> set",{module:W},P),q=await u.set(W,P,!0)),console.log("save:success",q),q?s!=null&&s.reloadOnSave&&(await u.reload(),c(!1)):c(!1)}}),L=Dt(async()=>{if(!_)return;const[T,...I]=i;window.confirm(`Are you sure you want to delete ${i.join(".")}`)&&await u.remove(T,I.join("."))&&N(!0)});return n?m.jsxs(m.Fragment,{children:[m.jsx(An,{className:i.length>1?"pl-3":"",scrollable:!0,right:m.jsxs(m.Fragment,{children:[m.jsx(jr,{items:[{label:"Inspect local schema",onClick:()=>{var T;(T=p.current)==null||T.open()}},{label:"Inspect schema",onClick:()=>{var T;(T=y.current)==null||T.open()}},_&&{label:"Delete",destructive:!0,onClick:L}],position:"bottom-end",children:m.jsx(xt,{Icon:ym})}),m.jsx(st,{onClick:z,disabled:!C,children:v?"Cancel":"Edit"}),v&&m.jsx(st,{variant:"primary",onClick:D,disabled:a||!C,children:a?"Save...":"Save"})]}),children:m.jsx(Xje,{path:i})}),m.jsxs(Zn,{children:[typeof j<"u"&&m.jsx(No.Warning,{message:j}),m.jsx("div",{className:"flex flex-col flex-grow p-3 gap-3",children:m.jsx(vm,{ref:h,readonly:!v,schema:$h(A,["title"]),formData:$,uiSchema:t,onChange:console.log,className:"legacy hide-required-mark fieldset-alternative mute-root"})}),R.length>0&&m.jsxs("div",{className:"flex flex-col max-w-full",children:[m.jsx(Bq,{items:R.map(T=>{var I;return{as:K1,label:ci(T),href:`${r}/${T}`.replace(/\/+/g,"/"),active:B===T,badge:Object.keys(((I=k[T])==null?void 0:I.config)??{}).length}})}),m.jsx("div",{className:"flex flex-grow flex-col gap-3 p-3",children:m.jsx(at,{path:"/:prop?",component:({params:T})=>{var X,Q,se,ae;const[,I]=vi(),P=T.prop??B,W=((X=k[P])==null?void 0:X.config)??{},F=(Q=o==null?void 0:o[P])!=null&&Q.tableValues?(se=o==null?void 0:o[P])==null?void 0:se.tableValues(W):Object.entries(W).map(([de,ce])=>{if(!ce||typeof ce!="object")return{key:de,value:ce};const fe=Object.keys(ce)[0],ve=ce[fe],Ae=$h(ce,[fe]);return{key:de,[fe]:ve,value:Ae}}),q=(ae=o==null?void 0:o[P])==null?void 0:ae.new;return P?m.jsxs(m.Fragment,{children:[q&&m.jsx(sAe,{schema:q.schema,uiSchema:q.uiSchema,anyOfValues:q.anyOfValues,prefixPath:`/${P}/`,path:[...i,P],generateKey:q.generateKey}),m.jsx(vS,{data:F,onClickRow:de=>{const ce=Object.values(de)[0];I(`/${P}/${ce}`)}})]}):m.jsx("div",{className:"h-80 flex justify-center align-center",children:m.jsx(qn,{title:"No sub-setting selected",description:"Select one from the tab bar"})})}})})]})]},i.join("-")),m.jsx(RD,{ref:p,title:i.join("."),tabs:[{title:"Schema",json:A},{title:"Config",json:$}]}),m.jsx(RD,{ref:y,title:i.join("."),tabs:[{title:"Schema",json:e},{title:"Config",json:n}]})]}):m.jsx(qn,{title:"Not found",description:`Configuration at path ${i.join(".")} doesn't exist.`,primary:{children:"Go back",onClick:()=>N()}})}const ij={config:{fillable:{"ui:options":{wrap:!0},anyOf:[{},{"ui:widget":"checkboxes"}]},hidden:{"ui:options":{wrap:!0},anyOf:[{},{"ui:widget":"checkboxes"}]},schema:{"ui:field":"JsonField"},ui_schema:{"ui:field":"JsonField"}}},iAe=bS.filter(e=>e.type!=="primary").reduce((e,t)=>(e[t.type]={label:t.label,icon:t.icon},e),{}),oAe={"1:1":{label:"One-to-One"},"n:1":{label:"Many-to-One"},"m:n":{label:"Many-to-Many"},poly:{label:"Polymorphic"}},aAe=({schema:e,config:t})=>{const{app:n,readonly:r}=dt(),s=n.getAbsolutePath("settings"),i=Object.keys(t.entities??{});function o(a,c="entity"){i.length!==0&&(a.properties&&c in a.properties&&(a.properties[c].enum=i),"anyOf"in a&&a.anyOf.forEach(u=>o(u,c)))}return m.jsx(at,{path:"/data",nest:!0,children:m.jsxs(qa,{children:[m.jsx(at,{path:"/entities/:entity/fields/:field",component:({params:{entity:a,field:c}})=>{var p,y,v,x,E;const u=(v=(y=(p=t.entities)==null?void 0:p[a])==null?void 0:y.fields)==null?void 0:v[c],f=(E=(x=e.properties.entities.additionalProperties)==null?void 0:x.properties)==null?void 0:E.fields.additionalProperties,h=f.anyOf.find(N=>N.properties.type.const===(u==null?void 0:u.type));return m.jsx(rs,{schema:h??f,config:u,prefix:`${s}/data/entities/${a}/fields/${c}`,path:["data","entities",a,"fields",c],options:{showAlert:N=>{if((N==null?void 0:N.type)==="primary"&&!r)return"Modifying the primary field may result in strange behaviors."}},uiSchema:ij})},nest:!0}),m.jsx(at,{path:"/entities/:entity",component:({params:{entity:a}})=>{var h;const c=e.properties.entities.additionalProperties,u=B1(c);u.properties.type.readOnly=!0;const f={anyOf:u.properties.fields.additionalProperties.anyOf.filter(p=>p.properties.type.const!=="primary")};return m.jsx(rs,{schema:u,config:(h=t.entities)==null?void 0:h[a],options:{showAlert:p=>{if(p.type==="system"&&!r)return"Modifying the system entities may result in strange behaviors."}},properties:{fields:{extract:!0,tableValues:p=>ti(p,(y,v,x)=>{var E;y.push({property:x,type:v.type,required:(E=v.config)!=null&&E.required?"Yes":"No"})},[]),new:{schema:f,uiSchema:ij,anyOfValues:iAe}}},path:["data","entities",a],prefix:`${s}/data/entities/${a}`})},nest:!0}),m.jsx(at,{path:"/indices/:index",component:({params:{index:a}})=>{var u;const c=e.properties.indices.additionalProperties;return i.length>0&&o(c,"entity"),m.jsx(rs,{schema:e.properties.indices.additionalProperties,config:(u=t.indices)==null?void 0:u[a],path:["data","indices",a],prefix:`${s}/data/indices/${a}`})},nest:!0}),m.jsx(at,{path:"/relations/:relation",component:({params:{relation:a}})=>{var h;const c=(h=t.relations)==null?void 0:h[a],f=e.properties.relations.additionalProperties.anyOf.find(p=>p.properties.type.const===(c==null?void 0:c.type));return i.length>0&&(o(f,"source"),o(f,"target")),m.jsx(rs,{schema:f,config:c,path:["data","relations",a],prefix:`${s}/data/relations/${a}`})},nest:!0}),m.jsx(at,{path:"/",component:()=>{const a=e.properties.indices.additionalProperties,c=e.properties.relations.additionalProperties;return o(a,"entity"),o(c,"source"),o(c,"target"),m.jsx(rs,{schema:e,config:t,properties:{entities:{extract:!0,tableValues:u=>ti(u,(f,h,p)=>{f.push({name:p,type:h.type,fields:Object.keys(h.fields??{}).length})},[]),new:{schema:e.properties.entities.additionalProperties,uiSchema:{fields:{"ui:widget":"hidden"},type:{"ui:widget":"hidden"}}}},relations:{extract:!0,new:{schema:e.properties.relations.additionalProperties,generateKey:u=>{var h,p,y,v;const f=[u.type.replace(":",""),u.source,u.target,(h=u.config)==null?void 0:h.mappedBy,(p=u.config)==null?void 0:p.inversedBy,(y=u.config)==null?void 0:y.connectionTable,(v=u.config)==null?void 0:v.connectionTableMappedName].filter(Boolean);return[...new Set(f)].join("_")},anyOfValues:oAe},tableValues:u=>ti(u,(f,h,p)=>{f.push({name:p,type:h.type,source:h.source,target:h.target})},[])},indices:{extract:!0,tableValues:u=>ti(u,(f,h,p)=>{f.push({name:p,entity:h.entity,fields:h.fields.join(", "),unique:h.unique?"Yes":"No"})},[]),new:{schema:a,uiSchema:{fields:{"ui:options":{orderable:!1}}},generateKey:u=>["idx",u.entity,u.unique&&"unique",...u.fields.filter(Boolean)].filter(Boolean).join("_")}}},prefix:`${s}/data`,path:["data"]})},nest:!0})]})})},wS=PV,lAe=Qt(Object.values(wS)),cAe=We({name:td,new:gt({const:!0}).optional(),field:lAe}),uAe=We({fields:Sn(cAe)}),dAe=Object.keys(wS);dAe[0];const l3=["label","description","required","fillable","hidden","virtual"];function fAe(e){var t;return ze(Ms((t=wS[e])==null?void 0:t.properties.config.properties,l3))}const CW=w.forwardRef(function({fields:t,sortable:n,additionalFieldTypes:r,routePattern:s,isNew:i,readonly:o,...a},c){const u=Object.entries(t).map(([z,D])=>({name:z,field:D})),{control:f,formState:{isValid:h,errors:p},getValues:y,watch:v,register:x,setValue:E,setError:N,reset:_}=rl({mode:"all",resolver:sl(uAe),defaultValues:{fields:u}}),{fields:C,append:j,remove:A,move:$}=w2e({control:f,name:"fields"});function k(z){return Object.fromEntries(z.fields.map(D=>[D.name,$g(D.field)]))}w.useEffect(()=>{a!=null&&a.onChange&&v(z=>{var D;(D=a==null?void 0:a.onChange)==null||D.call(a,k(z))})},[]),w.useImperativeHandle(c,()=>({reset:_,getValues:()=>y(),getData:()=>k(y()),isValid:()=>h,getErrors:()=>p}));function R(z){var D;j({name:"",new:!0,field:{type:z,config:(D=wS[z])==null?void 0:D.properties.config.template()}})}const B={watch:v,register:x,setValue:E,getValues:y,control:f,setError:N};return m.jsx(m.Fragment,{children:m.jsx("div",{className:"flex flex-col gap-6",children:m.jsx("div",{className:"flex flex-col gap-3",children:m.jsxs("div",{className:"flex flex-col gap-4",children:[n?m.jsx(Wje,{data:C,onReordered:$,extractId:z=>z.id,disableIndices:[0],renderItem:({dnd:z,...D},L)=>m.jsx(mAe,{readonly:o,field:D,index:L,form:B,errors:p,remove:A,dnd:z,routePattern:s,primary:{defaultFormat:D.defaultPrimaryFormat,editable:i}},D.id)},C.length):m.jsx("div",{children:C.map((z,D)=>m.jsx(OW,{readonly:o,field:z,index:D,form:B,errors:p,remove:A,routePattern:s,primary:{defaultFormat:a.defaultPrimaryFormat,editable:i}},z.id))}),m.jsx(Q1,{children:m.jsx(a3,{className:"flex flex-col w-full",target:({toggle:z})=>m.jsx(hAe,{additionalFieldTypes:r,onSelected:z,onSelect:D=>{R(D)}}),children:m.jsx(st,{className:"justify-center",children:"Add Field"})})})]})})})})}),hAe=({onSelect:e,additionalFieldTypes:t=[],onSelected:n})=>{const r=bS.filter(s=>s.addable!==!1);return t&&r.push(...t),m.jsx("div",{className:"flex flex-row gap-2 justify-center flex-wrap",children:r.map(s=>m.jsx(st,{IconLeft:s.icon,variant:"ghost",onClick:()=>{var i;s.addable!==!1?e(s.type):(i=s.onClick)==null||i.call(s),n==null||n()},children:s.label},s.type))})},mAe=w.memo(OW,(e,t)=>e.field.id!==t.field.id);function OW({field:e,index:t,form:{watch:n,register:r,setValue:s,getValues:i,control:o,setError:a},remove:c,errors:u,dnd:f,routePattern:h,primary:p,readonly:y}){var D,L,H,M,V;const v=`fields.${t}.field`,x=e.field.type,E=n(`fields.${t}.name`),{active:N,toggle:_}=_$(h??"",E),C=bS.find(T=>T.type===x);$h(e.field.config,l3);const j=C.disabled||[],A=C.hidden||[],$=t===0,k=!!((D=u==null?void 0:u.fields)!=null&&D[t]),R=x==="primary";function B(T){return()=>{(E.length===0||window.confirm(`Sure to delete "${E}"?`))&&(c(T),_())}}const z=f?{...f.provided.draggableProps,ref:f.provided.innerRef}:{};return m.jsxs("div",{className:qe("flex flex-col border border-muted rounded bg-background mb-2",N&&"mb-6",k&&"border-red-500 "),...z,children:[m.jsxs("div",{className:"flex flex-row gap-2 px-2 py-2",children:[f?m.jsx("div",{className:"flex items-center",...f.provided.dragHandleProps,children:m.jsx(xt,{Icon:qSe,className:"mt-1",disabled:$})}):null,m.jsxs("div",{className:"flex flex-row flex-grow gap-4 items-center md:mr-6",children:[m.jsx(Pc,{label:C.label,children:m.jsx("div",{className:"flex flex-row items-center p-2 bg-primary/5 rounded",children:m.jsx(C.icon,{className:"size-5"})})}),e.new?m.jsx(On,{error:!!((H=(L=u==null?void 0:u.fields)==null?void 0:L[t])!=null&&H.name.message),placeholder:"Enter a property name...",classNames:{root:"w-full h-full",wrapper:"font-mono h-full",input:"pt-px !h-full"},...r(`fields.${t}.name`),disabled:!e.new}):m.jsxs("div",{className:"font-mono flex-grow flex flex-row gap-3",children:[m.jsx("span",{children:E}),((M=e.field.config)==null?void 0:M.label)&&m.jsx("span",{className:"opacity-50",children:(V=e.field.config)==null?void 0:V.label})]}),m.jsx("div",{className:"flex-col gap-1 hidden md:flex",children:R?m.jsx(m.Fragment,{children:m.jsx(ka,{data:["integer","uuid"],defaultValue:p==null?void 0:p.defaultFormat,disabled:!(p!=null&&p.editable),placeholder:"Select format",name:`${v}.config.format`,allowDeselect:!1,control:o,size:"xs",className:"w-22"})}):m.jsxs(m.Fragment,{children:[m.jsx("span",{className:"text-xs text-primary/50 leading-none",children:"Required"}),m.jsx(mg,{size:"sm",disabled:y,name:`${v}.config.required`,control:o})]})})]}),m.jsx("div",{className:"flex items-end",children:m.jsx("div",{className:"flex flex-row gap-4",children:m.jsx(xt,{size:"lg",Icon:ym,disabled:R,iconProps:{strokeWidth:1.5},onClick:()=>_(),variant:N?"primary":"ghost"})})})]}),N&&m.jsx("div",{className:"flex flex-col border-t border-t-muted px-3 py-2 bg-lightest/50",children:m.jsxs(wn,{defaultValue:"general",children:[m.jsxs(wn.List,{className:"flex flex-row",children:[m.jsx(wn.Tab,{value:"general",children:"General"}),m.jsx(wn.Tab,{value:"specific",children:Dy(x)}),m.jsx(wn.Tab,{value:"visibility",disabled:!0,children:"Visiblity"}),m.jsx("div",{className:"flex flex-grow"}),m.jsx(wn.Tab,{value:"code",className:"!self-end",children:"Code"})]}),m.jsx(wn.Panel,{value:"general",children:m.jsxs("div",{className:"flex flex-col gap-2 pt-3 pb-1",children:[m.jsx("div",{className:"flex flex-row",children:m.jsx(mg,{label:"Required",disabled:y,name:`${v}.config.required`,control:o})}),m.jsx(On,{label:"Label",placeholder:"Label",disabled:y,...r(`${v}.config.label`)}),m.jsx(My,{label:"Description",placeholder:"Description",disabled:y,...r(`${v}.config.description`)}),!A.includes("virtual")&&m.jsx(mg,{label:"Virtual",name:`${v}.config.virtual`,control:o,disabled:j.includes("virtual")||y})]},`${v}_${x}`)}),m.jsx(wn.Panel,{value:"specific",children:m.jsx("div",{className:"flex flex-col gap-2 pt-3 pb-1",children:m.jsx(bm,{fallback:`Error rendering JSON Schema for ${x}`,children:m.jsx(pAe,{field:e,onChange:T=>{s(`${v}.config`,{...i([`fields.${t}.config`])[0],...T})},readonly:y})})})}),m.jsx(wn.Panel,{value:"code",children:(()=>{const{id:T,...I}=e;return m.jsx(fs,{json:I,expand:4})})()}),!y&&m.jsx("div",{className:"flex flex-row justify-end",children:m.jsx(st,{IconLeft:Pq,onClick:B(t),size:"small",variant:"subtlered",children:"Delete"})})]})})]},e.id)}const pAe=({field:e,onChange:t,readonly:n})=>{var i;const r=e.field.type,s=$h(e.field.config,l3);return m.jsx(vm,{schema:(i=fAe(r))==null?void 0:i.toJSON(),formData:s,uiSchema:ij.config,className:"legacy hide-required-mark fieldset-alternative mute-root",onChange:t,readonly:n},r)},gAe=L$;function yAe(){var C,j;const{nextStep:e,stepBack:t,state:n,setState:r}=Cd(),{config:s}=Fs(),i=(j=(C=n.entities)==null?void 0:C.create)==null?void 0:j[0],o={id:{type:"primary",name:"id"}},a=w.useRef(null),c=$g($ge(i,{fields:o,config:{sort_field:"id",sort_dir:"asc"}})),{control:u,formState:{isValid:f,errors:h},getValues:p,handleSubmit:y,watch:v,setValue:x}=rl({mode:"onTouched",resolver:sl(gAe),defaultValues:c}),E=v(),N=Dt(A=>{x("fields",A)});function _(){var A,$;f&&((A=a.current)!=null&&A.isValid())?(r(k=>{var B,z;return((z=(B=k.entities)==null?void 0:B.create)==null?void 0:z[0])?{...k,entities:{create:[p()]}}:k}),console.log("valid"),e("create")()):console.warn("not valid",($=a.current)==null?void 0:$.getErrors())}return m.jsxs("form",{onSubmit:y(_),children:[m.jsx(Nd,{children:m.jsxs("div",{className:"flex flex-col gap-6",children:[m.jsxs("div",{className:"flex flex-col gap-3",children:[m.jsxs("p",{children:["Add fields to ",m.jsx("strong",{children:i.name}),":"]}),m.jsx("div",{className:"flex flex-col gap-1",children:m.jsx(CW,{ref:a,fields:c.fields,onChange:N,defaultPrimaryFormat:s==null?void 0:s.default_primary_format,isNew:!0})})]}),m.jsxs("div",{className:"flex flex-col gap-3",children:[m.jsx("p",{children:"How should it be sorted by default?"}),m.jsxs("div",{className:"flex flex-row gap-2",children:[m.jsx(ka,{label:"Field",data:Object.keys(E.fields??{}).filter(A=>A.length>0),placeholder:"Select field",name:"config.sort_field",allowDeselect:!1,control:u}),m.jsx(ka,{label:"Direction",data:["asc","desc"],defaultValue:"asc",placeholder:"Select direction",name:"config.sort_dir",allowDeselect:!1,control:u})]})]}),m.jsx("div",{children:Object.entries(h).map(([A,$])=>m.jsxs("p",{children:[A,": ",$.message]},A))})]})}),m.jsx(_d,{next:{disabled:!f,type:"submit"},prev:{onClick:t},debug:{state:n,values:E}})]})}function sw({name:e,control:t,defaultValue:n,rules:r,shouldUnregister:s,onChange:i,...o}){var h;const{field:{value:a,onChange:c,...u},fieldState:f}=Od({name:e,control:t,defaultValue:n,rules:r,shouldUnregister:s});return m.jsx(u1,{value:a,onChange:p=>{c(p),i==null||i(p)},error:(h=f.error)==null?void 0:h.message,...u,...o})}const oj=[{type:Ur.ManyToOne,label:"Many to One",component:xAe},{type:Ur.OneToOne,label:"One to One",component:wAe},{type:Ur.ManyToMany,label:"Many to Many",component:SAe},{type:Ur.Polymorphic,label:"Polymorphic",component:EAe}],bAe=We({type:pe({enum:oj.map(e=>e.type)}),source:td,target:td,config:ze({})});function vAe(){var N,_,C;const{config:e}=dt(),t=e.data.entities,n=Object.keys(t??{}).length,{nextStep:r,stepBack:s,state:i,path:o,setState:a}=Cd(),{register:c,handleSubmit:u,formState:{isValid:f},setValue:h,watch:p,control:y}=rl({resolver:sl(bAe),defaultValues:((_=(N=i.relations)==null?void 0:N.create)==null?void 0:_[0])??{}}),v=p();function x(){f&&(a(j=>({...j,relations:{create:[v]}})),console.log("data",v),r("create")())}const E=Dt(()=>{const{source:j,target:A}=v;j&&A?(h("source",A),h("target",j)):j?(h("target",j),h("source",null)):(h("source",A),h("target",null))});return m.jsxs(m.Fragment,{children:[n<2&&m.jsx("div",{className:"px-5 py-4 bg-red-100 text-red-900",children:"Not enough entities to create a relation."}),m.jsxs("form",{onSubmit:u(x),children:[m.jsxs(Nd,{children:[m.jsxs("div",{className:"grid grid-cols-3 gap-8",children:[m.jsx(ka,{control:y,name:"source",label:"Source",allowDeselect:!1,data:Object.entries(t??{}).map(([j,A])=>{var $;return{value:j,label:(($=A.config)==null?void 0:$.name)??j,disabled:v.target===j}})}),m.jsxs("div",{className:"flex flex-col gap-1",children:[m.jsx(ka,{control:y,name:"type",onChange:()=>h("config",{}),label:"Relation Type",data:oj.map(j=>({value:j.type,label:j.label})),allowDeselect:!1}),v.type&&m.jsx("div",{className:"flex justify-center mt-1",children:m.jsx(st,{size:"small",IconLeft:Iq,onClick:E,children:"Flip entities"})})]}),m.jsx(ka,{control:y,allowDeselect:!1,name:"target",label:"Target",data:Object.entries(t??{}).map(([j,A])=>{var $;return{value:j,label:(($=A.config)==null?void 0:$.name)??j,disabled:v.source===j}})})]}),m.jsx("div",{children:v.type&&((C=oj.find(j=>j.type===v.type))==null?void 0:C.component({register:c,control:y,data:v}))})]}),m.jsx(_d,{next:{type:"submit",disabled:!f,onClick:x},prev:{onClick:s},debug:{state:i,path:o,data:v}})]})]})}const Kt=({children:e})=>m.jsx("b",{className:"font-mono select-text",children:e}),SS=({children:e})=>m.jsx("div",{className:"bg-primary/5 py-4 px-5 rounded-lg mt-10",children:e});function xAe({register:e,control:t,data:{source:n,target:r,config:s}}){return m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"grid grid-cols-3 gap-8",children:[m.jsxs("div",{className:"flex flex-col gap-4",children:[m.jsx(On,{label:"Target mapping",...e("config.mappedBy"),placeholder:r}),m.jsx(sw,{label:"Cardinality",name:"config.sourceCardinality",control:t,placeholder:"n"}),m.jsx(sw,{label:"WITH limit",name:"config.with_limit",control:t,placeholder:String(Oc.DEFAULTS.with_limit)})]}),m.jsx("div",{}),m.jsxs("div",{className:"flex flex-col gap-4",children:[m.jsx(On,{label:"Source mapping",...e("config.inversedBy"),placeholder:n}),m.jsx(Ka,{label:"Required",...e("config.required")})]})]}),n&&r&&s&&m.jsx(SS,{children:m.jsxs(m.Fragment,{children:[m.jsxs("pre",{className:"mb-2 opacity-70 flex flex-row items-center gap-2",children:[m.jsx(od,{className:"size-4"}),n,".",s.mappedBy||r,"_id ",""," ",r]}),m.jsxs("p",{children:["Many ",m.jsx(Kt,{children:n})," will each have one reference to ",m.jsx(Kt,{children:r}),"."]}),m.jsxs("p",{children:["A property ",m.jsxs(Kt,{children:[s.mappedBy||r,"_id"]})," will be added to"," ",m.jsx(Kt,{children:n})," (which references ",m.jsx(Kt,{children:r}),")."]}),m.jsxs("p",{children:["When creating ",m.jsx(Kt,{children:n}),", a reference to ",m.jsx(Kt,{children:r})," is"," ",m.jsx("i",{children:s.required?"required":"optional"}),"."]}),s.sourceCardinality?m.jsxs("p",{children:[m.jsx(Kt,{children:r})," should not have more than"," ",m.jsx(Kt,{children:s.sourceCardinality})," referencing entr",s.sourceCardinality===1?"y":"ies"," to ",m.jsx(Kt,{children:n}),"."]}):null]})})]})}function wAe({register:e,control:t,data:{source:n,target:r,config:{mappedBy:s,required:i}}}){return m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"grid grid-cols-3 gap-8",children:[m.jsxs("div",{className:"flex flex-col gap-4",children:[m.jsx(On,{label:"Target mapping",...e("config.mappedBy"),placeholder:r}),m.jsx(Ka,{label:"Required",...e("config.required")})]}),m.jsx("div",{}),m.jsx("div",{className:"flex flex-col gap-4",children:m.jsx(On,{label:"Source mapping",...e("config.inversedBy"),placeholder:n})})]}),n&&r&&m.jsx(SS,{children:m.jsxs(m.Fragment,{children:[m.jsxs("pre",{className:"mb-2 opacity-70 flex flex-row items-center gap-2",children:[m.jsx(od,{className:"size-4"}),n,".",s||r,"_id ",""," ",r]}),m.jsxs("p",{children:["A single entry of ",m.jsx(Kt,{children:n})," will have a reference to"," ",m.jsx(Kt,{children:r}),"."]}),m.jsxs("p",{children:["A property ",m.jsxs(Kt,{children:[s||r,"_id"]})," will be added to"," ",m.jsx(Kt,{children:n})," (which references ",m.jsx(Kt,{children:r}),")."]}),m.jsxs("p",{children:["When creating ",m.jsx(Kt,{children:n}),", a reference to ",m.jsx(Kt,{children:r})," is"," ",m.jsx("i",{children:i?"required":"optional"}),"."]})]})})]})}function SAe({register:e,control:t,data:{source:n,target:r,config:s}}){const i=s.connectionTable?s.connectionTable:n&&r?`${n}_${r}`:"";return m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"grid grid-cols-3 gap-8",children:[m.jsx("div",{className:"flex flex-col gap-4"}),m.jsxs("div",{className:"flex flex-col gap-4",children:[m.jsx(On,{label:"Connection Table",...e("config.connectionTable"),placeholder:i}),m.jsx(On,{label:"Connection Mapping",...e("config.connectionTableMappedName"),placeholder:i})]}),m.jsx("div",{className:"flex flex-col gap-4"})]}),n&&r&&m.jsx(SS,{children:m.jsxs(m.Fragment,{children:[m.jsxs("pre",{className:"mb-2 opacity-70 flex flex-row items-center gap-2",children:[m.jsx(od,{className:"size-4"}),n," ",""," ",i," ",""," ",r]}),m.jsxs("p",{children:["Many ",m.jsx(Kt,{children:n})," will have many ",m.jsx(Kt,{children:r}),"."]}),m.jsxs("p",{children:["A connection table ",m.jsx(Kt,{children:i})," will be created to store the relations."]})]})})]})}function EAe({register:e,control:t,data:{type:n,source:r,target:s,config:i}}){return m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"grid grid-cols-3 gap-8",children:[m.jsx("div",{className:"flex flex-col gap-4",children:m.jsx(On,{label:"Target mapping",...e("config.mappedBy"),placeholder:s})}),m.jsx("div",{}),m.jsxs("div",{className:"flex flex-col gap-4",children:[m.jsx(On,{label:"Source mapping",...e("config.inversedBy"),placeholder:r}),m.jsx(sw,{label:"Cardinality",name:"config.targetCardinality",control:t,placeholder:"n"})]})]},n),r&&s&&m.jsx(SS,{children:m.jsxs(m.Fragment,{children:[m.jsxs("pre",{className:"mb-2 opacity-70 flex flex-row items-center gap-2",children:[m.jsx(od,{className:"size-4"}),r," ",""," ",s]}),m.jsxs("p",{children:[m.jsx(Kt,{children:r})," will have many ",m.jsx(Kt,{children:s}),"."]}),m.jsxs("p",{children:[m.jsx(Kt,{children:s})," will get additional properties ",m.jsx(Kt,{children:"reference"})," and"," ",m.jsx(Kt,{children:"entity_id"})," to make the (polymorphic) reference."]}),i.targetCardinality?m.jsxs("p",{children:[m.jsx(Kt,{children:r})," should not have more than"," ",m.jsx(Kt,{children:i.targetCardinality})," reference",i.targetCardinality===1?"":"s"," to ",m.jsx(Kt,{children:s}),"."]}):null]})})]})}function c3({name:e,control:t,defaultValue:n,rules:r,shouldUnregister:s,onChange:i,...o}){const{field:{value:a,onChange:c,...u}}=Od({name:e,control:t,defaultValue:n,rules:r,shouldUnregister:s});return m.jsx(To,{value:a,onChange:f=>{c(f),i==null||i(f)},...u,...o})}function NAe({name:e,control:t,defaultValue:n,rules:r,shouldUnregister:s,onChange:i,...o}){var h;const{field:{value:a,onChange:c,...u},fieldState:f}=Od({name:e,control:t,defaultValue:n,rules:r,shouldUnregister:s});return m.jsx(d1,{value:a,onChange:p=>{c(p),i==null||i(p)},error:(h=f.error)==null?void 0:h.message,...u,...o})}c3.Group=NAe;c3.Item=To;const kD=ze({entity:td,cardinality_type:pe({enum:["single","multiple"],default:"multiple"}),cardinality:jt({minimum:1}).optional(),name:td});function _Ae(){var j,A,$,k;const{stepBack:e,setState:t,state:n,path:r,nextStep:s}=Cd(),{register:i,handleSubmit:o,formState:{isValid:a,errors:c},watch:u,control:f}=rl({mode:"onChange",resolver:sl(kD),defaultValues:kD.template(n.initial??{})}),[h,p]=w.useState(!1),{config:y}=dt(),v=y.media.enabled??!1,x=y.media.entity_name??"media",E=tn(y.data.entities??{},(R,B)=>B!==x?R:void 0),N=u(),_=Object.keys(((A=(j=y.data.entities)==null?void 0:j[N.entity])==null?void 0:A.fields)??{});w.useEffect(()=>{p(_.includes(N.name))},[_,N.name]);async function C(){if(a&&!h){const{field:R,relation:B}=CAe(x,N);t(z=>({...z,fields:{create:[R]},relations:{create:[B]}})),s("create")()}}return m.jsxs(m.Fragment,{children:[!v&&m.jsx("div",{className:"px-5 py-4 bg-red-100 text-red-900",children:"Media is not enabled in the configuration. Please enable it to use this template."}),m.jsxs("form",{onSubmit:o(C),children:[m.jsx(Nd,{children:m.jsxs("div",{className:"flex flex-col gap-6",children:[m.jsx(ka,{name:"entity",allowDeselect:!1,control:f,size:"md",label:"Choose which entity to add media to",required:!0,data:Object.entries(E).map(([R,B])=>{var z;return{value:R,label:((z=B.config)==null?void 0:z.name)??R}})}),m.jsx(c3.Group,{name:"cardinality_type",control:f,label:"How many items can be attached?",size:"md",children:m.jsxs("div",{className:"flex flex-col gap-1",children:[m.jsx(To,{label:"Multiple items",value:"multiple"}),m.jsx(To,{label:"Single item",value:"single"})]})}),N.cardinality_type==="multiple"&&m.jsx(sw,{name:"cardinality",control:f,size:"md",label:"How many exactly?",placeholder:"n",description:"Leave empty for unlimited",inputWrapperOrder:["label","input","description","error"]}),m.jsx(On,{size:"md",label:"Set a name for the property",required:!0,description:`A virtual property will be added to ${N.entity?N.entity:"the entity"}.`,...i("name"),error:($=c.name)!=null&&$.message?(k=c.name)==null?void 0:k.message:h?`Property "${N.name}" already exists on entity ${N.entity}`:void 0})]})}),m.jsx(_d,{next:{type:"submit",disabled:!a||!v||h},prev:{onClick:e},debug:{state:n,path:r,data:N}})]})]})}function CAe(e,t){const n={name:t.name,entity:t.entity,field:{type:"media",config:{required:!1,fillable:["update"],hidden:!1,mime_types:[],virtual:!0,entity:t.entity}}},r={type:"poly",source:t.entity,target:e,config:{mappedBy:t.name,targetCardinality:t.cardinality_type==="single"?1:void 0}};return t.cardinality_type==="multiple"?t.cardinality&&t.cardinality>1&&(n.field.config.max_items=t.cardinality,r.config.targetCardinality=t.cardinality):(n.field.config.max_items=1,r.config.targetCardinality=1),{field:n,relation:r}}const OAe={id:"template-media",title:"Attach Media",description:"Attach media to an entity",Icon:t0},jW=[[_Ae,OAe]];function jAe(){const{nextStep:e,stepBack:t,state:n,path:r,setState:s}=Cd(),i=n.action??null;function o(a){if(i===a){e(a)();return}s({action:a})}return m.jsxs(m.Fragment,{children:[m.jsxs(Nd,{children:[m.jsx("p",{children:"Choose what type to add."}),m.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[m.jsx(R_,{Icon:wSe,title:"Entity",description:"Create a new entity with fields",onClick:()=>o("entity"),selected:i==="entity"}),m.jsx(R_,{Icon:O$,title:"Relation",description:"Create a new relation between entities",onClick:()=>o("relation"),selected:i==="relation"})]}),m.jsxs("div",{className:"flex flex-col gap-2 mt-3",children:[m.jsx("h3",{className:"font-bold",children:"Quick templates"}),m.jsx("div",{className:"grid grid-cols-2 gap-3",children:jW.map(([,a])=>m.jsx(R_,{compact:!0,Icon:t0,title:a.title,description:a.description,onClick:()=>o(a.id),selected:i===a.id},a.id))})]})]}),m.jsx(_d,{next:{onClick:i&&e(i),disabled:!i},prev:{onClick:t},prevLabel:"Cancel",debug:{state:n,path:r}})]})}const R_=({Icon:e,title:t,description:n,onClick:r,selected:s,compact:i=!1,disabled:o=!1})=>m.jsxs("div",{onClick:o!==!0?r:void 0,className:qe("flex gap-3 border border-primary/10 rounded cursor-pointer",i?"flex-row p-4 items-center":"flex-col p-5",s?"bg-primary/10 border-primary/50":"hover:bg-primary/5",o&&"opacity-50"),children:[m.jsx(e,{className:"size-10"}),m.jsxs("div",{className:"flex flex-col leading-tight",children:[m.jsx("p",{className:"text-lg font-bold",children:t}),m.jsx("p",{children:n})]})]});function u3({context:e,id:t,innerProps:{initialPath:n=[],initialState:r}}){const[s,i]=w.useState(n);function o(){e.closeModal(t)}return m.jsxs(Gq,{path:s,lastBack:o,initialPath:n,initialState:r,children:[m.jsxs(vu,{id:"select",children:[m.jsx(bu,{path:["Create New"],onClose:o}),m.jsx(jAe,{})]}),m.jsxs(vu,{id:"entity",path:["action"],children:[m.jsx(bu,{path:["Create New","Entity"],onClose:o}),m.jsx(j2e,{})]}),m.jsxs(vu,{id:"entity-fields",path:["action","entity"],children:[m.jsx(bu,{path:["Create New","Entity","Fields"],onClose:o}),m.jsx(yAe,{})]}),m.jsxs(vu,{id:"relation",path:["action"],children:[m.jsx(bu,{path:["Create New","Relation"],onClose:o}),m.jsx(vAe,{})]}),m.jsxs(vu,{id:"create",path:["action"],children:[m.jsx(bu,{path:["Create New","Creation"],onClose:o}),m.jsx(t2e,{})]}),jW.map(([a,c])=>m.jsxs(vu,{id:c.id,path:["action"],children:[m.jsx(bu,{path:["Create New","Template",c.title],onClose:o}),m.jsx(a,{})]},c.id))]})}u3.defaultTitle=void 0;u3.modalProps={withCloseButton:!1,size:"xl",padding:0};function d3({innerProps:e}){const{data:t,...n}=e,r=tn(t,(o,a)=>typeof o=="object"&&"label"in o?o:{label:m.jsx("span",{className:"font-mono",children:a}),value:o,expand:10,showCopy:!0,...n}),s=Object.keys(r).length;function i({value:o,label:a,className:c,...u}){return m.jsx(fs,{json:o,className:yn("text-sm",c),...u})}return m.jsx("div",{className:"bg-background",children:s>1?m.jsxs(wn,{defaultValue:Object.keys(r)[0],children:[m.jsx("div",{className:"sticky top-0 bg-background z-10",children:m.jsx(wn.List,{children:Object.entries(r).map(([o,a])=>m.jsx(wn.Tab,{value:o,children:a.label},o))})}),Object.entries(r).map(([o,a])=>m.jsx(wn.Panel,{value:o,children:i(a)},o))]}):i({...r[Object.keys(r)[0]],title:r[Object.keys(r)[0]].label})})}d3.defaultTitle=!1;d3.modalProps={withCloseButton:!1,size:"lg",classNames:{body:"!p-0"}};function f3({context:e,id:t,innerProps:{schema:n,uiSchema:r,onSubmit:s,autoCloseAfterSubmit:i}}){const[o,a]=w.useState(!1),c=w.useRef(null),[u,f]=w.useState(!1),h=w.useRef(!1),[p,y]=w.useState();function v(N,_){const C=_();console.log("Data changed",N,C),a(C)}function x(){e.closeModal(t)}async function E(){var N,_;h.current=!0,(N=c.current)!=null&&N.validateForm()&&(f(!0),await(s==null?void 0:s((_=c.current)==null?void 0:_.formData(),{close:x,setError:y})),f(!1),i!==!1&&x())}return m.jsxs(m.Fragment,{children:[p&&m.jsx(No.Exception,{message:p}),m.jsxs("div",{className:"pt-3 pb-3 px-4 gap-4 flex flex-col",children:[m.jsx(vm,{tagName:"form",ref:c,schema:JSON.parse(JSON.stringify(n)),uiSchema:r,className:"legacy hide-required-mark fieldset-alternative mute-root",onChange:v,onSubmit:E}),m.jsxs("div",{className:"flex flex-row justify-end gap-2",children:[m.jsx(st,{onClick:x,children:"Cancel"}),m.jsx(st,{variant:"primary",onClick:E,disabled:!o||u,children:"Create"})]})]})]})}f3.defaultTitle="JSON Schema Form Modal";f3.modalProps={size:"md",classNames:{root:"bknd-admin",header:"!bg-lightest !py-3 px-5 !h-auto !min-h-px",content:"rounded-lg select-none",title:"!font-bold !text-md",body:"!p-0"}};function h3({context:e,id:t,innerProps:n}){return m.jsxs(m.Fragment,{children:[m.jsx("span",{children:n.modalBody}),m.jsx("button",{onClick:()=>e.closeModal(t),children:"Close modal"})]})}h3.defaultTitle="Test Modal";h3.modalProps={classNames:{size:"md",root:"bknd-admin",header:"!bg-primary/5 border-b border-b-muted !py-3 px-5 !h-auto !min-h-px",content:"rounded-lg select-none",title:"font-bold !text-md",body:"py-3 px-5 gap-4 flex flex-col"}};const AAe={in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0.9)"},transitionProperty:"transform, opacity"},TAe=e=>{const[t,n]=w.useState(),r=Fo(e==null?void 0:e.baseUrl);return w.useEffect(()=>{(async()=>{const s=await r.auth.strategies();s.res.ok&&n(s.body)})()},[e==null?void 0:e.baseUrl]),{strategies:t==null?void 0:t.strategies,basepath:t==null?void 0:t.basepath,loading:!t}};function AW(e,t){const n=(e==null?void 0:e.tagName.toLowerCase())??"",r=["input","select","textarea"];return!e||!(t!=null&&t.contains(e))||!r.includes(n)||!("name"in e)||e.hasAttribute("data-ignore")||e.closest("[data-ignore]")}function $Ae(e){const t=e.currentTarget,n=e.target;return AW(n,t)?null:n}function RAe(e,t){const n=e.querySelectorAll(`[name="${t}"]`);return Array.from(n).filter(r=>AW(r))}function kAe(e,t){if(!e)return t;const n=e.required;if(!(!t&&!n))if(e.type==="number"){const r=Number(t);if(Number.isNaN(r)&&!n)return;const s="min"in e&&e.min.length>0?Number(e.min):void 0,i="max"in e&&e.max.length>0?Number(e.max):void 0,o="step"in e&&e.step.length>0?Number(e.step):void 0;return s&&r<s?s:i&&r>i?i:o&&o!==1?Math.round(r/o)*o:r}else if(e.type==="text"){const r="maxLength"in e&&e.maxLength>-1?Number(e.maxLength):void 0,s="pattern"in e?new RegExp(e.pattern):void 0;return r&&t.length>r?t.slice(0,r):s&&!s.test(t)?"":t}else return e.type==="checkbox"?"checked"in e?!!e.checked:["on","1","true",1,!0].includes(t):t}function aj(e,t){if(!e)return e;const n=[null,void 0,""],r={empty:(t==null?void 0:t.empty)??n,emptyInArray:(t==null?void 0:t.emptyInArray)??n,keepEmptyArray:(t==null?void 0:t.keepEmptyArray)??!1};return Object.entries(e).reduce((s,[i,o])=>{if(o&&Array.isArray(o)&&o.some(a=>typeof a=="object")){const a=o.map(c=>aj(c,r));(a.length>0||r!=null&&r.keepEmptyArray)&&(s[i]=a)}else if(o&&typeof o=="object"&&!Array.isArray(o)){const a=aj(o,r);Object.keys(a).length>0&&(s[i]=a)}else if(Array.isArray(o)){const a=o.filter(c=>!r.emptyInArray.includes(c));(a.length>0||r!=null&&r.keepEmptyArray)&&(s[i]=a)}else r.empty.includes(o)||(s[i]=o);return s},{})}function TW(e,t,n){let r=t;if(typeof r=="string"){const o=a=>a[0]==='"'&&a.at(-1)==='"';r=r.split(/[.\[\]]+/).filter(a=>a).map(a=>Number.isNaN(Number(a))?a:Number(a)).map(a=>typeof a=="string"&&o(a)?a.slice(1,-1):a)}if(r.length===0)throw new Error("The path must have at least one entry in it");const[s,...i]=r;return i.length===0?(e[s]=n,e):(s in e||(e[s]=typeof i[0]=="number"?[]:{}),TW(e[s],i,n),e)}function MAe({children:e,validateOn:t="submit",hiddenSubmit:n=!1,errorFieldSelector:r,reportValidity:s,onSubmit:i,onSubmitInvalid:o,onError:a,clean:c,disableSubmitOnError:u=!0,...f}){const h=w.useRef(null),[p,y]=w.useState([]);w.useEffect(()=>{!h.current||f.noValidate||x()},[]),w.useEffect(()=>{if(!h.current||f.noValidate)return;const j=p.length>0;h.current.querySelectorAll("[type=submit]").forEach(A=>{!A||!("type"in A)||A.type!=="submit"||(A.disabled=j)}),a==null||a(p)},[p]);const v=(j,A)=>{var k;if(f.noValidate||!j||!("name"in j))return;const $=(k=h.current)==null?void 0:k.querySelector((r==null?void 0:r(j.name))??`[data-role="input-error"][data-name="${j.name}"]`);if(j.checkValidity())y(R=>R.filter(B=>B.name!==j.name)),$&&($.textContent="");else{const R={name:j.name,message:j.validationMessage};return y(B=>[...B.filter(z=>z.name!==j.name),R]),A!=null&&A.report&&($?$.textContent=R.message:s&&j.reportValidity()),R}},x=j=>{if(!h.current||f.noValidate)return[];const A=[];return h.current.querySelectorAll("input, select, textarea").forEach($=>{const R=v($,j);R&&A.push(R)}),u&&h.current.querySelectorAll("[type=submit]").forEach($=>{A.length>0?$.setAttribute("disabled","disabled"):$.removeAttribute("disabled")}),A},E=()=>{if(!h.current)return{};const j=new FormData(h.current),A={};return j.forEach(($,k)=>{const R=RAe(h.current,k);if(R.length===0){console.warn(`No target found for key: ${k}`);return}const z=R.length>1;R.forEach((D,L)=>{let H=k;z&&(H=`${k}[${L}]`),TW(A,H,kAe(D,D.value))})}),typeof c>"u"?A:aj(A,c===!0?void 0:c)},N=async j=>{if(!h.current)return;const $=$Ae(j);$&&((t==="change"||p.length>0)&&v($,{report:!0}),f.onChange&&await f.onChange(E(),{event:j,key:$.name,value:$.value,errors:p}))},_=async j=>{j.preventDefault();const A=h.current;if(!A)return;const $=x({report:!0});if($.length>0){o==null||o($,{event:j});return}i?await i(E(),{event:j}):A.submit()},C=j=>{h.current&&j.keyCode===13&&p.length>0&&!f.noValidate&&s&&h.current.reportValidity()};return m.jsxs("form",{...f,onChange:N,onSubmit:_,ref:h,onKeyDown:C,children:[e,n&&m.jsx("input",{type:"submit",style:{visibility:"hidden"}})]})}function IAe({label:e,provider:t,icon:n,action:r,method:s="POST",basepath:i="/api/auth",children:o}){const a=[i,t,r].join("/");return m.jsxs("form",{method:s,action:a,className:"w-full",children:[m.jsxs(st,{type:"submit",size:"large",variant:"outline",className:"justify-center w-full",IconLeft:n,children:["Continue with ",e??Dy(t)]}),o]})}function PAe({formData:e,className:t,method:n="POST",action:r,auth:s,buttonLabel:i=r==="login"?"Sign in":"Sign up",...o}){var h,p;const a=(s==null?void 0:s.basepath)??"/api/auth",c={action:`${a}/password/${r}`,strategy:((h=s==null?void 0:s.strategies)==null?void 0:h.password)??{}},u=ti((s==null?void 0:s.strategies)??{},(y,v,x)=>{v.type!=="password"&&(y[x]=v.config)},{}),f=Object.keys(u).length>0;return m.jsxs("div",{className:"flex flex-col gap-4 w-full",children:[f&&m.jsxs(m.Fragment,{children:[m.jsx("div",{children:(p=Object.entries(u))==null?void 0:p.map(([y,v],x)=>m.jsx(IAe,{provider:y,method:n,basepath:a,action:r},x))}),m.jsx(DAe,{})]}),m.jsxs(MAe,{method:n,action:c.action,...o,validateOn:"change",className:yn("flex flex-col gap-3 w-full",t),children:[m.jsxs(Zi,{children:[m.jsx(ld,{htmlFor:"email",children:"Email address"}),m.jsx(il,{type:"email",name:"email",required:!0})]}),m.jsxs(Zi,{children:[m.jsx(ld,{htmlFor:"password",children:"Password"}),m.jsx(SW,{name:"password",required:!0,minLength:8})]}),m.jsx(st,{type:"submit",variant:"primary",size:"large",className:"w-full mt-2 justify-center",children:i})]})]})}const DAe=()=>m.jsxs("div",{className:"w-full flex flex-row items-center",children:[m.jsx("div",{className:"relative flex grow",children:m.jsx("div",{className:"h-px bg-primary/10 w-full absolute top-[50%] z-0"})}),m.jsx("div",{className:"mx-5",children:"or"}),m.jsx("div",{className:"relative flex grow",children:m.jsx("div",{className:"h-px bg-primary/10 w-full absolute top-[50%] z-0"})})]});function LAe({method:e="POST",action:t="login",logo:n,intro:r,formOnly:s}){const{strategies:i,basepath:o,loading:a}=TAe(),c=m.jsx(PAe,{auth:{basepath:o,strategies:i},method:e,action:t});return s?a?null:c:m.jsx("div",{className:"flex flex-1 flex-col select-none h-dvh w-dvw justify-center items-center bknd-admin",children:!a&&m.jsxs("div",{className:"flex flex-col gap-4 items-center w-96 px-6 py-7",children:[n||null,w.isValidElement(r)?r:m.jsxs("div",{className:"flex flex-col items-center",children:[m.jsxs("h1",{className:"text-xl font-bold",children:["Sign ",t==="login"?"in":"up"," to your admin panel"]}),m.jsx("p",{className:"text-primary/50",children:"Enter your credentials below to get access."})]}),c]})})}const $W={Screen:LAe};function FAe(){const e=w.useRef(0);return e.current++,e.current}const BAe=[".DS_Store","Thumbs.db"];function l0(e,t){const n=zAe(e);if(typeof n.path!="string"){const{webkitRelativePath:r}=e;Object.defineProperty(n,"path",{value:typeof t=="string"?t:typeof r=="string"&&r.length>0?r:e.name,writable:!1,configurable:!1,enumerable:!0})}return n}function zAe(e){const{name:t}=e,n=t&&t.lastIndexOf(".")!==-1;if(console.log("withMimeType",t,n),n&&!e.type){const r=bF(t);console.log("guessed",r),r&&Object.defineProperty(e,"type",{value:r,writable:!1,configurable:!1,enumerable:!0})}return e}async function lv(e){return iw(e)&&VAe(e.dataTransfer)?WAe(e.dataTransfer,e.type):UAe(e)?qAe(e):Array.isArray(e)&&e.every(t=>"getFile"in t&&typeof t.getFile=="function")?HAe(e):[]}function VAe(e){return iw(e)}function UAe(e){return iw(e)&&iw(e.target)}function iw(e){return typeof e=="object"&&e!==null}function qAe(e){return lj(e.target.files).map(t=>l0(t))}async function HAe(e){return(await Promise.all(e.map(n=>n.getFile()))).map(n=>l0(n))}async function WAe(e,t){if(e.items){const n=lj(e.items).filter(s=>s.kind==="file");if(t!=="drop")return n;const r=await Promise.all(n.map(GAe));return MD(RW(r))}return MD(lj(e.files).map(n=>l0(n)))}function MD(e){return e.filter(t=>BAe.indexOf(t.name)===-1)}function lj(e){if(e===null)return[];const t=[];for(let n=0;n<e.length;n++){const r=e[n];t.push(r)}return t}function GAe(e){if(typeof e.webkitGetAsEntry!="function")return ID(e);const t=e.webkitGetAsEntry();return t!=null&&t.isDirectory?kW(t):ID(e)}function RW(e){return e.reduce((t,n)=>[...t,...Array.isArray(n)?RW(n):[n]],[])}function ID(e){const t=e.getAsFile();if(!t)return Promise.reject(`${e} is not a File`);const n=l0(t);return Promise.resolve(n)}async function YAe(e){return e.isDirectory?kW(e):JAe(e)}function kW(e){const t=e.createReader();return new Promise((n,r)=>{const s=[];function i(){t.readEntries(async o=>{if(o.length){const a=Promise.all(o.map(YAe));s.push(a),i()}else try{const a=await Promise.all(s);n(a)}catch(a){r(a)}},o=>{r(o)})}i()})}async function JAe(e){return new Promise((t,n)=>{e.file(r=>{const s=l0(r,e.fullPath);t(s)},r=>{n(r)})})}const cj={enter:["dragenter","dragover","dragstart"],leave:["dragleave","drop"]},PD=[...cj.enter,...cj.leave];function XAe({onDropped:e,onOver:t,onLeave:n}){const[r,s]=w.useState(!1),i=w.useRef(null),o=w.useRef(!1),a=w.useCallback(h=>{h.preventDefault(),h.stopPropagation()},[]),c=w.useCallback(async h=>{const p=cj.enter.includes(h.type);t&&p!==r&&!o.current&&(t(await lv(h),h),o.current=!0),s(p),p===!1&&o.current&&(o.current=!1,n==null||n())},[]),u=w.useCallback(async h=>{const p=await lv(h);e==null||e(p),o.current=!1},[e]),f=w.useCallback(async h=>{const p=await lv(h);e==null||e(p)},[e]);return w.useEffect(()=>{const h=i.current;return PD.forEach(p=>{h.addEventListener(p,a),h.addEventListener(p,c)}),h.addEventListener("drop",u),()=>{PD.forEach(p=>{h.removeEventListener(p,a),h.removeEventListener(p,c)}),h.removeEventListener("drop",u)}},[]),{ref:i,isOver:r,fromEvent:lv,onDropped:e,handleFileInputChange:f}}function KAe(e,t={overrides:{},baseUrl:""}){return{body:`${t.baseUrl}/api/media/file/${e.path}`,path:e.path,name:e.path,size:e.size??0,type:e.mime_type??"",state:"uploaded",progress:0,...t.overrides}}function QAe(e,t={overrides:{},baseUrl:""}){return e.map(n=>KAe(n,t))}function DD({maxItems:e,current:t=0,overwrite:n,added:r}){if(!e)return{reject:!1,to_drop:0};const s=e-t,i=r>s?r:r-s>0?r-s:0;return{reject:n?r>e:s-r<0,to_drop:i}}const ZAe=()=>b$(Zy({files:[],isOver:!1,isOverAccepted:!1,uploading:!1},(e,t)=>({setFiles:n=>e(({files:r})=>({files:n(r)})),getFilesLength:()=>t().files.length,setIsOver:(n,r)=>e({isOver:n,isOverAccepted:r}),setUploading:n=>e({uploading:n}),setIsOverAccepted:n=>e({isOverAccepted:n}),reset:()=>e({files:[],isOver:!1,isOverAccepted:!1}),addFile:n=>e(r=>({files:[...r.files,n]})),removeFile:n=>e(r=>({files:r.files.filter(s=>s.path!==n)})),removeAllFiles:()=>e({files:[]}),setFileProgress:(n,r)=>e(s=>({files:s.files.map(i=>i.path===n?{...i,progress:r}:i)})),setFileState:(n,r,s)=>e(i=>({files:i.files.map(o=>o.path===n?{...o,state:r,progress:s??o.progress}:o)})),overrideFile:(n,r)=>e(s=>({files:s.files.map(i=>i.path===n?{...i,...r}:i)}))})));function eTe(e){if(e&&e instanceof XMLHttpRequest){const t=JSON.parse(e.responseText);alert(`Upload failed with code ${e.status}: ${t.error}`)}else alert("Upload failed")}function tTe({getUploadInfo:e,handleDelete:t,initialItems:n=[],flow:r="start",allowedMimeTypes:s,maxItems:i,overwrite:o,autoUpload:a,placeholder:c,onRejected:u,onDeleted:f,onUploadedAll:h,onUploaded:p,children:y,onClick:v,footer:x}){const E=w.useRef(ZAe()).current,N=Br(E,q=>q.files),_=Br(E,q=>q.setFiles),C=Br(E,q=>q.getFilesLength),j=Br(E,q=>q.setUploading),A=Br(E,q=>q.setIsOver),$=Br(E,q=>q.uploading),k=Br(E,q=>q.setFileState),R=Br(E,q=>q.overrideFile),B=Br(E,q=>q.removeFile),z=w.useRef(null);w.useEffect(()=>{_(()=>n)},[n.length]);function D(q){return(Array.isArray(q)?q:[q]).map(se=>({kind:"kind"in se?se.kind:"file",type:se.type,size:"size"in se?se.size:0})).every(se=>se.kind!=="file"?(console.log("not a file",se.kind),!1):s&&s.length>0?(console.log("not allowed mimetype",se.type),s.includes(se.type)):!0)}const L=w.useCallback(q=>{if(console.log("onDropped",q),!D(q))return;const X=q.length;_(Q=>{let se=0;if(i){const ve=DD({maxItems:i,overwrite:o,added:X,current:Q.length});if(ve.reject)return u?u(q):console.warn("maxItems reached"),Q;se=ve.to_drop}const ae=Q.slice(se),de=ae.map(ve=>ve.path),ce=q.filter(ve=>!("path"in ve)||ve.path&&!de.includes(ve.path)).map(ve=>({body:ve,path:"path"in ve?ve.path:ve.name,name:ve.name,size:ve.size,type:ve.type,state:"pending",progress:0})),fe=r==="start"?[...ce,...ae]:[...ae,...ce];return a&&ce.length>0&&setTimeout(()=>j(!0),0),fe})},[a,r,i,o]),{handleFileInputChange:H,ref:M}=XAe({onDropped:q=>{console.log("onDropped",q),L(q)},onOver:q=>{if(!D(q)){A(!0,!1);return}const X=C(),Q=DD({maxItems:i,overwrite:o,added:q.length,current:X});console.log("--files in onOver",X,Q),A(!0,!Q.reject)},onLeave:()=>{A(!1,!1)}});w.useEffect(()=>{console.log("files updated")},[N]),w.useEffect(()=>{$&&(async()=>{const q=N.filter(X=>X.state==="pending");if(q.length===0){j(!1);return}else{const X=[];for(const Q of q)try{const se=await V(Q);X.push(se),p==null||p(se)}catch(se){eTe(se)}j(!1),h==null||h(X)}})()},[$]);function V(q){return new Promise((X,Q)=>{if(q.body){if(q.state!=="pending"){console.error("File is not pending"),Q();return}else if(!(q.body instanceof File)){console.error("File body is not a File instance"),Q();return}}else{console.error("File has no body"),Q();return}const se=e({path:q.body.path});console.log("dropzone:uploadInfo",se);const{url:ae,headers:de,method:ce="POST"}=se,fe=new XMLHttpRequest;console.log("xhr:url",ae);const ve=new URLSearchParams;o&&ve.append("overwrite","1"),fe.open(ce,String(ae)+"?"+String(ve),!0),de&&de.forEach((Ce,Ee)=>{fe.setRequestHeader(Ee,Ce)}),fe.upload.addEventListener("progress",Ce=>{if(console.log("progress",Ce.loaded,Ce.total),Ce.lengthComputable){k(q.path,"uploading",Ce.loaded/Ce.total);const Ee=Ce.loaded/Ce.total*100;console.log(`Progress: ${Ee.toFixed(2)}%`)}else console.log("Unable to compute progress information since the total size is unknown")}),fe.onload=()=>{if(console.log("onload",q.path,fe.status),fe.status>=200&&fe.status<300){console.log("Upload complete");try{const Ce=JSON.parse(fe.responseText);console.log("Response:",q,Ce);const Ee={...Ce.state,progress:1,state:"uploaded"};R(q.path,Ee),X({...Ce,...q,...Ee})}catch(Ce){k(q.path,"uploaded",1),console.error("Error parsing response",Ce),Q(Ce)}}else k(q.path,"failed",1),console.error("Upload failed with status: ",fe.status,fe.statusText),Q(fe)},fe.onerror=()=>{console.error("Error during the upload process.")},fe.onloadstart=()=>{k(q.path,"uploading",0),console.log("loadstart")},fe.setRequestHeader("Accept","application/json");const Ae=new FormData;Ae.append("file",q.body),fe.send(Ae)})}const T=w.useCallback(async q=>{switch(console.log("deleteFile",q),q.state){case"uploaded":case"initial":window.confirm("Are you sure you want to delete this file?")&&(console.log('setting state to "deleting"',q),k(q.path,"deleting"),await t(q),B(q.path),f==null||f(q));break}},[]),I=w.useCallback(async q=>{const X=await V(q);h==null||h([X]),p==null||p(X)},[]),P=w.useCallback(()=>{var q;return(q=z.current)==null?void 0:q.click()},[z]),W=w.useMemo(()=>!!((c==null?void 0:c.show)!==!1&&(!i||i&&N.length<i)),[c,i,N.length]),F=w.useMemo(()=>({store:E,wrapperRef:M,inputProps:{ref:z,type:"file",multiple:!i||i>1,onChange:H,accept:s==null?void 0:s.join(",")},showPlaceholder:W,actions:{uploadFile:I,deleteFile:T,openFileInput:P,addFiles:L},dropzoneProps:{maxItems:i,placeholder:c,autoUpload:a,flow:r,allowedMimeTypes:s},onClick:v,footer:x}),[i,N.length,r,c,a,x,s]);return m.jsx(MW.Provider,{value:F,children:y?typeof y=="function"?y(F):y:m.jsx(rTe,{...F})})}const MW=w.createContext(void 0);function m3(){return w.useContext(MW)}const IW=()=>{const{store:e}=m3(),t=Br(e,i=>i.files),n=Br(e,i=>i.isOver),r=Br(e,i=>i.isOverAccepted),s=Br(e,i=>i.uploading);return{files:t,isOver:n,isOverAccepted:r,uploading:s}},c0=(e,t)=>{const{store:n}=m3();return Br(n,r=>{const s=typeof e=="string"?r.files.find(i=>i.path===e):r.files.find(i=>i.path===e.path);return s?t(s):void 0})};function nTe(e){if(e&&e instanceof XMLHttpRequest){const t=JSON.parse(e.responseText);alert(`Upload failed with code ${e.status}: ${t.error}`)}else alert("Upload failed")}const rTe=({wrapperRef:e,inputProps:t,showPlaceholder:n,actions:{uploadFile:r,deleteFile:s,openFileInput:i},dropzoneProps:{placeholder:o,flow:a,maxItems:c,allowedMimeTypes:u},onClick:f,footer:h})=>{const{files:p,isOver:y,isOverAccepted:v}=IW(),x=n&&m.jsx(sTe,{onClick:i,text:o==null?void 0:o.text}),E=w.useCallback(async N=>{try{return await r(N)}catch(_){nTe(_)}},[r]);return m.jsxs("div",{ref:e,className:qe("dropzone w-full h-full align-start flex flex-col select-none",y&&v&&"bg-green-200/10",y&&!v&&"bg-red-200/40 cursor-not-allowed"),children:[m.jsx("div",{className:"hidden",children:m.jsx("input",{...t})}),m.jsx("div",{className:"flex flex-1 flex-col",children:m.jsxs("div",{className:"flex flex-row flex-wrap gap-2 md:gap-3",children:[a==="start"&&x,p.map(N=>m.jsx(oTe,{file:N,handleUpload:E,handleDelete:s,onClick:f},N.path)),a==="end"&&x,h]})})]})},sTe=({onClick:e,text:t="Upload files"})=>m.jsx("div",{className:"w-[49%] aspect-square md:w-60 flex flex-col border-2 border-dashed border-muted relative justify-center items-center text-primary/30 hover:border-primary/30 hover:text-primary/50 hover:cursor-pointer hover:bg-muted/20 transition-colors duration-200",onClick:e,children:m.jsx("span",{className:"",children:t})}),iTe=({file:e,fallback:t,...n})=>e.type.startsWith("image/")?m.jsx(uTe,{...n,file:e}):e.type.startsWith("video/")?m.jsx(dTe,{...n,file:e}):t?t({file:e}):null,PW=w.memo(iTe,(e,t)=>e.file.path===t.file.path),oTe=w.memo(({file:e,handleUpload:t,handleDelete:n,onClick:r})=>{FAe();const s=c0(e,o=>{const{progress:a,...c}=o;return c});if(!s)return null;const i=w.useCallback(()=>{r&&r(s)},[r,s.path]);return m.jsxs("div",{className:qe("w-[49%] md:w-60 aspect-square flex flex-col border border-muted relative hover:bg-primary/5 cursor-pointer transition-colors",s.state==="failed"&&"border-red-500 bg-red-200/20",s.state==="deleting"&&"opacity-70"),onClick:i,children:[m.jsx("div",{className:"absolute top-2 right-2",children:m.jsx(lTe,{file:s,handleDelete:n,handleUpload:t})}),m.jsx(aTe,{file:s}),m.jsx("div",{className:"flex bg-primary/5 aspect-[1/0.78] overflow-hidden items-center justify-center",children:m.jsx(PW,{file:s,fallback:hTe,className:"max-w-full max-h-full"})}),m.jsxs("div",{className:"flex flex-col px-1.5 py-1",children:[m.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[m.jsx("p",{className:"truncate select-text w-[calc(100%-10px)]",children:s.name}),m.jsx(cTe,{file:s})]}),m.jsxs("div",{className:"flex flex-row justify-between text-xs md:text-sm font-mono opacity-50 text-nowrap gap-2",children:[m.jsx("span",{className:"truncate select-text",children:s.type}),m.jsx("span",{className:"whitespace-nowrap",children:b1.fileSize(s.size)})]})]})]})},(e,t)=>e.file.path===t.file.path&&e.file.state===t.file.state),aTe=({file:e})=>{const t=c0(e.path,n=>({state:n.state,progress:n.progress}));return!t||t.state!=="uploading"?null:m.jsx("div",{className:"absolute w-full top-0 left-0 right-0 h-1",children:m.jsx("div",{className:"bg-blue-600 h-1 transition-all duration-75",style:{width:(t.progress*100).toFixed(0)+"%"}})})},lTe=w.memo(({file:e,handleDelete:t,handleUpload:n})=>{const r=c0(e.path,i=>{const{progress:o,...a}=i;return a});if(!r)return null;const s=w.useMemo(()=>[r.state==="uploaded"&&typeof r.body=="string"&&{label:"Open",icon:PSe,onClick:()=>{window.open(r.body,"_blank")}},["initial","uploaded"].includes(r.state)&&{label:"Delete",destructive:!0,icon:Pq,onClick:()=>t(r)},["initial","pending"].includes(r.state)&&{label:"Upload",icon:sEe,onClick:()=>n(r)}],[r,t,n]);return m.jsx(jr,{items:s,position:"bottom-end",children:m.jsx(xt,{Icon:nl})})},(e,t)=>e.file.path===t.file.path),cTe=({file:e})=>{const t=c0(e.path,r=>r.state);if(!t||t==="uploaded")return null;const n={failed:"bg-red-500",deleting:"bg-orange-500 animate-pulse",uploading:"bg-blue-500 animate-pulse"}[t]??"bg-primary/50";return m.jsx("div",{className:"w-2 h-2 rounded-full mt-px "+n,title:t})},uTe=({file:e,...t})=>{const n=typeof e.body=="string"?e.body:URL.createObjectURL(e.body);return m.jsx("img",{...t,src:n})},dTe=({file:e,...t})=>{const n=typeof e.body=="string"?e.body:URL.createObjectURL(e.body);return m.jsx("video",{...t,src:n})},fTe=[{mime:"text/plain",Icon:VSe},{mime:"text/csv",Icon:FSe},{mime:/(text|application)\/xml/,Icon:USe},{mime:"text/markdown",Icon:XSe},{mime:/^text\/.*$/,Icon:LSe},{mime:"application/json",Icon:JSe},{mime:"application/pdf",Icon:BSe},{mime:/^audio\/.*$/,Icon:eEe},{mime:"application/zip",Icon:lEe},{mime:"application/sql",Icon:zSe}],hTe=({file:e})=>{const t=fTe.find(n=>n.mime instanceof RegExp?n.mime.test(e.type):n.mime===e.type);return t?m.jsx(t.Icon,{className:"size-10 text-gray-400"}):m.jsx("div",{className:"text-xs text-primary/50 text-center font-mono leading-none max-w-[90%] truncate",children:e.type})};function mTe({initialItems:e,media:t,entity:n,query:r,randomFilename:s,infinite:i=!1,...o}){var A,$;const a=w.useId(),c=Fo(),u=u$(),f=c.baseUrl,h=(r==null?void 0:r.limit)??o.maxItems??50,p=k=>({limit:h,offset:k*h}),y=(t==null?void 0:t.entity_name)??"media",v=(k,R=0)=>n?k.data.readManyByReference(n.name,n.id,n.field,{...p(R),...r}):k.data.readMany(y,{...p(R),...r}),x=i?nxe(v,{}):Y1(v,{enabled:e!==!1&&!e,revalidateOnFocus:!1}),E=Dt(k=>({url:n?c.media.getEntityUploadUrl(n.name,n.id,n.field):c.media.getFileUploadUrl(s?void 0:k),headers:c.media.getUploadHeaders(),method:"POST"}));Dt(async()=>{await u(x.promise.key({search:!1}))});const N=Dt(async k=>c.media.deleteFile(k.path)),_=e??(Array.isArray(x.data)?x.data:[])??[],C=QAe(_,{baseUrl:f}),j=a+JSON.stringify(C);return m.jsx(tTe,{getUploadInfo:E,handleDelete:N,autoUpload:!0,initialItems:C,footer:i&&"setSize"in x&&m.jsx(pTe,{items:C.length,length:Math.min((($=(A=x._data)==null?void 0:A[0])==null?void 0:$.body.meta.count)??0,C.length+h),onFirstVisible:()=>x.setSize(x.size+1)}),...o},a+j)}const pTe=({items:e=0,length:t=0,onFirstVisible:n})=>{const{ref:r,inViewport:s}=g1e(),[i,o]=w.useState(0),a=w.useRef(-1);return w.useEffect(()=>{s&&e>a.current&&(a.current=e,o(u=>u+1),n())},[s]),t-e<=0?null:new Array(Math.max(t-e,0)).fill(0).map((u,f)=>m.jsx("div",{ref:f===0?r:void 0,className:"w-[49%] md:w-60 bg-muted aspect-square"},f))},p3={Dropzone:mTe,Preview:PW,useDropzone:m3,useDropzoneState:IW,useDropzoneFileState:c0};function DW(){const{config:e,schema:t,actions:n}=dt(),r={config:{patch:async i=>await n.set("media",i,!0)?(await n.reload(),!0):!1}};return{$media:{},config:e.media,schema:t.media,actions:r}}const Qp={},LD=(e,t)=>e.unstable_is?e.unstable_is(t):t===e,FD=e=>"init"in e,k_=e=>!!e.write,BD=e=>"v"in e||"e"in e,cv=e=>{if("e"in e)throw e.e;if((Qp?"production":void 0)!=="production"&&!("v"in e))throw new Error("[Bug] atom state is not initialized");return e.v},ow=new WeakMap,zD=e=>{var t;return aw(e)&&!!((t=ow.get(e))!=null&&t[0])},gTe=e=>{const t=ow.get(e);t!=null&&t[0]&&(t[0]=!1,t[1].forEach(n=>n()))},LW=(e,t)=>{let n=ow.get(e);if(!n){n=[!0,new Set],ow.set(e,n);const r=()=>{n[0]=!1};e.then(r,r)}n[1].add(t)},aw=e=>typeof(e==null?void 0:e.then)=="function",FW=(e,t,n)=>{n.p.has(e)||(n.p.add(e),t.then(()=>{n.p.delete(e)},()=>{n.p.delete(e)}))},M_=(e,t,n)=>{const r=n(e),s="v"in r,i=r.v;if(aw(t))for(const o of r.d.keys())FW(e,t,n(o));r.v=t,delete r.e,(!s||!Object.is(i,r.v))&&(++r.n,aw(i)&&gTe(i))},VD=(e,t,n)=>{var r;const s=new Set;for(const i of((r=n.get(e))==null?void 0:r.t)||[])n.has(i)&&s.add(i);for(const i of t.p)s.add(i);return s},yTe=()=>{const e=new Set,t=()=>{e.forEach(n=>n())};return t.add=n=>(e.add(n),()=>{e.delete(n)}),t},I_=()=>{const e={},t=new WeakMap,n=r=>{var s,i;(s=t.get(e))==null||s.forEach(o=>o(r)),(i=t.get(r))==null||i.forEach(o=>o())};return n.add=(r,s)=>{const i=r||e,o=(t.has(i)?t:t.set(i,new Set)).get(i);return o.add(s),()=>{o==null||o.delete(s),o.size||t.delete(i)}},n},bTe=e=>(e.c||(e.c=I_()),e.m||(e.m=I_()),e.u||(e.u=I_()),e.f||(e.f=yTe()),e),vTe=Symbol(),xTe=(e=new WeakMap,t=new WeakMap,n=new WeakMap,r=new Set,s=new Set,i=new Set,o={},a=(p,...y)=>p.read(...y),c=(p,...y)=>p.write(...y),u=(p,y)=>{var v;return(v=p.unstable_onInit)==null?void 0:v.call(p,y)},f=(p,y)=>{var v;return(v=p.onMount)==null?void 0:v.call(p,y)},...h)=>{const p=h[0]||(k=>{if((Qp?"production":void 0)!=="production"&&!k)throw new Error("Atom is undefined or null");let R=e.get(k);return R||(R={d:new Map,p:new Set,n:0},e.set(k,R),u==null||u(k,$)),R}),y=h[1]||(()=>{const k=[],R=B=>{try{B()}catch(z){k.push(z)}};do{o.f&&R(o.f);const B=new Set,z=B.add.bind(B);r.forEach(D=>{var L;return(L=t.get(D))==null?void 0:L.l.forEach(z)}),r.clear(),i.forEach(z),i.clear(),s.forEach(z),s.clear(),B.forEach(R),r.size&&v()}while(r.size||i.size||s.size);if(k.length)throw new AggregateError(k)}),v=h[2]||(()=>{const k=[],R=new WeakSet,B=new WeakSet,z=Array.from(r);for(;z.length;){const D=z[z.length-1],L=p(D);if(B.has(D)){z.pop();continue}if(R.has(D)){if(n.get(D)===L.n)k.push([D,L]);else if((Qp?"production":void 0)!=="production"&&n.has(D))throw new Error("[Bug] invalidated atom exists");B.add(D),z.pop();continue}R.add(D);for(const H of VD(D,L,t))R.has(H)||z.push(H)}for(let D=k.length-1;D>=0;--D){const[L,H]=k[D];let M=!1;for(const V of H.d.keys())if(V!==L&&r.has(V)){M=!0;break}M&&(x(L),_(L)),n.delete(L)}}),x=h[3]||(k=>{var R;const B=p(k);if(BD(B)&&(t.has(k)&&n.get(k)!==B.n||Array.from(B.d).every(([I,P])=>x(I).n===P)))return B;B.d.clear();let z=!0;const D=()=>{t.has(k)&&(_(k),v(),y())},L=I=>{var P;if(LD(k,I)){const F=p(I);if(!BD(F))if(FD(I))M_(I,I.init,p);else throw new Error("no atom init");return cv(F)}const W=x(I);try{return cv(W)}finally{B.d.set(I,W.n),zD(B.v)&&FW(k,B.v,W),(P=t.get(I))==null||P.t.add(k),z||D()}};let H,M;const V={get signal(){return H||(H=new AbortController),H.signal},get setSelf(){return(Qp?"production":void 0)!=="production"&&!k_(k)&&console.warn("setSelf function cannot be used with read-only atom"),!M&&k_(k)&&(M=(...I)=>{if((Qp?"production":void 0)!=="production"&&z&&console.warn("setSelf function cannot be called in sync"),!z)try{return N(k,...I)}finally{v(),y()}}),M}},T=B.n;try{const I=a(k,L,V);return M_(k,I,p),aw(I)&&(LW(I,()=>H==null?void 0:H.abort()),I.then(D,D)),B}catch(I){return delete B.v,B.e=I,++B.n,B}finally{z=!1,T!==B.n&&n.get(k)===T&&(n.set(k,B.n),r.add(k),(R=o.c)==null||R.call(o,k))}}),E=h[4]||(k=>{const R=[k];for(;R.length;){const B=R.pop(),z=p(B);for(const D of VD(B,z,t)){const L=p(D);n.set(D,L.n),R.push(D)}}}),N=h[5]||((k,...R)=>{let B=!0;const z=L=>cv(x(L)),D=(L,...H)=>{var M;const V=p(L);try{if(LD(k,L)){if(!FD(L))throw new Error("atom not writable");const T=V.n,I=H[0];M_(L,I,p),_(L),T!==V.n&&(r.add(L),(M=o.c)==null||M.call(o,L),E(L));return}else return N(L,...H)}finally{B||(v(),y())}};try{return c(k,z,D,...R)}finally{B=!1}}),_=h[6]||(k=>{var R;const B=p(k),z=t.get(k);if(z&&!zD(B.v)){for(const[D,L]of B.d)if(!z.d.has(D)){const H=p(D);C(D).t.add(k),z.d.add(D),L!==H.n&&(r.add(D),(R=o.c)==null||R.call(o,D),E(D))}for(const D of z.d||[])if(!B.d.has(D)){z.d.delete(D);const L=j(D);L==null||L.t.delete(k)}}}),C=h[7]||(k=>{var R;const B=p(k);let z=t.get(k);if(!z){x(k);for(const D of B.d.keys())C(D).t.add(k);if(z={l:new Set,d:new Set(B.d.keys()),t:new Set},t.set(k,z),(R=o.m)==null||R.call(o,k),k_(k)){const D=()=>{let L=!0;const H=(...M)=>{try{return N(k,...M)}finally{L||(v(),y())}};try{const M=f(k,H);M&&(z.u=()=>{L=!0;try{M()}finally{L=!1}})}finally{L=!1}};s.add(D)}}return z}),j=h[8]||(k=>{var R;const B=p(k);let z=t.get(k);if(z&&!z.l.size&&!Array.from(z.t).some(D=>{var L;return(L=t.get(D))==null?void 0:L.d.has(k)})){z.u&&i.add(z.u),z=void 0,t.delete(k),(R=o.u)==null||R.call(o,k);for(const D of B.d.keys()){const L=j(D);L==null||L.t.delete(k)}return}return z}),A=[e,t,n,r,s,i,o,a,c,u,f,p,y,v,x,E,N,_,C,j],$={get:k=>cv(x(k)),set:(k,...R)=>{try{return N(k,...R)}finally{v(),y()}},sub:(k,R)=>{const z=C(k).l;return z.add(R),y(),()=>{z.delete(R),j(k),y()}}};return Object.defineProperty($,vTe,{value:A}),$},BW=xTe,wTe=bTe,UD=LW,g3={};let STe=0;function Bh(e,t){const n=`atom${++STe}`,r={toString(){return(g3?"production":void 0)!=="production"&&this.debugLabel?n+":"+this.debugLabel:n}};return typeof e=="function"?r.read=e:(r.init=e,r.read=ETe,r.write=NTe),t&&(r.write=t),r}function ETe(e){return e(this)}function NTe(e,t,n){return t(this,typeof n=="function"?n(e(this)):n)}const _Te=()=>{let e=0;const t=wTe({}),n=new WeakMap,r=new WeakMap,s=BW(n,r,void 0,void 0,void 0,void 0,t,void 0,(a,c,u,...f)=>e?u(a,...f):a.write(c,u,...f)),i=new Set;return t.m.add(void 0,a=>{i.add(a);const c=n.get(a);c.m=r.get(a)}),t.u.add(void 0,a=>{i.delete(a);const c=n.get(a);delete c.m}),Object.assign(s,{dev4_get_internal_weak_map:()=>n,dev4_get_mounted_atoms:()=>i,dev4_restore_atoms:a=>{const c={read:()=>null,write:(u,f)=>{++e;try{for(const[h,p]of a)"init"in h&&f(h,p)}finally{--e}}};s.set(c)}})};function CTe(){return(g3?"production":void 0)!=="production"?_Te():BW()}let Up;function zW(){return Up||(Up=CTe(),(g3?"production":void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=Up),globalThis.__JOTAI_DEFAULT_STORE__!==Up&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),Up}const OTe={},jTe=w.createContext(void 0);function VW(e){return w.useContext(jTe)||zW()}const UW=e=>typeof(e==null?void 0:e.then)=="function",ATe=e=>{e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t})},TTe=je.use||(e=>{if(e.status==="pending")throw e;if(e.status==="fulfilled")return e.value;throw e.status==="rejected"?e.reason:(ATe(e),e)}),P_=new WeakMap,$Te=(e,t)=>{let n=P_.get(e);return n||(n=new Promise((r,s)=>{let i=e;const o=u=>f=>{i===u&&r(f)},a=u=>f=>{i===u&&s(f)},c=()=>{try{const u=t();UW(u)?(P_.set(u,n),i=u,u.then(o(u),a(u)),UD(u,c)):r(u)}catch(u){s(u)}};e.then(o(e),a(e)),UD(e,c)}),P_.set(e,n)),n};function y3(e,t){const n=VW(),[[r,s,i],o]=w.useReducer(u=>{const f=n.get(e);return Object.is(u[0],f)&&u[1]===n&&u[2]===e?u:[f,n,e]},void 0,()=>[n.get(e),n,e]);let a=r;if((s!==n||i!==e)&&(o(),a=n.get(e)),w.useEffect(()=>{const u=n.sub(e,()=>{o()});return o(),u},[n,e,void 0]),w.useDebugValue(a),UW(a)){const u=$Te(a,()=>n.get(e));return TTe(u)}return a}function b3(e,t){const n=VW();return w.useCallback((...s)=>{if((OTe?"production":void 0)!=="production"&&!("write"in e))throw new Error("not writable atom");return n.set(e,...s)},[n,e])}function Nm(e,t){return[y3(e),b3(e)]}const v3={},RTe=Symbol((v3?"production":void 0)!=="production"?"RESET":""),D_=(e,t,n)=>(t.has(n)?t:t.set(n,e())).get(n),kTe=new WeakMap,MTe=(e,t,n,r)=>{const s=D_(()=>new WeakMap,kTe,t),i=D_(()=>new WeakMap,s,n);return D_(e,i,r)};function u0(e,t,n=Object.is){return MTe(()=>{const r=Symbol(),s=([o,a])=>{if(a===r)return t(o);const c=t(o,a);return n(a,c)?a:c},i=Bh(o=>{const a=o(i),c=o(e);return s([c,a])});return i.init=r,i},e,t,n)}const ITe=e=>typeof(e==null?void 0:e.then)=="function";function PTe(e=()=>{try{return window.localStorage}catch(n){(v3?"production":void 0)!=="production"&&typeof window<"u"&&console.warn(n);return}},t){var n;let r,s;const i={getItem:(c,u)=>{var f,h;const p=v=>{if(v=v||"",r!==v){try{s=JSON.parse(v,t==null?void 0:t.reviver)}catch{return u}r=v}return s},y=(h=(f=e())==null?void 0:f.getItem(c))!=null?h:null;return ITe(y)?y.then(p):p(y)},setItem:(c,u)=>{var f;return(f=e())==null?void 0:f.setItem(c,JSON.stringify(u,void 0))},removeItem:c=>{var u;return(u=e())==null?void 0:u.removeItem(c)}},o=c=>(u,f,h)=>c(u,p=>{let y;try{y=JSON.parse(p||"")}catch{y=h}f(y)});let a;try{a=(n=e())==null?void 0:n.subscribe}catch{}return!a&&typeof window<"u"&&typeof window.addEventListener=="function"&&window.Storage&&(a=(c,u)=>{if(!(e()instanceof window.Storage))return()=>{};const f=h=>{h.storageArea===e()&&h.key===c&&u(h.newValue)};return window.addEventListener("storage",f),()=>{window.removeEventListener("storage",f)}}),a&&(i.subscribe=o(a)),i}const DTe=PTe();function LTe(e,t,n=DTe,r){const s=Bh(t);return(v3?"production":void 0)!=="production"&&(s.debugPrivate=!0),s.onMount=o=>{o(n.getItem(e,t));let a;return n.subscribe&&(a=n.subscribe(e,o,t)),a},Bh(o=>o(s),(o,a,c)=>{const u=typeof c=="function"?c(o(s)):c;return u===RTe?(a(s,t),n.removeItem(e)):u instanceof Promise?u.then(f=>(a(s,f),n.setItem(e,f))):(a(s,u),n.setItem(e,u))})}const FTe={AdditionalItemsError:"Array at `{{pointer}}` may not have an additional item `{{key}}`",AdditionalPropertiesError:"Additional property `{{property}}` on `{{pointer}}` does not match schema `{{schema}}`",AllOfError:"Value `{{value}}` at `{{pointer}}` does not match schema of `{{allOf}}`",AnyOfError:"Value `{{value}}` at `{{pointer}}` does not match any schema of `{{anyOf}}`",ConstError:"Expected value at `{{pointer}}` to be `{{expected}}`, but value given is `{{value}}`",containsAnyError:"The array at `{{pointer}}` must contain at least one item",ContainsArrayError:"The property at `{{pointer}}` must not be an array",ContainsError:"The array at `{{pointer}}` must contain an element that matches `{{schema}}`",ContainsMinError:"The array at `{{pointer}}` contains {{delta}} too few items matching `{{schema}}`",ContainsMaxError:"The array at `{{pointer}}` contains {{delta}} too many items matching `{{schema}}`",EnumError:"Expected given value `{{value}}` in `{{pointer}}` to be one of `{{values}}`",ForbiddenPropertyError:"Property name `{{property}}` at `{{pointer}}` is not allowed",FormatDateError:"Value `{{value}}` at `{{pointer}}` is not a valid date",FormatDateTimeError:"Value `{{value}}` at `{{pointer}}` is not a valid date-time",FormatDurationError:"Value `{{value}}` at `{{pointer}}` is not a valid duration",FormatEmailError:"Value `{{value}}` at `{{pointer}}` is not a valid email",FormatHostnameError:"Value `{{value}}` at `{{pointer}}` is not a valid hostname",FormatIPV4Error:"Value `{{value}}` at `{{pointer}}` is not a valid IPv4 address",FormatIPV4LeadingZeroError:"IPv4 addresses starting with zero are invalid, since they are interpreted as octals",FormatIPV6Error:"Value `{{value}}` at `{{pointer}}` is not a valid IPv6 address",FormatIPV6LeadingZeroError:"IPv6 addresses starting with zero are invalid, since they are interpreted as octals",FormatJsonPointerError:"Value `{{value}}` at `{{pointer}}` is not a valid json-pointer",FormatRegExError:"Value `{{value}}` at `{{pointer}}` is not a valid regular expression",FormatTimeError:"Value `{{value}}` at `{{pointer}}` is not a valid time",FormatURIError:"Value `{{value}}` at `{{pointer}}` is not a valid uri",FormatURIReferenceError:"Value `{{value}}` at `{{pointer}}` is not a valid uri-reference",FormatURITemplateError:"Value `{{value}}` at `{{pointer}}` is not a valid uri-template",FormatURLError:"Value `{{value}}` at `{{pointer}}` is not a valid url",FormatUUIDError:"Value `{{value}}` at `{{pointer}}` is not a valid uuid",InvalidDataError:"No value may be specified in `{{pointer}}`",InvalidPropertyNameError:"Invalid property name `{{property}}` at `{{pointer}}`",MaximumError:"Value in `{{pointer}}` is `{{length}}`, but should be `{{maximum}}` at maximum",MaxItemsError:"Too many items in `{{pointer}}`, should be `{{maximum}}` at most, but got `{{length}}`",MaxLengthError:"Value `{{pointer}}` should have a maximum length of `{{maxLength}}`, but got `{{length}}`.",MaxPropertiesError:"Too many properties in `{{pointer}}`, should be `{{maxProperties}}` at most, but got `{{length}}`",MinimumError:"Value in `{{pointer}}` is `{{length}}`, but should be `{{minimum}}` at minimum",MinItemsError:"Too few items in `{{pointer}}`, should be at least `{{minItems}}`, but got `{{length}}`",MinItemsOneError:"At least one item is required in `{{pointer}}`",MinLengthError:"Value `{{pointer}}` should have a minimum length of `{{minLength}}`, but got `{{length}}`.",MinLengthOneError:"A value is required in `{{pointer}}`",MinPropertiesError:"Too few properties in `{{pointer}}`, should be at least `{{minProperties}}`, but got `{{length}}`",MissingDependencyError:"The required propery '{{missingProperty}}' in `{{pointer}}` is missing",MissingOneOfPropertyError:"Value at `{{pointer}}` property: `{{property}}`",MultipleOfError:"Expected `{{value}}` in `{{pointer}}` to be multiple of `{{multipleOf}}`",MultipleOneOfError:"Value `{{value}}` should not match multiple schemas in oneOf `{{matches}}`",NoAdditionalPropertiesError:"Additional property `{{property}}` in `{{pointer}}` is not allowed",NotError:"Value `{{value}}` at pointer should not match schema `{{not}}`",OneOfError:"Value `{{value}}` in `{{pointer}}` does not match any given oneof schema",OneOfPropertyError:"Failed finding a matching oneOfProperty schema in `{{pointer}}` where `{{property}}` matches `{{value}}`",PatternError:"Value in `{{pointer}}` should match `{{description}}`, but received `{{received}}`",PatternPropertiesError:"Property `{{key}}` does not match any patterns in `{{pointer}}`. Valid patterns are: {{patterns}}",RequiredPropertyError:"The required property `{{key}}` is missing at `{{pointer}}`",SchemaWarning:"Failed retrieving a schema from '{{pointer}}' to key '{{key}}'",TypeError:"Expected `{{value}}` ({{received}}) in `{{pointer}}` to be of type `{{expected}}`",UndefinedValueError:"Value must not be undefined in `{{pointer}}`",UnevaluatedPropertyError:"Invalid unevaluated property `{{pointer}}`",UnevaluatedItemsError:"Invalid unevaluated item `{{pointer}}`",UniqueItemsError:"Items in array must be unique. Value `{{value}}` in `{{pointer}}` is a duplicate of {{duplicatePointer}}.",UnknownPropertyError:"Could not find a valid schema for property `{{pointer}}` within object",ValueNotEmptyError:"A value for `{{property}}` is required at `{{pointer}}`"},BTe=Object.prototype.toString;function Rt(e){const t=BTe.call(e).match(/\s([^\]]+)\]/).pop().toLowerCase();return t==="file"?"object":t}const zTe="object",VTe="array";function UTe(e,t={}){return e.replace(/\{\{\w+\}\}/g,n=>{const r=n.replace(/[{}]/g,""),s=t[r],i=Rt(s);return i===zTe||i===VTe?JSON.stringify(s):s})}function qTe(e,t,n=e){var r;const s=(r=FTe[e])!==null&&r!==void 0?r:n;return UTe(s,t)}function HTe(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function WTe(e,t){return{type:"error",name:e,code:HTe(e),message:qTe(e,t),data:t}}function Ze(e){return WTe.bind(null,e)}function oy(e,t=[]){for(let n=0;n<e.length;n+=1){const r=e[n];Array.isArray(r)?oy(r,t):t.push(r)}return t}const d0={DECLARATOR_ONEOF:"oneOfProperty",GET_TEMPLATE_RECURSION_LIMIT:1,propertyBlacklist:["_id"],templateDefaultOptions:{addOptionalProps:!1,removeInvalidData:!1,extendDefaults:!0}};function Vn(e){return(e==null?void 0:e.type)==="error"}function GTe(e){return e instanceof Promise}function lw(e){return Vn(e)||GTe(e)}function zt(e){return Rt(e)==="object"}const{DECLARATOR_ONEOF:Kf}=d0;function yg(e,t){zt(e)&&(e.__oneOfIndex=t)}function YTe(e,t){const{schema:n,draft:r,pointer:s}=e;if(t!=null&&n[Kf]){const a=[],c=n[Kf],u=t[n[Kf]];if(u===void 0)return r.errors.missingOneOfPropertyError({property:c,pointer:s,schema:n,value:t});for(let f=0;f<n.oneOf.length;f+=1){const h=e.next(n.oneOf[f]).resolveRef(),p=r.step(h,c,t);if(Vn(p))return p;let y=oy(r.validate(p,u));if(y=y.filter(lw),y.length>0)a.push(...y);else return yg(h.schema,f),p.next(h.schema)}return r.errors.oneOfPropertyError({property:c,value:u,pointer:s,schema:n,errors:a})}const i=[],o=[];for(let a=0;a<n.oneOf.length;a+=1){const c=r.resolveRef(e.next(n.oneOf[a]));let u=oy(r.validate(c,t));u=u.filter(lw),u.length>0?o.push(...u):i.push({index:a,schema:c.schema})}return i.length===1?(yg(i[0].schema,i[0].index),e.next(i[0].schema)):i.length>1?r.errors.multipleOneOfError({value:t,pointer:s,schema:n,matches:i}):r.errors.oneOfError({value:JSON.stringify(t),pointer:s,schema:n,oneOf:n.oneOf,errors:o})}function JTe(e,t){const{draft:n,schema:r,pointer:s}=e;if(t==null||r.properties==null)return-1;let i=0;const o=Object.keys(r.properties);for(let a=0;a<o.length;a+=1){const c=o[a];t[c]&&n.isValid(t[c],r.properties[c],s)&&(i+=1)}return i}function x3(e,t){const{schema:n,pointer:r,draft:s}=e;if(!Array.isArray(n.oneOf))throw new Error("not a oneof schema");if(t!=null&&n[Kf]){const o=[],a=n[Kf],c=t[n[Kf]];if(c===void 0)return s.errors.missingOneOfPropertyError({property:a,pointer:r,schema:n,value:t});for(let u=0;u<n.oneOf.length;u+=1){const f=s.resolveRef(e.next(n.oneOf[u])),h=s.step(f,a,t);if(Vn(h))return h;let p=oy(s.validate(h,c));if(p=p.filter(lw),p.length>0)o.push(...p);else return yg(f.schema,u),h.next(f.schema)}return s.errors.oneOfPropertyError({property:a,value:c,pointer:r,schema:n,errors:o})}const i=[];for(let o=0;o<n.oneOf.length;o+=1){const c=s.resolveRef(e.next(n.oneOf[o])).schema;s.isValid(t,c,r)&&i.push({schema:c,index:o})}if(i.length===1)return yg(i[0].schema,i[0].index),e.next(i[0].schema);if(zt(t)){let o,a=-1,c=0;for(let u=0;u<n.oneOf.length;u+=1){const f=s.resolveRef(e.next(n.oneOf[u])),h=JTe(f,t);c<h&&(c=h,o=f.schema,a=u)}return o===void 0?s.errors.oneOfError({value:JSON.stringify(t),pointer:r,schema:n,oneOf:n.oneOf}):(yg(o,a),e.next(o))}return i.length>1?s.errors.multipleOneOfError({matches:i,pointer:r,schema:n,value:t}):s.errors.oneOfError({value:JSON.stringify(t),pointer:r,schema:n,oneOf:n.oneOf})}const XTe=(e,t)=>{if(Array.isArray(e.schema.oneOf)){const n=e.draft.resolveOneOf(e,t);if(Vn(n))return n}};function ts(e,t,...n){if((t==null?void 0:t.type)==="error")return t;if((e==null?void 0:e.type)==="error")return e;const r=Rt(e),s=Rt(t);if(r!==s)return e;const i=Hv(e,t);for(let o=0;o<n.length;o+=1)delete i[n[o]];return i}function Hv(e,t,n){var r;if(zt(e)&&zt(t)){const s={};return[...Object.keys(e),...Object.keys(t)].filter((i,o,a)=>a.indexOf(i)===o).forEach(i=>s[i]=Hv(e[i],t[i],i)),s}if(Array.isArray(e)&&Array.isArray(t)){if(n==="required")return e.concat(t).filter((o,a,c)=>c.indexOf(o)===a);if(n==="items"){const o=[];for(let a=0;a<t.length;a+=1)zt(e[a])&&zt(t[a])&&e[a].type===t[a].type?o[a]=Hv(e[a],t[a]):o.push((r=t[a])!==null&&r!==void 0?r:e[a]);return o}const s=[],i=[];for(let o=0;o<Math.max(e.length,t.length);o+=1)zt(e[o])&&zt(t[o])?s[o]=Hv(e[o],t[o]):e[o]!==void 0&&t[o]!==void 0?(s[o]=e[o],i.push(t[o])):e[o]!==void 0?s[o]=e[o]:t[o]!==void 0&&i.push(t[o]);return[...s,...i].filter((o,a,c)=>c.indexOf(o)===a)}return Array.isArray(t)?t:Array.isArray(e)?e:t!==void 0?t:e}function uj(e,...t){const n={};return Object.keys(e).forEach(r=>{t.includes(r)||(n[r]=e[r])}),n}function ES(e,t){if(e.schema.if!=null){if(e.schema.if===!1)return e.next(e.schema.else);if(e.schema.if&&(e.schema.then||e.schema.else)){const n=e.draft.resolveRef(e.next(e.schema.if)),r=e.draft.validate(n,t);if(r.length===0&&e.schema.then){const s=e.next(e.schema.then);return e.draft.resolveRef(s)}if(r.length!==0&&e.schema.else){const s=e.next(e.schema.else);return e.draft.resolveRef(s)}}}}const KTe=(e,t)=>{const n=ES(e,t);if(n)return e.draft.validate(n,t)};function qW(e){return{...e}}function HW(e,t){const n=ES(e,t);if(n)return n;const r=qW(e.schema);return e.next(uj(r,"if","then","else"))}function QTe(e,t){const{schema:n}=e;let r=qW(n);for(let s=0;s<n.allOf.length;s+=1){const i=e.next(n.allOf[s]).resolveRef(),o=HW(i,t).schema;r=ts(r,o)}return delete r.allOf,e.next(r)}function WW(e,t){const{allOf:n}=t;if(!Array.isArray(n)||n.length===0)return;let r={};return n.forEach(s=>{if(s==null)return;const i=e.createNode(s).resolveRef();r=ts(r,i.schema)}),r}const ZTe=(e,t)=>{const{draft:n,schema:r}=e,{allOf:s}=r;if(!Array.isArray(s)||s.length===0)return;const i=[];return r.allOf.forEach(o=>{i.push(...n.validate(e.next(o),t))}),i};function e$e(e,...t){if(e==null)throw new Error("undefined schema");const n=this,r=ts(n.schema,e,...t);return{...n,schema:r,path:[...n.path,[n.pointer,n.schema]]}}function t$e(){const e=this;return e.draft.resolveRef(e)}function n$e(e,t){if(Vn(e))return e;if(e==null)throw new Error("undefined schema");if(!zt(e)&&Rt(e)!=="boolean")throw new Error(`bad schema type ${Rt(e)}`);const n=this;return{...n,pointer:t?`${n.pointer}/${t}`:n.pointer,schema:e,path:[...n.path,[n.pointer,n.schema]]}}function Gi(e){return zt(e)&&e.next&&e.path&&e.draft}function r$e(e,t,n="#"){return{draft:e,pointer:n,schema:t,path:[],next:n$e,merge:e$e,resolveRef:t$e}}function s$e(e){const t=e.path;let n=0;for(let s=t.length-1;s>=0;s--){const i=t[s][1];if(i.$id&&/^https?:\/\//.test(i.$id)&&i.$recursiveAnchor!==!0){n=s;break}}const r=t.find((s,i)=>i>=n&&s[1].$recursiveAnchor===!0);if(r)return e.next(r[1]);for(let s=t.length-1;s>=0;s--){const i=t[s][1];if(i.$id)return e.next(i)}return e.next(e.draft.rootSchema)}function GW(e){if(!Gi(e))throw new Error("expected node");if(e.schema==null)return e;if(e.schema.$recursiveRef)return GW(s$e(e));if(e.schema.$ref==null)return e;const t=e.draft.rootSchema.getRef(e.schema);return t===!1?e.next(t):e.merge(t,"$ref")}function i$e(e){return e.filter((t,n)=>e.indexOf(t)===n)}function YW(e,t){var n;const{schema:r}=e,s=(n=r.dependencies)!==null&&n!==void 0?n:r.dependentSchemas;if(!zt(s)||!zt(t))return;let i=!1,o={required:[]};if(Object.keys(s).forEach(a=>{var c,u;if(t[a]==null&&!(!((c=r.required)===null||c===void 0)&&c.includes(a)||!((u=o.required)===null||u===void 0)&&u.includes(a)))return;const f=s[a];if(Array.isArray(f)){i=!0,o.required.push(...f);return}if(zt(f)){i=!0;const h=e.next(f).resolveRef();o=ts(o,h.schema);return}}),i)return o.required=i$e(o.required),o}const o$e=(e,t)=>{const{draft:n,schema:r,pointer:s}=e,i=r.dependentRequired;if(!zt(i))return;const o=[];return Object.keys(t).forEach(a=>{const c=i[a];if(c!==!0){if(c===!1){o.push(n.errors.missingDependencyError({pointer:s,schema:r,value:t}));return}if(Array.isArray(c))for(let u=0,f=c.length;u<f;u+=1)t[c[u]]===void 0&&o.push(n.errors.missingDependencyError({missingProperty:c[u],pointer:s,schema:r,value:t}))}}),o},a$e=(e,t)=>{const{draft:n,schema:r,pointer:s}=e,i=r.dependentSchemas;if(!zt(i))return;const o=[];return Object.keys(t).forEach(a=>{const c=i[a];if(c!==!0){if(c===!1){o.push(n.errors.missingDependencyError({pointer:s,schema:r,value:t}));return}zt(c)&&n.validate(e.next(c),t).map(u=>o.push(u))}}),o},l$e=(e,t)=>{const{draft:n,schema:r,pointer:s}=e,i=r.dependencies;if(!zt(i))return;const o=[];return Object.keys(t).forEach(a=>{if(i[a]===void 0||i[a]===!0)return;if(i[a]===!1){o.push(n.errors.missingDependencyError({pointer:s,schema:r,value:t}));return}let c;const u=Rt(i[a]),f=i[a];if(Array.isArray(f))c=f.filter(h=>t[h]===void 0).map(h=>n.errors.missingDependencyError({missingProperty:h,pointer:s,schema:r,value:t}));else if(u==="object")c=n.validate(e.next(i[a]),t);else throw new Error(`Invalid dependency definition for ${s}/${a}. Must be string[] or schema`);o.push(...c)}),o.length>0?o:void 0};function JW(e,t){const{draft:n,schema:r}=e;if(!Array.isArray(r.anyOf)||r.anyOf.length===0)return;let s;if(r.anyOf.forEach(i=>{const o=n.resolveRef(e.next(i));n.validate(o,t).length===0&&(s=s?ts(s,o.schema):o.schema)}),s)return e.next(s)}function c$e(e,t){const{anyOf:n}=e.schema;if(!Array.isArray(n)||n.length===0)return e;const r=JW(e,t);if(r){const{pointer:s,schema:i}=e;return e.draft.errors.anyOfError({pointer:s,schema:i,value:t,anyOf:JSON.stringify(n)})}return e.merge(r.schema,"anyOf")}const u$e=(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if(!(!Array.isArray(r.anyOf)||r.anyOf.length===0)){for(let i=0;i<r.anyOf.length;i+=1){const o=n.resolveRef(e.next(r.anyOf[i]));if(n.validate(o,t).length===0)return}return n.errors.anyOfError({pointer:s,schema:r,value:t,anyOf:r.anyOf})}},qD=["allOf","anyOf","oneOf","dependencies","if","then","else"],d$e=["allOf","anyOf","oneOf","dependencies","if"];function f$e(e){const t=Object.keys(e);return d$e.findIndex(n=>t.includes(n))!==-1}function dj(e,t){let n,r;const s=e.draft.resolveRef(e),{draft:i}=s,o=Gi(s)?s.schema:s;if(o.oneOf){const p=x3(s,t);Vn(p)?r=p:p&&(n=ts(n??{},p.schema))}if(Array.isArray(o.allOf)){const p=o.allOf.map(y=>{if(f$e(y)){const v=dj(s.next(y),t);if(v==null||Vn(v))return v;const x=ts(y,v.schema);return uj(x,...qD)}return y});if(p.length>0){const y=WW(i,{allOf:p});n=ts(n??{},y)}}const a=JW(s,t);a&&a.schema&&(n=ts(n??{},a.schema));const c=YW(s,t);c&&(n=ts(n??{},c));const u=ES(s,t);if(Gi(u)&&(n=ts(n??{},u.schema)),n==null)return r;if(Vn(n))return n;const f=dj(s.next(n),t);Gi(f)&&(n=ts(n,f.schema));const h=uj(n,...qD);return s.next(h)}const h$e=["allOf","anyOf","oneOf","dependencies","if","then","else"];function cw(e,t){const n=dj(e,t);return Gi(n)?e.merge(n.schema,...h$e):n||e}var m$e=Function.prototype.toString,L_=Object.create,p$e=Object.prototype.toString,g$e=function(){function e(){this._keys=[],this._values=[]}return e.prototype.has=function(t){return!!~this._keys.indexOf(t)},e.prototype.get=function(t){return this._values[this._keys.indexOf(t)]},e.prototype.set=function(t,n){this._keys.push(t),this._values.push(n)},e}();function y$e(){return new g$e}function b$e(){return new WeakMap}var v$e=typeof WeakMap<"u"?b$e:y$e;function w3(e){if(!e)return L_(null);var t=e.constructor;if(t===Object)return e===Object.prototype?{}:L_(e);if(t&&~m$e.call(t).indexOf("[native code]"))try{return new t}catch{}return L_(e)}function x$e(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}function w$e(e){return e.flags}var S$e=/test/g.flags==="g"?w$e:x$e;function XW(e){var t=p$e.call(e);return t.substring(8,t.length-1)}function E$e(e){return e[Symbol.toStringTag]||XW(e)}var N$e=typeof Symbol<"u"?E$e:XW,_$e=Object.defineProperty,C$e=Object.getOwnPropertyDescriptor,KW=Object.getOwnPropertyNames,S3=Object.getOwnPropertySymbols,QW=Object.prototype,ZW=QW.hasOwnProperty,O$e=QW.propertyIsEnumerable,eG=typeof S3=="function";function j$e(e){return KW(e).concat(S3(e))}var A$e=eG?j$e:KW;function NS(e,t,n){for(var r=A$e(e),s=0,i=r.length,o=void 0,a=void 0;s<i;++s)if(o=r[s],!(o==="callee"||o==="caller")){if(a=C$e(e,o),!a){t[o]=n.copier(e[o],n);continue}!a.get&&!a.set&&(a.value=n.copier(a.value,n));try{_$e(t,o,a)}catch{t[o]=a.value}}return t}function T$e(e,t){var n=new t.Constructor;t.cache.set(e,n);for(var r=0,s=e.length;r<s;++r)n[r]=t.copier(e[r],t);return n}function $$e(e,t){var n=new t.Constructor;return t.cache.set(e,n),NS(e,n,t)}function tG(e,t){return e.slice(0)}function R$e(e,t){return e.slice(0,e.size,e.type)}function k$e(e,t){return new t.Constructor(tG(e.buffer))}function M$e(e,t){return new t.Constructor(e.getTime())}function nG(e,t){var n=new t.Constructor;return t.cache.set(e,n),e.forEach(function(r,s){n.set(s,t.copier(r,t))}),n}function I$e(e,t){return NS(e,nG(e,t),t)}function P$e(e,t){var n=w3(t.prototype);t.cache.set(e,n);for(var r in e)ZW.call(e,r)&&(n[r]=t.copier(e[r],t));return n}function D$e(e,t){var n=w3(t.prototype);t.cache.set(e,n);for(var r in e)ZW.call(e,r)&&(n[r]=t.copier(e[r],t));for(var s=S3(e),i=0,o=s.length,a=void 0;i<o;++i)a=s[i],O$e.call(e,a)&&(n[a]=t.copier(e[a],t));return n}var L$e=eG?D$e:P$e;function F$e(e,t){var n=w3(t.prototype);return t.cache.set(e,n),NS(e,n,t)}function F_(e,t){return new t.Constructor(e.valueOf())}function B$e(e,t){var n=new t.Constructor(e.source,S$e(e));return n.lastIndex=e.lastIndex,n}function Wv(e,t){return e}function rG(e,t){var n=new t.Constructor;return t.cache.set(e,n),e.forEach(function(r){n.add(t.copier(r,t))}),n}function z$e(e,t){return NS(e,rG(e,t),t)}var V$e=Array.isArray,E3=Object.assign,U$e=Object.getPrototypeOf||function(e){return e.__proto__},sG={array:T$e,arrayBuffer:tG,blob:R$e,dataView:k$e,date:M$e,error:Wv,map:nG,object:L$e,regExp:B$e,set:rG},q$e=E3({},sG,{array:$$e,map:I$e,object:F$e,set:z$e});function H$e(e){return{Arguments:e.object,Array:e.array,ArrayBuffer:e.arrayBuffer,Blob:e.blob,Boolean:F_,DataView:e.dataView,Date:e.date,Error:e.error,Float32Array:e.arrayBuffer,Float64Array:e.arrayBuffer,Int8Array:e.arrayBuffer,Int16Array:e.arrayBuffer,Int32Array:e.arrayBuffer,Map:e.map,Number:F_,Object:e.object,Promise:Wv,RegExp:e.regExp,Set:e.set,String:F_,WeakMap:Wv,WeakSet:Wv,Uint8Array:e.arrayBuffer,Uint8ClampedArray:e.arrayBuffer,Uint16Array:e.arrayBuffer,Uint32Array:e.arrayBuffer,Uint64Array:e.arrayBuffer}}function iG(e){var t=E3({},sG,e),n=H$e(t),r=n.Array,s=n.Object;function i(o,a){if(a.prototype=a.Constructor=void 0,!o||typeof o!="object")return o;if(a.cache.has(o))return a.cache.get(o);if(a.prototype=U$e(o),a.Constructor=a.prototype&&a.prototype.constructor,!a.Constructor||a.Constructor===Object)return s(o,a);if(V$e(o))return r(o,a);var c=n[N$e(o)];return c?c(o,a):typeof o.then=="function"?o:s(o,a)}return function(a){return i(a,{Constructor:void 0,cache:v$e(),copier:i,prototype:void 0})}}function W$e(e){return iG(E3({},q$e,e))}W$e({});var fj=iG({});class G$e{constructor(t,n){this.remotes={},this.errors={},this.typeKeywords={},this.validateKeyword={},this.validateType={},this.validateFormat={},this.config=t,this.typeKeywords=fj(t.typeKeywords),this.validateKeyword=Object.assign({},t.validateKeyword),this.validateType=Object.assign({},t.validateType),this.validateFormat=Object.assign({},t.validateFormat),this.errors=Object.assign({},t.errors),this.setSchema(n)}get rootSchema(){return this.__rootSchema}set rootSchema(t){t!=null&&(this.__rootSchema=this.config.compileSchema(this,t))}addRemoteSchema(t,n){this.config.addRemoteSchema(this,t,n)}compileSchema(t){var n;return this.config.compileSchema(this,t,(n=this.rootSchema)!==null&&n!==void 0?n:t)}createSchemaOf(t){return this.config.createSchemaOf(t)}each(t,n,r,s){const i=this.createNode(r??this.rootSchema,s);return this.config.each(i,t,n)}eachSchema(t,n=this.rootSchema){return this.config.eachSchema(n,t)}getChildSchemaSelection(t,n){return this.config.getChildSchemaSelection(this,t,n)}getSchema(t){const n=this.getSchemaNode(t);return Gi(n)?n.schema:n}getSchemaNode(t){return this.config.getSchema(this,t)}getTemplate(t,n,r=this.config.templateDefaultOptions){return this.config.getTemplate(this,t,n,r)}isValid(t,n,r){return this.config.isValid(this,t,n,r)}createNode(t,n="#"){return this.config.createNode(this,t,n)}resolveAnyOf(t,n){return this.config.resolveAnyOf(t,n)}resolveAllOf(t,n){return this.config.resolveAllOf(t,n)}resolveRef(t){return this.config.resolveRef(t)}resolveOneOf(t,n){return this.config.resolveOneOf(t,n)}setSchema(t){this.rootSchema=t}step(t,n,r){return this.config.step(t,n,r)}validate(t,n=this.rootSchema,r){if(Gi(t)){const i=n,o=t;return this.config.validate(o,i)}if(Vn(t))return[t];const s=this.createNode(n,r);return this.config.validate(s,t)}}function Pf(e,t,n,r){const s=t[e];zt(s)&&Object.keys(s).forEach(i=>{Array.isArray(s[i])||(i==="$defs"?Pf("$defs",s[i],n,`${r}/${e}/$defs`):Ii(s[i],n,`${r}/${e}/${i}`))})}function uv(e,t,n,r){const s=t[e];Array.isArray(s)&&s.forEach((i,o)=>Ii(i,n,`${r}/${e}/${o}`))}function Ii(e,t,n=""){e!==void 0&&t(e,n)!==!0&&zt(e)&&(Pf("properties",e,t,n),Pf("patternProperties",e,t,n),Ii(e.not,t,`${n}/not`),Ii(e.additionalProperties,t,`${n}/additionalProperties`),Pf("dependencies",e,t,n),zt(e.items)&&Ii(e.items,t,`${n}/items`),uv("items",e,t,n),Ii(e.additionalItems,t,`${n}/additionalItems`),uv("allOf",e,t,n),uv("anyOf",e,t,n),uv("oneOf",e,t,n),Ii(e.if,t,`${n}/if`),Ii(e.then,t,`${n}/then`),Ii(e.else,t,`${n}/else`),Pf("definitions",e,t,n),Pf("$defs",e,t,n))}const Y$e=/(#)+$/,B_=/#$/,HD=/^[#/]+/,WD=/^[^:]+:\/\/[^/]+\//,J$e=/\/[^/]*$/,X$e=/#.*$/,K$e=/^urn:uuid:[0-9A-Fa-f]/;function GD(e,t){return e==null&&t==null?"#":t==null?e.replace(B_,""):K$e.test(t)?t:e==null||e===""||e==="#"?t.replace(B_,""):t[0]==="#"?`${e.replace(X$e,"")}${t.replace(Y$e,"")}`:WD.test(t)?t.replace(B_,""):WD.test(e)&&t.startsWith("/")?`${e.replace(/(^[^:]+:\/\/[^/]+)(.*)/,"$1")}/${t.replace(HD,"")}`:`${e.replace(J$e,"")}/${t.replace(HD,"")}`}var Gv={exports:{}},Q$e=Gv.exports,YD;function Z$e(){return YD||(YD=1,function(e,t){(function(n,r){e.exports=r()})(typeof self<"u"?self:Q$e,()=>(()=>{var n={d:(D,L)=>{for(var H in L)n.o(L,H)&&!n.o(D,H)&&Object.defineProperty(D,H,{enumerable:!0,get:L[H]})},o:(D,L)=>Object.prototype.hasOwnProperty.call(D,L),r:D=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(D,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(D,"__esModule",{value:!0})}},r={};function s(D){return D==="#"||D===""||Array.isArray(D)&&D.length===0||!1}n.r(r),n.d(r,{default:()=>z,get:()=>h,isRoot:()=>s,join:()=>R,remove:()=>j,removeUndefinedItems:()=>C,set:()=>E,split:()=>f,splitLast:()=>B});const i=/~1/g,o=/~0/g,a=/(^#?\/?)/g;function c(D){return D.replace(i,"/").replace(o,"~")}function u(D){return c(decodeURIComponent(D))}function f(D){if(D==null||typeof D!="string"||s(D))return Array.isArray(D)?D:[];const L=D.indexOf("#")>=0?u:c,H=(D=D.replace(a,"")).split("/");for(let M=0,V=H.length;M<V;M+=1)H[M]=L(H[M]);return H}function h(D,L,H=void 0){if(L==null||D==null)return H;if(s(L))return D;const M=p(D,f(L));return M===void 0?H:M}function p(D,L){const H=L.shift();if(D!==void 0)return H!==void 0?p(D[H],L):D}const y=/^\[.*\]$/,v=/^\[(.+)\]$/;function x(D,L){return D==="__proto__"||D=="constructor"&&L.length>0&&L[0]=="prototype"}function E(D,L,H){if(L==null)return D;const M=f(L);if(M.length===0)return D;D==null&&(D=y.test(M[0])?[]:{});let V,T,I=D;for(;M.length>1;)V=M.shift(),T=y.test(M[0]),x(V,M)||(I=_(I,V,T));return V=M.pop(),N(I,V,H),D}function N(D,L,H){let M;const V=L.match(v);L==="[]"&&Array.isArray(D)?D.push(H):V?(M=V.pop(),D[M]=H):D[L]=H}function _(D,L,H){var M,V;const T=(V=(M=L.match(v))===null||M===void 0?void 0:M.pop())!==null&&V!==void 0?V:L;if(D[T]!=null)return D[T];const I=H?[]:{};return N(D,L,I),I}function C(D){let L=0,H=0;for(;L+H<D.length;)D[L+H]===void 0&&(H+=1),D[L]=D[L+H],L+=1;return D.length=D.length-H,D}function j(D,L,H){const M=f(L),V=M.pop(),T=h(D,M);return T&&delete T[V],Array.isArray(T)&&H!==!0&&C(T),D}const A=/~/g,$=/\//g;function k(D,L){if(D.length===0)return L?"#":"";for(let H=0,M=D.length;H<M;H+=1)D[H]=D[H].replace(A,"~0").replace($,"~1"),L&&(D[H]=encodeURIComponent(D[H]));return(L?"#/":"/")+D.join("/")}function R(D,...L){const H=[];if(Array.isArray(D))return k(D,arguments[1]===!0);const M=arguments[arguments.length-1],V=typeof M=="boolean"?M:D&&D[0]==="#";for(let I=0,P=arguments.length;I<P;I+=1)H.push.apply(H,f(arguments[I]));const T=[];for(let I=0,P=H.length;I<P;I+=1)if(H[I]===".."){if(T.length===0)return V?"#":"";T.pop()}else T.push(H[I]);return k(T,V)}function B(D){const L=f(D);if(L.length===0)return typeof D=="string"&&D[0]==="#"?["#",L[0]]:["",void 0];if(L.length===1)return D[0]==="#"?["#",L[0]]:["",L[0]];const H=L.pop();return[R(L,D[0]==="#"),H]}const z={get:h,set:E,remove:j,join:R,split:f,splitLast:B,isRoot:s,removeUndefinedItems:C};return r})())}(Gv)),Gv.exports}var Nu=Z$e();const e3e=eo(Nu),z_=/(#)+$/g,t3e=["",null,"#"];function n3e(e){if(t3e.includes(e))return[];if(e=e.replace(z_,""),e.indexOf("#")===-1)return[e.replace(/(#|\/)+$/g,"")];if(e.indexOf("#")===0)return[e.replace(z_,"")];const t=e.split("#");return t[0]=t[0].replace(/(#|\/)+$/g,""),t[1]=`#${t[1].replace(z_,"")}`,t}const r3e=/(#)+$/g,s3e=e=>Rt(e)==="object";function fa(e,t,n){var r,s,i,o,a;let c;if(s3e(n)?c=n.__ref||n.$ref:c=n,c==null)return t;let u;const f=c.replace(r3e,"");if(e.remotes[f]!=null)return u=e.remotes[f],u&&u.$ref?fa(e,u,u):u;const h=(r=e.anchors)===null||r===void 0?void 0:r[c];if(h)return Nu.get(t,h);if(e.ids[c]!=null)return u=Nu.get(t,e.ids[c]),u&&u.$ref?fa(e,t,u):u;const p=c,y=n3e(c);if(y.length===0)return t;if(y.length===1){if(c=y[0],e.remotes[c]&&(u=e.remotes[c],u&&u.$ref))return fa(e,t,u);if(e.ids[c])return u=Nu.get(t,e.ids[c]),u&&u.$ref?fa(e,t,u):u;const v=(s=t.getContext)===null||s===void 0?void 0:s.call(t).ids[c];if(v)return fa(e,t,v)}if(y.length===2){const v=y[0];c=y[1];const x=(i=e.remotes[v])!==null&&i!==void 0?i:e.remotes[`${v}/`];if(x)return x.getContext&&x.getContext().anchors[p]!=null?x.getRef(p):x.getRef?x.getRef(c):fa(e,x,c);const E=(o=e.ids[v])!==null&&o!==void 0?o:e.ids[`${v}/`];if(E)return fa(e,Nu.get(t,E),c)}return u=Nu.get(t,(a=e.ids[c])!==null&&a!==void 0?a:c),u&&u.$ref?fa(e,t,u):u}function Na(e){if(e===void 0)return;const t={type:Rt(e)};return t.type==="object"&&zt(e)&&(t.properties={},Object.keys(e).forEach(n=>t.properties[n]=Na(e[n]))),t.type==="array"&&Array.isArray(e)&&(e.length===1?t.items=Na(e[0]):t.items=e.map(Na)),t}const i3e={additionalItemsError:Ze("AdditionalItemsError"),additionalPropertiesError:Ze("AdditionalPropertiesError"),allOfError:Ze("AllOfError"),anyOfError:Ze("AnyOfError"),constError:Ze("ConstError"),containsAnyError:Ze("ContainsAnyError"),containsArrayError:Ze("ContainsArrayError"),containsError:Ze("ContainsError"),containsMaxError:Ze("ContainsMaxError"),containsMinError:Ze("ContainsMinError"),enumError:Ze("EnumError"),forbiddenPropertyError:Ze("ForbiddenPropertyError"),formatDateError:Ze("FormatDateError"),formatDateTimeError:Ze("FormatDateTimeError"),formatDurationError:Ze("FormatDurationError"),formatEmailError:Ze("FormatEmailError"),formatHostnameError:Ze("FormatHostnameError"),formatIPV4Error:Ze("FormatIPV4Error"),formatIPV4LeadingZeroError:Ze("FormatIPV4LeadingZeroError"),formatIPV6Error:Ze("FormatIPV6Error"),formatIPV6LeadingZeroError:Ze("FormatIPV6LeadingZeroError"),formatJsonPointerError:Ze("FormatJsonPointerError"),formatRegExError:Ze("FormatRegExError"),formatTimeError:Ze("FormatTimeError"),formatURIError:Ze("FormatURIError"),formatURIReferenceError:Ze("FormatURIReferenceError"),formatURITemplateError:Ze("FormatURITemplateError"),formatURLError:Ze("FormatURLError"),formatUUIDError:Ze("FormatUUIDError"),invalidDataError:Ze("InvalidDataError"),invalidPropertyNameError:Ze("InvalidPropertyNameError"),invalidSchemaError:Ze("InvalidSchemaError"),invalidTypeError:Ze("InvalidTypeError"),maximumError:Ze("MaximumError"),maxItemsError:Ze("MaxItemsError"),maxLengthError:Ze("MaxLengthError"),maxPropertiesError:Ze("MaxPropertiesError"),minimumError:Ze("MinimumError"),minItemsError:Ze("MinItemsError"),minItemsOneError:Ze("MinItemsOneError"),minLengthError:Ze("MinLengthError"),minLengthOneError:Ze("MinLengthOneError"),minPropertiesError:Ze("MinPropertiesError"),missingDependencyError:Ze("MissingDependencyError"),missingOneOfPropertyError:Ze("MissingOneOfPropertyError"),multipleOfError:Ze("MultipleOfError"),multipleOneOfError:Ze("MultipleOneOfError"),noAdditionalPropertiesError:Ze("NoAdditionalPropertiesError"),notError:Ze("NotError"),oneOfError:Ze("OneOfError"),oneOfPropertyError:Ze("OneOfPropertyError"),patternError:Ze("PatternError"),patternPropertiesError:Ze("PatternPropertiesError"),requiredPropertyError:Ze("RequiredPropertyError"),schemaWarning:Ze("SchemaWarning"),typeError:Ze("TypeError"),undefinedValueError:Ze("UndefinedValueError"),unevaluatedItemsError:Ze("UnevaluatedItemsError"),unevaluatedPropertyError:Ze("UnevaluatedPropertyError"),uniqueItemsError:Ze("UniqueItemsError"),unknownPropertyError:Ze("UnknownPropertyError"),valueNotEmptyError:Ze("ValueNotEmptyError")};var V_={exports:{}},JD;function o3e(){return JD||(JD=1,function(e){(function(t){t.exports.is_uri=r,t.exports.is_http_uri=s,t.exports.is_https_uri=i,t.exports.is_web_uri=o,t.exports.isUri=r,t.exports.isHttpUri=s,t.exports.isHttpsUri=i,t.exports.isWebUri=o;var n=function(a){var c=a.match(/(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/);return c};function r(a){if(a&&!/[^a-z0-9\:\/\?\#\[\]\@\!\$\&\'\(\)\*\+\,\;\=\.\-\_\~\%]/i.test(a)&&!/%[^0-9a-f]/i.test(a)&&!/%[0-9a-f](:?[^0-9a-f]|$)/i.test(a)){var c=[],u="",f="",h="",p="",y="",v="";if(c=n(a),u=c[1],f=c[2],h=c[3],p=c[4],y=c[5],!!(u&&u.length&&h.length>=0)){if(f&&f.length){if(!(h.length===0||/^\//.test(h)))return}else if(/^\/\//.test(h))return;if(/^[a-z][a-z0-9\+\-\.]*$/.test(u.toLowerCase()))return v+=u+":",f&&f.length&&(v+="//"+f),v+=h,p&&p.length&&(v+="?"+p),y&&y.length&&(v+="#"+y),v}}}function s(a,c){if(r(a)){var u=[],f="",h="",p="",y="",v="",x="",E="";if(u=n(a),f=u[1],h=u[2],p=u[3],v=u[4],x=u[5],!!f){if(c){if(f.toLowerCase()!="https")return}else if(f.toLowerCase()!="http")return;if(h)return/:(\d+)$/.test(h)&&(y=h.match(/:(\d+)$/)[0],h=h.replace(/:\d+$/,"")),E+=f+":",E+="//"+h,y&&(E+=y),E+=p,v&&v.length&&(E+="?"+v),x&&x.length&&(E+="#"+x),E}}}function i(a){return s(a,!0)}function o(a){return s(a)||i(a)}})(e)}(V_)),V_.exports}var a3e=o3e();const XD=eo(a3e);var kr={},Yv={exports:{}},l3e=Yv.exports,KD;function c3e(){return KD||(KD=1,function(e){(function(t,n){e.exports?e.exports=n():t.nearley=n()})(l3e,function(){function t(u,f,h){return this.id=++t.highestId,this.name=u,this.symbols=f,this.postprocess=h,this}t.highestId=0,t.prototype.toString=function(u){var f=typeof u>"u"?this.symbols.map(c).join(" "):this.symbols.slice(0,u).map(c).join(" ")+"  "+this.symbols.slice(u).map(c).join(" ");return this.name+"  "+f};function n(u,f,h,p){this.rule=u,this.dot=f,this.reference=h,this.data=[],this.wantedBy=p,this.isComplete=this.dot===u.symbols.length}n.prototype.toString=function(){return"{"+this.rule.toString(this.dot)+"}, from: "+(this.reference||0)},n.prototype.nextState=function(u){var f=new n(this.rule,this.dot+1,this.reference,this.wantedBy);return f.left=this,f.right=u,f.isComplete&&(f.data=f.build(),f.right=void 0),f},n.prototype.build=function(){var u=[],f=this;do u.push(f.right.data),f=f.left;while(f.left);return u.reverse(),u},n.prototype.finish=function(){this.rule.postprocess&&(this.data=this.rule.postprocess(this.data,this.reference,o.fail))};function r(u,f){this.grammar=u,this.index=f,this.states=[],this.wants={},this.scannable=[],this.completed={}}r.prototype.process=function(u){for(var f=this.states,h=this.wants,p=this.completed,y=0;y<f.length;y++){var v=f[y];if(v.isComplete){if(v.finish(),v.data!==o.fail){for(var x=v.wantedBy,E=x.length;E--;){var N=x[E];this.complete(N,v)}if(v.reference===this.index){var _=v.rule.name;(this.completed[_]=this.completed[_]||[]).push(v)}}}else{var _=v.rule.symbols[v.dot];if(typeof _!="string"){this.scannable.push(v);continue}if(h[_]){if(h[_].push(v),p.hasOwnProperty(_))for(var C=p[_],E=0;E<C.length;E++){var j=C[E];this.complete(v,j)}}else h[_]=[v],this.predict(_)}}},r.prototype.predict=function(u){for(var f=this.grammar.byName[u]||[],h=0;h<f.length;h++){var p=f[h],y=this.wants[u],v=new n(p,0,this.index,y);this.states.push(v)}},r.prototype.complete=function(u,f){var h=u.nextState(f);this.states.push(h)};function s(u,f){this.rules=u,this.start=f||this.rules[0].name;var h=this.byName={};this.rules.forEach(function(p){h.hasOwnProperty(p.name)||(h[p.name]=[]),h[p.name].push(p)})}s.fromCompiled=function(p,f){var h=p.Lexer;p.ParserStart&&(f=p.ParserStart,p=p.ParserRules);var p=p.map(function(v){return new t(v.name,v.symbols,v.postprocess)}),y=new s(p,f);return y.lexer=h,y};function i(){this.reset("")}i.prototype.reset=function(u,f){this.buffer=u,this.index=0,this.line=f?f.line:1,this.lastLineBreak=f?-f.col:0},i.prototype.next=function(){if(this.index<this.buffer.length){var u=this.buffer[this.index++];return u===`
`&&(this.line+=1,this.lastLineBreak=this.index),{value:u}}},i.prototype.save=function(){return{line:this.line,col:this.index-this.lastLineBreak}},i.prototype.formatError=function(u,f){var h=this.buffer;if(typeof h=="string"){var p=h.split(`
`).slice(Math.max(0,this.line-5),this.line),y=h.indexOf(`
`,this.index);y===-1&&(y=h.length);var v=this.index-this.lastLineBreak,x=String(this.line).length;return f+=" at line "+this.line+" col "+v+`:

`,f+=p.map(function(N,_){return E(this.line-p.length+_+1,x)+" "+N},this).join(`
`),f+=`
`+E("",x+v)+`^
`,f}else return f+" at index "+(this.index-1);function E(N,_){var C=String(N);return Array(_-C.length+1).join(" ")+C}};function o(u,f,h){if(u instanceof s)var p=u,h=f;else var p=s.fromCompiled(u,f);this.grammar=p,this.options={keepHistory:!1,lexer:p.lexer||new i};for(var y in h||{})this.options[y]=h[y];this.lexer=this.options.lexer,this.lexerState=void 0;var v=new r(p,0);this.table=[v],v.wants[p.start]=[],v.predict(p.start),v.process(),this.current=0}o.fail={},o.prototype.feed=function(u){var f=this.lexer;f.reset(u,this.lexerState);for(var h;;){try{if(h=f.next(),!h)break}catch(k){var x=new r(this.grammar,this.current+1);this.table.push(x);var p=new Error(this.reportLexerError(k));throw p.offset=this.current,p.token=k.token,p}var y=this.table[this.current];this.options.keepHistory||delete this.table[this.current-1];var v=this.current+1,x=new r(this.grammar,v);this.table.push(x);for(var E=h.text!==void 0?h.text:h.value,N=f.constructor===i?h.value:h,_=y.scannable,C=_.length;C--;){var j=_[C],A=j.rule.symbols[j.dot];if(A.test?A.test(N):A.type?A.type===h.type:A.literal===E){var $=j.nextState({data:N,token:h,isToken:!0,reference:v-1});x.states.push($)}}if(x.process(),x.states.length===0){var p=new Error(this.reportError(h));throw p.offset=this.current,p.token=h,p}this.options.keepHistory&&(y.lexerState=f.save()),this.current++}return y&&(this.lexerState=f.save()),this.results=this.finish(),this},o.prototype.reportLexerError=function(u){var f,h,p=u.token;return p?(f="input "+JSON.stringify(p.text[0])+" (lexer error)",h=this.lexer.formatError(p,"Syntax error")):(f="input (lexer error)",h=u.message),this.reportErrorCommon(h,f)},o.prototype.reportError=function(u){var f=(u.type?u.type+" token: ":"")+JSON.stringify(u.value!==void 0?u.value:u),h=this.lexer.formatError(u,"Syntax error");return this.reportErrorCommon(h,f)},o.prototype.reportErrorCommon=function(u,f){var h=[];h.push(u);var p=this.table.length-2,y=this.table[p],v=y.states.filter(function(E){var N=E.rule.symbols[E.dot];return N&&typeof N!="string"});if(v.length===0)h.push("Unexpected "+f+`. I did not expect any more input. Here is the state of my parse table:
`),this.displayStateStack(y.states,h);else{h.push("Unexpected "+f+`. Instead, I was expecting to see one of the following:
`);var x=v.map(function(E){return this.buildFirstStateStack(E,[])||[E]},this);x.forEach(function(E){var N=E[0],_=N.rule.symbols[N.dot],C=this.getSymbolDisplay(_);h.push("A "+C+" based on:"),this.displayStateStack(E,h)},this)}return h.push(""),h.join(`
`)},o.prototype.displayStateStack=function(u,f){for(var h,p=0,y=0;y<u.length;y++){var v=u[y],x=v.rule.toString(v.dot);x===h?p++:(p>0&&f.push("    ^ "+p+" more lines identical to this"),p=0,f.push("    "+x)),h=x}},o.prototype.getSymbolDisplay=function(u){return a(u)},o.prototype.buildFirstStateStack=function(u,f){if(f.indexOf(u)!==-1)return null;if(u.wantedBy.length===0)return[u];var h=u.wantedBy[0],p=[u].concat(f),y=this.buildFirstStateStack(h,p);return y===null?null:[u].concat(y)},o.prototype.save=function(){var u=this.table[this.current];return u.lexerState=this.lexerState,u},o.prototype.restore=function(u){var f=u.index;this.current=f,this.table[f]=u,this.table.splice(f+1),this.lexerState=u.lexerState,this.results=this.finish()},o.prototype.rewind=function(u){if(!this.options.keepHistory)throw new Error("set option `keepHistory` to enable rewinding");this.restore(this.table[u])},o.prototype.finish=function(){var u=[],f=this.grammar.start,h=this.table[this.table.length-1];return h.states.forEach(function(p){p.rule.name===f&&p.dot===p.rule.symbols.length&&p.reference===0&&p.data!==o.fail&&u.push(p)}),u.map(function(p){return p.data})};function a(u){var f=typeof u;if(f==="string")return u;if(f==="object"){if(u.literal)return JSON.stringify(u.literal);if(u instanceof RegExp)return"character matching "+u;if(u.type)return u.type+" token";if(u.test)return"token matching "+String(u.test);throw new Error("Unknown symbol type: "+u)}}function c(u){var f=typeof u;if(f==="string")return u;if(f==="object"){if(u.literal)return JSON.stringify(u.literal);if(u instanceof RegExp)return u.toString();if(u.type)return"%"+u.type;if(u.test)return"<"+String(u.test)+">";throw new Error("Unknown symbol type: "+u)}}return{Parser:o,Grammar:s,Rule:t}})}(Yv)),Yv.exports}var dv={},QD;function u3e(){if(QD)return dv;QD=1,Object.defineProperty(dv,"__esModule",{value:!0});function e(s){return s[0]}const t=s=>[].concat(...s.map(i=>Array.isArray(i)?t(i):i));function n(s){return s?Array.isArray(s)?t(s).join(""):s:""}const r={Lexer:void 0,ParserRules:[{name:"Reverse_path",symbols:["Path"]},{name:"Reverse_path$string$1",symbols:[{literal:"<"},{literal:">"}],postprocess:s=>s.join("")},{name:"Reverse_path",symbols:["Reverse_path$string$1"]},{name:"Forward_path$subexpression$1$subexpression$1",symbols:[{literal:"<"},/[pP]/,/[oO]/,/[sS]/,/[tT]/,/[mM]/,/[aA]/,/[sS]/,/[tT]/,/[eE]/,/[rR]/,{literal:"@"}],postprocess:function(s){return s.join("")}},{name:"Forward_path$subexpression$1",symbols:["Forward_path$subexpression$1$subexpression$1","Domain",{literal:">"}]},{name:"Forward_path",symbols:["Forward_path$subexpression$1"]},{name:"Forward_path$subexpression$2",symbols:[{literal:"<"},/[pP]/,/[oO]/,/[sS]/,/[tT]/,/[mM]/,/[aA]/,/[sS]/,/[tT]/,/[eE]/,/[rR]/,{literal:">"}],postprocess:function(s){return s.join("")}},{name:"Forward_path",symbols:["Forward_path$subexpression$2"]},{name:"Forward_path",symbols:["Path"]},{name:"Path$ebnf$1$subexpression$1",symbols:["A_d_l",{literal:":"}]},{name:"Path$ebnf$1",symbols:["Path$ebnf$1$subexpression$1"],postprocess:e},{name:"Path$ebnf$1",symbols:[],postprocess:()=>null},{name:"Path",symbols:[{literal:"<"},"Path$ebnf$1","Mailbox",{literal:">"}]},{name:"A_d_l$ebnf$1",symbols:[]},{name:"A_d_l$ebnf$1$subexpression$1",symbols:[{literal:","},"At_domain"]},{name:"A_d_l$ebnf$1",symbols:["A_d_l$ebnf$1","A_d_l$ebnf$1$subexpression$1"],postprocess:s=>s[0].concat([s[1]])},{name:"A_d_l",symbols:["At_domain","A_d_l$ebnf$1"]},{name:"At_domain",symbols:[{literal:"@"},"Domain"]},{name:"Domain$ebnf$1",symbols:[]},{name:"Domain$ebnf$1$subexpression$1",symbols:[{literal:"."},"sub_domain"]},{name:"Domain$ebnf$1",symbols:["Domain$ebnf$1","Domain$ebnf$1$subexpression$1"],postprocess:s=>s[0].concat([s[1]])},{name:"Domain",symbols:["sub_domain","Domain$ebnf$1"]},{name:"sub_domain",symbols:["U_label"]},{name:"Let_dig",symbols:["ALPHA_DIGIT"],postprocess:e},{name:"Ldh_str$ebnf$1",symbols:[]},{name:"Ldh_str$ebnf$1",symbols:["Ldh_str$ebnf$1","ALPHA_DIG_DASH"],postprocess:s=>s[0].concat([s[1]])},{name:"Ldh_str",symbols:["Ldh_str$ebnf$1","Let_dig"]},{name:"U_Let_dig",symbols:["ALPHA_DIGIT_U"],postprocess:e},{name:"U_Ldh_str$ebnf$1",symbols:[]},{name:"U_Ldh_str$ebnf$1",symbols:["U_Ldh_str$ebnf$1","ALPHA_DIG_DASH_U"],postprocess:s=>s[0].concat([s[1]])},{name:"U_Ldh_str",symbols:["U_Ldh_str$ebnf$1","U_Let_dig"]},{name:"U_label$ebnf$1$subexpression$1",symbols:["U_Ldh_str"]},{name:"U_label$ebnf$1",symbols:["U_label$ebnf$1$subexpression$1"],postprocess:e},{name:"U_label$ebnf$1",symbols:[],postprocess:()=>null},{name:"U_label",symbols:["U_Let_dig","U_label$ebnf$1"]},{name:"address_literal$subexpression$1",symbols:["IPv4_address_literal"]},{name:"address_literal$subexpression$1",symbols:["IPv6_address_literal"]},{name:"address_literal$subexpression$1",symbols:["General_address_literal"]},{name:"address_literal",symbols:[{literal:"["},"address_literal$subexpression$1",{literal:"]"}]},{name:"non_local_part",symbols:["Domain"],postprocess:function(s){return{DomainName:n(s[0])}}},{name:"non_local_part",symbols:["address_literal"],postprocess:function(s){return{AddressLiteral:n(s[0])}}},{name:"Mailbox",symbols:["Local_part",{literal:"@"},"non_local_part"],postprocess:function(s){return{localPart:n(s[0]),domainPart:n(s[2])}}},{name:"Local_part",symbols:["Dot_string"],postprocess:function(s){return{DotString:n(s[0])}}},{name:"Local_part",symbols:["Quoted_string"],postprocess:function(s){return{QuotedString:n(s[0])}}},{name:"Dot_string$ebnf$1",symbols:[]},{name:"Dot_string$ebnf$1$subexpression$1",symbols:[{literal:"."},"Atom"]},{name:"Dot_string$ebnf$1",symbols:["Dot_string$ebnf$1","Dot_string$ebnf$1$subexpression$1"],postprocess:s=>s[0].concat([s[1]])},{name:"Dot_string",symbols:["Atom","Dot_string$ebnf$1"]},{name:"Atom$ebnf$1",symbols:[/[0-9A-Za-z!#$%&'*+\-/=?^_`{|}~\u0080-\uFFFF/]/]},{name:"Atom$ebnf$1",symbols:["Atom$ebnf$1",/[0-9A-Za-z!#$%&'*+\-/=?^_`{|}~\u0080-\uFFFF/]/],postprocess:s=>s[0].concat([s[1]])},{name:"Atom",symbols:["Atom$ebnf$1"]},{name:"Quoted_string$ebnf$1",symbols:[]},{name:"Quoted_string$ebnf$1",symbols:["Quoted_string$ebnf$1","QcontentSMTP"],postprocess:s=>s[0].concat([s[1]])},{name:"Quoted_string",symbols:["DQUOTE","Quoted_string$ebnf$1","DQUOTE"]},{name:"QcontentSMTP",symbols:["qtextSMTP"]},{name:"QcontentSMTP",symbols:["quoted_pairSMTP"]},{name:"quoted_pairSMTP",symbols:[{literal:"\\"},/[\x20-\x7e]/]},{name:"qtextSMTP",symbols:[/[\x20-\x21\x23-\x5b\x5d-\x7e\u0080-\uFFFF]/],postprocess:e},{name:"IPv4_address_literal$macrocall$2",symbols:[{literal:"."},"Snum"]},{name:"IPv4_address_literal$macrocall$1",symbols:["IPv4_address_literal$macrocall$2","IPv4_address_literal$macrocall$2","IPv4_address_literal$macrocall$2"]},{name:"IPv4_address_literal",symbols:["Snum","IPv4_address_literal$macrocall$1"]},{name:"IPv6_address_literal$subexpression$1",symbols:[/[iI]/,/[pP]/,/[vV]/,{literal:"6"},{literal:":"}],postprocess:function(s){return s.join("")}},{name:"IPv6_address_literal",symbols:["IPv6_address_literal$subexpression$1","IPv6_addr"]},{name:"General_address_literal$ebnf$1",symbols:["dcontent"]},{name:"General_address_literal$ebnf$1",symbols:["General_address_literal$ebnf$1","dcontent"],postprocess:s=>s[0].concat([s[1]])},{name:"General_address_literal",symbols:["Standardized_tag",{literal:":"},"General_address_literal$ebnf$1"]},{name:"Standardized_tag",symbols:["Ldh_str"]},{name:"dcontent",symbols:[/[\x21-\x5a\x5e-\x7e]/],postprocess:e},{name:"Snum",symbols:["DIGIT"]},{name:"Snum$subexpression$1",symbols:[/[1-9]/,"DIGIT"]},{name:"Snum",symbols:["Snum$subexpression$1"]},{name:"Snum$subexpression$2",symbols:[{literal:"1"},"DIGIT","DIGIT"]},{name:"Snum",symbols:["Snum$subexpression$2"]},{name:"Snum$subexpression$3",symbols:[{literal:"2"},/[0-4]/,"DIGIT"]},{name:"Snum",symbols:["Snum$subexpression$3"]},{name:"Snum$subexpression$4",symbols:[{literal:"2"},{literal:"5"},/[0-5]/]},{name:"Snum",symbols:["Snum$subexpression$4"]},{name:"IPv6_addr",symbols:["IPv6_full"]},{name:"IPv6_addr",symbols:["IPv6_comp"]},{name:"IPv6_addr",symbols:["IPv6v4_full"]},{name:"IPv6_addr",symbols:["IPv6v4_comp"]},{name:"IPv6_hex",symbols:["HEXDIG"]},{name:"IPv6_hex$subexpression$1",symbols:["HEXDIG","HEXDIG"]},{name:"IPv6_hex",symbols:["IPv6_hex$subexpression$1"]},{name:"IPv6_hex$subexpression$2",symbols:["HEXDIG","HEXDIG","HEXDIG"]},{name:"IPv6_hex",symbols:["IPv6_hex$subexpression$2"]},{name:"IPv6_hex$subexpression$3",symbols:["HEXDIG","HEXDIG","HEXDIG","HEXDIG"]},{name:"IPv6_hex",symbols:["IPv6_hex$subexpression$3"]},{name:"IPv6_full$macrocall$2",symbols:[{literal:":"},"IPv6_hex"]},{name:"IPv6_full$macrocall$1",symbols:["IPv6_full$macrocall$2","IPv6_full$macrocall$2","IPv6_full$macrocall$2","IPv6_full$macrocall$2","IPv6_full$macrocall$2","IPv6_full$macrocall$2","IPv6_full$macrocall$2"]},{name:"IPv6_full",symbols:["IPv6_hex","IPv6_full$macrocall$1"]},{name:"IPv6_comp$ebnf$1$subexpression$1$macrocall$2",symbols:[{literal:":"},"IPv6_hex"]},{name:"IPv6_comp$ebnf$1$subexpression$1$macrocall$1",symbols:["IPv6_comp$ebnf$1$subexpression$1$macrocall$2","IPv6_comp$ebnf$1$subexpression$1$macrocall$2","IPv6_comp$ebnf$1$subexpression$1$macrocall$2","IPv6_comp$ebnf$1$subexpression$1$macrocall$2","IPv6_comp$ebnf$1$subexpression$1$macrocall$2"]},{name:"IPv6_comp$ebnf$1$subexpression$1",symbols:["IPv6_hex","IPv6_comp$ebnf$1$subexpression$1$macrocall$1"]},{name:"IPv6_comp$ebnf$1",symbols:["IPv6_comp$ebnf$1$subexpression$1"],postprocess:e},{name:"IPv6_comp$ebnf$1",symbols:[],postprocess:()=>null},{name:"IPv6_comp$string$1",symbols:[{literal:":"},{literal:":"}],postprocess:s=>s.join("")},{name:"IPv6_comp$ebnf$2$subexpression$1$macrocall$2",symbols:[{literal:":"},"IPv6_hex"]},{name:"IPv6_comp$ebnf$2$subexpression$1$macrocall$1",symbols:["IPv6_comp$ebnf$2$subexpression$1$macrocall$2","IPv6_comp$ebnf$2$subexpression$1$macrocall$2","IPv6_comp$ebnf$2$subexpression$1$macrocall$2","IPv6_comp$ebnf$2$subexpression$1$macrocall$2","IPv6_comp$ebnf$2$subexpression$1$macrocall$2"]},{name:"IPv6_comp$ebnf$2$subexpression$1",symbols:["IPv6_hex","IPv6_comp$ebnf$2$subexpression$1$macrocall$1"]},{name:"IPv6_comp$ebnf$2",symbols:["IPv6_comp$ebnf$2$subexpression$1"],postprocess:e},{name:"IPv6_comp$ebnf$2",symbols:[],postprocess:()=>null},{name:"IPv6_comp",symbols:["IPv6_comp$ebnf$1","IPv6_comp$string$1","IPv6_comp$ebnf$2"]},{name:"IPv6v4_full$macrocall$2",symbols:[{literal:":"},"IPv6_hex"]},{name:"IPv6v4_full$macrocall$1",symbols:["IPv6v4_full$macrocall$2","IPv6v4_full$macrocall$2","IPv6v4_full$macrocall$2","IPv6v4_full$macrocall$2","IPv6v4_full$macrocall$2"]},{name:"IPv6v4_full",symbols:["IPv6_hex","IPv6v4_full$macrocall$1",{literal:":"},"IPv4_address_literal"]},{name:"IPv6v4_comp$ebnf$1$subexpression$1$macrocall$2",symbols:[{literal:":"},"IPv6_hex"]},{name:"IPv6v4_comp$ebnf$1$subexpression$1$macrocall$1",symbols:["IPv6v4_comp$ebnf$1$subexpression$1$macrocall$2","IPv6v4_comp$ebnf$1$subexpression$1$macrocall$2","IPv6v4_comp$ebnf$1$subexpression$1$macrocall$2"]},{name:"IPv6v4_comp$ebnf$1$subexpression$1",symbols:["IPv6_hex","IPv6v4_comp$ebnf$1$subexpression$1$macrocall$1"]},{name:"IPv6v4_comp$ebnf$1",symbols:["IPv6v4_comp$ebnf$1$subexpression$1"],postprocess:e},{name:"IPv6v4_comp$ebnf$1",symbols:[],postprocess:()=>null},{name:"IPv6v4_comp$string$1",symbols:[{literal:":"},{literal:":"}],postprocess:s=>s.join("")},{name:"IPv6v4_comp$ebnf$2$subexpression$1$macrocall$2",symbols:[{literal:":"},"IPv6_hex"]},{name:"IPv6v4_comp$ebnf$2$subexpression$1$macrocall$1",symbols:["IPv6v4_comp$ebnf$2$subexpression$1$macrocall$2","IPv6v4_comp$ebnf$2$subexpression$1$macrocall$2","IPv6v4_comp$ebnf$2$subexpression$1$macrocall$2"]},{name:"IPv6v4_comp$ebnf$2$subexpression$1",symbols:["IPv6_hex","IPv6v4_comp$ebnf$2$subexpression$1$macrocall$1",{literal:":"}]},{name:"IPv6v4_comp$ebnf$2",symbols:["IPv6v4_comp$ebnf$2$subexpression$1"],postprocess:e},{name:"IPv6v4_comp$ebnf$2",symbols:[],postprocess:()=>null},{name:"IPv6v4_comp",symbols:["IPv6v4_comp$ebnf$1","IPv6v4_comp$string$1","IPv6v4_comp$ebnf$2","IPv4_address_literal"]},{name:"DIGIT",symbols:[/[0-9]/],postprocess:e},{name:"ALPHA_DIGIT_U",symbols:[/[0-9A-Za-z\u0080-\uFFFF]/],postprocess:e},{name:"ALPHA_DIGIT",symbols:[/[0-9A-Za-z]/],postprocess:e},{name:"ALPHA_DIG_DASH",symbols:[/[-0-9A-Za-z]/],postprocess:e},{name:"ALPHA_DIG_DASH_U",symbols:[/[-0-9A-Za-z\u0080-\uFFFF]/],postprocess:e},{name:"HEXDIG",symbols:[/[0-9A-Fa-f]/],postprocess:e},{name:"DQUOTE",symbols:[{literal:'"'}],postprocess:e}],ParserStart:"Reverse_path"};return dv.default=r,dv}var ZD;function d3e(){if(ZD)return kr;ZD=1;var e=kr&&kr.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(kr,"__esModule",{value:!0}),kr.canonicalize=kr.canonicalize_quoted_string=kr.normalize=kr.normalize_dot_string=kr.parse=void 0;const t=c3e(),n=e(u3e());n.default.ParserStart="Mailbox";const r=t.Grammar.fromCompiled(n.default);function s(u){const f=new t.Parser(r);if(f.feed(u),f.results.length!==1)throw new Error("address parsing failed: ambiguous grammar");return f.results[0]}kr.parse=s;function i(u){return function(){const p=u.indexOf("+");return p===-1?u:u.substr(0,p)}().replace(/\./g,"").toLowerCase()}kr.normalize_dot_string=i;function o(u){var f,h;const p=s(u),y=(f=p.domainPart.AddressLiteral)!==null&&f!==void 0?f:p.domainPart.DomainName.toLowerCase();return`${(h=p.localPart.QuotedString)!==null&&h!==void 0?h:i(p.localPart.DotString)}@${y}`}kr.normalize=o;function a(u){return`"${u.substr(1).substr(0,u.length-2).replace(/(?:\\(.))/g,"$1").replace(/(?:(["\\]))/g,"\\$1")}"`}kr.canonicalize_quoted_string=a;function c(u){var f;const h=s(u),p=(f=h.domainPart.AddressLiteral)!==null&&f!==void 0?f:h.domainPart.DomainName.toLowerCase();return`${h.localPart.QuotedString?a(h.localPart.QuotedString):h.localPart.DotString}@${p}`}return kr.canonicalize=c,kr}var f3e=d3e();const h3e=/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,m3e=/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,p3e=/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,g3e=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,y3e=/^(?<time>(?:([0-1]\d|2[0-3]):[0-5]\d:(?<second>[0-5]\d|60)))(?:\.\d+)?(?<offset>(?:z|[+-]([0-1]\d|2[0-3])(?::?[0-5]\d)?))$/i,b3e=[0,31,28,31,30,31,30,31,31,30,31,30,31],v3e=/^(?:\/(?:[^~/]|~0|~1)*)*$/,x3e=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,w3e=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,S3e=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,E3e=/^P(?!$)(\d+Y)?(\d+M)?(\d+W)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?$/,hj={date:(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if(typeof t!="string"||t==="")return;const i=t.match(g3e);if(!i)return n.errors.formatDateTimeError({value:t,pointer:s,schema:r});const o=+i[1],a=+i[2],c=+i[3],u=o%4===0&&(o%100!==0||o%400===0);if(!(a>=1&&a<=12&&c>=1&&c<=(a==2&&u?29:b3e[a])))return n.errors.formatDateError({value:t,pointer:s,schema:r})},"date-time":(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if(typeof t!="string"||t==="")return;const i=t.split(/t/i);if(i.length===2){const o=hj.date(e,i[0])===void 0,a=hj.time(e,i[1])===void 0;if(o&&a)return}return n.errors.formatDateTimeError({value:t,pointer:s,schema:r})},duration:(e,t)=>{if(Rt(t)!=="string")return;const r=/(\d+M)(\d+W)|(\d+Y)(\d+W)/;if(!E3e.test(t)||r.test(t))return e.draft.errors.formatDurationError({value:t,pointer:e.pointer,schema:e.schema})},email:(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if(typeof t!="string"||t==="")return;if(t[0]==='"')return n.errors.formatEmailError({value:t,pointer:s,schema:r});const[i,o,...a]=t.split("@");if(!i||!o||a.length!==0||i.length>64||o.length>253)return n.errors.formatEmailError({value:t,pointer:s,schema:r});if(i[0]==="."||i.endsWith(".")||i.includes(".."))return n.errors.formatEmailError({value:t,pointer:s,schema:r});if(!/^[a-z0-9.-]+$/i.test(o)||!/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+$/i.test(i))return n.errors.formatEmailError({value:t,pointer:s,schema:r});if(!o.split(".").every(c=>/^[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?$/i.test(c)))return n.errors.formatEmailError({value:t,pointer:s,schema:r})},"idn-email":(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if(!(typeof t!="string"||t===""))try{f3e.parse(t);return}catch{return n.errors.formatEmailError({value:t,pointer:s,schema:r})}},hostname:(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if(typeof t=="string"&&!(t===""||p3e.test(t)))return n.errors.formatHostnameError({value:t,pointer:s,schema:r})},ipv4:(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if(!(typeof t!="string"||t==="")){if(t&&t[0]==="0")return n.errors.formatIPV4LeadingZeroError({value:t,pointer:s,schema:r});if(!(t.length<=15&&h3e.test(t)))return n.errors.formatIPV4Error({value:t,pointer:s,schema:r})}},ipv6:(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if(!(typeof t!="string"||t==="")){if(t&&t[0]==="0")return n.errors.formatIPV6LeadingZeroError({value:t,pointer:s,schema:r});if(!(t.length<=45&&m3e.test(t)))return n.errors.formatIPV6Error({value:t,pointer:s,schema:r})}},"json-pointer":(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if(!(typeof t!="string"||t==="")&&!v3e.test(t))return n.errors.formatJsonPointerError({value:t,pointer:s,schema:r})},"relative-json-pointer":(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if(typeof t=="string"&&!x3e.test(t))return n.errors.formatJsonPointerError({value:t,pointer:s,schema:r})},regex:(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if(typeof t=="string"&&/\\Z$/.test(t)===!1){try{new RegExp(t);return}catch{}return n.errors.formatRegExError({value:t,pointer:s,schema:r})}if(!(typeof t=="object"||typeof t=="number"||Array.isArray(t)))return n.errors.formatRegExError({value:t,pointer:s,schema:r})},time:(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if(typeof t!="string"||t==="")return;const i=t.match(y3e);if(!i)return n.errors.formatDateTimeError({value:t,pointer:s,schema:r});if(i.groups.second==="60"){if(/23:59:60(z|\+00:00)/i.test(t))return;const o=i.groups.time.match(/(\d+):(\d+):/),a=i.groups.offset.match(/(\d+):(\d+)/);if(a){const c=parseInt(o[1]),u=parseInt(a[1]),f=parseInt(o[2]),h=parseInt(a[2]);let p;/^-/.test(i.groups.offset)?p=(c+u)*60+(f+h):p=(24+c-u)*60+(f-h);const y=Math.floor(p/60),v=y%24,x=p-y*60;if(v===23&&x===59)return}return n.errors.formatDateTimeError({value:t,pointer:s,schema:r})}},uri:(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if(!(typeof t!="string"||t==="")&&!XD.isUri(t))return n.errors.formatURIError({value:t,pointer:s,schema:r})},"uri-reference":(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if(!(typeof t!="string"||t==="")&&!w3e.test(t))return n.errors.formatURIReferenceError({value:t,pointer:s,schema:r})},"uri-template":(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if(!(typeof t!="string"||t==="")&&!S3e.test(t))return n.errors.formatURITemplateError({value:t,pointer:s,schema:r})},url:(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if(!(t===""||XD.isWebUri(t)))return n.errors.formatURLError({value:t,pointer:s,schema:r})},uuid:(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if(!(typeof t!="string"||t==="")&&!/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(t))return n.errors.formatUUIDError({value:t,pointer:s,schema:r})}};function N3e(e,t,n=e.rootSchema){var r;if(n.oneOf)return n.oneOf.map(i=>e.createNode(i).resolveRef().schema);if(!((r=n.items)===null||r===void 0)&&r.oneOf)return n.items.oneOf.map(i=>e.createNode(i).resolveRef().schema);if(Array.isArray(n.items)&&n.items.length>+t)return[e.step(e.createNode(n),t,{}).schema];if(n.additionalItems&&!zt(n.items)){const i=n.additionalItems===!0?{type:"string"}:n.additionalItems;return[e.createNode(i).resolveRef().schema]}if(Array.isArray(n.items)&&n.items.length<=+t)return[];const s=e.step(e.createNode(n),t,{});return Vn(s)?s:[s.schema]}const oG={};function _3e(e,t=oG){const{pointer:n="#",data:r,schema:s=e.rootSchema,withSchemaWarning:i=!1}=t,o=e3e.split(n),a=e.createNode(s).resolveRef(),c=aG(a,o,r);return!i&&Vn(c)&&c.code==="schema-warning"?e.createNode(void 0):c}function aG(e,t,n=oG){if(t.length===0)return e.resolveRef();const r=t.shift(),s=e.draft.step(e,r,n);return Vn(s)?s:(n=n[r],aG(s,t,n))}var U_,e9;function C3e(){if(e9)return U_;e9=1;var e=function(_){return t(_)&&!n(_)};function t(N){return!!N&&typeof N=="object"}function n(N){var _=Object.prototype.toString.call(N);return _==="[object RegExp]"||_==="[object Date]"||i(N)}var r=typeof Symbol=="function"&&Symbol.for,s=r?Symbol.for("react.element"):60103;function i(N){return N.$$typeof===s}function o(N){return Array.isArray(N)?[]:{}}function a(N,_){return _.clone!==!1&&_.isMergeableObject(N)?x(o(N),N,_):N}function c(N,_,C){return N.concat(_).map(function(j){return a(j,C)})}function u(N,_){if(!_.customMerge)return x;var C=_.customMerge(N);return typeof C=="function"?C:x}function f(N){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(N).filter(function(_){return Object.propertyIsEnumerable.call(N,_)}):[]}function h(N){return Object.keys(N).concat(f(N))}function p(N,_){try{return _ in N}catch{return!1}}function y(N,_){return p(N,_)&&!(Object.hasOwnProperty.call(N,_)&&Object.propertyIsEnumerable.call(N,_))}function v(N,_,C){var j={};return C.isMergeableObject(N)&&h(N).forEach(function(A){j[A]=a(N[A],C)}),h(_).forEach(function(A){y(N,A)||(p(N,A)&&C.isMergeableObject(_[A])?j[A]=u(A,C)(N[A],_[A],C):j[A]=a(_[A],C))}),j}function x(N,_,C){C=C||{},C.arrayMerge=C.arrayMerge||c,C.isMergeableObject=C.isMergeableObject||e,C.cloneUnlessOtherwiseSpecified=a;var j=Array.isArray(_),A=Array.isArray(N),$=j===A;return $?j?C.arrayMerge(N,_,C):v(N,_,C):a(_,C)}x.all=function(_,C){if(!Array.isArray(_))throw new Error("first argument should be an array");return _.reduce(function(j,A){return x(j,A,C)},{})};var E=x;return U_=E,U_}var O3e=C3e();const j3e=eo(O3e),A3e=(e,t)=>t,lG=(e,t)=>j3e(e,t,{arrayMerge:A3e});function T3e(e){switch(Rt(e)){case"string":case"array":return(e==null?void 0:e.length)===0;case"null":case"undefined":return!0;case"object":return Object.keys(e).length===0;default:return!1}}const t9=d0.templateDefaultOptions;let _a;function q_(e,t){const{$ref:n}=e;return n==null?!0:(_a[t]==null||_a[t][n]==null?0:_a[t][n])<d0.GET_TEMPLATE_RECURSION_LIMIT}function n9(e,t,n){const{$ref:r}=t;return r==null?t:(_a[n]=_a[n]||{},_a[n][r]=_a[n][r]||0,_a[n][r]+=1,e.createNode(t,n).resolveRef().schema)}function $3e(e,t){if(e==="string")return JSON.stringify(t);if(typeof t!="string")return null;try{if(t=JSON.parse(t),typeof t===e)return t}catch{}return null}function cG(e,t,n,r,s){if(Rt(t)!=="object")return Object.assign({pointer:r},t);if(q_(t,r)===!1&&n==null)return!1;let i=fj(n9(e,t,r));if(Array.isArray(t.anyOf)&&t.anyOf.length>0){if(q_(t.anyOf[0],`${r}/anyOf/0`)){const o=n9(e,t.anyOf[0],`${r}/anyOf/0`);i=lG(i,o),i.pointer=t.anyOf[0].$ref||i.pointer}delete i.anyOf}if(Array.isArray(t.allOf)&&t.allOf.map((a,c)=>q_(a,`${r}/allOf/${c}`)).reduceRight((a,c)=>a&&c,!0)){const a=[];let c=fj(n);for(let f=0;f<t.allOf.length;f+=1){const h=e.createNode(t.allOf[f],r);a.push(HW(h,c).schema),c=Ss(e,c,{type:t.type,...a[f]},`${r}/allOf/${f}`,s)}const u=WW(e,{allOf:a});u&&(i=ts(i,u))}return i.pointer=i.pointer||t.$ref||r,i}const r9=e=>e&&typeof e=="object";function Ss(e,t,n,r,s){var i;if(n==null)throw new Error(`getTemplate: missing schema for data: ${JSON.stringify(t)}`);if(r==null)throw new Error("Missing pointer");let o=cG(e,n,t,r,s);if(!r9(o))return;if(r=o.pointer,o!=null&&o.const)return o.const;if(Array.isArray(o.oneOf))if(T3e(t)){const f=o.oneOf[0].type||o.type||o.const&&typeof o.const||Rt(t);o={...o.oneOf[0],type:f}}else{const f=e.createNode(o,r),h=x3(f,t);if(Vn(h)){if(t!=null&&s.removeInvalidData!==!0)return t;o=o.oneOf[0],t=void 0}else{const p=h.schema;p.type=(i=p.type)!==null&&i!==void 0?i:o.type,o=p}}if(!r9(o)||o.type==null)return;if(t instanceof File)return t;const a=Array.isArray(o.type)?R3e(o.type,t,o.default):o.type,c=Rt(t);return t!=null&&c!==a&&!(c==="number"&&a==="integer")&&(t=$3e(a,t)),s9[a]==null?s.removeInvalidData?void 0:t:s9[a](e,o,t,r,s)}function R3e(e,t,n){if(t==null){if(n!=null){const s=Rt(n);if(e.includes(s))return s}return e[0]}const r=Rt(t);return e.includes(r)?r:e[0]}const s9={null:(e,t,n)=>qp(t,n,null),string:(e,t,n)=>qp(t,n,""),number:(e,t,n)=>qp(t,n,0),integer:(e,t,n)=>qp(t,n,0),boolean:(e,t,n)=>qp(t,n,!1),object:(e,t,n,r,s)=>{var i;const o=t.default===void 0?{}:t.default,a={},c=s.extendDefaults===!1&&t.default!==void 0?[]:(i=t.required)!==null&&i!==void 0?i:[];t.properties&&Object.keys(t.properties).forEach(y=>{const v=n==null||n[y]==null?o[y]:n[y],x=c.includes(y);(v!=null||x||s.addOptionalProps)&&(a[y]=Ss(e,v,t.properties[y],`${r}/properties/${y}`,s))});const u=e.createNode(t,r);let f=YW(u,a);if(f){f=ts(t,f),delete f.dependencies;const y=Ss(e,n,f,`${r}/dependencies`,s);Object.assign(a,y)}n&&(s.removeInvalidData===!0&&(t.additionalProperties===!1||Rt(t.additionalProperties)==="object")?Rt(t.additionalProperties)==="object"&&Object.keys(n).forEach(y=>{a[y]==null&&e.isValid(n[y],t.additionalProperties)&&(a[y]=n[y])}):Object.keys(n).forEach(y=>a[y]==null&&(a[y]=n[y])));const h=e.createNode(t,r),p=ES(h,a);if(Gi(p)){const y=Ss(e,a,{type:"object",...p.schema},r,s);Object.assign(a,y)}return a},array:(e,t,n,r,s)=>{var i,o,a;const c=t.default===void 0?[]:t.default,u=n||c,f=s.extendDefaults===!1&&t.default!==void 0?0:(i=t.minItems)!==null&&i!==void 0?i:0;if(t.items==null){if(t.additionalItems){const p=Math.max(f,u.length);for(let y=0;y<p;y+=1)u[y]=Ss(e,u[y],t.additionalItems,`${r}/additionalItems`,s)}return n||[]}if(Array.isArray(t.items)){const p=Math.max(f??0,(a=(o=t.items)===null||o===void 0?void 0:o.length)!==null&&a!==void 0?a:0);for(let y=0;y<p;y+=1)t.items[y]?u[y]=Ss(e,u[y]==null?c[y]:u[y],t.items[y],`${r}/items/${y}`,s):t.additionalItems&&(u[y]=Ss(e,u[y]==null?c[y]:u[y],t.additionalItems,`${r}/additionalItems`,s));return u}if(Rt(t.items)!=="object")return u;const h=cG(e,t.items,n,r,s);if(h===!1)return u;if(r=h.pointer||r,h.oneOf&&u.length===0){const p=h.oneOf[0];for(let y=0;y<f;y+=1)u[y]=Ss(e,u[y]==null?c[y]:u[y],p,`${r}/oneOf/0`,s);return u}if(h.oneOf&&u.length>0){const p=Math.max(f,u.length);for(let y=0;y<p;y+=1){let v=u[y]==null?c[y]:u[y];const x=e.createNode(h,r);let E=x3(x,v);E==null||Vn(E)?v!=null&&s.removeInvalidData!==!0?u[y]=v:(v=void 0,E=h.oneOf[0],u[y]=Ss(e,v,E,`${r}/oneOf/${y}`,s)):u[y]=Ss(e,v,E.schema,`${r}/oneOf/${y}`,s)}return u}if(h.type){for(let p=0,y=Math.max(f,u.length);p<y;p+=1)u[p]=Ss(e,u[p]==null?c[p]:u[p],h,`${r}/items`,s);return u}return u}};function qp(e,t,n){return t??(e.const?e.const:e.default===void 0&&Array.isArray(e.enum)?e.enum[0]:e.default===void 0?n:e.default)}const k3e=(e,t,n=e.rootSchema,r)=>(_a={},r?Ss(e,t,n,"#",{...t9,...r}):Ss(e,t,n,"#",t9));function M3e(e,t,n=e.rootSchema,r="#"){const s=e.createNode(n,r);return e.validate(s,t).length===0}function i9(e){const t=[];let n=0;const r=e.length;for(;n<r;){const s=e.charCodeAt(n++);if(s>=55296&&s<=56319&&n<r){const i=e.charCodeAt(n++);(i&64512)==56320?t.push(((s&1023)<<10)+(i&1023)+65536):(t.push(s),n--)}else t.push(s)}return t}function o9(e){const t=`${e}`;if(t.includes("e-"))return parseInt(t.replace(/.*e-/,""));const n=t.indexOf(".");return n===-1?0:t.length-(n+1)}var H_,a9;function I3e(){return a9||(a9=1,H_=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,s,i;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(s=r;s--!==0;)if(!e(t[s],n[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(i=Object.keys(t),r=i.length,r!==Object.keys(n).length)return!1;for(s=r;s--!==0;)if(!Object.prototype.hasOwnProperty.call(n,i[s]))return!1;for(s=r;s--!==0;){var o=i[s];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n}),H_}var P3e=I3e();const uG=eo(P3e),D3e=Object.prototype.hasOwnProperty,l9=(e,t)=>!(e[t]===void 0||!D3e.call(e,t)),L3e={additionalProperties:(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if(r.additionalProperties===!0||r.additionalProperties==null||Rt(r.patternProperties)==="object"&&r.additionalProperties===!1)return;const i=[];let o=Object.keys(t).filter(c=>d0.propertyBlacklist.includes(c)===!1);const a=Object.keys(r.properties||{});if(Rt(r.patternProperties)==="object"){const c=Object.keys(r.patternProperties).map(u=>new RegExp(u));o=o.filter(u=>{for(let f=0;f<c.length;f+=1)if(c[f].test(u))return!1;return!0})}for(let c=0,u=o.length;c<u;c+=1){const f=o[c];if(a.indexOf(f)===-1){const h=zt(r.additionalProperties);if(h&&Array.isArray(r.additionalProperties.oneOf)){const p=n.resolveOneOf(e.next(r.additionalProperties),t[f]);Vn(p)?i.push(n.errors.additionalPropertiesError({pointer:s,schema:r.additionalProperties,value:t,property:o[c],properties:a,errors:p.data.errors})):i.push(...n.validate(e.next(p,f),t[f]))}else if(h){const p=n.validate(e.next(r.additionalProperties,f),t[f]);i.push(...p)}else i.push(n.errors.noAdditionalPropertiesError({pointer:s,schema:r,value:t,property:o[c],properties:a}))}}return i},allOf:ZTe,anyOf:u$e,dependencies:l$e,enum:(e,t)=>{const{draft:n,schema:r,pointer:s}=e,i=Rt(t);if(i==="object"||i==="array"){const o=JSON.stringify(t);for(let a=0;a<r.enum.length;a+=1)if(JSON.stringify(r.enum[a])===o)return}else if(r.enum.includes(t))return;return n.errors.enumError({pointer:s,schema:r,value:t,values:r.enum})},format:(e,t)=>{const{draft:n,schema:r}=e;if(n.validateFormat[r.format])return n.validateFormat[r.format](e,t)},items:(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if(r.items===!1)return Array.isArray(t)&&t.length===0?void 0:n.errors.invalidDataError({pointer:s,value:t,schema:r});const i=[];for(let o=0;o<t.length;o+=1){const a=t[o],c=n.step(e.next(r),o,t);if(Vn(c))return[c];const u=n.validate(c,a);i.push(...u)}return i},maximum:(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if(!isNaN(r.maximum)){if(r.maximum&&r.maximum<t)return n.errors.maximumError({maximum:r.maximum,length:t,value:t,pointer:s,schema:r});if(r.maximum&&r.exclusiveMaximum===!0&&r.maximum===t)return n.errors.maximumError({maximum:r.maximum,length:t,pointer:s,schema:r,value:t})}},maxItems:(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if(!isNaN(r.maxItems)&&r.maxItems<t.length)return n.errors.maxItemsError({maximum:r.maxItems,length:t.length,schema:r,value:t,pointer:s})},maxLength:(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if(isNaN(r.maxLength))return;const i=i9(t).length;if(r.maxLength<i)return n.errors.maxLengthError({maxLength:r.maxLength,length:i,pointer:s,schema:r,value:t})},maxProperties:(e,t)=>{const{draft:n,schema:r,pointer:s}=e,i=Object.keys(t).length;if(isNaN(r.maxProperties)===!1&&r.maxProperties<i)return n.errors.maxPropertiesError({maxProperties:r.maxProperties,length:i,pointer:s,schema:r,value:t})},minLength:(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if(isNaN(r.minLength))return;const i=i9(t).length;if(r.minLength>i)return r.minLength===1?n.errors.minLengthOneError({minLength:r.minLength,length:i,pointer:s,schema:r,value:t}):n.errors.minLengthError({minLength:r.minLength,length:i,pointer:s,schema:r,value:t})},minimum:(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if(!isNaN(r.minimum)){if(r.minimum>t)return n.errors.minimumError({minimum:r.minimum,length:t,pointer:s,schema:r,value:t});if(r.exclusiveMinimum===!0&&r.minimum===t)return n.errors.minimumError({minimum:r.minimum,length:t,pointer:s,schema:r,value:t})}},minItems:(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if(!isNaN(r.minItems)&&r.minItems>t.length)return r.minItems===1?n.errors.minItemsOneError({minItems:r.minItems,length:t.length,pointer:s,schema:r,value:t}):n.errors.minItemsError({minItems:r.minItems,length:t.length,pointer:s,schema:r,value:t})},minProperties:(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if(isNaN(r.minProperties))return;const i=Object.keys(t).length;if(r.minProperties>i)return n.errors.minPropertiesError({minProperties:r.minProperties,length:i,pointer:s,schema:r,value:t})},multipleOf:(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if(isNaN(r.multipleOf)||typeof t!="number")return;const i=o9(t),o=o9(r.multipleOf);if(i>o)return n.errors.multipleOfError({multipleOf:r.multipleOf,value:t,pointer:s,schema:r});const a=Math.pow(10,o),c=Math.round(t*a),u=Math.round(r.multipleOf*a);if(c%u/a!==0)return n.errors.multipleOfError({multipleOf:r.multipleOf,value:t,pointer:s,schema:r})},not:(e,t)=>{const{draft:n,schema:r,pointer:s}=e,i=[];return n.validate(e.next(r.not),t).length===0&&i.push(n.errors.notError({value:t,not:r.not,pointer:s,schema:r})),i},oneOf:XTe,pattern:(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if(new RegExp(r.pattern,"u").test(t)===!1)return n.errors.patternError({pattern:r.pattern,description:r.patternExample||r.pattern,received:t,schema:r,value:t,pointer:s})},patternProperties:(e,t)=>{const{draft:n,schema:r,pointer:s}=e,i=r.properties||{},o=r.patternProperties;if(Rt(o)!=="object")return;const a=[],c=Object.keys(t),u=Object.keys(o).map(f=>({regex:new RegExp(f),patternSchema:o[f]}));return c.forEach(f=>{let h=!1;for(let p=0,y=u.length;p<y;p+=1)if(u[p].regex.test(f)){h=!0;const v=n.validate(e.next(u[p].patternSchema,f),t[f]);v&&v.length>0&&a.push(...v)}i[f]||h===!1&&r.additionalProperties===!1&&a.push(n.errors.patternPropertiesError({key:f,pointer:s,schema:r,value:t,patterns:Object.keys(o).join(",")}))}),a},properties:(e,t)=>{const{draft:n,schema:r}=e,s=[],i=Object.keys(r.properties||{});for(let o=0;o<i.length;o+=1){const a=i[o];if(l9(t,a)){const c=n.step(e,a,t);if(Vn(c))s.push(c);else{const u=n.validate(c,t[a]);s.push(...u)}}}return s},propertiesRequired:(e,t)=>{const{draft:n,schema:r,pointer:s}=e,i=[],o=Object.keys(r.properties||{});for(let a=0;a<o.length;a+=1){const c=o[a];if(t[c]===void 0)i.push(n.errors.requiredPropertyError({key:c,pointer:s,schema:r,value:t}));else{const u=n.step(e,c,t),f=n.validate(u,t[c]);i.push(...f)}}return i},required:(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if(Array.isArray(r.required)!==!1)return r.required.map(i=>{if(!l9(t,i))return n.errors.requiredPropertyError({key:i,pointer:s,schema:r,value:t})})},requiredNotEmpty:(e,t)=>{const{schema:n}=e;if(Array.isArray(n.required)!==!1)return n.required.map(r=>{const{draft:s,schema:i,pointer:o}=e;if(t[r]==null||t[r]==="")return s.errors.valueNotEmptyError({property:r,pointer:`${o}/${r}`,schema:i,value:t})})},uniqueItems:(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if((Array.isArray(t)&&r.uniqueItems)===!1)return;const i=[],o=[];return t.forEach((a,c)=>{for(let u=c+1;u<t.length;u+=1)uG(a,t[u])&&!i.includes(u)&&(o.push(n.errors.uniqueItemsError({pointer:`${s}/${u}`,duplicatePointer:`${s}/${c}`,arrayPointer:s,value:JSON.stringify(a),schema:r})),i.push(u))}),o}},F3e={array:(e,t,n)=>{const{draft:r,schema:s,pointer:i}=e,o=n==null?void 0:n[t],a=Rt(s.items);if(a==="object")return cw(e.next(s.items,t),o);if(a==="array"){if(s.items[t]===!0)return e.next(Na(o),t);if(s.items[t]===!1)return r.errors.invalidDataError({key:t,value:o,pointer:i,schema:s});if(s.items[t])return r.resolveRef(e.next(s.items[t],t));if(s.additionalItems===!1)return r.errors.additionalItemsError({key:t,value:o,pointer:i,schema:s});if(s.additionalItems===!0||s.additionalItems===void 0)return e.next(Na(o),t);if(Rt(s.additionalItems)==="object")return e.next(s.additionalItems,t);throw new Error(`Invalid schema ${JSON.stringify(s,null,2)} for ${JSON.stringify(n,null,2)}`)}return s.additionalItems!==!1&&o?e.next(Na(o),t):new Error(`Invalid array schema for ${t} at ${i}`)},object:(e,t,n)=>{var r,s;const{draft:i,pointer:o}=e,a=cw(e,n),c=(r=a.schema)!==null&&r!==void 0?r:a,u=(s=c==null?void 0:c.properties)===null||s===void 0?void 0:s[t];if(u!==void 0){if(u===!1)return i.errors.forbiddenPropertyError({property:t,value:n,pointer:o,schema:c});if(u===!0)return e.next(Na(n==null?void 0:n[t]),t);const p=i.resolveRef(e.next(u,t));if(Vn(p))return p;if(p&&Array.isArray(p.schema.oneOf)){const y=e.next(p.schema,t),v=i.resolveOneOf(y,n[t]);return Vn(v)?v:y.merge(v.schema,"oneOf")}if(p)return p}const{patternProperties:f}=c;if(Rt(f)==="object"){let p;const y=Object.keys(f);for(let v=0,x=y.length;v<x;v+=1)if(p=new RegExp(y[v]),p.test(t))return e.next(f[y[v]],t)}const{additionalProperties:h}=c;if(Rt(h)==="object")return e.next(c.additionalProperties,t);if(n&&(h===void 0||h===!0)){const p=Na(n[t]);return p?e.next(p,t):void 0}return i.errors.unknownPropertyError({property:t,value:n,pointer:`${o}`,schema:c})}};function B3e(e,t,n){var r;const{draft:s,schema:i,pointer:o}=e,a=Rt(n);let c=(r=i.type)!==null&&r!==void 0?r:a;if(Array.isArray(c)){if(!c.includes(a))return s.errors.typeError({value:n,pointer:o,expected:i.type,received:a,schema:i});c=a}const u=F3e[c];if(u){const f=u(e,`${t}`,n);return f===void 0?s.errors.schemaWarning({pointer:o,value:n,schema:i,key:t}):f}return new Error(`Unsupported schema type ${i.type} for key ${t}`)}const z3e={array:(e,t)=>e.draft.typeKeywords.array.filter(n=>e.schema&&e.schema[n]!=null).map(n=>e.draft.validateKeyword[n](e,t)),object:(e,t)=>e.draft.typeKeywords.object.filter(n=>e.schema&&e.schema[n]!=null).map(n=>e.draft.validateKeyword[n](e,t)),string:(e,t)=>e.draft.typeKeywords.string.filter(n=>e.schema&&e.schema[n]!=null).map(n=>e.draft.validateKeyword[n](e,t)),integer:(e,t)=>e.draft.typeKeywords.number.filter(n=>e.schema&&e.schema[n]!=null).map(n=>e.draft.validateKeyword[n](e,t)),number:(e,t)=>e.draft.typeKeywords.number.filter(n=>e.schema&&e.schema[n]!=null).map(n=>e.draft.validateKeyword[n](e,t)),boolean:(e,t)=>e.draft.typeKeywords.boolean.filter(n=>e.schema&&e.schema[n]!=null).map(n=>e.draft.validateKeyword[n](e,t)),null:(e,t)=>e.draft.typeKeywords.null.filter(n=>e.schema&&e.schema[n]!=null).map(n=>e.draft.validateKeyword[n](e,t))};function V3e(e,t){const n=Rt(e);return n==="number"&&(t==="integer"||Array.isArray(t)&&t.includes("integer"))?Number.isInteger(e)||isNaN(e)?"integer":"number":n}function U3e(e,t){if(!Gi(e))throw new Error("node expected");const{draft:n,pointer:r}=e;e=e.resolveRef();const s=e.schema;if(s==null)throw new Error("missing schema");if(Rt(s)==="boolean")return s?[]:[n.errors.invalidDataError({pointer:r,schema:s,value:t})];if(Vn(s))return[s];if(s.const!==void 0)return uG(s.const,t)?[]:[n.errors.constError({pointer:r,schema:s,value:t,expected:s.const})];const i=V3e(t,s.type),o=s.type||i;return i!==o&&(!Array.isArray(o)||!o.includes(i))?[n.errors.typeError({pointer:r,schema:s,value:t,received:i,expected:o})]:n.validateType[i]==null?[n.errors.invalidTypeError({pointer:r,schema:s,value:t,receivedType:i})]:oy(n.validateType[i](e,t)).filter(lw)}function mj(e,t,n){const r=e.resolveRef(),{draft:s,schema:i,pointer:o}=r;n(i,t,o);const a=Rt(t);a==="object"?Object.keys(t).forEach(c=>{const u=s.step(r,c,t);Gi(u)&&mj(u,t[c],n)}):a==="array"&&t.forEach((c,u)=>{const f=s.step(r,u,t);Gi(f)&&mj(f,t[u],n)})}function q3e(e,t,n){n.$id=n.$id||t,e.remotes[t]=e.compileSchema(n)}const c9="__compiled",u9="__ref",H3e="getRef",W3e="getRoot",G3e="getContext",Y3e=/(#|\/)+$/g;function J3e(e,t,n=t,r=!1){if(t===!0||t===!1||t===void 0||t[c9]!==void 0)return t;const s={ids:{},anchors:{},remotes:e.remotes},i=JSON.stringify(t),o=JSON.parse(i);if(Object.defineProperties(o,{[c9]:{enumerable:!1,value:!0},[G3e]:{enumerable:!1,value:()=>s},[H3e]:{enumerable:!1,value:fa.bind(null,s,o)}}),r===!1&&i.includes("$ref")===!1)return o;o!==n&&Object.defineProperty(o,"$defs",{enumerable:!0,value:Object.assign({},n.definitions,n.$defs,o.definitions,o.$defs)});const a={},c=()=>o;return Ii(o,(u,f)=>{var h;if(u.$id){if(u.$id.startsWith("http")&&/(allOf|anyOf|oneOf|if)\/\d+$/.test(f)){const E=f.replace(/\/(allOf|anyOf|oneOf|if)\/\d+$/,""),N=Nu.get(o,E);u.$id=(h=N.$id)!==null&&h!==void 0?h:u.$id}s.ids[u.$id.replace(Y3e,"")]=f}f=`#${f}`.replace(/##+/,"#");const p=f.replace(/\/[^/]+$/,""),y=f.replace(/\/[^/]+\/[^/]+$/,""),v=a[p]||a[y],x=GD(v,u.$id);a[f]=x,s.ids[x]==null&&(s.ids[x]=f),u.$anchor&&(s.anchors[`${x}#${u.$anchor}`]=f),u.$ref&&!u[u9]&&(Object.defineProperty(u,u9,{enumerable:!1,value:GD(x,u.$ref)}),Object.defineProperty(u,W3e,{enumerable:!1,value:c}))}),o}const X3e={...L3e,contains:(e,t)=>{var n,r;const{draft:s,schema:i,pointer:o}=e;if(i.contains===!1)return s.errors.containsArrayError({pointer:o,value:t,schema:i});if(i.contains===!0)return Array.isArray(t)&&t.length===0?s.errors.containsAnyError({pointer:o,value:t,schema:i}):void 0;if(Rt(i.contains)!=="object")return;let a=0;for(let f=0;f<t.length;f+=1)s.validate(e.next(i.contains,f),t[f]).length===0&&a++;const c=(n=i.maxContains)!==null&&n!==void 0?n:1/0,u=(r=i.minContains)!==null&&r!==void 0?r:1;if(!(c>=a&&u<=a))return c<a?s.errors.containsMaxError({pointer:o,schema:i,delta:a-c,value:t}):u>a?s.errors.containsMinError({pointer:o,schema:i,delta:u-a,value:t}):s.errors.containsError({pointer:o,schema:i,value:t})},exclusiveMaximum:(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if(!isNaN(r.exclusiveMaximum)&&r.exclusiveMaximum<=t)return n.errors.maximumError({maximum:r.exclusiveMaximum,length:t,pointer:s,schema:r,value:t})},exclusiveMinimum:(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if(!isNaN(r.exclusiveMinimum)&&r.exclusiveMinimum>=t)return n.errors.minimumError({minimum:r.exclusiveMinimum,length:t,pointer:s,schema:r,value:t})},if:KTe,maximum:(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if(!isNaN(r.maximum)&&r.maximum&&r.maximum<t)return n.errors.maximumError({maximum:r.maximum,length:t,pointer:s,schema:r,value:t})},minimum:(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if(!isNaN(r.minimum)&&r.minimum>t)return n.errors.minimumError({minimum:r.minimum,length:t,pointer:s,schema:r,value:t})},patternProperties:(e,t)=>{const{draft:n,schema:r,pointer:s}=e,i=r.properties||{},o=r.patternProperties;if(Rt(o)!=="object")return;const a=[],c=Object.keys(t),u=Object.keys(o).map(f=>({regex:new RegExp(f),patternSchema:o[f]}));return c.forEach(f=>{let h=!1;for(let p=0,y=u.length;p<y;p+=1)if(u[p].regex.test(f)){if(h=!0,u[p].patternSchema===!1){a.push(n.errors.patternPropertiesError({key:f,pointer:s,patterns:Object.keys(o).join(","),schema:r,value:t}));return}const v=n.validate(e.next(u[p].patternSchema,f),t[f]);v&&v.length>0&&a.push(...v)}i[f]||h===!1&&r.additionalProperties===!1&&a.push(n.errors.patternPropertiesError({key:f,pointer:s,patterns:Object.keys(o).join(","),schema:r,value:t}))}),a},propertyNames:(e,t)=>{const{draft:n,schema:r,pointer:s}=e;if(r.propertyNames===!1)return Object.keys(t).length===0?void 0:n.errors.invalidPropertyNameError({property:Object.keys(t),pointer:s,value:t,schema:r});if(r.propertyNames===!0||Rt(r.propertyNames)!=="object")return;const i=[],o=Object.keys(t),a={...r.propertyNames,type:"string"};return o.forEach(c=>{const u=e.next(a,c),f=n.validate(u,c);f.length>0&&i.push(n.errors.invalidPropertyNameError({property:c,pointer:s,validationError:f[0],value:t[c],schema:r}))}),i}},dG=e=>zt(e)?Object.keys(e).map(t=>new RegExp(t)):[];function K3e(e,t,n){var r,s;const i=e.draft.resolveRef(e),{schema:o}=i;if(o.additionalProperties===!0)return!0;if(!((r=o.properties)===null||r===void 0)&&r[t]){const c=(s=o.properties)===null||s===void 0?void 0:s[t];if(i.draft.isValid(n,c))return!0}if(dG(o.patternProperties).find(c=>c.test(t)))return!0;if(zt(o.additionalProperties)){const c=o.additionalProperties;return i.draft.validate(i.next(c),n)}return!1}const Q3e={...X3e,dependencies:void 0,dependentSchemas:a$e,dependentRequired:o$e,unevaluatedProperties:(e,t)=>{var n;const{draft:r,schema:s,pointer:i}=e;if(!zt(t)||s.unevaluatedProperties==null)return;let o=Object.keys(t);if(o.length===0)return;const a=cw(e,t),c=(n=a.schema)!==null&&n!==void 0?n:a;if(c.unevaluatedProperties===!0)return;const u=dG(c.patternProperties);if(o=o.filter(h=>{var p;return!(!((p=c.properties)===null||p===void 0)&&p[h]||zt(s.if)&&K3e(e.next({type:"object",...s.if}),h,t[h])||u.find(y=>y.test(h))||c.additionalProperties)}),o.length===0)return;const f=[];return c.unevaluatedProperties===!1?(o.forEach(h=>{f.push(r.errors.unevaluatedPropertyError({pointer:`${i}/${h}`,value:JSON.stringify(t[h]),schema:s}))}),f):(o.forEach(h=>{if(zt(c.unevaluatedProperties)){const p=r.validate(e.next(c.unevaluatedProperties,h),t[h]);f.push(...p)}}),f)},unevaluatedItems:(e,t)=>{var n;const{draft:r,schema:s,pointer:i}=e;if(!Array.isArray(t)||t.length===0||s.unevaluatedItems==null||s.unevaluatedItems===!0)return;const o=cw(r.resolveRef(e),t),a=(n=o.schema)!==null&&n!==void 0?n:o;if(a.unevaluatedItems===!0||a.additionalItems===!0)return;if(zt(s.if)){const u={type:"array",...s.if};if(r.isValid(t,u)&&Array.isArray(u.items)&&u.items.length===t.length)return}if(zt(a.items)){const u={...a,unevaluatedItems:void 0};return r.validate(e.next(u),t).map(h=>r.errors.unevaluatedItemsError({...h.data}))}if(Array.isArray(a.items)){const u=[];for(let f=a.items.length;f<t.length;f+=1)f<a.items.length?r.validate(e.next(a.items[f],f),t[f]).length>0&&u.push({index:f,value:t[f]}):u.push({index:f,value:t[f]});return u.map(f=>r.errors.unevaluatedItemsError({pointer:`${i}/${f.index}`,value:JSON.stringify(f.value),schema:a.unevaluatedItems}))}if(zt(a.unevaluatedItems))return t.map((u,f)=>{if(!r.isValid(u,a.unevaluatedItems))return r.errors.unevaluatedItemsError({pointer:`${i}/${f}`,value:JSON.stringify(u),schema:a.unevaluatedItems})});const c=[];return t.forEach((u,f)=>{c.push(r.errors.unevaluatedItemsError({pointer:`${i}/${f}`,value:JSON.stringify(u),schema:s}))}),c}},Z3e={typeKeywords:{array:["allOf","anyOf","contains","enum","if","items","maxItems","minItems","not","oneOf","unevaluatedItems","uniqueItems"],boolean:["allOf","anyOf","enum","not","oneOf"],object:["additionalProperties","allOf","anyOf","dependentSchemas","dependentRequired","enum","format","if","maxProperties","minProperties","not","oneOf","patternProperties","properties","propertyNames","required","unevaluatedProperties"],string:["allOf","anyOf","enum","format","if","maxLength","minLength","not","oneOf","pattern"],number:["allOf","anyOf","enum","exclusiveMaximum","exclusiveMinimum","format","if","maximum","minimum","multipleOf","not","oneOf"],null:["allOf","anyOf","enum","format","not","oneOf"]},validateKeyword:Q3e,validateType:z3e,validateFormat:hj,errors:i3e,createNode:r$e,addRemoteSchema:q3e,compileSchema:J3e,createSchemaOf:Na,each:mj,eachSchema:Ii,getChildSchemaSelection:N3e,getSchema:_3e,getTemplate:k3e,isValid:M3e,resolveAllOf:QTe,resolveAnyOf:c$e,resolveOneOf:YTe,resolveRef:GW,step:B3e,validate:U3e,templateDefaultOptions:d0.templateDefaultOptions};class N3 extends G$e{constructor(t,n={}){super(lG(Z3e,n),t)}}/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */function d9(e){return Object.prototype.toString.call(e)==="[object Object]"}function f9(e){var t,n;return d9(e)===!1?!1:(t=e.constructor,t===void 0?!0:(n=t.prototype,!(d9(n)===!1||n.hasOwnProperty("isPrototypeOf")===!1)))}var Jv={exports:{}},e4e=Jv.exports,h9;function t4e(){return h9||(h9=1,function(e){(function(t,n){e.exports=n()})(e4e,function(){var t=Object.prototype.toString;function n(h,p){return h==null?!1:Object.prototype.hasOwnProperty.call(h,p)}function r(h){if(!h||o(h)&&h.length===0)return!0;if(typeof h!="string"){for(var p in h)if(n(h,p))return!1;return!0}return!1}function s(h){return t.call(h)}function i(h){return typeof h=="object"&&s(h)==="[object Object]"}var o=Array.isArray||function(h){return t.call(h)==="[object Array]"};function a(h){return typeof h=="boolean"||s(h)==="[object Boolean]"}function c(h){var p=parseInt(h);return p.toString()===h?p:h}function u(h){h=h||{};var p=function(N){return Object.keys(p).reduce(function(_,C){return C==="create"||typeof p[C]=="function"&&(_[C]=p[C].bind(p,N)),_},{})},y;h.includeInheritedProps?y=function(){return!0}:y=function(N,_){return typeof _=="number"&&Array.isArray(N)||n(N,_)};function v(N,_){if(y(N,_))return N[_]}var x;h.includeInheritedProps?x=function(N,_){typeof _!="string"&&typeof _!="number"&&(_=String(_));var C=v(N,_);if(_==="__proto__"||_==="prototype"||_==="constructor"&&typeof C=="function")throw new Error("For security reasons, object's magic properties cannot be set");return C}:x=function(N,_){return v(N,_)};function E(N,_,C,j){if(typeof _=="number"&&(_=[_]),!_||_.length===0)return N;if(typeof _=="string")return E(N,_.split(".").map(c),C,j);var A=_[0],$=x(N,A);return _.length===1?(($===void 0||!j)&&(N[A]=C),$):($===void 0&&(typeof _[1]=="number"?N[A]=[]:N[A]={}),E(N[A],_.slice(1),C,j))}return p.has=function(N,_){if(typeof _=="number"?_=[_]:typeof _=="string"&&(_=_.split(".")),!_||_.length===0)return!!N;for(var C=0;C<_.length;C++){var j=c(_[C]);if(typeof j=="number"&&o(N)&&j<N.length||(h.includeInheritedProps?j in Object(N):n(N,j)))N=N[j];else return!1}return!0},p.ensureExists=function(N,_,C){return E(N,_,C,!0)},p.set=function(N,_,C,j){return E(N,_,C,j)},p.insert=function(N,_,C,j){var A=p.get(N,_);j=~~j,o(A)||(A=[],p.set(N,_,A)),A.splice(j,0,C)},p.empty=function(N,_){if(!r(_)&&N!=null){var C,j;if(C=p.get(N,_)){if(typeof C=="string")return p.set(N,_,"");if(a(C))return p.set(N,_,!1);if(typeof C=="number")return p.set(N,_,0);if(o(C))C.length=0;else if(i(C))for(j in C)y(C,j)&&delete C[j];else return p.set(N,_,null)}}},p.push=function(N,_){var C=p.get(N,_);o(C)||(C=[],p.set(N,_,C)),C.push.apply(C,Array.prototype.slice.call(arguments,2))},p.coalesce=function(N,_,C){for(var j,A=0,$=_.length;A<$;A++)if((j=p.get(N,_[A]))!==void 0)return j;return C},p.get=function(N,_,C){if(typeof _=="number"&&(_=[_]),!_||_.length===0)return N;if(N==null)return C;if(typeof _=="string")return p.get(N,_.split("."),C);var j=c(_[0]),A=x(N,j);return A===void 0?C:_.length===1?A:p.get(N[j],_.slice(1),C)},p.del=function(_,C){if(typeof C=="number"&&(C=[C]),_==null||r(C))return _;if(typeof C=="string")return p.del(_,C.split("."));var j=c(C[0]);if(x(_,j),!y(_,j))return _;if(C.length===1)o(_)?_.splice(j,1):delete _[j];else return p.del(_[j],C.slice(1));return _},p}var f=u();return f.create=u,f.withInheritedProps=u({includeInheritedProps:!0}),f})}(Jv)),Jv.exports}var n4e=t4e();const r4e=eo(n4e);var Qf=Object.prototype.hasOwnProperty;function Mo(e){if(pj(e))return!1;if(!e||zh(e)&&e.length===0)return!0;if(!fG(e)){for(var t in e)if(Qf.call(e,t))return!1;return!0}return!1}function pj(e){return typeof e=="number"}function fG(e){return typeof e=="string"}function zh(e){return Array.isArray(e)}function gj(e,t){for(var n in t)Qf.call(t,n)&&(e[n]=t[n]);return e}function s4e(e){var t=parseInt(e);return t.toString()===e?t:e}function uw(e,t,n){return e==null?t?n?[]:{}:e:zh(e)?e.slice():gj({},e)}function dw(e,t){if(e!==t&&f9(e)&&f9(t)){var n={};for(var r in e)Qf.call(e,r)&&(Qf.call(t,r)?n[r]=dw(e[r],t[r]):n[r]=e[r]);for(r in t)Qf.call(t,r)&&(n[r]=dw(e[r],t[r]));return n}return t}function Ha(e,t,n,r){if(pj(n)&&(n=[n]),Mo(n))return t;if(fG(n))return Ha(e,t,n.split(".").map(s4e),r);var s=n[0];return(!e||e===t)&&(e=uw(t,!0,pj(s))),n.length===1?r(e,s):(t!=null&&(t=t[s]),e[s]=Ha(e[s],t,n.slice(1),r),e)}var hs={};hs.set=function(t,n,r,s){return Mo(r)?s:Ha(t,n,r,function(i,o){return i[o]=s,i})};hs.update=function(t,n,r,s){return Mo(r)?s(uw(n)):Ha(t,n,r,function(i,o){return i[o]=s(i[o]),i})};hs.push=function(t,n,r){var s=Array.prototype.slice.call(arguments,3);return Mo(r)?zh(n)?n.concat(s):s:Ha(t,n,r,function(i,o){return zh(i[o])?i[o]=i[o].concat(s):i[o]=s,i})};hs.insert=function(t,n,r,s,i){if(i=~~i,Mo(r)){if(!zh(n))return[s];var o=n.slice(0,i);return o.push(s),o.concat(n.slice(i))}return Ha(t,n,r,function(a,c){var u=a[c];if(!zh(u)){if(u!=null&&typeof u<"u")throw new Error("Expected "+r+"to be an array. Instead got "+typeof r);u=[]}var f=u.slice(0,i);return f.push(s),a[c]=f.concat(u.slice(i)),a})};hs.del=function(t,n,r){if(!Mo(r))return Ha(t,n,r,function(s,i){return Array.isArray(s)?s[i]!==void 0&&s.splice(i,1):Qf.call(s,i)&&delete s[i],s})};hs.assign=function(t,n,r,s){return Mo(r)?Mo(s)?n:gj(uw(n),s):Ha(t,n,r,function(i,o){s=Object(s);var a=uw(i[o],!0);return gj(a,s),i[o]=a,i})};hs.merge=function(t,n,r,s){return Mo(r)?Mo(s)?n:dw(n,s):Ha(t,n,r,function(i,o){return s=Object(s),i[o]=dw(i[o],s),i})};var i4e=hs.set.bind(null,null);hs.update.bind(null,null);hs.push.bind(null,null);hs.insert.bind(null,null);var o4e=hs.del.bind(null,null);hs.assign.bind(null,null);hs.merge.bind(null,null);r4e.get;function a4e(e){return e==null||e===""}function hG(e,t,n){if(!(a4e(e)&&typeof(n==null?void 0:n.required)=="boolean"&&!n.required)){switch(t.type){case"string":return String(e);case"integer":case"number":return Number(e);case"boolean":return["true","1",1,"on",!0].includes(e);case"null":return null}return e}}const _3=e=>typeof e<"u"&&e!==null&&e!=="";function fw(e){return"#"+(e.includes(".")?e.split("."):[e]).filter(_3).map(n=>"/"+n).join("")}function C3(e="",t=""){const n=e.includes(".")?e.split("."):[e];return[t,...n].filter(_3).join(".")}function mG(e="",t=""){return[...e.includes(".")?e.split("."):[e],t].filter(_3).join(".")}function l4e(e){return e.substring(0,e.lastIndexOf("/"))}function c4e(e,t,n,r){var s;try{if(t==="#/"||!n)return!1;const i=e.getSchema({pointer:t,data:r,schema:n});if(typeof i=="object"&&"const"in i)return!0;const o=l4e(t),a=e.getSchema({pointer:o,data:r});return!!((s=a==null?void 0:a.required)==null?void 0:s.includes(t.split("/").pop()))}catch(i){return console.error("isRequired",{pointer:t,schema:n,data:r,e:i}),!1}}function Tu(e,t){if(!e||!t)return!1;const n=Array.isArray(e)?e:[e];return(Array.isArray(t)?t:[t]).some(s=>n.includes(s))}function pG(e,t){if(typeof t=="object"&&"title"in t)return t.title;if(!e)return"";const n=e.includes(".")?e.split(".").pop()??"":e;return Ku(n)}function O3(e){if(!(!e||typeof e!="object"))return e.anyOf??e.oneOf}function gG(e,t){const n=O3(e);if(!n)return[-1,[],void 0];const r=n.findIndex(s=>new N3(s).validate(t,s).length===0);return r===-1?[-1,n,void 0]:[r,n,n[r]]}function u4e(e,t,n){if(typeof e!="object"||!("properties"in e)||t.length===0)return[e,n];const r=JSON.parse(JSON.stringify(e)),s=n?JSON.parse(JSON.stringify(n)):void 0,i={...r,properties:Ms(r.properties,t)};i.required&&(i.required=i.required.filter(a=>!t.includes(a)));const o=Ms(s,t);return[i,o]}function yG(e){return typeof e=="object"&&"type"in e&&!Tu(e.type,"error")}function d4e(...e){for(const t of e)if(typeof t<"u")return t}const _S=w.createContext(void 0);_S.displayName="FormContext";function CS({schema:e,initialValues:t,initialOpts:n,children:r,onChange:s,onSubmit:i,onInvalidSubmit:o,validateOn:a="submit",hiddenSubmit:c=!0,ignoreKeys:u=[],options:f={},readOnly:h=!1,...p}){const[y,v]=u4e(e,u,t),x=w.useMemo(()=>new N3(y),[JSON.stringify(y)]),E=v??x.getTemplate(void 0,y,n),N=w.useMemo(()=>Bh({dirty:!1,submitting:!1,errors:[],data:E}),[E]),_=b3(N),C=w.useRef(null);w.useEffect(()=>{E&&a==="change"&&B()},[E]);async function j(D){const{data:L,errors:H}=B();if(i){D.preventDefault(),_(M=>({...M,submitting:!0}));try{H.length===0?await i(L):(console.log("invalid",H),o==null||o(H,L))}catch(M){console.warn(M)}return _(M=>({...M,submitting:!1})),!1}else if(H.length>0)return D.preventDefault(),o==null||o(H,L),!1}const A=Dt((D,L)=>{_(H=>{const M=H.data,V=i4e(M,D,L);return s==null||s(V,D,L,z),{...H,data:V}}),R()}),$=Dt(D=>{_(L=>{const H=L.data,M=o4e(H,D);return s==null||s(M,D,void 0,z),{...L,data:M}}),R()}),k=Dt(()=>zW().get(N)),R=Dt(()=>{var L;const D=k();_(H=>({...H,dirty:!Ta(E,D.data)})),(a==="change"||((L=D==null?void 0:D.errors)==null?void 0:L.length)>0)&&B()}),B=Dt(D=>{var M;const L=D??((M=k())==null?void 0:M.data),H=x.validate(L,y);return _(V=>({...V,errors:H})),{data:L,errors:H}}),z=w.useMemo(()=>({_formStateAtom:N,setValue:A,deleteValue:$,schema:y,lib:x,options:f,root:"",path:"",readOnly:h}),[y,E,f,h]);return m.jsxs("form",{...p,ref:C,onSubmit:j,children:[m.jsxs(_S.Provider,{value:z,children:[r||m.jsx(fi,{name:""}),(f==null?void 0:f.debug)&&m.jsx(OS,{})]}),c&&m.jsx("button",{style:{visibility:"hidden"},type:"submit",children:"Submit"})]})}function Uc(){return w.useContext(_S)}function j3({children:e,overrideData:t,prefix:n,...r}){const s=Uc(),i={};n&&(i.root=n);const o={...s,...r,...i};return m.jsx(_S.Provider,{value:o,children:e})}function f0(e,t){const{_formStateAtom:n,root:r}=Uc();if((typeof e!="string"||e.length===0)&&(t==null?void 0:t.strict)===!0)return{value:void 0,errors:[]};const s=u0(n,w.useCallback(i=>{const o=C3(e,r),a=fw(o);return{value:Er(i.data,o),errors:i.errors.filter(c=>c.data.pointer.startsWith(a))}},[e]),Ta);return Nm(s)[0]}function h0(e,t){const{_formStateAtom:n,root:r}=Uc(),s=u0(n,w.useCallback(i=>{const o=C3(e,r),a=fw(o);return i.errors.filter(c=>t!=null&&t.strict?c.data.pointer===a:c.data.pointer.startsWith(a))},[e]),Ta);return Nm(s)[0]}function bG(e,t=[]){const{_formStateAtom:n}=Uc(),r=u0(n,w.useCallback(e,t),Ta);return Nm(r)[0]}function jd(e,t,n){const{_formStateAtom:r,root:s,lib:i,...o}=Uc(),a=o.schema,c=u0(r,w.useCallback(u=>{const f=fw(e),h=C3(e,s),p=fw(h),y=Er(u.data,h),v=f==="#/"?a:i.getSchema({pointer:f,data:y,schema:a}),x=c4e(i,p,a,u.data),E={...o,path:h,root:s,schema:v,pointer:f,required:x},N=t==null?void 0:t({...E,_formStateAtom:r,lib:i,value:y});return{...E,value:N}},[e,a??{},s]),Ta);return{...y3(c),_formStateAtom:r,lib:i}}function m0({children:e,selector:t}){return e(bG(t??(n=>n)))}function OS({force:e=!1}){const{options:t}=Uc();if((t==null?void 0:t.debug)!==!0&&e!==!0)return null;const n=bG(r=>r);return m.jsx(fs,{json:n,expand:99})}function hw({name:e,label:t,required:n,schema:r,wrapper:s,hidden:i,errorPlacement:o="bottom",descriptionPlacement:a="bottom",children:c,fieldId:u,...f}){const h=h0(e,{strict:!0}),p=(r==null?void 0:r.examples)||[],y=`${e}-examples`,v=(f==null?void 0:f.description)??(r==null?void 0:r.description),x=typeof t<"u"?t:r?pG(e,r):e,E=h.length>0&&m.jsx(eAe,{children:h.map(_=>_.message).join(", ")}),N=v&&m.jsx(Zje,{className:a==="top"?"-mt-1 mb-1":"mb-2",children:v});return m.jsxs(Zi,{error:h.length>0,as:s==="fieldset"?"fieldset":"div",className:i?"hidden":"relative",children:[o==="top"&&E,m.jsx(f4e,{name:e,schema:r,required:n}),x&&m.jsxs(ld,{as:s==="fieldset"?"legend":"label",htmlFor:u,className:"self-start",children:[x," ",n&&m.jsx("span",{className:"font-medium opacity-30",children:"*"})]}),a==="top"&&N,m.jsx("div",{className:"flex flex-row gap-2",children:m.jsxs("div",{className:"flex flex-1 flex-col gap-3",children:[w.Children.count(c)===1&&w.isValidElement(c)?w.cloneElement(c,{list:p.length>0?y:void 0}):c,p.length>0&&m.jsx("datalist",{id:y,children:p.map((_,C)=>m.jsx("option",{value:_},C))})]})}),a==="bottom"&&N,o==="bottom"&&E]})}const f4e=({name:e,schema:t,required:n})=>{const{options:r}=Uc();if(!(r!=null&&r.debug))return null;const{value:s}=f0(e),i=h0(e,{strict:!0});return m.jsx("div",{className:"absolute top-0 right-0",children:m.jsx(a3,{overlayProps:{className:"max-w-none"},position:"bottom-end",target:({toggle:o})=>m.jsx(fs,{className:"bg-background pr-3 text-sm",json:{name:e,value:s,required:n,schema:t,errors:i},expand:6}),children:m.jsx(xt,{Icon:bU,size:"xs",className:"opacity-30",tabIndex:-1})})})},h4e=({path:e=""})=>{const{setValue:t,pointer:n,required:r,schema:s,...i}=jd(e);return!s||typeof s>"u"?`ArrayField(${e}): no schema ${n}`:s.uniqueItems&&typeof s.items=="object"&&"enum"in s.items?m.jsx(hw,{name:e,schema:s,wrapper:"fieldset",children:m.jsx(AS,{required:!0,name:e,schema:s.items,multiple:!0,className:"h-auto",onChange:o=>{const a=Array.from(o.target.selectedOptions).map(c=>c.value);t(i.path,a)}})}):m.jsxs(hw,{name:e,schema:s,wrapper:"fieldset",children:[m.jsx(p4e,{name:e,children:({value:o})=>o==null?void 0:o.map((a,c)=>m.jsx(m4e,{path:e,index:c,schema:s},c))}),m.jsx("div",{className:"flex flex-row",children:m.jsx(g4e,{path:e,schema:s})})]})},m4e=w.memo(({path:e,index:t,schema:n})=>{const{value:r,...s}=jd(e,h=>{var p;return(p=h.value)==null?void 0:p[t]}),i=mG(e,t);let o=n.items;if(O3(n.items)){const[,,h]=gG(n.items,r);o=h}const c=Dt((h,p)=>{s.setValue(h,p)}),u=Dt(h=>{s.deleteValue(h)}),f=w.useMemo(()=>m.jsx(xt,{Icon:xU,onClick:()=>u(i),size:"sm"}),[i]);return m.jsxs("div",{className:"flex flex-row gap-2",children:[m.jsx(AS,{name:i,schema:o,value:r,onChange:h=>{c(i,hG(h.target.value,o))},className:"w-full"}),f]},i)},Ta),p4e=w.memo(({name:e,children:t})=>t(f0(e)),(e,t)=>{var n,r;return((n=e.value)==null?void 0:n.length)===((r=t.value)==null?void 0:r.length)}),g4e=({schema:e,path:t})=>{const{setValue:n,value:{currentIndex:r},...s}=jd(t,a=>{var c;return{currentIndex:((c=a.value)==null?void 0:c.length)??0}}),i=O3(e.items);function o(a){const c=mG(t,r);n(c,a??s.lib.getTemplate(void 0,e.items))}return i?m.jsx(jr,{dropdownWrapperProps:{className:"min-w-0"},items:i.map((a,c)=>({label:a.title??`Option ${c+1}`,onClick:()=>o(s.lib.getTemplate(void 0,a))})),onClickItem:console.log,children:m.jsx(st,{IconLeft:Nxe,children:"Add"})}):m.jsx(st,{onClick:()=>o(),children:"Add"})},vG=w.createContext(void 0),A3=()=>w.useContext(vG),y4e=Bh(null),b4e=({path:e="",children:t})=>{const{setValue:n,lib:r,pointer:s,value:{matchedIndex:i,schemas:o},schema:a}=jd(e,x=>{const[E,N=[]]=gG(x.schema,x.value);return{matchedIndex:E,schemas:N}}),c=h0(e,{strict:!0});if(!a)return`AnyOfField(${e}): no schema ${s}`;const[u,f]=Nm(y4e),{options:{anyOfNoneSelectedMode:h}}=Uc(),p=u!==null?u:i>-1?i:h==="first"?0:null,y=Dt(x=>{n(e,x!==null?r.getTemplate(void 0,o[x]):void 0),f(x)}),v=w.useMemo(()=>{const x=o.map((_,C)=>_.title??`Option ${C+1}`),E={type:"string",enum:x},N=p!==null?o[p]:void 0;return{options:x,selectSchema:E,selectedSchema:N,schema:a,schemas:o,selected:p}},[p]);return m.jsx(vG.Provider,{value:{...v,select:y,path:e,errors:c},children:t},p)},v4e=()=>{const{selected:e,select:t,path:n,schema:r,options:s,selectSchema:i}=A3(),o=Dt(c=>{const u=c.target.value?Number(c.target.value):null;t(u)}),a=w.useMemo(()=>s.map((c,u)=>({label:c,value:u})),[]);return m.jsxs(m.Fragment,{children:[m.jsx(ld,{children:pG(n,r)}),m.jsx(AS,{schema:i,options:a,onChange:o,value:e??void 0,className:"h-8 py-1"})]})},x4e=({name:e,label:t,...n})=>{const{selected:r,selectedSchema:s,path:i,errors:o}=A3();return r===null?null:m.jsx(j3,{prefix:i,schema:s,children:m.jsx("div",{className:qe(o.length>0&&"bg-red-500/10"),children:m.jsx(w4e,{label:!1,...n},`${i}_${r}`)})})},w4e=e=>{const{value:t}=f0(""),n={value:["string","number","boolean"].includes(typeof t)?t:void 0};return m.jsx(fi,{name:"",label:!1,...e,inputProps:n})},bg={Root:b4e,Select:v4e,Field:x4e,useContext:A3},S4e=e=>m.jsx("fieldset",{children:m.jsxs(bg.Root,{...e,children:[m.jsx("legend",{className:"flex flex-row gap-2 items-center py-2",children:m.jsx(bg.Select,{})}),m.jsx(bg.Field,{})]})}),jS=({path:e="",label:t,wrapperProps:n={}})=>{const{schema:r,...s}=jd(e);if(!yG(r))return`ObjectField "${e}": no schema`;const i=Object.entries(r.properties??{});return m.jsx(hw,{name:e,schema:{...r,description:void 0},wrapper:"fieldset",errorPlacement:"top",...n,children:i.length===0?m.jsx("i",{className:"opacity-50",children:"No properties"}):i.map(([o,a])=>{const c=[e,o].filter(Boolean).join(".");if(!(typeof a>"u"||typeof a=="boolean"))return a.anyOf||a.oneOf?m.jsx(S4e,{path:c},c):m.jsx(fi,{name:c},c)})})},fi=e=>m.jsx(bm,{fallback:E4e(e),children:m.jsx(N4e,{...e})}),xG=({as:e="div",className:t,...n})=>{const r=e;return m.jsx(r,{className:[t,"hidden"].filter(Boolean).join(" "),children:m.jsx(fi,{...n})})},E4e=({name:e})=>({error:t})=>m.jsxs(wG,{children:['Field "',e,'" error: ',t.message]}),N4e=({name:e,onChange:t,placeholder:n,required:r,inputProps:s,...i})=>{const{path:o,setValue:a,schema:c,...u}=jd(e),f=`${e}-${w.useId()}`,h=typeof r=="boolean"?r:u.required;if(!c)return m.jsxs(wG,{children:["[Field] ",o," has no schema (",JSON.stringify(c),")"]});if(Tu(c.type,"object"))return m.jsx(jS,{path:e});if(Tu(c.type,"array"))return m.jsx(h4e,{path:e});w.useEffect(()=>{s!=null&&s.defaultValue&&a(o,s.defaultValue)},[s==null?void 0:s.defaultValue]);const p=d4e(u.readOnly,s==null?void 0:s.disabled,i.disabled,c.readOnly,"const"in c,!1),y=Dt(v=>{var E;const x=hG(v.target.value,c,{required:h});typeof x>"u"&&!h&&((E=u.options)==null?void 0:E.keepEmpty)!==!0?u.deleteValue(o):a(o,x)});return m.jsx(hw,{name:e,required:h,schema:c,fieldId:f,...i,children:m.jsx(AS,{placeholder:n,...s,id:f,schema:c,name:e,required:h,disabled:p,onChange:t??y})})},wG=({children:e})=>m.jsx("pre",{className:"dark:bg-red-950 bg-red-100 rounded-md px-3 py-1.5 text-wrap whitespace-break-spaces  break-all",children:e}),AS=({schema:e,render:t,...n})=>{const{value:r}=f0(n.name,{strict:!0});if(!yG(e))return null;const s={...n,value:typeof n.value<"u"?n.value:r,placeholder:n.placeholder?n.placeholder:typeof e.default<"u"?String(e.default):""};if(t)return t({schema:e,...s});if(e.enum)return m.jsx(NW,{options:e.enum,...s});if(Tu(e.type,["number","integer"])){const o={min:e.minimum,max:e.maximum,step:e.multipleOf};return m.jsx(il,{type:"number",...s,value:s.value??"",...o})}if(Tu(e.type,"boolean"))return m.jsx(nAe,{...s,checked:r===!0});if(Tu(e.type,"string")&&e.format==="date-time"){const o=s.value?new Date(s.value).toISOString().slice(0,16):"";return m.jsx(sj,{...s,value:o,type:"datetime-local",onChange:a=>{var u;const c=new Date(a.target.value);(u=s.onChange)==null||u.call(s,{target:{value:c.toISOString()}})}})}if(Tu(e.type,"string")&&e.format==="date")return m.jsx(sj,{...s,value:s.value??""});const i={maxLength:e.maxLength,minLength:e.minLength,pattern:e.pattern};return e.format&&["password","hidden","url","email","tel"].includes(e.format)&&(i.type=e.format),m.jsx(tAe,{...s,value:s.value??"",...i})};function T3({context:e,id:t,innerProps:{file:n}}){var p;const{config:{entity_name:r,basepath:s}}=DW(),i=J1(r,void 0,{where:{path:n.path}}),o=()=>e.closeModal(t),a=(p=i.data)==null?void 0:p[0],c=window.location.origin,u=a!=null&&a.reference?a==null?void 0:a.reference.split(".")[0]:void 0,f=u?"/data"+ut.data.entity.edit(u,a==null?void 0:a.entity_id):void 0,h=a!=null&&a.path?"/data"+ut.data.entity.edit(r,a==null?void 0:a.id):void 0;return m.jsxs("div",{className:"flex flex-col md:flex-row",children:[m.jsx("div",{className:"flex w-full md:w-[calc(100%-300px)] justify-center items-center bg-lightest min-w-50",children:m.jsx(C4e,{file:n})}),m.jsxs("div",{className:"w-full md:!w-[300px] flex flex-col",children:[m.jsx(Ll,{title:"ID",value:a==null?void 0:a.id,copyValue:c+h,first:!0,children:h&&m.jsxs(zO,{href:h,size:"small",className:"py-1.5 px-2 !leading-none font-mono",onClick:o,children:["#",String(a==null?void 0:a.id)]})}),m.jsx(Ll,{title:"Path",value:a==null?void 0:a.path}),m.jsx(Ll,{title:"Mime Type",value:a==null?void 0:a.mime_type}),m.jsx(Ll,{title:"Size",value:(a==null?void 0:a.size)&&b1.fileSize(a.size,1),copyValue:a==null?void 0:a.size}),m.jsx(Ll,{title:"Etag",value:a==null?void 0:a.etag}),m.jsx(Ll,{title:"Entity",copyValue:c+f,children:f&&m.jsxs(zO,{href:f,size:"small",className:"py-1.5 px-2 !leading-none font-mono",onClick:o,children:[a==null?void 0:a.reference," #",a==null?void 0:a.entity_id]})}),m.jsx(Ll,{title:"Modified At",value:(a==null?void 0:a.modified_at)&&lF(a==null?void 0:a.modified_at),copyValue:a==null?void 0:a.modified_at}),m.jsx(Ll,{title:"Metadata",value:a==null?void 0:a.metadata,copyable:!1,children:(a==null?void 0:a.metadata)&&m.jsx(fs,{json:a==null?void 0:a.metadata,expand:2,showCopy:!0,className:"w-full text-sm bg-primary/2 pt-2.5 rounded-lg",copyIconProps:{className:"size-6 opacity-20 group-hover:opacity-100 transition-all"}})})]})]})}const Ll=({title:e,children:t,value:n,first:r,copyable:s=!0,copyValue:i})=>{const o=s1e(),a=!t&&(n===null||typeof n>"u"),c=s&&!a&&o.copy!==void 0,u=n?typeof n=="object"&&!a?JSON.stringify(n):String(n):void 0;return m.jsxs("div",{className:qe("flex flex-col gap-1 py-3 pl-5 pr-3 group",!r&&"border-t border-muted"),children:[m.jsx("div",{className:"text-sm font-bold opacity-50",children:Ku(e)}),m.jsxs("div",{className:"flex flex-row gap-1 justify-between items-center",children:[t??m.jsx("div",{className:qe("font-mono truncate",a&&"opacity-30"),children:a?"null":u}),c&&m.jsx(xt,{Icon:o.copied?CSe:Tq,className:qe("size-6 opacity-20 group-hover:opacity-100 transition-all",o.copied&&"text-success-foreground opacity-100"),onClick:()=>o.copy(i||n)})]})]})},_4e=[/^text\/.*$/,/application\/(x\-)?(json|json|yaml|javascript|xml|rtf|sql)/],C4e=({file:e})=>{const t=typeof e.body=="string"?e.body:URL.createObjectURL(e.body);return e.type.startsWith("image/")||e.type.startsWith("video/")?m.jsx(p3.Preview,{file:e,className:"max-h-[70dvh]",controls:!0,muted:!0}):e.type==="application/pdf"?m.jsx("iframe",{title:"PDF preview",src:`${t}#view=fitH&zoom=page-width&toolbar=1`,className:"w-250 max-w-[80dvw] h-[80dvh]"}):_4e.some(n=>n.test(e.type))?m.jsx(O4e,{file:e}):e.type.startsWith("audio/")?m.jsx("div",{className:"p-5",children:m.jsx("audio",{src:t,controls:!0})}):m.jsx("div",{className:"min-w-96 min-h-48 flex justify-center items-center h-full max-h-[70dvh]",children:m.jsx("span",{className:"opacity-50 font-mono",children:"No Preview Available"})})},O4e=({file:e})=>{const[t,n]=w.useState(""),r=typeof e.body=="string"?e.body:URL.createObjectURL(e.body),s=1024*256,i=e.size>s;return w.useEffect(()=>{let o=!1;return e?fetch(r,{headers:i?{Range:`bytes=0-${s-1}`}:void 0}).then(a=>a.text()).then(a=>{o||n(a)}):n(""),()=>{o=!0}},[e,i]),m.jsxs("pre",{className:"text-sm font-mono whitespace-pre-wrap break-all overflow-y-scroll w-250 md:max-w-[80dvw] h-[60dvh] md:h-[80dvh] py-4 px-6",children:[t,i&&m.jsxs("div",{className:"mt-3 opacity-50 text-xs text-center",children:["Showing first ",b1.fileSize(s)]})]})};T3.defaultTitle=void 0;T3.modalProps={withCloseButton:!1,size:"auto",centered:!0,styles:{content:{overflowY:"initial !important"}},classNames:{root:"bknd-admin w-full max-w-xl",content:"overflow-hidden",title:"font-bold !text-md",body:"max-h-inherit !p-0"}};const mw={test:h3,debug:d3,form:f3,overlay:k$,dataCreate:u3,mediaInfo:T3};function j4e({children:e}){return m.jsx(IEe,{modals:mw,children:e})}function A4e(e,t,{title:n,...r}={}){const s=n??mw[e].defaultTitle??void 0,i=mw[e].modalProps??{},o={title:s,...r,...i,modal:e,innerProps:t};return TEe({transitionProps:{transition:AAe,duration:300},...o}),{close:()=>SG(e),closeAll:zq.closeAll}}function SG(e){return $Ee(e)}const Nr={ids:Object.fromEntries(Object.keys(mw).map(e=>[e,e])),open:A4e,close:SG,closeAll:zq.closeAll};function T4e(){const[e]=Dn(),{config:t,actions:n}=Vc(),{readonly:r}=dt(),s=Object.values(tn(t.roles??{},(a,c)=>({role:c,permissions:a.permissions,is_default:a.is_default??!1,implicit_allow:a.implicit_allow??!1})));function i(a){e(ut.auth.roles.edit(a.role))}function o(){r||Nr.open("form",{schema:We({name:td}),uiSchema:{name:{"ui:title":"Role name"}},onSubmit:async a=>{a.name.length>0&&await n.roles.add(a.name)&&e(ut.auth.roles.edit(a.name))}},{title:"New Role"})}return m.jsxs(m.Fragment,{children:[m.jsx(An,{right:!r&&m.jsx(st,{variant:"primary",onClick:o,children:"Create new"}),children:"Roles & Permissions"}),m.jsxs(Zn,{children:[m.jsx(No.Warning,{visible:!t.enabled,title:"Auth not enabled",message:"To use authentication features, please enable it in the settings."}),m.jsx("div",{className:"flex flex-col flex-grow p-3 gap-3",children:m.jsx(vS,{data:s,renderValue:$4e,renderHeader:Dy,onClickRow:i})})]})]})}const $4e=({value:e,property:t})=>{if(["is_default","implicit_allow"].includes(t))return e?m.jsx("span",{children:"Yes"}):m.jsx("span",{className:"opacity-50",children:"No"});if(t==="permissions"){let r=e||[];const s=r.length;return s>3&&(r=[...r.slice(0,3),`+${s-3}`]),m.jsx("div",{className:"flex flex-row gap-1",children:r.map((i,o)=>m.jsx("span",{className:"inline-block px-2 py-1.5 text-sm bg-primary/5 rounded font-mono leading-none",children:i},o))})}return m.jsx(xS,{value:e,property:t})},TS=({path:e,backTo:t,onBack:n})=>{const[,,r]=Dn(),s=Array.isArray(e)?e:[e],i=s.length>1,o=n||(()=>r({fallback:t})),a=w.useMemo(()=>s.map((c,u)=>({last:u===s.length-1,...c})),[s]);return m.jsxs("div",{className:"flex flex-row flex-grow items-center gap-2 text-lg",children:[i&&m.jsx(xt,{onClick:o,Icon:C$,variant:"default",size:"lg",className:"mr-1"}),m.jsx("div",{className:"hidden md:flex gap-1.5",children:m.jsx(EG,{crumbs:a})}),m.jsx("div",{className:"flex md:hidden gap-2",children:m.jsx(R4e,{crumbs:a})})]})},EG=({crumbs:e})=>e.map((t,n)=>t.last?m.jsx(NG,{...t},n):m.jsx(_G,{...t},n)),R4e=({crumbs:e})=>{const[,t]=vi();if(e.length<=2)return m.jsx(EG,{crumbs:e});const n=e[0],r=e[e.length-1],s=w.useMemo(()=>e.slice(1,-1).map(o=>({label:o.string,href:o.href})),[e]),i=Dt(o=>t(`~/${o.href}`));return m.jsxs(m.Fragment,{children:[m.jsx(_G,{...n}),m.jsx(jr,{onClickItem:i,items:s,children:m.jsx(xt,{Icon:nl,variant:"ghost"})}),m.jsx("span",{className:"opacity-25 dark:font-bold font-semibold",children:"/"}),m.jsx(NG,{...r})]})},NG=({label:e})=>m.jsx("span",{className:"text-nowrap dark:font-bold font-semibold",children:e}),_G=({href:e,label:t})=>m.jsxs("div",{className:"opacity-50 flex flex-row gap-1.5 dark:font-bold font-semibold",children:[m.jsx(K1,{to:e,className:"text-nowrap",children:t}),m.jsx("span",{className:"opacity-50",children:"/"})]}),k4e=IV,M4e=w.forwardRef(({role:e,debug:t},n)=>{const{permissions:r}=dt(),{formState:{isValid:s},watch:i,control:o,reset:a,getValues:c}=rl({resolver:sl(k4e),defaultValues:e});return w.useImperativeHandle(n,()=>({reset:a,getData:()=>c(),isValid:()=>s})),m.jsxs("div",{className:"flex flex-col flex-grow px-5 py-5 gap-8",children:[m.jsx("div",{className:"flex flex-col gap-2",children:m.jsx(I4e,{control:o,permissions:r})}),m.jsxs("div",{className:"flex flex-col gap-4",children:[m.jsx(It.Wrapper,{label:"Should this role be the default?",size:"md",description:"In case an user is not assigned any role, this role will be assigned by default.",children:m.jsx("div",{className:"flex flex-row",children:m.jsx(mg,{name:"is_default",control:o,className:"mt-2"})})}),m.jsx(It.Wrapper,{label:"Implicit allow missing permissions?",size:"md",description:"This should be only used for admins. If a permission is not explicitly denied, it will be allowed.",children:m.jsx("div",{className:"flex flex-row",children:m.jsx(mg,{name:"implicit_allow",control:o,className:"mt-2"})})})]}),t&&m.jsxs("div",{className:"font-mono opacity-50",children:[m.jsx("div",{children:JSON.stringify(e,null,2)}),m.jsx("div",{children:JSON.stringify(i(),null,2)})]})]})}),I4e=({control:e,permissions:t})=>{const{field:{value:n,onChange:r,...s},fieldState:i}=Od({name:"permissions",control:e}),o=n??[];function a(u){return f=>{const p=f.target.checked?[...o,u]:o.filter(y=>y!==u);r(p)}}const c=t.reduce((u,f)=>{const[h,p]=f.split(".");return u[h]||(u[h]=[]),u[h].push(f),u},{});return console.log("grouped",c),m.jsx("div",{className:"flex flex-col gap-10",children:Object.entries(c).map(([u,f])=>m.jsxs("div",{className:"flex flex-col gap-2",children:[m.jsxs("h3",{className:"font-semibold",children:[ci(u)," Permissions"]}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 2xl:grid-cols-3 gap-3",children:f.map(h=>{const p=o.includes(h);return m.jsx("div",{className:"flex flex-col border border-muted",children:m.jsxs("div",{className:"flex flex-row gap-2 justify-between",children:[m.jsx("div",{className:"py-4 px-4 font-mono leading-none",children:h}),m.jsxs("div",{className:"flex flex-row gap-1 items-center px-2",children:[m.jsx(Ka,{checked:p,onChange:a(h)}),m.jsx(Pc,{label:"Coming soon",children:m.jsx(st,{size:"small",variant:"ghost",disabled:!0,children:m.jsx("span",{className:"font-normal italic font-mono",children:"FX"})})})]})]})},h)})})]},u))})};function P4e(e){const{hasSecrets:t}=dt({withSecrets:!0});return t?m.jsx(D4e,{...e}):m.jsx(Is.MissingPermission,{what:"Roles & Permissions"})}function D4e({params:e}){var f;const[t]=Dn(),{config:n,actions:r}=Vc(),s=e.role,i=(f=n.roles)==null?void 0:f[s],o=w.useRef(null),{readonly:a}=dt();async function c(){var y,v,x;if(console.log("data",(y=o.current)==null?void 0:y.isValid()),!((v=o.current)!=null&&v.isValid()))return;const h=(x=o.current)==null?void 0:x.getData();await r.roles.patch(s,h)&&t(ut.auth.roles.list())}async function u(){await r.roles.delete(s)&&t(ut.auth.roles.list())}return m.jsxs(m.Fragment,{children:[m.jsx(An,{right:m.jsxs(m.Fragment,{children:[m.jsx(jr,{items:[{label:"Advanced Settings",onClick:()=>t(ut.settings.path(["auth","roles",s]),{absolute:!0})},!a&&{label:"Delete",onClick:u,destructive:!0}],position:"bottom-end",children:m.jsx(xt,{Icon:nl})}),!a&&m.jsx(st,{variant:"primary",onClick:c,children:"Update"})]}),className:"pl-3",children:m.jsx(TS,{path:[{label:"Roles & Permissions",href:ut.auth.roles.list()},{label:s}]})}),m.jsx(Zn,{children:m.jsx(M4e,{ref:o,role:i})})]})}const CG=Z1(Zy({advanced:[]},e=>({toggleAdvanced:t=>e(n=>({advanced:n.advanced.includes(t)?n.advanced.filter(r=>r!==t):[...n.advanced,t]}))})));function L4e(e){Gr(["Auth","Settings"]);const{hasSecrets:t}=dt({withSecrets:!0});return t?m.jsx(B4e,{...e}):m.jsx(Is.MissingPermission,{what:"Auth Settings"})}const F4e={ignoreKeys:["roles","strategies"],options:{keepEmpty:!0,debug:Hr()}};function B4e(){const{config:e,schema:t,actions:n,$auth:r}=Vc(),{readonly:s}=dt(),i=JSON.parse(JSON.stringify(t));i.properties.jwt.required=["alg"];async function o(a){await n.config.set(a)}return m.jsxs(CS,{schema:i,initialValues:e,onSubmit:o,...F4e,readOnly:s,children:[m.jsx(m0,{selector:a=>({dirty:a.dirty,errors:a.errors.length>0,submitting:a.submitting}),children:({dirty:a,errors:c,submitting:u})=>m.jsx(An,{className:"pl-4",right:!s&&m.jsx(st,{variant:"primary",type:"submit",disabled:!a||c||u,children:"Update"}),children:"Settings"})}),m.jsxs(Zn,{children:[m.jsxs(W_,{className:"pt-4 pl-0 pb-0",children:[m.jsx("div",{className:"pl-4",children:m.jsx(es,{name:"enabled",label:"Authentication Enabled",description:"Only after enabling authentication, all settings below will take effect.",descriptionPlacement:"top"})}),m.jsxs("div",{className:"flex flex-col gap-6 relative pl-4 pb-2",children:[m.jsx(p9,{}),m.jsx(es,{name:"guard.enabled",label:m.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[m.jsx("span",{children:"Guard Enabled"}),!r.roles.has_admin&&m.jsx(iS.Warning,{title:"No admin roles defined. Enabling the guard will likely block all requests."})]}),disabled:r.roles.none,description:"When enabled, enforces permissions on all routes. Make sure to create roles first.",descriptionPlacement:"top"}),m.jsx(es,{name:"allow_register",label:"Allow User Registration",description:"When enabled, allows users to register autonomously. New users use the default role.",descriptionPlacement:"top"})]})]}),m.jsxs("div",{className:"flex flex-col gap-3 relative mt-3 pb-4",children:[m.jsx(p9,{}),m.jsx(HO,{}),m.jsxs(W_,{title:"JWT",children:[m.jsx(es,{name:"jwt.issuer"}),m.jsx(es,{name:"jwt.secret",description:"The secret used to sign the JWT token. If not set, a random key will be generated after enabling authentication.",advanced:"jwt",inputProps:{type:"password"}}),m.jsx(es,{name:"jwt.alg",advanced:"jwt"}),m.jsx(es,{name:"jwt.expires",advanced:"jwt"}),m.jsx(m9,{which:"jwt"})]}),m.jsx(HO,{}),m.jsxs(W_,{title:"Cookie",children:[m.jsx(es,{name:"cookie.path",advanced:"cookie"}),m.jsx(es,{name:"cookie.sameSite",advanced:"cookie"}),m.jsx(es,{name:"cookie.secure",advanced:"cookie"}),m.jsx(es,{name:"cookie.expires",advanced:"cookie"}),m.jsx(es,{name:"cookie.renew",label:"Renew Cookie",description:"Automatically renew users cookie on every request.",descriptionPlacement:"top"}),m.jsx(es,{name:"cookie.pathSuccess",advanced:"cookie"}),m.jsx(es,{name:"cookie.pathLoggedOut"}),m.jsx(m9,{which:"cookie"})]})]}),m.jsx(OS,{})]})]})}const m9=({which:e})=>{const{advanced:t,toggleAdvanced:n}=CG(),r=t.includes(e);return m.jsx(st,{IconLeft:r?ASe:Aq,onClick:()=>n(e),variant:r?"default":"ghost",className:"self-start",size:"small",children:r?"Hide advanced settings":"Show advanced settings"})},p9=()=>m.jsx(m0,{selector:e=>({enabled:e.data.enabled}),children:({enabled:e})=>!e&&m.jsx("div",{className:"absolute w-full h-full z-50 inset-0 bg-background opacity-90"})});function W_(e){const{children:t,title:n,className:r}=e;return m.jsx(m.Fragment,{children:m.jsxs("div",{className:yn("flex flex-col gap-6 px-4",n&&"pt-0",r),children:[n&&m.jsx("h3",{className:"text-lg font-bold",children:n}),t]})})}function es(e){const{advanced:t,...n}=e,r=CG(s=>s.advanced);return t&&!r.includes(t)?null:m.jsx(fi,{...n})}const z4e=({className:e,...t})=>m.jsx("div",{className:qe("flex flex-col gap-2 max-w-4xl",e),...t}),V4e=({className:e,hasError:t,disabled:n,...r})=>m.jsx("div",{className:qe("flex flex-col border border-muted rounded bg-background",t&&"border-error",e),...r}),U4e=({className:e,left:t,right:n,children:r,...s})=>m.jsxs("div",{...s,className:qe("flex flex-row justify-between p-3 gap-3 items-center",e),children:[t&&m.jsx("div",{className:"flex flex-row items-center p-2 bg-primary/5 rounded",children:t}),m.jsx("div",{className:"font-mono flex-grow flex flex-row gap-3",children:r}),n&&m.jsx("div",{className:"flex flex-row gap-4 items-center",children:n})]}),q4e=({className:e,open:t,...n})=>t&&m.jsx("div",{...n,className:qe("flex flex-col border-t border-t-muted px-4 pt-3 pb-4 bg-lightest/50 gap-4",e)}),Xv={Root:z4e,Item:V4e,Preview:U4e,Detail:q4e};function H4e(e){Gr(["Auth","Strategies"]);const{hasSecrets:t,config:{auth:{enabled:n}}}=dt({withSecrets:!0});if(t){if(!n)return m.jsx(Is.NotEnabled,{description:"Enable Auth first."})}else return m.jsx(Is.MissingPermission,{what:"Auth Strategies"});return m.jsx(G4e,{...e})}const W4e={keepEmpty:!0,debug:Hr()};function G4e(){var i,o;const{readonly:e}=dt(),t=Vc(),n=t.config.strategies,r=t.schema.properties.strategies;Object.fromEntries((o=(i=t.schema.properties.strategies)==null?void 0:i.additionalProperties)==null?void 0:o.anyOf.map(a=>[a.properties.type.const,a]));async function s(a){await t.actions.config.set({strategies:a})}return m.jsxs(CS,{schema:r,initialValues:n,onSubmit:s,options:W4e,readOnly:e,children:[m.jsx(m0,{selector:a=>({dirty:a.dirty,errors:a.errors.length>0,submitting:a.submitting}),children:({dirty:a,errors:c,submitting:u})=>m.jsx(An,{className:"pl-4",right:!e&&m.jsx(st,{variant:"primary",type:"submit",disabled:!a||c||u,children:"Update"}),children:"Strategies"})}),m.jsxs(Zn,{children:[m.jsxs("div",{className:"flex flex-col p-4 gap-4",children:[m.jsx("p",{className:"opacity-70",children:"Allow users to sign in or sign up using different strategies."}),m.jsxs(Xv.Root,{children:[m.jsx(Fl,{type:"password",name:"password"}),m.jsx(Fl,{type:"oauth",name:"google"}),m.jsx(Fl,{type:"oauth",name:"github"}),m.jsx(Fl,{type:"oauth",name:"facebook",unavailable:!0}),m.jsx(Fl,{type:"oauth",name:"x",unavailable:!0}),m.jsx(Fl,{type:"oauth",name:"instagram",unavailable:!0}),m.jsx(Fl,{type:"oauth",name:"apple",unavailable:!0}),m.jsx(Fl,{type:"oauth",name:"discord",unavailable:!0})]})]}),m.jsx(OS,{})]})]})}const Fl=({type:e,name:t,unavailable:n})=>{const r=h0(t,{strict:!0}),s=Vc(),o=Object.fromEntries(s.schema.properties.strategies.additionalProperties.anyOf.map(u=>[u.properties.type.const,u]))[e],{active:a,toggle:c}=_$("/strategies/:strategy?",t);return o?m.jsx(j3,{schema:o,prefix:t,children:m.jsxs(Xv.Item,{hasError:r.length>0,className:n?"opacity-20 pointer-events-none cursor-not-allowed":void 0,children:[m.jsx(Xv.Preview,{left:m.jsx(J4e,{type:e,provider:t}),right:m.jsxs(m.Fragment,{children:[m.jsx(Y4e,{type:e}),m.jsx(xt,{Icon:ym,size:"lg",iconProps:{strokeWidth:1.5},variant:a?"primary":"ghost",onClick:()=>c(!a)})]}),children:m.jsx("span",{className:"leading-none",children:Ku(t)})}),m.jsx(Xv.Detail,{open:a,children:m.jsx(X4e,{type:e,name:t})})]})}):null},Y4e=({type:e})=>{const t=jd(""),{value:n}=f0("");function r(s){const i=s.target.value,o=Object.keys(n??{}),a=o.length===0||o.length===1&&o[0]==="enabled";!i&&a?t.deleteValue(t.path):t.setValue([t.path,"enabled"].join("."),i)}return m.jsx(fi,{name:"enabled",label:!1,required:!0,onChange:r})},J4e=({type:e,provider:t})=>{if(e==="password")return m.jsx(xSe,{className:"size-5"});if(t&&t in g9){const n=g9[t];return m.jsx(n,{className:"size-5"})}return m.jsx(NSe,{className:"size-5"})},g9={google:hSe,github:fSe,facebook:dSe,x:_Se,instagram:ESe,apple:cSe,discord:uSe},X4e=({type:e,name:t})=>{let n=r=>m.jsx(jS,{path:"",wrapperProps:{wrapper:"group",label:!1}});switch(e){case"password":n=K4e;break;case"oauth":n=Q4e;break}return m.jsxs(m.Fragment,{children:[m.jsx(xG,{name:"type",inputProps:{disabled:!0,defaultValue:e}}),m.jsx(n,{type:e,name:t})]})},K4e=()=>m.jsx(jS,{path:"config",wrapperProps:{wrapper:"group",label:!1}}),Q4e=({type:e,name:t})=>m.jsxs(m.Fragment,{children:[m.jsx(xG,{name:"config.name",inputProps:{disabled:!0,defaultValue:t}}),m.jsx(fi,{name:"config.client.client_id",required:!0,inputProps:{type:"password"}}),m.jsx(fi,{name:"config.client.client_secret",required:!0,inputProps:{type:"password"}})]});function Z4e(){return null}function e5e(){return m.jsxs(wEe,{children:[m.jsx(at,{path:"/",component:CEe}),m.jsx(at,{path:"/users",component:Z4e}),m.jsx(at,{path:"/roles",component:T4e}),m.jsx(at,{path:"/roles/edit/:role",component:P4e}),m.jsx(at,{path:"/strategies/:strategy?",component:H4e}),m.jsx(at,{path:"/settings",component:L4e})]})}function t5e(){return Gr(["Login"]),m.jsx($W.Screen,{action:"login",logo:m.jsx(In,{href:"/",className:"link",children:m.jsx(eS,{scale:.25})})})}const OG={data:{btnCreateEntity:"data-btns-create-entity"},media:{switchEnabled:"media-switch-enabled"}};function n5e({children:e}){const{entities:t,$data:n}=Fs(),r={regular:[],generated:[],system:[]},[s]=Dn(),i=window.location.href.match(/\/schema/)?"schema":"data";for(const a of Object.values(t))r[a.getType()].push(a);function o(a){var u;if(!a)return;const c=((u=window.location.href.match(/\/entity\/([^/]+)/))==null?void 0:u[1])||null;switch(a){case"data":c?s(ut.data.entity.list(c)):s(ut.data.root(),{absolute:!0});break;case"schema":s(c?ut.data.schema.entity(c):ut.data.schema.root());break}}return m.jsxs(m.Fragment,{children:[m.jsxs(Ed,{children:[m.jsx(An,{right:m.jsxs(m.Fragment,{children:[m.jsx(md,{data:[{value:"data",label:"Data"},{value:"schema",label:"Schema"}],value:i,onChange:o}),m.jsx(Q1,{children:m.jsx(Pc,{label:"New Entity",children:m.jsx(xt,{Icon:$q,onClick:n.modals.createEntity})})})]}),children:"Entities"}),m.jsx(Zn,{initialOffset:96,children:m.jsxs("div",{className:"flex flex-col flex-grow py-3 gap-3",children:[m.jsx(G_,{entities:r.regular,context:i,suggestCreate:!0}),m.jsx(G_,{entities:r.system,context:i,title:"System"}),m.jsx(G_,{entities:r.generated,context:i,title:"Generated"})]})})]}),m.jsx(n0,{children:e})]})}const G_=({entities:e,title:t,context:n,suggestCreate:r=!1})=>{const{$data:s}=Fs(),{readonly:i}=dt(),o=Uwe();if(e.length===0)return r?i?m.jsx(qn,{className:"py-10",description:"No entities created."}):m.jsx(qn,{className:"py-10",description:"Create your first entity to get started.",secondary:{children:"Create entity",onClick:()=>s.modals.createEntity()}}):null;function a(c){return u=>{switch(u.stopPropagation(),u.preventDefault(),n){case"schema":o(f=>f.data.entity.list(c.name));break;case"data":o(f=>f.data.schema.entity(c.name));break}}}return m.jsxs("nav",{className:qe("flex flex-col flex-1 gap-1 px-3",t&&"border-t border-primary/10 pt-2"),children:[t&&m.jsx("div",{className:"text-sm text-primary/50 ml-3.5 mb-1",children:t}),e.map(c=>{const u=n==="data"?ut.data.entity.list(c.name):ut.data.schema.entity(c.name);return m.jsx(r5e,{entity:c,children:m.jsxs(ns,{as:In,href:u,className:"justify-between items-center",children:[m.jsx("span",{className:"truncate",children:c.label}),Mwe(u)&&m.jsx(st,{IconLeft:Axe,size:"small",onClick:a(c),children:n==="schema"?"Data":"Fields"})]})},c.name)})]})},r5e=({entity:e,children:t,enabled:n=!0})=>{if(!n)return t;const[r]=Dn(),{$data:s}=Fs(),i=t.props.href,o=()=>m.jsx("div",{className:"h-px my-1 w-full bg-primary/5"});return m.jsx(jr,{className:"flex flex-col w-full",dropdownWrapperProps:{className:"min-w-fit"},title:e.label+" Actions",items:[i&&{icon:bxe,label:"Open in tab",onClick:()=>r(i,{target:"_blank"})},o,!s.system(e.name).any&&{icon:h$,label:"Create new",onClick:()=>r(ut.data.entity.create(e.name))},{icon:od,label:"List entries",onClick:()=>r(ut.data.entity.list(e.name))},o,{icon:d$,label:"Manage fields",onClick:()=>r(ut.data.schema.entity(e.name))},{icon:f$,label:"Add relation",onClick:()=>s.modals.createRelation(e.name)},!s.system(e.name).media&&{icon:vU,label:"Add media",onClick:()=>s.modals.createMedia(e.name)},o,{icon:Kg,label:"Advanced",onClick:()=>r(ut.settings.path(["data","entities",e.name]),{absolute:!0})}],openEvent:"onContextMenu",position:"bottom-start",children:t})};function s5e(){Gr(["Data"]);const[e]=Dn(),{$data:t}=Fs(),{readonly:n}=dt();function r(){e(ut.data.schema.root())}return n?m.jsx(qn,{Icon:od,title:"No entity selected",description:"Please select an entity from the left sidebar.",primary:{children:"Go to schema",onClick:r}}):m.jsx(qn,{Icon:od,title:"No entity selected",description:"Please select an entity from the left sidebar or create a new one to continue.",secondary:{children:"Go to schema",onClick:r},primary:{children:"Create entity","data-testid":OG.data.btnCreateEntity,onClick:t.modals.createEntity}})}const Zf=new WeakMap,Kv=new WeakMap,pw={current:[]};let Y_=!1,vg=0;const Zp=new Set,fv=new Map;function jG(e){const t=Array.from(e).sort((n,r)=>n instanceof Ma&&n.options.deps.includes(r)?1:r instanceof Ma&&r.options.deps.includes(n)?-1:0);for(const n of t){if(pw.current.includes(n))continue;pw.current.push(n),n.recompute();const r=Kv.get(n);if(r)for(const s of r){const i=Zf.get(s);i&&jG(i)}}}function i5e(e){e.listeners.forEach(t=>t({prevVal:e.prevState,currentVal:e.state}))}function o5e(e){e.listeners.forEach(t=>t({prevVal:e.prevState,currentVal:e.state}))}function AG(e){if(vg>0&&!fv.has(e)&&fv.set(e,e.prevState),Zp.add(e),!(vg>0)&&!Y_)try{for(Y_=!0;Zp.size>0;){const t=Array.from(Zp);Zp.clear();for(const n of t){const r=fv.get(n)??n.prevState;n.prevState=r,i5e(n)}for(const n of t){const r=Zf.get(n);r&&(pw.current.push(n),jG(r))}for(const n of t){const r=Zf.get(n);if(r)for(const s of r)o5e(s)}}}finally{Y_=!1,pw.current=[],fv.clear()}}function ql(e){vg++;try{e()}finally{if(vg--,vg===0){const t=Array.from(Zp)[0];t&&AG(t)}}}class yj{constructor(t,n){this.listeners=new Set,this.subscribe=r=>{var s,i;this.listeners.add(r);const o=(i=(s=this.options)==null?void 0:s.onSubscribe)==null?void 0:i.call(s,r,this);return()=>{this.listeners.delete(r),o==null||o()}},this.setState=r=>{var s,i,o;this.prevState=this.state,this.state=(s=this.options)!=null&&s.updateFn?this.options.updateFn(this.prevState)(r):r(this.prevState),(o=(i=this.options)==null?void 0:i.onUpdate)==null||o.call(i),AG(this)},this.prevState=t,this.state=t,this.options=n}}class Ma{constructor(t){this.listeners=new Set,this._subscriptions=[],this.lastSeenDepValues=[],this.getDepVals=()=>{const n=[],r=[];for(const s of this.options.deps)n.push(s.prevState),r.push(s.state);return this.lastSeenDepValues=r,{prevDepVals:n,currDepVals:r,prevVal:this.prevState??void 0}},this.recompute=()=>{var n,r;this.prevState=this.state;const{prevDepVals:s,currDepVals:i,prevVal:o}=this.getDepVals();this.state=this.options.fn({prevDepVals:s,currDepVals:i,prevVal:o}),(r=(n=this.options).onUpdate)==null||r.call(n)},this.checkIfRecalculationNeededDeeply=()=>{for(const i of this.options.deps)i instanceof Ma&&i.checkIfRecalculationNeededDeeply();let n=!1;const r=this.lastSeenDepValues,{currDepVals:s}=this.getDepVals();for(let i=0;i<s.length;i++)if(s[i]!==r[i]){n=!0;break}n&&this.recompute()},this.mount=()=>(this.registerOnGraph(),this.checkIfRecalculationNeededDeeply(),()=>{this.unregisterFromGraph();for(const n of this._subscriptions)n()}),this.subscribe=n=>{var r,s;this.listeners.add(n);const i=(s=(r=this.options).onSubscribe)==null?void 0:s.call(r,n,this);return()=>{this.listeners.delete(n),i==null||i()}},this.options=t,this.state=t.fn({prevDepVals:void 0,prevVal:void 0,currDepVals:this.getDepVals().currDepVals})}registerOnGraph(t=this.options.deps){for(const n of t)if(n instanceof Ma)n.registerOnGraph(),this.registerOnGraph(n.options.deps);else if(n instanceof yj){let r=Zf.get(n);r||(r=new Set,Zf.set(n,r)),r.add(this);let s=Kv.get(this);s||(s=new Set,Kv.set(this,s)),s.add(n)}}unregisterFromGraph(t=this.options.deps){for(const n of t)if(n instanceof Ma)this.unregisterFromGraph(n.options.deps);else if(n instanceof yj){const r=Zf.get(n);r&&r.delete(this);const s=Kv.get(this);s&&s.delete(n)}}}function $S(e,t=n=>n){return HU.useSyncExternalStoreWithSelector(e.subscribe,()=>e.state,()=>e.state,t,a5e)}function a5e(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,s]of e)if(!t.has(r)||!Object.is(s,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!Object.is(e[n[r]],t[n[r]]))return!1;return!0}const l5e=w.lazy(()=>s0(()=>import("./CodeEditor-BbFL0OTB.js"),[]));function c5e({editable:e,className:t,...n}){return m.jsx(w.Suspense,{fallback:null,children:m.jsx(l5e,{className:qe("flex w-full border border-muted",!e&&"opacity-70",t),editable:e,_extensions:{json:!0},...n})})}function u5e({fieldApi:e,field:t,data:n,disabled:r,...s}){function i(a){r||e.setValue(a)}const o=n==null?void 0:n[t.name];return m.jsxs(Zi,{children:[m.jsx(Em,{htmlFor:e.name,field:t}),m.jsx("div",{"data-disabled":r?1:void 0,className:"data-[disabled]:opacity-70 data-[disabled]:pointer-events-none",children:m.jsx(vm,{schema:t.getJsonSchema(),onChange:i,direction:"horizontal",formData:o,uiSchema:{"ui:globalOptions":{flexDirection:"row"},...t.getJsonUiSchema()}})})]})}function $3({entity:e,select:t,...n}){const r=t??e.getSelect(),s=e.getFields();function i(c){return s.find(u=>u.name===c)}function o(c){try{return i(c).getLabel()}catch(u){return console.warn("Couldn't render header",{entity:e,select:t,...n},u),c}}function a({value:c,property:u}){let f=c;try{f=i(u).getValue(c,"table")}catch(h){console.warn("Couldn't render value",{value:c,property:u,entity:e,select:t,columns:r,...n},h)}return m.jsx(bm,{fallback:String(f),children:m.jsx(xS,{value:f,property:u})})}return m.jsx(vS,{...n,columns:r,renderHeader:o,renderValue:a})}function d5e({fieldApi:e,field:t,data:n,disabled:r,tabIndex:s}){const{app:i}=dt(),o=i.entity(t.target()),[a,c]=w.useState({limit:10,page:1,perPage:10,select:o.getSelect(void 0,"table")});vi();const u=w.useRef(null),f=J1(t.target(),void 0,{select:a.select,limit:a.limit,offset:(a.page-1)*a.limit}),[h,p]=w.useState(),y=n==null?void 0:n[t.reference()],v=n==null?void 0:n[t.name];w.useEffect(()=>{const E=n==null?void 0:n[t.reference()];p(E)},[y]),w.useEffect(()=>{(async()=>{if(!t.target()||!v)return;const N=await f.api.readOne(t.target(),v);N.ok&&N.data&&p(N.data)})()},[v]),w.useEffect(()=>{var E;if(t.isRequired()&&!e.state.value){const N=(E=f.data)==null?void 0:E[0];if(!N)return;console.warn("setting first value because field is required",t.name,N.id),e.setValue(N.id),p(N)}},[f.data]);const x=f.isLoading||f.isValidating;return m.jsxs(Zi,{children:[m.jsx(Em,{htmlFor:e.name,field:t,label:t.getLabel({fallback:!1})??o.label}),m.jsx("div",{"data-disabled":x||r?1:void 0,className:"data-[disabled]:opacity-70 data-[disabled]:pointer-events-none",children:m.jsx(a3,{backdrop:!0,className:"",target:({toggle:E})=>m.jsx(f5e,{container:f.data,entity:o,query:a,toggle:E,onClickRow:N=>{e.setValue(N.id),p(N),E()},onClickPage:N=>{console.log("setting page",N),c(_=>({..._,page:N}))}}),children:m.jsx("div",{ref:u,className:"bg-muted/40 w-full h-11 focus:bg-muted rounded-md items-center px-2.5 outline-none focus:outline-none focus:ring-2 focus:ring-zinc-500 focus:border-transparent transition-all disabled:bg-muted/50 disabled:text-primary/50 cursor-pointer active:bg-muted/80 hover:bg-muted/60 flex flex-row gap-2",tabIndex:s,onKeyDown:m1e([["Enter",()=>{var E;(E=u.current)==null||E.click()}]]),children:h?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"flex bg-primary/10 px-2 leading-none py-1.5 rounded-lg font-mono text-sm",children:ci(o.name)}),m.jsx("div",{className:"flex flex-row gap-3 overflow-clip w-1 flex-grow",children:h&&Object.entries(h).map(([E,N])=>{const _=o.getField(E);if(_.isHidden("table"))return null;const C=_.getValue(N,"table");return m.jsxs("div",{className:"flex flex-row gap-1 items-center flex-nowrap",children:[m.jsxs("span",{className:"opacity-60 text-nowrap",children:[_.getLabel(),":"]})," ",C!==null&&typeof C<"u"?m.jsx(bm,{fallback:JSON.stringify(C),suppressError:!0,children:m.jsx("span",{className:"text-nowrap truncate",children:C})}):m.jsx("span",{className:"opacity-30 text-nowrap font-mono mt-0.5",children:"null"})]},E)})}),m.jsx(In,{to:ut.data.entity.edit(o.name,h.id),children:m.jsx(st,{IconLeft:Rq,size:"small",children:"View"})})]}):m.jsx("div",{className:"pl-2",children:"- Select -"})})})}),m.jsx(il,{type:"hidden",name:e.name,id:e.name,value:e.state.value??"",onChange:console.log,tabIndex:-1})]})}const f5e=({container:e,entity:t,query:n,toggle:r,onClickRow:s,onClickPage:i})=>{var c;function o(){var u;n.limit*n.page<((u=e.meta)==null?void 0:u.count)&&(i==null||i(n.page+1))}function a(){n.page>1&&(i==null||i(n.page-1))}return x$([["ArrowRight",o],["ArrowLeft",a],["Escape",r]]),m.jsx("div",{children:m.jsx($3,{classNames:{value:"line-clamp-1 truncate max-w-52 text-nowrap"},data:e??[],entity:t,select:n.select,total:(c=e.body.meta)==null?void 0:c.count,page:n.page,onClickRow:s,onClickPage:i})})};function TG({entity:e,entityId:t,handleSubmit:n,fieldsDisabled:r,Form:s,data:i,className:o,action:a}){const c=e.getFillableFields(a,!0),u=sS(e,a);return m.jsxs("form",{onSubmit:n,children:[m.jsx(s.Subscribe,{selector:f=>[f.canSubmit,f.isValid,f.errors],children:([f,h,p])=>!h&&m.jsxs("div",{className:"flex flex-col dark:bg-red-950 bg-red-100 p-4",children:[m.jsx("p",{children:"Form is invalid."}),Array.isArray(p)&&m.jsx("ul",{className:"list-disc",children:p.map((y,v)=>m.jsx("li",{className:"ml-6",children:y},v))})]})}),m.jsx("div",{className:o,children:c.map((f,h)=>{if(f instanceof qg)return m.jsx(m5e,{entity:e,entityId:t,formApi:s,field:f},f.name+h);if(!f.isFillable(a))return;const p=`${e.name}-${f.name}-${h}`;return m.jsx(bm,{fallback:m.jsxs(No.Exception,{className:"font-mono",children:["Field error: ",f.name]}),children:m.jsx(s.Field,{name:f.name,children:y=>{const v=u.field(f.name);if(v!=null&&v.render){const x=v.render(a,e,f,{handleChange:y.handleChange,value:y.state.value,data:i});if(x)return x}if(!f.isHidden(a))return m.jsx(h5e,{field:f,fieldApi:y,disabled:r,tabIndex:h+1,action:a,data:i})}})},p)})}),m.jsx("div",{className:"hidden",children:m.jsx("button",{type:"submit"})})]})}function h5e({fieldApi:e,field:t,action:n,data:r,...s}){const i=Dt(u=>{typeof u=="object"&&"target"in u?e.handleChange(u.target.value):e.handleChange(u)});if(t.type==="relation")return m.jsx(d5e,{fieldApi:e,field:t,data:r,disabled:s.disabled,tabIndex:s.tabIndex});if(t.type==="json")return m.jsx(p5e,{fieldApi:e,field:t,...s});if(t.type==="jsonschema")return m.jsx(u5e,{fieldApi:e,field:t,data:r,disabled:s.disabled,tabIndex:s.tabIndex,...s});if(t.type==="enum")return m.jsx(g5e,{fieldApi:e,field:t,...s});const o=t.getHtmlConfig().element,a=t.getHtmlConfig().props,c=rAe(o??"input");return m.jsxs(Zi,{children:[m.jsx(Em,{htmlFor:e.name,field:t}),m.jsx(c,{...a,name:e.name,id:e.name,value:e.state.value,onBlur:e.handleBlur,onChange:i,required:t.isRequired(),...s})]})}function m5e({formApi:e,field:t,entity:n,entityId:r,disabled:s}){if(!r)return;const i=50,o=t.getMaxItems(),a=o===1,c=a?1:o&&o>i?i:o,u=$S(e.store,p=>{const y=p.values[t.name];return!y||typeof y>"u"?[]:Array.isArray(y)?y:[y]}),f=JSON.stringify([n,r,t.name,u.length]),h=p=>{Nr.open(Nr.ids.mediaInfo,{file:p})};return m.jsxs(Zi,{children:[m.jsx(Em,{field:t}),m.jsx(p3.Dropzone,{maxItems:o,allowedMimeTypes:t.getAllowedMimeTypes(),initialItems:a?u:void 0,onClick:h,entity:{name:n.name,id:r,field:t.name},query:{sort:"-id",limit:c}},f)]})}function p5e({fieldApi:e,field:t,...n}){const r=Dt(s=>{e.handleChange(s)});return m.jsxs(Zi,{children:[m.jsx(Em,{htmlFor:e.name,field:t}),m.jsx(w.Suspense,{children:m.jsx(c5e,{id:e.name,value:e.state.value,onChange:r,onBlur:e.handleBlur,minHeight:"100",...n})})]})}function g5e({fieldApi:e,field:t,...n}){const r=Dt(s=>{e.handleChange(s.target.value)});return m.jsxs(Zi,{children:[m.jsx(Em,{htmlFor:e.name,field:t}),m.jsxs(NW,{name:e.name,id:e.name,value:e.state.value,onBlur:e.handleBlur,onChange:r,required:t.isRequired(),...n,children:[!t.isRequired()&&m.jsx("option",{value:"",children:"- Select -"}),t.getOptions().map(s=>m.jsx("option",{value:s.value,children:s.label},s.value))]})]})}function RS(e,t){return typeof e=="function"?e(t):e}function $G(e,t){return R3(t).reduce((r,s)=>{if(r===null)return null;if(typeof r<"u")return r[s]},e)}function J_(e,t,n){const r=R3(t);function s(i){if(!r.length)return RS(n,i);const o=r.shift();if(typeof o=="string"||typeof o=="number"&&!Array.isArray(i))return typeof i=="object"?(i===null&&(i={}),{...i,[o]:s(i[o])}):{[o]:s()};if(Array.isArray(i)&&typeof o=="number"){const a=i.slice(0,o);return[...a.length?a:new Array(o),s(i[o]),...i.slice(o+1)]}return[...new Array(o),s()]}return s(e)}function y5e(e,t){const n=R3(t);function r(s){if(!s)return;if(n.length===1){const o=n[0];if(Array.isArray(s)&&typeof o=="number")return s.filter((u,f)=>f!==o);const{[o]:a,...c}=s;return c}const i=n.shift();if(typeof i=="string"&&typeof s=="object")return{...s,[i]:r(s[i])};if(typeof i=="number"&&Array.isArray(s)){if(i>=s.length)return s;const o=s.slice(0,i);return[...o.length?o:new Array(i),r(s[i]),...s.slice(i+1)]}throw new Error("It seems we have created an infinite loop in deleteBy. ")}return r(e)}const b5e=/^(\d*)$/gm,v5e=/\.(\d*)\./gm,x5e=/^(\d*)\./gm,w5e=/\.(\d*$)/gm,S5e=/\.{2,}/gm,bj="__int__",hv=`${bj}$1`;function R3(e){if(Array.isArray(e))return[...e];if(typeof e!="string")throw new Error("Path must be a string.");return e.replace(/\[/g,".").replace(/\]/g,"").replace(b5e,hv).replace(v5e,`.${hv}.`).replace(x5e,`${hv}.`).replace(w5e,`.${hv}`).replace(S5e,".").split(".").map(t=>t.indexOf(bj)===0?parseInt(t.substring(bj.length),10):t)}function E5e(e){return!(Array.isArray(e)&&e.length===0)}function vj(e,t){const{asyncDebounceMs:n}=t,{onChangeAsync:r,onBlurAsync:s,onSubmitAsync:i,onBlurAsyncDebounceMs:o,onChangeAsyncDebounceMs:a}=t.validators||{},c=n??0,u={cause:"change",validate:r,debounceMs:a??c},f={cause:"blur",validate:s,debounceMs:o??c},h={cause:"submit",validate:i,debounceMs:0},p=y=>({...y,debounceMs:0});switch(e){case"submit":return[p(u),p(f),h];case"blur":return[f];case"change":return[u];case"server":default:return[]}}function xj(e,t){const{onChange:n,onBlur:r,onSubmit:s,onMount:i}=t.validators||{},o={cause:"change",validate:n},a={cause:"blur",validate:r},c={cause:"submit",validate:s},u={cause:"mount",validate:i},f={cause:"server",validate:()=>{}};switch(e){case"mount":return[u];case"submit":return[o,a,c,f];case"server":return[f];case"blur":return[a,f];case"change":default:return[o,f]}}const RG=e=>!!e&&typeof e=="object"&&"fields"in e;function X_(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,s]of e)if(!t.has(r)||!Object.is(s,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!Object.is(e[n[r]],t[n[r]]))return!1;return!0}function N5e(e){const t=new Map;for(const n of e){const r=[...n.path??[]].map(s=>{const i=typeof s=="object"?s.key:s;return typeof i=="number"?`[${i}]`:i}).join(".").replace(/\.\[/g,"[");t.set(r,(t.get(r)??[]).concat(n))}return Object.fromEntries(t)}const _5e=e=>e,C5e=e=>{const t=N5e(e);return{form:t,fields:t}},y9=(e,t)=>e==="form"?C5e(t):_5e(t),kG={validate({value:e,validationSource:t},n){const r=n["~standard"].validate(e);if(r instanceof Promise)throw new Error("async function passed to sync validator");if(r.issues)return y9(t,r.issues)},async validateAsync({value:e,validationSource:t},n){const r=await n["~standard"].validate(e);if(r.issues)return y9(t,r.issues)}},MG=e=>!!e&&"~standard"in e;function mv(e){function t(h,p,y,v){const x=r(h,p,y,v);({insert:()=>a(x,h,p),remove:()=>c(x),swap:()=>v!==void 0&&f(x,h,p,v),move:()=>v!==void 0&&u(x,h,p,v)})[y]()}function n(h,p){return`${h}[${p}]`}function r(h,p,y,v){const x=[n(h,p)];if(y==="swap")x.push(n(h,v));else if(y==="move"){const[E,N]=[Math.min(p,v),Math.max(p,v)];for(let _=E;_<=N;_++)x.push(n(h,_))}else{const E=e.getFieldValue(h),N=Array.isArray(E)?E.length:0;for(let _=p+1;_<N;_++)x.push(n(h,_))}return Object.keys(e.fieldInfo).filter(E=>x.some(N=>E.startsWith(N)))}function s(h,p){return h.replace(/\[(\d+)\]/,(y,v)=>{const x=parseInt(v,10);return`[${p==="up"?x+1:Math.max(0,x-1)}]`})}function i(h,p){(p==="up"?h:[...h].reverse()).forEach(v=>{const x=s(v.toString(),p),E=e.getFieldMeta(x);E?e.setFieldMeta(v,E):e.setFieldMeta(v,o())})}const o=()=>({isValidating:!1,isTouched:!1,isBlurred:!1,isDirty:!1,isPristine:!0,errors:[],errorMap:{}}),a=(h,p,y)=>{i(h,"down"),h.forEach(v=>{v.toString().startsWith(n(p,y))&&e.setFieldMeta(v,o())})},c=h=>{i(h,"up")},u=(h,p,y,v)=>{const x=new Map(Object.keys(e.fieldInfo).filter(E=>E.startsWith(n(p,y))).map(E=>[E,e.getFieldMeta(E)]));i(h,y<v?"up":"down"),Object.keys(e.fieldInfo).filter(E=>E.startsWith(n(p,v))).forEach(E=>{const N=E.replace(n(p,v),n(p,y)),_=x.get(N);_&&e.setFieldMeta(E,_)})},f=(h,p,y,v)=>{h.forEach(x=>{if(!x.toString().startsWith(n(p,y)))return;const E=x.toString().replace(n(p,y),n(p,v)),[N,_]=[e.getFieldMeta(x),e.getFieldMeta(E)];N&&e.setFieldMeta(E,N),_&&e.setFieldMeta(x,_)})};return{handleArrayFieldMetaShift:t}}function K_(e){return{values:e.values??{},errorMap:e.errorMap??{},fieldMetaBase:e.fieldMetaBase??{},isSubmitted:e.isSubmitted??!1,isSubmitting:e.isSubmitting??!1,isValidating:e.isValidating??!1,submissionAttempts:e.submissionAttempts??0,isSubmitSuccessful:e.isSubmitSuccessful??!1,validationMetaMap:e.validationMetaMap??{onChange:void 0,onBlur:void 0,onSubmit:void 0,onMount:void 0,onServer:void 0}}}class O5e{constructor(t){var n;this.options={},this.fieldInfo={},this.prevTransformArray=[],this.cumulativeFieldsErrorMap={},this.mount=()=>{const r=this.fieldMetaDerived.mount(),s=this.store.mount(),i=()=>{r(),s()},{onMount:o}=this.options.validators||{};return o&&this.validateSync("mount"),i},this.update=r=>{var s,i;if(!r)return;const o=this.options;this.options=r;const a=!!((i=(s=r.transform)==null?void 0:s.deps)!=null&&i.some((f,h)=>f!==this.prevTransformArray[h])),c=r.defaultValues&&!X_(r.defaultValues,o.defaultValues)&&!this.state.isTouched,u=!X_(r.defaultState,o.defaultState)&&!this.state.isTouched;!c&&!u&&!a||ql(()=>{this.baseStore.setState(()=>K_(Object.assign({},this.state,u?r.defaultState:{},c?{values:r.defaultValues}:{},a?{_force_re_eval:!this.state._force_re_eval}:{})))})},this.reset=(r,s)=>{const{fieldMeta:i}=this.state,o=this.resetFieldMeta(i);r&&!(s!=null&&s.keepDefaultValues)&&(this.options={...this.options,defaultValues:r}),this.baseStore.setState(()=>{var a;return K_({...this.options.defaultState,values:r??this.options.defaultValues??((a=this.options.defaultState)==null?void 0:a.values),fieldMetaBase:o})})},this.validateAllFields=async r=>{const s=[];return ql(()=>{Object.values(this.fieldInfo).forEach(o=>{if(!o.instance)return;const a=o.instance;s.push(Promise.resolve().then(()=>a.validate(r,{skipFormValidation:!0}))),o.instance.state.meta.isTouched||o.instance.setMeta(c=>({...c,isTouched:!0}))})}),(await Promise.all(s)).flat()},this.validateArrayFieldsStartingFrom=async(r,s,i)=>{const o=this.getFieldValue(r),a=Array.isArray(o)?Math.max(o.length-1,0):null,c=[`${r}[${s}]`];for(let p=s+1;p<=(a??0);p++)c.push(`${r}[${p}]`);const u=Object.keys(this.fieldInfo).filter(p=>c.some(y=>p.startsWith(y))),f=[];return ql(()=>{u.forEach(p=>{f.push(Promise.resolve().then(()=>this.validateField(p,i)))})}),(await Promise.all(f)).flat()},this.validateField=(r,s)=>{var i;const o=(i=this.fieldInfo[r])==null?void 0:i.instance;return o?(o.state.meta.isTouched||o.setMeta(a=>({...a,isTouched:!0})),o.validate(s)):[]},this.validateSync=r=>{const s=xj(r,this.options);let i=!1;const o={};return ql(()=>{var a;for(const u of s){if(!u.validate)continue;const f=this.runValidator({validate:u.validate,value:{value:this.state.values,formApi:this,validationSource:"form"},type:"validate"}),{formError:h,fieldErrors:p}=wj(f),y=pv(u.cause);if(p)for(const[v,x]of Object.entries(p)){const N={...this.cumulativeFieldsErrorMap[v]||{},[y]:x};o[v]=N,this.cumulativeFieldsErrorMap[v]=N;const _=this.getFieldMeta(v);_&&_.errorMap[y]!==x&&this.setFieldMeta(v,C=>({...C,errorMap:{...C.errorMap,[y]:x}}))}for(const v of Object.keys(this.cumulativeFieldsErrorMap)){const x=this.getFieldMeta(v);x!=null&&x.errorMap[y]&&!((a=o[v])!=null&&a[y])&&(this.cumulativeFieldsErrorMap[v]={...this.cumulativeFieldsErrorMap[v],[y]:void 0},this.setFieldMeta(v,E=>({...E,errorMap:{...E.errorMap,[y]:void 0}})))}this.state.errorMap[y]!==h&&this.baseStore.setState(v=>({...v,errorMap:{...v.errorMap,[y]:h}})),(h||p)&&(i=!0)}const c=pv("submit");this.state.errorMap[c]&&r!=="submit"&&!i&&this.baseStore.setState(u=>({...u,errorMap:{...u.errorMap,[c]:void 0}}))}),{hasErrored:i,fieldsErrorMap:o}},this.validateAsync=async r=>{const s=vj(r,this.options);this.state.isFormValidating||this.baseStore.setState(u=>({...u,isFormValidating:!0}));const i=[];let o;for(const u of s){if(!u.validate)continue;const f=pv(u.cause),h=this.state.validationMetaMap[f];h==null||h.lastAbortController.abort();const p=new AbortController;this.state.validationMetaMap[f]={lastAbortController:p},i.push(new Promise(async y=>{let v;try{v=await new Promise((_,C)=>{setTimeout(async()=>{if(p.signal.aborted)return _(void 0);try{_(await this.runValidator({validate:u.validate,value:{value:this.state.values,formApi:this,validationSource:"form",signal:p.signal},type:"validateAsync"}))}catch(j){C(j)}},u.debounceMs)})}catch(_){v=_}const{formError:x,fieldErrors:E}=wj(v);E&&(o=o?{...o,...E}:E);const N=pv(u.cause);if(o)for(const[_,C]of Object.entries(o)){const j=this.getFieldMeta(_);j&&j.errorMap[N]!==C&&this.setFieldMeta(_,A=>({...A,errorMap:{...A.errorMap,[N]:C}}))}this.baseStore.setState(_=>({..._,errorMap:{..._.errorMap,[N]:x}})),y(o?{fieldErrors:o,errorMapKey:N}:void 0)}))}let a=[];const c={};if(i.length){a=await Promise.all(i);for(const u of a)if(u!=null&&u.fieldErrors){const{errorMapKey:f}=u;for(const[h,p]of Object.entries(u.fieldErrors)){const v={...c[h]||{},[f]:p};c[h]=v}}}return this.baseStore.setState(u=>({...u,isFormValidating:!1})),c},this.validate=r=>{const{hasErrored:s,fieldsErrorMap:i}=this.validateSync(r);return s&&!this.options.asyncAlways?i:this.validateAsync(r)},this.getFieldValue=r=>$G(this.state.values,r),this.getFieldMeta=r=>this.state.fieldMeta[r],this.getFieldInfo=r=>{var s;return(s=this.fieldInfo)[r]||(s[r]={instance:null,validationMetaMap:{onChange:void 0,onBlur:void 0,onSubmit:void 0,onMount:void 0,onServer:void 0}})},this.setFieldMeta=(r,s)=>{this.baseStore.setState(i=>({...i,fieldMetaBase:{...i.fieldMetaBase,[r]:RS(s,i.fieldMetaBase[r])}}))},this.resetFieldMeta=r=>Object.keys(r).reduce((s,i)=>{const o=i;return s[o]={isValidating:!1,isTouched:!1,isBlurred:!1,isDirty:!1,isPristine:!0,errors:[],errorMap:{}},s},{}),this.setFieldValue=(r,s,i)=>{const o=(i==null?void 0:i.dontUpdateMeta)??!1;ql(()=>{o||this.setFieldMeta(r,a=>({...a,isTouched:!0,isDirty:!0,errorMap:{...a==null?void 0:a.errorMap,onMount:void 0}})),this.baseStore.setState(a=>({...a,values:J_(a.values,r,s)}))})},this.deleteField=r=>{const i=[...Object.keys(this.fieldInfo).filter(o=>{const a=r.toString();return o!==a&&o.startsWith(a)}),r];this.baseStore.setState(o=>{const a={...o};return i.forEach(c=>{a.values=y5e(a.values,c),delete this.fieldInfo[c],delete a.fieldMetaBase[c]}),a})},this.pushFieldValue=(r,s,i)=>{this.setFieldValue(r,o=>[...Array.isArray(o)?o:[],s],i),this.validateField(r,"change")},this.insertFieldValue=async(r,s,i,o)=>{this.setFieldValue(r,a=>[...a.slice(0,s),i,...a.slice(s)],o),await this.validateField(r,"change"),mv(this).handleArrayFieldMetaShift(r,s,"insert"),await this.validateArrayFieldsStartingFrom(r,s,"change")},this.replaceFieldValue=async(r,s,i,o)=>{this.setFieldValue(r,a=>a.map((c,u)=>u===s?i:c),o),await this.validateField(r,"change"),await this.validateArrayFieldsStartingFrom(r,s,"change")},this.removeFieldValue=async(r,s,i)=>{const o=this.getFieldValue(r),a=Array.isArray(o)?Math.max(o.length-1,0):null;if(this.setFieldValue(r,c=>c.filter((u,f)=>f!==s),i),mv(this).handleArrayFieldMetaShift(r,s,"remove"),a!==null){const c=`${r}[${a}]`;this.deleteField(c)}await this.validateField(r,"change"),await this.validateArrayFieldsStartingFrom(r,s,"change")},this.swapFieldValues=(r,s,i,o)=>{this.setFieldValue(r,a=>{const c=a[s],u=a[i];return J_(J_(a,`${s}`,u),`${i}`,c)},o),mv(this).handleArrayFieldMetaShift(r,s,"swap",i),this.validateField(r,"change"),this.validateField(`${r}[${s}]`,"change"),this.validateField(`${r}[${i}]`,"change")},this.moveFieldValues=(r,s,i,o)=>{this.setFieldValue(r,a=>(a.splice(i,0,a.splice(s,1)[0]),a),o),mv(this).handleArrayFieldMetaShift(r,s,"move",i),this.validateField(r,"change"),this.validateField(`${r}[${s}]`,"change"),this.validateField(`${r}[${i}]`,"change")},this.getAllErrors=()=>({form:{errors:this.state.errors,errorMap:this.state.errorMap},fields:Object.entries(this.state.fieldMeta).reduce((r,[s,i])=>(Object.keys(i).length&&i.errors.length&&(r[s]={errors:i.errors,errorMap:i.errorMap}),r),{})}),this.baseStore=new yj(K_({...t==null?void 0:t.defaultState,values:(t==null?void 0:t.defaultValues)??((n=t==null?void 0:t.defaultState)==null?void 0:n.values)})),this.fieldMetaDerived=new Ma({deps:[this.baseStore],fn:({prevDepVals:r,currDepVals:s,prevVal:i})=>{var o;const a=i,c=r==null?void 0:r[0],u=s[0];let f=0;const h={};for(const p of Object.keys(u.fieldMetaBase)){const y=u.fieldMetaBase[p],v=c==null?void 0:c.fieldMetaBase[p],x=a==null?void 0:a[p];let E=x==null?void 0:x.errors;if(!v||y.errorMap!==v.errorMap){E=Object.values(y.errorMap??{}).filter(C=>C!==void 0);const _=(o=this.getFieldInfo(p))==null?void 0:o.instance;_&&!_.options.disableErrorFlat&&(E=E==null?void 0:E.flat(1))}const N=!y.isDirty;if(x&&x.isPristine===N&&x.errors===E&&y===v){h[p]=x,f++;continue}h[p]={...y,errors:E,isPristine:N}}return Object.keys(u.fieldMetaBase).length&&a&&f===Object.keys(u.fieldMetaBase).length?a:h}}),this.store=new Ma({deps:[this.baseStore,this.fieldMetaDerived],fn:({prevDepVals:r,currDepVals:s,prevVal:i})=>{var o,a,c,u;const f=i,h=r==null?void 0:r[0],p=s[0],y=Object.values(p.fieldMetaBase),v=y.some(V=>V==null?void 0:V.isValidating),x=!y.some(V=>(V==null?void 0:V.errorMap)&&E5e(Object.values(V.errorMap).filter(Boolean))),E=y.some(V=>V==null?void 0:V.isTouched),N=y.some(V=>V==null?void 0:V.isBlurred),_=E&&((o=p==null?void 0:p.errorMap)==null?void 0:o.onMount),C=y.some(V=>V==null?void 0:V.isDirty),j=!C,A=!!((a=p.errorMap)!=null&&a.onMount||y.some(V=>{var T;return(T=V==null?void 0:V.errorMap)==null?void 0:T.onMount})),$=!!v;let k=(f==null?void 0:f.errors)??[];(!h||p.errorMap!==h.errorMap)&&(k=Object.values(p.errorMap).reduce((V,T)=>T===void 0?V:T&&RG(T)?(V.push(T.form),V):(V.push(T),V),[]));const R=k.length===0,B=x&&R,z=p.submissionAttempts===0&&!E&&!A||!$&&!p.isSubmitting&&B;let D=p.errorMap;if(_&&(k=k.filter(V=>V!==p.errorMap.onMount),D=Object.assign(D,{onMount:void 0})),f&&h&&f.errorMap===D&&f.fieldMeta===this.fieldMetaDerived.state&&f.errors===k&&f.isFieldsValidating===v&&f.isFieldsValid===x&&f.isFormValid===R&&f.isValid===B&&f.canSubmit===z&&f.isTouched===E&&f.isBlurred===N&&f.isPristine===j&&f.isDirty===C&&X_(h,p))return f;let L={...p,errorMap:D,fieldMeta:this.fieldMetaDerived.state,errors:k,isFieldsValidating:v,isFieldsValid:x,isFormValid:R,isValid:B,canSubmit:z,isTouched:E,isBlurred:N,isPristine:j,isDirty:C};const H=((c=this.options.transform)==null?void 0:c.deps)??[];if(H.length!==this.prevTransformArray.length||H.some((V,T)=>V!==this.prevTransformArray[T])){const V=Object.assign({},this,{state:L});(u=this.options.transform)==null||u.fn(V),L=V.state,this.prevTransformArray=H}return L}}),this.handleSubmit=this.handleSubmit.bind(this),this.update(t||{})}get state(){return this.store.state}runValidator(t){return MG(t.validate)?kG[t.type](t.value,t.validate):t.validate(t.value)}async handleSubmit(t){var n,r,s,i,o,a;if(this.baseStore.setState(u=>({...u,isSubmitted:!1,submissionAttempts:u.submissionAttempts+1,isSubmitSuccessful:!1})),!this.state.canSubmit)return;this.baseStore.setState(u=>({...u,isSubmitting:!0}));const c=()=>{this.baseStore.setState(u=>({...u,isSubmitting:!1}))};if(await this.validateAllFields("submit"),!this.state.isFieldsValid){c(),(r=(n=this.options).onSubmitInvalid)==null||r.call(n,{value:this.state.values,formApi:this});return}if(await this.validate("submit"),!this.state.isValid){c(),(i=(s=this.options).onSubmitInvalid)==null||i.call(s,{value:this.state.values,formApi:this});return}ql(()=>{Object.values(this.fieldInfo).forEach(u=>{var f,h,p;(p=(h=(f=u.instance)==null?void 0:f.options.listeners)==null?void 0:h.onSubmit)==null||p.call(h,{value:u.instance.state.value,fieldApi:u.instance})})});try{await((a=(o=this.options).onSubmit)==null?void 0:a.call(o,{value:this.state.values,formApi:this,meta:t??this.options.onSubmitMeta})),ql(()=>{this.baseStore.setState(u=>({...u,isSubmitted:!0,isSubmitSuccessful:!0})),c()})}catch(u){throw this.baseStore.setState(f=>({...f,isSubmitSuccessful:!1})),c(),u}}setErrorMap(t){this.baseStore.setState(n=>({...n,errorMap:{...n.errorMap,...t}}))}}function wj(e){if(e){if(RG(e)){const t=wj(e.form).formError,n=e.fields;return{formError:t,fieldErrors:n}}return{formError:e}}return{formError:void 0}}function pv(e){switch(e){case"submit":return"onSubmit";case"blur":return"onBlur";case"mount":return"onMount";case"server":return"onServer";case"change":default:return"onChange"}}class j5e{constructor(t){this.options={},this.mount=()=>{var n,r;const s=this.store.mount(),i=this.getInfo();i.instance=this,this.update(this.options);const{onMount:o}=this.options.validators||{};if(o){const a=this.runValidator({validate:o,value:{value:this.state.value,fieldApi:this,validationSource:"field"},type:"validate"});a&&this.setMeta(c=>({...c,errorMap:{...c==null?void 0:c.errorMap,onMount:a}}))}return(r=(n=this.options.listeners)==null?void 0:n.onMount)==null||r.call(n,{value:this.state.value,fieldApi:this}),s},this.update=n=>{if(this.state.value===void 0){const r=$G(n.form.options.defaultValues,n.name);n.defaultValue!==void 0?this.setValue(n.defaultValue,{dontUpdateMeta:!0}):r!==void 0&&this.setValue(r,{dontUpdateMeta:!0})}this.form.getFieldMeta(this.name)===void 0&&this.setMeta(this.state.meta),this.options=n,this.name=n.name},this.getValue=()=>this.form.getFieldValue(this.name),this.setValue=(n,r)=>{var s,i;this.form.setFieldValue(this.name,n,r),(i=(s=this.options.listeners)==null?void 0:s.onChange)==null||i.call(s,{value:this.state.value,fieldApi:this}),this.validate("change")},this.getMeta=()=>this.store.state.meta,this.setMeta=n=>this.form.setFieldMeta(this.name,n),this.getInfo=()=>this.form.getFieldInfo(this.name),this.pushValue=(n,r)=>{var s,i;this.form.pushFieldValue(this.name,n,r),(i=(s=this.options.listeners)==null?void 0:s.onChange)==null||i.call(s,{value:this.state.value,fieldApi:this})},this.insertValue=(n,r,s)=>{var i,o;this.form.insertFieldValue(this.name,n,r,s),(o=(i=this.options.listeners)==null?void 0:i.onChange)==null||o.call(i,{value:this.state.value,fieldApi:this})},this.replaceValue=(n,r,s)=>{var i,o;this.form.replaceFieldValue(this.name,n,r,s),(o=(i=this.options.listeners)==null?void 0:i.onChange)==null||o.call(i,{value:this.state.value,fieldApi:this})},this.removeValue=(n,r)=>{var s,i;this.form.removeFieldValue(this.name,n,r),(i=(s=this.options.listeners)==null?void 0:s.onChange)==null||i.call(s,{value:this.state.value,fieldApi:this})},this.swapValues=(n,r,s)=>{var i,o;this.form.swapFieldValues(this.name,n,r,s),(o=(i=this.options.listeners)==null?void 0:i.onChange)==null||o.call(i,{value:this.state.value,fieldApi:this})},this.moveValue=(n,r,s)=>{var i,o;this.form.moveFieldValues(this.name,n,r,s),(o=(i=this.options.listeners)==null?void 0:i.onChange)==null||o.call(i,{value:this.state.value,fieldApi:this})},this.getLinkedFields=n=>{const r=Object.values(this.form.fieldInfo),s=[];for(const i of r){if(!i.instance)continue;const{onChangeListenTo:o,onBlurListenTo:a}=i.instance.options.validators||{};n==="change"&&(o!=null&&o.includes(this.name))&&s.push(i.instance),n==="blur"&&(a!=null&&a.includes(this.name))&&s.push(i.instance)}return s},this.validateSync=(n,r)=>{const s=xj(n,this.options),o=this.getLinkedFields(n).reduce((u,f)=>{const h=xj(n,f.options);return h.forEach(p=>{p.field=f}),u.concat(h)},[]);let a=!1;ql(()=>{const u=(f,h)=>{const p=Hp(h.cause),y=h.validate?b9(f.runValidator({validate:h.validate,value:{value:f.store.state.value,validationSource:"field",fieldApi:f},type:"validate"})):r[p];f.state.meta.errorMap[p]!==y&&f.setMeta(v=>({...v,errorMap:{...v.errorMap,[Hp(h.cause)]:y||r[p]}})),(y||r[p])&&(a=!0)};for(const f of s)u(this,f);for(const f of o)f.validate&&u(f.field,f)});const c=Hp("submit");return this.state.meta.errorMap[c]&&n!=="submit"&&!a&&this.setMeta(u=>({...u,errorMap:{...u.errorMap,[c]:void 0}})),{hasErrored:a}},this.validateAsync=async(n,r)=>{const s=vj(n,this.options),i=await r,o=this.getLinkedFields(n),a=o.reduce((p,y)=>{const v=vj(n,y.options);return v.forEach(x=>{x.field=y}),p.concat(v)},[]);this.state.meta.isValidating||this.setMeta(p=>({...p,isValidating:!0}));for(const p of o)p.setMeta(y=>({...y,isValidating:!0}));const c=[],u=[],f=(p,y,v)=>{const x=Hp(y.cause),E=p.getInfo().validationMetaMap[x];E==null||E.lastAbortController.abort();const N=new AbortController;this.getInfo().validationMetaMap[x]={lastAbortController:N},v.push(new Promise(async _=>{var C;let j;try{j=await new Promise((R,B)=>{this.timeoutIds[y.cause]&&clearTimeout(this.timeoutIds[y.cause]),this.timeoutIds[y.cause]=setTimeout(async()=>{if(N.signal.aborted)return R(void 0);try{R(await this.runValidator({validate:y.validate,value:{value:p.store.state.value,fieldApi:p,signal:N.signal,validationSource:"field"},type:"validateAsync"}))}catch(z){B(z)}},y.debounceMs)})}catch(R){j=R}if(N.signal.aborted)return _(void 0);const A=b9(j),$=(C=i[this.name])==null?void 0:C[x],k=A||$;p.setMeta(R=>({...R,errorMap:{...R==null?void 0:R.errorMap,[x]:k}})),_(k)}))};for(const p of s)p.validate&&f(this,p,c);for(const p of a)p.validate&&f(p.field,p,u);let h=[];(c.length||u.length)&&(h=await Promise.all(c),await Promise.all(u)),this.setMeta(p=>({...p,isValidating:!1}));for(const p of o)p.setMeta(y=>({...y,isValidating:!1}));return h.filter(Boolean)},this.validate=(n,r)=>{var s;if(!this.state.meta.isTouched)return[];const{fieldsErrorMap:i}=r!=null&&r.skipFormValidation?{fieldsErrorMap:{}}:this.form.validateSync(n),{hasErrored:o}=this.validateSync(n,i[this.name]??{});if(o&&!this.options.asyncAlways)return(s=this.getInfo().validationMetaMap[Hp(n)])==null||s.lastAbortController.abort(),this.state.meta.errors;const a=r!=null&&r.skipFormValidation?Promise.resolve({}):this.form.validateAsync(n);return this.validateAsync(n,a)},this.handleChange=n=>{this.setValue(n)},this.handleBlur=()=>{var n,r;this.state.meta.isTouched||(this.setMeta(i=>({...i,isTouched:!0})),this.validate("change")),this.state.meta.isBlurred||this.setMeta(i=>({...i,isBlurred:!0})),this.validate("blur"),(r=(n=this.options.listeners)==null?void 0:n.onBlur)==null||r.call(n,{value:this.state.value,fieldApi:this})},this.form=t.form,this.name=t.name,this.timeoutIds={},t.defaultValue!==void 0&&this.form.setFieldValue(this.name,t.defaultValue,{dontUpdateMeta:!0}),this.store=new Ma({deps:[this.form.store],fn:()=>{const n=this.form.getFieldValue(this.name),r=this.form.getFieldMeta(this.name)??{isValidating:!1,isTouched:!1,isBlurred:!1,isDirty:!1,isPristine:!0,errors:[],errorMap:{},...t.defaultMeta};return{value:n,meta:r}}}),this.options=t}get state(){return this.store.state}runValidator(t){return MG(t.validate)?kG[t.type](t.value,t.validate):t.validate(t.value)}setErrorMap(t){this.setMeta(n=>({...n,errorMap:{...n.errorMap,...t}}))}}function b9(e){if(e)return e}function Hp(e){switch(e){case"submit":return"onSubmit";case"blur":return"onBlur";case"mount":return"onMount";case"server":return"onServer";case"change":default:return"onChange"}}const gw=typeof window<"u"?w.useLayoutEffect:w.useEffect;function A5e(e){const[t]=w.useState(()=>{const r=new j5e({...e,form:e.form,name:e.name});return r.Field=IG,r});return gw(t.mount,[t]),gw(()=>{t.update(e)}),$S(t.store,e.mode==="array"?n=>[n.meta,Object.keys(n.value??[]).length]:void 0),t}const IG=({children:e,...t})=>{const n=A5e(t),r=w.useMemo(()=>RS(e,n),[e,n,n.state.value,n.state.meta]);return m.jsx(m.Fragment,{children:r})};function T5e({form:e,selector:t,children:n}){const r=$S(e.store,t);return RS(n,r)}function $5e(e){const[t]=w.useState(()=>{const n=new O5e(e),r=n;return r.Field=function(i){return m.jsx(IG,{...i,form:n})},r.Subscribe=s=>m.jsx(T5e,{form:n,selector:s.selector,children:s.children}),r});return gw(t.mount,[]),$S(t.store,n=>n.isSubmitting),gw(()=>{t.update(e)}),t}function R5e(e,t){return ti(e,(n,r)=>{n[r.name]=r.getValue(t==null?void 0:t[r.name],"form")??""},{})}function k5e(e,t,n,r){return ti(t,(s,i,o)=>{const a=r.find(f=>f.name===o);if(!a||a.isVirtual())return;const c=i===""?null:i,u=a.getValue(c,"submit")||null;(e==="create"||u!==n[o])&&(s[o]=u)},{})}function PG({action:e="update",entity:t,initialData:n,onSubmitted:r}){const s=n??{},i=t.getFillableFields(e,!0),o=R5e(i,s),a=$5e({defaultValues:o,validators:{onSubmitAsync:async({value:u})=>{try{t.isValidData(u,e,{explain:!0,ignoreUnknown:!0});return}catch(f){return f.message}}},onSubmit:async({value:u,formApi:f})=>{if(!t.isValidData(u,e)){console.error("invalid data",u);return}if(!s)return;const h=k5e(e,u,s,i);await(r==null?void 0:r(Object.keys(h).length===0?void 0:h))}});async function c(u){u.preventDefault(),u.stopPropagation(),a.handleSubmit()}return{Form:a,handleSubmit:c,fields:i,action:e,values:o,initialData:n}}function M5e({params:e}){return m.jsx(I5e,{params:e},e.entity)}function I5e({params:e}){var k,R,B,z,D;const{$data:t,relations:n}=Fs(),r=t.entity(e.entity);if(!r)return m.jsx(Is.NotFound,{description:`Entity "${e.entity}" doesn't exist.`});const s=e.id,[i,o]=w.useState(null),[a,c,u]=Dn();Gr(["Data",r.label,`#${s}`]);const f=n.listableRelationsOf(r),h=(k=n.sourceRelationsOf(r))==null?void 0:k.map(L=>L.other(r).reference),p=J1(r.name,s,{with:h},{keepPreviousData:!1,revalidateOnFocus:!1,shouldRetryOnError:!1}),y=sS(r,"update",p.data),v=ut.data.entity.list(r.name),x=()=>u({fallback:v});async function E(L){if(!L){si.show({title:`Updating ${r==null?void 0:r.label}`,message:"No changes to update",color:"yellow"});return}try{await p.update(L),i&&o(null),si.show({title:`Updating ${r==null?void 0:r.label}`,message:`Successfully updated ID ${s}`,color:"green"}),C.reset()}catch(H){o(H instanceof Error?H.message:"Failed to update")}}async function N(){if(confirm("Are you sure to delete?"))try{await p._delete(),i&&o(null),si.show({title:`Deleting ${r==null?void 0:r.label}`,message:`Successfully deleted ID ${s}`,color:"green"}),x()}catch(L){o(L instanceof Error?L.message:"Failed to delete")}}const _=p.data,{Form:C,handleSubmit:j}=PG({action:"update",entity:r,initialData:(R=p.data)==null?void 0:R.toJSON(),onSubmitted:E});if(!_&&!p.isLoading)return m.jsx(Is.NotFound,{description:`Entity "${e.entity}" with ID "${s}" doesn't exist.`});const A=(L="")=>`${r.name}_${s}_${String(L)}`,$=p.isLoading||p.isValidating||C.state.isSubmitting;return m.jsxs(w.Fragment,{children:[m.jsx(An,{right:m.jsxs(m.Fragment,{children:[m.jsx(jr,{position:"bottom-end",items:[...((B=y.actions)==null?void 0:B.context)??[],{label:"Inspect",onClick:()=>{Nr.open("debug",{data:{data:_,entity:r.toJSON(),schema:r.toSchema({clean:!0}),form:C.state.values,state:C.state}})}},{label:"Settings",onClick:()=>a(ut.settings.path(["data","entities",r.name]),{absolute:!0})},{label:"Delete",onClick:N,destructive:!0,disabled:$}],children:m.jsx(xt,{Icon:nl})}),(D=(z=y.actions)==null?void 0:z.primary)==null?void 0:D.map((L,H)=>L&&w.createElement(st,{variant:"primary",...L,type:"button",key:H})),m.jsx(C.Subscribe,{selector:L=>[L.canSubmit,L.isSubmitting],children:([L,H])=>m.jsx(st,{type:"button",onClick:C.handleSubmit,variant:"primary",tabIndex:r.fields.length+1,disabled:!L||H||$,children:"Update"})})]}),className:"pl-3",children:m.jsx(TS,{backTo:v,path:[{label:r.label,href:v},{label:`Edit #${s}`}]})}),p.isLoading?m.jsx("div",{className:"w-full h-full flex justify-center items-center font-mono opacity-30",children:"Loading..."}):m.jsxs(Zn,{children:[y.header,i&&m.jsxs("div",{className:"flex flex-row dark:bg-red-950 bg-red-100 p-4",children:[m.jsx("b",{className:"mr-2",children:"Update failed: "})," ",i]}),m.jsx(TG,{entity:r,entityId:s,handleSubmit:j,fieldsDisabled:$,data:_??void 0,Form:C,action:"update",className:"flex flex-grow flex-col gap-3 p-3"}),y.footer,f.length>0?m.jsx(P5e,{id:s,entity:r,relations:f}):null]})]},A())}function P5e({id:e,entity:t,relations:n}){const[r,s]=w.useState(n.length>0?n[0]:void 0);function i(o){s(o)}return n.length===0?null:m.jsxs("div",{className:"flex flex-col max-w-full",children:[m.jsx(Bq,{title:"Relations",items:n.map(o=>{const a=o.other(t);return{as:"button",type:"button",label:ci(a.reference),onClick:()=>i(o),active:(r==null?void 0:r.other(t).reference)===a.reference,badge:o.type()}})}),m.jsx("div",{className:"flex flex-grow flex-col gap-3 p-3",children:m.jsx(D5e,{id:e,entity:t,relation:r},JSON.stringify(r==null?void 0:r.toJSON()))})]})}function D5e({id:e,entity:t,relation:n}){var h,p,y;const r=n.other(t),[s]=Dn(),[i,o]=w.useState({select:r.entity.getSelect(void 0,"table"),sort:r.entity.getDefaultSort(),limit:10,offset:0}),a=Y1(v=>v.data.readManyByReference(t.name,e,r.reference,i),{keepPreviousData:!0,revalidateOnFocus:!0});function c(v){s(ut.data.entity.edit(r.entity.name,v.id))}let u;try{if(r.entity.type!=="system"){const v=n.getReferenceQuery(r.entity,e,r.reference);u=()=>{s(ut.data.entity.create(r.entity.name),{query:v.where})}}}catch{}if(!a.data)return null;const f=a.isValidating||a.isLoading;return m.jsx("div",{"data-updating":f?1:void 0,className:"transition-opacity data-[updating]:opacity-50",children:m.jsx($3,{select:i.select,data:a.data??null,entity:r.entity,sort:i.sort,onClickRow:c,onClickNew:u,page:Math.floor(i.offset/i.limit)+1,total:((y=(p=(h=a.data)==null?void 0:h.body)==null?void 0:p.meta)==null?void 0:y.count)??1,onClickPage:v=>{o(x=>({...x,offset:(v-1)*x.limit}))}})})}function DG(e,t){const n=Awe(),[r,s]=vi(),[i,o]=w.useState((t==null?void 0:t.defaultValue)??{}),a=w.useMemo(()=>pF(e.template({withOptional:!0}),(t==null?void 0:t.defaultValue)??{}),[JSON.stringify({schema:e,dflt:t==null?void 0:t.defaultValue})]);w.useEffect(()=>{const u=n.length>0?Joe(n):(t==null?void 0:t.defaultValue)??{},f=Un(e,Object.assign({},a,u));o(f)},[n,JSON.stringify(t==null?void 0:t.defaultValue),r]);function c(u){var y;const f=L5e(Object.assign({},i,u),a),h=((y=t==null?void 0:t.beforeEncode)==null?void 0:y.call(t,f))??f,p=y1(h,{encode:!1});s(r+(p.length>0?"?"+p:""))}return{value:i,set:c}}function L5e(e,t){return ti(e,(n,r,s)=>{t&&Az(r,t[s])||(n[s]=r)},{})}function F5e({params:e}){var N,_,C;const{$data:t}=Fs(),[n,r,s]=Dn(),i=t.entity(e.entity);if(i){if(i.type==="system")return m.jsx(Is.NotAllowed,{description:`Entity "${e.entity}" cannot be created.`})}else return m.jsx(Is.NotFound,{description:`Entity "${e.entity}" doesn't exist.`});const o=sS(i,"create"),[a,c]=w.useState(null);Gr(["Data",i.label,"Create"]);const u=ixe(i.name),f=DG(ze({}),{}),h=ut.data.entity.list(i.name),p=()=>s({fallback:h});async function y(j){if(console.log("create:changeSet",j),!!j)try{const A=await u.create(j);a&&c(null),A.id?(si.show({title:`Creating ${i==null?void 0:i.label}`,message:`Successfully created with ID ${A.id}`,color:"green"}),n(ut.data.entity.edit(e.entity,A.id))):p()}catch(A){c(A instanceof Error?A.message:"Failed to create")}}const{Form:v,handleSubmit:x}=PG({action:"create",entity:i,initialData:f.value,onSubmitted:y}),E=u.isLoading||u.isValidating||v.state.isSubmitting;return m.jsxs(m.Fragment,{children:[m.jsx(An,{right:m.jsxs(m.Fragment,{children:[((N=o.actions)==null?void 0:N.context)&&m.jsx(jr,{position:"bottom-end",items:o.actions.context,children:m.jsx(xt,{Icon:nl})}),m.jsx(st,{onClick:p,children:"Cancel"}),(C=(_=o.actions)==null?void 0:_.primary)==null?void 0:C.map((j,A)=>j&&w.createElement(st,{...j,type:"button",key:A,variant:"primary"})),m.jsx(v.Subscribe,{selector:j=>[j.canSubmit,j.isSubmitting],children:([j,A])=>m.jsx(st,{type:"button",onClick:v.handleSubmit,variant:"primary",tabIndex:i.fields.length,disabled:!j||A,children:"Create"})})]}),className:"pl-3",children:m.jsx(TS,{backTo:h,path:[{label:i.label,href:h},{label:"Create"}]})}),m.jsxs(Zn,{children:[o.header,a&&m.jsxs("div",{className:"flex flex-row dark:bg-red-950 bg-red-100 p-4",children:[m.jsx("b",{className:"mr-2",children:"Create failed: "})," ",a]}),m.jsx(TG,{entity:i,handleSubmit:x,fieldsDisabled:E,data:f.value,Form:v,action:"create",className:"flex flex-grow flex-col gap-3 p-3"}),o.footer]},i.name)]})}function B5e(){const e=Fo(),{config:t}=Vc(),n=u$(),[r]=Dn();return{open:async()=>{const i=Nr.open("overlay",{content:"Loading..."}),o=await e.auth.actionSchema("password","create");i.closeAll(),Nr.open("form",{schema:o,uiSchema:{password:{"ui:widget":"password"}},autoCloseAfterSubmit:!1,onSubmit:async(a,c)=>{console.log("submitted:",a,c);const u=await e.auth.action("password","create",a);console.log(u),u.ok?(n(),r(ut.data.entity.edit(t.entity_name,u.data.id)),c.close()):"error"in u?c.setError(u.error):c.setError("Unknown error")}},{title:"Create User"})}}}const z5e=$F({...yF(Ks.properties,["select","where","sort"]),page:jt({default:1}).optional(),perPage:jt({default:10}).optional()}),V5e=[5,10,25,50,100];function U5e({params:e}){return m.jsx(q5e,{params:e},e.entity)}function q5e({params:e}){var v,x,E,N,_;const{$data:t}=Fs(),n=t.entity(e.entity);if(!n)return m.jsx(Is.NotFound,{description:`Entity "${e.entity}" doesn't exist.`});const r=sS(n,"list");Gr(["Data",(n==null?void 0:n.label)??e.entity]);const[s]=Dn(),i=DG(z5e,{defaultValue:{select:n.getSelect(void 0,"table"),sort:n.getDefaultSort()},beforeEncode:C=>"sort"in C&&C.sort?{...C,sort:`${C.sort.dir==="asc"?"":"-"}${C.sort.by}`}:C}),o=Y1(C=>C.data.readMany(n==null?void 0:n.name,{select:i.value.select,limit:i.value.perPage,offset:(i.value.page-1)*i.value.perPage,sort:`${i.value.sort.dir==="asc"?"":"-"}${i.value.sort.by}`}),{enabled:!!n,revalidateOnFocus:!0,keepPreviousData:!0}),a=(v=o.data)==null?void 0:v.data,c=(x=o.data)==null?void 0:x.body.meta;function u(C){n&&s(ut.data.entity.edit(n.name,C.id))}function f(C){i.set({page:C})}function h(C){const j=i.value.sort,A={by:C,dir:j.by===C&&j.dir==="asc"?"desc":"asc"};i.set({sort:A})}function p(C){i.set({perPage:C,page:1})}const y=o.isLoading||o.isValidating;return m.jsxs(w.Fragment,{children:[m.jsx(An,{right:m.jsxs(m.Fragment,{children:[m.jsx(jr,{items:[...((E=r.actions)==null?void 0:E.context)??[],{label:"Settings",onClick:()=>s(ut.data.schema.entity(n.name))},{label:"Data Schema",onClick:()=>s(ut.data.schema.root())},{label:"Advanced Settings",onClick:()=>s(ut.settings.path(["data","entities",n.name]),{absolute:!0})}],position:"bottom-end",children:m.jsx(xt,{Icon:nl})}),(_=(N=r.actions)==null?void 0:N.primary)==null?void 0:_.map((C,j)=>C&&w.createElement(st,{variant:"primary",...C,type:"button",key:j})),m.jsx(H5e,{entity:n})]}),children:m.jsx(r0,{children:n.label})}),m.jsxs(Zn,{children:[r.header,m.jsx("div",{className:"flex flex-col flex-grow p-3 gap-3",children:m.jsx("div",{"data-updating":y?1:void 0,className:"data-[updating]:opacity-50 transition-opacity",children:m.jsx($3,{data:a??null,entity:n,select:i.value.select,onClickRow:u,page:i.value.page,sort:i.value.sort,onClickSort:h,perPage:i.value.perPage,perPageOptions:V5e,total:c==null?void 0:c.count,onClickPage:f,onClickPerPage:p})})}),r.footer]},n.name)]},n.name)}function H5e({entity:e}){const t=dt(),n=B5e(),[r]=Dn();return e?e.type==="system"?{users:t.app.config.auth.entity_name,media:t.app.config.media.entity_name}.users===e.name?m.jsx(st,{onClick:n.open,variant:"primary",children:"New User"}):null:m.jsx(st,{onClick:()=>{r(ut.data.entity.create(e.name))},variant:"primary",children:"Create new"}):null}function W5e({params:e}){const{$data:t}=Fs(),[n]=Dn(),r=t.entity(e.entity);return r?m.jsxs(Q1e,{path:`/entity/${r.name}/:setting?`,defaultIdentifier:"fields",children:[m.jsx(An,{right:m.jsxs(m.Fragment,{children:[m.jsx(jr,{items:[{label:"Data",onClick:()=>n(ut.data.root()+ut.data.entity.list(r.name),{absolute:!0})},{label:"Advanced Settings",onClick:()=>n(ut.settings.path(["data","entities",r.name]),{absolute:!0})}],position:"bottom-end",children:m.jsx(xt,{Icon:nl})}),m.jsx(Q1,{children:m.jsx(jr,{items:[{icon:O$,label:"Add relation",onClick:()=>t.modals.createRelation(r.name)},{icon:t0,label:"Add media",onClick:()=>t.modals.createMedia(r.name)},()=>m.jsx("div",{className:"h-px my-1 w-full bg-primary/5"}),{icon:$q,label:"Create Entity",onClick:()=>t.modals.createEntity()}],position:"bottom-end",children:m.jsx(st,{IconRight:Mq,children:"Add"})})})]}),className:"pl-3",children:m.jsxs("div",{className:"flex flex-row gap-4",children:[m.jsx(TS,{path:[{label:"Schema",href:"/"},{label:r.label}],backTo:"/"}),m.jsx(In,{to:"/",className:"hidden md:inline",children:m.jsx(st,{IconLeft:qO,children:"Overview"})})]})}),m.jsxs("div",{className:"flex flex-col h-full",children:[m.jsx(G5e,{entity:r}),m.jsx(Y5e,{entity:r}),m.jsx(qx,{identifier:"relations",title:"Relations",ActiveIcon:f$,children:m.jsx(qn,{title:"Relations",description:"This will soon be available here. Meanwhile, check advanced settings.",primary:{children:"Advanced Settings",onClick:()=>n(ut.settings.path(["data","relations"]),{absolute:!0})}})}),m.jsx(qx,{identifier:"indices",title:"Indices",ActiveIcon:uxe,children:m.jsx(qn,{title:"Indices",description:"This will soon be available here. Meanwhile, check advanced settings.",primary:{children:"Advanced Settings",onClick:()=>n(ut.settings.path(["data","indices"]),{absolute:!0})}})})]},r.name)]}):m.jsx(Is.NotFound,{description:`Entity "${e.entity}" doesn't exist.`})}const G5e=({entity:e})=>{const[t,n]=w.useState(!1),[r,s]=w.useState(0),{actions:i,$data:o,config:a}=Fs(),{readonly:c}=dt(),[u,f]=w.useState(),h=w.useRef(null);async function p(){var x;if(t)return;n(!0);const v=(x=h.current)==null?void 0:x.getData();await i.entity.patch(e.name).fields.set(v),n(!1),s(E=>E+1)}const y=Object.fromEntries(e.fields.map(v=>[v.name,v.toJSON()]));return m.jsx(qx,{identifier:"fields",title:"Fields",ActiveIcon:d$,renderHeaderRight:({open:v})=>v&&!c?m.jsx(st,{variant:"primary",disabled:!v,onClick:p,children:"Update"}):null,children:m.jsxs("div",{className:"flex flex-col flex-grow py-3 px-4 max-w-4xl gap-3 relative",children:[t&&m.jsx("div",{className:"animate-fade-in absolute w-full h-full top-0 bottom-0 left-0 right-0 bg-background/65 z-50"}),m.jsx(CW,{readonly:c,routePattern:`/entity/${e.name}/fields/:sub?`,fields:y,ref:h,sortable:!c,additionalFieldTypes:bS.filter(v=>["relation","media"].includes(v.type)).map(v=>({...v,onClick:()=>{switch(v.type){case"relation":o.modals.createRelation(e.name);break;case"media":o.modals.createMedia(e.name);break}}})),defaultPrimaryFormat:a==null?void 0:a.default_primary_format,isNew:!1},String(r)),Hr()&&!c&&m.jsxs("div",{children:[m.jsxs("div",{className:"flex flex-row gap-1 justify-center",children:[m.jsx(st,{size:"small",onClick:()=>{var v;return f((v=h.current)==null?void 0:v.isValid())},children:"valid"}),m.jsx(st,{size:"small",onClick:()=>{var v;return f((v=h.current)==null?void 0:v.getValues())},children:"values"}),m.jsx(st,{size:"small",onClick:()=>{var v;return f((v=h.current)==null?void 0:v.getData())},children:"data"}),m.jsx(st,{size:"small",onClick:()=>{var v;return f((v=h.current)==null?void 0:v.getErrors())},children:"errors"}),m.jsx(st,{size:"small",onClick:p,children:"update"})]}),m.jsx("pre",{className:"select-text",children:JSON.stringify(u,null,2)})]})]})})},Y5e=({entity:e})=>{var u,f,h,p;const t=Fs(),n=(f=(u=t.entities)==null?void 0:u[e.name])==null?void 0:f.config,r=w.useRef(null),{readonly:s}=dt(),i=B1((p=(h=t.schema.properties.entities.additionalProperties)==null?void 0:h.properties)==null?void 0:p.config),[o,a]=wW(i,n,["fields"]);try{o.properties.sort_field.enum=e.getFields().map(y=>y.name)}catch(y){console.error("error setting sort_field enum",y)}async function c(){var y,v;console.log("update",(y=r.current)==null?void 0:y.formData()),await t.actions.entity.patch(e.name).config((v=r.current)==null?void 0:v.formData())}return m.jsx(qx,{identifier:"settings",title:"Settings",ActiveIcon:Kg,renderHeaderRight:({open:y})=>y&&!s?m.jsx(st,{variant:"primary",disabled:!y,onClick:c,children:"Update"}):null,children:m.jsx("div",{className:"flex flex-col flex-grow py-3 px-4 max-w-4xl gap-3 relative",children:m.jsx(vm,{ref:r,schema:o,formData:a,onSubmit:console.log,className:"legacy hide-required-mark fieldset-alternative mute-root",readonly:s})})})},J5e=w.lazy(()=>s0(()=>import("./DataSchemaCanvas-Bn106G8B.js"),[]).then(e=>({default:e.DataSchemaCanvas})));function X5e(){const{$data:e}=Fs();return m.jsxs(m.Fragment,{children:[m.jsx(An,{right:m.jsx(Q1,{children:m.jsx(st,{type:"button",variant:"primary",onClick:e.modals.createAny,children:"Create new"})}),children:"Schema Overview"}),m.jsx("div",{className:"w-full h-full",children:m.jsx(w.Suspense,{children:m.jsx(J5e,{})})})]})}function K5e(){return m.jsx(n5e,{children:m.jsxs(qa,{children:[m.jsx(at,{path:"/",component:s5e}),m.jsx(at,{path:"/entity/:entity",component:U5e}),m.jsx(at,{path:"/entity/:entity/create",component:F5e}),m.jsx(at,{path:"/entity/:entity/edit/:id",component:M5e}),m.jsxs(at,{path:"/schema",nest:!0,children:[m.jsx(at,{path:"/",component:X5e}),m.jsx(at,{path:"/entity/:entity/:setting?/:sub?",component:W5e})]})]})})}const v9=()=>m.jsx("span",{className:"text-xs bg-primary/10 flex rounded-full px-2.5 py-1 leading-none",children:"coming soon"});function Q5e(e){return Hr()?m.jsx(Z5e,{...e}):m.jsx(eRe,{})}function Z5e({children:e}){const{app:t}=dt();return m.jsxs(m.Fragment,{children:[m.jsxs(Ed,{children:[m.jsx(An,{right:m.jsx(In,{href:t.getSettingsPath(["flows"]),children:m.jsx(xt,{Icon:ym})}),children:"Flows"}),m.jsx(Zn,{initialOffset:96,children:m.jsx("div",{className:"flex flex-col flex-grow p-3 gap-3",children:m.jsxs("nav",{className:"flex flex-col flex-1 gap-1",children:[m.jsx(ns,{as:In,href:ut.flows.flows.list(),children:"All Flows"}),m.jsxs(ns,{disabled:!0,className:"justify-between",children:["Endpoints",m.jsx(v9,{})]}),m.jsxs(ns,{disabled:!0,className:"justify-between",children:["Executions",m.jsx(v9,{})]}),m.jsx(ns,{as:In,href:t.getSettingsPath(["flows"]),children:"Settings"})]})})})]}),m.jsx(n0,{children:e})]})}function eRe(){return Gr(["Flows"]),m.jsx(qn,{Icon:xxe,title:"Flows",description:"Flows are coming very soon!"})}function Hn(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=Hn(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var tRe={value:()=>{}};function kS(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Qv(n)}function Qv(e){this._=e}function nRe(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",s=n.indexOf(".");if(s>=0&&(r=n.slice(s+1),n=n.slice(0,s)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Qv.prototype=kS.prototype={constructor:Qv,on:function(e,t){var n=this._,r=nRe(e+"",n),s,i=-1,o=r.length;if(arguments.length<2){for(;++i<o;)if((s=(e=r[i]).type)&&(s=rRe(n[s],e.name)))return s;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<o;)if(s=(e=r[i]).type)n[s]=x9(n[s],e.name,t);else if(t==null)for(s in n)n[s]=x9(n[s],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Qv(e)},call:function(e,t){if((s=arguments.length-2)>0)for(var n=new Array(s),r=0,s,i;r<s;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],r=0,s=i.length;r<s;++r)i[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],s=0,i=r.length;s<i;++s)r[s].value.apply(t,n)}};function rRe(e,t){for(var n=0,r=e.length,s;n<r;++n)if((s=e[n]).name===t)return s.value}function x9(e,t,n){for(var r=0,s=e.length;r<s;++r)if(e[r].name===t){e[r]=tRe,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Sj="http://www.w3.org/1999/xhtml";const w9={svg:"http://www.w3.org/2000/svg",xhtml:Sj,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function MS(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),w9.hasOwnProperty(t)?{space:w9[t],local:e}:e}function sRe(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Sj&&t.documentElement.namespaceURI===Sj?t.createElement(e):t.createElementNS(n,e)}}function iRe(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function LG(e){var t=MS(e);return(t.local?iRe:sRe)(t)}function oRe(){}function k3(e){return e==null?oRe:function(){return this.querySelector(e)}}function aRe(e){typeof e!="function"&&(e=k3(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var i=t[s],o=i.length,a=r[s]=new Array(o),c,u,f=0;f<o;++f)(c=i[f])&&(u=e.call(c,c.__data__,f,i))&&("__data__"in c&&(u.__data__=c.__data__),a[f]=u);return new Ps(r,this._parents)}function lRe(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function cRe(){return[]}function FG(e){return e==null?cRe:function(){return this.querySelectorAll(e)}}function uRe(e){return function(){return lRe(e.apply(this,arguments))}}function dRe(e){typeof e=="function"?e=uRe(e):e=FG(e);for(var t=this._groups,n=t.length,r=[],s=[],i=0;i<n;++i)for(var o=t[i],a=o.length,c,u=0;u<a;++u)(c=o[u])&&(r.push(e.call(c,c.__data__,u,o)),s.push(c));return new Ps(r,s)}function BG(e){return function(){return this.matches(e)}}function zG(e){return function(t){return t.matches(e)}}var fRe=Array.prototype.find;function hRe(e){return function(){return fRe.call(this.children,e)}}function mRe(){return this.firstElementChild}function pRe(e){return this.select(e==null?mRe:hRe(typeof e=="function"?e:zG(e)))}var gRe=Array.prototype.filter;function yRe(){return Array.from(this.children)}function bRe(e){return function(){return gRe.call(this.children,e)}}function vRe(e){return this.selectAll(e==null?yRe:bRe(typeof e=="function"?e:zG(e)))}function xRe(e){typeof e!="function"&&(e=BG(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var i=t[s],o=i.length,a=r[s]=[],c,u=0;u<o;++u)(c=i[u])&&e.call(c,c.__data__,u,i)&&a.push(c);return new Ps(r,this._parents)}function VG(e){return new Array(e.length)}function wRe(){return new Ps(this._enter||this._groups.map(VG),this._parents)}function yw(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}yw.prototype={constructor:yw,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function SRe(e){return function(){return e}}function ERe(e,t,n,r,s,i){for(var o=0,a,c=t.length,u=i.length;o<u;++o)(a=t[o])?(a.__data__=i[o],r[o]=a):n[o]=new yw(e,i[o]);for(;o<c;++o)(a=t[o])&&(s[o]=a)}function NRe(e,t,n,r,s,i,o){var a,c,u=new Map,f=t.length,h=i.length,p=new Array(f),y;for(a=0;a<f;++a)(c=t[a])&&(p[a]=y=o.call(c,c.__data__,a,t)+"",u.has(y)?s[a]=c:u.set(y,c));for(a=0;a<h;++a)y=o.call(e,i[a],a,i)+"",(c=u.get(y))?(r[a]=c,c.__data__=i[a],u.delete(y)):n[a]=new yw(e,i[a]);for(a=0;a<f;++a)(c=t[a])&&u.get(p[a])===c&&(s[a]=c)}function _Re(e){return e.__data__}function CRe(e,t){if(!arguments.length)return Array.from(this,_Re);var n=t?NRe:ERe,r=this._parents,s=this._groups;typeof e!="function"&&(e=SRe(e));for(var i=s.length,o=new Array(i),a=new Array(i),c=new Array(i),u=0;u<i;++u){var f=r[u],h=s[u],p=h.length,y=ORe(e.call(f,f&&f.__data__,u,r)),v=y.length,x=a[u]=new Array(v),E=o[u]=new Array(v),N=c[u]=new Array(p);n(f,h,x,E,N,y,t);for(var _=0,C=0,j,A;_<v;++_)if(j=x[_]){for(_>=C&&(C=_+1);!(A=E[C])&&++C<v;);j._next=A||null}}return o=new Ps(o,r),o._enter=a,o._exit=c,o}function ORe(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function jRe(){return new Ps(this._exit||this._groups.map(VG),this._parents)}function ARe(e,t,n){var r=this.enter(),s=this,i=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(s=t(s),s&&(s=s.selection())),n==null?i.remove():n(i),r&&s?r.merge(s).order():s}function TRe(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,s=n.length,i=r.length,o=Math.min(s,i),a=new Array(s),c=0;c<o;++c)for(var u=n[c],f=r[c],h=u.length,p=a[c]=new Array(h),y,v=0;v<h;++v)(y=u[v]||f[v])&&(p[v]=y);for(;c<s;++c)a[c]=n[c];return new Ps(a,this._parents)}function $Re(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],s=r.length-1,i=r[s],o;--s>=0;)(o=r[s])&&(i&&o.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(o,i),i=o);return this}function RRe(e){e||(e=kRe);function t(h,p){return h&&p?e(h.__data__,p.__data__):!h-!p}for(var n=this._groups,r=n.length,s=new Array(r),i=0;i<r;++i){for(var o=n[i],a=o.length,c=s[i]=new Array(a),u,f=0;f<a;++f)(u=o[f])&&(c[f]=u);c.sort(t)}return new Ps(s,this._parents).order()}function kRe(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function MRe(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function IRe(){return Array.from(this)}function PRe(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],s=0,i=r.length;s<i;++s){var o=r[s];if(o)return o}return null}function DRe(){let e=0;for(const t of this)++e;return e}function LRe(){return!this.node()}function FRe(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var s=t[n],i=0,o=s.length,a;i<o;++i)(a=s[i])&&e.call(a,a.__data__,i,s);return this}function BRe(e){return function(){this.removeAttribute(e)}}function zRe(e){return function(){this.removeAttributeNS(e.space,e.local)}}function VRe(e,t){return function(){this.setAttribute(e,t)}}function URe(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function qRe(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function HRe(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function WRe(e,t){var n=MS(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?zRe:BRe:typeof t=="function"?n.local?HRe:qRe:n.local?URe:VRe)(n,t))}function UG(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function GRe(e){return function(){this.style.removeProperty(e)}}function YRe(e,t,n){return function(){this.style.setProperty(e,t,n)}}function JRe(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function XRe(e,t,n){return arguments.length>1?this.each((t==null?GRe:typeof t=="function"?JRe:YRe)(e,t,n??"")):Vh(this.node(),e)}function Vh(e,t){return e.style.getPropertyValue(t)||UG(e).getComputedStyle(e,null).getPropertyValue(t)}function KRe(e){return function(){delete this[e]}}function QRe(e,t){return function(){this[e]=t}}function ZRe(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function eke(e,t){return arguments.length>1?this.each((t==null?KRe:typeof t=="function"?ZRe:QRe)(e,t)):this.node()[e]}function qG(e){return e.trim().split(/^|\s+/)}function M3(e){return e.classList||new HG(e)}function HG(e){this._node=e,this._names=qG(e.getAttribute("class")||"")}HG.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function WG(e,t){for(var n=M3(e),r=-1,s=t.length;++r<s;)n.add(t[r])}function GG(e,t){for(var n=M3(e),r=-1,s=t.length;++r<s;)n.remove(t[r])}function tke(e){return function(){WG(this,e)}}function nke(e){return function(){GG(this,e)}}function rke(e,t){return function(){(t.apply(this,arguments)?WG:GG)(this,e)}}function ske(e,t){var n=qG(e+"");if(arguments.length<2){for(var r=M3(this.node()),s=-1,i=n.length;++s<i;)if(!r.contains(n[s]))return!1;return!0}return this.each((typeof t=="function"?rke:t?tke:nke)(n,t))}function ike(){this.textContent=""}function oke(e){return function(){this.textContent=e}}function ake(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function lke(e){return arguments.length?this.each(e==null?ike:(typeof e=="function"?ake:oke)(e)):this.node().textContent}function cke(){this.innerHTML=""}function uke(e){return function(){this.innerHTML=e}}function dke(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function fke(e){return arguments.length?this.each(e==null?cke:(typeof e=="function"?dke:uke)(e)):this.node().innerHTML}function hke(){this.nextSibling&&this.parentNode.appendChild(this)}function mke(){return this.each(hke)}function pke(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function gke(){return this.each(pke)}function yke(e){var t=typeof e=="function"?e:LG(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function bke(){return null}function vke(e,t){var n=typeof e=="function"?e:LG(e),r=t==null?bke:typeof t=="function"?t:k3(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function xke(){var e=this.parentNode;e&&e.removeChild(this)}function wke(){return this.each(xke)}function Ske(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Eke(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Nke(e){return this.select(e?Eke:Ske)}function _ke(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Cke(e){return function(t){e.call(this,t,this.__data__)}}function Oke(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function jke(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,s=t.length,i;n<s;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++r]=i;++r?t.length=r:delete this.__on}}}function Ake(e,t,n){return function(){var r=this.__on,s,i=Cke(t);if(r){for(var o=0,a=r.length;o<a;++o)if((s=r[o]).type===e.type&&s.name===e.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=i,s.options=n),s.value=t;return}}this.addEventListener(e.type,i,n),s={type:e.type,name:e.name,value:t,listener:i,options:n},r?r.push(s):this.__on=[s]}}function Tke(e,t,n){var r=Oke(e+""),s,i=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var c=0,u=a.length,f;c<u;++c)for(s=0,f=a[c];s<i;++s)if((o=r[s]).type===f.type&&o.name===f.name)return f.value}return}for(a=t?Ake:jke,s=0;s<i;++s)this.each(a(r[s],t,n));return this}function YG(e,t,n){var r=UG(e),s=r.CustomEvent;typeof s=="function"?s=new s(t,n):(s=r.document.createEvent("Event"),n?(s.initEvent(t,n.bubbles,n.cancelable),s.detail=n.detail):s.initEvent(t,!1,!1)),e.dispatchEvent(s)}function $ke(e,t){return function(){return YG(this,e,t)}}function Rke(e,t){return function(){return YG(this,e,t.apply(this,arguments))}}function kke(e,t){return this.each((typeof t=="function"?Rke:$ke)(e,t))}function*Mke(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],s=0,i=r.length,o;s<i;++s)(o=r[s])&&(yield o)}var JG=[null];function Ps(e,t){this._groups=e,this._parents=t}function p0(){return new Ps([[document.documentElement]],JG)}function Ike(){return this}Ps.prototype=p0.prototype={constructor:Ps,select:aRe,selectAll:dRe,selectChild:pRe,selectChildren:vRe,filter:xRe,data:CRe,enter:wRe,exit:jRe,join:ARe,merge:TRe,selection:Ike,order:$Re,sort:RRe,call:MRe,nodes:IRe,node:PRe,size:DRe,empty:LRe,each:FRe,attr:WRe,style:XRe,property:eke,classed:ske,text:lke,html:fke,raise:mke,lower:gke,append:yke,insert:vke,remove:wke,clone:Nke,datum:_ke,on:Tke,dispatch:kke,[Symbol.iterator]:Mke};function Cs(e){return typeof e=="string"?new Ps([[document.querySelector(e)]],[document.documentElement]):new Ps([[e]],JG)}function Pke(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Pi(e,t){if(e=Pke(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var s=t.getBoundingClientRect();return[e.clientX-s.left-t.clientLeft,e.clientY-s.top-t.clientTop]}}return[e.pageX,e.pageY]}const Dke={passive:!1},ay={capture:!0,passive:!1};function Q_(e){e.stopImmediatePropagation()}function eh(e){e.preventDefault(),e.stopImmediatePropagation()}function XG(e){var t=e.document.documentElement,n=Cs(e).on("dragstart.drag",eh,ay);"onselectstart"in t?n.on("selectstart.drag",eh,ay):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function KG(e,t){var n=e.document.documentElement,r=Cs(e).on("dragstart.drag",null);t&&(r.on("click.drag",eh,ay),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const gv=e=>()=>e;function Ej(e,{sourceEvent:t,subject:n,target:r,identifier:s,active:i,x:o,y:a,dx:c,dy:u,dispatch:f}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:f}})}Ej.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Lke(e){return!e.ctrlKey&&!e.button}function Fke(){return this.parentNode}function Bke(e,t){return t??{x:e.x,y:e.y}}function zke(){return navigator.maxTouchPoints||"ontouchstart"in this}function QG(){var e=Lke,t=Fke,n=Bke,r=zke,s={},i=kS("start","drag","end"),o=0,a,c,u,f,h=0;function p(j){j.on("mousedown.drag",y).filter(r).on("touchstart.drag",E).on("touchmove.drag",N,Dke).on("touchend.drag touchcancel.drag",_).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function y(j,A){if(!(f||!e.call(this,j,A))){var $=C(this,t.call(this,j,A),j,A,"mouse");$&&(Cs(j.view).on("mousemove.drag",v,ay).on("mouseup.drag",x,ay),XG(j.view),Q_(j),u=!1,a=j.clientX,c=j.clientY,$("start",j))}}function v(j){if(eh(j),!u){var A=j.clientX-a,$=j.clientY-c;u=A*A+$*$>h}s.mouse("drag",j)}function x(j){Cs(j.view).on("mousemove.drag mouseup.drag",null),KG(j.view,u),eh(j),s.mouse("end",j)}function E(j,A){if(e.call(this,j,A)){var $=j.changedTouches,k=t.call(this,j,A),R=$.length,B,z;for(B=0;B<R;++B)(z=C(this,k,j,A,$[B].identifier,$[B]))&&(Q_(j),z("start",j,$[B]))}}function N(j){var A=j.changedTouches,$=A.length,k,R;for(k=0;k<$;++k)(R=s[A[k].identifier])&&(eh(j),R("drag",j,A[k]))}function _(j){var A=j.changedTouches,$=A.length,k,R;for(f&&clearTimeout(f),f=setTimeout(function(){f=null},500),k=0;k<$;++k)(R=s[A[k].identifier])&&(Q_(j),R("end",j,A[k]))}function C(j,A,$,k,R,B){var z=i.copy(),D=Pi(B||$,A),L,H,M;if((M=n.call(j,new Ej("beforestart",{sourceEvent:$,target:p,identifier:R,active:o,x:D[0],y:D[1],dx:0,dy:0,dispatch:z}),k))!=null)return L=M.x-D[0]||0,H=M.y-D[1]||0,function V(T,I,P){var W=D,F;switch(T){case"start":s[R]=V,F=o++;break;case"end":delete s[R],--o;case"drag":D=Pi(P||I,A),F=o;break}z.call(T,j,new Ej(T,{sourceEvent:I,subject:M,target:p,identifier:R,active:F,x:D[0]+L,y:D[1]+H,dx:D[0]-W[0],dy:D[1]-W[1],dispatch:z}),k)}}return p.filter=function(j){return arguments.length?(e=typeof j=="function"?j:gv(!!j),p):e},p.container=function(j){return arguments.length?(t=typeof j=="function"?j:gv(j),p):t},p.subject=function(j){return arguments.length?(n=typeof j=="function"?j:gv(j),p):n},p.touchable=function(j){return arguments.length?(r=typeof j=="function"?j:gv(!!j),p):r},p.on=function(){var j=i.on.apply(i,arguments);return j===i?p:j},p.clickDistance=function(j){return arguments.length?(h=(j=+j)*j,p):Math.sqrt(h)},p}function I3(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function ZG(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function g0(){}var ly=.7,bw=1/ly,th="\\s*([+-]?\\d+)\\s*",cy="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ao="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Vke=/^#([0-9a-f]{3,8})$/,Uke=new RegExp(`^rgb\\(${th},${th},${th}\\)$`),qke=new RegExp(`^rgb\\(${Ao},${Ao},${Ao}\\)$`),Hke=new RegExp(`^rgba\\(${th},${th},${th},${cy}\\)$`),Wke=new RegExp(`^rgba\\(${Ao},${Ao},${Ao},${cy}\\)$`),Gke=new RegExp(`^hsl\\(${cy},${Ao},${Ao}\\)$`),Yke=new RegExp(`^hsla\\(${cy},${Ao},${Ao},${cy}\\)$`),S9={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};I3(g0,uy,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:E9,formatHex:E9,formatHex8:Jke,formatHsl:Xke,formatRgb:N9,toString:N9});function E9(){return this.rgb().formatHex()}function Jke(){return this.rgb().formatHex8()}function Xke(){return eY(this).formatHsl()}function N9(){return this.rgb().formatRgb()}function uy(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Vke.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?_9(t):n===3?new is(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?yv(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?yv(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Uke.exec(e))?new is(t[1],t[2],t[3],1):(t=qke.exec(e))?new is(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Hke.exec(e))?yv(t[1],t[2],t[3],t[4]):(t=Wke.exec(e))?yv(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Gke.exec(e))?j9(t[1],t[2]/100,t[3]/100,1):(t=Yke.exec(e))?j9(t[1],t[2]/100,t[3]/100,t[4]):S9.hasOwnProperty(e)?_9(S9[e]):e==="transparent"?new is(NaN,NaN,NaN,0):null}function _9(e){return new is(e>>16&255,e>>8&255,e&255,1)}function yv(e,t,n,r){return r<=0&&(e=t=n=NaN),new is(e,t,n,r)}function Kke(e){return e instanceof g0||(e=uy(e)),e?(e=e.rgb(),new is(e.r,e.g,e.b,e.opacity)):new is}function Nj(e,t,n,r){return arguments.length===1?Kke(e):new is(e,t,n,r??1)}function is(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}I3(is,Nj,ZG(g0,{brighter(e){return e=e==null?bw:Math.pow(bw,e),new is(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ly:Math.pow(ly,e),new is(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new is(Gu(this.r),Gu(this.g),Gu(this.b),vw(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:C9,formatHex:C9,formatHex8:Qke,formatRgb:O9,toString:O9}));function C9(){return`#${$u(this.r)}${$u(this.g)}${$u(this.b)}`}function Qke(){return`#${$u(this.r)}${$u(this.g)}${$u(this.b)}${$u((isNaN(this.opacity)?1:this.opacity)*255)}`}function O9(){const e=vw(this.opacity);return`${e===1?"rgb(":"rgba("}${Gu(this.r)}, ${Gu(this.g)}, ${Gu(this.b)}${e===1?")":`, ${e})`}`}function vw(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Gu(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function $u(e){return e=Gu(e),(e<16?"0":"")+e.toString(16)}function j9(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Bi(e,t,n,r)}function eY(e){if(e instanceof Bi)return new Bi(e.h,e.s,e.l,e.opacity);if(e instanceof g0||(e=uy(e)),!e)return new Bi;if(e instanceof Bi)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,s=Math.min(t,n,r),i=Math.max(t,n,r),o=NaN,a=i-s,c=(i+s)/2;return a?(t===i?o=(n-r)/a+(n<r)*6:n===i?o=(r-t)/a+2:o=(t-n)/a+4,a/=c<.5?i+s:2-i-s,o*=60):a=c>0&&c<1?0:o,new Bi(o,a,c,e.opacity)}function Zke(e,t,n,r){return arguments.length===1?eY(e):new Bi(e,t,n,r??1)}function Bi(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}I3(Bi,Zke,ZG(g0,{brighter(e){return e=e==null?bw:Math.pow(bw,e),new Bi(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ly:Math.pow(ly,e),new Bi(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,s=2*n-r;return new is(Z_(e>=240?e-240:e+120,s,r),Z_(e,s,r),Z_(e<120?e+240:e-120,s,r),this.opacity)},clamp(){return new Bi(A9(this.h),bv(this.s),bv(this.l),vw(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=vw(this.opacity);return`${e===1?"hsl(":"hsla("}${A9(this.h)}, ${bv(this.s)*100}%, ${bv(this.l)*100}%${e===1?")":`, ${e})`}`}}));function A9(e){return e=(e||0)%360,e<0?e+360:e}function bv(e){return Math.max(0,Math.min(1,e||0))}function Z_(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const tY=e=>()=>e;function eMe(e,t){return function(n){return e+n*t}}function tMe(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function nMe(e){return(e=+e)==1?nY:function(t,n){return n-t?tMe(t,n,e):tY(isNaN(t)?n:t)}}function nY(e,t){var n=t-e;return n?eMe(e,n):tY(isNaN(e)?t:e)}const T9=function e(t){var n=nMe(t);function r(s,i){var o=n((s=Nj(s)).r,(i=Nj(i)).r),a=n(s.g,i.g),c=n(s.b,i.b),u=nY(s.opacity,i.opacity);return function(f){return s.r=o(f),s.g=a(f),s.b=c(f),s.opacity=u(f),s+""}}return r.gamma=e,r}(1);function Gl(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var _j=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,eC=new RegExp(_j.source,"g");function rMe(e){return function(){return e}}function sMe(e){return function(t){return e(t)+""}}function iMe(e,t){var n=_j.lastIndex=eC.lastIndex=0,r,s,i,o=-1,a=[],c=[];for(e=e+"",t=t+"";(r=_j.exec(e))&&(s=eC.exec(t));)(i=s.index)>n&&(i=t.slice(n,i),a[o]?a[o]+=i:a[++o]=i),(r=r[0])===(s=s[0])?a[o]?a[o]+=s:a[++o]=s:(a[++o]=null,c.push({i:o,x:Gl(r,s)})),n=eC.lastIndex;return n<t.length&&(i=t.slice(n),a[o]?a[o]+=i:a[++o]=i),a.length<2?c[0]?sMe(c[0].x):rMe(t):(t=c.length,function(u){for(var f=0,h;f<t;++f)a[(h=c[f]).i]=h.x(u);return a.join("")})}var $9=180/Math.PI,Cj={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function rY(e,t,n,r,s,i){var o,a,c;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,c/=a),e*r<t*n&&(e=-e,t=-t,c=-c,o=-o),{translateX:s,translateY:i,rotate:Math.atan2(t,e)*$9,skewX:Math.atan(c)*$9,scaleX:o,scaleY:a}}var vv;function oMe(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Cj:rY(t.a,t.b,t.c,t.d,t.e,t.f)}function aMe(e){return e==null||(vv||(vv=document.createElementNS("http://www.w3.org/2000/svg","g")),vv.setAttribute("transform",e),!(e=vv.transform.baseVal.consolidate()))?Cj:(e=e.matrix,rY(e.a,e.b,e.c,e.d,e.e,e.f))}function sY(e,t,n,r){function s(u){return u.length?u.pop()+" ":""}function i(u,f,h,p,y,v){if(u!==h||f!==p){var x=y.push("translate(",null,t,null,n);v.push({i:x-4,x:Gl(u,h)},{i:x-2,x:Gl(f,p)})}else(h||p)&&y.push("translate("+h+t+p+n)}function o(u,f,h,p){u!==f?(u-f>180?f+=360:f-u>180&&(u+=360),p.push({i:h.push(s(h)+"rotate(",null,r)-2,x:Gl(u,f)})):f&&h.push(s(h)+"rotate("+f+r)}function a(u,f,h,p){u!==f?p.push({i:h.push(s(h)+"skewX(",null,r)-2,x:Gl(u,f)}):f&&h.push(s(h)+"skewX("+f+r)}function c(u,f,h,p,y,v){if(u!==h||f!==p){var x=y.push(s(y)+"scale(",null,",",null,")");v.push({i:x-4,x:Gl(u,h)},{i:x-2,x:Gl(f,p)})}else(h!==1||p!==1)&&y.push(s(y)+"scale("+h+","+p+")")}return function(u,f){var h=[],p=[];return u=e(u),f=e(f),i(u.translateX,u.translateY,f.translateX,f.translateY,h,p),o(u.rotate,f.rotate,h,p),a(u.skewX,f.skewX,h,p),c(u.scaleX,u.scaleY,f.scaleX,f.scaleY,h,p),u=f=null,function(y){for(var v=-1,x=p.length,E;++v<x;)h[(E=p[v]).i]=E.x(y);return h.join("")}}}var lMe=sY(oMe,"px, ","px)","deg)"),cMe=sY(aMe,", ",")",")"),uMe=1e-12;function R9(e){return((e=Math.exp(e))+1/e)/2}function dMe(e){return((e=Math.exp(e))-1/e)/2}function fMe(e){return((e=Math.exp(2*e))-1)/(e+1)}const hMe=function e(t,n,r){function s(i,o){var a=i[0],c=i[1],u=i[2],f=o[0],h=o[1],p=o[2],y=f-a,v=h-c,x=y*y+v*v,E,N;if(x<uMe)N=Math.log(p/u)/t,E=function(k){return[a+k*y,c+k*v,u*Math.exp(t*k*N)]};else{var _=Math.sqrt(x),C=(p*p-u*u+r*x)/(2*u*n*_),j=(p*p-u*u-r*x)/(2*p*n*_),A=Math.log(Math.sqrt(C*C+1)-C),$=Math.log(Math.sqrt(j*j+1)-j);N=($-A)/t,E=function(k){var R=k*N,B=R9(A),z=u/(n*_)*(B*fMe(t*R+A)-dMe(A));return[a+z*y,c+z*v,u*B/R9(t*R+A)]}}return E.duration=N*1e3*t/Math.SQRT2,E}return s.rho=function(i){var o=Math.max(.001,+i),a=o*o,c=a*a;return e(o,a,c)},s}(Math.SQRT2,2,4);var Uh=0,eg=0,Wp=0,iY=1e3,xw,tg,ww=0,cd=0,IS=0,dy=typeof performance=="object"&&performance.now?performance:Date,oY=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function P3(){return cd||(oY(mMe),cd=dy.now()+IS)}function mMe(){cd=0}function Sw(){this._call=this._time=this._next=null}Sw.prototype=aY.prototype={constructor:Sw,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?P3():+n)+(t==null?0:+t),!this._next&&tg!==this&&(tg?tg._next=this:xw=this,tg=this),this._call=e,this._time=n,Oj()},stop:function(){this._call&&(this._call=null,this._time=1/0,Oj())}};function aY(e,t,n){var r=new Sw;return r.restart(e,t,n),r}function pMe(){P3(),++Uh;for(var e=xw,t;e;)(t=cd-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Uh}function k9(){cd=(ww=dy.now())+IS,Uh=eg=0;try{pMe()}finally{Uh=0,yMe(),cd=0}}function gMe(){var e=dy.now(),t=e-ww;t>iY&&(IS-=t,ww=e)}function yMe(){for(var e,t=xw,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:xw=n);tg=e,Oj(r)}function Oj(e){if(!Uh){eg&&(eg=clearTimeout(eg));var t=e-cd;t>24?(e<1/0&&(eg=setTimeout(k9,e-dy.now()-IS)),Wp&&(Wp=clearInterval(Wp))):(Wp||(ww=dy.now(),Wp=setInterval(gMe,iY)),Uh=1,oY(k9))}}function M9(e,t,n){var r=new Sw;return t=t==null?0:+t,r.restart(s=>{r.stop(),e(s+t)},t,n),r}var bMe=kS("start","end","cancel","interrupt"),vMe=[],lY=0,I9=1,jj=2,Zv=3,P9=4,Aj=5,ex=6;function PS(e,t,n,r,s,i){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;xMe(e,n,{name:t,index:r,group:s,on:bMe,tween:vMe,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:lY})}function D3(e,t){var n=io(e,t);if(n.state>lY)throw new Error("too late; already scheduled");return n}function zo(e,t){var n=io(e,t);if(n.state>Zv)throw new Error("too late; already running");return n}function io(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function xMe(e,t,n){var r=e.__transition,s;r[t]=n,n.timer=aY(i,0,n.time);function i(u){n.state=I9,n.timer.restart(o,n.delay,n.time),n.delay<=u&&o(u-n.delay)}function o(u){var f,h,p,y;if(n.state!==I9)return c();for(f in r)if(y=r[f],y.name===n.name){if(y.state===Zv)return M9(o);y.state===P9?(y.state=ex,y.timer.stop(),y.on.call("interrupt",e,e.__data__,y.index,y.group),delete r[f]):+f<t&&(y.state=ex,y.timer.stop(),y.on.call("cancel",e,e.__data__,y.index,y.group),delete r[f])}if(M9(function(){n.state===Zv&&(n.state=P9,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=jj,n.on.call("start",e,e.__data__,n.index,n.group),n.state===jj){for(n.state=Zv,s=new Array(p=n.tween.length),f=0,h=-1;f<p;++f)(y=n.tween[f].value.call(e,e.__data__,n.index,n.group))&&(s[++h]=y);s.length=h+1}}function a(u){for(var f=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(c),n.state=Aj,1),h=-1,p=s.length;++h<p;)s[h].call(e,f);n.state===Aj&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=ex,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function tx(e,t){var n=e.__transition,r,s,i=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){i=!1;continue}s=r.state>jj&&r.state<Aj,r.state=ex,r.timer.stop(),r.on.call(s?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}i&&delete e.__transition}}function wMe(e){return this.each(function(){tx(this,e)})}function SMe(e,t){var n,r;return function(){var s=zo(this,e),i=s.tween;if(i!==n){r=n=i;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}s.tween=r}}function EMe(e,t,n){var r,s;if(typeof n!="function")throw new Error;return function(){var i=zo(this,e),o=i.tween;if(o!==r){s=(r=o).slice();for(var a={name:t,value:n},c=0,u=s.length;c<u;++c)if(s[c].name===t){s[c]=a;break}c===u&&s.push(a)}i.tween=s}}function NMe(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=io(this.node(),n).tween,s=0,i=r.length,o;s<i;++s)if((o=r[s]).name===e)return o.value;return null}return this.each((t==null?SMe:EMe)(n,e,t))}function L3(e,t,n){var r=e._id;return e.each(function(){var s=zo(this,r);(s.value||(s.value={}))[t]=n.apply(this,arguments)}),function(s){return io(s,r).value[t]}}function cY(e,t){var n;return(typeof t=="number"?Gl:t instanceof uy?T9:(n=uy(t))?(t=n,T9):iMe)(e,t)}function _Me(e){return function(){this.removeAttribute(e)}}function CMe(e){return function(){this.removeAttributeNS(e.space,e.local)}}function OMe(e,t,n){var r,s=n+"",i;return function(){var o=this.getAttribute(e);return o===s?null:o===r?i:i=t(r=o,n)}}function jMe(e,t,n){var r,s=n+"",i;return function(){var o=this.getAttributeNS(e.space,e.local);return o===s?null:o===r?i:i=t(r=o,n)}}function AMe(e,t,n){var r,s,i;return function(){var o,a=n(this),c;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),c=a+"",o===c?null:o===r&&c===s?i:(s=c,i=t(r=o,a)))}}function TMe(e,t,n){var r,s,i;return function(){var o,a=n(this),c;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),c=a+"",o===c?null:o===r&&c===s?i:(s=c,i=t(r=o,a)))}}function $Me(e,t){var n=MS(e),r=n==="transform"?cMe:cY;return this.attrTween(e,typeof t=="function"?(n.local?TMe:AMe)(n,r,L3(this,"attr."+e,t)):t==null?(n.local?CMe:_Me)(n):(n.local?jMe:OMe)(n,r,t))}function RMe(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function kMe(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function MMe(e,t){var n,r;function s(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&kMe(e,i)),n}return s._value=t,s}function IMe(e,t){var n,r;function s(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&RMe(e,i)),n}return s._value=t,s}function PMe(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=MS(e);return this.tween(n,(r.local?MMe:IMe)(r,t))}function DMe(e,t){return function(){D3(this,e).delay=+t.apply(this,arguments)}}function LMe(e,t){return t=+t,function(){D3(this,e).delay=t}}function FMe(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?DMe:LMe)(t,e)):io(this.node(),t).delay}function BMe(e,t){return function(){zo(this,e).duration=+t.apply(this,arguments)}}function zMe(e,t){return t=+t,function(){zo(this,e).duration=t}}function VMe(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?BMe:zMe)(t,e)):io(this.node(),t).duration}function UMe(e,t){if(typeof t!="function")throw new Error;return function(){zo(this,e).ease=t}}function qMe(e){var t=this._id;return arguments.length?this.each(UMe(t,e)):io(this.node(),t).ease}function HMe(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;zo(this,e).ease=n}}function WMe(e){if(typeof e!="function")throw new Error;return this.each(HMe(this._id,e))}function GMe(e){typeof e!="function"&&(e=BG(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var i=t[s],o=i.length,a=r[s]=[],c,u=0;u<o;++u)(c=i[u])&&e.call(c,c.__data__,u,i)&&a.push(c);return new Wa(r,this._parents,this._name,this._id)}function YMe(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,s=n.length,i=Math.min(r,s),o=new Array(r),a=0;a<i;++a)for(var c=t[a],u=n[a],f=c.length,h=o[a]=new Array(f),p,y=0;y<f;++y)(p=c[y]||u[y])&&(h[y]=p);for(;a<r;++a)o[a]=t[a];return new Wa(o,this._parents,this._name,this._id)}function JMe(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function XMe(e,t,n){var r,s,i=JMe(t)?D3:zo;return function(){var o=i(this,e),a=o.on;a!==r&&(s=(r=a).copy()).on(t,n),o.on=s}}function KMe(e,t){var n=this._id;return arguments.length<2?io(this.node(),n).on.on(e):this.each(XMe(n,e,t))}function QMe(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function ZMe(){return this.on("end.remove",QMe(this._id))}function e6e(e){var t=this._name,n=this._id;typeof e!="function"&&(e=k3(e));for(var r=this._groups,s=r.length,i=new Array(s),o=0;o<s;++o)for(var a=r[o],c=a.length,u=i[o]=new Array(c),f,h,p=0;p<c;++p)(f=a[p])&&(h=e.call(f,f.__data__,p,a))&&("__data__"in f&&(h.__data__=f.__data__),u[p]=h,PS(u[p],t,n,p,u,io(f,n)));return new Wa(i,this._parents,t,n)}function t6e(e){var t=this._name,n=this._id;typeof e!="function"&&(e=FG(e));for(var r=this._groups,s=r.length,i=[],o=[],a=0;a<s;++a)for(var c=r[a],u=c.length,f,h=0;h<u;++h)if(f=c[h]){for(var p=e.call(f,f.__data__,h,c),y,v=io(f,n),x=0,E=p.length;x<E;++x)(y=p[x])&&PS(y,t,n,x,p,v);i.push(p),o.push(f)}return new Wa(i,o,t,n)}var n6e=p0.prototype.constructor;function r6e(){return new n6e(this._groups,this._parents)}function s6e(e,t){var n,r,s;return function(){var i=Vh(this,e),o=(this.style.removeProperty(e),Vh(this,e));return i===o?null:i===n&&o===r?s:s=t(n=i,r=o)}}function uY(e){return function(){this.style.removeProperty(e)}}function i6e(e,t,n){var r,s=n+"",i;return function(){var o=Vh(this,e);return o===s?null:o===r?i:i=t(r=o,n)}}function o6e(e,t,n){var r,s,i;return function(){var o=Vh(this,e),a=n(this),c=a+"";return a==null&&(c=a=(this.style.removeProperty(e),Vh(this,e))),o===c?null:o===r&&c===s?i:(s=c,i=t(r=o,a))}}function a6e(e,t){var n,r,s,i="style."+t,o="end."+i,a;return function(){var c=zo(this,e),u=c.on,f=c.value[i]==null?a||(a=uY(t)):void 0;(u!==n||s!==f)&&(r=(n=u).copy()).on(o,s=f),c.on=r}}function l6e(e,t,n){var r=(e+="")=="transform"?lMe:cY;return t==null?this.styleTween(e,s6e(e,r)).on("end.style."+e,uY(e)):typeof t=="function"?this.styleTween(e,o6e(e,r,L3(this,"style."+e,t))).each(a6e(this._id,e)):this.styleTween(e,i6e(e,r,t),n).on("end.style."+e,null)}function c6e(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function u6e(e,t,n){var r,s;function i(){var o=t.apply(this,arguments);return o!==s&&(r=(s=o)&&c6e(e,o,n)),r}return i._value=t,i}function d6e(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,u6e(e,t,n??""))}function f6e(e){return function(){this.textContent=e}}function h6e(e){return function(){var t=e(this);this.textContent=t??""}}function m6e(e){return this.tween("text",typeof e=="function"?h6e(L3(this,"text",e)):f6e(e==null?"":e+""))}function p6e(e){return function(t){this.textContent=e.call(this,t)}}function g6e(e){var t,n;function r(){var s=e.apply(this,arguments);return s!==n&&(t=(n=s)&&p6e(s)),t}return r._value=e,r}function y6e(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,g6e(e))}function b6e(){for(var e=this._name,t=this._id,n=dY(),r=this._groups,s=r.length,i=0;i<s;++i)for(var o=r[i],a=o.length,c,u=0;u<a;++u)if(c=o[u]){var f=io(c,t);PS(c,e,n,u,o,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new Wa(r,this._parents,e,n)}function v6e(){var e,t,n=this,r=n._id,s=n.size();return new Promise(function(i,o){var a={value:o},c={value:function(){--s===0&&i()}};n.each(function(){var u=zo(this,r),f=u.on;f!==e&&(t=(e=f).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(c)),u.on=t}),s===0&&i()})}var x6e=0;function Wa(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function dY(){return++x6e}var ca=p0.prototype;Wa.prototype={constructor:Wa,select:e6e,selectAll:t6e,selectChild:ca.selectChild,selectChildren:ca.selectChildren,filter:GMe,merge:YMe,selection:r6e,transition:b6e,call:ca.call,nodes:ca.nodes,node:ca.node,size:ca.size,empty:ca.empty,each:ca.each,on:KMe,attr:$Me,attrTween:PMe,style:l6e,styleTween:d6e,text:m6e,textTween:y6e,remove:ZMe,tween:NMe,delay:FMe,duration:VMe,ease:qMe,easeVarying:WMe,end:v6e,[Symbol.iterator]:ca[Symbol.iterator]};function w6e(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var S6e={time:null,delay:0,duration:250,ease:w6e};function E6e(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function N6e(e){var t,n;e instanceof Wa?(t=e._id,e=e._name):(t=dY(),(n=S6e).time=P3(),e=e==null?null:e+"");for(var r=this._groups,s=r.length,i=0;i<s;++i)for(var o=r[i],a=o.length,c,u=0;u<a;++u)(c=o[u])&&PS(c,e,t,u,o,n||E6e(c,t));return new Wa(r,this._parents,e,t)}p0.prototype.interrupt=wMe;p0.prototype.transition=N6e;const xv=e=>()=>e;function _6e(e,{sourceEvent:t,target:n,transform:r,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:s}})}function ja(e,t,n){this.k=e,this.x=t,this.y=n}ja.prototype={constructor:ja,scale:function(e){return e===1?this:new ja(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new ja(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var DS=new ja(1,0,0);fY.prototype=ja.prototype;function fY(e){for(;!e.__zoom;)if(!(e=e.parentNode))return DS;return e.__zoom}function tC(e){e.stopImmediatePropagation()}function Gp(e){e.preventDefault(),e.stopImmediatePropagation()}function C6e(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function O6e(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function D9(){return this.__zoom||DS}function j6e(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function A6e(){return navigator.maxTouchPoints||"ontouchstart"in this}function T6e(e,t,n){var r=e.invertX(t[0][0])-n[0][0],s=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],o=e.invertY(t[1][1])-n[1][1];return e.translate(s>r?(r+s)/2:Math.min(0,r)||Math.max(0,s),o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o))}function hY(){var e=C6e,t=O6e,n=T6e,r=j6e,s=A6e,i=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],a=250,c=hMe,u=kS("start","zoom","end"),f,h,p,y=500,v=150,x=0,E=10;function N(M){M.property("__zoom",D9).on("wheel.zoom",R,{passive:!1}).on("mousedown.zoom",B).on("dblclick.zoom",z).filter(s).on("touchstart.zoom",D).on("touchmove.zoom",L).on("touchend.zoom touchcancel.zoom",H).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}N.transform=function(M,V,T,I){var P=M.selection?M.selection():M;P.property("__zoom",D9),M!==P?A(M,V,T,I):P.interrupt().each(function(){$(this,arguments).event(I).start().zoom(null,typeof V=="function"?V.apply(this,arguments):V).end()})},N.scaleBy=function(M,V,T,I){N.scaleTo(M,function(){var P=this.__zoom.k,W=typeof V=="function"?V.apply(this,arguments):V;return P*W},T,I)},N.scaleTo=function(M,V,T,I){N.transform(M,function(){var P=t.apply(this,arguments),W=this.__zoom,F=T==null?j(P):typeof T=="function"?T.apply(this,arguments):T,q=W.invert(F),X=typeof V=="function"?V.apply(this,arguments):V;return n(C(_(W,X),F,q),P,o)},T,I)},N.translateBy=function(M,V,T,I){N.transform(M,function(){return n(this.__zoom.translate(typeof V=="function"?V.apply(this,arguments):V,typeof T=="function"?T.apply(this,arguments):T),t.apply(this,arguments),o)},null,I)},N.translateTo=function(M,V,T,I,P){N.transform(M,function(){var W=t.apply(this,arguments),F=this.__zoom,q=I==null?j(W):typeof I=="function"?I.apply(this,arguments):I;return n(DS.translate(q[0],q[1]).scale(F.k).translate(typeof V=="function"?-V.apply(this,arguments):-V,typeof T=="function"?-T.apply(this,arguments):-T),W,o)},I,P)};function _(M,V){return V=Math.max(i[0],Math.min(i[1],V)),V===M.k?M:new ja(V,M.x,M.y)}function C(M,V,T){var I=V[0]-T[0]*M.k,P=V[1]-T[1]*M.k;return I===M.x&&P===M.y?M:new ja(M.k,I,P)}function j(M){return[(+M[0][0]+ +M[1][0])/2,(+M[0][1]+ +M[1][1])/2]}function A(M,V,T,I){M.on("start.zoom",function(){$(this,arguments).event(I).start()}).on("interrupt.zoom end.zoom",function(){$(this,arguments).event(I).end()}).tween("zoom",function(){var P=this,W=arguments,F=$(P,W).event(I),q=t.apply(P,W),X=T==null?j(q):typeof T=="function"?T.apply(P,W):T,Q=Math.max(q[1][0]-q[0][0],q[1][1]-q[0][1]),se=P.__zoom,ae=typeof V=="function"?V.apply(P,W):V,de=c(se.invert(X).concat(Q/se.k),ae.invert(X).concat(Q/ae.k));return function(ce){if(ce===1)ce=ae;else{var fe=de(ce),ve=Q/fe[2];ce=new ja(ve,X[0]-fe[0]*ve,X[1]-fe[1]*ve)}F.zoom(null,ce)}})}function $(M,V,T){return!T&&M.__zooming||new k(M,V)}function k(M,V){this.that=M,this.args=V,this.active=0,this.sourceEvent=null,this.extent=t.apply(M,V),this.taps=0}k.prototype={event:function(M){return M&&(this.sourceEvent=M),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(M,V){return this.mouse&&M!=="mouse"&&(this.mouse[1]=V.invert(this.mouse[0])),this.touch0&&M!=="touch"&&(this.touch0[1]=V.invert(this.touch0[0])),this.touch1&&M!=="touch"&&(this.touch1[1]=V.invert(this.touch1[0])),this.that.__zoom=V,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(M){var V=Cs(this.that).datum();u.call(M,this.that,new _6e(M,{sourceEvent:this.sourceEvent,target:N,transform:this.that.__zoom,dispatch:u}),V)}};function R(M,...V){if(!e.apply(this,arguments))return;var T=$(this,V).event(M),I=this.__zoom,P=Math.max(i[0],Math.min(i[1],I.k*Math.pow(2,r.apply(this,arguments)))),W=Pi(M);if(T.wheel)(T.mouse[0][0]!==W[0]||T.mouse[0][1]!==W[1])&&(T.mouse[1]=I.invert(T.mouse[0]=W)),clearTimeout(T.wheel);else{if(I.k===P)return;T.mouse=[W,I.invert(W)],tx(this),T.start()}Gp(M),T.wheel=setTimeout(F,v),T.zoom("mouse",n(C(_(I,P),T.mouse[0],T.mouse[1]),T.extent,o));function F(){T.wheel=null,T.end()}}function B(M,...V){if(p||!e.apply(this,arguments))return;var T=M.currentTarget,I=$(this,V,!0).event(M),P=Cs(M.view).on("mousemove.zoom",X,!0).on("mouseup.zoom",Q,!0),W=Pi(M,T),F=M.clientX,q=M.clientY;XG(M.view),tC(M),I.mouse=[W,this.__zoom.invert(W)],tx(this),I.start();function X(se){if(Gp(se),!I.moved){var ae=se.clientX-F,de=se.clientY-q;I.moved=ae*ae+de*de>x}I.event(se).zoom("mouse",n(C(I.that.__zoom,I.mouse[0]=Pi(se,T),I.mouse[1]),I.extent,o))}function Q(se){P.on("mousemove.zoom mouseup.zoom",null),KG(se.view,I.moved),Gp(se),I.event(se).end()}}function z(M,...V){if(e.apply(this,arguments)){var T=this.__zoom,I=Pi(M.changedTouches?M.changedTouches[0]:M,this),P=T.invert(I),W=T.k*(M.shiftKey?.5:2),F=n(C(_(T,W),I,P),t.apply(this,V),o);Gp(M),a>0?Cs(this).transition().duration(a).call(A,F,I,M):Cs(this).call(N.transform,F,I,M)}}function D(M,...V){if(e.apply(this,arguments)){var T=M.touches,I=T.length,P=$(this,V,M.changedTouches.length===I).event(M),W,F,q,X;for(tC(M),F=0;F<I;++F)q=T[F],X=Pi(q,this),X=[X,this.__zoom.invert(X),q.identifier],P.touch0?!P.touch1&&P.touch0[2]!==X[2]&&(P.touch1=X,P.taps=0):(P.touch0=X,W=!0,P.taps=1+!!f);f&&(f=clearTimeout(f)),W&&(P.taps<2&&(h=X[0],f=setTimeout(function(){f=null},y)),tx(this),P.start())}}function L(M,...V){if(this.__zooming){var T=$(this,V).event(M),I=M.changedTouches,P=I.length,W,F,q,X;for(Gp(M),W=0;W<P;++W)F=I[W],q=Pi(F,this),T.touch0&&T.touch0[2]===F.identifier?T.touch0[0]=q:T.touch1&&T.touch1[2]===F.identifier&&(T.touch1[0]=q);if(F=T.that.__zoom,T.touch1){var Q=T.touch0[0],se=T.touch0[1],ae=T.touch1[0],de=T.touch1[1],ce=(ce=ae[0]-Q[0])*ce+(ce=ae[1]-Q[1])*ce,fe=(fe=de[0]-se[0])*fe+(fe=de[1]-se[1])*fe;F=_(F,Math.sqrt(ce/fe)),q=[(Q[0]+ae[0])/2,(Q[1]+ae[1])/2],X=[(se[0]+de[0])/2,(se[1]+de[1])/2]}else if(T.touch0)q=T.touch0[0],X=T.touch0[1];else return;T.zoom("touch",n(C(F,q,X),T.extent,o))}}function H(M,...V){if(this.__zooming){var T=$(this,V).event(M),I=M.changedTouches,P=I.length,W,F;for(tC(M),p&&clearTimeout(p),p=setTimeout(function(){p=null},y),W=0;W<P;++W)F=I[W],T.touch0&&T.touch0[2]===F.identifier?delete T.touch0:T.touch1&&T.touch1[2]===F.identifier&&delete T.touch1;if(T.touch1&&!T.touch0&&(T.touch0=T.touch1,delete T.touch1),T.touch0)T.touch0[1]=this.__zoom.invert(T.touch0[0]);else if(T.end(),T.taps===2&&(F=Pi(F,this),Math.hypot(h[0]-F[0],h[1]-F[1])<E)){var q=Cs(this).on("dblclick.zoom");q&&q.apply(this,arguments)}}}return N.wheelDelta=function(M){return arguments.length?(r=typeof M=="function"?M:xv(+M),N):r},N.filter=function(M){return arguments.length?(e=typeof M=="function"?M:xv(!!M),N):e},N.touchable=function(M){return arguments.length?(s=typeof M=="function"?M:xv(!!M),N):s},N.extent=function(M){return arguments.length?(t=typeof M=="function"?M:xv([[+M[0][0],+M[0][1]],[+M[1][0],+M[1][1]]]),N):t},N.scaleExtent=function(M){return arguments.length?(i[0]=+M[0],i[1]=+M[1],N):[i[0],i[1]]},N.translateExtent=function(M){return arguments.length?(o[0][0]=+M[0][0],o[1][0]=+M[1][0],o[0][1]=+M[0][1],o[1][1]=+M[1][1],N):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},N.constrain=function(M){return arguments.length?(n=M,N):n},N.duration=function(M){return arguments.length?(a=+M,N):a},N.interpolate=function(M){return arguments.length?(c=M,N):c},N.on=function(){var M=u.on.apply(u,arguments);return M===u?N:M},N.clickDistance=function(M){return arguments.length?(x=(M=+M)*M,N):Math.sqrt(x)},N.tapDistance=function(M){return arguments.length?(E=+M,N):E},N}const Io={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},fy=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],mY=["Enter"," ","Escape"];var qh;(function(e){e.Strict="strict",e.Loose="loose"})(qh||(qh={}));var Yu;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Yu||(Yu={}));var hy;(function(e){e.Partial="partial",e.Full="full"})(hy||(hy={}));const pY={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var Zl;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Zl||(Zl={}));var ud;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(ud||(ud={}));var it;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(it||(it={}));const L9={[it.Left]:it.Right,[it.Right]:it.Left,[it.Top]:it.Bottom,[it.Bottom]:it.Top};function gY(e){return e===null?null:e?"valid":"invalid"}const yY=e=>"id"in e&&"source"in e&&"target"in e,$6e=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),F3=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),y0=(e,t=[0,0])=>{const{width:n,height:r}=ol(e),s=e.origin??t,i=n*s[0],o=r*s[1];return{x:e.position.x-i,y:e.position.y-o}},R6e=(e,t={nodeOrigin:[0,0],nodeLookup:void 0})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,s)=>{const i=typeof s=="string";let o=!t.nodeLookup&&!i?s:void 0;t.nodeLookup&&(o=i?t.nodeLookup.get(s):F3(s)?s:t.nodeLookup.get(s.id));const a=o?Ew(o,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return LS(r,a)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return FS(n)},b0=(e,t={})=>{if(e.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(r=>{if(t.filter===void 0||t.filter(r)){const s=Ew(r);n=LS(n,s)}}),FS(n)},bY=(e,t,[n,r,s]=[0,0,1],i=!1,o=!1)=>{const a={...v0(t,[n,r,s]),width:t.width/s,height:t.height/s},c=[];for(const u of e.values()){const{measured:f,selectable:h=!0,hidden:p=!1}=u;if(o&&!h||p)continue;const y=f.width??u.width??u.initialWidth??null,v=f.height??u.height??u.initialHeight??null,x=my(a,Wh(u)),E=(y??0)*(v??0),N=i&&x>0;(!u.internals.handleBounds||N||x>=E||u.dragging)&&c.push(u)}return c},k6e=(e,t)=>{const n=new Set;return e.forEach(r=>{n.add(r.id)}),t.filter(r=>n.has(r.source)||n.has(r.target))};function Tj(e,t){const n=new Map,r=t!=null&&t.nodes?new Set(t.nodes.map(s=>s.id)):null;return e.forEach(s=>{s.measured.width&&s.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!s.hidden)&&(!r||r.has(s.id))&&n.set(s.id,s)}),n}async function $j({nodes:e,width:t,height:n,panZoom:r,minZoom:s,maxZoom:i},o){if(e.size===0)return Promise.resolve(!1);const a=b0(e),c=B3(a,t,n,(o==null?void 0:o.minZoom)??s,(o==null?void 0:o.maxZoom)??i,(o==null?void 0:o.padding)??.1);return await r.setViewport(c,{duration:o==null?void 0:o.duration}),Promise.resolve(!0)}function vY({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:s,onError:i}){const o=n.get(e),a=o.parentId?n.get(o.parentId):void 0,{x:c,y:u}=a?a.internals.positionAbsolute:{x:0,y:0},f=o.origin??r;let h=s;if(o.extent==="parent"&&!o.expandParent)if(!a)i==null||i("005",Io.error005());else{const y=a.measured.width,v=a.measured.height;y&&v&&(h=[[c,u],[c+y,u+v]])}else a&&Gh(o.extent)&&(h=[[o.extent[0][0]+c,o.extent[0][1]+u],[o.extent[1][0]+c,o.extent[1][1]+u]]);const p=Gh(h)?dd(t,h,o.measured):t;return(o.measured.width===void 0||o.measured.height===void 0)&&(i==null||i("015",Io.error015())),{position:{x:p.x-c+(o.measured.width??0)*f[0],y:p.y-u+(o.measured.height??0)*f[1]},positionAbsolute:p}}async function M6e({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:s}){const i=new Set(e.map(p=>p.id)),o=[];for(const p of n){if(p.deletable===!1)continue;const y=i.has(p.id),v=!y&&p.parentId&&o.find(x=>x.id===p.parentId);(y||v)&&o.push(p)}const a=new Set(t.map(p=>p.id)),c=r.filter(p=>p.deletable!==!1),f=k6e(o,c);for(const p of c)a.has(p.id)&&!f.find(v=>v.id===p.id)&&f.push(p);if(!s)return{edges:f,nodes:o};const h=await s({nodes:o,edges:f});return typeof h=="boolean"?h?{edges:f,nodes:o}:{edges:[],nodes:[]}:h}const Hh=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),dd=(e={x:0,y:0},t,n)=>({x:Hh(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:Hh(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function xY(e,t,n){const{width:r,height:s}=ol(n),{x:i,y:o}=n.internals.positionAbsolute;return dd(e,[[i,o],[i+r,o+s]],t)}const F9=(e,t,n)=>e<t?Hh(Math.abs(e-t),1,t)/t:e>n?-Hh(Math.abs(e-n),1,t)/t:0,wY=(e,t,n=15,r=40)=>{const s=F9(e.x,r,t.width-r)*n,i=F9(e.y,r,t.height-r)*n;return[s,i]},LS=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Rj=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),FS=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),Wh=(e,t=[0,0])=>{var s,i;const{x:n,y:r}=F3(e)?e.internals.positionAbsolute:y0(e,t);return{x:n,y:r,width:((s=e.measured)==null?void 0:s.width)??e.width??e.initialWidth??0,height:((i=e.measured)==null?void 0:i.height)??e.height??e.initialHeight??0}},Ew=(e,t=[0,0])=>{var s,i;const{x:n,y:r}=F3(e)?e.internals.positionAbsolute:y0(e,t);return{x:n,y:r,x2:n+(((s=e.measured)==null?void 0:s.width)??e.width??e.initialWidth??0),y2:r+(((i=e.measured)==null?void 0:i.height)??e.height??e.initialHeight??0)}},SY=(e,t)=>FS(LS(Rj(e),Rj(t))),my=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},B9=e=>Hi(e.width)&&Hi(e.height)&&Hi(e.x)&&Hi(e.y),Hi=e=>!isNaN(e)&&isFinite(e),I6e=(e,t)=>{},BS=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),v0=({x:e,y:t},[n,r,s],i=!1,o=[1,1])=>{const a={x:(e-n)/s,y:(t-r)/s};return i?BS(a,o):a},EY=({x:e,y:t},[n,r,s])=>({x:e*s+n,y:t*s+r}),B3=(e,t,n,r,s,i)=>{const o=t/(e.width*(1+i)),a=n/(e.height*(1+i)),c=Math.min(o,a),u=Hh(c,r,s),f=e.x+e.width/2,h=e.y+e.height/2,p=t/2-f*u,y=n/2-h*u;return{x:p,y,zoom:u}},Nw=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function Gh(e){return e!==void 0&&e!=="parent"}function ol(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function NY(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function _Y(e,t={width:0,height:0},n,r,s){const i={...e},o=r.get(n);if(o){const a=o.origin||s;i.x+=o.internals.positionAbsolute.x-(t.width??0)*a[0],i.y+=o.internals.positionAbsolute.y-(t.height??0)*a[1]}return i}function z9(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function xg(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:s}){const{x:i,y:o}=Ia(e),a=v0({x:i-((s==null?void 0:s.left)??0),y:o-((s==null?void 0:s.top)??0)},r),{x:c,y:u}=n?BS(a,t):a;return{xSnapped:c,ySnapped:u,...a}}const zS=e=>({width:e.offsetWidth,height:e.offsetHeight}),CY=e=>{var t;return((t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},P6e=["INPUT","SELECT","TEXTAREA"];function kj(e){var r,s;const t=((s=(r=e.composedPath)==null?void 0:r.call(e))==null?void 0:s[0])||e.target;return(t==null?void 0:t.nodeType)!==1?!1:P6e.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const OY=e=>"clientX"in e,Ia=(e,t)=>{var i,o;const n=OY(e),r=n?e.clientX:(i=e.touches)==null?void 0:i[0].clientX,s=n?e.clientY:(o=e.touches)==null?void 0:o[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:s-((t==null?void 0:t.top)??0)}},V9=(e,t,n,r,s)=>{const i=t.querySelectorAll(`.${e}`);return!i||!i.length?null:Array.from(i).map(o=>{const a=o.getBoundingClientRect();return{id:o.getAttribute("data-handleid"),type:e,nodeId:s,position:o.getAttribute("data-handlepos"),x:(a.left-n.left)/r,y:(a.top-n.top)/r,...zS(o)}})};function jY({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:s,sourceControlY:i,targetControlX:o,targetControlY:a}){const c=e*.125+s*.375+o*.375+n*.125,u=t*.125+i*.375+a*.375+r*.125,f=Math.abs(c-e),h=Math.abs(u-t);return[c,u,f,h]}function wv(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function U9({pos:e,x1:t,y1:n,x2:r,y2:s,c:i}){switch(e){case it.Left:return[t-wv(t-r,i),n];case it.Right:return[t+wv(r-t,i),n];case it.Top:return[t,n-wv(n-s,i)];case it.Bottom:return[t,n+wv(s-n,i)]}}function AY({sourceX:e,sourceY:t,sourcePosition:n=it.Bottom,targetX:r,targetY:s,targetPosition:i=it.Top,curvature:o=.25}){const[a,c]=U9({pos:n,x1:e,y1:t,x2:r,y2:s,c:o}),[u,f]=U9({pos:i,x1:r,y1:s,x2:e,y2:t,c:o}),[h,p,y,v]=jY({sourceX:e,sourceY:t,targetX:r,targetY:s,sourceControlX:a,sourceControlY:c,targetControlX:u,targetControlY:f});return[`M${e},${t} C${a},${c} ${u},${f} ${r},${s}`,h,p,y,v]}function TY({sourceX:e,sourceY:t,targetX:n,targetY:r}){const s=Math.abs(n-e)/2,i=n<e?n+s:n-s,o=Math.abs(r-t)/2,a=r<t?r+o:r-o;return[i,a,s,o]}function D6e({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r=0,elevateOnSelect:s=!1}){if(!s)return r;const i=n||t.selected||e.selected,o=Math.max(e.internals.z||0,t.internals.z||0,1e3);return r+(i?o:0)}function L6e({sourceNode:e,targetNode:t,width:n,height:r,transform:s}){const i=LS(Ew(e),Ew(t));i.x===i.x2&&(i.x2+=1),i.y===i.y2&&(i.y2+=1);const o={x:-s[0]/s[2],y:-s[1]/s[2],width:n/s[2],height:r/s[2]};return my(o,FS(i))>0}const F6e=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,B6e=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),$Y=(e,t)=>{if(!e.source||!e.target)return t;let n;return yY(e)?n={...e}:n={...e,id:F6e(e)},B6e(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function RY({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[s,i,o,a]=TY({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,s,i,o,a]}const q9={[it.Left]:{x:-1,y:0},[it.Right]:{x:1,y:0},[it.Top]:{x:0,y:-1},[it.Bottom]:{x:0,y:1}},z6e=({source:e,sourcePosition:t=it.Bottom,target:n})=>t===it.Left||t===it.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},H9=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function V6e({source:e,sourcePosition:t=it.Bottom,target:n,targetPosition:r=it.Top,center:s,offset:i}){const o=q9[t],a=q9[r],c={x:e.x+o.x*i,y:e.y+o.y*i},u={x:n.x+a.x*i,y:n.y+a.y*i},f=z6e({source:c,sourcePosition:t,target:u}),h=f.x!==0?"x":"y",p=f[h];let y=[],v,x;const E={x:0,y:0},N={x:0,y:0},[_,C,j,A]=TY({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(o[h]*a[h]===-1){v=s.x??_,x=s.y??C;const k=[{x:v,y:c.y},{x:v,y:u.y}],R=[{x:c.x,y:x},{x:u.x,y:x}];o[h]===p?y=h==="x"?k:R:y=h==="x"?R:k}else{const k=[{x:c.x,y:u.y}],R=[{x:u.x,y:c.y}];if(h==="x"?y=o.x===p?R:k:y=o.y===p?k:R,t===r){const H=Math.abs(e[h]-n[h]);if(H<=i){const M=Math.min(i-1,i-H);o[h]===p?E[h]=(c[h]>e[h]?-1:1)*M:N[h]=(u[h]>n[h]?-1:1)*M}}if(t!==r){const H=h==="x"?"y":"x",M=o[h]===a[H],V=c[H]>u[H],T=c[H]<u[H];(o[h]===1&&(!M&&V||M&&T)||o[h]!==1&&(!M&&T||M&&V))&&(y=h==="x"?k:R)}const B={x:c.x+E.x,y:c.y+E.y},z={x:u.x+N.x,y:u.y+N.y},D=Math.max(Math.abs(B.x-y[0].x),Math.abs(z.x-y[0].x)),L=Math.max(Math.abs(B.y-y[0].y),Math.abs(z.y-y[0].y));D>=L?(v=(B.x+z.x)/2,x=y[0].y):(v=y[0].x,x=(B.y+z.y)/2)}return[[e,{x:c.x+E.x,y:c.y+E.y},...y,{x:u.x+N.x,y:u.y+N.y},n],v,x,j,A]}function U6e(e,t,n,r){const s=Math.min(H9(e,t)/2,H9(t,n)/2,r),{x:i,y:o}=t;if(e.x===i&&i===n.x||e.y===o&&o===n.y)return`L${i} ${o}`;if(e.y===o){const u=e.x<n.x?-1:1,f=e.y<n.y?1:-1;return`L ${i+s*u},${o}Q ${i},${o} ${i},${o+s*f}`}const a=e.x<n.x?1:-1,c=e.y<n.y?-1:1;return`L ${i},${o+s*c}Q ${i},${o} ${i+s*a},${o}`}function Mj({sourceX:e,sourceY:t,sourcePosition:n=it.Bottom,targetX:r,targetY:s,targetPosition:i=it.Top,borderRadius:o=5,centerX:a,centerY:c,offset:u=20}){const[f,h,p,y,v]=V6e({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:s},targetPosition:i,center:{x:a,y:c},offset:u});return[f.reduce((E,N,_)=>{let C="";return _>0&&_<f.length-1?C=U6e(f[_-1],N,f[_+1],o):C=`${_===0?"M":"L"}${N.x} ${N.y}`,E+=C,E},""),h,p,y,v]}function W9(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function q6e(e){var h;const{sourceNode:t,targetNode:n}=e;if(!W9(t)||!W9(n))return null;const r=t.internals.handleBounds||G9(t.handles),s=n.internals.handleBounds||G9(n.handles),i=Y9((r==null?void 0:r.source)??[],e.sourceHandle),o=Y9(e.connectionMode===qh.Strict?(s==null?void 0:s.target)??[]:((s==null?void 0:s.target)??[]).concat((s==null?void 0:s.source)??[]),e.targetHandle);if(!i||!o)return(h=e.onError)==null||h.call(e,"008",Io.error008(i?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const a=(i==null?void 0:i.position)||it.Bottom,c=(o==null?void 0:o.position)||it.Top,u=py(t,i,a),f=py(n,o,c);return{sourceX:u.x,sourceY:u.y,targetX:f.x,targetY:f.y,sourcePosition:a,targetPosition:c}}function G9(e){if(!e)return null;const t=[],n=[];for(const r of e)r.width=r.width??1,r.height=r.height??1,r.type==="source"?t.push(r):r.type==="target"&&n.push(r);return{source:t,target:n}}function py(e,t,n=it.Left,r=!1){const s=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,i=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:o,height:a}=t??ol(e);if(r)return{x:s+o/2,y:i+a/2};switch((t==null?void 0:t.position)??n){case it.Top:return{x:s+o/2,y:i};case it.Right:return{x:s+o,y:i+a/2};case it.Bottom:return{x:s+o/2,y:i+a};case it.Left:return{x:s,y:i+a/2}}}function Y9(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function Ij(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`:""}function H6e(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:s}){const i=new Set;return e.reduce((o,a)=>([a.markerStart||r,a.markerEnd||s].forEach(c=>{if(c&&typeof c=="object"){const u=Ij(c,t);i.has(u)||(o.push({id:u,color:c.color||n,...c}),i.add(u))}}),o),[]).sort((o,a)=>o.id.localeCompare(a.id))}const z3={nodeOrigin:[0,0],nodeExtent:fy,elevateNodesOnSelect:!0,defaults:{}},W6e={...z3,checkEquality:!0};function V3(e,t){const n={...e};for(const r in t)t[r]!==void 0&&(n[r]=t[r]);return n}function G6e(e,t,n){const r=V3(z3,n);for(const s of e.values())if(s.parentId)U3(s,e,t,r);else{const i=y0(s,r.nodeOrigin),o=Gh(s.extent)?s.extent:r.nodeExtent,a=dd(i,o,ol(s));s.internals.positionAbsolute=a}}function Pj(e,t,n,r){var a,c;const s=V3(W6e,r),i=new Map(t),o=s!=null&&s.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const u of e){let f=i.get(u.id);if(s.checkEquality&&u===(f==null?void 0:f.internals.userNode))t.set(u.id,f);else{const h=y0(u,s.nodeOrigin),p=Gh(u.extent)?u.extent:s.nodeExtent,y=dd(h,p,ol(u));f={...s.defaults,...u,measured:{width:(a=u.measured)==null?void 0:a.width,height:(c=u.measured)==null?void 0:c.height},internals:{positionAbsolute:y,handleBounds:u.measured?f==null?void 0:f.internals.handleBounds:void 0,z:kY(u,o),userNode:u}},t.set(u.id,f)}u.parentId&&U3(f,t,n,r)}}function Y6e(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function U3(e,t,n,r){const{elevateNodesOnSelect:s,nodeOrigin:i,nodeExtent:o}=V3(z3,r),a=e.parentId,c=t.get(a);if(!c){console.warn(`Parent node ${a} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}Y6e(e,n);const u=s?1e3:0,{x:f,y:h,z:p}=J6e(e,c,i,o,u),{positionAbsolute:y}=e.internals,v=f!==y.x||h!==y.y;(v||p!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:v?{x:f,y:h}:y,z:p}})}function kY(e,t){return(Hi(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function J6e(e,t,n,r,s){const{x:i,y:o}=t.internals.positionAbsolute,a=ol(e),c=y0(e,n),u=Gh(e.extent)?dd(c,e.extent,a):c;let f=dd({x:i+u.x,y:o+u.y},r,a);e.extent==="parent"&&(f=xY(f,a,t));const h=kY(e,s),p=t.internals.z??0;return{x:f.x,y:f.y,z:p>h?p:h}}function q3(e,t,n,r=[0,0]){var o;const s=[],i=new Map;for(const a of e){const c=t.get(a.parentId);if(!c)continue;const u=((o=i.get(a.parentId))==null?void 0:o.expandedRect)??Wh(c),f=SY(u,a.rect);i.set(a.parentId,{expandedRect:f,parent:c})}return i.size>0&&i.forEach(({expandedRect:a,parent:c},u)=>{var C;const f=c.internals.positionAbsolute,h=ol(c),p=c.origin??r,y=a.x<f.x?Math.round(Math.abs(f.x-a.x)):0,v=a.y<f.y?Math.round(Math.abs(f.y-a.y)):0,x=Math.max(h.width,Math.round(a.width)),E=Math.max(h.height,Math.round(a.height)),N=(x-h.width)*p[0],_=(E-h.height)*p[1];(y>0||v>0||N||_)&&(s.push({id:u,type:"position",position:{x:c.position.x-y+N,y:c.position.y-v+_}}),(C=n.get(u))==null||C.forEach(j=>{e.some(A=>A.id===j.id)||s.push({id:j.id,type:"position",position:{x:j.position.x+y,y:j.position.y+v}})})),(h.width<a.width||h.height<a.height||y||v)&&s.push({id:u,type:"dimensions",setAttributes:!0,dimensions:{width:x+(y?p[0]*y-N:0),height:E+(v?p[1]*v-_:0)}})}),s}function X6e(e,t,n,r,s,i){const o=r==null?void 0:r.querySelector(".xyflow__viewport");let a=!1;if(!o)return{changes:[],updatedInternals:a};const c=[],u=window.getComputedStyle(o),{m22:f}=new window.DOMMatrixReadOnly(u.transform),h=[];for(const p of e.values()){const y=t.get(p.id);if(!y)continue;if(y.hidden){t.set(y.id,{...y,internals:{...y.internals,handleBounds:void 0}}),a=!0;continue}const v=zS(p.nodeElement),x=y.measured.width!==v.width||y.measured.height!==v.height;if(!!(v.width&&v.height&&(x||!y.internals.handleBounds||p.force))){const N=p.nodeElement.getBoundingClientRect(),_=Gh(y.extent)?y.extent:i;let{positionAbsolute:C}=y.internals;y.parentId&&y.extent==="parent"?C=xY(C,v,t.get(y.parentId)):_&&(C=dd(C,_,v));const j={...y,measured:v,internals:{...y.internals,positionAbsolute:C,handleBounds:{source:V9("source",p.nodeElement,N,f,y.id),target:V9("target",p.nodeElement,N,f,y.id)}}};t.set(y.id,j),y.parentId&&U3(j,t,n,{nodeOrigin:s}),a=!0,x&&(c.push({id:y.id,type:"dimensions",dimensions:v}),y.expandParent&&y.parentId&&h.push({id:y.id,parentId:y.parentId,rect:Wh(j,s)}))}}if(h.length>0){const p=q3(h,t,n,s);c.push(...p)}return{changes:c,updatedInternals:a}}async function K6e({delta:e,panZoom:t,transform:n,translateExtent:r,width:s,height:i}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const o=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[s,i]],r),a=!!o&&(o.x!==n[0]||o.y!==n[1]||o.k!==n[2]);return Promise.resolve(a)}function J9(e,t,n,r,s,i){let o=s;const a=r.get(o)||new Map;r.set(o,a.set(n,t)),o=`${s}-${e}`;const c=r.get(o)||new Map;if(r.set(o,c.set(n,t)),i){o=`${s}-${e}-${i}`;const u=r.get(o)||new Map;r.set(o,u.set(n,t))}}function MY(e,t,n){e.clear(),t.clear();for(const r of n){const{source:s,target:i,sourceHandle:o=null,targetHandle:a=null}=r,c={edgeId:r.id,source:s,target:i,sourceHandle:o,targetHandle:a},u=`${s}-${o}--${i}-${a}`,f=`${i}-${a}--${s}-${o}`;J9("source",c,f,e,s,o),J9("target",c,u,e,i,a),t.set(r.id,r)}}function IY(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:IY(n,t):!1}function X9(e,t,n){var s;let r=e;do{if((s=r==null?void 0:r.matches)!=null&&s.call(r,t))return!0;if(r===n)return!1;r=r==null?void 0:r.parentElement}while(r);return!1}function Q6e(e,t,n,r){const s=new Map;for(const[i,o]of e)if((o.selected||o.id===r)&&(!o.parentId||!IY(o,e))&&(o.draggable||t&&typeof o.draggable>"u")){const a=e.get(i);a&&s.set(i,{id:i,position:a.position||{x:0,y:0},distance:{x:n.x-a.internals.positionAbsolute.x,y:n.y-a.internals.positionAbsolute.y},extent:a.extent,parentId:a.parentId,origin:a.origin,expandParent:a.expandParent,internals:{positionAbsolute:a.internals.positionAbsolute||{x:0,y:0}},measured:{width:a.measured.width??0,height:a.measured.height??0}})}return s}function nC({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){var o,a,c;const s=[];for(const[u,f]of t){const h=(o=n.get(u))==null?void 0:o.internals.userNode;h&&s.push({...h,position:f.position,dragging:r})}if(!e)return[s[0],s];const i=(a=n.get(e))==null?void 0:a.internals.userNode;return[i?{...i,position:((c=t.get(e))==null?void 0:c.position)||i.position,dragging:r}:s[0],s]}function Z6e({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:s}){let i={x:null,y:null},o=0,a=new Map,c=!1,u={x:0,y:0},f=null,h=!1,p=null,y=!1;function v({noDragClassName:E,handleSelector:N,domNode:_,isSelectable:C,nodeId:j,nodeClickDistance:A=0}){p=Cs(_);function $({x:z,y:D},L){const{nodeLookup:H,nodeExtent:M,snapGrid:V,snapToGrid:T,nodeOrigin:I,onNodeDrag:P,onSelectionDrag:W,onError:F,updateNodePositions:q}=t();i={x:z,y:D};let X=!1,Q={x:0,y:0,x2:0,y2:0};if(a.size>1&&M){const se=b0(a);Q=Rj(se)}for(const[se,ae]of a){if(!H.has(se))continue;let de={x:z-ae.distance.x,y:D-ae.distance.y};T&&(de=BS(de,V));let ce=[[M[0][0],M[0][1]],[M[1][0],M[1][1]]];if(a.size>1&&M&&!ae.extent){const{positionAbsolute:Ae}=ae.internals,Ce=Ae.x-Q.x+M[0][0],Ee=Ae.x+ae.measured.width-Q.x2+M[1][0],Re=Ae.y-Q.y+M[0][1],ke=Ae.y+ae.measured.height-Q.y2+M[1][1];ce=[[Ce,Re],[Ee,ke]]}const{position:fe,positionAbsolute:ve}=vY({nodeId:se,nextPosition:de,nodeLookup:H,nodeExtent:ce,nodeOrigin:I,onError:F});X=X||ae.position.x!==fe.x||ae.position.y!==fe.y,ae.position=fe,ae.internals.positionAbsolute=ve}if(X&&(q(a,!0),L&&(r||P||!j&&W))){const[se,ae]=nC({nodeId:j,dragItems:a,nodeLookup:H});r==null||r(L,a,se,ae),P==null||P(L,se,ae),j||W==null||W(L,ae)}}async function k(){if(!f)return;const{transform:z,panBy:D,autoPanSpeed:L,autoPanOnNodeDrag:H}=t();if(!H){c=!1,cancelAnimationFrame(o);return}const[M,V]=wY(u,f,L);(M!==0||V!==0)&&(i.x=(i.x??0)-M/z[2],i.y=(i.y??0)-V/z[2],await D({x:M,y:V})&&$(i,null)),o=requestAnimationFrame(k)}function R(z){var X;const{nodeLookup:D,multiSelectionActive:L,nodesDraggable:H,transform:M,snapGrid:V,snapToGrid:T,selectNodesOnDrag:I,onNodeDragStart:P,onSelectionDragStart:W,unselectNodesAndEdges:F}=t();h=!0,(!I||!C)&&!L&&j&&((X=D.get(j))!=null&&X.selected||F()),C&&I&&j&&(e==null||e(j));const q=xg(z.sourceEvent,{transform:M,snapGrid:V,snapToGrid:T,containerBounds:f});if(i=q,a=Q6e(D,H,q,j),a.size>0&&(n||P||!j&&W)){const[Q,se]=nC({nodeId:j,dragItems:a,nodeLookup:D});n==null||n(z.sourceEvent,a,Q,se),P==null||P(z.sourceEvent,Q,se),j||W==null||W(z.sourceEvent,se)}}const B=QG().clickDistance(A).on("start",z=>{const{domNode:D,nodeDragThreshold:L,transform:H,snapGrid:M,snapToGrid:V}=t();f=(D==null?void 0:D.getBoundingClientRect())||null,y=!1,L===0&&R(z),i=xg(z.sourceEvent,{transform:H,snapGrid:M,snapToGrid:V,containerBounds:f}),u=Ia(z.sourceEvent,f)}).on("drag",z=>{const{autoPanOnNodeDrag:D,transform:L,snapGrid:H,snapToGrid:M,nodeDragThreshold:V,nodeLookup:T}=t(),I=xg(z.sourceEvent,{transform:L,snapGrid:H,snapToGrid:M,containerBounds:f});if((z.sourceEvent.type==="touchmove"&&z.sourceEvent.touches.length>1||j&&!T.has(j))&&(y=!0),!y){if(!c&&D&&h&&(c=!0,k()),!h){const P=I.xSnapped-(i.x??0),W=I.ySnapped-(i.y??0);Math.sqrt(P*P+W*W)>V&&R(z)}(i.x!==I.xSnapped||i.y!==I.ySnapped)&&a&&h&&(u=Ia(z.sourceEvent,f),$(I,z.sourceEvent))}}).on("end",z=>{if(!(!h||y)&&(c=!1,h=!1,cancelAnimationFrame(o),a.size>0)){const{nodeLookup:D,updateNodePositions:L,onNodeDragStop:H,onSelectionDragStop:M}=t();if(L(a,!1),s||H||!j&&M){const[V,T]=nC({nodeId:j,dragItems:a,nodeLookup:D,dragging:!1});s==null||s(z.sourceEvent,a,V,T),H==null||H(z.sourceEvent,V,T),j||M==null||M(z.sourceEvent,T)}}}).filter(z=>{const D=z.target;return!z.button&&(!E||!X9(D,`.${E}`,_))&&(!N||X9(D,N,_))});p.call(B)}function x(){p==null||p.on(".drag",null)}return{update:v,destroy:x}}function eIe(e,t,n){const r=[],s={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const i of t.values())my(s,Wh(i))>0&&r.push(i);return r}const tIe=250;function nIe(e,t,n,r){var a,c;let s=[],i=1/0;const o=eIe(e,n,t+tIe);for(const u of o){const f=[...((a=u.internals.handleBounds)==null?void 0:a.source)??[],...((c=u.internals.handleBounds)==null?void 0:c.target)??[]];for(const h of f){if(r.nodeId===h.nodeId&&r.type===h.type&&r.id===h.id)continue;const{x:p,y}=py(u,h,h.position,!0),v=Math.sqrt(Math.pow(p-e.x,2)+Math.pow(y-e.y,2));v>t||(v<i?(s=[{...h,x:p,y}],i=v):v===i&&s.push({...h,x:p,y}))}}if(!s.length)return null;if(s.length>1){const u=r.type==="source"?"target":"source";return s.find(f=>f.type===u)??s[0]}return s[0]}function PY(e,t,n,r,s,i=!1){var u,f,h;const o=r.get(e);if(!o)return null;const a=s==="strict"?(u=o.internals.handleBounds)==null?void 0:u[t]:[...((f=o.internals.handleBounds)==null?void 0:f.source)??[],...((h=o.internals.handleBounds)==null?void 0:h.target)??[]],c=(n?a==null?void 0:a.find(p=>p.id===n):a==null?void 0:a[0])??null;return c&&i?{...c,...py(o,c,c.position,!0)}:c}function DY(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function rIe(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const LY=()=>!0;function sIe(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:s,edgeUpdaterType:i,isTarget:o,domNode:a,nodeLookup:c,lib:u,autoPanOnConnect:f,flowId:h,panBy:p,cancelConnection:y,onConnectStart:v,onConnect:x,onConnectEnd:E,isValidConnection:N=LY,onReconnectEnd:_,updateConnection:C,getTransform:j,getFromHandle:A,autoPanSpeed:$}){const k=CY(e.target);let R=0,B;const{x:z,y:D}=Ia(e),L=k==null?void 0:k.elementFromPoint(z,D),H=DY(i,L),M=a==null?void 0:a.getBoundingClientRect();if(!M||!H)return;const V=PY(s,H,r,c,t);if(!V)return;let T=Ia(e,M),I=!1,P=null,W=!1,F=null;function q(){if(!f||!M)return;const[ve,Ae]=wY(T,M,$);p({x:ve,y:Ae}),R=requestAnimationFrame(q)}const X={...V,nodeId:s,type:H,position:V.position},Q=c.get(s),ae={inProgress:!0,isValid:null,from:py(Q,X,it.Left,!0),fromHandle:X,fromPosition:X.position,fromNode:Q,to:T,toHandle:null,toPosition:L9[X.position],toNode:null};C(ae);let de=ae;v==null||v(e,{nodeId:s,handleId:r,handleType:H});function ce(ve){if(!A()||!X){fe(ve);return}const Ae=j();T=Ia(ve,M),B=nIe(v0(T,Ae,!1,[1,1]),n,c,X),I||(q(),I=!0);const Ce=FY(ve,{handle:B,connectionMode:t,fromNodeId:s,fromHandleId:r,fromType:o?"target":"source",isValidConnection:N,doc:k,lib:u,flowId:h,nodeLookup:c});F=Ce.handleDomNode,P=Ce.connection,W=rIe(!!B,Ce.isValid);const Ee={...de,isValid:W,to:B&&W?EY({x:B.x,y:B.y},Ae):T,toHandle:Ce.toHandle,toPosition:W&&Ce.toHandle?Ce.toHandle.position:L9[X.position],toNode:Ce.toHandle?c.get(Ce.toHandle.nodeId):null};W&&B&&de.toHandle&&Ee.toHandle&&de.toHandle.type===Ee.toHandle.type&&de.toHandle.nodeId===Ee.toHandle.nodeId&&de.toHandle.id===Ee.toHandle.id&&de.to.x===Ee.to.x&&de.to.y===Ee.to.y||(C(Ee),de=Ee)}function fe(ve){(B||F)&&P&&W&&(x==null||x(P));const{inProgress:Ae,...Ce}=de,Ee={...Ce,toPosition:de.toHandle?de.toPosition:null};E==null||E(ve,Ee),i&&(_==null||_(ve,Ee)),y(),cancelAnimationFrame(R),I=!1,W=!1,P=null,F=null,k.removeEventListener("mousemove",ce),k.removeEventListener("mouseup",fe),k.removeEventListener("touchmove",ce),k.removeEventListener("touchend",fe)}k.addEventListener("mousemove",ce),k.addEventListener("mouseup",fe),k.addEventListener("touchmove",ce),k.addEventListener("touchend",fe)}function FY(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:s,fromType:i,doc:o,lib:a,flowId:c,isValidConnection:u=LY,nodeLookup:f}){const h=i==="target",p=t?o.querySelector(`.${a}-flow__handle[data-id="${c}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:y,y:v}=Ia(e),x=o.elementFromPoint(y,v),E=x!=null&&x.classList.contains(`${a}-flow__handle`)?x:p,N={handleDomNode:E,isValid:!1,connection:null,toHandle:null};if(E){const _=DY(void 0,E),C=E.getAttribute("data-nodeid"),j=E.getAttribute("data-handleid"),A=E.classList.contains("connectable"),$=E.classList.contains("connectableend");if(!C||!_)return N;const k={source:h?C:r,sourceHandle:h?j:s,target:h?r:C,targetHandle:h?s:j};N.connection=k;const B=A&&$&&(n===qh.Strict?h&&_==="source"||!h&&_==="target":C!==r||j!==s);N.isValid=B&&u(k),N.toHandle=PY(C,_,j,f,n,!1)}return N}const Dj={onPointerDown:sIe,isValid:FY};function iIe({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){const s=Cs(e);function i({translateExtent:a,width:c,height:u,zoomStep:f=10,pannable:h=!0,zoomable:p=!0,inversePan:y=!1}){const v=C=>{const j=n();if(C.sourceEvent.type!=="wheel"||!t)return;const A=-C.sourceEvent.deltaY*(C.sourceEvent.deltaMode===1?.05:C.sourceEvent.deltaMode?1:.002)*f,$=j[2]*Math.pow(2,A);t.scaleTo($)};let x=[0,0];const E=C=>{(C.sourceEvent.type==="mousedown"||C.sourceEvent.type==="touchstart")&&(x=[C.sourceEvent.clientX??C.sourceEvent.touches[0].clientX,C.sourceEvent.clientY??C.sourceEvent.touches[0].clientY])},N=C=>{const j=n();if(C.sourceEvent.type!=="mousemove"&&C.sourceEvent.type!=="touchmove"||!t)return;const A=[C.sourceEvent.clientX??C.sourceEvent.touches[0].clientX,C.sourceEvent.clientY??C.sourceEvent.touches[0].clientY],$=[A[0]-x[0],A[1]-x[1]];x=A;const k=r()*Math.max(j[2],Math.log(j[2]))*(y?-1:1),R={x:j[0]-$[0]*k,y:j[1]-$[1]*k},B=[[0,0],[c,u]];t.setViewportConstrained({x:R.x,y:R.y,zoom:j[2]},B,a)},_=hY().on("start",E).on("zoom",h?N:null).on("zoom.wheel",p?v:null);s.call(_,{})}function o(){s.on("zoom",null)}return{update:i,destroy:o,pointer:Pi}}const oIe=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,VS=e=>({x:e.x,y:e.y,zoom:e.k}),rC=({x:e,y:t,zoom:n})=>DS.translate(e,t).scale(n),Uf=(e,t)=>e.target.closest(`.${t}`),BY=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),sC=(e,t=0,n=()=>{})=>{const r=typeof t=="number"&&t>0;return r||n(),r?e.transition().duration(t).on("end",n):e},zY=e=>{const t=e.ctrlKey&&Nw()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function aIe({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:s,panOnScrollSpeed:i,zoomOnPinch:o,onPanZoomStart:a,onPanZoom:c,onPanZoomEnd:u}){return f=>{if(Uf(f,t))return!1;f.preventDefault(),f.stopImmediatePropagation();const h=n.property("__zoom").k||1;if(f.ctrlKey&&o){const E=Pi(f),N=zY(f),_=h*Math.pow(2,N);r.scaleTo(n,_,E,f);return}const p=f.deltaMode===1?20:1;let y=s===Yu.Vertical?0:f.deltaX*p,v=s===Yu.Horizontal?0:f.deltaY*p;!Nw()&&f.shiftKey&&s!==Yu.Vertical&&(y=f.deltaY*p,v=0),r.translateBy(n,-(y/h)*i,-(v/h)*i,{internal:!0});const x=VS(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,a==null||a(f,x)),e.isPanScrolling&&(c==null||c(f,x),e.panScrollTimeout=setTimeout(()=>{u==null||u(f,x),e.isPanScrolling=!1},150))}}function lIe({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,s){if(!t&&r.type==="wheel"&&!r.ctrlKey||Uf(r,e))return null;r.preventDefault(),n.call(this,r,s)}}function cIe({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{var i,o,a;if((i=r.sourceEvent)!=null&&i.internal)return;const s=VS(r.transform);e.mouseButton=((o=r.sourceEvent)==null?void 0:o.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=s,((a=r.sourceEvent)==null?void 0:a.type)==="mousedown"&&t(!0),n&&(n==null||n(r.sourceEvent,s))}}function uIe({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:s}){return i=>{var o,a;e.usedRightMouseButton=!!(n&&BY(t,e.mouseButton??0)),(o=i.sourceEvent)!=null&&o.sync||r([i.transform.x,i.transform.y,i.transform.k]),s&&!((a=i.sourceEvent)!=null&&a.internal)&&(s==null||s(i.sourceEvent,VS(i.transform)))}}function dIe({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:s,onPaneContextMenu:i}){return o=>{var a;if(!((a=o.sourceEvent)!=null&&a.internal)&&(e.isZoomingOrPanning=!1,i&&BY(t,e.mouseButton??0)&&!e.usedRightMouseButton&&o.sourceEvent&&i(o.sourceEvent),e.usedRightMouseButton=!1,r(!1),s&&oIe(e.prevViewport,o.transform))){const c=VS(o.transform);e.prevViewport=c,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{s==null||s(o.sourceEvent,c)},n?150:0)}}}function fIe({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:s,zoomOnDoubleClick:i,userSelectionActive:o,noWheelClassName:a,noPanClassName:c,lib:u}){return f=>{var v;const h=e||t,p=n&&f.ctrlKey;if(f.button===1&&f.type==="mousedown"&&(Uf(f,`${u}-flow__node`)||Uf(f,`${u}-flow__edge`)))return!0;if(!r&&!h&&!s&&!i&&!n||o||Uf(f,a)&&f.type==="wheel"||Uf(f,c)&&(f.type!=="wheel"||s&&f.type==="wheel"&&!e)||!n&&f.ctrlKey&&f.type==="wheel")return!1;if(!n&&f.type==="touchstart"&&((v=f.touches)==null?void 0:v.length)>1)return f.preventDefault(),!1;if(!h&&!s&&!p&&f.type==="wheel"||!r&&(f.type==="mousedown"||f.type==="touchstart")||Array.isArray(r)&&!r.includes(f.button)&&f.type==="mousedown")return!1;const y=Array.isArray(r)&&r.includes(f.button)||!f.button||f.button<=1;return(!f.ctrlKey||f.type==="wheel")&&y}}function hIe({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:r,translateExtent:s,viewport:i,onPanZoom:o,onPanZoomStart:a,onPanZoomEnd:c,onDraggingChange:u}){const f={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},h=e.getBoundingClientRect(),p=hY().clickDistance(!Hi(r)||r<0?0:r).scaleExtent([t,n]).translateExtent(s),y=Cs(e).call(p);C({x:i.x,y:i.y,zoom:Hh(i.zoom,t,n)},[[0,0],[h.width,h.height]],s);const v=y.on("wheel.zoom"),x=y.on("dblclick.zoom");p.wheelDelta(zY);function E(L,H){return y?new Promise(M=>{p==null||p.transform(sC(y,H==null?void 0:H.duration,()=>M(!0)),L)}):Promise.resolve(!1)}function N({noWheelClassName:L,noPanClassName:H,onPaneContextMenu:M,userSelectionActive:V,panOnScroll:T,panOnDrag:I,panOnScrollMode:P,panOnScrollSpeed:W,preventScrolling:F,zoomOnPinch:q,zoomOnScroll:X,zoomOnDoubleClick:Q,zoomActivationKeyPressed:se,lib:ae,onTransformChange:de}){V&&!f.isZoomingOrPanning&&_();const fe=T&&!se&&!V?aIe({zoomPanValues:f,noWheelClassName:L,d3Selection:y,d3Zoom:p,panOnScrollMode:P,panOnScrollSpeed:W,zoomOnPinch:q,onPanZoomStart:a,onPanZoom:o,onPanZoomEnd:c}):lIe({noWheelClassName:L,preventScrolling:F,d3ZoomHandler:v});if(y.on("wheel.zoom",fe,{passive:!1}),!V){const Ae=cIe({zoomPanValues:f,onDraggingChange:u,onPanZoomStart:a});p.on("start",Ae);const Ce=uIe({zoomPanValues:f,panOnDrag:I,onPaneContextMenu:!!M,onPanZoom:o,onTransformChange:de});p.on("zoom",Ce);const Ee=dIe({zoomPanValues:f,panOnDrag:I,panOnScroll:T,onPaneContextMenu:M,onPanZoomEnd:c,onDraggingChange:u});p.on("end",Ee)}const ve=fIe({zoomActivationKeyPressed:se,panOnDrag:I,zoomOnScroll:X,panOnScroll:T,zoomOnDoubleClick:Q,zoomOnPinch:q,userSelectionActive:V,noPanClassName:H,noWheelClassName:L,lib:ae});p.filter(ve),Q?y.on("dblclick.zoom",x):y.on("dblclick.zoom",null)}function _(){p.on("zoom",null)}async function C(L,H,M){const V=rC(L),T=p==null?void 0:p.constrain()(V,H,M);return T&&await E(T),new Promise(I=>I(T))}async function j(L,H){const M=rC(L);return await E(M,H),new Promise(V=>V(M))}function A(L){if(y){const H=rC(L),M=y.property("__zoom");(M.k!==L.zoom||M.x!==L.x||M.y!==L.y)&&(p==null||p.transform(y,H,null,{sync:!0}))}}function $(){const L=y?fY(y.node()):{x:0,y:0,k:1};return{x:L.x,y:L.y,zoom:L.k}}function k(L,H){return y?new Promise(M=>{p==null||p.scaleTo(sC(y,H==null?void 0:H.duration,()=>M(!0)),L)}):Promise.resolve(!1)}function R(L,H){return y?new Promise(M=>{p==null||p.scaleBy(sC(y,H==null?void 0:H.duration,()=>M(!0)),L)}):Promise.resolve(!1)}function B(L){p==null||p.scaleExtent(L)}function z(L){p==null||p.translateExtent(L)}function D(L){const H=!Hi(L)||L<0?0:L;p==null||p.clickDistance(H)}return{update:N,destroy:_,setViewport:j,setViewportConstrained:C,getViewport:$,scaleTo:k,scaleBy:R,setScaleExtent:B,setTranslateExtent:z,syncViewport:A,setClickDistance:D}}var wg;(function(e){e.Line="line",e.Handle="handle"})(wg||(wg={}));function mIe({width:e,prevWidth:t,height:n,prevHeight:r,affectsX:s,affectsY:i}){const o=e-t,a=n-r,c=[o>0?1:o<0?-1:0,a>0?1:a<0?-1:0];return o&&s&&(c[0]=c[0]*-1),a&&i&&(c[1]=c[1]*-1),c}function pIe(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),r=e.includes("left"),s=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:r,affectsY:s}}function Bl(e,t){return Math.max(0,t-e)}function zl(e,t){return Math.max(0,e-t)}function Sv(e,t,n){return Math.max(0,t-e,e-n)}function K9(e,t){return e?!t:t}function gIe(e,t,n,r,s,i,o,a){let{affectsX:c,affectsY:u}=t;const{isHorizontal:f,isVertical:h}=t,p=f&&h,{xSnapped:y,ySnapped:v}=n,{minWidth:x,maxWidth:E,minHeight:N,maxHeight:_}=r,{x:C,y:j,width:A,height:$,aspectRatio:k}=e;let R=Math.floor(f?y-e.pointerX:0),B=Math.floor(h?v-e.pointerY:0);const z=A+(c?-R:R),D=$+(u?-B:B),L=-i[0]*A,H=-i[1]*$;let M=Sv(z,x,E),V=Sv(D,N,_);if(o){let P=0,W=0;c&&R<0?P=Bl(C+R+L,o[0][0]):!c&&R>0&&(P=zl(C+z+L,o[1][0])),u&&B<0?W=Bl(j+B+H,o[0][1]):!u&&B>0&&(W=zl(j+D+H,o[1][1])),M=Math.max(M,P),V=Math.max(V,W)}if(a){let P=0,W=0;c&&R>0?P=zl(C+R,a[0][0]):!c&&R<0&&(P=Bl(C+z,a[1][0])),u&&B>0?W=zl(j+B,a[0][1]):!u&&B<0&&(W=Bl(j+D,a[1][1])),M=Math.max(M,P),V=Math.max(V,W)}if(s){if(f){const P=Sv(z/k,N,_)*k;if(M=Math.max(M,P),o){let W=0;!c&&!u||c&&!u&&p?W=zl(j+H+z/k,o[1][1])*k:W=Bl(j+H+(c?R:-R)/k,o[0][1])*k,M=Math.max(M,W)}if(a){let W=0;!c&&!u||c&&!u&&p?W=Bl(j+z/k,a[1][1])*k:W=zl(j+(c?R:-R)/k,a[0][1])*k,M=Math.max(M,W)}}if(h){const P=Sv(D*k,x,E)/k;if(V=Math.max(V,P),o){let W=0;!c&&!u||u&&!c&&p?W=zl(C+D*k+L,o[1][0])/k:W=Bl(C+(u?B:-B)*k+L,o[0][0])/k,V=Math.max(V,W)}if(a){let W=0;!c&&!u||u&&!c&&p?W=Bl(C+D*k,a[1][0])/k:W=zl(C+(u?B:-B)*k,a[0][0])/k,V=Math.max(V,W)}}}B=B+(B<0?V:-V),R=R+(R<0?M:-M),s&&(p?z>D*k?B=(K9(c,u)?-R:R)/k:R=(K9(c,u)?-B:B)*k:f?(B=R/k,u=c):(R=B*k,c=u));const T=c?C+R:C,I=u?j+B:j;return{width:A+(c?-R:R),height:$+(u?-B:B),x:i[0]*R*(c?-1:1)+T,y:i[1]*B*(u?-1:1)+I}}const VY={width:0,height:0,x:0,y:0},yIe={...VY,pointerX:0,pointerY:0,aspectRatio:1};function bIe(e){return[[0,0],[e.measured.width,e.measured.height]]}function vIe(e,t,n){const r=t.position.x+e.position.x,s=t.position.y+e.position.y,i=e.measured.width??0,o=e.measured.height??0,a=n[0]*i,c=n[1]*o;return[[r-a,s-c],[r+i-a,s+o-c]]}function xIe({domNode:e,nodeId:t,getStoreItems:n,onChange:r,onEnd:s}){const i=Cs(e);function o({controlPosition:c,boundaries:u,keepAspectRatio:f,onResizeStart:h,onResize:p,onResizeEnd:y,shouldResize:v}){let x={...VY},E={...yIe};const N=pIe(c);let _,C=null,j=[],A,$,k;const R=QG().on("start",B=>{const{nodeLookup:z,transform:D,snapGrid:L,snapToGrid:H,nodeOrigin:M,paneDomNode:V}=n();if(_=z.get(t),!_)return;C=(V==null?void 0:V.getBoundingClientRect())??null;const{xSnapped:T,ySnapped:I}=xg(B.sourceEvent,{transform:D,snapGrid:L,snapToGrid:H,containerBounds:C});x={width:_.measured.width??0,height:_.measured.height??0,x:_.position.x??0,y:_.position.y??0},E={...x,pointerX:T,pointerY:I,aspectRatio:x.width/x.height},A=void 0,_.parentId&&(_.extent==="parent"||_.expandParent)&&(A=z.get(_.parentId),$=A&&_.extent==="parent"?bIe(A):void 0),j=[],k=void 0;for(const[P,W]of z)if(W.parentId===t&&(j.push({id:P,position:{...W.position},extent:W.extent}),W.extent==="parent"||W.expandParent)){const F=vIe(W,_,W.origin??M);k?k=[[Math.min(F[0][0],k[0][0]),Math.min(F[0][1],k[0][1])],[Math.max(F[1][0],k[1][0]),Math.max(F[1][1],k[1][1])]]:k=F}h==null||h(B,{...x})}).on("drag",B=>{const{transform:z,snapGrid:D,snapToGrid:L,nodeOrigin:H}=n(),M=xg(B.sourceEvent,{transform:z,snapGrid:D,snapToGrid:L,containerBounds:C}),V=[];if(!_)return;const{x:T,y:I,width:P,height:W}=x,F={},q=_.origin??H,{width:X,height:Q,x:se,y:ae}=gIe(E,N,M,u,f,q,$,k),de=X!==P,ce=Q!==W,fe=se!==T&&de,ve=ae!==I&&ce;if(!fe&&!ve&&!de&&!ce)return;if((fe||ve||q[0]===1||q[1]===1)&&(F.x=fe?se:x.x,F.y=ve?ae:x.y,x.x=F.x,x.y=F.y,j.length>0)){const Re=se-T,ke=ae-I;for(const He of j)He.position={x:He.position.x-Re+q[0]*(X-P),y:He.position.y-ke+q[1]*(Q-W)},V.push(He)}if((de||ce)&&(F.width=de?X:x.width,F.height=ce?Q:x.height,x.width=F.width,x.height=F.height),A&&_.expandParent){const Re=q[0]*(F.width??0);F.x&&F.x<Re&&(x.x=Re,E.x=E.x-(F.x-Re));const ke=q[1]*(F.height??0);F.y&&F.y<ke&&(x.y=ke,E.y=E.y-(F.y-ke))}const Ae=mIe({width:x.width,prevWidth:P,height:x.height,prevHeight:W,affectsX:N.affectsX,affectsY:N.affectsY}),Ce={...x,direction:Ae};(v==null?void 0:v(B,Ce))!==!1&&(p==null||p(B,Ce),r(F,V))}).on("end",B=>{y==null||y(B,{...x}),s==null||s()});i.call(R)}function a(){i.on(".drag",null)}return{update:o,destroy:a}}const{useDebugValue:wIe}=je,{useSyncExternalStoreWithSelector:SIe}=WU,EIe=e=>e;function UY(e,t=EIe,n){const r=SIe(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return wIe(r),r}const Q9=(e,t)=>{const n=b$(e),r=(s,i=t)=>UY(n,s,i);return Object.assign(r,n),r},NIe=(e,t)=>e?Q9(e,t):Q9;function En(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,s]of e)if(!Object.is(s,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}const US=w.createContext(null),_Ie=US.Provider,qY=Io.error001();function kt(e,t){const n=w.useContext(US);if(n===null)throw new Error(qY);return UY(n,e,t)}function bn(){const e=w.useContext(US);if(e===null)throw new Error(qY);return w.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const Z9={display:"none"},CIe={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},HY="react-flow__node-desc",WY="react-flow__edge-desc",OIe="react-flow__aria-live",jIe=e=>e.ariaLiveMessage;function AIe({rfId:e}){const t=kt(jIe);return m.jsx("div",{id:`${OIe}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:CIe,children:t})}function TIe({rfId:e,disableKeyboardA11y:t}){return m.jsxs(m.Fragment,{children:[m.jsxs("div",{id:`${HY}-${e}`,style:Z9,children:["Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),m.jsx("div",{id:`${WY}-${e}`,style:Z9,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!t&&m.jsx(AIe,{rfId:e})]})}const $Ie=e=>e.userSelectionActive?"none":"all",Yh=w.forwardRef(({position:e="top-left",children:t,className:n,style:r,...s},i)=>{const o=kt($Ie),a=`${e}`.split("-");return m.jsx("div",{className:Hn(["react-flow__panel",n,...a]),style:{...r,pointerEvents:o},ref:i,...s,children:t})});Yh.displayName="Panel";function RIe({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:m.jsx(Yh,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:m.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const kIe=e=>{const t=[],n=[];for(const[,r]of e.nodeLookup)r.selected&&t.push(r.internals.userNode);for(const[,r]of e.edgeLookup)r.selected&&n.push(r);return{selectedNodes:t,selectedEdges:n}},Ev=e=>e.id;function MIe(e,t){return En(e.selectedNodes.map(Ev),t.selectedNodes.map(Ev))&&En(e.selectedEdges.map(Ev),t.selectedEdges.map(Ev))}function IIe({onSelectionChange:e}){const t=bn(),{selectedNodes:n,selectedEdges:r}=kt(kIe,MIe);return w.useEffect(()=>{const s={nodes:n,edges:r};e==null||e(s),t.getState().onSelectionChangeHandlers.forEach(i=>i(s))},[n,r,e]),null}const PIe=e=>!!e.onSelectionChangeHandlers;function DIe({onSelectionChange:e}){const t=kt(PIe);return e||t?m.jsx(IIe,{onSelectionChange:e}):null}const GY=[0,0],LIe={x:0,y:0,zoom:1},FIe=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance"],e8=[...FIe,"rfId"],BIe=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}),t8={translateExtent:fy,nodeOrigin:GY,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function zIe(e){const{setNodes:t,setEdges:n,setMinZoom:r,setMaxZoom:s,setTranslateExtent:i,setNodeExtent:o,reset:a,setDefaultNodesAndEdges:c,setPaneClickDistance:u}=kt(BIe,En),f=bn();w.useEffect(()=>(c(e.defaultNodes,e.defaultEdges),()=>{h.current=t8,a()}),[]);const h=w.useRef(t8);return w.useEffect(()=>{for(const p of e8){const y=e[p],v=h.current[p];y!==v&&(typeof e[p]>"u"||(p==="nodes"?t(y):p==="edges"?n(y):p==="minZoom"?r(y):p==="maxZoom"?s(y):p==="translateExtent"?i(y):p==="nodeExtent"?o(y):p==="paneClickDistance"?u(y):p==="fitView"?f.setState({fitViewOnInit:y}):p==="fitViewOptions"?f.setState({fitViewOnInitOptions:y}):f.setState({[p]:y})))}h.current=e},e8.map(p=>e[p])),null}function n8(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function VIe(e){var r;const[t,n]=w.useState(e==="system"?null:e);return w.useEffect(()=>{if(e!=="system"){n(e);return}const s=n8(),i=()=>n(s!=null&&s.matches?"dark":"light");return i(),s==null||s.addEventListener("change",i),()=>{s==null||s.removeEventListener("change",i)}},[e]),t!==null?t:(r=n8())!=null&&r.matches?"dark":"light"}const r8=typeof document<"u"?document:null;function gy(e=null,t={target:r8,actInsideInputWithModifier:!0}){const[n,r]=w.useState(!1),s=w.useRef(!1),i=w.useRef(new Set([])),[o,a]=w.useMemo(()=>{if(e!==null){const u=(Array.isArray(e)?e:[e]).filter(h=>typeof h=="string").map(h=>h.replace("+",`
`).replace(`

`,`
+`).split(`
`)),f=u.reduce((h,p)=>h.concat(...p),[]);return[u,f]}return[[],[]]},[e]);return w.useEffect(()=>{const c=(t==null?void 0:t.target)||r8;if(e!==null){const u=p=>{if(s.current=p.ctrlKey||p.metaKey||p.shiftKey,(!s.current||s.current&&!t.actInsideInputWithModifier)&&kj(p))return!1;const v=i8(p.code,a);i.current.add(p[v]),s8(o,i.current,!1)&&(p.preventDefault(),r(!0))},f=p=>{if((!s.current||s.current&&!t.actInsideInputWithModifier)&&kj(p))return!1;const v=i8(p.code,a);s8(o,i.current,!0)?(r(!1),i.current.clear()):i.current.delete(p[v]),p.key==="Meta"&&i.current.clear(),s.current=!1},h=()=>{i.current.clear(),r(!1)};return c==null||c.addEventListener("keydown",u),c==null||c.addEventListener("keyup",f),window.addEventListener("blur",h),window.addEventListener("contextmenu",h),()=>{c==null||c.removeEventListener("keydown",u),c==null||c.removeEventListener("keyup",f),window.removeEventListener("blur",h),window.removeEventListener("contextmenu",h)}}},[e,r]),n}function s8(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(s=>t.has(s)))}function i8(e,t){return t.includes(e)?"code":"key"}const UIe=()=>{const e=bn();return w.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:r}=e.getState();return r?r.scaleTo(t,{duration:n==null?void 0:n.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[r,s,i],panZoom:o}=e.getState();return o?(await o.setViewport({x:t.x??r,y:t.y??s,zoom:t.zoom??i},{duration:n==null?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},fitView:t=>{const{nodeLookup:n,minZoom:r,maxZoom:s,panZoom:i,domNode:o}=e.getState();if(!i||!o)return Promise.resolve(!1);const a=Tj(n,t),{width:c,height:u}=zS(o);return $j({nodes:a,width:c,height:u,minZoom:r,maxZoom:s,panZoom:i},t)},setCenter:async(t,n,r)=>{const{width:s,height:i,maxZoom:o,panZoom:a}=e.getState(),c=typeof(r==null?void 0:r.zoom)<"u"?r.zoom:o,u=s/2-t*c,f=i/2-n*c;return a?(await a.setViewport({x:u,y:f,zoom:c},{duration:r==null?void 0:r.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitBounds:async(t,n)=>{const{width:r,height:s,minZoom:i,maxZoom:o,panZoom:a}=e.getState(),c=B3(t,r,s,i,o,(n==null?void 0:n.padding)??.1);return a?(await a.setViewport(c,{duration:n==null?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={})=>{const{transform:r,snapGrid:s,snapToGrid:i,domNode:o}=e.getState();if(!o)return t;const{x:a,y:c}=o.getBoundingClientRect(),u={x:t.x-a,y:t.y-c},f=n.snapGrid??s,h=n.snapToGrid??i;return v0(u,r,h,f)},flowToScreenPosition:t=>{const{transform:n,domNode:r}=e.getState();if(!r)return t;const{x:s,y:i}=r.getBoundingClientRect(),o=EY(t,n);return{x:o.x+s,y:o.y+i}}}),[])};function YY(e,t){const n=[],r=new Map,s=[];for(const i of e)if(i.type==="add"){s.push(i);continue}else if(i.type==="remove"||i.type==="replace")r.set(i.id,[i]);else{const o=r.get(i.id);o?o.push(i):r.set(i.id,[i])}for(const i of t){const o=r.get(i.id);if(!o){n.push(i);continue}if(o[0].type==="remove")continue;if(o[0].type==="replace"){n.push({...o[0].item});continue}const a={...i};for(const c of o)qIe(c,a);n.push(a)}return s.length&&s.forEach(i=>{i.index!==void 0?n.splice(i.index,0,{...i.item}):n.push({...i.item})}),n}function qIe(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured??(t.measured={}),t.measured.width=e.dimensions.width,t.measured.height=e.dimensions.height,e.setAttributes&&(t.width=e.dimensions.width,t.height=e.dimensions.height)),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function JY(e,t){return YY(e,t)}function XY(e,t){return YY(e,t)}function wu(e,t){return{id:e,type:"select",selected:t}}function qf(e,t=new Set,n=!1){const r=[];for(const[s,i]of e){const o=t.has(s);!(i.selected===void 0&&!o)&&i.selected!==o&&(n&&(i.selected=o),r.push(wu(i.id,o)))}return r}function o8({items:e=[],lookup:t}){var s;const n=[],r=new Map(e.map(i=>[i.id,i]));for(const[i,o]of e.entries()){const a=t.get(o.id),c=((s=a==null?void 0:a.internals)==null?void 0:s.userNode)??a;c!==void 0&&c!==o&&n.push({id:o.id,item:o,type:"replace"}),c===void 0&&n.push({item:o,type:"add",index:i})}for(const[i]of t)r.get(i)===void 0&&n.push({id:i,type:"remove"});return n}function a8(e){return{id:e.id,type:"remove"}}const l8=e=>$6e(e),HIe=e=>yY(e);function KY(e){return w.forwardRef(e)}const WIe=typeof window<"u"?w.useLayoutEffect:w.useEffect;function c8(e){const[t,n]=w.useState(BigInt(0)),[r]=w.useState(()=>GIe(()=>n(s=>s+BigInt(1))));return WIe(()=>{const s=r.get();s.length&&(e(s),r.reset())},[t]),r}function GIe(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const QY=w.createContext(null);function YIe({children:e}){const t=bn(),n=w.useCallback(a=>{const{nodes:c=[],setNodes:u,hasDefaultNodes:f,onNodesChange:h,nodeLookup:p}=t.getState();let y=c;for(const v of a)y=typeof v=="function"?v(y):v;f?u(y):h&&h(o8({items:y,lookup:p}))},[]),r=c8(n),s=w.useCallback(a=>{const{edges:c=[],setEdges:u,hasDefaultEdges:f,onEdgesChange:h,edgeLookup:p}=t.getState();let y=c;for(const v of a)y=typeof v=="function"?v(y):v;f?u(y):h&&h(o8({items:y,lookup:p}))},[]),i=c8(s),o=w.useMemo(()=>({nodeQueue:r,edgeQueue:i}),[]);return m.jsx(QY.Provider,{value:o,children:e})}function JIe(){const e=w.useContext(QY);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const XIe=e=>!!e.panZoom;function _m(){const e=UIe(),t=bn(),n=JIe(),r=kt(XIe),s=w.useMemo(()=>{const i=h=>t.getState().nodeLookup.get(h),o=h=>{n.nodeQueue.push(h)},a=h=>{n.edgeQueue.push(h)},c=h=>{var N,_;const{nodeLookup:p,nodeOrigin:y}=t.getState(),v=l8(h)?h:p.get(h.id),x=v.parentId?_Y(v.position,v.measured,v.parentId,p,y):v.position,E={...v,position:x,width:((N=v.measured)==null?void 0:N.width)??v.width,height:((_=v.measured)==null?void 0:_.height)??v.height};return Wh(E)},u=(h,p,y={replace:!1})=>{o(v=>v.map(x=>{if(x.id===h){const E=typeof p=="function"?p(x):p;return y.replace&&l8(E)?E:{...x,...E}}return x}))},f=(h,p,y={replace:!1})=>{a(v=>v.map(x=>{if(x.id===h){const E=typeof p=="function"?p(x):p;return y.replace&&HIe(E)?E:{...x,...E}}return x}))};return{getNodes:()=>t.getState().nodes.map(h=>({...h})),getNode:h=>{var p;return(p=i(h))==null?void 0:p.internals.userNode},getInternalNode:i,getEdges:()=>{const{edges:h=[]}=t.getState();return h.map(p=>({...p}))},getEdge:h=>t.getState().edgeLookup.get(h),setNodes:o,setEdges:a,addNodes:h=>{const p=Array.isArray(h)?h:[h];n.nodeQueue.push(y=>[...y,...p])},addEdges:h=>{const p=Array.isArray(h)?h:[h];n.edgeQueue.push(y=>[...y,...p])},toObject:()=>{const{nodes:h=[],edges:p=[],transform:y}=t.getState(),[v,x,E]=y;return{nodes:h.map(N=>({...N})),edges:p.map(N=>({...N})),viewport:{x:v,y:x,zoom:E}}},deleteElements:async({nodes:h=[],edges:p=[]})=>{const{nodes:y,edges:v,onNodesDelete:x,onEdgesDelete:E,triggerNodeChanges:N,triggerEdgeChanges:_,onDelete:C,onBeforeDelete:j}=t.getState(),{nodes:A,edges:$}=await M6e({nodesToRemove:h,edgesToRemove:p,nodes:y,edges:v,onBeforeDelete:j}),k=$.length>0,R=A.length>0;if(k){const B=$.map(a8);E==null||E($),_(B)}if(R){const B=A.map(a8);x==null||x(A),N(B)}return(R||k)&&(C==null||C({nodes:A,edges:$})),{deletedNodes:A,deletedEdges:$}},getIntersectingNodes:(h,p=!0,y)=>{const v=B9(h),x=v?h:c(h),E=y!==void 0;return x?(y||t.getState().nodes).filter(N=>{const _=t.getState().nodeLookup.get(N.id);if(_&&!v&&(N.id===h.id||!_.internals.positionAbsolute))return!1;const C=Wh(E?N:_),j=my(C,x);return p&&j>0||j>=x.width*x.height}):[]},isNodeIntersecting:(h,p,y=!0)=>{const x=B9(h)?h:c(h);if(!x)return!1;const E=my(x,p);return y&&E>0||E>=x.width*x.height},updateNode:u,updateNodeData:(h,p,y={replace:!1})=>{u(h,v=>{const x=typeof p=="function"?p(v):p;return y.replace?{...v,data:x}:{...v,data:{...v.data,...x}}},y)},updateEdge:f,updateEdgeData:(h,p,y={replace:!1})=>{f(h,v=>{const x=typeof p=="function"?p(v):p;return y.replace?{...v,data:x}:{...v,data:{...v.data,...x}}},y)},getNodesBounds:h=>{const{nodeLookup:p,nodeOrigin:y}=t.getState();return R6e(h,{nodeLookup:p,nodeOrigin:y})},getHandleConnections:({type:h,id:p,nodeId:y})=>{var v;return Array.from(((v=t.getState().connectionLookup.get(`${y}-${h}${p?`-${p}`:""}`))==null?void 0:v.values())??[])},getNodeConnections:({type:h,handleId:p,nodeId:y})=>{var v;return Array.from(((v=t.getState().connectionLookup.get(`${y}${h?p?`-${h}-${p}`:`-${h}`:""}`))==null?void 0:v.values())??[])}}},[]);return w.useMemo(()=>({...s,...e,viewportInitialized:r}),[r])}const u8=e=>e.selected,KIe={actInsideInputWithModifier:!1},QIe=typeof window<"u"?window:void 0;function ZIe({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=bn(),{deleteElements:r}=_m(),s=gy(e,KIe),i=gy(t,{target:QIe});w.useEffect(()=>{if(s){const{edges:o,nodes:a}=n.getState();r({nodes:a.filter(u8),edges:o.filter(u8)}),n.setState({nodesSelectionActive:!1})}},[s]),w.useEffect(()=>{n.setState({multiSelectionActive:i})},[i])}function ePe(e){const t=bn();w.useEffect(()=>{const n=()=>{var s,i;if(!e.current)return!1;const r=zS(e.current);(r.height===0||r.width===0)&&((i=(s=t.getState()).onError)==null||i.call(s,"004",Io.error004())),t.setState({width:r.width||500,height:r.height||500})};if(e.current){n(),window.addEventListener("resize",n);const r=new ResizeObserver(()=>n());return r.observe(e.current),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}}},[])}const qS={position:"absolute",width:"100%",height:"100%",top:0,left:0},tPe=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib});function nPe({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:s=.5,panOnScrollMode:i=Yu.Free,zoomOnDoubleClick:o=!0,panOnDrag:a=!0,defaultViewport:c,translateExtent:u,minZoom:f,maxZoom:h,zoomActivationKeyCode:p,preventScrolling:y=!0,children:v,noWheelClassName:x,noPanClassName:E,onViewportChange:N,isControlledViewport:_,paneClickDistance:C}){const j=bn(),A=w.useRef(null),{userSelectionActive:$,lib:k}=kt(tPe,En),R=gy(p),B=w.useRef();ePe(A);const z=w.useCallback(D=>{N==null||N({x:D[0],y:D[1],zoom:D[2]}),_||j.setState({transform:D})},[N,_]);return w.useEffect(()=>{if(A.current){B.current=hIe({domNode:A.current,minZoom:f,maxZoom:h,translateExtent:u,viewport:c,paneClickDistance:C,onDraggingChange:M=>j.setState({paneDragging:M}),onPanZoomStart:(M,V)=>{const{onViewportChangeStart:T,onMoveStart:I}=j.getState();I==null||I(M,V),T==null||T(V)},onPanZoom:(M,V)=>{const{onViewportChange:T,onMove:I}=j.getState();I==null||I(M,V),T==null||T(V)},onPanZoomEnd:(M,V)=>{const{onViewportChangeEnd:T,onMoveEnd:I}=j.getState();I==null||I(M,V),T==null||T(V)}});const{x:D,y:L,zoom:H}=B.current.getViewport();return j.setState({panZoom:B.current,transform:[D,L,H],domNode:A.current.closest(".react-flow")}),()=>{var M;(M=B.current)==null||M.destroy()}}},[]),w.useEffect(()=>{var D;(D=B.current)==null||D.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:s,panOnScrollMode:i,zoomOnDoubleClick:o,panOnDrag:a,zoomActivationKeyPressed:R,preventScrolling:y,noPanClassName:E,userSelectionActive:$,noWheelClassName:x,lib:k,onTransformChange:z})},[e,t,n,r,s,i,o,a,R,y,E,$,x,k,z]),m.jsx("div",{className:"react-flow__renderer",ref:A,style:qS,children:v})}const rPe=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function sPe(){const{userSelectionActive:e,userSelectionRect:t}=kt(rPe,En);return e&&t?m.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const iC=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},iPe=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging});function oPe({isSelecting:e,selectionKeyPressed:t,selectionMode:n=hy.Full,panOnDrag:r,selectionOnDrag:s,onSelectionStart:i,onSelectionEnd:o,onPaneClick:a,onPaneContextMenu:c,onPaneScroll:u,onPaneMouseEnter:f,onPaneMouseMove:h,onPaneMouseLeave:p,children:y}){const v=bn(),{userSelectionActive:x,elementsSelectable:E,dragging:N}=kt(iPe,En),_=E&&(e||x),C=w.useRef(null),j=w.useRef(),A=w.useRef(new Set),$=w.useRef(new Set),k=w.useRef(!1),R=w.useRef(!1),B=T=>{if(k.current){k.current=!1;return}a==null||a(T),v.getState().resetSelectedElements(),v.setState({nodesSelectionActive:!1})},z=T=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){T.preventDefault();return}c==null||c(T)},D=u?T=>u(T):void 0,L=T=>{var q,X;const{resetSelectedElements:I,domNode:P}=v.getState();if(j.current=P==null?void 0:P.getBoundingClientRect(),!E||!e||T.button!==0||T.target!==C.current||!j.current)return;(X=(q=T.target)==null?void 0:q.setPointerCapture)==null||X.call(q,T.pointerId),R.current=!0,k.current=!1;const{x:W,y:F}=Ia(T.nativeEvent,j.current);I(),v.setState({userSelectionRect:{width:0,height:0,startX:W,startY:F,x:W,y:F}}),i==null||i(T)},H=T=>{const{userSelectionRect:I,transform:P,nodeLookup:W,edgeLookup:F,connectionLookup:q,triggerNodeChanges:X,triggerEdgeChanges:Q,defaultEdgeOptions:se}=v.getState();if(!j.current||!I)return;k.current=!0;const{x:ae,y:de}=Ia(T.nativeEvent,j.current),{startX:ce,startY:fe}=I,ve={startX:ce,startY:fe,x:ae<ce?ae:ce,y:de<fe?de:fe,width:Math.abs(ae-ce),height:Math.abs(de-fe)},Ae=A.current,Ce=$.current;A.current=new Set(bY(W,ve,P,n===hy.Partial,!0).map(Re=>Re.id)),$.current=new Set;const Ee=(se==null?void 0:se.selectable)??!0;for(const Re of A.current){const ke=q.get(Re);if(ke)for(const{edgeId:He}of ke.values()){const et=F.get(He);et&&(et.selectable??Ee)&&$.current.add(He)}}if(!z9(Ae,A.current)){const Re=qf(W,A.current,!0);X(Re)}if(!z9(Ce,$.current)){const Re=qf(F,$.current);Q(Re)}v.setState({userSelectionRect:ve,userSelectionActive:!0,nodesSelectionActive:!1})},M=T=>{var P,W;if(T.button!==0||!R.current)return;(W=(P=T.target)==null?void 0:P.releasePointerCapture)==null||W.call(P,T.pointerId);const{userSelectionRect:I}=v.getState();!x&&I&&T.target===C.current&&(B==null||B(T)),v.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:A.current.size>0}),o==null||o(T),(t||s)&&(k.current=!1),R.current=!1},V=r===!0||Array.isArray(r)&&r.includes(0);return m.jsxs("div",{className:Hn(["react-flow__pane",{draggable:V,dragging:N,selection:e}]),onClick:_?void 0:iC(B,C),onContextMenu:iC(z,C),onWheel:iC(D,C),onPointerEnter:_?void 0:f,onPointerDown:_?L:h,onPointerMove:_?H:h,onPointerUp:_?M:void 0,onPointerLeave:p,ref:C,style:qS,children:[y,m.jsx(sPe,{})]})}function Lj({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:s,unselectNodesAndEdges:i,multiSelectionActive:o,nodeLookup:a,onError:c}=t.getState(),u=a.get(e);if(!u){c==null||c("012",Io.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(n||u.selected&&o)&&(i({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var f;return(f=r==null?void 0:r.current)==null?void 0:f.blur()})):s([e])}function ZY({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:s,isSelectable:i,nodeClickDistance:o}){const a=bn(),[c,u]=w.useState(!1),f=w.useRef();return w.useEffect(()=>{f.current=Z6e({getStoreItems:()=>a.getState(),onNodeMouseDown:h=>{Lj({id:h,store:a,nodeRef:e})},onDragStart:()=>{u(!0)},onDragStop:()=>{u(!1)}})},[]),w.useEffect(()=>{var h,p;if(t)(h=f.current)==null||h.destroy();else if(e.current)return(p=f.current)==null||p.update({noDragClassName:n,handleSelector:r,domNode:e.current,isSelectable:i,nodeId:s,nodeClickDistance:o}),()=>{var y;(y=f.current)==null||y.destroy()}},[n,r,t,i,e,s]),c}const aPe=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function eJ(){const e=bn();return w.useCallback(n=>{const{nodeExtent:r,snapToGrid:s,snapGrid:i,nodesDraggable:o,onError:a,updateNodePositions:c,nodeLookup:u,nodeOrigin:f}=e.getState(),h=new Map,p=aPe(o),y=s?i[0]:5,v=s?i[1]:5,x=n.direction.x*y*n.factor,E=n.direction.y*v*n.factor;for(const[,N]of u){if(!p(N))continue;let _={x:N.internals.positionAbsolute.x+x,y:N.internals.positionAbsolute.y+E};s&&(_=BS(_,i));const{position:C,positionAbsolute:j}=vY({nodeId:N.id,nextPosition:_,nodeLookup:u,nodeExtent:r,nodeOrigin:f,onError:a});N.position=C,N.internals.positionAbsolute=j,h.set(N.id,N)}c(h)},[])}const H3=w.createContext(null),lPe=H3.Provider;H3.Consumer;const tJ=()=>w.useContext(H3),cPe=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),uPe=(e,t,n)=>r=>{const{connectionClickStartHandle:s,connectionMode:i,connection:o}=r,{fromHandle:a,toHandle:c,isValid:u}=o,f=(c==null?void 0:c.nodeId)===e&&(c==null?void 0:c.id)===t&&(c==null?void 0:c.type)===n;return{connectingFrom:(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.id)===t&&(a==null?void 0:a.type)===n,connectingTo:f,clickConnecting:(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.id)===t&&(s==null?void 0:s.type)===n,isPossibleEndHandle:i===qh.Strict?(a==null?void 0:a.type)!==n:e!==(a==null?void 0:a.nodeId)||t!==(a==null?void 0:a.id),connectionInProcess:!!a,clickConnectionInProcess:!!s,valid:f&&u}};function dPe({type:e="source",position:t=it.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:s=!0,isConnectableEnd:i=!0,id:o,onConnect:a,children:c,className:u,onMouseDown:f,onTouchStart:h,...p},y){var V,T;const v=o||null,x=e==="target",E=bn(),N=tJ(),{connectOnClick:_,noPanClassName:C,rfId:j}=kt(cPe,En),{connectingFrom:A,connectingTo:$,clickConnecting:k,isPossibleEndHandle:R,connectionInProcess:B,clickConnectionInProcess:z,valid:D}=kt(uPe(N,v,e),En);N||(T=(V=E.getState()).onError)==null||T.call(V,"010",Io.error010());const L=I=>{const{defaultEdgeOptions:P,onConnect:W,hasDefaultEdges:F}=E.getState(),q={...P,...I};if(F){const{edges:X,setEdges:Q}=E.getState();Q($Y(q,X))}W==null||W(q),a==null||a(q)},H=I=>{if(!N)return;const P=OY(I.nativeEvent);if(s&&(P&&I.button===0||!P)){const W=E.getState();Dj.onPointerDown(I.nativeEvent,{autoPanOnConnect:W.autoPanOnConnect,connectionMode:W.connectionMode,connectionRadius:W.connectionRadius,domNode:W.domNode,nodeLookup:W.nodeLookup,lib:W.lib,isTarget:x,handleId:v,nodeId:N,flowId:W.rfId,panBy:W.panBy,cancelConnection:W.cancelConnection,onConnectStart:W.onConnectStart,onConnectEnd:W.onConnectEnd,updateConnection:W.updateConnection,onConnect:L,isValidConnection:n||W.isValidConnection,getTransform:()=>E.getState().transform,getFromHandle:()=>E.getState().connection.fromHandle,autoPanSpeed:W.autoPanSpeed})}P?f==null||f(I):h==null||h(I)},M=I=>{const{onClickConnectStart:P,onClickConnectEnd:W,connectionClickStartHandle:F,connectionMode:q,isValidConnection:X,lib:Q,rfId:se,nodeLookup:ae,connection:de}=E.getState();if(!N||!F&&!s)return;if(!F){P==null||P(I.nativeEvent,{nodeId:N,handleId:v,handleType:e}),E.setState({connectionClickStartHandle:{nodeId:N,type:e,id:v}});return}const ce=CY(I.target),fe=n||X,{connection:ve,isValid:Ae}=Dj.isValid(I.nativeEvent,{handle:{nodeId:N,id:v,type:e},connectionMode:q,fromNodeId:F.nodeId,fromHandleId:F.id||null,fromType:F.type,isValidConnection:fe,flowId:se,doc:ce,lib:Q,nodeLookup:ae});Ae&&ve&&L(ve);const Ce=structuredClone(de);delete Ce.inProgress,Ce.toPosition=Ce.toHandle?Ce.toHandle.position:null,W==null||W(I,Ce),E.setState({connectionClickStartHandle:null})};return m.jsx("div",{"data-handleid":v,"data-nodeid":N,"data-handlepos":t,"data-id":`${j}-${N}-${v}-${e}`,className:Hn(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",C,u,{source:!x,target:x,connectable:r,connectablestart:s,connectableend:i,clickconnecting:k,connectingfrom:A,connectingto:$,valid:D,connectionindicator:r&&(!B||R)&&(B||z?i:s)}]),onMouseDown:H,onTouchStart:H,onClick:_?M:void 0,ref:y,...p,children:c})}const yy=w.memo(KY(dPe));function fPe({data:e,isConnectable:t,sourcePosition:n=it.Bottom}){return m.jsxs(m.Fragment,{children:[e==null?void 0:e.label,m.jsx(yy,{type:"source",position:n,isConnectable:t})]})}function hPe({data:e,isConnectable:t,targetPosition:n=it.Top,sourcePosition:r=it.Bottom}){return m.jsxs(m.Fragment,{children:[m.jsx(yy,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,m.jsx(yy,{type:"source",position:r,isConnectable:t})]})}function mPe(){return null}function pPe({data:e,isConnectable:t,targetPosition:n=it.Top}){return m.jsxs(m.Fragment,{children:[m.jsx(yy,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label]})}const _w={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},d8={input:fPe,default:hPe,output:pPe,group:mPe};function gPe(e){var t,n,r,s;return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??((t=e.style)==null?void 0:t.width),height:e.height??e.initialHeight??((n=e.style)==null?void 0:n.height)}:{width:e.width??((r=e.style)==null?void 0:r.width),height:e.height??((s=e.style)==null?void 0:s.height)}}const yPe=e=>{const{width:t,height:n,x:r,y:s}=b0(e.nodeLookup,{filter:i=>!!i.selected});return{width:Hi(t)?t:null,height:Hi(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${r}px,${s}px)`}};function bPe({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=bn(),{width:s,height:i,transformString:o,userSelectionActive:a}=kt(yPe,En),c=eJ(),u=w.useRef(null);if(w.useEffect(()=>{var p;n||(p=u.current)==null||p.focus({preventScroll:!0})},[n]),ZY({nodeRef:u}),a||!s||!i)return null;const f=e?p=>{const y=r.getState().nodes.filter(v=>v.selected);e(p,y)}:void 0,h=p=>{Object.prototype.hasOwnProperty.call(_w,p.key)&&(p.preventDefault(),c({direction:_w[p.key],factor:p.shiftKey?4:1}))};return m.jsx("div",{className:Hn(["react-flow__nodesselection","react-flow__container",t]),style:{transform:o},children:m.jsx("div",{ref:u,className:"react-flow__nodesselection-rect",onContextMenu:f,tabIndex:n?void 0:-1,onKeyDown:n?void 0:h,style:{width:s,height:i}})})}const f8=typeof window<"u"?window:void 0,vPe=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function nJ({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:i,onPaneScroll:o,paneClickDistance:a,deleteKeyCode:c,selectionKeyCode:u,selectionOnDrag:f,selectionMode:h,onSelectionStart:p,onSelectionEnd:y,multiSelectionKeyCode:v,panActivationKeyCode:x,zoomActivationKeyCode:E,elementsSelectable:N,zoomOnScroll:_,zoomOnPinch:C,panOnScroll:j,panOnScrollSpeed:A,panOnScrollMode:$,zoomOnDoubleClick:k,panOnDrag:R,defaultViewport:B,translateExtent:z,minZoom:D,maxZoom:L,preventScrolling:H,onSelectionContextMenu:M,noWheelClassName:V,noPanClassName:T,disableKeyboardA11y:I,onViewportChange:P,isControlledViewport:W}){const{nodesSelectionActive:F,userSelectionActive:q}=kt(vPe),X=gy(u,{target:f8}),Q=gy(x,{target:f8}),se=Q||R,ae=Q||j,de=f&&se!==!0,ce=X||q||de;return ZIe({deleteKeyCode:c,multiSelectionKeyCode:v}),m.jsx(nPe,{onPaneContextMenu:i,elementsSelectable:N,zoomOnScroll:_,zoomOnPinch:C,panOnScroll:ae,panOnScrollSpeed:A,panOnScrollMode:$,zoomOnDoubleClick:k,panOnDrag:!X&&se,defaultViewport:B,translateExtent:z,minZoom:D,maxZoom:L,zoomActivationKeyCode:E,preventScrolling:H,noWheelClassName:V,noPanClassName:T,onViewportChange:P,isControlledViewport:W,paneClickDistance:a,children:m.jsxs(oPe,{onSelectionStart:p,onSelectionEnd:y,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:i,onPaneScroll:o,panOnDrag:se,isSelecting:!!ce,selectionMode:h,selectionKeyPressed:X,selectionOnDrag:de,children:[e,F&&m.jsx(bPe,{onSelectionContextMenu:M,noPanClassName:T,disableKeyboardA11y:I})]})})}nJ.displayName="FlowRenderer";const xPe=w.memo(nJ),wPe=e=>t=>e?bY(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function SPe(e){return kt(w.useCallback(wPe(e),[e]),En)}const EPe=e=>e.updateNodeInternals;function NPe(){const e=kt(EPe),[t]=w.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const r=new Map;n.forEach(s=>{const i=s.target.getAttribute("data-id");r.set(i,{id:i,nodeElement:s.target,force:!0})}),e(r)}));return w.useEffect(()=>()=>{t==null||t.disconnect()},[t]),t}function _Pe({node:e,nodeType:t,hasDimensions:n,resizeObserver:r}){const s=bn(),i=w.useRef(null),o=w.useRef(null),a=w.useRef(e.sourcePosition),c=w.useRef(e.targetPosition),u=w.useRef(t),f=n&&!!e.internals.handleBounds;return w.useEffect(()=>{i.current&&!e.hidden&&(!f||o.current!==i.current)&&(o.current&&(r==null||r.unobserve(o.current)),r==null||r.observe(i.current),o.current=i.current)},[f,e.hidden]),w.useEffect(()=>()=>{o.current&&(r==null||r.unobserve(o.current),o.current=null)},[]),w.useEffect(()=>{if(i.current){const h=u.current!==t,p=a.current!==e.sourcePosition,y=c.current!==e.targetPosition;(h||p||y)&&(u.current=t,a.current=e.sourcePosition,c.current=e.targetPosition,s.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:i.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),i}function CPe({id:e,onClick:t,onMouseEnter:n,onMouseMove:r,onMouseLeave:s,onContextMenu:i,onDoubleClick:o,nodesDraggable:a,elementsSelectable:c,nodesConnectable:u,nodesFocusable:f,resizeObserver:h,noDragClassName:p,noPanClassName:y,disableKeyboardA11y:v,rfId:x,nodeTypes:E,nodeClickDistance:N,onError:_}){const{node:C,internals:j,isParent:A}=kt(ce=>{const fe=ce.nodeLookup.get(e),ve=ce.parentLookup.has(e);return{node:fe,internals:fe.internals,isParent:ve}},En);let $=C.type||"default",k=(E==null?void 0:E[$])||d8[$];k===void 0&&(_==null||_("003",Io.error003($)),$="default",k=d8.default);const R=!!(C.draggable||a&&typeof C.draggable>"u"),B=!!(C.selectable||c&&typeof C.selectable>"u"),z=!!(C.connectable||u&&typeof C.connectable>"u"),D=!!(C.focusable||f&&typeof C.focusable>"u"),L=bn(),H=NY(C),M=_Pe({node:C,nodeType:$,hasDimensions:H,resizeObserver:h}),V=ZY({nodeRef:M,disabled:C.hidden||!R,noDragClassName:p,handleSelector:C.dragHandle,nodeId:e,isSelectable:B,nodeClickDistance:N}),T=eJ();if(C.hidden)return null;const I=ol(C),P=gPe(C),W=B||R||t||n||r||s,F=n?ce=>n(ce,{...j.userNode}):void 0,q=r?ce=>r(ce,{...j.userNode}):void 0,X=s?ce=>s(ce,{...j.userNode}):void 0,Q=i?ce=>i(ce,{...j.userNode}):void 0,se=o?ce=>o(ce,{...j.userNode}):void 0,ae=ce=>{const{selectNodesOnDrag:fe,nodeDragThreshold:ve}=L.getState();B&&(!fe||!R||ve>0)&&Lj({id:e,store:L,nodeRef:M}),t&&t(ce,{...j.userNode})},de=ce=>{if(!(kj(ce.nativeEvent)||v))if(mY.includes(ce.key)&&B){const fe=ce.key==="Escape";Lj({id:e,store:L,unselect:fe,nodeRef:M})}else R&&C.selected&&Object.prototype.hasOwnProperty.call(_w,ce.key)&&(ce.preventDefault(),L.setState({ariaLiveMessage:`Moved selected node ${ce.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~j.positionAbsolute.x}, y: ${~~j.positionAbsolute.y}`}),T({direction:_w[ce.key],factor:ce.shiftKey?4:1}))};return m.jsx("div",{className:Hn(["react-flow__node",`react-flow__node-${$}`,{[y]:R},C.className,{selected:C.selected,selectable:B,parent:A,draggable:R,dragging:V}]),ref:M,style:{zIndex:j.z,transform:`translate(${j.positionAbsolute.x}px,${j.positionAbsolute.y}px)`,pointerEvents:W?"all":"none",visibility:H?"visible":"hidden",...C.style,...P},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:F,onMouseMove:q,onMouseLeave:X,onContextMenu:Q,onClick:ae,onDoubleClick:se,onKeyDown:D?de:void 0,tabIndex:D?0:void 0,role:D?"button":void 0,"aria-describedby":v?void 0:`${HY}-${x}`,"aria-label":C.ariaLabel,children:m.jsx(lPe,{value:e,children:m.jsx(k,{id:e,data:C.data,type:$,positionAbsoluteX:j.positionAbsolute.x,positionAbsoluteY:j.positionAbsolute.y,selected:C.selected??!1,selectable:B,draggable:R,deletable:C.deletable??!0,isConnectable:z,sourcePosition:C.sourcePosition,targetPosition:C.targetPosition,dragging:V,dragHandle:C.dragHandle,zIndex:j.z,parentId:C.parentId,...I})})})}const OPe=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function rJ(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:s,onError:i}=kt(OPe,En),o=SPe(e.onlyRenderVisibleElements),a=NPe();return m.jsx("div",{className:"react-flow__nodes",style:qS,children:o.map(c=>m.jsx(CPe,{id:c,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:a,nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:s,nodeClickDistance:e.nodeClickDistance,onError:i},c))})}rJ.displayName="NodeRenderer";const jPe=w.memo(rJ);function APe(e){return kt(w.useCallback(n=>{if(!e)return n.edges.map(s=>s.id);const r=[];if(n.width&&n.height)for(const s of n.edges){const i=n.nodeLookup.get(s.source),o=n.nodeLookup.get(s.target);i&&o&&L6e({sourceNode:i,targetNode:o,width:n.width,height:n.height,transform:n.transform})&&r.push(s.id)}return r},[e]),En)}const TPe=({color:e="none",strokeWidth:t=1})=>m.jsx("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),$Pe=({color:e="none",strokeWidth:t=1})=>m.jsx("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),h8={[ud.Arrow]:TPe,[ud.ArrowClosed]:$Pe};function RPe(e){const t=bn();return w.useMemo(()=>{var s,i;return Object.prototype.hasOwnProperty.call(h8,e)?h8[e]:((i=(s=t.getState()).onError)==null||i.call(s,"009",Io.error009(e)),null)},[e])}const kPe=({id:e,type:t,color:n,width:r=12.5,height:s=12.5,markerUnits:i="strokeWidth",strokeWidth:o,orient:a="auto-start-reverse"})=>{const c=RPe(t);return c?m.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:i,orient:a,refX:"0",refY:"0",children:m.jsx(c,{color:n,strokeWidth:o})}):null},sJ=({defaultColor:e,rfId:t})=>{const n=kt(i=>i.edges),r=kt(i=>i.defaultEdgeOptions),s=w.useMemo(()=>H6e(n,{id:t,defaultColor:e,defaultMarkerStart:r==null?void 0:r.markerStart,defaultMarkerEnd:r==null?void 0:r.markerEnd}),[n,r,t,e]);return s.length?m.jsx("svg",{className:"react-flow__marker",children:m.jsx("defs",{children:s.map(i=>m.jsx(kPe,{id:i.id,type:i.type,color:i.color,width:i.width,height:i.height,markerUnits:i.markerUnits,strokeWidth:i.strokeWidth,orient:i.orient},i.id))})}):null};sJ.displayName="MarkerDefinitions";var MPe=w.memo(sJ);function iJ({x:e,y:t,label:n,labelStyle:r={},labelShowBg:s=!0,labelBgStyle:i={},labelBgPadding:o=[2,4],labelBgBorderRadius:a=2,children:c,className:u,...f}){const[h,p]=w.useState({x:1,y:0,width:0,height:0}),y=Hn(["react-flow__edge-textwrapper",u]),v=w.useRef(null);return w.useEffect(()=>{if(v.current){const x=v.current.getBBox();p({x:x.x,y:x.y,width:x.width,height:x.height})}},[n]),typeof n>"u"||!n?null:m.jsxs("g",{transform:`translate(${e-h.width/2} ${t-h.height/2})`,className:y,visibility:h.width?"visible":"hidden",...f,children:[s&&m.jsx("rect",{width:h.width+2*o[0],x:-o[0],y:-o[1],height:h.height+2*o[1],className:"react-flow__edge-textbg",style:i,rx:a,ry:a}),m.jsx("text",{className:"react-flow__edge-text",y:h.height/2,dy:"0.3em",ref:v,style:r,children:n}),c]})}iJ.displayName="EdgeText";const IPe=w.memo(iJ);function HS({path:e,labelX:t,labelY:n,label:r,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:a,labelBgBorderRadius:c,interactionWidth:u=20,...f}){return m.jsxs(m.Fragment,{children:[m.jsx("path",{...f,d:e,fill:"none",className:Hn(["react-flow__edge-path",f.className])}),u&&m.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:u,className:"react-flow__edge-interaction"}),r&&Hi(t)&&Hi(n)?m.jsx(IPe,{x:t,y:n,label:r,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:a,labelBgBorderRadius:c}):null]})}function m8({pos:e,x1:t,y1:n,x2:r,y2:s}){return e===it.Left||e===it.Right?[.5*(t+r),n]:[t,.5*(n+s)]}function oJ({sourceX:e,sourceY:t,sourcePosition:n=it.Bottom,targetX:r,targetY:s,targetPosition:i=it.Top}){const[o,a]=m8({pos:n,x1:e,y1:t,x2:r,y2:s}),[c,u]=m8({pos:i,x1:r,y1:s,x2:e,y2:t}),[f,h,p,y]=jY({sourceX:e,sourceY:t,targetX:r,targetY:s,sourceControlX:o,sourceControlY:a,targetControlX:c,targetControlY:u});return[`M${e},${t} C${o},${a} ${c},${u} ${r},${s}`,f,h,p,y]}function aJ(e){return w.memo(({id:t,sourceX:n,sourceY:r,targetX:s,targetY:i,sourcePosition:o=it.Bottom,targetPosition:a=it.Top,label:c,labelStyle:u,labelShowBg:f,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:y,style:v,markerEnd:x,markerStart:E,interactionWidth:N})=>{const[_,C,j]=oJ({sourceX:n,sourceY:r,sourcePosition:o,targetX:s,targetY:i,targetPosition:a}),A=e.isInternal?void 0:t;return m.jsx(HS,{id:A,path:_,labelX:C,labelY:j,label:c,labelStyle:u,labelShowBg:f,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:y,style:v,markerEnd:x,markerStart:E,interactionWidth:N})})}const PPe=aJ({isInternal:!1}),lJ=aJ({isInternal:!0});PPe.displayName="SimpleBezierEdge";lJ.displayName="SimpleBezierEdgeInternal";function cJ(e){return w.memo(({id:t,sourceX:n,sourceY:r,targetX:s,targetY:i,label:o,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:f,labelBgBorderRadius:h,style:p,sourcePosition:y=it.Bottom,targetPosition:v=it.Top,markerEnd:x,markerStart:E,pathOptions:N,interactionWidth:_})=>{const[C,j,A]=Mj({sourceX:n,sourceY:r,sourcePosition:y,targetX:s,targetY:i,targetPosition:v,borderRadius:N==null?void 0:N.borderRadius,offset:N==null?void 0:N.offset}),$=e.isInternal?void 0:t;return m.jsx(HS,{id:$,path:C,labelX:j,labelY:A,label:o,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:f,labelBgBorderRadius:h,style:p,markerEnd:x,markerStart:E,interactionWidth:_})})}const uJ=cJ({isInternal:!1}),dJ=cJ({isInternal:!0});uJ.displayName="SmoothStepEdge";dJ.displayName="SmoothStepEdgeInternal";function fJ(e){return w.memo(({id:t,...n})=>{var s;const r=e.isInternal?void 0:t;return m.jsx(uJ,{...n,id:r,pathOptions:w.useMemo(()=>{var i;return{borderRadius:0,offset:(i=n.pathOptions)==null?void 0:i.offset}},[(s=n.pathOptions)==null?void 0:s.offset])})})}const DPe=fJ({isInternal:!1}),hJ=fJ({isInternal:!0});DPe.displayName="StepEdge";hJ.displayName="StepEdgeInternal";function mJ(e){return w.memo(({id:t,sourceX:n,sourceY:r,targetX:s,targetY:i,label:o,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:f,labelBgBorderRadius:h,style:p,markerEnd:y,markerStart:v,interactionWidth:x})=>{const[E,N,_]=RY({sourceX:n,sourceY:r,targetX:s,targetY:i}),C=e.isInternal?void 0:t;return m.jsx(HS,{id:C,path:E,labelX:N,labelY:_,label:o,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:f,labelBgBorderRadius:h,style:p,markerEnd:y,markerStart:v,interactionWidth:x})})}const LPe=mJ({isInternal:!1}),pJ=mJ({isInternal:!0});LPe.displayName="StraightEdge";pJ.displayName="StraightEdgeInternal";function gJ(e){return w.memo(({id:t,sourceX:n,sourceY:r,targetX:s,targetY:i,sourcePosition:o=it.Bottom,targetPosition:a=it.Top,label:c,labelStyle:u,labelShowBg:f,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:y,style:v,markerEnd:x,markerStart:E,pathOptions:N,interactionWidth:_})=>{const[C,j,A]=AY({sourceX:n,sourceY:r,sourcePosition:o,targetX:s,targetY:i,targetPosition:a,curvature:N==null?void 0:N.curvature}),$=e.isInternal?void 0:t;return m.jsx(HS,{id:$,path:C,labelX:j,labelY:A,label:c,labelStyle:u,labelShowBg:f,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:y,style:v,markerEnd:x,markerStart:E,interactionWidth:_})})}const FPe=gJ({isInternal:!1}),yJ=gJ({isInternal:!0});FPe.displayName="BezierEdge";yJ.displayName="BezierEdgeInternal";const p8={default:yJ,straight:pJ,step:hJ,smoothstep:dJ,simplebezier:lJ},g8={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},BPe=(e,t,n)=>n===it.Left?e-t:n===it.Right?e+t:e,zPe=(e,t,n)=>n===it.Top?e-t:n===it.Bottom?e+t:e,y8="react-flow__edgeupdater";function b8({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:s,onMouseEnter:i,onMouseOut:o,type:a}){return m.jsx("circle",{onMouseDown:s,onMouseEnter:i,onMouseOut:o,className:Hn([y8,`${y8}-${a}`]),cx:BPe(t,r,e),cy:zPe(n,r,e),r,stroke:"transparent",fill:"transparent"})}function VPe({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:r,sourceY:s,targetX:i,targetY:o,sourcePosition:a,targetPosition:c,onReconnect:u,onReconnectStart:f,onReconnectEnd:h,setReconnecting:p,setUpdateHover:y}){const v=bn(),x=(j,A)=>{if(j.button!==0)return;const{autoPanOnConnect:$,domNode:k,isValidConnection:R,connectionMode:B,connectionRadius:z,lib:D,onConnectStart:L,onConnectEnd:H,cancelConnection:M,nodeLookup:V,rfId:T,panBy:I,updateConnection:P}=v.getState(),W=A.type==="target";p(!0),f==null||f(j,n,A.type);const F=(X,Q)=>{p(!1),h==null||h(X,n,A.type,Q)},q=X=>u==null?void 0:u(n,X);Dj.onPointerDown(j.nativeEvent,{autoPanOnConnect:$,connectionMode:B,connectionRadius:z,domNode:k,handleId:A.id,nodeId:A.nodeId,nodeLookup:V,isTarget:W,edgeUpdaterType:A.type,lib:D,flowId:T,cancelConnection:M,panBy:I,isValidConnection:R,onConnect:q,onConnectStart:L,onConnectEnd:H,onReconnectEnd:F,updateConnection:P,getTransform:()=>v.getState().transform,getFromHandle:()=>v.getState().connection.fromHandle})},E=j=>x(j,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),N=j=>x(j,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),_=()=>y(!0),C=()=>y(!1);return m.jsxs(m.Fragment,{children:[(e===!0||e==="source")&&m.jsx(b8,{position:a,centerX:r,centerY:s,radius:t,onMouseDown:E,onMouseEnter:_,onMouseOut:C,type:"source"}),(e===!0||e==="target")&&m.jsx(b8,{position:c,centerX:i,centerY:o,radius:t,onMouseDown:N,onMouseEnter:_,onMouseOut:C,type:"target"})]})}function UPe({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:r,onClick:s,onDoubleClick:i,onContextMenu:o,onMouseEnter:a,onMouseMove:c,onMouseLeave:u,reconnectRadius:f,onReconnect:h,onReconnectStart:p,onReconnectEnd:y,rfId:v,edgeTypes:x,noPanClassName:E,onError:N,disableKeyboardA11y:_}){let C=kt(Ee=>Ee.edgeLookup.get(e));const j=kt(Ee=>Ee.defaultEdgeOptions);C=j?{...j,...C}:C;let A=C.type||"default",$=(x==null?void 0:x[A])||p8[A];$===void 0&&(N==null||N("011",Io.error011(A)),A="default",$=p8.default);const k=!!(C.focusable||t&&typeof C.focusable>"u"),R=typeof h<"u"&&(C.reconnectable||n&&typeof C.reconnectable>"u"),B=!!(C.selectable||r&&typeof C.selectable>"u"),z=w.useRef(null),[D,L]=w.useState(!1),[H,M]=w.useState(!1),V=bn(),{zIndex:T,sourceX:I,sourceY:P,targetX:W,targetY:F,sourcePosition:q,targetPosition:X}=kt(w.useCallback(Ee=>{const Re=Ee.nodeLookup.get(C.source),ke=Ee.nodeLookup.get(C.target);if(!Re||!ke)return{zIndex:C.zIndex,...g8};const He=q6e({id:e,sourceNode:Re,targetNode:ke,sourceHandle:C.sourceHandle||null,targetHandle:C.targetHandle||null,connectionMode:Ee.connectionMode,onError:N});return{zIndex:D6e({selected:C.selected,zIndex:C.zIndex,sourceNode:Re,targetNode:ke,elevateOnSelect:Ee.elevateEdgesOnSelect}),...He||g8}},[C.source,C.target,C.sourceHandle,C.targetHandle,C.selected,C.zIndex]),En),Q=w.useMemo(()=>C.markerStart?`url('#${Ij(C.markerStart,v)}')`:void 0,[C.markerStart,v]),se=w.useMemo(()=>C.markerEnd?`url('#${Ij(C.markerEnd,v)}')`:void 0,[C.markerEnd,v]);if(C.hidden||I===null||P===null||W===null||F===null)return null;const ae=Ee=>{var et;const{addSelectedEdges:Re,unselectNodesAndEdges:ke,multiSelectionActive:He}=V.getState();B&&(V.setState({nodesSelectionActive:!1}),C.selected&&He?(ke({nodes:[],edges:[C]}),(et=z.current)==null||et.blur()):Re([e])),s&&s(Ee,C)},de=i?Ee=>{i(Ee,{...C})}:void 0,ce=o?Ee=>{o(Ee,{...C})}:void 0,fe=a?Ee=>{a(Ee,{...C})}:void 0,ve=c?Ee=>{c(Ee,{...C})}:void 0,Ae=u?Ee=>{u(Ee,{...C})}:void 0,Ce=Ee=>{var Re;if(!_&&mY.includes(Ee.key)&&B){const{unselectNodesAndEdges:ke,addSelectedEdges:He}=V.getState();Ee.key==="Escape"?((Re=z.current)==null||Re.blur(),ke({edges:[C]})):He([e])}};return m.jsx("svg",{style:{zIndex:T},children:m.jsxs("g",{className:Hn(["react-flow__edge",`react-flow__edge-${A}`,C.className,E,{selected:C.selected,animated:C.animated,inactive:!B&&!s,updating:D,selectable:B}]),onClick:ae,onDoubleClick:de,onContextMenu:ce,onMouseEnter:fe,onMouseMove:ve,onMouseLeave:Ae,onKeyDown:k?Ce:void 0,tabIndex:k?0:void 0,role:k?"button":"img","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":C.ariaLabel===null?void 0:C.ariaLabel||`Edge from ${C.source} to ${C.target}`,"aria-describedby":k?`${WY}-${v}`:void 0,ref:z,children:[!H&&m.jsx($,{id:e,source:C.source,target:C.target,type:C.type,selected:C.selected,animated:C.animated,selectable:B,deletable:C.deletable??!0,label:C.label,labelStyle:C.labelStyle,labelShowBg:C.labelShowBg,labelBgStyle:C.labelBgStyle,labelBgPadding:C.labelBgPadding,labelBgBorderRadius:C.labelBgBorderRadius,sourceX:I,sourceY:P,targetX:W,targetY:F,sourcePosition:q,targetPosition:X,data:C.data,style:C.style,sourceHandleId:C.sourceHandle,targetHandleId:C.targetHandle,markerStart:Q,markerEnd:se,pathOptions:"pathOptions"in C?C.pathOptions:void 0,interactionWidth:C.interactionWidth}),R&&m.jsx(VPe,{edge:C,isReconnectable:R,reconnectRadius:f,onReconnect:h,onReconnectStart:p,onReconnectEnd:y,sourceX:I,sourceY:P,targetX:W,targetY:F,sourcePosition:q,targetPosition:X,setUpdateHover:L,setReconnecting:M})]})})}const qPe=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function bJ({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:r,noPanClassName:s,onReconnect:i,onEdgeContextMenu:o,onEdgeMouseEnter:a,onEdgeMouseMove:c,onEdgeMouseLeave:u,onEdgeClick:f,reconnectRadius:h,onEdgeDoubleClick:p,onReconnectStart:y,onReconnectEnd:v,disableKeyboardA11y:x}){const{edgesFocusable:E,edgesReconnectable:N,elementsSelectable:_,onError:C}=kt(qPe,En),j=APe(t);return m.jsxs("div",{className:"react-flow__edges",children:[m.jsx(MPe,{defaultColor:e,rfId:n}),j.map(A=>m.jsx(UPe,{id:A,edgesFocusable:E,edgesReconnectable:N,elementsSelectable:_,noPanClassName:s,onReconnect:i,onContextMenu:o,onMouseEnter:a,onMouseMove:c,onMouseLeave:u,onClick:f,reconnectRadius:h,onDoubleClick:p,onReconnectStart:y,onReconnectEnd:v,rfId:n,onError:C,edgeTypes:r,disableKeyboardA11y:x},A))]})}bJ.displayName="EdgeRenderer";const HPe=w.memo(bJ),WPe=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function GPe({children:e}){const t=kt(WPe);return m.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function YPe(e){const t=_m(),n=w.useRef(!1);w.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const JPe=e=>{var t;return(t=e.panZoom)==null?void 0:t.syncViewport};function XPe(e){const t=kt(JPe),n=bn();return w.useEffect(()=>{e&&(t==null||t(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function KPe(e){return e.connection.inProgress?{...e.connection,to:v0(e.connection.to,e.transform)}:{...e.connection}}function QPe(e){return KPe}function ZPe(e){const t=QPe();return kt(t,En)}const eDe=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function tDe({containerStyle:e,style:t,type:n,component:r}){const{nodesConnectable:s,width:i,height:o,isValid:a,inProgress:c}=kt(eDe,En);return!(i&&s&&c)?null:m.jsx("svg",{style:e,width:i,height:o,className:"react-flow__connectionline react-flow__container",children:m.jsx("g",{className:Hn(["react-flow__connection",gY(a)]),children:m.jsx(vJ,{style:t,type:n,CustomComponent:r,isValid:a})})})}const vJ=({style:e,type:t=Zl.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:s,from:i,fromNode:o,fromHandle:a,fromPosition:c,to:u,toNode:f,toHandle:h,toPosition:p}=ZPe();if(!s)return;if(n)return m.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:o,fromHandle:a,fromX:i.x,fromY:i.y,toX:u.x,toY:u.y,fromPosition:c,toPosition:p,connectionStatus:gY(r),toNode:f,toHandle:h});let y="";const v={sourceX:i.x,sourceY:i.y,sourcePosition:c,targetX:u.x,targetY:u.y,targetPosition:p};switch(t){case Zl.Bezier:[y]=AY(v);break;case Zl.SimpleBezier:[y]=oJ(v);break;case Zl.Step:[y]=Mj({...v,borderRadius:0});break;case Zl.SmoothStep:[y]=Mj(v);break;default:[y]=RY(v)}return m.jsx("path",{d:y,fill:"none",className:"react-flow__connection-path",style:e})};vJ.displayName="ConnectionLine";const nDe={};function v8(e=nDe){w.useRef(e),bn(),w.useEffect(()=>{},[e])}function rDe(){bn(),w.useRef(!1),w.useEffect(()=>{},[])}function xJ({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:r,onEdgeClick:s,onNodeDoubleClick:i,onEdgeDoubleClick:o,onNodeMouseEnter:a,onNodeMouseMove:c,onNodeMouseLeave:u,onNodeContextMenu:f,onSelectionContextMenu:h,onSelectionStart:p,onSelectionEnd:y,connectionLineType:v,connectionLineStyle:x,connectionLineComponent:E,connectionLineContainerStyle:N,selectionKeyCode:_,selectionOnDrag:C,selectionMode:j,multiSelectionKeyCode:A,panActivationKeyCode:$,zoomActivationKeyCode:k,deleteKeyCode:R,onlyRenderVisibleElements:B,elementsSelectable:z,defaultViewport:D,translateExtent:L,minZoom:H,maxZoom:M,preventScrolling:V,defaultMarkerColor:T,zoomOnScroll:I,zoomOnPinch:P,panOnScroll:W,panOnScrollSpeed:F,panOnScrollMode:q,zoomOnDoubleClick:X,panOnDrag:Q,onPaneClick:se,onPaneMouseEnter:ae,onPaneMouseMove:de,onPaneMouseLeave:ce,onPaneScroll:fe,onPaneContextMenu:ve,paneClickDistance:Ae,nodeClickDistance:Ce,onEdgeContextMenu:Ee,onEdgeMouseEnter:Re,onEdgeMouseMove:ke,onEdgeMouseLeave:He,reconnectRadius:et,onReconnect:Oe,onReconnectStart:Me,onReconnectEnd:Ie,noDragClassName:G,noWheelClassName:re,noPanClassName:te,disableKeyboardA11y:he,nodeExtent:ie,rfId:ne,viewport:le,onViewportChange:xe}){return v8(e),v8(t),rDe(),YPe(n),XPe(le),m.jsx(xPe,{onPaneClick:se,onPaneMouseEnter:ae,onPaneMouseMove:de,onPaneMouseLeave:ce,onPaneContextMenu:ve,onPaneScroll:fe,paneClickDistance:Ae,deleteKeyCode:R,selectionKeyCode:_,selectionOnDrag:C,selectionMode:j,onSelectionStart:p,onSelectionEnd:y,multiSelectionKeyCode:A,panActivationKeyCode:$,zoomActivationKeyCode:k,elementsSelectable:z,zoomOnScroll:I,zoomOnPinch:P,zoomOnDoubleClick:X,panOnScroll:W,panOnScrollSpeed:F,panOnScrollMode:q,panOnDrag:Q,defaultViewport:D,translateExtent:L,minZoom:H,maxZoom:M,onSelectionContextMenu:h,preventScrolling:V,noDragClassName:G,noWheelClassName:re,noPanClassName:te,disableKeyboardA11y:he,onViewportChange:xe,isControlledViewport:!!le,children:m.jsxs(GPe,{children:[m.jsx(HPe,{edgeTypes:t,onEdgeClick:s,onEdgeDoubleClick:o,onReconnect:Oe,onReconnectStart:Me,onReconnectEnd:Ie,onlyRenderVisibleElements:B,onEdgeContextMenu:Ee,onEdgeMouseEnter:Re,onEdgeMouseMove:ke,onEdgeMouseLeave:He,reconnectRadius:et,defaultMarkerColor:T,noPanClassName:te,disableKeyboardA11y:he,rfId:ne}),m.jsx(tDe,{style:x,type:v,component:E,containerStyle:N}),m.jsx("div",{className:"react-flow__edgelabel-renderer"}),m.jsx(jPe,{nodeTypes:e,onNodeClick:r,onNodeDoubleClick:i,onNodeMouseEnter:a,onNodeMouseMove:c,onNodeMouseLeave:u,onNodeContextMenu:f,nodeClickDistance:Ce,onlyRenderVisibleElements:B,noPanClassName:te,noDragClassName:G,disableKeyboardA11y:he,nodeExtent:ie,rfId:ne}),m.jsx("div",{className:"react-flow__viewport-portal"})]})})}xJ.displayName="GraphView";const sDe=w.memo(xJ),x8=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:s,height:i,fitView:o,nodeOrigin:a,nodeExtent:c}={})=>{const u=new Map,f=new Map,h=new Map,p=new Map,y=r??t??[],v=n??e??[],x=a??[0,0],E=c??fy;MY(h,p,y),Pj(v,u,f,{nodeOrigin:x,nodeExtent:E,elevateNodesOnSelect:!1});let N=[0,0,1];if(o&&s&&i){const _=b0(u,{filter:$=>!!(($.width||$.initialWidth)&&($.height||$.initialHeight))}),{x:C,y:j,zoom:A}=B3(_,s,i,.5,2,.1);N=[C,j,A]}return{rfId:"1",width:0,height:0,transform:N,nodes:v,nodeLookup:u,parentLookup:f,edges:y,edgeLookup:p,connectionLookup:h,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:.5,maxZoom:2,translateExtent:fy,nodeExtent:E,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:qh.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:x,nodeDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,fitViewOnInit:!1,fitViewDone:!1,fitViewOnInitOptions:void 0,selectNodesOnDrag:!0,multiSelectionActive:!1,connection:{...pY},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanSpeed:15,connectionRadius:20,onError:I6e,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1}},iDe=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:s,height:i,fitView:o,nodeOrigin:a,nodeExtent:c})=>NIe((u,f)=>({...x8({nodes:e,edges:t,width:s,height:i,fitView:o,nodeOrigin:a,nodeExtent:c,defaultNodes:n,defaultEdges:r}),setNodes:h=>{const{nodeLookup:p,parentLookup:y,nodeOrigin:v,elevateNodesOnSelect:x}=f();Pj(h,p,y,{nodeOrigin:v,nodeExtent:c,elevateNodesOnSelect:x,checkEquality:!0}),u({nodes:h})},setEdges:h=>{const{connectionLookup:p,edgeLookup:y}=f();MY(p,y,h),u({edges:h})},setDefaultNodesAndEdges:(h,p)=>{if(h){const{setNodes:y}=f();y(h),u({hasDefaultNodes:!0})}if(p){const{setEdges:y}=f();y(p),u({hasDefaultEdges:!0})}},updateNodeInternals:(h,p={triggerFitView:!0})=>{const{triggerNodeChanges:y,nodeLookup:v,parentLookup:x,fitViewOnInit:E,fitViewDone:N,fitViewOnInitOptions:_,domNode:C,nodeOrigin:j,nodeExtent:A,debug:$,fitViewSync:k}=f(),{changes:R,updatedInternals:B}=X6e(h,v,x,C,j,A);if(B){if(G6e(v,x,{nodeOrigin:j,nodeExtent:A}),p.triggerFitView){let z=N;!N&&E&&(z=k({..._,nodes:_==null?void 0:_.nodes})),u({fitViewDone:z})}else u({});(R==null?void 0:R.length)>0&&($&&console.log("React Flow: trigger node changes",R),y==null||y(R))}},updateNodePositions:(h,p=!1)=>{const y=[],v=[],{nodeLookup:x,triggerNodeChanges:E}=f();for(const[N,_]of h){const C=x.get(N),j=!!(C!=null&&C.expandParent&&(C!=null&&C.parentId)&&(_!=null&&_.position)),A={id:N,type:"position",position:j?{x:Math.max(0,_.position.x),y:Math.max(0,_.position.y)}:_.position,dragging:p};j&&C.parentId&&y.push({id:N,parentId:C.parentId,rect:{..._.internals.positionAbsolute,width:_.measured.width??0,height:_.measured.height??0}}),v.push(A)}if(y.length>0){const{parentLookup:N,nodeOrigin:_}=f(),C=q3(y,x,N,_);v.push(...C)}E(v)},triggerNodeChanges:h=>{const{onNodesChange:p,setNodes:y,nodes:v,hasDefaultNodes:x,debug:E}=f();if(h!=null&&h.length){if(x){const N=JY(h,v);y(N)}E&&console.log("React Flow: trigger node changes",h),p==null||p(h)}},triggerEdgeChanges:h=>{const{onEdgesChange:p,setEdges:y,edges:v,hasDefaultEdges:x,debug:E}=f();if(h!=null&&h.length){if(x){const N=XY(h,v);y(N)}E&&console.log("React Flow: trigger edge changes",h),p==null||p(h)}},addSelectedNodes:h=>{const{multiSelectionActive:p,edgeLookup:y,nodeLookup:v,triggerNodeChanges:x,triggerEdgeChanges:E}=f();if(p){const N=h.map(_=>wu(_,!0));x(N);return}x(qf(v,new Set([...h]),!0)),E(qf(y))},addSelectedEdges:h=>{const{multiSelectionActive:p,edgeLookup:y,nodeLookup:v,triggerNodeChanges:x,triggerEdgeChanges:E}=f();if(p){const N=h.map(_=>wu(_,!0));E(N);return}E(qf(y,new Set([...h]))),x(qf(v,new Set,!0))},unselectNodesAndEdges:({nodes:h,edges:p}={})=>{const{edges:y,nodes:v,nodeLookup:x,triggerNodeChanges:E,triggerEdgeChanges:N}=f(),_=h||v,C=p||y,j=_.map($=>{const k=x.get($.id);return k&&(k.selected=!1),wu($.id,!1)}),A=C.map($=>wu($.id,!1));E(j),N(A)},setMinZoom:h=>{const{panZoom:p,maxZoom:y}=f();p==null||p.setScaleExtent([h,y]),u({minZoom:h})},setMaxZoom:h=>{const{panZoom:p,minZoom:y}=f();p==null||p.setScaleExtent([y,h]),u({maxZoom:h})},setTranslateExtent:h=>{var p;(p=f().panZoom)==null||p.setTranslateExtent(h),u({translateExtent:h})},setPaneClickDistance:h=>{var p;(p=f().panZoom)==null||p.setClickDistance(h)},resetSelectedElements:()=>{const{edges:h,nodes:p,triggerNodeChanges:y,triggerEdgeChanges:v}=f(),x=p.reduce((N,_)=>_.selected?[...N,wu(_.id,!1)]:N,[]),E=h.reduce((N,_)=>_.selected?[...N,wu(_.id,!1)]:N,[]);y(x),v(E)},setNodeExtent:h=>{const{nodes:p,nodeLookup:y,parentLookup:v,nodeOrigin:x,elevateNodesOnSelect:E,nodeExtent:N}=f();h[0][0]===N[0][0]&&h[0][1]===N[0][1]&&h[1][0]===N[1][0]&&h[1][1]===N[1][1]||(Pj(p,y,v,{nodeOrigin:x,nodeExtent:h,elevateNodesOnSelect:E,checkEquality:!1}),u({nodeExtent:h}))},panBy:h=>{const{transform:p,width:y,height:v,panZoom:x,translateExtent:E}=f();return K6e({delta:h,panZoom:x,transform:p,translateExtent:E,width:y,height:v})},fitView:h=>{const{panZoom:p,width:y,height:v,minZoom:x,maxZoom:E,nodeLookup:N}=f();if(!p)return Promise.resolve(!1);const _=Tj(N,h);return $j({nodes:_,width:y,height:v,panZoom:p,minZoom:x,maxZoom:E},h)},fitViewSync:h=>{const{panZoom:p,width:y,height:v,minZoom:x,maxZoom:E,nodeLookup:N}=f();if(!p)return!1;const _=Tj(N,h);return $j({nodes:_,width:y,height:v,panZoom:p,minZoom:x,maxZoom:E},h),_.size>0},cancelConnection:()=>{u({connection:{...pY}})},updateConnection:h=>{u({connection:h})},reset:()=>u({...x8()})}),Object.is);function wJ({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:r,initialWidth:s,initialHeight:i,fitView:o,nodeOrigin:a,nodeExtent:c,children:u}){const[f]=w.useState(()=>iDe({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:s,height:i,fitView:o,nodeOrigin:a,nodeExtent:c}));return m.jsx(_Ie,{value:f,children:m.jsx(YIe,{children:u})})}function oDe({children:e,nodes:t,edges:n,defaultNodes:r,defaultEdges:s,width:i,height:o,fitView:a,nodeOrigin:c,nodeExtent:u}){return w.useContext(US)?m.jsx(m.Fragment,{children:e}):m.jsx(wJ,{initialNodes:t,initialEdges:n,defaultNodes:r,defaultEdges:s,initialWidth:i,initialHeight:o,fitView:a,nodeOrigin:c,nodeExtent:u,children:e})}const aDe={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function lDe({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:s,nodeTypes:i,edgeTypes:o,onNodeClick:a,onEdgeClick:c,onInit:u,onMove:f,onMoveStart:h,onMoveEnd:p,onConnect:y,onConnectStart:v,onConnectEnd:x,onClickConnectStart:E,onClickConnectEnd:N,onNodeMouseEnter:_,onNodeMouseMove:C,onNodeMouseLeave:j,onNodeContextMenu:A,onNodeDoubleClick:$,onNodeDragStart:k,onNodeDrag:R,onNodeDragStop:B,onNodesDelete:z,onEdgesDelete:D,onDelete:L,onSelectionChange:H,onSelectionDragStart:M,onSelectionDrag:V,onSelectionDragStop:T,onSelectionContextMenu:I,onSelectionStart:P,onSelectionEnd:W,onBeforeDelete:F,connectionMode:q,connectionLineType:X=Zl.Bezier,connectionLineStyle:Q,connectionLineComponent:se,connectionLineContainerStyle:ae,deleteKeyCode:de="Backspace",selectionKeyCode:ce="Shift",selectionOnDrag:fe=!1,selectionMode:ve=hy.Full,panActivationKeyCode:Ae="Space",multiSelectionKeyCode:Ce=Nw()?"Meta":"Control",zoomActivationKeyCode:Ee=Nw()?"Meta":"Control",snapToGrid:Re,snapGrid:ke,onlyRenderVisibleElements:He=!1,selectNodesOnDrag:et,nodesDraggable:Oe,nodesConnectable:Me,nodesFocusable:Ie,nodeOrigin:G=GY,edgesFocusable:re,edgesReconnectable:te,elementsSelectable:he=!0,defaultViewport:ie=LIe,minZoom:ne=.5,maxZoom:le=2,translateExtent:xe=fy,preventScrolling:Ne=!0,nodeExtent:Ge,defaultMarkerColor:Vt="#b1b1b7",zoomOnScroll:St=!0,zoomOnPinch:oo=!0,panOnScroll:Ut=!1,panOnScrollSpeed:hn=.5,panOnScrollMode:ur=Yu.Free,zoomOnDoubleClick:wi=!0,panOnDrag:Bs=!0,onPaneClick:ao,onPaneMouseEnter:qc,onPaneMouseMove:Ad,onPaneMouseLeave:al,onPaneScroll:Vo,onPaneContextMenu:zs,paneClickDistance:Hc=0,nodeClickDistance:Cm=0,children:Wc,onReconnect:Gc,onReconnectStart:mn,onReconnectEnd:Si,onEdgeContextMenu:er,onEdgeDoubleClick:an,onEdgeMouseEnter:Ln,onEdgeMouseMove:Ei,onEdgeMouseLeave:ll,reconnectRadius:Td=10,onNodesChange:Om,onEdgesChange:$d,noDragClassName:Uo="nodrag",noWheelClassName:Yc="nowheel",noPanClassName:mt="nopan",fitView:Tn,fitViewOptions:br,connectOnClick:qo,attributionPosition:Fn,proOptions:w0,defaultEdgeOptions:S0,elevateNodesOnSelect:Ho,elevateEdgesOnSelect:cl,disableKeyboardA11y:E0=!1,autoPanOnConnect:N0,autoPanOnNodeDrag:_0,autoPanSpeed:WS,connectionRadius:Rd,isValidConnection:kd,onError:Ni,style:jm,id:Am,nodeDragThreshold:ul,viewport:Tm,onViewportChange:$m,width:GS,height:C0,colorMode:Yr="light",debug:O0,onScroll:Md,...Id},j0){const dl=Am||"1",YS=VIe(Yr),Jr=w.useCallback(Pd=>{Pd.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),Md==null||Md(Pd)},[Md]);return m.jsx("div",{"data-testid":"rf__wrapper",...Id,onScroll:Jr,style:{...jm,...aDe},ref:j0,className:Hn(["react-flow",s,YS]),id:Am,children:m.jsxs(oDe,{nodes:e,edges:t,width:GS,height:C0,fitView:Tn,nodeOrigin:G,nodeExtent:Ge,children:[m.jsx(sDe,{onInit:u,onNodeClick:a,onEdgeClick:c,onNodeMouseEnter:_,onNodeMouseMove:C,onNodeMouseLeave:j,onNodeContextMenu:A,onNodeDoubleClick:$,nodeTypes:i,edgeTypes:o,connectionLineType:X,connectionLineStyle:Q,connectionLineComponent:se,connectionLineContainerStyle:ae,selectionKeyCode:ce,selectionOnDrag:fe,selectionMode:ve,deleteKeyCode:de,multiSelectionKeyCode:Ce,panActivationKeyCode:Ae,zoomActivationKeyCode:Ee,onlyRenderVisibleElements:He,defaultViewport:ie,translateExtent:xe,minZoom:ne,maxZoom:le,preventScrolling:Ne,zoomOnScroll:St,zoomOnPinch:oo,zoomOnDoubleClick:wi,panOnScroll:Ut,panOnScrollSpeed:hn,panOnScrollMode:ur,panOnDrag:Bs,onPaneClick:ao,onPaneMouseEnter:qc,onPaneMouseMove:Ad,onPaneMouseLeave:al,onPaneScroll:Vo,onPaneContextMenu:zs,paneClickDistance:Hc,nodeClickDistance:Cm,onSelectionContextMenu:I,onSelectionStart:P,onSelectionEnd:W,onReconnect:Gc,onReconnectStart:mn,onReconnectEnd:Si,onEdgeContextMenu:er,onEdgeDoubleClick:an,onEdgeMouseEnter:Ln,onEdgeMouseMove:Ei,onEdgeMouseLeave:ll,reconnectRadius:Td,defaultMarkerColor:Vt,noDragClassName:Uo,noWheelClassName:Yc,noPanClassName:mt,rfId:dl,disableKeyboardA11y:E0,nodeExtent:Ge,viewport:Tm,onViewportChange:$m}),m.jsx(zIe,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:y,onConnectStart:v,onConnectEnd:x,onClickConnectStart:E,onClickConnectEnd:N,nodesDraggable:Oe,nodesConnectable:Me,nodesFocusable:Ie,edgesFocusable:re,edgesReconnectable:te,elementsSelectable:he,elevateNodesOnSelect:Ho,elevateEdgesOnSelect:cl,minZoom:ne,maxZoom:le,nodeExtent:Ge,onNodesChange:Om,onEdgesChange:$d,snapToGrid:Re,snapGrid:ke,connectionMode:q,translateExtent:xe,connectOnClick:qo,defaultEdgeOptions:S0,fitView:Tn,fitViewOptions:br,onNodesDelete:z,onEdgesDelete:D,onDelete:L,onNodeDragStart:k,onNodeDrag:R,onNodeDragStop:B,onSelectionDrag:V,onSelectionDragStart:M,onSelectionDragStop:T,onMove:f,onMoveStart:h,onMoveEnd:p,noPanClassName:mt,nodeOrigin:G,rfId:dl,autoPanOnConnect:N0,autoPanOnNodeDrag:_0,autoPanSpeed:WS,onError:Ni,connectionRadius:Rd,isValidConnection:kd,selectNodesOnDrag:et,nodeDragThreshold:ul,onBeforeDelete:F,paneClickDistance:Hc,debug:O0}),m.jsx(DIe,{onSelectionChange:H}),Wc,m.jsx(RIe,{proOptions:w0,position:Fn}),m.jsx(TIe,{rfId:dl,disableKeyboardA11y:E0})]})})}var cDe=KY(lDe);const uDe=e=>({x:e.transform[0],y:e.transform[1],zoom:e.transform[2]});function dDe(){return kt(uDe,En)}function fDe(e){const[t,n]=w.useState(e),r=w.useCallback(s=>n(i=>JY(s,i)),[]);return[t,n,r]}function hDe(e){const[t,n]=w.useState(e),r=w.useCallback(s=>n(i=>XY(s,i)),[]);return[t,n,r]}function mDe({dimensions:e,lineWidth:t,variant:n,className:r}){return m.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:Hn(["react-flow__background-pattern",n,r])})}function pDe({radius:e,className:t}){return m.jsx("circle",{cx:e,cy:e,r:e,className:Hn(["react-flow__background-pattern","dots",t])})}var Pa;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Pa||(Pa={}));const gDe={[Pa.Dots]:1,[Pa.Lines]:1,[Pa.Cross]:6},yDe=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function SJ({id:e,variant:t=Pa.Dots,gap:n=20,size:r,lineWidth:s=1,offset:i=0,color:o,bgColor:a,style:c,className:u,patternClassName:f}){const h=w.useRef(null),{transform:p,patternId:y}=kt(yDe,En),v=r||gDe[t],x=t===Pa.Dots,E=t===Pa.Cross,N=Array.isArray(n)?n:[n,n],_=[N[0]*p[2]||1,N[1]*p[2]||1],C=v*p[2],j=Array.isArray(i)?i:[i,i],A=E?[C,C]:_,$=[j[0]*p[2]||1+A[0]/2,j[1]*p[2]||1+A[1]/2],k=`${y}${e||""}`;return m.jsxs("svg",{className:Hn(["react-flow__background",u]),style:{...c,...qS,"--xy-background-color-props":a,"--xy-background-pattern-color-props":o},ref:h,"data-testid":"rf__background",children:[m.jsx("pattern",{id:k,x:p[0]%_[0],y:p[1]%_[1],width:_[0],height:_[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${$[0]},-${$[1]})`,children:x?m.jsx(pDe,{radius:C/2,className:f}):m.jsx(mDe,{dimensions:A,lineWidth:s,variant:t,className:f})}),m.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${k})`})]})}SJ.displayName="Background";const w8=w.memo(SJ);function bDe(){return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:m.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function vDe(){return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:m.jsx("path",{d:"M0 0h32v4.2H0z"})})}function xDe(){return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:m.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function wDe(){return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:m.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function SDe(){return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:m.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function Nv({children:e,className:t,...n}){return m.jsx("button",{type:"button",className:Hn(["react-flow__controls-button",t]),...n,children:e})}const EDe=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom});function EJ({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:s,onZoomIn:i,onZoomOut:o,onFitView:a,onInteractiveChange:c,className:u,children:f,position:h="bottom-left",orientation:p="vertical","aria-label":y="React Flow controls"}){const v=bn(),{isInteractive:x,minZoomReached:E,maxZoomReached:N}=kt(EDe,En),{zoomIn:_,zoomOut:C,fitView:j}=_m(),A=()=>{_(),i==null||i()},$=()=>{C(),o==null||o()},k=()=>{j(s),a==null||a()},R=()=>{v.setState({nodesDraggable:!x,nodesConnectable:!x,elementsSelectable:!x}),c==null||c(!x)},B=p==="horizontal"?"horizontal":"vertical";return m.jsxs(Yh,{className:Hn(["react-flow__controls",B,u]),position:h,style:e,"data-testid":"rf__controls","aria-label":y,children:[t&&m.jsxs(m.Fragment,{children:[m.jsx(Nv,{onClick:A,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:N,children:m.jsx(bDe,{})}),m.jsx(Nv,{onClick:$,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:E,children:m.jsx(vDe,{})})]}),n&&m.jsx(Nv,{className:"react-flow__controls-fitview",onClick:k,title:"fit view","aria-label":"fit view",children:m.jsx(xDe,{})}),r&&m.jsx(Nv,{className:"react-flow__controls-interactive",onClick:R,title:"toggle interactivity","aria-label":"toggle interactivity",children:x?m.jsx(SDe,{}):m.jsx(wDe,{})}),f]})}EJ.displayName="Controls";w.memo(EJ);function NDe({id:e,x:t,y:n,width:r,height:s,style:i,color:o,strokeColor:a,strokeWidth:c,className:u,borderRadius:f,shapeRendering:h,selected:p,onClick:y}){const{background:v,backgroundColor:x}=i||{},E=o||v||x;return m.jsx("rect",{className:Hn(["react-flow__minimap-node",{selected:p},u]),x:t,y:n,rx:f,ry:f,width:r,height:s,style:{fill:E,stroke:a,strokeWidth:c},shapeRendering:h,onClick:y?N=>y(N,e):void 0})}const _De=w.memo(NDe),CDe=e=>e.nodes.map(t=>t.id),oC=e=>e instanceof Function?e:()=>e;function ODe({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:s,nodeComponent:i=_De,onClick:o}){const a=kt(CDe,En),c=oC(t),u=oC(e),f=oC(n),h=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return m.jsx(m.Fragment,{children:a.map(p=>m.jsx(ADe,{id:p,nodeColorFunc:c,nodeStrokeColorFunc:u,nodeClassNameFunc:f,nodeBorderRadius:r,nodeStrokeWidth:s,NodeComponent:i,onClick:o,shapeRendering:h},p))})}function jDe({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:s,nodeStrokeWidth:i,shapeRendering:o,NodeComponent:a,onClick:c}){const{node:u,x:f,y:h,width:p,height:y}=kt(v=>{const x=v.nodeLookup.get(e),{x:E,y:N}=x.internals.positionAbsolute,{width:_,height:C}=ol(x);return{node:x,x:E,y:N,width:_,height:C}},En);return!u||u.hidden||!NY(u)?null:m.jsx(a,{x:f,y:h,width:p,height:y,style:u.style,selected:!!u.selected,className:r(u),color:t(u),borderRadius:s,strokeColor:n(u),strokeWidth:i,shapeRendering:o,onClick:c,id:u.id})}const ADe=w.memo(jDe);var TDe=w.memo(ODe);const $De=200,RDe=150,kDe=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?SY(b0(e.nodeLookup),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height}},MDe="react-flow__minimap-desc";function NJ({style:e,className:t,nodeStrokeColor:n,nodeColor:r,nodeClassName:s="",nodeBorderRadius:i=5,nodeStrokeWidth:o,nodeComponent:a,bgColor:c,maskColor:u,maskStrokeColor:f,maskStrokeWidth:h,position:p="bottom-right",onClick:y,onNodeClick:v,pannable:x=!1,zoomable:E=!1,ariaLabel:N="React Flow mini map",inversePan:_,zoomStep:C=10,offsetScale:j=5}){const A=bn(),$=w.useRef(null),{boundingRect:k,viewBB:R,rfId:B,panZoom:z,translateExtent:D,flowWidth:L,flowHeight:H}=kt(kDe,En),M=(e==null?void 0:e.width)??$De,V=(e==null?void 0:e.height)??RDe,T=k.width/M,I=k.height/V,P=Math.max(T,I),W=P*M,F=P*V,q=j*P,X=k.x-(W-k.width)/2-q,Q=k.y-(F-k.height)/2-q,se=W+q*2,ae=F+q*2,de=`${MDe}-${B}`,ce=w.useRef(0),fe=w.useRef();ce.current=P,w.useEffect(()=>{if($.current&&z)return fe.current=iIe({domNode:$.current,panZoom:z,getTransform:()=>A.getState().transform,getViewScale:()=>ce.current}),()=>{var Ce;(Ce=fe.current)==null||Ce.destroy()}},[z]),w.useEffect(()=>{var Ce;(Ce=fe.current)==null||Ce.update({translateExtent:D,width:L,height:H,inversePan:_,pannable:x,zoomStep:C,zoomable:E})},[x,E,_,C,D,L,H]);const ve=y?Ce=>{var ke;const[Ee,Re]=((ke=fe.current)==null?void 0:ke.pointer(Ce))||[0,0];y(Ce,{x:Ee,y:Re})}:void 0,Ae=v?w.useCallback((Ce,Ee)=>{const Re=A.getState().nodeLookup.get(Ee);v(Ce,Re)},[]):void 0;return m.jsx(Yh,{position:p,style:{...e,"--xy-minimap-background-color-props":typeof c=="string"?c:void 0,"--xy-minimap-mask-background-color-props":typeof u=="string"?u:void 0,"--xy-minimap-mask-stroke-color-props":typeof f=="string"?f:void 0,"--xy-minimap-mask-stroke-width-props":typeof h=="number"?h*P:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof o=="string"?o:void 0},className:Hn(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:m.jsxs("svg",{width:M,height:V,viewBox:`${X} ${Q} ${se} ${ae}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":de,ref:$,onClick:ve,children:[N&&m.jsx("title",{id:de,children:N}),m.jsx(TDe,{onClick:Ae,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:i,nodeClassName:s,nodeStrokeWidth:o,nodeComponent:a}),m.jsx("path",{className:"react-flow__minimap-mask",d:`M${X-q},${Q-q}h${se+q*2}v${ae+q*2}h${-se-q*2}z
        M${R.x},${R.y}h${R.width}v${R.height}h${-R.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}NJ.displayName="MiniMap";const _J=w.memo(NJ);function IDe({nodeId:e,position:t,variant:n=wg.Handle,className:r,style:s={},children:i,color:o,minWidth:a=10,minHeight:c=10,maxWidth:u=Number.MAX_VALUE,maxHeight:f=Number.MAX_VALUE,keepAspectRatio:h=!1,shouldResize:p,onResizeStart:y,onResize:v,onResizeEnd:x}){const E=tJ(),N=typeof e=="string"?e:E,_=bn(),C=w.useRef(null),j=n===wg.Line?"right":"bottom-right",A=t??j,$=w.useRef(null);w.useEffect(()=>{if(!(!C.current||!N))return $.current||($.current=xIe({domNode:C.current,nodeId:N,getStoreItems:()=>{const{nodeLookup:z,transform:D,snapGrid:L,snapToGrid:H,nodeOrigin:M,domNode:V}=_.getState();return{nodeLookup:z,transform:D,snapGrid:L,snapToGrid:H,nodeOrigin:M,paneDomNode:V}},onChange:(z,D)=>{const{triggerNodeChanges:L,nodeLookup:H,parentLookup:M,nodeOrigin:V}=_.getState(),T=[],I={x:z.x,y:z.y},P=H.get(N);if(P&&P.expandParent&&P.parentId){const W=P.origin??V,F=z.width??P.measured.width??0,q=z.height??P.measured.height??0,X={id:P.id,parentId:P.parentId,rect:{width:F,height:q,..._Y({x:z.x??P.position.x,y:z.y??P.position.y},{width:F,height:q},P.parentId,H,W)}},Q=q3([X],H,M,V);T.push(...Q),I.x=z.x?Math.max(W[0]*F,z.x):void 0,I.y=z.y?Math.max(W[1]*q,z.y):void 0}if(I.x!==void 0&&I.y!==void 0){const W={id:N,type:"position",position:{...I}};T.push(W)}if(z.width!==void 0&&z.height!==void 0){const W={id:N,type:"dimensions",resizing:!0,setAttributes:!0,dimensions:{width:z.width,height:z.height}};T.push(W)}for(const W of D){const F={...W,type:"position"};T.push(F)}L(T)},onEnd:()=>{const z={id:N,type:"dimensions",resizing:!1};_.getState().triggerNodeChanges([z])}})),$.current.update({controlPosition:A,boundaries:{minWidth:a,minHeight:c,maxWidth:u,maxHeight:f},keepAspectRatio:h,onResizeStart:y,onResize:v,onResizeEnd:x,shouldResize:p}),()=>{var z;(z=$.current)==null||z.destroy()}},[A,a,c,u,f,h,y,v,x,p]);const k=A.split("-"),R=n===wg.Line?"borderColor":"backgroundColor",B=o?{...s,[R]:o}:s;return m.jsx("div",{className:Hn(["react-flow__resize-control","nodrag",...k,n,r]),ref:C,style:B,children:i})}w.memo(IDe);function PDe({nodes:e,edges:t,externalProvider:n,backgroundStyle:r="lines",minimap:s=!1,children:i,onDropNewNode:o,onDropNewEdge:a,...c}){const[u,f,h]=fDe(e??[]),[p,y,v]=hDe(t??[]),{screenToFlowPosition:x}=_m(),{theme:E}=Bc(),[N,_]=w.useState(!1),[C,j]=w.useState(!1),[A,$]=w.useState(!1),k=H=>{H.metaKey&&_(!0),H.key===" "&&j(!0)},R=H=>{H.metaKey||_(!1),H.key===" "&&j(!1)},B=()=>{if(C){$(!1);return}$(!0)},z=()=>{if(C){$(!1);return}$(!1)};w.useEffect(()=>{var H;return(H=document.querySelector("html"))==null||H.classList.add("fixed"),window.addEventListener("keydown",k),window.addEventListener("keyup",R),window.addEventListener("pointerdown",B),window.addEventListener("pointerup",z),()=>{var M;window.removeEventListener("keydown",k),window.removeEventListener("keyup",R),window.removeEventListener("pointerdown",B),window.removeEventListener("pointerup",z),(M=document.querySelector("html"))==null||M.classList.remove("fixed")}},[]),w.useEffect(()=>{f(e??[]),y(t??[])},[e,t]);const D=w.useCallback(H=>y(M=>$Y(H,M)),[]),L=w.useCallback((H,M)=>{if(!o||!a)return;const{fromNode:V,fromHandle:T,fromPosition:I}=M;if(!M.isValid){console.log("conn",{event:H,connectionState:M});const{clientX:P,clientY:W}="changedTouches"in H?H.changedTouches[0]:H,F=o({id:"select",type:"default",data:{label:""},position:x({x:P,y:W}),origin:[0,0]});f(q=>q.concat(F)),y(q=>q.concat(o({id:F.id,source:M.fromNode.id,target:F.id})))}},[x]);return m.jsxs(cDe,{colorMode:E,onConnect:D,onConnectEnd:L,className:N?"cursor-zoom-in":C?A?"cursor-grabbing":"cursor-grab":"",proOptions:{hideAttribution:!0},fitView:!0,fitViewOptions:{maxZoom:1.5,...c.fitViewOptions},nodeDragThreshold:25,panOnScrollSpeed:1,snapToGrid:!0,nodes:u,edges:p,onNodesChange:h,onEdgesChange:v,nodesConnectable:!1,panOnDrag:!0,zoomOnScroll:N,panOnScroll:!N,zoomOnDoubleClick:!1,selectionOnDrag:!C,...c,children:[r==="lines"&&m.jsx(w8,{color:E==="light"?"rgba(0,0,0,.05)":"rgba(255,255,255,.1)",gap:[50,50],variant:Pa.Lines}),r==="dots"&&m.jsx(w8,{color:E==="light"?"rgba(0,0,0,.5)":"rgba(255,255,255,.2)"}),s&&m.jsx(_J,{...typeof s=="object"?s:{}}),i]})}function Sr({position:e,className:t,children:n,unstyled:r,...s}){return r?m.jsx(Yh,{position:e,className:qe("flex flex-row p-1 gap-4",t),...s,children:n}):m.jsx(Yh,{position:e,...s,children:m.jsx(CJ,{className:t,children:n})})}const CJ=({children:e,className:t,...n})=>m.jsx("div",{...n,className:qe("flex flex-row bg-lightest border ring-2 ring-muted/5 border-muted rounded-full items-center p-1",t),children:e}),DDe=({Icon:e,size:t="lg",variant:n="ghost",onClick:r,disabled:s,className:i,round:o,...a})=>m.jsx(xt,{Icon:e,size:t,variant:n,onClick:r,disabled:s,className:qe(o?"rounded-full":"",i),...a}),LDe=w.forwardRef(({children:e,className:t,mono:n,...r},s)=>m.jsx("span",{...r,ref:s,className:qe("text-md font-medium leading-none",n&&"font-mono",t),children:e}));Sr.Wrapper=CJ;Sr.IconButton=DDe;Sr.Text=LDe;function FDe({children:e,...t}){const[n,r]=w.useState(!1),s=_m(),{zoom:i,x:o,y:a}=dDe(),c=Math.round(i*100),u=async()=>await s.zoomIn(),f=async()=>s.zoomTo(1),h=async()=>await s.zoomOut();function p(){r(y=>!y)}return m.jsxs(m.Fragment,{children:[e,t.coordinates&&m.jsx(Sr,{position:"bottom-center",children:m.jsxs(Sr.Text,{className:"px-2",mono:!0,children:[o.toFixed(2),",",a.toFixed(2)]})}),m.jsxs(Sr,{unstyled:!0,position:"bottom-right",children:[t.zoom&&m.jsxs(Sr.Wrapper,{className:"px-1.5",children:[m.jsx(Sr.IconButton,{Icon:Mq,round:!0,onClick:u}),m.jsxs(Sr.Text,{className:"px-2",mono:!0,onClick:f,children:[c,"%"]}),m.jsx(Sr.IconButton,{Icon:ZSe,round:!0,onClick:h}),m.jsx(Sr.IconButton,{Icon:KSe,round:!0,onClick:f})]}),t.minimap&&m.jsxs(m.Fragment,{children:[m.jsx(Sr.Wrapper,{children:m.jsx(Sr.IconButton,{Icon:qO,round:!0,onClick:p,variant:n?"default":"ghost"})}),n&&m.jsx(_J,{style:{bottom:50,right:-5},ariaLabel:null})]})]})]})}function vc({selected:e,children:t,className:n,...r}){return Bc(),m.jsx("div",{...r,className:qe("relative w-80 shadow-lg rounded-lg bg-background",e&&"outline outline-blue-500/25",n),children:t})}const BDe=({className:e,label:t,children:n,...r})=>m.jsx("div",{...r,className:qe("flex flex-row bg-primary/15 justify-center items-center rounded-tl-lg rounded-tr-lg py-1 px-2 drag-handle",e),children:n||m.jsx("span",{className:"font-semibold opacity-75 font-mono",children:t??"Untitled node"})}),zDe=({children:e,className:t,...n})=>m.jsx("div",{...n,className:qe("px-2 py-1.5 pb-2 flex flex-col",t),children:e});vc.Header=BDe;vc.Content=zDe;const W3=Bh({dirty:!1,name:void 0,flow:void 0}),OJ=w.createContext(void 0),aC={trigger:{type:"manual"},tasks:{},connections:{}};function VDe({children:e,name:t}){const n=b3(W3),r=dt(),s=t?r.config.flows.flows[t]:void 0,i=r.schema.flows.properties.flows;w.useEffect(()=>{t&&n({dirty:!1,name:t,flow:s})},[t]);const o={flow:{setName:async a=>{console.log("set name",a),n(c=>({...c,name:a,dirty:!0}))}},trigger:{update:async a=>{console.log("update trigger",a),n(c=>{const u=c.flow||aC;return{...c,dirty:!0,flow:{...u,trigger:a}}})}},task:{create:async(a,c={})=>{console.log("create task",a,c),n(u=>{const f=u.flow||aC,h={...f.tasks,[a]:c};return{...u,dirty:!0,flow:{...f,tasks:h}}})},update:async(a,c)=>{console.log("update task",a,c),n(u=>{var p,y;const f=u.flow||aC,h={...(y=(p=u.flow)==null?void 0:p.tasks)==null?void 0:y[a],params:c};return{...u,dirty:!0,flow:{...f,tasks:{...f.tasks,[a]:h}}}})}}};return m.jsx(OJ.Provider,{value:{name:t,data:s,schema:i,actions:o},children:e})}function x0(){return w.useContext(OJ)}function UDe(){return y3(W3)}function G3(e,t=Az){const n=u0(W3,w.useCallback(e,[]),t);return Nm(n)[0]}function qDe(e,t){const n=[{id:"trigger",data:{label:t,type:e.trigger.type},type:"trigger",dragHandle:".drag-handle",position:{x:0,y:0}}];let r=1;const s=Object.keys(e.tasks??{}).length;for(const[i,o]of Object.entries(e.tasks??{})){const a=r===s,c=r===1,u=a;n.push({id:`task-${i}`,data:{label:i,type:o.type,last:a,start:c,responding:u},type:"task",dragHandle:".drag-handle",position:{x:450*r+(r-1)*64,y:0}}),r++}return n}function HDe(e){var r;const t=Object.entries(e.tasks??{});if(t.length===0)return[];const n=t.length>=1?[{id:"trigger-task",source:"trigger",target:`task-${(r=t[0])==null?void 0:r[0]}`,style:{strokeWidth:2},markerEnd:{type:ud.ArrowClosed,width:10,height:10}}]:[];for(const[s,i]of Object.entries(e.connections??{}))n.push({id:s,source:"task-"+i.source,target:"task-"+i.target,style:{strokeWidth:2},markerEnd:{type:ud.ArrowClosed,width:10,height:10}});return n}function Cw(e){const t={top:16,width:10,height:10,background:"transparent",border:"2px solid #999"},n=-10,r={target:{...t,left:n},source:{...t,right:n}};return m.jsx(yy,{...e,position:e.type==="source"?it.Right:it.Left,style:r[e.type]})}const S8=[{type:"fetch",label:"Fetch",description:"Fetch data from a URL",template:{type:"fetch",params:{method:"GET",headers:[],url:""}}},{type:"render",label:"Render",description:"Render data using LiquidJS"}];function WDe(e){const[t,n]=w.useState(),r=_m(),{actions:s}=x0(),i=e.id;async function o(){const a=S8.find(u=>u.type===t),c="untitled";await s.task.create(c,a.template),r.setNodes(u=>u.map(f=>f.id===i?{...f,id:"task-"+c,type:"task",data:{...a.template,label:c}}:f)),setTimeout(()=>{r.setEdges(u=>u.map(f=>(console.log("edge?",f,i,f.target===i),f.target===i?{...f,id:"task-"+c,target:"task-"+c}:f)))},100),console.log("make",a)}return m.jsxs(vc,{className:"w-96",children:[m.jsx(Cw,{type:"target",id:"select-in"}),m.jsxs(vc.Header,{className:"gap-3 justify-start py-2",children:[m.jsx("div",{className:"bg-primary/10 rounded-full w-4 h-4"}),m.jsx("div",{className:"bg-primary/5 rounded-full w-1/2 h-4"})]}),m.jsxs(vc.Content,{children:[m.jsx("div",{children:"select"}),m.jsx("div",{className:"grid grid-cols-3 gap-2",children:S8.map(a=>m.jsx("button",{type:"button",className:qe("border border-primary/10 rounded-md py-2 px-4 hover:bg-primary/10",t===a.type&&"bg-primary/10"),onClick:()=>n(a.type),children:a.label},a.type))}),m.jsx("button",{onClick:o,children:"make"})]})]})}function GDe({label:e,description:t,size:n,...r}){return m.jsxs(It.Wrapper,{className:"relative",children:[e&&m.jsxs("div",{className:"flex flex-col",children:[m.jsx(It.Label,{size:n,children:e}),t&&m.jsx(It.Description,{size:n,children:t})]}),m.jsx(md,{...r,size:n})]})}const Fj={key:"",value:""};function YDe(e){return!e||Array.isArray(e)?[Fj]:Object.entries(e).map(([t,n])=>({key:t,value:n}))}const _v=({label:e,initialValue:t,onChange:n,error:r,classNames:s,mode:i="object"})=>{const[o,a]=w.useState(t?YDe(t):[Fj]);w.useEffect(()=>{if(n)if(i==="object"){const h=o.reduce((p,y)=>(y.key&&typeof y.value<"u"&&(p[y.key]=y.value),p),{});n(h)}else n(o)},[o]);function c(){a(h=>[...h,Fj])}function u(h,p){return y=>{const v=y.currentTarget.value;a(x=>x.map((E,N)=>N===h?{...E,[p]:v}:E))}}function f(h){return()=>{a(p=>p.filter((y,v)=>v!==h))}}return m.jsxs(It.Wrapper,{className:"w-full",children:[m.jsxs("div",{className:"flex flex-row w-full justify-between",children:[e?m.jsx(It.Label,{className:s==null?void 0:s.label,children:e}):m.jsx("div",{}),m.jsx(xt,{Icon:h$,size:"xs",onClick:c})]}),m.jsxs("div",{className:qe("flex flex-col gap-2",s==null?void 0:s.itemWrapper),children:[o.map(({key:h,value:p},y)=>m.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[o.length>1&&m.jsx(xt,{Icon:xU,size:"xs",onClick:f(y)}),m.jsx(On,{className:"w-36",placeholder:"key",value:h,classNames:{wrapper:"font-mono pt-px"},onChange:u(y,"key")}),m.jsx(On,{className:"w-full",placeholder:"value",value:p,classNames:{wrapper:"font-mono pt-px"},onChange:u(y,"value")})]},y)),r&&m.jsx(It.Error,{children:r})]})]})};function Y3({children:e,className:t,tabs:n,Icon:r,isInvalid:s,...i}){const{data:o}=i;function a(c){i.onChangeName&&i.onChangeName(c.target.value)}return m.jsxs(vc,{className:qe("w-96",s&&"ring-8 ring-red-500/15",t),children:[m.jsx(XDe,{Icon:r??$xe,initialValue:o.label,onChange:a}),m.jsx(vc.Content,{className:"gap-3",children:e}),m.jsx(JDe,{tabs:n})]})}const JDe=({tabs:e})=>{var s;const[t,n]=w.useState();if(!e||(e==null?void 0:e.length)===0)return null;function r(i){return()=>{n(o=>o===i?void 0:i)}}return m.jsxs("div",{className:"border-t border-t-muted mt-1",children:[m.jsx("div",{className:"flex flex-row justify-start bg-primary/5 px-3 py-2.5 gap-3",children:e.map((i,o)=>m.jsx("button",{type:"button",onClick:r(o),className:qe("text-sm leading-none",o===t?"font-bold opacity-80":"font-medium opacity-50"),children:i.label},i.id))}),typeof t<"u"?m.jsx("div",{className:"border-t border-t-muted",children:(s=e[t])==null?void 0:s.content()}):null]})},XDe=({Icon:e,iconProps:t,rightSection:n,initialValue:r,changable:s=!1,onChange:i})=>{const[o,a]=w.useState(r);function c(u){if(!s)return;const f=String(u.target.value);if(f.length>0&&!/^[a-zA-Z_][a-zA-Z0-9_ ]*$/.test(f)||f.length===25)return;const h=f.toLowerCase().replace(/ /g,"_").replace(/__+/g,"_");a(h),i==null||i({...u,target:{...u.target,value:h}})}return m.jsxs(vc.Header,{className:"justify-between gap-10",children:[m.jsxs("div",{className:"flex flex-row flex-grow gap-1 items-center",children:[m.jsx(e,{width:16,height:16,...t??{}}),s?m.jsx("input",{type:"text",value:o,disabled:!s,onChange:c,className:qe("font-mono font-semibold bg-transparent rounded-lg outline-none pl-1.5 w-full hover:bg-lightest/30 transition-colors focus:bg-lightest/60")}):m.jsx("span",{className:"font-mono font-semibold bg-transparent  rounded-lg outline-none pl-1.5",children:o})]}),m.jsxs("div",{className:"flex flex-row gap-1",children:[m.jsx(xt,{Icon:pSe,size:"sm"}),m.jsx(xt,{Icon:nl,size:"sm"})]})]})},KDe=ze({query:ed(pe()).optional(),...KT.schema.properties});function QDe({onChange:e,params:t,...n}){var E;const[r,s]=ZU([!0,!1]),[i,o]=w.useState("None"),{register:a,handleSubmit:c,setValue:u,getValues:f,formState:{isValid:h,errors:p},watch:y,control:v}=rl({resolver:sl(KDe),defaultValues:t,mode:"onChange"});function x(N){console.log("submit task",N),e(N)}return m.jsx(Y3,{...n,isInvalid:!h,className:"w-[400px]",Icon:wU,tabs:ZDe({watch:y}),onChangeName:console.log,children:m.jsxs("form",{onBlur:c(x),className:"flex flex-col gap-3",children:[m.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[m.jsx(ka,{className:"w-36",label:"Method",defaultValue:"GET",data:["GET","POST","PATCH","PUT","DEL"],name:"method",control:v}),m.jsx(On,{className:"w-full",label:"Mapping Path",placeholder:"/path/to-be/mapped",classNames:{wrapper:"font-mono pt-px"},...a("url")})]}),m.jsx(st,{onClick:s,className:"justify-center",size:"small",variant:"ghost",iconSize:14,IconLeft:r?Cxe:h$,children:"More options"}),r&&m.jsxs(m.Fragment,{children:[m.jsx(_v,{label:"URL query",onChange:N=>u("query",N),error:(E=p.query)==null?void 0:E.message}),m.jsx(_v,{label:"Headers"}),m.jsx("div",{className:"flex flex-row gap-2 items-center mt-2",children:m.jsxs(It.Wrapper,{className:"w-full",children:[m.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[m.jsx(It.Label,{children:"Body"}),m.jsx(GDe,{data:["None","Form","JSON","Code"],size:"xs",defaultValue:i,onChange:N=>o(N)})]}),i==="Form"&&m.jsx(_v,{label:void 0}),i==="JSON"&&m.jsx(_v,{label:void 0})]})})]})]})})}const ZDe=({watch:e})=>[{id:"json",label:"JSON",content:()=>m.jsx("div",{className:"scroll-auto",children:m.jsx(fs,{json:e(),expand:2,className:"bg-white break-all"})})},{id:"test",label:"test",content:()=>m.jsx("div",{children:"test"})}],e9e=w.lazy(()=>s0(()=>import("./CodeEditor-BbFL0OTB.js"),[]));function t9e({editable:e,...t}){return m.jsx(w.Suspense,{fallback:null,children:m.jsx(e9e,{className:qe("flex w-full border border-muted bg-white rounded-lg",!e&&"opacity-70"),editable:e,_extensions:{html:!0},...t})})}function n9e(e){return m.jsx(Y3,{...e,onChangeName:console.log,Icon:wU,className:"w-[400px]",children:m.jsx("form",{className:"flex flex-col gap-3",children:m.jsx(t9e,{value:e.params.render,onChange:console.log})})})}const E8={fetch:QDe,render:n9e},r9e=e=>{const{data:{label:t,start:n,last:r,responding:s}}=e,i=G3(u=>u.flow.tasks[t]),{actions:o}=x0(),a=i.type in E8?E8[i.type]:()=>m.jsx("div",{children:"unsupported"});function c(u){o.task.update(t,u)}return m.jsxs(m.Fragment,{children:[m.jsx(a,{...e,params:i.params,onChange:c}),m.jsx(Cw,{type:"target",id:`${t}-in`}),m.jsx(Cw,{type:"source",id:`${t}-out`})]})};function by({name:e,control:t,defaultValue:n,rules:r,shouldUnregister:s,onChange:i,label:o,size:a,description:c,error:u,...f}){const{field:{value:h,onChange:p,...y}}=Od({name:e,control:t,defaultValue:n,rules:r,shouldUnregister:s});return m.jsxs(It.Wrapper,{className:"relative",children:[o&&m.jsxs("div",{className:"flex flex-col",children:[m.jsx(It.Label,{size:a,children:o}),c&&m.jsx(It.Description,{size:a,children:c})]}),m.jsx(md,{value:h,onChange:v=>{p(v),i==null||i(v)},size:a,...y,...f})]})}const s9e=ze({trigger:Qt(Object.values(tn(e$,(e,t)=>We({type:ii(t),config:e.cls.schema},{title:String(t)}))))}),i9e=e=>{const{data:{label:t,...n}}=e,r=G3(E=>E.flow.trigger),{actions:s}=x0(),{register:i,handleSubmit:o,setValue:a,getValues:c,formState:{isValid:u,errors:f},watch:h,control:p}=rl({resolver:sl(s9e),defaultValues:{trigger:r},mode:"onChange"}),y=h("trigger");async function v(E){console.log("submit",E.trigger),await s.trigger.update(E.trigger)}async function x(E){console.log("change name",E),await s.flow.setName(E)}return m.jsxs(Y3,{...e,tabs:l9e({data:y}),onChangeName:x,children:[m.jsxs("form",{onBlur:o(v),className:"flex flex-col gap-3",children:[m.jsxs("div",{className:"flex flex-row justify-between items-center",children:[m.jsx(by,{label:"Trigger Type",defaultValue:"manual",data:[{label:"Manual",value:"manual"},{label:"HTTP",value:"http"},{label:"Event",value:"event",disabled:!0}],name:"trigger.type",control:p}),m.jsx(by,{label:"Execution Mode",defaultValue:"async",data:[{label:"Async",value:"async"},{label:"Sync",value:"sync"}],name:"trigger.config.mode",control:p})]}),(y==null?void 0:y.type)==="manual"&&m.jsx(o9e,{}),(y==null?void 0:y.type)==="http"&&m.jsx(a9e,{form:{watch:h,register:i,setValue:a,getValues:c,control:p}})]}),m.jsx(Cw,{type:"source",id:"trigger-out"})]})},o9e=()=>null,a9e=({form:e})=>m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[m.jsx(ka,{className:"w-36",label:"Method",data:["GET","POST","PATCH","PUT","DEL"],name:"trigger.config.method",control:e.control}),m.jsx(On,{className:"w-full",label:"Mapping Path",placeholder:"/trigger_http",classNames:{wrapper:"font-mono pt-px"},...e.register("trigger.config.path")})]}),m.jsx("div",{className:"flex flex-row gap-2 items-center",children:m.jsx(by,{className:"w-full",label:"Response Type",defaultValue:"json",data:[{label:"JSON",value:"json"},{label:"HTML",value:"html"},{label:"Text",value:"text"}],name:"trigger.config.response_type",control:e.control})})]}),l9e=({data:e,...t})=>[{id:"json",label:"JSON",content:()=>m.jsx(fs,{json:e,expand:2,className:""})},{id:"test",label:"test",content:()=>m.jsx("div",{children:"test"})}],c9e={select:WDe,trigger:i9e,task:r9e};function u9e(e){return m.jsx(VDe,{name:e.params.flow,children:m.jsx(wJ,{children:m.jsx(d9e,{})})})}function d9e(){const e=w.useRef(null),[t,n]=w.useState(),r=x0();if(!r.data||!r.name)return"no flow";w.useEffect(()=>{var u,f;console.log("ref",(u=e.current)==null?void 0:u.getBoundingClientRect()),n((f=e.current)==null?void 0:f.getBoundingClientRect())},[]);const s=qDe(r.data,r.name),i=HDe(r.data);console.log("nodes",s),console.log("edges",i);const c={zoom:1,x:t!=null&&t.width?t.width*.1:0,y:t!=null&&t.height?t.height/2-260/2-50:0};return m.jsx("div",{className:"flex flex-col w-full h-full",ref:e,children:t&&m.jsxs(m.Fragment,{children:[m.jsx(PDe,{externalProvider:!0,backgroundStyle:"dots",nodes:s,edges:i,nodeTypes:c9e,nodeDragThreshold:0,fitView:!1,defaultViewport:c,nodesConnectable:!0,onDropNewNode:u=>({...u,type:"select",data:{label:""}}),onDropNewEdge:u=>({...u,style:{strokeWidth:2},markerEnd:{type:ud.ArrowClosed,width:10,height:10}}),children:m.jsx(f9e,{})}),m.jsx(m9e,{})]})})}function f9e(){const e=G3(r=>jx(r,["name","dirty"])),[t]=Dn(),{goBack:n}=qwe(()=>t(ut.flows.flows.list()));return m.jsx(FDe,{minimap:!0,zoom:!0,children:m.jsxs(Sr,{position:"top-left",className:"gap-2 pr-6",children:[m.jsx(Sr.IconButton,{Icon:C$,round:!0,onClick:n}),m.jsxs(Sr.Text,{children:[e.name," ",e.dirty?"*":""]})]})})}const h9e=LTe("__dev_flow_debugger_tab",{tab:null}),m9e=()=>{var o;const[e,t]=Nm(h9e),n=x0(),r=UDe();function s(a){t(c=>({...c,tab:c.tab===a?null:a}))}const i=((o=e.store)==null?void 0:o.expand)||3;return m.jsx("div",{className:"flex fixed left-5 bottom-5 z-20",children:m.jsxs(wn,{value:e.tab,onChange:s,children:[m.jsx("div",{className:"max-h-96 overflow-y-scroll bg-background/70",children:m.jsxs(wn.Panel,{value:"store",children:[m.jsxs("div",{className:"flex flex-row text-sm",children:[m.jsx(fs,{className:"max-w-96 break-all",title:"Context",json:{name:n.name,...n.data},expand:i}),m.jsx(fs,{className:"max-w-96 break-all",title:"State",json:{name:r.name,...r.flow},expand:i})]}),m.jsx(QA,{className:"w-36",defaultValue:i,min:0,max:mF(r.flow??{}),onChange:IT(a=>t(c=>({...c,store:{...c.store,expand:a}})),250)})]})}),m.jsx(wn.List,{children:m.jsx(wn.Tab,{value:"store",children:"Store"})})]})})};function jJ(){const{config:e,app:t,actions:n}=dt(),r={flow:{create:async(s,i)=>{const o=Un(JV,i,{skipMark:!0,forceParse:!0});await n.add("flows",`flows.${s}`,o)}}};return{flows:t.flows,config:e.flows,actions:r}}const p9e=Object.keys(WV),g9e=We({name:td,trigger:pe({enum:p9e}),mode:pe({enum:["async","sync"]})}),y9e=w.forwardRef(function(t,n){const[r,s]=w.useState([]);function i(){var o;(o=n==null?void 0:n.current)==null||o.close()}return m.jsx(QEe,{ref:n,size:"lg",children:m.jsx(Gq,{path:r,lastBack:i,children:m.jsxs(vu,{id:"select",children:[m.jsx(bu,{path:["Create New Flow"],onClose:i}),m.jsx(b9e,{})]})})})});function b9e(){var y;const e=v$(),{actions:t}=jJ(),{nextStep:n,stepBack:r,state:s,setState:i}=Cd(),{handleSubmit:o,watch:a,control:c,register:u,formState:{isValid:f,errors:h}}=rl({resolver:sl(g9e),defaultValues:{name:"",trigger:"manual",mode:"async"},mode:"onSubmit"});async function p(v){console.log(v,f),t.flow.create(v.name,{trigger:{type:v.trigger,config:{mode:v.mode}}})}return console.log("errors",h),m.jsxs("form",{ref:e,onSubmit:o(p),children:[m.jsxs(Nd,{className:"min-h-40",children:[m.jsx("div",{children:m.jsx(On,{"data-autofocus":!0,label:"Flow Name",placeholder:"Enter flow name",error:(y=h.name)==null?void 0:y.message,...u("name",{required:!0})})}),m.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[m.jsx(by,{label:"Trigger Type",name:"trigger",data:[{label:"Manual",value:"manual"},{label:"HTTP",value:"http"},{label:"Event",value:"event"}],control:c}),m.jsx(by,{label:"Execution mode",name:"mode",data:[{label:"Async",value:"async"},{label:"Sync",value:"sync"}],control:c})]}),m.jsx("pre",{children:JSON.stringify(a(),null,2)})]}),m.jsx(_d,{next:{type:"submit",disabled:!f},nextLabel:"Create",prev:{onClick:r},prevLabel:"Cancel"})]})}function v9e(){const e=w.useRef(null),[t]=Dn(),{flows:n}=jJ();console.log("flows",n);const r=n.map(i=>{var o;return{flow:i.name,trigger:i.trigger.type,mode:i.trigger.config.mode,tasks:Object.keys(i.tasks).length,start_task:(o=i.startTask)==null?void 0:o.name}});function s(i){t(ut.flows.flows.edit(i.flow))}return m.jsxs(m.Fragment,{children:[m.jsx(y9e,{ref:e}),m.jsx(An,{right:m.jsx(st,{variant:"primary",onClick:()=>{var i;return(i=e.current)==null?void 0:i.open()},children:"Create new"}),children:"All Flows"}),m.jsx(Zn,{children:m.jsx("div",{className:"flex flex-col flex-grow p-3 gap-3",children:m.jsx(vS,{data:r,renderValue:x9e,renderHeader:Dy,onClickRow:s})})})]})}const x9e=({value:e,property:t})=>["is_default","implicit_allow"].includes(t)?e?m.jsx("span",{children:"Yes"}):m.jsx("span",{className:"opacity-50",children:"No"}):t==="permissions"?[...e||[]].map((n,r)=>m.jsx("span",{className:"inline-block px-2 py-1.5 text-sm bg-primary/5 rounded font-mono leading-none",children:n},r)):m.jsx(xS,{value:e,property:t});function w9e(){return m.jsxs(qa,{children:[m.jsx(at,{path:"/flow/:flow",component:u9e}),m.jsx(Q5e,{children:m.jsx(at,{path:"/",component:v9e})})]})}function S9e({children:e}){const{app:t,config:n}=dt(),r=!n.media.enabled;return Gr(["Media"]),m.jsxs(m.Fragment,{children:[m.jsxs(Ed,{children:[m.jsx(An,{right:m.jsx(In,{href:t.getSettingsPath(["media"]),children:m.jsx(xt,{Icon:ym})}),children:"Media"}),m.jsx(Zn,{initialOffset:96,children:m.jsx("div",{className:"flex flex-col flex-grow p-3 gap-3",children:m.jsxs("nav",{className:"flex flex-col flex-1 gap-1",children:[m.jsxs(ns,{as:In,href:"/",className:"flex flex-row justify-between",children:["Main Bucket"," ",r&&m.jsx(iS.Warning,{title:"Media not enabled.",className:"size-5"})]}),m.jsx(ns,{as:In,href:"/settings",children:"Settings"})]})})})]}),m.jsx(n0,{children:e})]})}function E9e(){const{config:e}=dt(),[,t]=vi();if(Gr(["Media"]),!e.media.enabled)return m.jsx(qn,{Icon:vU,title:"Media not enabled",description:"Please enable media in the settings to continue.",primary:{children:"Manage Settings",onClick:()=>t("/settings")}});const n=r=>{Nr.open(Nr.ids.mediaInfo,{file:r})};return m.jsx(Zn,{children:m.jsx("div",{className:"flex flex-1 p-3",children:m.jsx(p3.Dropzone,{onClick:n,infinite:!0,query:{sort:"-id"}})})})}function N9e(e){Gr(["Media","Settings"]);const{hasSecrets:t}=dt({withSecrets:!0});return t?m.jsx(C9e,{...e}):m.jsx(Is.MissingPermission,{what:"Media Settings"})}const _9e={ignoreKeys:["entity_name","basepath"],options:{debug:Hr(),keepEmpty:!0}};function C9e(){const{config:e,schema:t,actions:n}=DW(),{readonly:r}=dt(),s=JSON.parse(JSON.stringify(t));s.if={properties:{enabled:{const:!0}}},s.then={required:["adapter"]};async function i(o){console.log("submit",o),await n.config.patch(o)}return m.jsx(m.Fragment,{children:m.jsxs(CS,{schema:s,initialValues:e,onSubmit:i,..._9e,readOnly:r,children:[m.jsx(m0,{selector:o=>({dirty:o.dirty,errors:o.errors.length>0,submitting:o.submitting}),children:({dirty:o,errors:a,submitting:c})=>m.jsx(An,{right:!r&&m.jsx(st,{variant:"primary",type:"submit",disabled:!o||a||c,children:"Update"}),children:"Settings"})}),m.jsxs(Zn,{children:[m.jsx(O9e,{}),m.jsxs("div",{className:"flex flex-col gap-3 p-3",children:[m.jsx(fi,{name:"enabled",inputProps:{"data-testId":OG.media.switchEnabled}}),m.jsxs("div",{className:"flex flex-col gap-3 relative",children:[m.jsx(N8,{}),m.jsx(fi,{name:"storage.body_max_size",label:"Storage Body Max Size"})]})]}),m.jsx(HO,{}),m.jsxs("div",{className:"flex flex-col gap-3 p-3 relative",children:[m.jsx(N8,{}),m.jsx(bg.Root,{path:"adapter",children:m.jsx(T9e,{})})]}),m.jsx(OS,{})]})]})})}const O9e=()=>{const e=h0("",{strict:!0});return e.length===0?null:m.jsx(No.Exception,{children:e.map((t,n)=>m.jsx("div",{children:t.message},n))})},j9e={s3:hxe,cloudinary:yxe,local:jxe,r2:mxe},A9e=({type:e})=>{var n;const t=(n=Object.entries(j9e).find(([r])=>e.startsWith(r)))==null?void 0:n[1];return t?m.jsx(t,{}):null};function T9e(){var n;const e=bg.useContext(),{readonly:t}=dt();return m.jsxs(Zi,{children:[m.jsxs(ld,{className:"flex flex-row items-center gap-1",children:[m.jsx("span",{className:"font-bold",children:"Media Adapter:"}),e.selected===null&&m.jsx("span",{className:"opacity-70",children:" (Choose one)"})]}),m.jsx("div",{className:"grid grid-cols-2 md:flex flex-row gap-1 mb-2 flex-wrap",children:(n=e.schemas)==null?void 0:n.map((r,s)=>m.jsxs(st,{onClick:()=>e.select(s),id:`adapter-${r.properties.type.const}`,variant:e.selected===s?"primary":"outline",className:qe("flex flex-row items-center justify-center gap-3 border",e.selected===s&&"border-primary"),disabled:t,children:[m.jsx("div",{children:m.jsx(A9e,{type:r.properties.type.const})}),m.jsxs("div",{className:"flex flex-col items-start justify-center",children:[m.jsx("span",{children:Ku(r.title)}),r.description&&m.jsx("span",{className:"text-xs opacity-70 text-left",children:r.description})]})]},s))}),e.selected!==null&&m.jsxs(Zi,{as:"fieldset",error:e.errors.length>0,children:[m.jsx(ld,{as:"legend",className:"font-mono px-2 w-min-content",children:Ku(e.selectedSchema.title)}),m.jsxs(j3,{schema:e.selectedSchema,prefix:e.path,children:[m.jsx(fi,{name:"type",hidden:!0}),m.jsx(jS,{path:"config",wrapperProps:{label:!1,wrapper:"group"}})]})]})]})}const N8=()=>m.jsx(m0,{selector:e=>({enabled:e.data.enabled}),children:({enabled:e})=>!e&&m.jsx("div",{className:"absolute w-full h-full z-50 inset-0 bg-background opacity-90"})});function $9e(){return m.jsxs(S9e,{children:[m.jsx(at,{path:"/",component:E9e}),m.jsx(at,{path:"/settings",component:N9e})]})}function R9e(e,t){const n=w.useRef(!1),r=w.useRef(t);w.useEffect(()=>{if(!n.current||!k9e(r.current,t))return n.current=!0,r.current=t,e()},[t])}function k9e(e,t){return e&&e.length===0&&t.length===0||!e&&t.length===0?!0:!e||!t||e.length!==t.length?!1:e.every((n,r)=>Object.is(n,t[r]))}const M9e=({children:e})=>{const{verify:t,user:n}=yU();return R9e(()=>{t()},[n==null?void 0:n.id]),m.jsxs(Lq,{children:[m.jsx(fEe,{}),m.jsx(Fq,{children:e})]})};function I9e(){const[e]=Dn();return w.useEffect(()=>{e("/data")},[]),Gr(),m.jsx(qn,{Icon:wxe,title:"Not implemented yet",description:'Go checkout "Data" or "Media" for some action.'})}const Yp={jwt:{basepath:{"ui:options":{label:!1}},fields:{"ui:options":{orderable:!1}}},strategies:{additionalProperties:{"ui:widget":"select",type:{"ui:widget":"hidden"}},type:{"ui:widget":"hidden"}},roles:{"ui:options":{orderable:!1},permissions:{items:{"ui:widget":"checkboxes"},"ui:widget":"checkboxes"}}},P9e=({schema:e,config:t})=>{var o,a;const n=dt(),r=B1(e),s=n.app.getAbsolutePath("settings");try{const c=t.entity_name??"users",u=n.config.data.entities??{};console.log("entities",u,c);const f=Object.entries(((o=u[c])==null?void 0:o.fields)??{}).map(([h,p])=>{var y;return(y=p.config)!=null&&y.virtual?void 0:h}).filter(Boolean);f.length>0&&(console.log("user_fields",f),r.properties.jwt.properties.fields.items.enum=f,r.properties.jwt.properties.fields.uniqueItems=!0,Yp.jwt.fields["ui:widget"]="checkboxes")}catch{}console.log("_s",n);const i=((a=r.properties.roles)==null?void 0:a.additionalProperties)??{type:"object"};return n.permissions&&(i.properties.permissions.items.enum=n.permissions,i.properties.permissions.uniqueItems=!0),m.jsx(at,{path:"/auth",nest:!0,children:m.jsxs(qa,{children:[m.jsx(at,{path:"/roles/:role",component:({params:{role:c}})=>{var u;return m.jsx(rs,{schema:i,uiSchema:Yp.roles,config:(u=t.roles)==null?void 0:u[c],path:["auth","roles",c],prefix:`${s}/auth/roles/${c}`})},nest:!0}),m.jsx(at,{path:"/strategies/:strategy",component:({params:{strategy:c}})=>{var p,y;const u=(p=t.strategies)==null?void 0:p[c],f=r.properties.strategies.additionalProperties,h=f.anyOf.find(v=>v.properties.type.const===(u==null?void 0:u.type));return m.jsx(rs,{schema:h??f,config:(y=t.strategies)==null?void 0:y[c],path:["auth","strategies",c],prefix:`${s}/auth/strategies/${c}`})},nest:!0}),m.jsx(at,{path:"/",component:()=>m.jsx(rs,{schema:r,uiSchema:Yp,config:t,options:{showAlert:c=>{if(!c.enabled)return"Auth is disabled. Enable it by toggling the switch below. Please also make sure set a secure secret to sign JWT tokens."},reloadOnSave:!0},properties:{strategies:{extract:!0,tableValues:c=>Object.values(tn(c,(u,f)=>({key:f,type:u.type}))),new:{schema:r.properties.strategies.additionalProperties,uiSchema:Yp.strategies,generateKey:c=>{var u;return c.type==="password"?"password":((u=c.config.name)==null?void 0:u.toLowerCase())||""}}},roles:{extract:!0,new:{schema:i,uiSchema:Yp.roles}}},prefix:`${s}/auth`,path:["auth"]}),nest:!0})]})})},D9e={jwt:{basepath:{"ui:options":{label:!1}},fields:{"ui:options":{orderable:!1}}},strategies:{additionalProperties:{"ui:widget":"select",type:{"ui:widget":"hidden"}},type:{"ui:widget":"hidden"}}},L9e=({schema:e,config:t})=>{const{app:n}=dt(),r=n.getAbsolutePath("settings");function s(i,o,a){const c=Object.keys(o.tasks??{});c.length!==0&&(i.properties&&a in i.properties&&(i.properties[a].enum=c),"anyOf"in i&&i.anyOf.forEach(u=>s(u,o,a)))}return m.jsx(at,{path:"/flows",nest:!0,children:m.jsxs(qa,{children:[m.jsx(at,{path:"/flows/:flow/connections/:connection",component:({params:{flow:i,connection:o}})=>{var f,h,p,y;const a=(f=t.flows)==null?void 0:f[i],c=(y=(p=(h=t.flows)==null?void 0:h[i])==null?void 0:p.connections)==null?void 0:y[o],u=e.properties.flows.additionalProperties.properties.connections.additionalProperties;return s(u,a,"source"),s(u,a,"target"),m.jsx(rs,{schema:u,config:c,path:["flows","flows",i,"connections",o],prefix:`${r}/flows/flows/${i}/connections/${o}`})},nest:!0}),m.jsx(at,{path:"/flows/:flow/tasks/:task",component:({params:{flow:i,task:o}})=>{var f,h,p;const a=(p=(h=(f=t.flows)==null?void 0:f[i])==null?void 0:h.tasks)==null?void 0:p[o],u=e.properties.flows.additionalProperties.properties.tasks.additionalProperties.anyOf.find(y=>y.properties.type.const===(a==null?void 0:a.type));return m.jsx(rs,{schema:u,config:a,path:["flows","flows",i,"tasks",o],prefix:`${r}/flows/flows/${i}/tasks/${o}`,uiSchema:{params:{render:{"ui:field":"HtmlField"}}}})},nest:!0}),m.jsx(at,{path:"/flows/:flow",component:({params:{flow:i}})=>{var f;const o=(f=t.flows)==null?void 0:f[i],a=e.properties.flows.additionalProperties,c=a.properties.tasks.additionalProperties,u=a.properties.connections.additionalProperties;return s(a,o,"start_task"),s(a,o,"responding_task"),s(u,o,"source"),s(u,o,"target"),m.jsx(rs,{schema:a,config:o,path:["flows","flows",i],prefix:`${r}/flows/flows/${i}`,properties:{tasks:{extract:!0,new:{schema:c},tableValues:h=>ti(h,(p,y,v)=>{p.push({name:v,type:y.type})},[])},connections:{extract:!0,new:{schema:u,generateKey:crypto.randomUUID()},tableValues:h=>ti(h,(p,y,v)=>{var x;p.push({id:v,source:y.source,target:y.target,condition:(x=y.config.condition)==null?void 0:x.type})},[])}}})},nest:!0}),m.jsx(at,{path:"/",component:()=>m.jsx(rs,{schema:e,uiSchema:D9e,config:t,properties:{flows:{extract:!0,new:{schema:e.properties.flows.additionalProperties},tableValues:i=>ti(i,(o,a,c)=>{o.push({name:c,trigger:a.trigger.type,mode:a.trigger.config.mode,start_task:a.start_task,responding_task:a.responding_task})},[])}},prefix:`${r}/flows`,path:["flows"]}),nest:!0})]})})},F9e={cors:{allow_methods:{"ui:widget":"checkboxes"},allow_headers:{"ui:options":{orderable:!1}}}},B9e=({schema:e,config:t})=>{const{app:n}=dt(),r=B1(e),s=n.getAbsolutePath("settings"),i=r;return m.jsx(at,{path:"/server",nest:!0,children:m.jsx(at,{path:"/",component:()=>m.jsx(rs,{schema:i,uiSchema:F9e,config:t,prefix:`${s}/server`,path:["server"]}),nest:!0})})};function z9e(){const{version:e,schema:t,actions:n,app:r}=dt();Gr(["Settings"]);async function s(){await n.reload()}const i=Object.keys(t).map(o=>({title:t[o].title??ci(o),key:o}));return m.jsxs(Ed,{children:[m.jsx(An,{right:m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsxs("span",{className:"font-mono leading-none",children:["v",e]}),m.jsx(xt,{Icon:Oxe,onClick:s})]}),children:"Settings"}),m.jsx(Zn,{initialOffset:96,children:m.jsx("div",{className:"flex flex-col flex-grow p-3 gap-3",children:m.jsx("nav",{className:"flex flex-col flex-1 gap-1",children:i.map((o,a)=>m.jsx(ns,{as:In,href:`/${o.key}`,children:o.title},a))})})})]})}function V9e(){return dt({withSecrets:!0}).hasSecrets?m.jsxs(m.Fragment,{children:[m.jsx(z9e,{}),m.jsx(n0,{children:m.jsxs(qa,{children:[m.jsx(at,{path:"/",component:()=>m.jsx(qn,{Icon:Kg,title:"No Setting selected",description:"Please select a setting from the left sidebar."})}),m.jsx(q9e,{}),m.jsx(at,{path:"*",component:()=>m.jsx(qn,{Icon:Kg,title:"Settings not found",description:"Check other options."})})]})})]}):m.jsx(Is.MissingPermission,{what:"the settings"})}const U9e={media:{adapter:{"ui:options":{label:!1}}}},q9e=()=>{const{schema:e,config:t}=dt();return console.log("flows",{schema:e.flows,config:t.flows}),m.jsxs(m.Fragment,{children:[m.jsx(B9e,{schema:e.server,config:t.server}),m.jsx(aAe,{schema:e.data,config:t.data}),m.jsx(P9e,{schema:e.auth,config:t.auth}),m.jsx(H9e,{module:"media",schema:e,config:t,uiSchema:U9e.media,options:{reloadOnSave:!0}}),m.jsx(L9e,{schema:e.flows,config:t.flows})]})},H9e=({module:e,schema:t,config:n,...r})=>{const{app:s}=dt(),i=s.getAbsolutePath("settings");return m.jsx(at,{path:e,nest:!0,children:m.jsx(qa,{children:m.jsx(at,{path:"/",component:()=>m.jsx(rs,{...r,schema:t[e],config:n[e],prefix:`${i}/${e}`,path:[e]}),nest:!0})})})};function W9e(){const[e,t]=w.useState();if(w.useEffect(()=>{if(!e){const n=s0e();n&&t(n)}},[]),e){let n=No.Info;switch(e.type){case"error":n=No.Exception;break;case"success":n=No.Success;break;case"warning":n=No.Warning;break}return m.jsx(n,{message:e.message,className:"justify-center"})}return null}function G9e(){return Gr(["Register"]),m.jsx($W.Screen,{action:"register",logo:m.jsx(In,{href:"/",className:"link",children:m.jsx(eS,{scale:.25})})})}const ri=Z1(Zy({tools:[],feature:"tools",content:null,history:[],historyLimit:50,historyVisible:!1},e=>({setTools:t=>e({tools:t}),setFeature:t=>e({feature:t}),setContent:t=>e({content:t}),addHistory:(t,n)=>e(r=>({history:[{type:t,data:n},...r.history.slice(0,r.historyLimit-1)]})),setHistoryLimit:t=>e({historyLimit:t}),setHistoryVisible:t=>e({historyVisible:t})})));function _8(e){return!e||e===void 0||e===null?void 0:new N3(e).getTemplate(void 0,e)}function Y9e(...e){return e.filter(Boolean).join(" ")}const lC=new Map;function J9e(e){return lC.has(JSON.stringify(e))||lC.set(JSON.stringify(e),new Nce(e)),lC.get(JSON.stringify(e))}function AJ(){const{config:e}=dt();return J9e({url:window.location.origin+e.server.mcp.path})}function X9e({open:e,toggle:t}){const n=AJ(),r=Ra(x=>x.closeSidebar("default")),s=ri(x=>x.tools),i=ri(x=>x.setTools),o=ri(x=>x.setContent),a=ri(x=>x.content),[c,u]=w.useState(!1),[f,h]=w.useState(""),[p,y]=w.useState(null),v=w.useCallback(async()=>{u(!0),y(null);try{const x=await n.listTools();x&&i(x.tools)}catch(x){console.error(x),y(String(x))}u(!1)},[]);return w.useEffect(()=>{v()},[]),m.jsx(T$,{title:"Tools",open:e,toggle:t,renderHeaderRight:()=>m.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[p&&m.jsx(iS.Err,{title:p,className:"size-5 pointer-events-auto"}),m.jsx("span",{className:"flex-inline bg-primary/10 px-2 py-1.5 rounded-xl text-sm font-mono leading-none",children:s.length}),m.jsx(xt,{Icon:Iq,disabled:!e||c,onClick:v})]}),children:m.jsxs("div",{className:"flex flex-col flex-grow p-3 gap-3",children:[m.jsx(il,{type:"text",placeholder:"Search tools",value:f,onChange:x=>h(x.target.value),autoCapitalize:"none"}),m.jsx("nav",{className:"flex flex-col flex-1 gap-1",children:s.filter(x=>x.name.toLowerCase().includes(f.toLowerCase())).map(x=>m.jsxs(ns,{className:Y9e("flex flex-col items-start h-auto py-3 gap-px",(a==null?void 0:a.name)===x.name?"active":""),onClick:()=>{o(x),r()},children:[m.jsx("span",{className:"font-mono",children:x.name}),m.jsx("span",{className:"text-sm text-primary/50",children:x.description})]},x.name))})]})})}function K9e(){var x;const e=ri(E=>E.content),t=ri(E=>E.addHistory),[n,r]=w.useState(_8(e==null?void 0:e.inputSchema)),[s,i]=w.useState(null),o=ri(E=>E.historyVisible),a=ri(E=>E.setHistoryVisible),c=AJ(),u=w.useRef(null),f=(e==null?void 0:e.inputSchema)&&Object.keys(e.inputSchema.properties??{}).length>0,[h,p]=w.useTransition();w.useEffect(()=>{r(_8(e==null?void 0:e.inputSchema)),i(null)},[e]);const y=w.useCallback(async()=>{if(!(e!=null&&e.name))return;const E={name:e.name,arguments:n};p(async()=>{var _;t("request",E);const N=await c.callTool(E);N&&(i(N),t("response",N),(_=u.current)==null||_.setSelected("Result"))})},[n]);if(!e)return null;let v=s;try{v=s?(x=s.content)!=null&&x[0].text?JSON.parse(s.content[0].text):s:null}catch{}return m.jsxs(CS,{className:"flex flex-grow flex-col min-w-0 max-w-screen",schema:{title:"InputSchema",...e==null?void 0:e.inputSchema},validateOn:"submit",initialValues:n,hiddenSubmit:!1,onChange:E=>{r(E)},onSubmit:y,children:[m.jsx(An,{className:"max-w-full min-w-0",right:m.jsxs("div",{className:"flex flex-row gap-2",children:[m.jsx(xt,{Icon:o?GSe:WSe,onClick:()=>a(!o)}),m.jsx(st,{type:"submit",disabled:!(e!=null&&e.name)||h,variant:"primary",className:"whitespace-nowrap",children:"Call Tool"})]}),children:m.jsxs(r0,{className:"leading-tight",children:[m.jsxs("span",{className:"opacity-50",children:["Tools ",m.jsx("span",{className:"opacity-70",children:"/"})]})," ",m.jsx("span",{className:"truncate",children:e==null?void 0:e.name})]})}),m.jsxs("div",{className:"flex flex-grow flex-row w-vw",children:[m.jsx("div",{className:"flex flex-grow flex-col max-w-full",style:{width:"calc(100% - var(--sidebar-width-right) - 1px)"},children:m.jsx(Zn,{children:m.jsxs("div",{className:"flex flex-col py-4 px-5  gap-4",children:[m.jsx("p",{className:"text-primary/80",children:e==null?void 0:e.description}),f&&m.jsx(fi,{name:""}),m.jsx(KEe,{ref:u,expand:9,showCopy:!0,showSize:!0,tabs:{Arguments:{json:n,title:"Payload",enabled:f},Result:{json:v,title:"Result"},Configuration:{json:e??null,title:"Configuration"}}})]},JSON.stringify(e))})}),o&&m.jsx(Ed,{name:"right",handle:"left",maxWidth:window.innerWidth*.4,children:m.jsx(Q9e,{})})]})]},e.name)}const Q9e=()=>{const e=ri(t=>t.history.slice(0,50));return m.jsxs(m.Fragment,{children:[m.jsx(An,{children:"History"}),m.jsx(Zn,{children:m.jsx("div",{className:"flex flex-col flex-grow p-3 gap-1",children:e.map((t,n)=>m.jsx(fs,{json:t.data,title:t.type.substring(0,3),expand:2,showCopy:!0},`${t.type}-${n}`))})})]})};function Z9e(){Gr(["MCP UI"]);const{config:e,options:t}=dt(),n=ri(a=>a.feature),r=ri(a=>a.setFeature),s=ri(a=>a.content),i=Ra(a=>a.toggleSidebar("default")),o=e.server.mcp.path;return e.server.mcp.enabled?m.jsxs("div",{className:"flex flex-col flex-grow max-w-screen",children:[m.jsx(An,{children:m.jsxs("div",{className:"flex flex-row gap-4 items-center",children:[m.jsx(Dq,{}),m.jsx(r0,{className:"whitespace-nowrap truncate",children:"MCP UI"}),m.jsxs("div",{className:"hidden md:flex flex-row gap-2 items-center bg-primary/5 rounded-full px-3 pr-3.5 py-2",children:[m.jsx(aEe,{}),m.jsx("div",{className:"min-w-0 flex-1",children:m.jsx("span",{className:"block truncate text-sm font-mono leading-none",children:window.location.origin+o})})]})]})}),m.jsxs("div",{className:"flex h-full",children:[m.jsxs(Ed,{children:[m.jsx(X9e,{open:n==="tools",toggle:()=>r("tools")}),m.jsx(T$,{title:"Resources",open:n==="resources",toggle:()=>r("resources"),children:m.jsx("div",{className:"flex flex-col flex-grow p-3 gap-3 justify-center items-center opacity-40",children:m.jsx("i",{children:"Resources"})})})]}),n==="tools"&&m.jsx(K9e,{}),!s&&m.jsx(qn,{title:"No tool selected",description:"Please select a tool to continue.",children:m.jsx(st,{variant:"primary",onClick:()=>i(),className:"block md:hidden",children:"Open Tools"})})]})]}):m.jsx(qn,{title:"MCP not enabled",description:"Please enable MCP in the settings to continue."})}function e8e(){return m.jsxs(m.Fragment,{children:[m.jsx(at,{path:"/",component:t8e}),m.jsx(at,{path:"/mcp",component:Z9e})]})}function t8e(){return m.jsx(qn,{title:"Tools",description:"Select a tool to continue."})}const n8e=w.lazy(()=>s0(()=>import("./index-BcZrMAOw.js"),__vite__mapDeps([2,1])));function r8e({BkndWrapper:e,basePath:t="",children:n}){const{theme:r}=Bc(),s=G1(),i=t||s.admin_basepath;return m.jsxs("div",{id:"bknd-admin",className:r+" antialiased",children:[m.jsx(W9e,{}),m.jsx(BU,{base:i,children:m.jsxs(qa,{children:[m.jsx(at,{path:"/auth/login",component:t5e}),m.jsx(at,{path:"/auth/register",component:G9e}),m.jsx(e,{children:m.jsx(j4e,{children:m.jsx(at,{path:"/",nest:!0,children:m.jsx(M9e,{children:m.jsxs(qa,{children:[m.jsx(at,{path:"/test*",nest:!0,children:m.jsx(w.Suspense,{fallback:null,children:m.jsx(n8e,{})})}),n,m.jsx(at,{path:"/",component:I9e}),m.jsx(at,{path:"/data",nest:!0,children:m.jsx(w.Suspense,{fallback:null,children:m.jsx(K5e,{})})}),m.jsx(at,{path:"/flows",nest:!0,children:m.jsx(w.Suspense,{fallback:null,children:m.jsx(w9e,{})})}),m.jsx(at,{path:"/auth",nest:!0,children:m.jsx(w.Suspense,{fallback:null,children:m.jsx(e5e,{})})}),m.jsx(at,{path:"/media",nest:!0,children:m.jsx(w.Suspense,{fallback:null,children:m.jsx($9e,{})})}),m.jsx(at,{path:"/settings",nest:!0,children:m.jsx(w.Suspense,{fallback:null,children:m.jsx(V9e,{})})}),m.jsx(at,{path:"/tools",nest:!0,children:m.jsx(w.Suspense,{fallback:null,children:m.jsx(e8e,{})})}),m.jsx(at,{path:"*",component:s8e})]})})})})})]})})]})}function s8e(){return m.jsx("div",{className:"flex w-full items-center justify-center",children:m.jsxs("p",{className:"text-2xl font-mono",children:[m.jsx("span",{className:"font-bold",children:"404"}),m.jsx("span",{className:"opacity-50",children:", Sorry :)"})]})})}function i8e({baseUrl:e,withProvider:t=!1,config:n={},children:r}){const{theme:s}=Bc(),i=({children:c})=>t?m.jsx(wve,{baseUrl:e,...typeof t=="object"?t:{},children:c}):c,o={...n,...G1()},a=({children:c})=>m.jsx(Hwe,{options:o,fallback:m.jsx(o8e,{theme:o==null?void 0:o.theme}),children:c});return m.jsx(i,{children:m.jsxs(c7,{...gEe(s),children:[m.jsx(Do,{position:"top-right"}),m.jsx(r8e,{BkndWrapper:a,basePath:o==null?void 0:o.basepath,children:r})]})})}const o8e=({theme:e})=>{const t=Bc(),n=e&&["dark","light"].includes(e)?e:t.theme;return m.jsx("div",{id:"bknd-admin",className:n+" antialiased",children:m.jsxs(Lq,{children:[m.jsxs("header",{"data-shell":"header",className:"flex flex-row w-full h-16 gap-2.5 border-muted border-b justify-start bg-muted/10",children:[m.jsx("div",{className:"max-h-full flex hover:bg-primary/5 link p-2.5 w-[134px] outline-none",children:m.jsx(eS,{theme:n})}),m.jsx("nav",{className:"hidden md:flex flex-row gap-2.5 pl-0 p-2.5 items-center",children:[...new Array(4)].map((r,s)=>m.jsx(hg,{as:"span",className:"active h-full opacity-50",children:m.jsx("div",{className:"w-18 h-3"})},s))}),m.jsx("nav",{className:"flex md:hidden flex-row gap-2.5 pl-0 p-2.5 items-center",children:m.jsx(hg,{as:"span",className:"active h-full opacity-50",children:m.jsx("div",{className:"w-20 h-3"})})}),m.jsx("div",{className:"flex flex-grow"}),m.jsx("div",{className:"hidden lg:flex flex-row items-center px-4 gap-2 opacity-50",children:m.jsx("div",{className:"size-11 rounded-full bg-primary/10"})})]}),m.jsx(Fq,{children:m.jsx("div",{className:"flex flex-col w-full h-full justify-center items-center"})})]})})};function C8(){qK.createRoot(document.getElementById("root")).render(m.jsx(w.StrictMode,{children:m.jsx(i8e,{withProvider:!0})}))}"startViewTransition"in document?document.startViewTransition(C8):C8();export{CS as $,Qbe as A,TS as B,$xe as C,jr as D,GDe as E,KT as F,Zi as G,h1 as H,xt as I,fs as J,On as K,ld as L,s7 as M,MAe as N,od as O,sT as P,It as Q,c5e as R,An as S,nl as T,ZU as U,wU as V,Cxe as W,h$ as X,_v as Y,pSe as Z,dt as _,Gj as a,az as a$,ze as a0,Qt as a1,pe as a2,jt as a3,NW as a4,t9e as a5,Xu as a6,si as a7,Ka as a8,Ls as a9,PDe as aA,FDe as aB,Tz as aC,ds as aD,JB as aE,QB as aF,$1 as aG,Jhe as aH,Xhe as aI,fm as aJ,FN as aK,zg as aL,Gb as aM,B1 as aN,uz as aO,joe as aP,$h as aQ,Mq as aR,Pq as aS,vSe as aT,ySe as aU,Dy as aV,wa as aW,D6 as aX,M1 as aY,Ege as aZ,NT as a_,Pc as aa,rl as ab,sl as ac,cDe as ad,Nje as ae,vxe as af,ije as ag,Hje as ah,No as ai,_8e as aj,at as ak,qn as al,Ed as am,ns as an,In as ao,n0 as ap,bm as aq,y$ as ar,eo as as,yy as at,it as au,E8e as av,S8e as aw,Bc as ax,ud as ay,wJ as az,d$ as b,ko as b0,vd as b1,Ah as b2,I1 as b3,Lg as b4,Di as b5,jT as b6,hhe as b7,z1 as b8,Ofe as b9,jz as ba,wge as bb,Afe as bc,sO as bd,zpe as be,Ox as bf,Dpe as bg,Nfe as bh,jge as bi,l8e as bj,ti as bk,Or as bl,LA as bm,_h as bn,st as c,Kg as d,f$ as e,uxe as f,gxe as g,pxe as h,nAe as i,m as j,il as k,Zn as l,Y1 as m,fC as n,rxe as o,J1 as p,ixe as q,w as r,Un as s,qe as t,UQ as u,vm as v,gm as w,_W as x,p3 as y,vc as z};
